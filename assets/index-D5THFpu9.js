const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-BR63Ztz8.js","assets/if-defined-CHTjjUPz.js","assets/index-BLzRo9aD.js","assets/index-CDqZ2cMz.js","assets/ref-BgxE_rZ7.js","assets/index-z79QIVyv.js","assets/index-BbnDAKXc.js","assets/index-oKm4EzgJ.js","assets/index-BtgVwkvY.js","assets/index-DFnaFV4I.js","assets/index-cf76jWi9.js","assets/index-YlOs9HNi.js","assets/email-DMTQtmuZ.js","assets/index-CUiclEah.js","assets/socials-A_6eDGRS.js","assets/index-Cclpibpq.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BBlgoK9s.js","assets/index-D_Ct51Of.js","assets/index-3HCUWIJ1.js","assets/index-urjv3cSy.js","assets/swaps-C25R9VzU.js","assets/index-CQ7Kv7CD.js","assets/index-CFW1TAkQ.js","assets/index-CW0ylByD.js","assets/send-Bqr-qHjl.js","assets/index-DDu1AJtv.js","assets/index-CgF8mxNL.js","assets/receive-F-0Y0GNL.js","assets/index-DZBxTylf.js","assets/onramp-gERYt3ak.js","assets/index-Csw9hkZS.js","assets/index-BOKHDogQ.js","assets/index-CroOq-xw.js","assets/transactions-Br1dCGO0.js","assets/index-B0JtEx2L.js","assets/index-CdzwUp8p.js","assets/index-ggNr1Qih.js","assets/index-B2BfAjMq.js","assets/index-9zAHYSnh.js","assets/w3m-modal-DzCm2Llk.js"])))=>i.map(i=>d[i]);
var pre=Object.defineProperty;var rB=t=>{throw TypeError(t)};var gre=(t,e,n)=>e in t?pre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>gre(t,typeof e!="symbol"?e+"":e,n),AR=(t,e,n)=>e.has(t)||rB("Cannot "+n);var C=(t,e,n)=>(AR(t,e,"read from private field"),n?n.call(t):e.get(t)),Q=(t,e,n)=>e.has(t)?rB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),$=(t,e,n,r)=>(AR(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),he=(t,e,n)=>(AR(t,e,"access private method"),n);var Td=(t,e,n,r)=>({set _(s){$(t,e,s,n)},get _(){return C(t,e,r)}});function mre(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function bz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var vz={exports:{}},pN={},Ez={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_=Symbol.for("react.element"),yre=Symbol.for("react.portal"),wre=Symbol.for("react.fragment"),bre=Symbol.for("react.strict_mode"),vre=Symbol.for("react.profiler"),Ere=Symbol.for("react.provider"),Cre=Symbol.for("react.context"),_re=Symbol.for("react.forward_ref"),Are=Symbol.for("react.suspense"),Sre=Symbol.for("react.memo"),xre=Symbol.for("react.lazy"),sB=Symbol.iterator;function Ire(t){return t===null||typeof t!="object"?null:(t=sB&&t[sB]||t["@@iterator"],typeof t=="function"?t:null)}var Cz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_z=Object.assign,Az={};function ob(t,e,n){this.props=t,this.context=e,this.refs=Az,this.updater=n||Cz}ob.prototype.isReactComponent={};ob.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ob.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sz(){}Sz.prototype=ob.prototype;function K5(t,e,n){this.props=t,this.context=e,this.refs=Az,this.updater=n||Cz}var Y5=K5.prototype=new Sz;Y5.constructor=K5;_z(Y5,ob.prototype);Y5.isPureReactComponent=!0;var iB=Array.isArray,xz=Object.prototype.hasOwnProperty,Q5={current:null},Iz={key:!0,ref:!0,__self:!0,__source:!0};function Nz(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)xz.call(e,r)&&!Iz.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:z_,type:t,key:i,ref:o,props:s,_owner:Q5.current}}function Nre(t,e){return{$$typeof:z_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function J5(t){return typeof t=="object"&&t!==null&&t.$$typeof===z_}function Tre(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var oB=/\/+/g;function SR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Tre(""+t.key):e.toString(36)}function _S(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case z_:case yre:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+SR(o,0):r,iB(s)?(n="",t!=null&&(n=t.replace(oB,"$&/")+"/"),_S(s,e,n,"",function(l){return l})):s!=null&&(J5(s)&&(s=Nre(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(oB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",iB(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+SR(i,a);o+=_S(i,e,n,c,s)}else if(c=Ire(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+SR(i,a++),o+=_S(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sA(t,e,n){if(t==null)return t;var r=[],s=0;return _S(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Rre(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wi={current:null},AS={transition:null},Pre={ReactCurrentDispatcher:Wi,ReactCurrentBatchConfig:AS,ReactCurrentOwner:Q5};function Tz(){throw Error("act(...) is not supported in production builds of React.")}Zt.Children={map:sA,forEach:function(t,e,n){sA(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sA(t,function(){e++}),e},toArray:function(t){return sA(t,function(e){return e})||[]},only:function(t){if(!J5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Zt.Component=ob;Zt.Fragment=wre;Zt.Profiler=vre;Zt.PureComponent=K5;Zt.StrictMode=bre;Zt.Suspense=Are;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pre;Zt.act=Tz;Zt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_z({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Q5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)xz.call(e,c)&&!Iz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:z_,type:t.type,key:s,ref:i,props:r,_owner:o}};Zt.createContext=function(t){return t={$$typeof:Cre,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ere,_context:t},t.Consumer=t};Zt.createElement=Nz;Zt.createFactory=function(t){var e=Nz.bind(null,t);return e.type=t,e};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(t){return{$$typeof:_re,render:t}};Zt.isValidElement=J5;Zt.lazy=function(t){return{$$typeof:xre,_payload:{_status:-1,_result:t},_init:Rre}};Zt.memo=function(t,e){return{$$typeof:Sre,type:t,compare:e===void 0?null:e}};Zt.startTransition=function(t){var e=AS.transition;AS.transition={};try{t()}finally{AS.transition=e}};Zt.unstable_act=Tz;Zt.useCallback=function(t,e){return Wi.current.useCallback(t,e)};Zt.useContext=function(t){return Wi.current.useContext(t)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(t){return Wi.current.useDeferredValue(t)};Zt.useEffect=function(t,e){return Wi.current.useEffect(t,e)};Zt.useId=function(){return Wi.current.useId()};Zt.useImperativeHandle=function(t,e,n){return Wi.current.useImperativeHandle(t,e,n)};Zt.useInsertionEffect=function(t,e){return Wi.current.useInsertionEffect(t,e)};Zt.useLayoutEffect=function(t,e){return Wi.current.useLayoutEffect(t,e)};Zt.useMemo=function(t,e){return Wi.current.useMemo(t,e)};Zt.useReducer=function(t,e,n){return Wi.current.useReducer(t,e,n)};Zt.useRef=function(t){return Wi.current.useRef(t)};Zt.useState=function(t){return Wi.current.useState(t)};Zt.useSyncExternalStore=function(t,e,n){return Wi.current.useSyncExternalStore(t,e,n)};Zt.useTransition=function(){return Wi.current.useTransition()};Zt.version="18.3.1";Ez.exports=Zt;var D=Ez.exports;const ea=lm(D),Ore=mre({__proto__:null,default:ea},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kre=D,Dre=Symbol.for("react.element"),Mre=Symbol.for("react.fragment"),Lre=Object.prototype.hasOwnProperty,$re=kre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ure={key:!0,ref:!0,__self:!0,__source:!0};function Rz(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Lre.call(e,r)&&!Ure.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Dre,type:t,key:i,ref:o,props:s,_owner:$re.current}}pN.Fragment=Mre;pN.jsx=Rz;pN.jsxs=Rz;vz.exports=pN;var m=vz.exports,aB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te=function(t,e){if(!t)throw ab(e)},ab=function(t){return new Error("Firebase Database ("+Pz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Bre=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Z5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Oz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Bre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Fre;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Fre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kz=function(t){const e=Oz(t);return Z5.encodeByteArray(e,!0)},yx=function(t){return kz(t).replace(/\./g,"")},N2=function(t){try{return Z5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jre(t){return Dz(void 0,t)}function Dz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Wre(n)||(t[n]=Dz(t[n],e[n]));return t}function Wre(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hre=()=>zre().__FIREBASE_DEFAULTS__,Gre=()=>{if(typeof process>"u"||typeof aB>"u")return;const t=aB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&N2(t[1]);return e&&JSON.parse(e)},Mz=()=>{try{return Hre()||Gre()||qre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Vre=t=>{var e,n;return(n=(e=Mz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kre=t=>{const e=Vre(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Lz=()=>{var t;return(t=Mz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yre(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yx(JSON.stringify(n)),yx(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qre(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qre())}function Jre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zre(){return Pz.NODE_ADMIN===!0}function Xre(){try{return typeof indexedDB=="object"}catch{return!1}}function ese(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tse="FirebaseError";class G_ extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tse,Object.setPrototypeOf(this,G_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uz.prototype.create)}}class Uz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?nse(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new G_(s,a,r)}}function nse(t,e){return t.replace(rse,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rse=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t){return JSON.parse(t)}function ss(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=FE(N2(i[0])||""),n=FE(N2(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},sse=function(t){const e=Bz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ise=function(t){const e=Bz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function cB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wx(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function T2(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(lB(i)&&lB(o)){if(!T2(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function lB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ose(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ase{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function gN(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cse=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Te(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mN=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){return t&&t._delegate?t._delegate:t}class jE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lse{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new H_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dse(e))try{this.getOrInitializeService({instanceIdentifier:ap})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ap){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ap){return this.instances.has(e)}getOptions(e=ap){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:use(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ap){return this.component?this.component.multipleInstances?e:ap:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function use(t){return t===ap?void 0:t}function dse(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lse(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rr||(rr={}));const fse={debug:rr.DEBUG,verbose:rr.VERBOSE,info:rr.INFO,warn:rr.WARN,error:rr.ERROR,silent:rr.SILENT},pse=rr.INFO,gse={[rr.DEBUG]:"log",[rr.VERBOSE]:"log",[rr.INFO]:"info",[rr.WARN]:"warn",[rr.ERROR]:"error"},mse=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=gse[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fz{constructor(e){this.name=e,this._logLevel=pse,this._logHandler=mse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rr.DEBUG,...e),this._logHandler(this,rr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rr.VERBOSE,...e),this._logHandler(this,rr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rr.INFO,...e),this._logHandler(this,rr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rr.WARN,...e),this._logHandler(this,rr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rr.ERROR,...e),this._logHandler(this,rr.ERROR,...e)}}const yse=(t,e)=>e.some(n=>t instanceof n);let uB,dB;function wse(){return uB||(uB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bse(){return dB||(dB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jz=new WeakMap,R2=new WeakMap,Wz=new WeakMap,xR=new WeakMap,X5=new WeakMap;function vse(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Kh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jz.set(n,t)}).catch(()=>{}),X5.set(e,t),e}function Ese(t){if(R2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});R2.set(t,e)}let P2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return R2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Cse(t){P2=t(P2)}function _se(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(IR(this),e,...n);return Wz.set(r,e.sort?e.sort():[e]),Kh(r)}:bse().includes(t)?function(...e){return t.apply(IR(this),e),Kh(jz.get(this))}:function(...e){return Kh(t.apply(IR(this),e))}}function Ase(t){return typeof t=="function"?_se(t):(t instanceof IDBTransaction&&Ese(t),yse(t,wse())?new Proxy(t,P2):t)}function Kh(t){if(t instanceof IDBRequest)return vse(t);if(xR.has(t))return xR.get(t);const e=Ase(t);return e!==t&&(xR.set(t,e),X5.set(e,t)),e}const IR=t=>X5.get(t);function Sse(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Kh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Kh(o.result),c.oldVersion,c.newVersion,Kh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const xse=["get","getKey","getAll","getAllKeys","count"],Ise=["put","add","delete","clear"],NR=new Map;function hB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(NR.get(e))return NR.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Ise.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xse.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return NR.set(e,i),i}Cse(t=>({...t,get:(e,n,r)=>hB(e,n)||t.get(e,n,r),has:(e,n)=>!!hB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Tse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const O2="@firebase/app",fB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=new Fz("@firebase/app"),Rse="@firebase/app-compat",Pse="@firebase/analytics-compat",Ose="@firebase/analytics",kse="@firebase/app-check-compat",Dse="@firebase/app-check",Mse="@firebase/auth",Lse="@firebase/auth-compat",$se="@firebase/database",Use="@firebase/data-connect",Bse="@firebase/database-compat",Fse="@firebase/functions",jse="@firebase/functions-compat",Wse="@firebase/installations",zse="@firebase/installations-compat",Hse="@firebase/messaging",Gse="@firebase/messaging-compat",qse="@firebase/performance",Vse="@firebase/performance-compat",Kse="@firebase/remote-config",Yse="@firebase/remote-config-compat",Qse="@firebase/storage",Jse="@firebase/storage-compat",Zse="@firebase/firestore",Xse="@firebase/vertexai-preview",eie="@firebase/firestore-compat",tie="firebase",nie="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="[DEFAULT]",rie={[O2]:"fire-core",[Rse]:"fire-core-compat",[Ose]:"fire-analytics",[Pse]:"fire-analytics-compat",[Dse]:"fire-app-check",[kse]:"fire-app-check-compat",[Mse]:"fire-auth",[Lse]:"fire-auth-compat",[$se]:"fire-rtdb",[Use]:"fire-data-connect",[Bse]:"fire-rtdb-compat",[Fse]:"fire-fn",[jse]:"fire-fn-compat",[Wse]:"fire-iid",[zse]:"fire-iid-compat",[Hse]:"fire-fcm",[Gse]:"fire-fcm-compat",[qse]:"fire-perf",[Vse]:"fire-perf-compat",[Kse]:"fire-rc",[Yse]:"fire-rc-compat",[Qse]:"fire-gcs",[Jse]:"fire-gcs-compat",[Zse]:"fire-fst",[eie]:"fire-fst-compat",[Xse]:"fire-vertex","fire-js":"fire-js",[tie]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=new Map,sie=new Map,D2=new Map;function pB(t,e){try{t.container.addComponent(e)}catch(n){ud.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bx(t){const e=t.name;if(D2.has(e))return ud.debug(`There were multiple attempts to register component ${e}.`),!1;D2.set(e,t);for(const n of WE.values())pB(n,t);for(const n of sie.values())pB(n,t);return!0}function iie(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yh=new Uz("app","Firebase",oie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aie{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cie=nie;function zz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:k2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Yh.create("bad-app-name",{appName:String(s)});if(n||(n=Lz()),!n)throw Yh.create("no-options");const i=WE.get(s);if(i){if(T2(n,i.options)&&T2(r,i.config))return i;throw Yh.create("duplicate-app",{appName:s})}const o=new hse(s);for(const c of D2.values())o.addComponent(c);const a=new aie(n,r,o);return WE.set(s,a),a}function Hz(t=k2){const e=WE.get(t);if(!e&&t===k2&&Lz())return zz();if(!e)throw Yh.create("no-app",{appName:t});return e}function lie(){return Array.from(WE.values())}function Ky(t,e,n){var r;let s=(r=rie[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ud.warn(a.join(" "));return}bx(new jE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uie="firebase-heartbeat-database",die=1,zE="firebase-heartbeat-store";let TR=null;function Gz(){return TR||(TR=Sse(uie,die,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zE)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yh.create("idb-open",{originalErrorMessage:t.message})})),TR}async function hie(t){try{const n=(await Gz()).transaction(zE),r=await n.objectStore(zE).get(qz(t));return await n.done,r}catch(e){if(e instanceof G_)ud.warn(e.message);else{const n=Yh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ud.warn(n.message)}}}async function gB(t,e){try{const r=(await Gz()).transaction(zE,"readwrite");await r.objectStore(zE).put(e,qz(t)),await r.done}catch(n){if(n instanceof G_)ud.warn(n.message);else{const r=Yh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ud.warn(r.message)}}}function qz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fie=1024,pie=30*24*60*60*1e3;class gie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=pie}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ud.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mB(),{heartbeatsToSend:r,unsentEntries:s}=mie(this._heartbeatsCache.heartbeats),i=yx(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ud.warn(n),""}}}function mB(){return new Date().toISOString().substring(0,10)}function mie(t,e=fie){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),yB(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),yB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xre()?ese().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hie(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return gB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return gB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yB(t){return yx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wie(t){bx(new jE("platform-logger",e=>new Nse(e),"PRIVATE")),bx(new jE("heartbeat",e=>new gie(e),"PRIVATE")),Ky(O2,fB,t),Ky(O2,fB,"esm2017"),Ky("fire-js","")}wie("");var bie="firebase",vie="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ky(bie,vie,"app");var wB={};const bB="@firebase/database",vB="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vz="";function Eie(t){Vz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cie{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ss(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:FE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return su(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Cie(e)}}catch{}return new _ie},Ip=Kz("localStorage"),Aie=Kz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new Fz("@firebase/database"),Sie=function(){let t=1;return function(){return t++}}(),Yz=function(t){const e=cse(t),n=new ase;n.update(e);const r=n.digest();return Z5.encodeByteArray(r)},q_=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=q_.apply(null,r):typeof r=="object"?e+=ss(r):e+=r,e+=" "}return e};let iE=null,EB=!0;const xie=function(t,e){Te(!0,"Can't turn on custom loggers persistently."),Yy.logLevel=rr.VERBOSE,iE=Yy.log.bind(Yy)},js=function(...t){if(EB===!0&&(EB=!1,iE===null&&Aie.get("logging_enabled")===!0&&xie()),iE){const e=q_.apply(null,t);iE(e)}},V_=function(t){return function(...e){js(t,...e)}},M2=function(...t){const e="FIREBASE INTERNAL ERROR: "+q_(...t);Yy.error(e)},dd=function(...t){const e=`FIREBASE FATAL ERROR: ${q_(...t)}`;throw Yy.error(e),new Error(e)},$i=function(...t){const e="FIREBASE WARNING: "+q_(...t);Yy.warn(e)},Iie=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$i("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},eM=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Nie=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},pw="[MIN_NAME]",Tg="[MAX_NAME]",um=function(t,e){if(t===e)return 0;if(t===pw||e===Tg)return-1;if(e===pw||t===Tg)return 1;{const n=CB(t),r=CB(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Tie=function(t,e){return t===e?0:t<e?-1:1},Yb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ss(e))},tM=function(t){if(typeof t!="object"||t===null)return ss(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ss(e[r]),n+=":",n+=tM(t[e[r]]);return n+="}",n},Qz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Ys(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Jz=function(t){Te(!eM(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Rie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Pie=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Oie(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const kie=new RegExp("^-?(0*)\\d{1,10}$"),Die=-2147483648,Mie=2147483647,CB=function(t){if(kie.test(t)){const e=Number(t);if(e>=Die&&e<=Mie)return e}return null},lb=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw $i("Exception was thrown by user callback.",n),e},Math.floor(0))}},Lie=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},oE=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ie{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$i(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uie{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(js("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$i(e)}}class SS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}SS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="5",Zz="v",Xz="s",eH="r",tH="f",nH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rH="ls",sH="p",L2="ac",iH="websocket",oH="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ip.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ip.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Bie(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function cH(t,e,n){Te(typeof e=="string","typeof type must == string"),Te(typeof n=="object","typeof params must == object");let r;if(e===iH)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===oH)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Bie(t)&&(n.ns=t.namespace);const s=[];return Ys(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fie{constructor(){this.counters_={}}incrementCounter(e,n=1){su(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return jre(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR={},PR={};function rM(t){const e=t.toString();return RR[e]||(RR[e]=new Fie),RR[e]}function jie(t,e){const n=t.toString();return PR[n]||(PR[n]=e()),PR[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&lb(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B="start",zie="close",Hie="pLPCommand",Gie="pRTLPCB",lH="id",uH="pw",dH="ser",qie="cb",Vie="seg",Kie="ts",Yie="d",Qie="dframe",hH=1870,fH=30,Jie=hH-fH,Zie=25e3,Xie=3e4;class Sy{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=V_(e),this.stats_=rM(n),this.urlFn=c=>(this.appCheckToken&&(c[L2]=this.appCheckToken),cH(n,oH,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Wie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Xie)),Nie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sM((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===_B)this.id=a,this.password=c;else if(o===zie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[_B]="t",r[dH]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[qie]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Zz]=nM,this.transportSessionId&&(r[Xz]=this.transportSessionId),this.lastSessionId&&(r[rH]=this.lastSessionId),this.applicationId&&(r[sH]=this.applicationId),this.appCheckToken&&(r[L2]=this.appCheckToken),typeof location<"u"&&location.hostname&&nH.test(location.hostname)&&(r[eH]=tH);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Sy.forceAllow_=!0}static forceDisallow(){Sy.forceDisallow_=!0}static isAvailable(){return Sy.forceAllow_?!0:!Sy.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Rie()&&!Pie()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ss(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=kz(n),s=Qz(r,Jie);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Qie]="t",r[lH]=e,r[uH]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ss(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class sM{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Sie(),window[Hie+this.uniqueCallbackIdentifier]=e,window[Gie+this.uniqueCallbackIdentifier]=n,this.myIFrame=sM.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){js("frame writing exception"),a.stack&&js(a.stack),js(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||js("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[lH]=this.myID,e[uH]=this.myPW,e[dH]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fH+r.length<=hH;){const o=this.pendingSegs.shift();r=r+"&"+Vie+s+"="+o.seg+"&"+Kie+s+"="+o.ts+"&"+Yie+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Zie)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{js("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eoe=16384,toe=45e3;let vx=null;typeof MozWebSocket<"u"?vx=MozWebSocket:typeof WebSocket<"u"&&(vx=WebSocket);class kc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=V_(this.connId),this.stats_=rM(n),this.connURL=kc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Zz]=nM,typeof location<"u"&&location.hostname&&nH.test(location.hostname)&&(o[eH]=tH),n&&(o[Xz]=n),r&&(o[rH]=r),s&&(o[L2]=s),i&&(o[sH]=i),cH(e,iH,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ip.set("previous_websocket_failure",!0);try{let r;Zre(),this.mySock=new vx(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){kc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&vx!==null&&!kc.forceDisallow_}static previouslyFailed(){return Ip.isInMemoryStorage||Ip.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ip.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=FE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Te(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ss(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Qz(n,eoe);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(toe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}kc.responsesRequiredToBeHealthy=2;kc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Sy,kc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=kc&&kc.isAvailable();let r=n&&!kc.previouslyFailed();if(e.webSocketOnly&&(n||$i("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[kc];else{const s=this.transports_=[];for(const i of HE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);HE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}HE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const noe=6e4,roe=5e3,soe=10*1024,ioe=100*1024,OR="t",AB="d",ooe="s",SB="r",aoe="e",xB="o",IB="a",NB="n",TB="p",coe="h";class loe{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=V_("c:"+this.id+":"),this.transportManager_=new HE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=oE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ioe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>soe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(OR in e){const n=e[OR];n===IB?this.upgradeIfSecondaryHealthy_():n===SB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===xB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Yb("t",e),r=Yb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:TB,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:IB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:NB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Yb("t",e),r=Yb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Yb(OR,e);if(AB in e){const r=e[AB];if(n===coe){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===NB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===ooe?this.onConnectionShutdown_(r):n===SB?this.onReset_(r):n===aoe?M2("Server Error: "+r):n===xB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):M2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),nM!==r&&$i("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),oE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(noe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(roe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:TB,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ip.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gH=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Te(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Te(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex extends gH{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!$z()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ex}getInitialEvent(e){return Te(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=32,PB=768;class jn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function wn(){return new jn("")}function Vt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function bf(t){return t.pieces_.length-t.pieceNum_}function ir(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new jn(t.pieces_,e)}function iM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function uoe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function GE(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function mH(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new jn(e,0)}function Pr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof jn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new jn(n,0)}function Jt(t){return t.pieceNum_>=t.pieces_.length}function Oi(t,e){const n=Vt(t),r=Vt(e);if(n===null)return e;if(n===r)return Oi(ir(t),ir(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function doe(t,e){const n=GE(t,0),r=GE(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=um(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function oM(t,e){if(bf(t)!==bf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Fa(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(bf(t)>bf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class hoe{constructor(e,n){this.errorPrefix_=n,this.parts_=GE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=mN(this.parts_[r]);yH(this)}}function foe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=mN(e),yH(t)}function poe(t){const e=t.parts_.pop();t.byteLength_-=mN(e),t.parts_.length>0&&(t.byteLength_-=1)}function yH(t){if(t.byteLength_>PB)throw new Error(t.errorPrefix_+"has a key path longer than "+PB+" bytes ("+t.byteLength_+").");if(t.parts_.length>RB)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+RB+") or object contains a cycle "+cp(t))}function cp(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM extends gH{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new aM}getInitialEvent(e){return Te(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=1e3,goe=60*5*1e3,OB=30*1e3,moe=1.3,yoe=3e4,woe="server_kill",kB=3;class ed extends pH{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=ed.nextPersistentConnectionId_++,this.log_=V_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qb,this.maxReconnectDelay_=goe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");aM.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ex.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ss(i)),Te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new H_,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Te(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;ed.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&su(e,"w")){const r=fw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();$i(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ise(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=OB)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=sse(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ss(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):M2("Unrecognized action received from server: "+ss(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>yoe&&(this.reconnectDelay_=Qb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*moe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+ed.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Te(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?js("getToken() completed but was canceled"):(js("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new loe(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{$i(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(woe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&$i(d),c())}}}interrupt(e){js("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){js("Resuming connection for reason: "+e),delete this.interruptReasons_[e],cB(this.interruptReasons_)&&(this.reconnectDelay_=Qb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>tM(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new jn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){js("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=kB&&(this.reconnectDelay_=OB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){js("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=kB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Vz.replace(/\./g,"-")]=1,$z()?e["framework.cordova"]=1:Jre()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ex.getInstance().currentlyOnline();return cB(this.interruptReasons_)&&e}}ed.nextPersistentConnectionId_=0;ed.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Kt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Kt(pw,e),s=new Kt(pw,n);return this.compare(r,s)!==0}minPost(){return Kt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iA;class wH extends yN{static get __EMPTY_NODE(){return iA}static set __EMPTY_NODE(e){iA=e}compare(e,n){return um(e.name,n.name)}isDefinedOn(e){throw ab("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Kt.MIN}maxPost(){return new Kt(Tg,iA)}makePost(e,n){return Te(typeof e=="string","KeyIndex indexValue must always be a string."),new Kt(e,iA)}toString(){return".key"}}const Qy=new wH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class bs{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??bs.RED,this.left=s??wo.EMPTY_NODE,this.right=i??wo.EMPTY_NODE}copy(e,n,r,s,i){return new bs(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return wo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return wo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,bs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,bs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}bs.RED=!0;bs.BLACK=!1;class boe{copy(e,n,r,s,i){return this}insert(e,n,r){return new bs(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class wo{constructor(e,n=wo.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new wo(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bs.BLACK,null,null))}remove(e){return new wo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bs.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new oA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new oA(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new oA(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new oA(this.root_,null,this.comparator_,!0,e)}}wo.EMPTY_NODE=new boe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function voe(t,e){return um(t.name,e.name)}function cM(t,e){return um(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $2;function Eoe(t){$2=t}const bH=function(t){return typeof t=="number"?"number:"+Jz(t):"string:"+t},vH=function(t){if(t.isLeafNode()){const e=t.val();Te(typeof e=="string"||typeof e=="number"||typeof e=="object"&&su(e,".sv"),"Priority must be a string or number.")}else Te(t===$2||t.isEmpty(),"priority of unexpected type.");Te(t===$2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DB;class ws{constructor(e,n=ws.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Te(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vH(this.priorityNode_)}static set __childrenNodeConstructor(e){DB=e}static get __childrenNodeConstructor(){return DB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ws(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ws.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Jt(e)?this:Vt(e)===".priority"?this.priorityNode_:ws.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ws.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Vt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Te(r!==".priority"||bf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ws.__childrenNodeConstructor.EMPTY_NODE.updateChild(ir(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+bH(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Jz(this.value_):e+=this.value_,this.lazyHash_=Yz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ws.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ws.__childrenNodeConstructor?-1:(Te(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ws.VALUE_TYPE_ORDER.indexOf(n),i=ws.VALUE_TYPE_ORDER.indexOf(r);return Te(s>=0,"Unknown leaf type: "+n),Te(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ws.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EH,CH;function Coe(t){EH=t}function _oe(t){CH=t}class Aoe extends yN{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?um(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Kt.MIN}maxPost(){return new Kt(Tg,new ws("[PRIORITY-POST]",CH))}makePost(e,n){const r=EH(e);return new Kt(n,new ws("[PRIORITY-POST]",r))}toString(){return".priority"}}const Or=new Aoe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Soe=Math.log(2);class xoe{constructor(e){const n=i=>parseInt(Math.log(i)/Soe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cx=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new bs(h,d.node,bs.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new bs(h,d.node,bs.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,y=d;d-=p;const b=s(w+1,y),v=t[w],A=n?n(v):v;f(new bs(A,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,bs.BLACK):(h(w,bs.BLACK),h(w,bs.RED))}return u},o=new xoe(t.length),a=i(o);return new wo(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kR;const Um={};class Ku{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Te(Um&&Or,"ChildrenNode.ts has not been loaded"),kR=kR||new Ku({".priority":Um},{".priority":Or}),kR}get(e){const n=fw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof wo?n:null}hasIndex(e){return su(this.indexSet_,e.toString())}addIndex(e,n){Te(e!==Qy,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Kt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Cx(r,e.getCompare()):a=Um;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Ku(u,l)}addToIndexes(e,n){const r=wx(this.indexes_,(s,i)=>{const o=fw(this.indexSet_,i);if(Te(o,"Missing index implementation for "+i),s===Um)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Kt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Cx(a,o.getCompare())}else return Um;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Kt(e.name,a))),c.insert(e,e.node)}});return new Ku(r,this.indexSet_)}removeFromIndexes(e,n){const r=wx(this.indexes_,s=>{if(s===Um)return s;{const i=n.get(e.name);return i?s.remove(new Kt(e.name,i)):s}});return new Ku(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jb;class _t{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&vH(this.priorityNode_),this.children_.isEmpty()&&Te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Jb||(Jb=new _t(new wo(cM),null,Ku.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Jb}updatePriority(e){return this.children_.isEmpty()?this:new _t(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Jb:n}}getChild(e){const n=Vt(e);return n===null?this:this.getImmediateChild(n).getChild(ir(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Te(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Kt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Jb:this.priorityNode_;return new _t(s,o,i)}}updateChild(e,n){const r=Vt(e);if(r===null)return n;{Te(Vt(e)!==".priority"||bf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ir(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Or,(o,a)=>{n[o]=a.val(e),r++,i&&_t.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+bH(this.getPriority().val())+":"),this.forEachChild(Or,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Yz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Kt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Kt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Kt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Kt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Kt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===K_?-1:0}withIndex(e){if(e===Qy||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new _t(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Qy||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Or),s=n.getIterator(Or);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Qy?null:this.indexMap_.get(e.toString())}}_t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Ioe extends _t{constructor(){super(new wo(cM),_t.EMPTY_NODE,Ku.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _t.EMPTY_NODE}isEmpty(){return!1}}const K_=new Ioe;Object.defineProperties(Kt,{MIN:{value:new Kt(pw,_t.EMPTY_NODE)},MAX:{value:new Kt(Tg,K_)}});wH.__EMPTY_NODE=_t.EMPTY_NODE;ws.__childrenNodeConstructor=_t;Eoe(K_);_oe(K_);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Noe=!0;function ns(t,e=null){if(t===null)return _t.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Te(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ws(n,ns(e))}if(!(t instanceof Array)&&Noe){const n=[];let r=!1;if(Ys(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=ns(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Kt(o,c)))}}),n.length===0)return _t.EMPTY_NODE;const i=Cx(n,voe,o=>o.name,cM);if(r){const o=Cx(n,Or.getCompare());return new _t(i,ns(e),new Ku({".priority":o},{".priority":Or}))}else return new _t(i,ns(e),Ku.Default)}else{let n=_t.EMPTY_NODE;return Ys(t,(r,s)=>{if(su(t,r)&&r.substring(0,1)!=="."){const i=ns(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ns(e))}}Coe(ns);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Toe extends yN{constructor(e){super(),this.indexPath_=e,Te(!Jt(e)&&Vt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?um(e.name,n.name):i}makePost(e,n){const r=ns(e),s=_t.EMPTY_NODE.updateChild(this.indexPath_,r);return new Kt(n,s)}maxPost(){const e=_t.EMPTY_NODE.updateChild(this.indexPath_,K_);return new Kt(Tg,e)}toString(){return GE(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Roe extends yN{compare(e,n){const r=e.node.compareTo(n.node);return r===0?um(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Kt.MIN}maxPost(){return Kt.MAX}makePost(e,n){const r=ns(e);return new Kt(n,r)}toString(){return".value"}}const Poe=new Roe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _H(t){return{type:"value",snapshotNode:t}}function gw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function qE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function VE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Ooe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Te(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(qE(n,a)):Te(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(gw(n,r)):o.trackChildChange(VE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Or,(s,i)=>{n.hasChild(s)||r.trackChildChange(qE(s,i))}),n.isLeafNode()||n.forEachChild(Or,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(VE(s,i,o))}else r.trackChildChange(gw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?_t.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.indexedFilter_=new lM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=KE.getStartPost_(e),this.endPost_=KE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Kt(n,r))||(r=_t.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=_t.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(_t.EMPTY_NODE);const i=this;return n.forEachChild(Or,(o,a)=>{i.matches(new Kt(o,a))||(s=s.updateImmediateChild(o,_t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class koe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new KE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Kt(n,r))||(r=_t.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=_t.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=_t.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(_t.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,_t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Te(a.numChildren()===this.limit_,"");const c=new Kt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(VE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(qE(n,d));const g=a.updateImmediateChild(n,_t.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(gw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(qE(l.name,l.node)),i.trackChildChange(gw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,_t.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Or}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pw}hasEnd(){return this.endSet_}getIndexEndValue(){return Te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Tg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Or}copy(){const e=new uM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Doe(t){return t.loadsAllData()?new lM(t.getIndex()):t.hasLimit()?new koe(t):new KE(t)}function MB(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Or?n="$priority":t.index_===Poe?n="$value":t.index_===Qy?n="$key":(Te(t.index_ instanceof Toe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ss(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ss(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ss(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ss(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ss(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function LB(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Or&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x extends pH{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=V_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Te(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=_x.getListenId_(e,r),a={};this.listens_[o]=a;const c=MB(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),fw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=_x.getListenId_(e,n);delete this.listens_[r]}get(e){const n=MB(e._queryParams),r=e._path.toString(),s=new H_;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ose(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=FE(a.responseText)}catch{$i("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&$i("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Moe{constructor(){this.rootNode_=_t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(){return{value:null,children:new Map}}function AH(t,e,n){if(Jt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Vt(e);t.children.has(r)||t.children.set(r,Ax());const s=t.children.get(r);e=ir(e),AH(s,e,n)}}function U2(t,e,n){t.value!==null?n(e,t.value):Loe(t,(r,s)=>{const i=new jn(e.toString()+"/"+r);U2(s,i,n)})}function Loe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $oe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ys(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=10*1e3,Uoe=30*1e3,Boe=5*60*1e3;class Foe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $oe(e);const r=$B+(Uoe-$B)*Math.random();oE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ys(e,(s,i)=>{i>0&&su(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),oE(this.reportStats_.bind(this),Math.floor(Math.random()*2*Boe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $c;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})($c||($c={}));function dM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function hM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=$c.ACK_USER_WRITE,this.source=dM()}operationForChild(e){if(Jt(this.path)){if(this.affectedTree.value!=null)return Te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new jn(e));return new Sx(wn(),n,this.revert)}}else return Te(Vt(this.path)===e,"operationForChild called for unrelated child."),new Sx(ir(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.source=e,this.path=n,this.type=$c.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new YE(this.source,wn()):new YE(this.source,ir(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=$c.OVERWRITE}operationForChild(e){return Jt(this.path)?new Rg(this.source,wn(),this.snap.getImmediateChild(e)):new Rg(this.source,ir(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=$c.MERGE}operationForChild(e){if(Jt(this.path)){const n=this.children.subtree(new jn(e));return n.isEmpty()?null:n.value?new Rg(this.source,wn(),n.value):new mw(this.source,wn(),n)}else return Te(Vt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new mw(this.source,ir(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Vt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class joe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Woe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Ooe(o.childName,o.snapshotNode))}),Zb(t,s,"child_removed",e,r,n),Zb(t,s,"child_added",e,r,n),Zb(t,s,"child_moved",i,r,n),Zb(t,s,"child_changed",e,r,n),Zb(t,s,"value",e,r,n),s}function Zb(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Hoe(t,a,c)),o.forEach(a=>{const c=zoe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function zoe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Hoe(t,e,n){if(e.childName==null||n.childName==null)throw ab("Should only compare child_ events.");const r=new Kt(e.childName,e.snapshotNode),s=new Kt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t,e){return{eventCache:t,serverCache:e}}function aE(t,e,n,r){return wN(new vf(e,n,r),t.serverCache)}function SH(t,e,n,r){return wN(t.eventCache,new vf(e,n,r))}function xx(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Pg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DR;const Goe=()=>(DR||(DR=new wo(Tie)),DR);class tr{constructor(e,n=Goe()){this.value=e,this.children=n}static fromObject(e){let n=new tr(null);return Ys(e,(r,s)=>{n=n.set(new jn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:wn(),value:this.value};if(Jt(e))return null;{const r=Vt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ir(e),n);return i!=null?{path:Pr(new jn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const n=Vt(e),r=this.children.get(n);return r!==null?r.subtree(ir(e)):new tr(null)}}set(e,n){if(Jt(e))return new tr(n,this.children);{const r=Vt(e),i=(this.children.get(r)||new tr(null)).set(ir(e),n),o=this.children.insert(r,i);return new tr(this.value,o)}}remove(e){if(Jt(e))return this.children.isEmpty()?new tr(null):new tr(null,this.children);{const n=Vt(e),r=this.children.get(n);if(r){const s=r.remove(ir(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new tr(null):new tr(this.value,i)}else return this}}get(e){if(Jt(e))return this.value;{const n=Vt(e),r=this.children.get(n);return r?r.get(ir(e)):null}}setTree(e,n){if(Jt(e))return n;{const r=Vt(e),i=(this.children.get(r)||new tr(null)).setTree(ir(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new tr(this.value,o)}}fold(e){return this.fold_(wn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Pr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,wn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Jt(e))return null;{const i=Vt(e),o=this.children.get(i);return o?o.findOnPath_(ir(e),Pr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,wn(),n)}foreachOnPath_(e,n,r){if(Jt(e))return this;{this.value&&r(n,this.value);const s=Vt(e),i=this.children.get(s);return i?i.foreachOnPath_(ir(e),Pr(n,s),r):new tr(null)}}foreach(e){this.foreach_(wn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Pr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.writeTree_=e}static empty(){return new Fc(new tr(null))}}function cE(t,e,n){if(Jt(e))return new Fc(new tr(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Oi(s,e);return i=i.updateChild(o,n),new Fc(t.writeTree_.set(s,i))}else{const s=new tr(n),i=t.writeTree_.setTree(e,s);return new Fc(i)}}}function B2(t,e,n){let r=t;return Ys(n,(s,i)=>{r=cE(r,Pr(e,s),i)}),r}function UB(t,e){if(Jt(e))return Fc.empty();{const n=t.writeTree_.setTree(e,new tr(null));return new Fc(n)}}function F2(t,e){return dm(t,e)!=null}function dm(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Oi(n.path,e)):null}function BB(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Or,(r,s)=>{e.push(new Kt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Kt(r,s.value))}),e}function Qh(t,e){if(Jt(e))return t;{const n=dm(t,e);return n!=null?new Fc(new tr(n)):new Fc(t.writeTree_.subtree(e))}}function j2(t){return t.writeTree_.isEmpty()}function yw(t,e){return xH(wn(),t.writeTree_,e)}function xH(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Te(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=xH(Pr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Pr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e){return RH(e,t)}function qoe(t,e,n,r,s){Te(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=cE(t.visibleWrites,e,n)),t.lastWriteId=r}function Voe(t,e,n,r){Te(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=B2(t.visibleWrites,e,n),t.lastWriteId=r}function Koe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Yoe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Te(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Qoe(a,r.path)?s=!1:Fa(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Joe(t),!0;if(r.snap)t.visibleWrites=UB(t.visibleWrites,r.path);else{const a=r.children;Ys(a,c=>{t.visibleWrites=UB(t.visibleWrites,Pr(r.path,c))})}return!0}else return!1}function Qoe(t,e){if(t.snap)return Fa(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Fa(Pr(t.path,n),e))return!0;return!1}function Joe(t){t.visibleWrites=IH(t.allWrites,Zoe,wn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Zoe(t){return t.visible}function IH(t,e,n){let r=Fc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Fa(n,o)?(a=Oi(n,o),r=cE(r,a,i.snap)):Fa(o,n)&&(a=Oi(o,n),r=cE(r,wn(),i.snap.getChild(a)));else if(i.children){if(Fa(n,o))a=Oi(n,o),r=B2(r,a,i.children);else if(Fa(o,n))if(a=Oi(o,n),Jt(a))r=B2(r,wn(),i.children);else{const c=fw(i.children,Vt(a));if(c){const l=c.getChild(ir(a));r=cE(r,wn(),l)}}}else throw ab("WriteRecord should have .snap or .children")}}return r}function NH(t,e,n,r,s){if(!r&&!s){const i=dm(t.visibleWrites,e);if(i!=null)return i;{const o=Qh(t.visibleWrites,e);if(j2(o))return n;if(n==null&&!F2(o,wn()))return null;{const a=n||_t.EMPTY_NODE;return yw(o,a)}}}else{const i=Qh(t.visibleWrites,e);if(!s&&j2(i))return n;if(!s&&n==null&&!F2(i,wn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Fa(l.path,e)||Fa(e,l.path))},a=IH(t.allWrites,o,e),c=n||_t.EMPTY_NODE;return yw(a,c)}}}function Xoe(t,e,n){let r=_t.EMPTY_NODE;const s=dm(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Or,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Qh(t.visibleWrites,e);return n.forEachChild(Or,(o,a)=>{const c=yw(Qh(i,new jn(o)),a);r=r.updateImmediateChild(o,c)}),BB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Qh(t.visibleWrites,e);return BB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function eae(t,e,n,r,s){Te(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Pr(e,n);if(F2(t.visibleWrites,i))return null;{const o=Qh(t.visibleWrites,i);return j2(o)?s.getChild(n):yw(o,s.getChild(n))}}function tae(t,e,n,r){const s=Pr(e,n),i=dm(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Qh(t.visibleWrites,s);return yw(o,r.getNode().getImmediateChild(n))}else return null}function nae(t,e){return dm(t.visibleWrites,e)}function rae(t,e,n,r,s,i,o){let a;const c=Qh(t.visibleWrites,e),l=dm(c,wn());if(l!=null)a=l;else if(n!=null)a=yw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function sae(){return{visibleWrites:Fc.empty(),allWrites:[],lastWriteId:-1}}function Ix(t,e,n,r){return NH(t.writeTree,t.treePath,e,n,r)}function pM(t,e){return Xoe(t.writeTree,t.treePath,e)}function FB(t,e,n,r){return eae(t.writeTree,t.treePath,e,n,r)}function Nx(t,e){return nae(t.writeTree,Pr(t.treePath,e))}function iae(t,e,n,r,s,i){return rae(t.writeTree,t.treePath,e,n,r,s,i)}function gM(t,e,n){return tae(t.writeTree,t.treePath,e,n)}function TH(t,e){return RH(Pr(t.treePath,e),t.writeTree)}function RH(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oae{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Te(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Te(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,VE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,qE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,gw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,VE(r,e.snapshotNode,s.oldSnap));else throw ab("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const PH=new aae;class mM{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gM(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Pg(this.viewCache_),i=iae(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cae(t){return{filter:t}}function lae(t,e){Te(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Te(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function uae(t,e,n,r,s){const i=new oae;let o,a;if(n.type===$c.OVERWRITE){const l=n;l.source.fromUser?o=W2(t,e,l.path,l.snap,r,s,i):(Te(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Jt(l.path),o=Tx(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===$c.MERGE){const l=n;l.source.fromUser?o=hae(t,e,l.path,l.children,r,s,i):(Te(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=z2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===$c.ACK_USER_WRITE){const l=n;l.revert?o=gae(t,e,l.path,r,s,i):o=fae(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===$c.LISTEN_COMPLETE)o=pae(t,e,n.path,r,i);else throw ab("Unknown operation type: "+n.type);const c=i.getChanges();return dae(e,o,c),{viewCache:o,changes:c}}function dae(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=xx(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(_H(xx(e)))}}function OH(t,e,n,r,s,i){const o=e.eventCache;if(Nx(r,n)!=null)return e;{let a,c;if(Jt(n))if(Te(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Pg(e),u=l instanceof _t?l:_t.EMPTY_NODE,d=pM(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=Ix(r,Pg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Vt(n);if(l===".priority"){Te(bf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=FB(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=ir(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=FB(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=gM(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return aE(e,a,o.isFullyInitialized()||Jt(n),t.filter.filtersNodes())}}function Tx(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Jt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Vt(n);if(!c.isCompleteForPath(n)&&bf(n)>1)return e;const p=ir(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,PH,null)}const d=SH(e,l,c.isFullyInitialized()||Jt(n),u.filtersNodes()),h=new mM(s,d,i);return OH(t,d,n,s,h,a)}function W2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new mM(s,e,i);if(Jt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=aE(e,l,!0,t.filter.filtersNodes());else{const d=Vt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=aE(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=ir(n),f=a.getNode().getImmediateChild(d);let p;if(Jt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?iM(h)===".priority"&&g.getChild(mH(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=_t.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=aE(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function jB(t,e){return t.eventCache.isCompleteForChild(e)}function hae(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Pr(n,c);jB(e,Vt(u))&&(a=W2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Pr(n,c);jB(e,Vt(u))||(a=W2(t,a,u,l,s,i,o))}),a}function WB(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function z2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Jt(n)?l=r:l=new tr(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=WB(t,f,h);c=Tx(t,c,new jn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=WB(t,p,h);c=Tx(t,c,new jn(d),g,s,i,o,a)}}),c}function fae(t,e,n,r,s,i,o){if(Nx(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Jt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Tx(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Jt(n)){let l=new tr(null);return c.getNode().forEachChild(Qy,(u,d)=>{l=l.set(new jn(u),d)}),z2(t,e,n,l,s,i,a,o)}else return e}else{let l=new tr(null);return r.foreach((u,d)=>{const h=Pr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),z2(t,e,n,l,s,i,a,o)}}function pae(t,e,n,r,s){const i=e.serverCache,o=SH(e,i.getNode(),i.isFullyInitialized()||Jt(n),i.isFiltered());return OH(t,o,n,r,PH,s)}function gae(t,e,n,r,s,i){let o;if(Nx(r,n)!=null)return e;{const a=new mM(r,e,s),c=e.eventCache.getNode();let l;if(Jt(n)||Vt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Ix(r,Pg(e));else{const d=e.serverCache.getNode();Te(d instanceof _t,"serverChildren would be complete if leaf node"),u=pM(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Vt(n);let d=gM(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ir(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,_t.EMPTY_NODE,ir(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ix(r,Pg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||Nx(r,wn())!=null,aE(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mae{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new lM(r.getIndex()),i=Doe(r);this.processor_=cae(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(_t.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(_t.EMPTY_NODE,a.getNode(),null),u=new vf(c,o.isFullyInitialized(),s.filtersNodes()),d=new vf(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=wN(d,u),this.eventGenerator_=new joe(this.query_)}get query(){return this.query_}}function yae(t){return t.viewCache_.serverCache.getNode()}function wae(t){return xx(t.viewCache_)}function bae(t,e){const n=Pg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Jt(e)&&!n.getImmediateChild(Vt(e)).isEmpty())?n.getChild(e):null}function zB(t){return t.eventRegistrations_.length===0}function vae(t,e){t.eventRegistrations_.push(e)}function HB(t,e,n){const r=[];if(n){Te(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function GB(t,e,n,r){e.type===$c.MERGE&&e.source.queryId!==null&&(Te(Pg(t.viewCache_),"We should always have a full cache before handling merges"),Te(xx(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=uae(t.processor_,s,e,n,r);return lae(t.processor_,i.viewCache),Te(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,kH(t,i.changes,i.viewCache.eventCache.getNode(),null)}function Eae(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Or,(i,o)=>{r.push(gw(i,o))}),n.isFullyInitialized()&&r.push(_H(n.getNode())),kH(t,r,n.getNode(),e)}function kH(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Woe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rx;class DH{constructor(){this.views=new Map}}function Cae(t){Te(!Rx,"__referenceConstructor has already been defined"),Rx=t}function _ae(){return Te(Rx,"Reference.ts has not been loaded"),Rx}function Aae(t){return t.views.size===0}function yM(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Te(i!=null,"SyncTree gave us an op for an invalid query."),GB(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(GB(o,e,n,r));return i}}function MH(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Ix(n,s?r:null),c=!1;a?c=!0:r instanceof _t?(a=pM(n,r),c=!1):(a=_t.EMPTY_NODE,c=!1);const l=wN(new vf(a,c,!1),new vf(r,s,!1));return new mae(e,l)}return o}function Sae(t,e,n,r,s,i){const o=MH(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),vae(o,n),Eae(o,n)}function xae(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Ef(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(HB(l,n,r)),zB(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(HB(c,n,r)),zB(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Ef(t)&&i.push(new(_ae())(e._repo,e._path)),{removed:i,events:o}}function LH(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Jh(t,e){let n=null;for(const r of t.views.values())n=n||bae(r,e);return n}function $H(t,e){if(e._queryParams.loadsAllData())return vN(t);{const r=e._queryIdentifier;return t.views.get(r)}}function UH(t,e){return $H(t,e)!=null}function Ef(t){return vN(t)!=null}function vN(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Px;function Iae(t){Te(!Px,"__referenceConstructor has already been defined"),Px=t}function Nae(){return Te(Px,"Reference.ts has not been loaded"),Px}let Tae=1;class qB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tr(null),this.pendingWriteTree_=sae(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function BH(t,e,n,r,s){return qoe(t.pendingWriteTree_,e,n,r,s),s?ub(t,new Rg(dM(),e,n)):[]}function Rae(t,e,n,r){Voe(t.pendingWriteTree_,e,n,r);const s=tr.fromObject(n);return ub(t,new mw(dM(),e,s))}function Uh(t,e,n=!1){const r=Koe(t.pendingWriteTree_,e);if(Yoe(t.pendingWriteTree_,e)){let i=new tr(null);return r.snap!=null?i=i.set(wn(),!0):Ys(r.children,o=>{i=i.set(new jn(o),!0)}),ub(t,new Sx(r.path,i,n))}else return[]}function Y_(t,e,n){return ub(t,new Rg(hM(),e,n))}function Pae(t,e,n){const r=tr.fromObject(n);return ub(t,new mw(hM(),e,r))}function Oae(t,e){return ub(t,new YE(hM(),e))}function kae(t,e,n){const r=bM(t,n);if(r){const s=vM(r),i=s.path,o=s.queryId,a=Oi(i,e),c=new YE(fM(o),a);return EM(t,i,c)}else return[]}function Ox(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||UH(o,e))){const c=xae(o,e,n,r);Aae(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>Ef(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=Lae(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,y=zH(t,g);t.listenProvider_.startListening(lE(w),QE(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(lE(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(EN(h));t.listenProvider_.stopListening(lE(h),f)}))}$ae(t,l)}return a}function FH(t,e,n,r){const s=bM(t,r);if(s!=null){const i=vM(s),o=i.path,a=i.queryId,c=Oi(o,e),l=new Rg(fM(a),c,n);return EM(t,o,l)}else return[]}function Dae(t,e,n,r){const s=bM(t,r);if(s){const i=vM(s),o=i.path,a=i.queryId,c=Oi(o,e),l=tr.fromObject(n),u=new mw(fM(a),c,l);return EM(t,o,u)}else return[]}function H2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=Oi(h,s);i=i||Jh(f,p),o=o||Ef(f)});let a=t.syncPointTree_.get(s);a?(o=o||Ef(a),i=i||Jh(a,wn())):(a=new DH,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=_t.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Jh(p,wn());g&&(i=i.updateImmediateChild(f,g))}));const l=UH(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=EN(e);Te(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Uae();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=bN(t.pendingWriteTree_,s);let d=Sae(a,e,n,u,i,c);if(!l&&!o&&!r){const h=$H(a,e);d=d.concat(Bae(t,e,h))}return d}function wM(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Oi(o,e),l=Jh(a,c);if(l)return l});return NH(s,e,i,n,!0)}function Mae(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=Oi(l,n);r=r||Jh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Jh(s,wn()):(s=new DH,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new vf(r,!0,!1):null,a=bN(t.pendingWriteTree_,e._path),c=MH(s,e,a,i?o.getNode():_t.EMPTY_NODE,i);return wae(c)}function ub(t,e){return jH(e,t.syncPointTree_,null,bN(t.pendingWriteTree_,wn()))}function jH(t,e,n,r){if(Jt(t.path))return WH(t,e,n,r);{const s=e.get(wn());n==null&&s!=null&&(n=Jh(s,wn()));let i=[];const o=Vt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=TH(r,o);i=i.concat(jH(a,c,l,u))}return s&&(i=i.concat(yM(s,t,r,n))),i}}function WH(t,e,n,r){const s=e.get(wn());n==null&&s!=null&&(n=Jh(s,wn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=TH(r,o),u=t.operationForChild(o);u&&(i=i.concat(WH(u,a,c,l)))}),s&&(i=i.concat(yM(s,t,r,n))),i}function zH(t,e){const n=e.query,r=QE(t,n);return{hashFn:()=>(yae(e)||_t.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?kae(t,n._path,r):Oae(t,n._path);{const i=Oie(s,n);return Ox(t,n,null,i)}}}}function QE(t,e){const n=EN(e);return t.queryToTagMap.get(n)}function EN(t){return t._path.toString()+"$"+t._queryIdentifier}function bM(t,e){return t.tagToQueryMap.get(e)}function vM(t){const e=t.indexOf("$");return Te(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new jn(t.substr(0,e))}}function EM(t,e,n){const r=t.syncPointTree_.get(e);Te(r,"Missing sync point for query tag that we're tracking");const s=bN(t.pendingWriteTree_,e);return yM(r,n,s,null)}function Lae(t){return t.fold((e,n,r)=>{if(n&&Ef(n))return[vN(n)];{let s=[];return n&&(s=LH(n)),Ys(r,(i,o)=>{s=s.concat(o)}),s}})}function lE(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Nae())(t._repo,t._path):t}function $ae(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=EN(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Uae(){return Tae++}function Bae(t,e,n){const r=e._path,s=QE(t,e),i=zH(t,n),o=t.listenProvider_.startListening(lE(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Te(!Ef(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Jt(l)&&u&&Ef(u))return[vN(u).query];{let h=[];return u&&(h=h.concat(LH(u).map(f=>f.query))),Ys(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(lE(u),QE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new CM(n)}node(){return this.node_}}class _M{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Pr(this.path_,e);return new _M(this.syncTree_,n)}node(){return wM(this.syncTree_,this.path_)}}const Fae=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},VB=function(t,e,n){if(!t||typeof t!="object")return t;if(Te(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return jae(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Wae(t[".sv"],e);Te(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},jae=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Te(!1,"Unexpected server value: "+t)}},Wae=function(t,e,n){t.hasOwnProperty("increment")||Te(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Te(!1,"Unexpected increment value: "+r);const s=e.node();if(Te(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},HH=function(t,e,n,r){return AM(e,new _M(n,t),r)},GH=function(t,e,n){return AM(t,new CM(e),n)};function AM(t,e,n){const r=t.getPriority().val(),s=VB(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=VB(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ws(a,ns(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ws(s))),o.forEachChild(Or,(a,c)=>{const l=AM(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function xM(t,e){let n=e instanceof jn?e:new jn(e),r=t,s=Vt(n);for(;s!==null;){const i=fw(r.node.children,s)||{children:{},childCount:0};r=new SM(s,r,i),n=ir(n),s=Vt(n)}return r}function db(t){return t.node.value}function qH(t,e){t.node.value=e,G2(t)}function VH(t){return t.node.childCount>0}function zae(t){return db(t)===void 0&&!VH(t)}function CN(t,e){Ys(t.node.children,(n,r)=>{e(new SM(n,t,r))})}function KH(t,e,n,r){n&&e(t),CN(t,s=>{KH(s,e,!0)})}function Hae(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Q_(t){return new jn(t.parent===null?t.name:Q_(t.parent)+"/"+t.name)}function G2(t){t.parent!==null&&Gae(t.parent,t.name,t)}function Gae(t,e,n){const r=zae(n),s=su(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,G2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,G2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qae=/[\[\].#$\/\u0000-\u001F\u007F]/,Vae=/[\[\].#$\u0000-\u001F\u007F]/,MR=10*1024*1024,IM=function(t){return typeof t=="string"&&t.length!==0&&!qae.test(t)},YH=function(t){return typeof t=="string"&&t.length!==0&&!Vae.test(t)},Kae=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),YH(t)},Yae=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!eM(t)||t&&typeof t=="object"&&su(t,".sv")},Qae=function(t,e,n,r){_N(gN(t,"value"),e,n)},_N=function(t,e,n){const r=n instanceof jn?new hoe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+cp(r));if(typeof e=="function")throw new Error(t+"contains a function "+cp(r)+" with contents = "+e.toString());if(eM(e))throw new Error(t+"contains "+e.toString()+" "+cp(r));if(typeof e=="string"&&e.length>MR/3&&mN(e)>MR)throw new Error(t+"contains a string greater than "+MR+" utf8 bytes "+cp(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Ys(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!IM(o)))throw new Error(t+" contains an invalid key ("+o+") "+cp(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);foe(r,o),_N(t,a,r),poe(r)}),s&&i)throw new Error(t+' contains ".value" child '+cp(r)+" in addition to actual children.")}},Jae=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=GE(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!IM(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(doe);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&Fa(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Zae=function(t,e,n,r){const s=gN(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Ys(e,(o,a)=>{const c=new jn(o);if(_N(s,a,Pr(n,c)),iM(c)===".priority"&&!Yae(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),Jae(s,i)},QH=function(t,e,n,r){if(!YH(n))throw new Error(gN(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Xae=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QH(t,e,n)},JH=function(t,e){if(Vt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},ece=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!IM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Kae(n))throw new Error(gN(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tce{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function AN(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!oM(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function ZH(t,e,n){AN(t,n),XH(t,r=>oM(r,e))}function Ga(t,e,n){AN(t,n),XH(t,r=>Fa(r,e)||Fa(e,r))}function XH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(nce(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function nce(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();iE&&js("event: "+n.toString()),lb(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rce="repo_interrupt",sce=25;class ice{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tce,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ax(),this.transactionQueueTree_=new SM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oce(t,e,n){if(t.stats_=rM(t.repoInfo_),t.forceRestClient_||Lie())t.server_=new _x(t.repoInfo_,(r,s,i,o)=>{KB(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>YB(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ss(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ed(t.repoInfo_,e,(r,s,i,o)=>{KB(t,r,s,i,o)},r=>{YB(t,r)},r=>{cce(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=jie(t.repoInfo_,()=>new Foe(t.stats_,t.server_)),t.infoData_=new Moe,t.infoSyncTree_=new qB({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Y_(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),NM(t,"connected",!1),t.serverSyncTree_=new qB({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Ga(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function ace(t){const n=t.infoData_.getNode(new jn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function SN(t){return Fae({timestamp:ace(t)})}function KB(t,e,n,r,s){t.dataUpdateCount++;const i=new jn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=wx(n,l=>ns(l));o=Dae(t.serverSyncTree_,i,c,s)}else{const c=ns(n);o=FH(t.serverSyncTree_,i,c,s)}else if(r){const c=wx(n,l=>ns(l));o=Pae(t.serverSyncTree_,i,c)}else{const c=ns(n);o=Y_(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=ww(t,i)),Ga(t.eventQueue_,a,o)}function YB(t,e){NM(t,"connected",e),e===!1&&hce(t)}function cce(t,e){Ys(e,(n,r)=>{NM(t,n,r)})}function NM(t,e,n){const r=new jn("/.info/"+e),s=ns(n);t.infoData_.updateSnapshot(r,s);const i=Y_(t.infoSyncTree_,r,s);Ga(t.eventQueue_,r,i)}function TM(t){return t.nextWriteId_++}function lce(t,e,n){const r=Mae(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ns(s).withIndex(e._queryParams.getIndex());H2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Y_(t.serverSyncTree_,e._path,i);else{const a=QE(t.serverSyncTree_,e);o=FH(t.serverSyncTree_,e._path,i,a)}return Ga(t.eventQueue_,e._path,o),Ox(t.serverSyncTree_,e,n,null,!0),i},s=>(J_(t,"get for query "+ss(e)+" failed: "+s),Promise.reject(new Error(s))))}function uce(t,e,n,r,s){J_(t,"set",{path:e.toString(),value:n,priority:r});const i=SN(t),o=ns(n,r),a=wM(t.serverSyncTree_,e),c=GH(o,a,i),l=TM(t),u=BH(t.serverSyncTree_,e,c,l,!0);AN(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||$i("set at "+e+" failed: "+h);const g=Uh(t.serverSyncTree_,l,!p);Ga(t.eventQueue_,e,g),q2(t,s,h,f)});const d=PM(t,e);ww(t,d),Ga(t.eventQueue_,d,[])}function dce(t,e,n,r){J_(t,"update",{path:e.toString(),value:n});let s=!0;const i=SN(t),o={};if(Ys(n,(a,c)=>{s=!1,o[a]=HH(Pr(e,a),ns(c),t.serverSyncTree_,i)}),s)js("update() called with empty data.  Don't do anything."),q2(t,r,"ok",void 0);else{const a=TM(t),c=Rae(t.serverSyncTree_,e,o,a);AN(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{const d=l==="ok";d||$i("update at "+e+" failed: "+l);const h=Uh(t.serverSyncTree_,a,!d),f=h.length>0?ww(t,e):e;Ga(t.eventQueue_,f,h),q2(t,r,l,u)}),Ys(n,l=>{const u=PM(t,Pr(e,l));ww(t,u)}),Ga(t.eventQueue_,e,[])}}function hce(t){J_(t,"onDisconnectEvents");const e=SN(t),n=Ax();U2(t.onDisconnect_,wn(),(s,i)=>{const o=HH(s,i,t.serverSyncTree_,e);AH(n,s,o)});let r=[];U2(n,wn(),(s,i)=>{r=r.concat(Y_(t.serverSyncTree_,s,i));const o=PM(t,s);ww(t,o)}),t.onDisconnect_=Ax(),Ga(t.eventQueue_,wn(),r)}function fce(t,e,n){let r;Vt(e._path)===".info"?r=H2(t.infoSyncTree_,e,n):r=H2(t.serverSyncTree_,e,n),ZH(t.eventQueue_,e._path,r)}function pce(t,e,n){let r;Vt(e._path)===".info"?r=Ox(t.infoSyncTree_,e,n):r=Ox(t.serverSyncTree_,e,n),ZH(t.eventQueue_,e._path,r)}function gce(t){t.persistentConnection_&&t.persistentConnection_.interrupt(rce)}function J_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),js(n,...e)}function q2(t,e,n,r){e&&lb(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function eG(t,e,n){return wM(t.serverSyncTree_,e,n)||_t.EMPTY_NODE}function RM(t,e=t.transactionQueueTree_){if(e||xN(t,e),db(e)){const n=nG(t,e);Te(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&mce(t,Q_(e),n)}else VH(e)&&CN(e,n=>{RM(t,n)})}function mce(t,e,n){const r=n.map(l=>l.currentWriteId),s=eG(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Te(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Oi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{J_(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Uh(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();xN(t,xM(t.transactionQueueTree_,e)),RM(t,t.transactionQueueTree_),Ga(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)lb(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{$i("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}ww(t,e)}},o)}function ww(t,e){const n=tG(t,e),r=Q_(n),s=nG(t,n);return yce(t,s,r),r}function yce(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Oi(n,c.path);let u=!1,d;if(Te(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(Uh(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=sce)u=!0,d="maxretry",s=s.concat(Uh(t.serverSyncTree_,c.currentWriteId,!0));else{const h=eG(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){_N("transaction failed: Data returned ",f,c.path);let p=ns(f);typeof f=="object"&&f!=null&&su(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=SN(t),b=GH(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=TM(t),o.splice(o.indexOf(w),1),s=s.concat(BH(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(Uh(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(Uh(t.serverSyncTree_,c.currentWriteId,!0))}Ga(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}xN(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)lb(r[a]);RM(t,t.transactionQueueTree_)}function tG(t,e){let n,r=t.transactionQueueTree_;for(n=Vt(e);n!==null&&db(r)===void 0;)r=xM(r,n),e=ir(e),n=Vt(e);return r}function nG(t,e){const n=[];return rG(t,e,n),n.sort((r,s)=>r.order-s.order),n}function rG(t,e,n){const r=db(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);CN(e,s=>{rG(t,s,n)})}function xN(t,e){const n=db(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,qH(e,n.length>0?n:void 0)}CN(e,r=>{xN(t,r)})}function PM(t,e){const n=Q_(tG(t,e)),r=xM(t.transactionQueueTree_,e);return Hae(r,s=>{LR(t,s)}),LR(t,r),KH(r,s=>{LR(t,s)}),n}function LR(t,e){const n=db(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Te(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Te(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Uh(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?qH(e,void 0):n.length=i+1,Ga(t.eventQueue_,Q_(e),s);for(let o=0;o<r.length;o++)lb(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wce(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function bce(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$i(`Invalid query segment '${n}' in query '${t}'`)}return e}const QB=function(t,e){const n=vce(t),r=n.namespace;n.domain==="firebase.com"&&dd(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&dd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Iie();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new aH(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new jn(n.pathString)}},vce=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=wce(t.substring(u,d)));const h=bce(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ece{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ss(this.snapshot.exportVal())}}class Cce{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Te(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Jt(this._path)?null:iM(this._path)}get ref(){return new Cd(this._repo,this._path)}get _queryIdentifier(){const e=LB(this._queryParams),n=tM(e);return n==="{}"?"default":n}get _queryObject(){return LB(this._queryParams)}isEqual(e){if(e=cb(e),!(e instanceof OM))return!1;const n=this._repo===e._repo,r=oM(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+uoe(this._path)}}class Cd extends OM{constructor(e,n){super(e,n,new uM,!1)}get parent(){const e=mH(this._path);return e===null?null:new Cd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class JE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new jn(e),r=V2(this.ref,e);return new JE(this._node.getChild(n),r,Or)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new JE(s,V2(this.ref,r),Or)))}hasChild(e){const n=new jn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ro(t,e){return t=cb(t),t._checkNotDeleted("ref"),e!==void 0?V2(t._root,e):t._root}function V2(t,e){return t=cb(t),Vt(t._path)===null?Xae("child","path",e):QH("child","path",e),new Cd(t._repo,Pr(t._path,e))}function iG(t){return JH("remove",t._path),uE(t,null)}function uE(t,e){t=cb(t),JH("set",t._path),Qae("set",e,t._path);const n=new H_;return uce(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function _ce(t,e){Zae("update",e,t._path);const n=new H_;return dce(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function mp(t){t=cb(t);const e=new sG(()=>{}),n=new IN(e);return lce(t._repo,t,n).then(r=>new JE(r,new Cd(t._repo,t._path),t._queryParams.getIndex()))}class IN{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Ece("value",this,new JE(e.snapshotNode,new Cd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Cce(this,e,n):null}matches(e){return e instanceof IN?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Ace(t,e,n,r,s){const i=new sG(n,void 0),o=new IN(i);return fce(t._repo,t,o),()=>pce(t._repo,t,o)}function JB(t,e,n,r){return Ace(t,"value",e)}Cae(Cd);Iae(Cd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sce="FIREBASE_DATABASE_EMULATOR_HOST",K2={};let xce=!1;function Ice(t,e,n,r){t.repoInfo_=new aH(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Nce(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||dd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),js("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=QB(i,s),a=o.repoInfo,c;typeof process<"u"&&wB&&(c=wB[Sce]),c?(i=`http://${c}?ns=${a.namespace}`,o=QB(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Uie(t.name,t.options,e);ece("Invalid Firebase Database URL",o),Jt(o.path)||dd("Database URL must point to the root of a Firebase Database (not including a child path).");const u=Rce(a,t,l,new $ie(t.name,n));return new Pce(u,t)}function Tce(t,e){const n=K2[e];(!n||n[t.key]!==t)&&dd(`Database ${e}(${t.repoInfo_}) has already been deleted.`),gce(t),delete n[t.key]}function Rce(t,e,n,r){let s=K2[e.name];s||(s={},K2[e.name]=s);let i=s[t.toURLString()];return i&&dd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ice(t,xce,n,r),s[t.toURLString()]=i,i}class Pce{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oce(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cd(this._repo,wn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Tce(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&dd("Cannot call "+e+" on a deleted database.")}}function Oce(t=Hz(),e){const n=iie(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Kre("database");r&&kce(n,...r)}return n}function kce(t,e,n,r={}){t=cb(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&dd("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&dd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new SS(SS.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Yre(r.mockUserToken,t.app.options.projectId);i=new SS(o)}Ice(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dce(t){Eie(cie),bx(new jE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Nce(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Ky(bB,vB,t),Ky(bB,vB,"esm2017")}ed.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ed.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Dce();const Mce={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},Lce=lie().length?Hz():zz(Mce),kx=Oce(Lce);var Y2={},oG={exports:{}},aa={},aG={exports:{}},cG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,M){var j=k.length;k.push(M);e:for(;0<j;){var Y=j-1>>>1,ne=k[Y];if(0<s(ne,M))k[Y]=M,k[j]=ne,j=Y;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var M=k[0],j=k.pop();if(j!==M){k[0]=j;e:for(var Y=0,ne=k.length,le=ne>>>1;Y<le;){var oe=2*(Y+1)-1,ae=k[oe],ue=oe+1,tt=k[ue];if(0>s(ae,j))ue<ne&&0>s(tt,ae)?(k[Y]=tt,k[ue]=j,Y=ue):(k[Y]=ae,k[oe]=j,Y=oe);else if(ue<ne&&0>s(tt,j))k[Y]=tt,k[ue]=j,Y=ue;else break e}}return M}function s(k,M){var j=k.sortIndex-M.sortIndex;return j!==0?j:k.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(k){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=k)r(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(l)}}function A(k){if(g=!1,v(k),!p)if(n(c)!==null)p=!0,R(_);else{var M=n(l);M!==null&&U(A,M.startTime-k)}}function _(k,M){p=!1,g&&(g=!1,y(N),N=-1),f=!0;var j=h;try{for(v(M),d=n(c);d!==null&&(!(d.expirationTime>M)||k&&!P());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var ne=Y(d.expirationTime<=M);M=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(c)&&r(c),v(M)}else r(c);d=n(c)}if(d!==null)var le=!0;else{var oe=n(l);oe!==null&&U(A,oe.startTime-M),le=!1}return le}finally{d=null,h=j,f=!1}}var I=!1,x=null,N=-1,S=5,O=-1;function P(){return!(t.unstable_now()-O<S)}function F(){if(x!==null){var k=t.unstable_now();O=k;var M=!0;try{M=x(!0,k)}finally{M?q():(I=!1,x=null)}}else I=!1}var q;if(typeof b=="function")q=function(){b(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,T=z.port2;z.port1.onmessage=F,q=function(){T.postMessage(null)}}else q=function(){w(F,0)};function R(k){x=k,I||(I=!0,q())}function U(k,M){N=w(function(){k(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(_))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(k){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var j=h;h=M;try{return k()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var j=h;h=k;try{return M()}finally{h=j}},t.unstable_scheduleCallback=function(k,M,j){var Y=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Y+j:Y):j=Y,k){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=j+ne,k={id:u++,callback:M,priorityLevel:k,startTime:j,expirationTime:ne,sortIndex:-1},j>Y?(k.sortIndex=j,e(l,k),n(c)===null&&k===n(l)&&(g?(y(N),N=-1):g=!0,U(A,j-Y))):(k.sortIndex=ne,e(c,k),p||f||(p=!0,R(_))),k},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(k){var M=h;return function(){var j=h;h=M;try{return k.apply(this,arguments)}finally{h=j}}}})(cG);aG.exports=cG;var $ce=aG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uce=D,sa=$ce;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lG=new Set,ZE={};function hm(t,e){bw(t,e),bw(t+"Capture",e)}function bw(t,e){for(ZE[t]=e,t=0;t<e.length;t++)lG.add(e[t])}var hd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Q2=Object.prototype.hasOwnProperty,Bce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZB={},XB={};function Fce(t){return Q2.call(XB,t)?!0:Q2.call(ZB,t)?!1:Bce.test(t)?XB[t]=!0:(ZB[t]=!0,!1)}function jce(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wce(t,e,n,r){if(e===null||typeof e>"u"||jce(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zi(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Qs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qs[t]=new zi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qs[e]=new zi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qs[t]=new zi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qs[t]=new zi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qs[t]=new zi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qs[t]=new zi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qs[t]=new zi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qs[t]=new zi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qs[t]=new zi(t,5,!1,t.toLowerCase(),null,!1,!1)});var kM=/[\-:]([a-z])/g;function DM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kM,DM);Qs[e]=new zi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kM,DM);Qs[e]=new zi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kM,DM);Qs[e]=new zi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qs[t]=new zi(t,1,!1,t.toLowerCase(),null,!1,!1)});Qs.xlinkHref=new zi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qs[t]=new zi(t,1,!1,t.toLowerCase(),null,!0,!0)});function MM(t,e,n,r){var s=Qs.hasOwnProperty(e)?Qs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wce(e,n,s,r)&&(n=null),r||s===null?Fce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _d=Uce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aA=Symbol.for("react.element"),xy=Symbol.for("react.portal"),Iy=Symbol.for("react.fragment"),LM=Symbol.for("react.strict_mode"),J2=Symbol.for("react.profiler"),uG=Symbol.for("react.provider"),dG=Symbol.for("react.context"),$M=Symbol.for("react.forward_ref"),Z2=Symbol.for("react.suspense"),X2=Symbol.for("react.suspense_list"),UM=Symbol.for("react.memo"),eh=Symbol.for("react.lazy"),hG=Symbol.for("react.offscreen"),e6=Symbol.iterator;function Xb(t){return t===null||typeof t!="object"?null:(t=e6&&t[e6]||t["@@iterator"],typeof t=="function"?t:null)}var Ar=Object.assign,$R;function Dv(t){if($R===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$R=e&&e[1]||""}return`
`+$R+t}var UR=!1;function BR(t,e){if(!t||UR)return"";UR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{UR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dv(t):""}function zce(t){switch(t.tag){case 5:return Dv(t.type);case 16:return Dv("Lazy");case 13:return Dv("Suspense");case 19:return Dv("SuspenseList");case 0:case 2:case 15:return t=BR(t.type,!1),t;case 11:return t=BR(t.type.render,!1),t;case 1:return t=BR(t.type,!0),t;default:return""}}function ek(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Iy:return"Fragment";case xy:return"Portal";case J2:return"Profiler";case LM:return"StrictMode";case Z2:return"Suspense";case X2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dG:return(t.displayName||"Context")+".Consumer";case uG:return(t._context.displayName||"Context")+".Provider";case $M:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case UM:return e=t.displayName||null,e!==null?e:ek(t.type)||"Memo";case eh:e=t._payload,t=t._init;try{return ek(t(e))}catch{}}return null}function Hce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ek(e);case 8:return e===LM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fG(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Gce(t){var e=fG(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cA(t){t._valueTracker||(t._valueTracker=Gce(t))}function pG(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fG(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Dx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tk(t,e){var n=e.checked;return Ar({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function t6(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gG(t,e){e=e.checked,e!=null&&MM(t,"checked",e,!1)}function nk(t,e){gG(t,e);var n=Cf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rk(t,e.type,n):e.hasOwnProperty("defaultValue")&&rk(t,e.type,Cf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n6(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rk(t,e,n){(e!=="number"||Dx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mv=Array.isArray;function Jy(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cf(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sk(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return Ar({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r6(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(Mv(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cf(n)}}function mG(t,e){var n=Cf(e.value),r=Cf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function s6(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yG(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ik(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yG(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lA,wG=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lA=lA||document.createElement("div"),lA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lA.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function XE(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var dE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qce=["Webkit","ms","Moz","O"];Object.keys(dE).forEach(function(t){qce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dE[e]=dE[t]})});function bG(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||dE.hasOwnProperty(t)&&dE[t]?(""+e).trim():e+"px"}function vG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bG(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Vce=Ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ok(t,e){if(e){if(Vce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function ak(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ck=null;function BM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lk=null,Zy=null,Xy=null;function i6(t){if(t=e1(t)){if(typeof lk!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=ON(e),lk(t.stateNode,t.type,e))}}function EG(t){Zy?Xy?Xy.push(t):Xy=[t]:Zy=t}function CG(){if(Zy){var t=Zy,e=Xy;if(Xy=Zy=null,i6(t),e)for(t=0;t<e.length;t++)i6(e[t])}}function _G(t,e){return t(e)}function AG(){}var FR=!1;function SG(t,e,n){if(FR)return t(e,n);FR=!0;try{return _G(t,e,n)}finally{FR=!1,(Zy!==null||Xy!==null)&&(AG(),CG())}}function eC(t,e){var n=t.stateNode;if(n===null)return null;var r=ON(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var uk=!1;if(hd)try{var ev={};Object.defineProperty(ev,"passive",{get:function(){uk=!0}}),window.addEventListener("test",ev,ev),window.removeEventListener("test",ev,ev)}catch{uk=!1}function Kce(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var hE=!1,Mx=null,Lx=!1,dk=null,Yce={onError:function(t){hE=!0,Mx=t}};function Qce(t,e,n,r,s,i,o,a,c){hE=!1,Mx=null,Kce.apply(Yce,arguments)}function Jce(t,e,n,r,s,i,o,a,c){if(Qce.apply(this,arguments),hE){if(hE){var l=Mx;hE=!1,Mx=null}else throw Error(Ae(198));Lx||(Lx=!0,dk=l)}}function fm(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o6(t){if(fm(t)!==t)throw Error(Ae(188))}function Zce(t){var e=t.alternate;if(!e){if(e=fm(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return o6(s),t;if(i===r)return o6(s),e;i=i.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function IG(t){return t=Zce(t),t!==null?NG(t):null}function NG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NG(t);if(e!==null)return e;t=t.sibling}return null}var TG=sa.unstable_scheduleCallback,a6=sa.unstable_cancelCallback,Xce=sa.unstable_shouldYield,ele=sa.unstable_requestPaint,Br=sa.unstable_now,tle=sa.unstable_getCurrentPriorityLevel,FM=sa.unstable_ImmediatePriority,RG=sa.unstable_UserBlockingPriority,$x=sa.unstable_NormalPriority,nle=sa.unstable_LowPriority,PG=sa.unstable_IdlePriority,NN=null,Wl=null;function rle(t){if(Wl&&typeof Wl.onCommitFiberRoot=="function")try{Wl.onCommitFiberRoot(NN,t,void 0,(t.current.flags&128)===128)}catch{}}var jc=Math.clz32?Math.clz32:ole,sle=Math.log,ile=Math.LN2;function ole(t){return t>>>=0,t===0?32:31-(sle(t)/ile|0)|0}var uA=64,dA=4194304;function Lv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ux(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Lv(a):(i&=o,i!==0&&(r=Lv(i)))}else o=n&~s,o!==0?r=Lv(o):i!==0&&(r=Lv(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jc(e),s=1<<n,r|=t[n],e&=~s;return r}function ale(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cle(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-jc(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=ale(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function hk(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OG(){var t=uA;return uA<<=1,!(uA&4194240)&&(uA=64),t}function jR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Z_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jc(e),t[e]=n}function lle(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-jc(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jc(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var On=0;function kG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DG,WM,MG,LG,$G,fk=!1,hA=[],Zh=null,Xh=null,ef=null,tC=new Map,nC=new Map,oh=[],ule="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c6(t,e){switch(t){case"focusin":case"focusout":Zh=null;break;case"dragenter":case"dragleave":Xh=null;break;case"mouseover":case"mouseout":ef=null;break;case"pointerover":case"pointerout":tC.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nC.delete(e.pointerId)}}function tv(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=e1(e),e!==null&&WM(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dle(t,e,n,r,s){switch(e){case"focusin":return Zh=tv(Zh,t,e,n,r,s),!0;case"dragenter":return Xh=tv(Xh,t,e,n,r,s),!0;case"mouseover":return ef=tv(ef,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return tC.set(i,tv(tC.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,nC.set(i,tv(nC.get(i)||null,t,e,n,r,s)),!0}return!1}function UG(t){var e=Np(t.target);if(e!==null){var n=fm(e);if(n!==null){if(e=n.tag,e===13){if(e=xG(n),e!==null){t.blockedOn=e,$G(t.priority,function(){MG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pk(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ck=r,n.target.dispatchEvent(r),ck=null}else return e=e1(n),e!==null&&WM(e),t.blockedOn=n,!1;e.shift()}return!0}function l6(t,e,n){xS(t)&&n.delete(e)}function hle(){fk=!1,Zh!==null&&xS(Zh)&&(Zh=null),Xh!==null&&xS(Xh)&&(Xh=null),ef!==null&&xS(ef)&&(ef=null),tC.forEach(l6),nC.forEach(l6)}function nv(t,e){t.blockedOn===e&&(t.blockedOn=null,fk||(fk=!0,sa.unstable_scheduleCallback(sa.unstable_NormalPriority,hle)))}function rC(t){function e(s){return nv(s,t)}if(0<hA.length){nv(hA[0],t);for(var n=1;n<hA.length;n++){var r=hA[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zh!==null&&nv(Zh,t),Xh!==null&&nv(Xh,t),ef!==null&&nv(ef,t),tC.forEach(e),nC.forEach(e),n=0;n<oh.length;n++)r=oh[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<oh.length&&(n=oh[0],n.blockedOn===null);)UG(n),n.blockedOn===null&&oh.shift()}var e0=_d.ReactCurrentBatchConfig,Bx=!0;function fle(t,e,n,r){var s=On,i=e0.transition;e0.transition=null;try{On=1,zM(t,e,n,r)}finally{On=s,e0.transition=i}}function ple(t,e,n,r){var s=On,i=e0.transition;e0.transition=null;try{On=4,zM(t,e,n,r)}finally{On=s,e0.transition=i}}function zM(t,e,n,r){if(Bx){var s=pk(t,e,n,r);if(s===null)JR(t,e,r,Fx,n),c6(t,r);else if(dle(s,t,e,n,r))r.stopPropagation();else if(c6(t,r),e&4&&-1<ule.indexOf(t)){for(;s!==null;){var i=e1(s);if(i!==null&&DG(i),i=pk(t,e,n,r),i===null&&JR(t,e,r,Fx,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else JR(t,e,r,null,n)}}var Fx=null;function pk(t,e,n,r){if(Fx=null,t=BM(r),t=Np(t),t!==null)if(e=fm(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fx=t,null}function BG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tle()){case FM:return 1;case RG:return 4;case $x:case nle:return 16;case PG:return 536870912;default:return 16}default:return 16}}var Bh=null,HM=null,IS=null;function FG(){if(IS)return IS;var t,e=HM,n=e.length,r,s="value"in Bh?Bh.value:Bh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return IS=s.slice(t,1<r?1-r:void 0)}function NS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fA(){return!0}function u6(){return!1}function ca(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fA:u6,this.isPropagationStopped=u6,this}return Ar(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fA)},persist:function(){},isPersistent:fA}),e}var hb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},GM=ca(hb),X_=Ar({},hb,{view:0,detail:0}),gle=ca(X_),WR,zR,rv,TN=Ar({},X_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rv&&(rv&&t.type==="mousemove"?(WR=t.screenX-rv.screenX,zR=t.screenY-rv.screenY):zR=WR=0,rv=t),WR)},movementY:function(t){return"movementY"in t?t.movementY:zR}}),d6=ca(TN),mle=Ar({},TN,{dataTransfer:0}),yle=ca(mle),wle=Ar({},X_,{relatedTarget:0}),HR=ca(wle),ble=Ar({},hb,{animationName:0,elapsedTime:0,pseudoElement:0}),vle=ca(ble),Ele=Ar({},hb,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cle=ca(Ele),_le=Ar({},hb,{data:0}),h6=ca(_le),Ale={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ile(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xle[t])?!!e[t]:!1}function qM(){return Ile}var Nle=Ar({},X_,{key:function(t){if(t.key){var e=Ale[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=NS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qM,charCode:function(t){return t.type==="keypress"?NS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?NS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tle=ca(Nle),Rle=Ar({},TN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f6=ca(Rle),Ple=Ar({},X_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qM}),Ole=ca(Ple),kle=Ar({},hb,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dle=ca(kle),Mle=Ar({},TN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lle=ca(Mle),$le=[9,13,27,32],VM=hd&&"CompositionEvent"in window,fE=null;hd&&"documentMode"in document&&(fE=document.documentMode);var Ule=hd&&"TextEvent"in window&&!fE,jG=hd&&(!VM||fE&&8<fE&&11>=fE),p6=" ",g6=!1;function WG(t,e){switch(t){case"keyup":return $le.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ny=!1;function Ble(t,e){switch(t){case"compositionend":return zG(e);case"keypress":return e.which!==32?null:(g6=!0,p6);case"textInput":return t=e.data,t===p6&&g6?null:t;default:return null}}function Fle(t,e){if(Ny)return t==="compositionend"||!VM&&WG(t,e)?(t=FG(),IS=HM=Bh=null,Ny=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jG&&e.locale!=="ko"?null:e.data;default:return null}}var jle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jle[t.type]:e==="textarea"}function HG(t,e,n,r){EG(r),e=jx(e,"onChange"),0<e.length&&(n=new GM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var pE=null,sC=null;function Wle(t){tq(t,0)}function RN(t){var e=Py(t);if(pG(e))return t}function zle(t,e){if(t==="change")return e}var GG=!1;if(hd){var GR;if(hd){var qR="oninput"in document;if(!qR){var y6=document.createElement("div");y6.setAttribute("oninput","return;"),qR=typeof y6.oninput=="function"}GR=qR}else GR=!1;GG=GR&&(!document.documentMode||9<document.documentMode)}function w6(){pE&&(pE.detachEvent("onpropertychange",qG),sC=pE=null)}function qG(t){if(t.propertyName==="value"&&RN(sC)){var e=[];HG(e,sC,t,BM(t)),SG(Wle,e)}}function Hle(t,e,n){t==="focusin"?(w6(),pE=e,sC=n,pE.attachEvent("onpropertychange",qG)):t==="focusout"&&w6()}function Gle(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return RN(sC)}function qle(t,e){if(t==="click")return RN(e)}function Vle(t,e){if(t==="input"||t==="change")return RN(e)}function Kle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gc=typeof Object.is=="function"?Object.is:Kle;function iC(t,e){if(Gc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Q2.call(e,s)||!Gc(t[s],e[s]))return!1}return!0}function b6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v6(t,e){var n=b6(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b6(n)}}function VG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?VG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function KG(){for(var t=window,e=Dx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Dx(t.document)}return e}function KM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yle(t){var e=KG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&VG(n.ownerDocument.documentElement,n)){if(r!==null&&KM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=v6(n,i);var o=v6(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qle=hd&&"documentMode"in document&&11>=document.documentMode,Ty=null,gk=null,gE=null,mk=!1;function E6(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mk||Ty==null||Ty!==Dx(r)||(r=Ty,"selectionStart"in r&&KM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gE&&iC(gE,r)||(gE=r,r=jx(gk,"onSelect"),0<r.length&&(e=new GM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ty)))}function pA(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ry={animationend:pA("Animation","AnimationEnd"),animationiteration:pA("Animation","AnimationIteration"),animationstart:pA("Animation","AnimationStart"),transitionend:pA("Transition","TransitionEnd")},VR={},YG={};hd&&(YG=document.createElement("div").style,"AnimationEvent"in window||(delete Ry.animationend.animation,delete Ry.animationiteration.animation,delete Ry.animationstart.animation),"TransitionEvent"in window||delete Ry.transitionend.transition);function PN(t){if(VR[t])return VR[t];if(!Ry[t])return t;var e=Ry[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in YG)return VR[t]=e[n];return t}var QG=PN("animationend"),JG=PN("animationiteration"),ZG=PN("animationstart"),XG=PN("transitionend"),eq=new Map,C6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lf(t,e){eq.set(t,e),hm(e,[t])}for(var KR=0;KR<C6.length;KR++){var YR=C6[KR],Jle=YR.toLowerCase(),Zle=YR[0].toUpperCase()+YR.slice(1);Lf(Jle,"on"+Zle)}Lf(QG,"onAnimationEnd");Lf(JG,"onAnimationIteration");Lf(ZG,"onAnimationStart");Lf("dblclick","onDoubleClick");Lf("focusin","onFocus");Lf("focusout","onBlur");Lf(XG,"onTransitionEnd");bw("onMouseEnter",["mouseout","mouseover"]);bw("onMouseLeave",["mouseout","mouseover"]);bw("onPointerEnter",["pointerout","pointerover"]);bw("onPointerLeave",["pointerout","pointerover"]);hm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hm("onBeforeInput",["compositionend","keypress","textInput","paste"]);hm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $v="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xle=new Set("cancel close invalid load scroll toggle".split(" ").concat($v));function _6(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jce(r,e,void 0,t),t.currentTarget=null}function tq(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;_6(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;_6(s,a,l),i=c}}}if(Lx)throw t=dk,Lx=!1,dk=null,t}function cr(t,e){var n=e[Ek];n===void 0&&(n=e[Ek]=new Set);var r=t+"__bubble";n.has(r)||(nq(e,t,2,!1),n.add(r))}function QR(t,e,n){var r=0;e&&(r|=4),nq(n,t,r,e)}var gA="_reactListening"+Math.random().toString(36).slice(2);function oC(t){if(!t[gA]){t[gA]=!0,lG.forEach(function(n){n!=="selectionchange"&&(Xle.has(n)||QR(n,!1,t),QR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gA]||(e[gA]=!0,QR("selectionchange",!1,e))}}function nq(t,e,n,r){switch(BG(e)){case 1:var s=fle;break;case 4:s=ple;break;default:s=zM}n=s.bind(null,e,n,t),s=void 0,!uk||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function JR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Np(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}SG(function(){var l=i,u=BM(n),d=[];e:{var h=eq.get(t);if(h!==void 0){var f=GM,p=t;switch(t){case"keypress":if(NS(n)===0)break e;case"keydown":case"keyup":f=Tle;break;case"focusin":p="focus",f=HR;break;case"focusout":p="blur",f=HR;break;case"beforeblur":case"afterblur":f=HR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=d6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=yle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Ole;break;case QG:case JG:case ZG:f=vle;break;case XG:f=Dle;break;case"scroll":f=gle;break;case"wheel":f=Lle;break;case"copy":case"cut":case"paste":f=Cle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=f6}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,y!==null&&(A=eC(b,y),A!=null&&g.push(aC(b,A,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==ck&&(p=n.relatedTarget||n.fromElement)&&(Np(p)||p[fd]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Np(p):null,p!==null&&(w=fm(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=d6,A="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=f6,A="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:Py(f),v=p==null?h:Py(p),h=new g(A,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,A=null,Np(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,A=g),w=A,f&&p)t:{for(g=f,y=p,b=0,v=g;v;v=Bm(v))b++;for(v=0,A=y;A;A=Bm(A))v++;for(;0<b-v;)g=Bm(g),b--;for(;0<v-b;)y=Bm(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=Bm(g),y=Bm(y)}g=null}else g=null;f!==null&&A6(d,h,f,g,!1),p!==null&&w!==null&&A6(d,w,p,g,!0)}}e:{if(h=l?Py(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=zle;else if(m6(h))if(GG)_=Vle;else{_=Gle;var I=Hle}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=qle);if(_&&(_=_(t,l))){HG(d,_,n,u);break e}I&&I(t,h,l),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&rk(h,"number",h.value)}switch(I=l?Py(l):window,t){case"focusin":(m6(I)||I.contentEditable==="true")&&(Ty=I,gk=l,gE=null);break;case"focusout":gE=gk=Ty=null;break;case"mousedown":mk=!0;break;case"contextmenu":case"mouseup":case"dragend":mk=!1,E6(d,n,u);break;case"selectionchange":if(Qle)break;case"keydown":case"keyup":E6(d,n,u)}var x;if(VM)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ny?WG(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(jG&&n.locale!=="ko"&&(Ny||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ny&&(x=FG()):(Bh=u,HM="value"in Bh?Bh.value:Bh.textContent,Ny=!0)),I=jx(l,N),0<I.length&&(N=new h6(N,t,null,n,u),d.push({event:N,listeners:I}),x?N.data=x:(x=zG(n),x!==null&&(N.data=x)))),(x=Ule?Ble(t,n):Fle(t,n))&&(l=jx(l,"onBeforeInput"),0<l.length&&(u=new h6("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}tq(d,e)})}function aC(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=eC(t,n),i!=null&&r.unshift(aC(t,i,s)),i=eC(t,e),i!=null&&r.push(aC(t,i,s))),t=t.return}return r}function Bm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function A6(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=eC(n,i),c!=null&&o.unshift(aC(n,c,a))):s||(c=eC(n,i),c!=null&&o.push(aC(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eue=/\r\n?/g,tue=/\u0000|\uFFFD/g;function S6(t){return(typeof t=="string"?t:""+t).replace(eue,`
`).replace(tue,"")}function mA(t,e,n){if(e=S6(e),S6(t)!==e&&n)throw Error(Ae(425))}function Wx(){}var yk=null,wk=null;function bk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vk=typeof setTimeout=="function"?setTimeout:void 0,nue=typeof clearTimeout=="function"?clearTimeout:void 0,x6=typeof Promise=="function"?Promise:void 0,rue=typeof queueMicrotask=="function"?queueMicrotask:typeof x6<"u"?function(t){return x6.resolve(null).then(t).catch(sue)}:vk;function sue(t){setTimeout(function(){throw t})}function ZR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),rC(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);rC(e)}function tf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function I6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fb=Math.random().toString(36).slice(2),Dl="__reactFiber$"+fb,cC="__reactProps$"+fb,fd="__reactContainer$"+fb,Ek="__reactEvents$"+fb,iue="__reactListeners$"+fb,oue="__reactHandles$"+fb;function Np(t){var e=t[Dl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fd]||n[Dl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=I6(t);t!==null;){if(n=t[Dl])return n;t=I6(t)}return e}t=n,n=t.parentNode}return null}function e1(t){return t=t[Dl]||t[fd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Py(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function ON(t){return t[cC]||null}var Ck=[],Oy=-1;function $f(t){return{current:t}}function ur(t){0>Oy||(t.current=Ck[Oy],Ck[Oy]=null,Oy--)}function or(t,e){Oy++,Ck[Oy]=t.current,t.current=e}var _f={},gi=$f(_f),Eo=$f(!1),Og=_f;function vw(t,e){var n=t.type.contextTypes;if(!n)return _f;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Co(t){return t=t.childContextTypes,t!=null}function zx(){ur(Eo),ur(gi)}function N6(t,e,n){if(gi.current!==_f)throw Error(Ae(168));or(gi,e),or(Eo,n)}function rq(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ae(108,Hce(t)||"Unknown",s));return Ar({},n,r)}function Hx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_f,Og=gi.current,or(gi,t),or(Eo,Eo.current),!0}function T6(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=rq(t,e,Og),r.__reactInternalMemoizedMergedChildContext=t,ur(Eo),ur(gi),or(gi,t)):ur(Eo),or(Eo,n)}var Nu=null,kN=!1,XR=!1;function sq(t){Nu===null?Nu=[t]:Nu.push(t)}function aue(t){kN=!0,sq(t)}function Uf(){if(!XR&&Nu!==null){XR=!0;var t=0,e=On;try{var n=Nu;for(On=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nu=null,kN=!1}catch(s){throw Nu!==null&&(Nu=Nu.slice(t+1)),TG(FM,Uf),s}finally{On=e,XR=!1}}return null}var ky=[],Dy=0,Gx=null,qx=0,Ua=[],Ba=0,kg=null,Yu=1,Qu="";function lp(t,e){ky[Dy++]=qx,ky[Dy++]=Gx,Gx=t,qx=e}function iq(t,e,n){Ua[Ba++]=Yu,Ua[Ba++]=Qu,Ua[Ba++]=kg,kg=t;var r=Yu;t=Qu;var s=32-jc(r)-1;r&=~(1<<s),n+=1;var i=32-jc(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Yu=1<<32-jc(e)+s|n<<s|r,Qu=i+t}else Yu=1<<i|n<<s|r,Qu=t}function YM(t){t.return!==null&&(lp(t,1),iq(t,1,0))}function QM(t){for(;t===Gx;)Gx=ky[--Dy],ky[Dy]=null,qx=ky[--Dy],ky[Dy]=null;for(;t===kg;)kg=Ua[--Ba],Ua[Ba]=null,Qu=Ua[--Ba],Ua[Ba]=null,Yu=Ua[--Ba],Ua[Ba]=null}var ta=null,Jo=null,gr=!1,Tc=null;function oq(t,e){var n=ja(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function R6(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ta=t,Jo=tf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ta=t,Jo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kg!==null?{id:Yu,overflow:Qu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ja(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ta=t,Jo=null,!0):!1;default:return!1}}function _k(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ak(t){if(gr){var e=Jo;if(e){var n=e;if(!R6(t,e)){if(_k(t))throw Error(Ae(418));e=tf(n.nextSibling);var r=ta;e&&R6(t,e)?oq(r,n):(t.flags=t.flags&-4097|2,gr=!1,ta=t)}}else{if(_k(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,gr=!1,ta=t}}}function P6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ta=t}function yA(t){if(t!==ta)return!1;if(!gr)return P6(t),gr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bk(t.type,t.memoizedProps)),e&&(e=Jo)){if(_k(t))throw aq(),Error(Ae(418));for(;e;)oq(t,e),e=tf(e.nextSibling)}if(P6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jo=tf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jo=null}}else Jo=ta?tf(t.stateNode.nextSibling):null;return!0}function aq(){for(var t=Jo;t;)t=tf(t.nextSibling)}function Ew(){Jo=ta=null,gr=!1}function JM(t){Tc===null?Tc=[t]:Tc.push(t)}var cue=_d.ReactCurrentBatchConfig;function sv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function wA(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function O6(t){var e=t._init;return e(t._payload)}function cq(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=of(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,A){return b===null||b.tag!==6?(b=oP(v,y.mode,A),b.return=y,b):(b=s(b,v),b.return=y,b)}function c(y,b,v,A){var _=v.type;return _===Iy?u(y,b,v.props.children,A,v.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===eh&&O6(_)===b.type)?(A=s(b,v.props),A.ref=sv(y,b,v),A.return=y,A):(A=MS(v.type,v.key,v.props,null,y.mode,A),A.ref=sv(y,b,v),A.return=y,A)}function l(y,b,v,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=aP(v,y.mode,A),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,A,_){return b===null||b.tag!==7?(b=bg(v,y.mode,A,_),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=oP(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case aA:return v=MS(b.type,b.key,b.props,null,y.mode,v),v.ref=sv(y,null,b),v.return=y,v;case xy:return b=aP(b,y.mode,v),b.return=y,b;case eh:var A=b._init;return d(y,A(b._payload),v)}if(Mv(b)||Xb(b))return b=bg(b,y.mode,v,null),b.return=y,b;wA(y,b)}return null}function h(y,b,v,A){var _=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(y,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case aA:return v.key===_?c(y,b,v,A):null;case xy:return v.key===_?l(y,b,v,A):null;case eh:return _=v._init,h(y,b,_(v._payload),A)}if(Mv(v)||Xb(v))return _!==null?null:u(y,b,v,A,null);wA(y,v)}return null}function f(y,b,v,A,_){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(v)||null,a(b,y,""+A,_);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case aA:return y=y.get(A.key===null?v:A.key)||null,c(b,y,A,_);case xy:return y=y.get(A.key===null?v:A.key)||null,l(b,y,A,_);case eh:var I=A._init;return f(y,b,v,I(A._payload),_)}if(Mv(A)||Xb(A))return y=y.get(v)||null,u(b,y,A,_,null);wA(b,A)}return null}function p(y,b,v,A){for(var _=null,I=null,x=b,N=b=0,S=null;x!==null&&N<v.length;N++){x.index>N?(S=x,x=null):S=x.sibling;var O=h(y,x,v[N],A);if(O===null){x===null&&(x=S);break}t&&x&&O.alternate===null&&e(y,x),b=i(O,b,N),I===null?_=O:I.sibling=O,I=O,x=S}if(N===v.length)return n(y,x),gr&&lp(y,N),_;if(x===null){for(;N<v.length;N++)x=d(y,v[N],A),x!==null&&(b=i(x,b,N),I===null?_=x:I.sibling=x,I=x);return gr&&lp(y,N),_}for(x=r(y,x);N<v.length;N++)S=f(x,y,N,v[N],A),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?N:S.key),b=i(S,b,N),I===null?_=S:I.sibling=S,I=S);return t&&x.forEach(function(P){return e(y,P)}),gr&&lp(y,N),_}function g(y,b,v,A){var _=Xb(v);if(typeof _!="function")throw Error(Ae(150));if(v=_.call(v),v==null)throw Error(Ae(151));for(var I=_=null,x=b,N=b=0,S=null,O=v.next();x!==null&&!O.done;N++,O=v.next()){x.index>N?(S=x,x=null):S=x.sibling;var P=h(y,x,O.value,A);if(P===null){x===null&&(x=S);break}t&&x&&P.alternate===null&&e(y,x),b=i(P,b,N),I===null?_=P:I.sibling=P,I=P,x=S}if(O.done)return n(y,x),gr&&lp(y,N),_;if(x===null){for(;!O.done;N++,O=v.next())O=d(y,O.value,A),O!==null&&(b=i(O,b,N),I===null?_=O:I.sibling=O,I=O);return gr&&lp(y,N),_}for(x=r(y,x);!O.done;N++,O=v.next())O=f(x,y,N,O.value,A),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?N:O.key),b=i(O,b,N),I===null?_=O:I.sibling=O,I=O);return t&&x.forEach(function(F){return e(y,F)}),gr&&lp(y,N),_}function w(y,b,v,A){if(typeof v=="object"&&v!==null&&v.type===Iy&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case aA:e:{for(var _=v.key,I=b;I!==null;){if(I.key===_){if(_=v.type,_===Iy){if(I.tag===7){n(y,I.sibling),b=s(I,v.props.children),b.return=y,y=b;break e}}else if(I.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===eh&&O6(_)===I.type){n(y,I.sibling),b=s(I,v.props),b.ref=sv(y,I,v),b.return=y,y=b;break e}n(y,I);break}else e(y,I);I=I.sibling}v.type===Iy?(b=bg(v.props.children,y.mode,A,v.key),b.return=y,y=b):(A=MS(v.type,v.key,v.props,null,y.mode,A),A.ref=sv(y,b,v),A.return=y,y=A)}return o(y);case xy:e:{for(I=v.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=aP(v,y.mode,A),b.return=y,y=b}return o(y);case eh:return I=v._init,w(y,b,I(v._payload),A)}if(Mv(v))return p(y,b,v,A);if(Xb(v))return g(y,b,v,A);wA(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=oP(v,y.mode,A),b.return=y,y=b),o(y)):n(y,b)}return w}var Cw=cq(!0),lq=cq(!1),Vx=$f(null),Kx=null,My=null,ZM=null;function XM(){ZM=My=Kx=null}function eL(t){var e=Vx.current;ur(Vx),t._currentValue=e}function Sk(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function t0(t,e){Kx=t,ZM=My=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bo=!0),t.firstContext=null)}function qa(t){var e=t._currentValue;if(ZM!==t)if(t={context:t,memoizedValue:e,next:null},My===null){if(Kx===null)throw Error(Ae(308));My=t,Kx.dependencies={lanes:0,firstContext:t}}else My=My.next=t;return e}var Tp=null;function tL(t){Tp===null?Tp=[t]:Tp.push(t)}function uq(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,tL(e)):(n.next=s.next,s.next=n),e.interleaved=n,pd(t,r)}function pd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var th=!1;function nL(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dq(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function td(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,dn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,pd(t,n)}return s=r.interleaved,s===null?(e.next=e,tL(r)):(e.next=s.next,s.next=e),r.interleaved=e,pd(t,n)}function TS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jM(t,n)}}function k6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yx(t,e,n,r){var s=t.updateQueue;th=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ar({},d,h);break e;case 2:th=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Mg|=o,t.lanes=o,t.memoizedState=d}}function D6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ae(191,s));s.call(r)}}}var t1={},zl=$f(t1),lC=$f(t1),uC=$f(t1);function Rp(t){if(t===t1)throw Error(Ae(174));return t}function rL(t,e){switch(or(uC,e),or(lC,t),or(zl,t1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ik(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ik(e,t)}ur(zl),or(zl,e)}function _w(){ur(zl),ur(lC),ur(uC)}function hq(t){Rp(uC.current);var e=Rp(zl.current),n=ik(e,t.type);e!==n&&(or(lC,t),or(zl,n))}function sL(t){lC.current===t&&(ur(zl),ur(lC))}var br=$f(0);function Qx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eP=[];function iL(){for(var t=0;t<eP.length;t++)eP[t]._workInProgressVersionPrimary=null;eP.length=0}var RS=_d.ReactCurrentDispatcher,tP=_d.ReactCurrentBatchConfig,Dg=0,_r=null,es=null,vs=null,Jx=!1,mE=!1,dC=0,lue=0;function ri(){throw Error(Ae(321))}function oL(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gc(t[n],e[n]))return!1;return!0}function aL(t,e,n,r,s,i){if(Dg=i,_r=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,RS.current=t===null||t.memoizedState===null?fue:pue,t=n(r,s),mE){i=0;do{if(mE=!1,dC=0,25<=i)throw Error(Ae(301));i+=1,vs=es=null,e.updateQueue=null,RS.current=gue,t=n(r,s)}while(mE)}if(RS.current=Zx,e=es!==null&&es.next!==null,Dg=0,vs=es=_r=null,Jx=!1,e)throw Error(Ae(300));return t}function cL(){var t=dC!==0;return dC=0,t}function hl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vs===null?_r.memoizedState=vs=t:vs=vs.next=t,vs}function Va(){if(es===null){var t=_r.alternate;t=t!==null?t.memoizedState:null}else t=es.next;var e=vs===null?_r.memoizedState:vs.next;if(e!==null)vs=e,es=t;else{if(t===null)throw Error(Ae(310));es=t,t={memoizedState:es.memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},vs===null?_r.memoizedState=vs=t:vs=vs.next=t}return vs}function hC(t,e){return typeof e=="function"?e(t):e}function nP(t){var e=Va(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=es,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Dg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,_r.lanes|=u,Mg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Gc(r,e.memoizedState)||(bo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_r.lanes|=i,Mg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rP(t){var e=Va(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Gc(i,e.memoizedState)||(bo=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function fq(){}function pq(t,e){var n=_r,r=Va(),s=e(),i=!Gc(r.memoizedState,s);if(i&&(r.memoizedState=s,bo=!0),r=r.queue,lL(yq.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||vs!==null&&vs.memoizedState.tag&1){if(n.flags|=2048,fC(9,mq.bind(null,n,r,s,e),void 0,null),Ns===null)throw Error(Ae(349));Dg&30||gq(n,e,s)}return s}function gq(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_r.updateQueue,e===null?(e={lastEffect:null,stores:null},_r.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mq(t,e,n,r){e.value=n,e.getSnapshot=r,wq(e)&&bq(t)}function yq(t,e,n){return n(function(){wq(e)&&bq(t)})}function wq(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gc(t,n)}catch{return!0}}function bq(t){var e=pd(t,1);e!==null&&Wc(e,t,1,-1)}function M6(t){var e=hl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hC,lastRenderedState:t},e.queue=t,t=t.dispatch=hue.bind(null,_r,t),[e.memoizedState,t]}function fC(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_r.updateQueue,e===null?(e={lastEffect:null,stores:null},_r.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vq(){return Va().memoizedState}function PS(t,e,n,r){var s=hl();_r.flags|=t,s.memoizedState=fC(1|e,n,void 0,r===void 0?null:r)}function DN(t,e,n,r){var s=Va();r=r===void 0?null:r;var i=void 0;if(es!==null){var o=es.memoizedState;if(i=o.destroy,r!==null&&oL(r,o.deps)){s.memoizedState=fC(e,n,i,r);return}}_r.flags|=t,s.memoizedState=fC(1|e,n,i,r)}function L6(t,e){return PS(8390656,8,t,e)}function lL(t,e){return DN(2048,8,t,e)}function Eq(t,e){return DN(4,2,t,e)}function Cq(t,e){return DN(4,4,t,e)}function _q(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Aq(t,e,n){return n=n!=null?n.concat([t]):null,DN(4,4,_q.bind(null,e,t),n)}function uL(){}function Sq(t,e){var n=Va();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&oL(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xq(t,e){var n=Va();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&oL(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Iq(t,e,n){return Dg&21?(Gc(n,e)||(n=OG(),_r.lanes|=n,Mg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bo=!0),t.memoizedState=n)}function uue(t,e){var n=On;On=n!==0&&4>n?n:4,t(!0);var r=tP.transition;tP.transition={};try{t(!1),e()}finally{On=n,tP.transition=r}}function Nq(){return Va().memoizedState}function due(t,e,n){var r=sf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tq(t))Rq(e,n);else if(n=uq(t,e,n,r),n!==null){var s=Ui();Wc(n,t,r,s),Pq(n,e,r)}}function hue(t,e,n){var r=sf(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tq(t))Rq(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Gc(a,o)){var c=e.interleaved;c===null?(s.next=s,tL(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=uq(t,e,s,r),n!==null&&(s=Ui(),Wc(n,t,r,s),Pq(n,e,r))}}function Tq(t){var e=t.alternate;return t===_r||e!==null&&e===_r}function Rq(t,e){mE=Jx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Pq(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jM(t,n)}}var Zx={readContext:qa,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},fue={readContext:qa,useCallback:function(t,e){return hl().memoizedState=[t,e===void 0?null:e],t},useContext:qa,useEffect:L6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,PS(4194308,4,_q.bind(null,e,t),n)},useLayoutEffect:function(t,e){return PS(4194308,4,t,e)},useInsertionEffect:function(t,e){return PS(4,2,t,e)},useMemo:function(t,e){var n=hl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=due.bind(null,_r,t),[r.memoizedState,t]},useRef:function(t){var e=hl();return t={current:t},e.memoizedState=t},useState:M6,useDebugValue:uL,useDeferredValue:function(t){return hl().memoizedState=t},useTransition:function(){var t=M6(!1),e=t[0];return t=uue.bind(null,t[1]),hl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_r,s=hl();if(gr){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),Ns===null)throw Error(Ae(349));Dg&30||gq(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,L6(yq.bind(null,r,i,t),[t]),r.flags|=2048,fC(9,mq.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hl(),e=Ns.identifierPrefix;if(gr){var n=Qu,r=Yu;n=(r&~(1<<32-jc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=dC++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lue++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pue={readContext:qa,useCallback:Sq,useContext:qa,useEffect:lL,useImperativeHandle:Aq,useInsertionEffect:Eq,useLayoutEffect:Cq,useMemo:xq,useReducer:nP,useRef:vq,useState:function(){return nP(hC)},useDebugValue:uL,useDeferredValue:function(t){var e=Va();return Iq(e,es.memoizedState,t)},useTransition:function(){var t=nP(hC)[0],e=Va().memoizedState;return[t,e]},useMutableSource:fq,useSyncExternalStore:pq,useId:Nq,unstable_isNewReconciler:!1},gue={readContext:qa,useCallback:Sq,useContext:qa,useEffect:lL,useImperativeHandle:Aq,useInsertionEffect:Eq,useLayoutEffect:Cq,useMemo:xq,useReducer:rP,useRef:vq,useState:function(){return rP(hC)},useDebugValue:uL,useDeferredValue:function(t){var e=Va();return es===null?e.memoizedState=t:Iq(e,es.memoizedState,t)},useTransition:function(){var t=rP(hC)[0],e=Va().memoizedState;return[t,e]},useMutableSource:fq,useSyncExternalStore:pq,useId:Nq,unstable_isNewReconciler:!1};function wc(t,e){if(t&&t.defaultProps){e=Ar({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xk(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ar({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var MN={isMounted:function(t){return(t=t._reactInternals)?fm(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ui(),s=sf(t),i=td(r,s);i.payload=e,n!=null&&(i.callback=n),e=nf(t,i,s),e!==null&&(Wc(e,t,s,r),TS(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ui(),s=sf(t),i=td(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=nf(t,i,s),e!==null&&(Wc(e,t,s,r),TS(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ui(),r=sf(t),s=td(n,r);s.tag=2,e!=null&&(s.callback=e),e=nf(t,s,r),e!==null&&(Wc(e,t,r,n),TS(e,t,r))}};function $6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!iC(n,r)||!iC(s,i):!0}function Oq(t,e,n){var r=!1,s=_f,i=e.contextType;return typeof i=="object"&&i!==null?i=qa(i):(s=Co(e)?Og:gi.current,r=e.contextTypes,i=(r=r!=null)?vw(t,s):_f),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=MN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function U6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&MN.enqueueReplaceState(e,e.state,null)}function Ik(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},nL(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qa(i):(i=Co(e)?Og:gi.current,s.context=vw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xk(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&MN.enqueueReplaceState(s,s.state,null),Yx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Aw(t,e){try{var n="",r=e;do n+=zce(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sP(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mue=typeof WeakMap=="function"?WeakMap:Map;function kq(t,e,n){n=td(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){eI||(eI=!0,Uk=r),Nk(t,e)},n}function Dq(t,e,n){n=td(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nk(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nk(t,e),typeof r!="function"&&(rf===null?rf=new Set([this]):rf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function B6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mue;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Rue.bind(null,t,e,n),e.then(t,t))}function F6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function j6(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=td(-1,1),e.tag=2,nf(n,e,1))),n.lanes|=1),t)}var yue=_d.ReactCurrentOwner,bo=!1;function xi(t,e,n,r){e.child=t===null?lq(e,null,n,r):Cw(e,t.child,n,r)}function W6(t,e,n,r,s){n=n.render;var i=e.ref;return t0(e,s),r=aL(t,e,n,r,i,s),n=cL(),t!==null&&!bo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gd(t,e,s)):(gr&&n&&YM(e),e.flags|=1,xi(t,e,r,s),e.child)}function z6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Mq(t,e,i,r,s)):(t=MS(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:iC,n(o,r)&&t.ref===e.ref)return gd(t,e,s)}return e.flags|=1,t=of(i,r),t.ref=e.ref,t.return=e,e.child=t}function Mq(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(iC(i,r)&&t.ref===e.ref)if(bo=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bo=!0);else return e.lanes=t.lanes,gd(t,e,s)}return Tk(t,e,n,r,s)}function Lq(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},or($y,qo),qo|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,or($y,qo),qo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,or($y,qo),qo|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,or($y,qo),qo|=r;return xi(t,e,s,n),e.child}function $q(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tk(t,e,n,r,s){var i=Co(n)?Og:gi.current;return i=vw(e,i),t0(e,s),n=aL(t,e,n,r,i,s),r=cL(),t!==null&&!bo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gd(t,e,s)):(gr&&r&&YM(e),e.flags|=1,xi(t,e,n,s),e.child)}function H6(t,e,n,r,s){if(Co(n)){var i=!0;Hx(e)}else i=!1;if(t0(e,s),e.stateNode===null)OS(t,e),Oq(e,n,r),Ik(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=qa(l):(l=Co(n)?Og:gi.current,l=vw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&U6(e,o,r,l),th=!1;var h=e.memoizedState;o.state=h,Yx(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Eo.current||th?(typeof u=="function"&&(xk(e,n,u,r),c=e.memoizedState),(a=th||$6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dq(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:wc(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=qa(c):(c=Co(n)?Og:gi.current,c=vw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&U6(e,o,r,c),th=!1,h=e.memoizedState,o.state=h,Yx(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Eo.current||th?(typeof f=="function"&&(xk(e,n,f,r),p=e.memoizedState),(l=th||$6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Rk(t,e,n,r,i,s)}function Rk(t,e,n,r,s,i){$q(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&T6(e,n,!1),gd(t,e,i);r=e.stateNode,yue.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Cw(e,t.child,null,i),e.child=Cw(e,null,a,i)):xi(t,e,a,i),e.memoizedState=r.state,s&&T6(e,n,!0),e.child}function Uq(t){var e=t.stateNode;e.pendingContext?N6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N6(t,e.context,!1),rL(t,e.containerInfo)}function G6(t,e,n,r,s){return Ew(),JM(s),e.flags|=256,xi(t,e,n,r),e.child}var Pk={dehydrated:null,treeContext:null,retryLane:0};function Ok(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bq(t,e,n){var r=e.pendingProps,s=br.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),or(br,s&1),t===null)return Ak(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=UN(o,r,0,null),t=bg(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ok(n),e.memoizedState=Pk,t):dL(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return wue(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=of(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=of(a,i):(i=bg(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ok(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Pk,r}return i=t.child,t=i.sibling,r=of(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function dL(t,e){return e=UN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bA(t,e,n,r){return r!==null&&JM(r),Cw(e,t.child,null,n),t=dL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wue(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=sP(Error(Ae(422))),bA(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=UN({mode:"visible",children:r.children},s,0,null),i=bg(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Cw(e,t.child,null,o),e.child.memoizedState=Ok(o),e.memoizedState=Pk,i);if(!(e.mode&1))return bA(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ae(419)),r=sP(i,r,void 0),bA(t,e,o,r)}if(a=(o&t.childLanes)!==0,bo||a){if(r=Ns,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,pd(t,s),Wc(r,t,s,-1))}return yL(),r=sP(Error(Ae(421))),bA(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Pue.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Jo=tf(s.nextSibling),ta=e,gr=!0,Tc=null,t!==null&&(Ua[Ba++]=Yu,Ua[Ba++]=Qu,Ua[Ba++]=kg,Yu=t.id,Qu=t.overflow,kg=e),e=dL(e,r.children),e.flags|=4096,e)}function q6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sk(t.return,e,n)}function iP(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Fq(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xi(t,e,r.children,n),r=br.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&q6(t,n,e);else if(t.tag===19)q6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(or(br,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Qx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),iP(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}iP(e,!0,n,null,i);break;case"together":iP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function OS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gd(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=of(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=of(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bue(t,e,n){switch(e.tag){case 3:Uq(e),Ew();break;case 5:hq(e);break;case 1:Co(e.type)&&Hx(e);break;case 4:rL(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;or(Vx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(or(br,br.current&1),e.flags|=128,null):n&e.child.childLanes?Bq(t,e,n):(or(br,br.current&1),t=gd(t,e,n),t!==null?t.sibling:null);or(br,br.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Fq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),or(br,br.current),r)break;return null;case 22:case 23:return e.lanes=0,Lq(t,e,n)}return gd(t,e,n)}var jq,kk,Wq,zq;jq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kk=function(){};Wq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Rp(zl.current);var i=null;switch(n){case"input":s=tk(t,s),r=tk(t,r),i=[];break;case"select":s=Ar({},s,{value:void 0}),r=Ar({},r,{value:void 0}),i=[];break;case"textarea":s=sk(t,s),r=sk(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wx)}ok(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ZE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ZE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&cr("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};zq=function(t,e,n,r){n!==r&&(e.flags|=4)};function iv(t,e){if(!gr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function si(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vue(t,e,n){var r=e.pendingProps;switch(QM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(e),null;case 1:return Co(e.type)&&zx(),si(e),null;case 3:return r=e.stateNode,_w(),ur(Eo),ur(gi),iL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yA(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tc!==null&&(jk(Tc),Tc=null))),kk(t,e),si(e),null;case 5:sL(e);var s=Rp(uC.current);if(n=e.type,t!==null&&e.stateNode!=null)Wq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return si(e),null}if(t=Rp(zl.current),yA(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Dl]=e,r[cC]=i,t=(e.mode&1)!==0,n){case"dialog":cr("cancel",r),cr("close",r);break;case"iframe":case"object":case"embed":cr("load",r);break;case"video":case"audio":for(s=0;s<$v.length;s++)cr($v[s],r);break;case"source":cr("error",r);break;case"img":case"image":case"link":cr("error",r),cr("load",r);break;case"details":cr("toggle",r);break;case"input":t6(r,i),cr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},cr("invalid",r);break;case"textarea":r6(r,i),cr("invalid",r)}ok(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&mA(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&mA(r.textContent,a,t),s=["children",""+a]):ZE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&cr("scroll",r)}switch(n){case"input":cA(r),n6(r,i,!0);break;case"textarea":cA(r),s6(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wx)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yG(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Dl]=e,t[cC]=r,jq(t,e,!1,!1),e.stateNode=t;e:{switch(o=ak(n,r),n){case"dialog":cr("cancel",t),cr("close",t),s=r;break;case"iframe":case"object":case"embed":cr("load",t),s=r;break;case"video":case"audio":for(s=0;s<$v.length;s++)cr($v[s],t);s=r;break;case"source":cr("error",t),s=r;break;case"img":case"image":case"link":cr("error",t),cr("load",t),s=r;break;case"details":cr("toggle",t),s=r;break;case"input":t6(t,r),s=tk(t,r),cr("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ar({},r,{value:void 0}),cr("invalid",t);break;case"textarea":r6(t,r),s=sk(t,r),cr("invalid",t);break;default:s=r}ok(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?vG(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&wG(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&XE(t,c):typeof c=="number"&&XE(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ZE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&cr("scroll",t):c!=null&&MM(t,i,c,o))}switch(n){case"input":cA(t),n6(t,r,!1);break;case"textarea":cA(t),s6(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cf(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Jy(t,!!r.multiple,i,!1):r.defaultValue!=null&&Jy(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return si(e),null;case 6:if(t&&e.stateNode!=null)zq(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=Rp(uC.current),Rp(zl.current),yA(e)){if(r=e.stateNode,n=e.memoizedProps,r[Dl]=e,(i=r.nodeValue!==n)&&(t=ta,t!==null))switch(t.tag){case 3:mA(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mA(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Dl]=e,e.stateNode=r}return si(e),null;case 13:if(ur(br),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gr&&Jo!==null&&e.mode&1&&!(e.flags&128))aq(),Ew(),e.flags|=98560,i=!1;else if(i=yA(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ae(317));i[Dl]=e}else Ew(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;si(e),i=!1}else Tc!==null&&(jk(Tc),Tc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||br.current&1?is===0&&(is=3):yL())),e.updateQueue!==null&&(e.flags|=4),si(e),null);case 4:return _w(),kk(t,e),t===null&&oC(e.stateNode.containerInfo),si(e),null;case 10:return eL(e.type._context),si(e),null;case 17:return Co(e.type)&&zx(),si(e),null;case 19:if(ur(br),i=e.memoizedState,i===null)return si(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)iv(i,!1);else{if(is!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Qx(t),o!==null){for(e.flags|=128,iv(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return or(br,br.current&1|2),e.child}t=t.sibling}i.tail!==null&&Br()>Sw&&(e.flags|=128,r=!0,iv(i,!1),e.lanes=4194304)}else{if(!r)if(t=Qx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),iv(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!gr)return si(e),null}else 2*Br()-i.renderingStartTime>Sw&&n!==1073741824&&(e.flags|=128,r=!0,iv(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Br(),e.sibling=null,n=br.current,or(br,r?n&1|2:n&1),e):(si(e),null);case 22:case 23:return mL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qo&1073741824&&(si(e),e.subtreeFlags&6&&(e.flags|=8192)):si(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function Eue(t,e){switch(QM(e),e.tag){case 1:return Co(e.type)&&zx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _w(),ur(Eo),ur(gi),iL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sL(e),null;case 13:if(ur(br),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));Ew()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ur(br),null;case 4:return _w(),null;case 10:return eL(e.type._context),null;case 22:case 23:return mL(),null;case 24:return null;default:return null}}var vA=!1,fi=!1,Cue=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Ly(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rr(t,e,r)}else n.current=null}function Dk(t,e,n){try{n()}catch(r){Rr(t,e,r)}}var V6=!1;function _ue(t,e){if(yk=Bx,t=KG(),KM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wk={focusedElem:t,selectionRange:n},Bx=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:wc(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(A){Rr(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return p=V6,V6=!1,p}function yE(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dk(e,n,i)}s=s.next}while(s!==r)}}function LN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hq(t){var e=t.alternate;e!==null&&(t.alternate=null,Hq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dl],delete e[cC],delete e[Ek],delete e[iue],delete e[oue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gq(t){return t.tag===5||t.tag===3||t.tag===4}function K6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wx));else if(r!==4&&(t=t.child,t!==null))for(Lk(t,e,n),t=t.sibling;t!==null;)Lk(t,e,n),t=t.sibling}function $k(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($k(t,e,n),t=t.sibling;t!==null;)$k(t,e,n),t=t.sibling}var Bs=null,Nc=!1;function Rd(t,e,n){for(n=n.child;n!==null;)qq(t,e,n),n=n.sibling}function qq(t,e,n){if(Wl&&typeof Wl.onCommitFiberUnmount=="function")try{Wl.onCommitFiberUnmount(NN,n)}catch{}switch(n.tag){case 5:fi||Ly(n,e);case 6:var r=Bs,s=Nc;Bs=null,Rd(t,e,n),Bs=r,Nc=s,Bs!==null&&(Nc?(t=Bs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bs.removeChild(n.stateNode));break;case 18:Bs!==null&&(Nc?(t=Bs,n=n.stateNode,t.nodeType===8?ZR(t.parentNode,n):t.nodeType===1&&ZR(t,n),rC(t)):ZR(Bs,n.stateNode));break;case 4:r=Bs,s=Nc,Bs=n.stateNode.containerInfo,Nc=!0,Rd(t,e,n),Bs=r,Nc=s;break;case 0:case 11:case 14:case 15:if(!fi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dk(n,e,o),s=s.next}while(s!==r)}Rd(t,e,n);break;case 1:if(!fi&&(Ly(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Rr(n,e,a)}Rd(t,e,n);break;case 21:Rd(t,e,n);break;case 22:n.mode&1?(fi=(r=fi)||n.memoizedState!==null,Rd(t,e,n),fi=r):Rd(t,e,n);break;default:Rd(t,e,n)}}function Y6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Cue),e.forEach(function(r){var s=Oue.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bs=a.stateNode,Nc=!1;break e;case 3:Bs=a.stateNode.containerInfo,Nc=!0;break e;case 4:Bs=a.stateNode.containerInfo,Nc=!0;break e}a=a.return}if(Bs===null)throw Error(Ae(160));qq(i,o,s),Bs=null,Nc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Rr(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vq(e,t),e=e.sibling}function Vq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cc(e,t),nl(t),r&4){try{yE(3,t,t.return),LN(3,t)}catch(g){Rr(t,t.return,g)}try{yE(5,t,t.return)}catch(g){Rr(t,t.return,g)}}break;case 1:cc(e,t),nl(t),r&512&&n!==null&&Ly(n,n.return);break;case 5:if(cc(e,t),nl(t),r&512&&n!==null&&Ly(n,n.return),t.flags&32){var s=t.stateNode;try{XE(s,"")}catch(g){Rr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gG(s,i),ak(a,o);var l=ak(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?vG(s,d):u==="dangerouslySetInnerHTML"?wG(s,d):u==="children"?XE(s,d):MM(s,u,d,l)}switch(a){case"input":nk(s,i);break;case"textarea":mG(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Jy(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Jy(s,!!i.multiple,i.defaultValue,!0):Jy(s,!!i.multiple,i.multiple?[]:"",!1))}s[cC]=i}catch(g){Rr(t,t.return,g)}}break;case 6:if(cc(e,t),nl(t),r&4){if(t.stateNode===null)throw Error(Ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Rr(t,t.return,g)}}break;case 3:if(cc(e,t),nl(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rC(e.containerInfo)}catch(g){Rr(t,t.return,g)}break;case 4:cc(e,t),nl(t);break;case 13:cc(e,t),nl(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pL=Br())),r&4&&Y6(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(fi=(l=fi)||u,cc(e,t),fi=l):cc(e,t),nl(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(d=Ke=u;Ke!==null;){switch(h=Ke,f=h.child,h.tag){case 0:case 11:case 14:case 15:yE(4,h,h.return);break;case 1:Ly(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Rr(r,n,g)}}break;case 5:Ly(h,h.return);break;case 22:if(h.memoizedState!==null){J6(d);continue}}f!==null?(f.return=h,Ke=f):J6(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=bG("display",o))}catch(g){Rr(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Rr(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:cc(e,t),nl(t),r&4&&Y6(t);break;case 21:break;default:cc(e,t),nl(t)}}function nl(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Gq(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(XE(s,""),r.flags&=-33);var i=K6(t);$k(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=K6(t);Lk(t,a,o);break;default:throw Error(Ae(161))}}catch(c){Rr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Aue(t,e,n){Ke=t,Kq(t)}function Kq(t,e,n){for(var r=(t.mode&1)!==0;Ke!==null;){var s=Ke,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||vA;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||fi;a=vA;var l=fi;if(vA=o,(fi=c)&&!l)for(Ke=s;Ke!==null;)o=Ke,c=o.child,o.tag===22&&o.memoizedState!==null?Z6(s):c!==null?(c.return=o,Ke=c):Z6(s);for(;i!==null;)Ke=i,Kq(i),i=i.sibling;Ke=s,vA=a,fi=l}Q6(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ke=i):Q6(t)}}function Q6(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fi||LN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fi)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:wc(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&D6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}D6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&rC(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}fi||e.flags&512&&Mk(e)}catch(h){Rr(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function J6(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function Z6(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{LN(4,e)}catch(c){Rr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Rr(e,s,c)}}var i=e.return;try{Mk(e)}catch(c){Rr(e,i,c)}break;case 5:var o=e.return;try{Mk(e)}catch(c){Rr(e,o,c)}}}catch(c){Rr(e,e.return,c)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var Sue=Math.ceil,Xx=_d.ReactCurrentDispatcher,hL=_d.ReactCurrentOwner,Ha=_d.ReactCurrentBatchConfig,dn=0,Ns=null,Kr=null,Gs=0,qo=0,$y=$f(0),is=0,pC=null,Mg=0,$N=0,fL=0,wE=null,go=null,pL=0,Sw=1/0,Su=null,eI=!1,Uk=null,rf=null,EA=!1,Fh=null,tI=0,bE=0,Bk=null,kS=-1,DS=0;function Ui(){return dn&6?Br():kS!==-1?kS:kS=Br()}function sf(t){return t.mode&1?dn&2&&Gs!==0?Gs&-Gs:cue.transition!==null?(DS===0&&(DS=OG()),DS):(t=On,t!==0||(t=window.event,t=t===void 0?16:BG(t.type)),t):1}function Wc(t,e,n,r){if(50<bE)throw bE=0,Bk=null,Error(Ae(185));Z_(t,n,r),(!(dn&2)||t!==Ns)&&(t===Ns&&(!(dn&2)&&($N|=n),is===4&&ah(t,Gs)),_o(t,r),n===1&&dn===0&&!(e.mode&1)&&(Sw=Br()+500,kN&&Uf()))}function _o(t,e){var n=t.callbackNode;cle(t,e);var r=Ux(t,t===Ns?Gs:0);if(r===0)n!==null&&a6(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&a6(n),e===1)t.tag===0?aue(X6.bind(null,t)):sq(X6.bind(null,t)),rue(function(){!(dn&6)&&Uf()}),n=null;else{switch(kG(r)){case 1:n=FM;break;case 4:n=RG;break;case 16:n=$x;break;case 536870912:n=PG;break;default:n=$x}n=nV(n,Yq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yq(t,e){if(kS=-1,DS=0,dn&6)throw Error(Ae(327));var n=t.callbackNode;if(n0()&&t.callbackNode!==n)return null;var r=Ux(t,t===Ns?Gs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=nI(t,r);else{e=r;var s=dn;dn|=2;var i=Jq();(Ns!==t||Gs!==e)&&(Su=null,Sw=Br()+500,wg(t,e));do try{Nue();break}catch(a){Qq(t,a)}while(!0);XM(),Xx.current=i,dn=s,Kr!==null?e=0:(Ns=null,Gs=0,e=is)}if(e!==0){if(e===2&&(s=hk(t),s!==0&&(r=s,e=Fk(t,s))),e===1)throw n=pC,wg(t,0),ah(t,r),_o(t,Br()),n;if(e===6)ah(t,r);else{if(s=t.current.alternate,!(r&30)&&!xue(s)&&(e=nI(t,r),e===2&&(i=hk(t),i!==0&&(r=i,e=Fk(t,i))),e===1))throw n=pC,wg(t,0),ah(t,r),_o(t,Br()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:up(t,go,Su);break;case 3:if(ah(t,r),(r&130023424)===r&&(e=pL+500-Br(),10<e)){if(Ux(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ui(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=vk(up.bind(null,t,go,Su),e);break}up(t,go,Su);break;case 4:if(ah(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-jc(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Br()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sue(r/1960))-r,10<r){t.timeoutHandle=vk(up.bind(null,t,go,Su),r);break}up(t,go,Su);break;case 5:up(t,go,Su);break;default:throw Error(Ae(329))}}}return _o(t,Br()),t.callbackNode===n?Yq.bind(null,t):null}function Fk(t,e){var n=wE;return t.current.memoizedState.isDehydrated&&(wg(t,e).flags|=256),t=nI(t,e),t!==2&&(e=go,go=n,e!==null&&jk(e)),t}function jk(t){go===null?go=t:go.push.apply(go,t)}function xue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ah(t,e){for(e&=~fL,e&=~$N,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jc(e),r=1<<n;t[n]=-1,e&=~r}}function X6(t){if(dn&6)throw Error(Ae(327));n0();var e=Ux(t,0);if(!(e&1))return _o(t,Br()),null;var n=nI(t,e);if(t.tag!==0&&n===2){var r=hk(t);r!==0&&(e=r,n=Fk(t,r))}if(n===1)throw n=pC,wg(t,0),ah(t,e),_o(t,Br()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,up(t,go,Su),_o(t,Br()),null}function gL(t,e){var n=dn;dn|=1;try{return t(e)}finally{dn=n,dn===0&&(Sw=Br()+500,kN&&Uf())}}function Lg(t){Fh!==null&&Fh.tag===0&&!(dn&6)&&n0();var e=dn;dn|=1;var n=Ha.transition,r=On;try{if(Ha.transition=null,On=1,t)return t()}finally{On=r,Ha.transition=n,dn=e,!(dn&6)&&Uf()}}function mL(){qo=$y.current,ur($y)}function wg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nue(n)),Kr!==null)for(n=Kr.return;n!==null;){var r=n;switch(QM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zx();break;case 3:_w(),ur(Eo),ur(gi),iL();break;case 5:sL(r);break;case 4:_w();break;case 13:ur(br);break;case 19:ur(br);break;case 10:eL(r.type._context);break;case 22:case 23:mL()}n=n.return}if(Ns=t,Kr=t=of(t.current,null),Gs=qo=e,is=0,pC=null,fL=$N=Mg=0,go=wE=null,Tp!==null){for(e=0;e<Tp.length;e++)if(n=Tp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Tp=null}return t}function Qq(t,e){do{var n=Kr;try{if(XM(),RS.current=Zx,Jx){for(var r=_r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jx=!1}if(Dg=0,vs=es=_r=null,mE=!1,dC=0,hL.current=null,n===null||n.return===null){is=1,pC=e,Kr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Gs,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=F6(o);if(f!==null){f.flags&=-257,j6(f,o,a,i,e),f.mode&1&&B6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){B6(i,l,e),yL();break e}c=Error(Ae(426))}}else if(gr&&a.mode&1){var w=F6(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),j6(w,o,a,i,e),JM(Aw(c,a));break e}}i=c=Aw(c,a),is!==4&&(is=2),wE===null?wE=[i]:wE.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=kq(i,c,e);k6(i,y);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(rf===null||!rf.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=Dq(i,a,e);k6(i,A);break e}}i=i.return}while(i!==null)}Xq(n)}catch(_){e=_,Kr===n&&n!==null&&(Kr=n=n.return);continue}break}while(!0)}function Jq(){var t=Xx.current;return Xx.current=Zx,t===null?Zx:t}function yL(){(is===0||is===3||is===2)&&(is=4),Ns===null||!(Mg&268435455)&&!($N&268435455)||ah(Ns,Gs)}function nI(t,e){var n=dn;dn|=2;var r=Jq();(Ns!==t||Gs!==e)&&(Su=null,wg(t,e));do try{Iue();break}catch(s){Qq(t,s)}while(!0);if(XM(),dn=n,Xx.current=r,Kr!==null)throw Error(Ae(261));return Ns=null,Gs=0,is}function Iue(){for(;Kr!==null;)Zq(Kr)}function Nue(){for(;Kr!==null&&!Xce();)Zq(Kr)}function Zq(t){var e=tV(t.alternate,t,qo);t.memoizedProps=t.pendingProps,e===null?Xq(t):Kr=e,hL.current=null}function Xq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Eue(n,e),n!==null){n.flags&=32767,Kr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{is=6,Kr=null;return}}else if(n=vue(n,e,qo),n!==null){Kr=n;return}if(e=e.sibling,e!==null){Kr=e;return}Kr=e=t}while(e!==null);is===0&&(is=5)}function up(t,e,n){var r=On,s=Ha.transition;try{Ha.transition=null,On=1,Tue(t,e,n,r)}finally{Ha.transition=s,On=r}return null}function Tue(t,e,n,r){do n0();while(Fh!==null);if(dn&6)throw Error(Ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(lle(t,i),t===Ns&&(Kr=Ns=null,Gs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||EA||(EA=!0,nV($x,function(){return n0(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ha.transition,Ha.transition=null;var o=On;On=1;var a=dn;dn|=4,hL.current=null,_ue(t,n),Vq(n,t),Yle(wk),Bx=!!yk,wk=yk=null,t.current=n,Aue(n),ele(),dn=a,On=o,Ha.transition=i}else t.current=n;if(EA&&(EA=!1,Fh=t,tI=s),i=t.pendingLanes,i===0&&(rf=null),rle(n.stateNode),_o(t,Br()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(eI)throw eI=!1,t=Uk,Uk=null,t;return tI&1&&t.tag!==0&&n0(),i=t.pendingLanes,i&1?t===Bk?bE++:(bE=0,Bk=t):bE=0,Uf(),null}function n0(){if(Fh!==null){var t=kG(tI),e=Ha.transition,n=On;try{if(Ha.transition=null,On=16>t?16:t,Fh===null)var r=!1;else{if(t=Fh,Fh=null,tI=0,dn&6)throw Error(Ae(331));var s=dn;for(dn|=4,Ke=t.current;Ke!==null;){var i=Ke,o=i.child;if(Ke.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ke=l;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:yE(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;var h=u.sibling,f=u.return;if(Hq(u),u===l){Ke=null;break}if(h!==null){h.return=f,Ke=h;break}Ke=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ke=o;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:yE(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ke=y;break e}Ke=i.return}}var b=t.current;for(Ke=b;Ke!==null;){o=Ke;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ke=v;else e:for(o=b;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:LN(9,a)}}catch(_){Rr(a,a.return,_)}if(a===o){Ke=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ke=A;break e}Ke=a.return}}if(dn=s,Uf(),Wl&&typeof Wl.onPostCommitFiberRoot=="function")try{Wl.onPostCommitFiberRoot(NN,t)}catch{}r=!0}return r}finally{On=n,Ha.transition=e}}return!1}function e8(t,e,n){e=Aw(n,e),e=kq(t,e,1),t=nf(t,e,1),e=Ui(),t!==null&&(Z_(t,1,e),_o(t,e))}function Rr(t,e,n){if(t.tag===3)e8(t,t,n);else for(;e!==null;){if(e.tag===3){e8(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rf===null||!rf.has(r))){t=Aw(n,t),t=Dq(e,t,1),e=nf(e,t,1),t=Ui(),e!==null&&(Z_(e,1,t),_o(e,t));break}}e=e.return}}function Rue(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ui(),t.pingedLanes|=t.suspendedLanes&n,Ns===t&&(Gs&n)===n&&(is===4||is===3&&(Gs&130023424)===Gs&&500>Br()-pL?wg(t,0):fL|=n),_o(t,e)}function eV(t,e){e===0&&(t.mode&1?(e=dA,dA<<=1,!(dA&130023424)&&(dA=4194304)):e=1);var n=Ui();t=pd(t,e),t!==null&&(Z_(t,e,n),_o(t,n))}function Pue(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eV(t,n)}function Oue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),eV(t,n)}var tV;tV=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Eo.current)bo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bo=!1,bue(t,e,n);bo=!!(t.flags&131072)}else bo=!1,gr&&e.flags&1048576&&iq(e,qx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;OS(t,e),t=e.pendingProps;var s=vw(e,gi.current);t0(e,n),s=aL(null,e,r,t,s,n);var i=cL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Co(r)?(i=!0,Hx(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nL(e),s.updater=MN,e.stateNode=s,s._reactInternals=e,Ik(e,r,t,n),e=Rk(null,e,r,!0,i,n)):(e.tag=0,gr&&i&&YM(e),xi(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(OS(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Due(r),t=wc(r,t),s){case 0:e=Tk(null,e,r,t,n);break e;case 1:e=H6(null,e,r,t,n);break e;case 11:e=W6(null,e,r,t,n);break e;case 14:e=z6(null,e,r,wc(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wc(r,s),Tk(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wc(r,s),H6(t,e,r,s,n);case 3:e:{if(Uq(e),t===null)throw Error(Ae(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dq(t,e),Yx(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Aw(Error(Ae(423)),e),e=G6(t,e,r,n,s);break e}else if(r!==s){s=Aw(Error(Ae(424)),e),e=G6(t,e,r,n,s);break e}else for(Jo=tf(e.stateNode.containerInfo.firstChild),ta=e,gr=!0,Tc=null,n=lq(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ew(),r===s){e=gd(t,e,n);break e}xi(t,e,r,n)}e=e.child}return e;case 5:return hq(e),t===null&&Ak(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,bk(r,s)?o=null:i!==null&&bk(r,i)&&(e.flags|=32),$q(t,e),xi(t,e,o,n),e.child;case 6:return t===null&&Ak(e),null;case 13:return Bq(t,e,n);case 4:return rL(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Cw(e,null,r,n):xi(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wc(r,s),W6(t,e,r,s,n);case 7:return xi(t,e,e.pendingProps,n),e.child;case 8:return xi(t,e,e.pendingProps.children,n),e.child;case 12:return xi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,or(Vx,r._currentValue),r._currentValue=o,i!==null)if(Gc(i.value,o)){if(i.children===s.children&&!Eo.current){e=gd(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=td(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Sk(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Sk(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xi(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,t0(e,n),s=qa(s),r=r(s),e.flags|=1,xi(t,e,r,n),e.child;case 14:return r=e.type,s=wc(r,e.pendingProps),s=wc(r.type,s),z6(t,e,r,s,n);case 15:return Mq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wc(r,s),OS(t,e),e.tag=1,Co(r)?(t=!0,Hx(e)):t=!1,t0(e,n),Oq(e,r,s),Ik(e,r,s,n),Rk(null,e,r,!0,t,n);case 19:return Fq(t,e,n);case 22:return Lq(t,e,n)}throw Error(Ae(156,e.tag))};function nV(t,e){return TG(t,e)}function kue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ja(t,e,n,r){return new kue(t,e,n,r)}function wL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Due(t){if(typeof t=="function")return wL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$M)return 11;if(t===UM)return 14}return 2}function of(t,e){var n=t.alternate;return n===null?(n=ja(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function MS(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Iy:return bg(n.children,s,i,e);case LM:o=8,s|=8;break;case J2:return t=ja(12,n,e,s|2),t.elementType=J2,t.lanes=i,t;case Z2:return t=ja(13,n,e,s),t.elementType=Z2,t.lanes=i,t;case X2:return t=ja(19,n,e,s),t.elementType=X2,t.lanes=i,t;case hG:return UN(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uG:o=10;break e;case dG:o=9;break e;case $M:o=11;break e;case UM:o=14;break e;case eh:o=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=ja(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function bg(t,e,n,r){return t=ja(7,t,r,e),t.lanes=n,t}function UN(t,e,n,r){return t=ja(22,t,r,e),t.elementType=hG,t.lanes=n,t.stateNode={isHidden:!1},t}function oP(t,e,n){return t=ja(6,t,null,e),t.lanes=n,t}function aP(t,e,n){return e=ja(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mue(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jR(0),this.expirationTimes=jR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jR(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bL(t,e,n,r,s,i,o,a,c){return t=new Mue(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ja(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nL(i),t}function Lue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xy,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rV(t){if(!t)return _f;t=t._reactInternals;e:{if(fm(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Co(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(Co(n))return rq(t,n,e)}return e}function sV(t,e,n,r,s,i,o,a,c){return t=bL(n,r,!0,t,s,i,o,a,c),t.context=rV(null),n=t.current,r=Ui(),s=sf(n),i=td(r,s),i.callback=e??null,nf(n,i,s),t.current.lanes=s,Z_(t,s,r),_o(t,r),t}function BN(t,e,n,r){var s=e.current,i=Ui(),o=sf(s);return n=rV(n),e.context===null?e.context=n:e.pendingContext=n,e=td(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nf(s,e,o),t!==null&&(Wc(t,s,o,i),TS(t,s,o)),o}function rI(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function t8(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vL(t,e){t8(t,e),(t=t.alternate)&&t8(t,e)}function $ue(){return null}var iV=typeof reportError=="function"?reportError:function(t){console.error(t)};function EL(t){this._internalRoot=t}FN.prototype.render=EL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));BN(t,e,null,null)};FN.prototype.unmount=EL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lg(function(){BN(null,t,null,null)}),e[fd]=null}};function FN(t){this._internalRoot=t}FN.prototype.unstable_scheduleHydration=function(t){if(t){var e=LG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<oh.length&&e!==0&&e<oh[n].priority;n++);oh.splice(n,0,t),n===0&&UG(t)}};function CL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function n8(){}function Uue(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=rI(o);i.call(l)}}var o=sV(e,r,t,0,null,!1,!1,"",n8);return t._reactRootContainer=o,t[fd]=o.current,oC(t.nodeType===8?t.parentNode:t),Lg(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=rI(c);a.call(l)}}var c=bL(t,0,!1,null,null,!1,!1,"",n8);return t._reactRootContainer=c,t[fd]=c.current,oC(t.nodeType===8?t.parentNode:t),Lg(function(){BN(e,c,n,r)}),c}function WN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=rI(o);a.call(c)}}BN(e,o,t,s)}else o=Uue(n,e,t,s,r);return rI(o)}DG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lv(e.pendingLanes);n!==0&&(jM(e,n|1),_o(e,Br()),!(dn&6)&&(Sw=Br()+500,Uf()))}break;case 13:Lg(function(){var r=pd(t,1);if(r!==null){var s=Ui();Wc(r,t,1,s)}}),vL(t,1)}};WM=function(t){if(t.tag===13){var e=pd(t,134217728);if(e!==null){var n=Ui();Wc(e,t,134217728,n)}vL(t,134217728)}};MG=function(t){if(t.tag===13){var e=sf(t),n=pd(t,e);if(n!==null){var r=Ui();Wc(n,t,e,r)}vL(t,e)}};LG=function(){return On};$G=function(t,e){var n=On;try{return On=t,e()}finally{On=n}};lk=function(t,e,n){switch(e){case"input":if(nk(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ON(r);if(!s)throw Error(Ae(90));pG(r),nk(r,s)}}}break;case"textarea":mG(t,n);break;case"select":e=n.value,e!=null&&Jy(t,!!n.multiple,e,!1)}};_G=gL;AG=Lg;var Bue={usingClientEntryPoint:!1,Events:[e1,Py,ON,EG,CG,gL]},ov={findFiberByHostInstance:Np,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fue={bundleType:ov.bundleType,version:ov.version,rendererPackageName:ov.rendererPackageName,rendererConfig:ov.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_d.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IG(t),t===null?null:t.stateNode},findFiberByHostInstance:ov.findFiberByHostInstance||$ue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CA.isDisabled&&CA.supportsFiber)try{NN=CA.inject(Fue),Wl=CA}catch{}}aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bue;aa.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CL(e))throw Error(Ae(200));return Lue(t,e,null,n)};aa.createRoot=function(t,e){if(!CL(t))throw Error(Ae(299));var n=!1,r="",s=iV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bL(t,1,!1,null,null,n,!1,r,s),t[fd]=e.current,oC(t.nodeType===8?t.parentNode:t),new EL(e)};aa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=IG(e),t=t===null?null:t.stateNode,t};aa.flushSync=function(t){return Lg(t)};aa.hydrate=function(t,e,n){if(!jN(e))throw Error(Ae(200));return WN(null,t,e,!0,n)};aa.hydrateRoot=function(t,e,n){if(!CL(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=iV;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sV(e,null,t,1,n??null,s,!1,i,o),t[fd]=e.current,oC(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new FN(e)};aa.render=function(t,e,n){if(!jN(e))throw Error(Ae(200));return WN(null,t,e,!1,n)};aa.unmountComponentAtNode=function(t){if(!jN(t))throw Error(Ae(40));return t._reactRootContainer?(Lg(function(){WN(null,null,t,!1,function(){t._reactRootContainer=null,t[fd]=null})}),!0):!1};aa.unstable_batchedUpdates=gL;aa.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jN(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return WN(t,e,n,!1,r)};aa.version="18.3.1-next-f1338f8080-20240426";function oV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oV)}catch(t){console.error(t)}}oV(),oG.exports=aa;var _L=oG.exports,r8=_L;Y2.createRoot=r8.createRoot,Y2.hydrateRoot=r8.hydrateRoot;const jue="_verified_lvyh0_1",AL={verified:jue},Wue=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:AL.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),zue=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:AL.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Hue=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:AL.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function aV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=aV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function af(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=aV(t))&&(r&&(r+=" "),r+=e);return r}const Gue="_root_98iqw_1",que="_article_98iqw_21",s8={root:Gue,article:que},SL=({className:t,children:e})=>m.jsx("div",{className:af("react-tweet-theme",s8.root,t),children:m.jsx("article",{className:s8.article,children:e})}),cV=t=>m.jsx("img",{...t}),Vue="_header_nqq4j_1",Kue="_avatar_nqq4j_11",Yue="_avatarOverflow_nqq4j_16",Que="_avatarSquare_nqq4j_23",Jue="_avatarShadow_nqq4j_26",Zue="_author_nqq4j_37",Xue="_authorLink_nqq4j_44",ede="_authorVerified_nqq4j_53",tde="_authorLinkText_nqq4j_56",nde="_authorMeta_nqq4j_63",rde="_authorFollow_nqq4j_66",sde="_username_nqq4j_69",ide="_follow_nqq4j_74",ode="_separator_nqq4j_82",ade="_brand_nqq4j_86",cde="_twitterIcon_nqq4j_90",Rs={header:Vue,avatar:Kue,avatarOverflow:Yue,avatarSquare:Que,avatarShadow:Jue,author:Zue,authorLink:Xue,authorVerified:ede,authorLinkText:tde,authorMeta:nde,authorFollow:rde,username:sde,follow:ide,separator:ode,brand:ade,twitterIcon:cde},lde="_verifiedOld_lcna5_1",ude="_verifiedBlue_lcna5_4",dde="_verifiedGovernment_lcna5_7",cP={verifiedOld:lde,verifiedBlue:ude,verifiedGovernment:dde},lV=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(Wue,{}),s=cP.verifiedBlue;if(n)switch(t.is_blue_verified||(s=cP.verifiedOld),t.verified_type){case"Government":r=m.jsx(Hue,{}),s=cP.verifiedGovernment;break;case"Business":r=m.jsx(zue,{}),s=null;break}return n?m.jsx("div",{className:af(e,s),children:r}):null},hde=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:cV,{user:s}=t;return m.jsxs("div",{className:Rs.header,children:[m.jsxs("a",{href:t.url,className:Rs.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:af(Rs.avatarOverflow,s.profile_image_shape==="Square"&&Rs.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Rs.avatarOverflow,children:m.jsx("div",{className:Rs.avatarShadow})})]}),m.jsxs("div",{className:Rs.author,children:[m.jsxs("a",{href:t.url,className:Rs.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Rs.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(lV,{user:s,className:Rs.authorVerified})]}),m.jsxs("div",{className:Rs.authorMeta,children:[m.jsx("a",{href:t.url,className:Rs.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Rs.authorFollow,children:[m.jsx("span",{className:Rs.separator,children:""}),m.jsx("a",{href:s.follow_url,className:Rs.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Rs.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Rs.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},fde="_root_1ec15_1",pde={root:fde},gde=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:pde.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),mde="_root_eihfa_1",yde={root:mde},wde=({href:t,children:e})=>m.jsx("a",{href:t,className:yde.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),bde="_root_1xq52_1",vde={root:bde},Ede=({tweet:t})=>m.jsx("p",{className:vde.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(wde,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),i8=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,uV=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,Cde=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,_de=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,Ade=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,Sde=t=>`https://x.com/hashtag/${t.text}`,xde=t=>`https://x.com/search?q=%24${t.text}`,Ide=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,dV=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},Nde=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},Tde=t=>{const e=Nde(t);return e.length>1?e[1]:e[0]},Wk=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function o8(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return av(n,"hashtag",t.entities.hashtags),av(n,"mention",t.entities.user_mentions),av(n,"url",t.entities.urls),av(n,"symbol",t.entities.symbols),t.entities.media&&av(n,"media",t.entities.media),Rde(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:Sde(r),text:s});case"mention":return Object.assign(r,{href:uV(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:xde(r),text:s});default:return Object.assign(r,{text:s})}})}function av(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function Rde(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const Pde=t=>({...t,url:i8(t),user:{...t.user,url:uV(t),follow_url:Ade(t)},like_url:Cde(t),reply_url:_de(t),in_reply_to_url:t.in_reply_to_screen_name?Ide(t):void 0,entities:o8(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:i8(t.quoted_tweet),entities:o8(t.quoted_tweet)}:void 0}),Ode="_root_g9tkv_1",kde="_rounded_g9tkv_6",Dde="_mediaWrapper_g9tkv_10",Mde="_grid2Columns_g9tkv_17",Lde="_grid3_g9tkv_20",$de="_grid2x2_g9tkv_23",Ude="_mediaContainer_g9tkv_26",Bde="_mediaLink_g9tkv_34",Fde="_skeleton_g9tkv_38",jde="_image_g9tkv_43",Lo={root:Ode,rounded:kde,mediaWrapper:Dde,grid2Columns:Mde,grid3:Lde,grid2x2:$de,mediaContainer:Ude,mediaLink:Bde,skeleton:Fde,image:jde},Wde="_anchor_fp31d_1",zde="_videoButton_fp31d_17",Hde="_videoButtonIcon_fp31d_35",Gde="_watchOnTwitter_fp31d_44",qde="_viewReplies_fp31d_60",Fm={anchor:Wde,videoButton:zde,videoButtonIcon:Hde,watchOnTwitter:Gde,viewReplies:qde},Vde=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=Tde(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:Lo.image,poster:dV(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Fm.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Fm.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Fm.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Fm.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:af(Fm.anchor,Fm.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Kde=t=>m.jsx("img",{...t}),a8=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},hV=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Kde;return m.jsx("div",{className:af(Lo.root,!n&&Lo.rounded),children:m.jsx("div",{className:af(Lo.mediaWrapper,o>1&&Lo.grid2Columns,o===3&&Lo.grid3,o>4&&Lo.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:af(Lo.mediaContainer,Lo.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Lo.skeleton,style:a8(l,o)}),m.jsx(c,{src:dV(l,"small"),alt:l.ext_alt_text||"Image",className:Lo.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:Lo.mediaContainer,children:[m.jsx("div",{className:Lo.skeleton,style:a8(l,o)}),m.jsx(Vde,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Yde={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},Qde=new Intl.DateTimeFormat("en-US",Yde),Jde=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Zde=t=>{const e=Jde(Qde.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},Xde="_root_i24yn_1",ehe={root:Xde},the=({tweet:t})=>{const e=new Date(t.created_at),n=Zde(e);return m.jsx("a",{className:ehe.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},nhe="_info_19qcj_1",rhe="_infoLink_19qcj_10",she="_infoIcon_19qcj_30",lP={info:nhe,infoLink:rhe,infoIcon:she},ihe=({tweet:t})=>m.jsxs("div",{className:lP.info,children:[m.jsx(the,{tweet:t}),m.jsx("a",{className:lP.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:lP.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),ohe="_actions_n2anf_1",ahe="_like_n2anf_13",che="_reply_n2anf_14",lhe="_copy_n2anf_15",uhe="_likeIconWrapper_n2anf_27",dhe="_likeCount_n2anf_30",hhe="_replyIconWrapper_n2anf_35",fhe="_copyIconWrapper_n2anf_36",phe="_likeIcon_n2anf_27",ghe="_replyIcon_n2anf_35",mhe="_copyIcon_n2anf_36",yhe="_replyText_n2anf_56",whe="_copyText_n2anf_57",lo={actions:ohe,like:ahe,reply:che,copy:lhe,likeIconWrapper:uhe,likeCount:dhe,replyIconWrapper:hhe,copyIconWrapper:fhe,likeIcon:phe,replyIcon:ghe,copyIcon:mhe,replyText:yhe,copyText:whe},bhe=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:lo.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:lo.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:lo.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:lo.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:lo.copyText,children:e?"Copied!":"Copy link"})]})},vhe=({tweet:t})=>{const e=Wk(t.favorite_count);return m.jsxs("div",{className:lo.actions,children:[m.jsxs("a",{className:lo.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:lo.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:lo.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:lo.likeCount,children:e})]}),m.jsxs("a",{className:lo.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:lo.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:lo.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:lo.replyText,children:"Reply"})]}),m.jsx(bhe,{tweet:t})]})},Ehe="_replies_1cutb_1",Che="_link_1cutb_4",_he="_text_1cutb_23",uP={replies:Ehe,link:Che,text:_he},Ahe=({tweet:t})=>m.jsx("div",{className:uP.replies,children:m.jsx("a",{className:uP.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:uP.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Wk(t.conversation_count)} reply`:`Read ${Wk(t.conversation_count)} replies`})})}),She="_root_q5799_1",xhe="_article_q5799_16",c8={root:She,article:xhe},Ihe=({tweet:t,children:e})=>m.jsx("div",{className:c8.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:c8.article,children:e})}),Nhe="_header_r31i5_1",The="_avatar_r31i5_11",Rhe="_avatarSquare_r31i5_17",Phe="_author_r31i5_21",Ohe="_authorText_r31i5_26",khe="_username_r31i5_33",Jf={header:Nhe,avatar:The,avatarSquare:Rhe,author:Phe,authorText:Ohe,username:khe},Dhe=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Jf.header,children:[m.jsx("a",{href:t.url,className:Jf.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:af(Jf.avatarOverflow,e.profile_image_shape==="Square"&&Jf.avatarSquare),children:m.jsx(cV,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Jf.author,children:[m.jsx("div",{className:Jf.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(lV,{user:e}),m.jsx("div",{className:Jf.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Mhe="_root_175ot_1",Lhe={root:Mhe},$he=({tweet:t})=>m.jsx("p",{className:Lhe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Uhe=({tweet:t})=>{var e;return m.jsxs(Ihe,{tweet:t,children:[m.jsx(Dhe,{tweet:t}),m.jsx($he,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(hV,{quoted:!0,tweet:t}):null]})},Bhe=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>Pde(t),[t]);return m.jsxs(SL,{children:[m.jsx(hde,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(gde,{tweet:r}),m.jsx(Ede,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(hV,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(Uhe,{tweet:r.quoted_tweet}),m.jsx(ihe,{tweet:r}),m.jsx(vhe,{tweet:r}),m.jsx(Ahe,{tweet:r})]})},Fhe="_root_16yxa_1",jhe={root:Fhe},Whe=t=>m.jsx(SL,{children:m.jsxs("div",{className:jhe.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found"})]})}),zhe="_skeleton_oi7hr_1",Hhe={skeleton:zhe},_A=({style:t})=>m.jsx("span",{className:Hhe.skeleton,style:t}),Ghe="_root_17qqv_1",qhe={root:Ghe},Vhe=()=>m.jsxs(SL,{className:qhe.root,children:[m.jsx(_A,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(_A,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(_A,{style:{height:"2rem"}}),m.jsx(_A,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var fV={exports:{}},pV={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw=D;function Khe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yhe=typeof Object.is=="function"?Object.is:Khe,Qhe=xw.useState,Jhe=xw.useEffect,Zhe=xw.useLayoutEffect,Xhe=xw.useDebugValue;function efe(t,e){var n=e(),r=Qhe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Zhe(function(){s.value=n,s.getSnapshot=e,dP(s)&&i({inst:s})},[t,n,e]),Jhe(function(){return dP(s)&&i({inst:s}),t(function(){dP(s)&&i({inst:s})})},[t]),Xhe(n),n}function dP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yhe(t,n)}catch{return!0}}function tfe(t,e){return e()}var nfe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tfe:efe;pV.useSyncExternalStore=xw.useSyncExternalStore!==void 0?xw.useSyncExternalStore:nfe;fV.exports=pV;var gV=fV.exports;const mV=0,yV=1,wV=2,l8=3;var u8=Object.prototype.hasOwnProperty;function zk(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&zk(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(u8.call(t,n)&&++r&&!u8.call(e,n)||!(n in e)||!zk(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Gu=new WeakMap,jh=()=>{},Ti=jh(),Hk=Object,un=t=>t===Ti,Ml=t=>typeof t=="function",Af=(t,e)=>({...t,...e}),bV=t=>Ml(t.then),hP={},AA={},xL="undefined",n1=typeof window!=xL,Gk=typeof document!=xL,rfe=n1&&"Deno"in window,sfe=()=>n1&&typeof window.requestAnimationFrame!=xL,vV=(t,e)=>{const n=Gu.get(t);return[()=>!un(e)&&t.get(e)||hP,r=>{if(!un(e)){const s=t.get(e);e in AA||(AA[e]=s),n[5](e,Af(s,r),s||hP)}},n[6],()=>!un(e)&&e in AA?AA[e]:!un(e)&&t.get(e)||hP]};let qk=!0;const ife=()=>qk,[Vk,Kk]=n1&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[jh,jh],ofe=()=>{const t=Gk&&document.visibilityState;return un(t)||t!=="hidden"},afe=t=>(Gk&&document.addEventListener("visibilitychange",t),Vk("focus",t),()=>{Gk&&document.removeEventListener("visibilitychange",t),Kk("focus",t)}),cfe=t=>{const e=()=>{qk=!0,t()},n=()=>{qk=!1};return Vk("online",e),Vk("offline",n),()=>{Kk("online",e),Kk("offline",n)}},lfe={isOnline:ife,isVisible:ofe},ufe={initFocus:afe,initReconnect:cfe},d8=!ea.useId,gC=!n1||rfe,dfe=t=>sfe()?window.requestAnimationFrame(t):setTimeout(t,1),fP=gC?D.useEffect:D.useLayoutEffect,pP=typeof navigator<"u"&&navigator.connection,h8=!gC&&pP&&(["slow-2g","2g"].includes(pP.effectiveType)||pP.saveData),SA=new WeakMap,hfe=t=>Hk.prototype.toString.call(t),gP=(t,e)=>t===`[object ${e}]`;let ffe=0;const Yk=t=>{const e=typeof t,n=hfe(t),r=gP(n,"Date"),s=gP(n,"RegExp"),i=gP(n,"Object");let o,a;if(Hk(t)===t&&!r&&!s){if(o=SA.get(t),o)return o;if(o=++ffe+"~",SA.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Yk(t[a])+",";SA.set(t,o)}if(i){o="#";const c=Hk.keys(t).sort();for(;!un(a=c.pop());)un(t[a])||(o+=a+":"+Yk(t[a])+",");SA.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},IL=t=>{if(Ml(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Yk(t):"",[t,e]};let pfe=0;const Qk=()=>++pfe;async function EV(...t){const[e,n,r,s]=t,i=Af({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Ml(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=IL(h);if(!f)return;const[p,g]=vV(e,f),[w,y,b,v]=Gu.get(e),A=()=>{const z=w[f];return(Ml(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],z&&z[0])?z[0](wV).then(()=>p().data):p().data};if(t.length<3)return A();let _=r,I,x=!1;const N=Qk();y[f]=[N,0];const S=!un(c),O=p(),P=O.data,F=O._c,q=un(F)?P:F;if(S&&(c=Ml(c)?c(q,P):c,g({data:c,_c:q})),Ml(_))try{_=_(q)}catch(z){I=z,x=!0}if(_&&bV(_))if(_=await _.catch(z=>{I=z,x=!0}),N!==y[f][0]){if(x)throw I;return _}else x&&S&&l(I)&&(o=!0,g({data:q,_c:Ti}));if(o&&!x)if(Ml(o)){const z=o(_,q);g({data:z,error:Ti,_c:Ti})}else g({data:_,error:Ti,_c:Ti});if(y[f][1]=Qk(),Promise.resolve(A()).then(()=>{g({_c:Ti})}),x){if(u)throw I;return}return _}}const f8=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},gfe=(t,e)=>{if(!Gu.has(t)){const n=Af(ufe,e),r=Object.create(null),s=EV.bind(Ti,t);let i=jh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Gu.has(t)&&(Gu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!gC)){const u=n.initFocus(setTimeout.bind(Ti,f8.bind(Ti,r,mV))),d=n.initReconnect(setTimeout.bind(Ti,f8.bind(Ti,r,yV)));i=()=>{u&&u(),d&&d(),Gu.delete(t)}}};return l(),[t,s,l,i]}return[t,Gu.get(t)[4]]},mfe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!un(i)&&o>i||setTimeout(r,a,s)},yfe=zk,[CV,wfe]=gfe(new Map),bfe=Af({onLoadingSlow:jh,onSuccess:jh,onError:jh,onErrorRetry:mfe,onDiscarded:jh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:h8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:h8?5e3:3e3,compare:yfe,isPaused:()=>!1,cache:CV,mutate:wfe,fallback:{}},lfe),vfe=(t,e)=>{const n=Af(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Af(s,o))}return n},Efe=D.createContext({}),Cfe="$inf$",_V=n1&&window.__SWR_DEVTOOLS_USE__,_fe=_V?window.__SWR_DEVTOOLS_USE__:[],Afe=()=>{_V&&(window.__SWR_DEVTOOLS_REACT__=ea)},Sfe=t=>Ml(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],xfe=()=>Af(bfe,D.useContext(Efe)),Ife=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=IL(e),[,,,a]=Gu.get(CV);if(o.startsWith(Cfe))return n(...i);const c=a[o];return un(c)?n(...i):(delete a[o],c)}),r),Nfe=_fe.concat(Ife),Tfe=t=>function(...n){const r=xfe(),[s,i,o]=Sfe(n),a=vfe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(Nfe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},Rfe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};Afe();const mP=ea.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),yP={dedupe:!0},Pfe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=Gu.get(r),[y,b]=IL(t),v=D.useRef(!1),A=D.useRef(!1),_=D.useRef(y),I=D.useRef(e),x=D.useRef(n),N=()=>x.current,S=()=>N().isVisible()&&N().isOnline(),[O,P,F,q]=vV(r,y),z=D.useRef({}).current,T=un(o)?un(n.fallback)?Ti:n.fallback[y]:o,R=(X,ce)=>{for(const Ce in z){const me=Ce;if(me==="data"){if(!s(X[me],ce[me])&&(!un(X[me])||!s(ae,ce[me])))return!1}else if(ce[me]!==X[me])return!1}return!0},U=D.useMemo(()=>{const X=!y||!e?!1:un(a)?N().isPaused()||i?!1:c!==!1:a,ce=It=>{const St=Af(It);return delete St._k,X?{isValidating:!0,isLoading:!0,...St}:St},Ce=O(),me=q(),Ee=ce(Ce),Xe=Ce===me?Ee:ce(me);let it=Ee;return[()=>{const It=ce(O());return R(It,it)?(it.data=It.data,it.isLoading=It.isLoading,it.isValidating=It.isValidating,it.error=It.error,it):(it=It,It)},()=>Xe]},[r,y]),k=gV.useSyncExternalStore(D.useCallback(X=>F(y,(ce,Ce)=>{R(Ce,ce)||X()}),[r,y]),U[0],U[1]),M=!v.current,j=f[y]&&f[y].length>0,Y=k.data,ne=un(Y)?T&&bV(T)?mP(T):T:Y,le=k.error,oe=D.useRef(ne),ae=h?un(Y)?un(oe.current)?ne:oe.current:Y:ne,ue=j&&!un(le)?!1:M&&!un(a)?a:N().isPaused()?!1:i?un(ne)?!1:c:un(ne)||c,tt=!!(y&&e&&M&&ue),Ne=un(k.isValidating)?tt:k.isValidating,$e=un(k.isLoading)?tt:k.isLoading,st=D.useCallback(async X=>{const ce=I.current;if(!y||!ce||A.current||N().isPaused())return!1;let Ce,me,Ee=!0;const Xe=X||{},it=!g[y]||!Xe.dedupe,It=()=>d8?!A.current&&y===_.current&&v.current:y===_.current,St={isValidating:!1,isLoading:!1},Kn=()=>{P(St)},Tt=()=>{const jt=g[y];jt&&jt[1]===me&&delete g[y]},Hr={isValidating:!0};un(O().data)&&(Hr.isLoading=!0);try{if(it&&(P(Hr),n.loadingTimeout&&un(O().data)&&setTimeout(()=>{Ee&&It()&&N().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[ce(b),Qk()]),[Ce,me]=g[y],Ce=await Ce,it&&setTimeout(Tt,n.dedupingInterval),!g[y]||g[y][1]!==me)return it&&It()&&N().onDiscarded(y),!1;St.error=Ti;const jt=p[y];if(!un(jt)&&(me<=jt[0]||me<=jt[1]||jt[1]===0))return Kn(),it&&It()&&N().onDiscarded(y),!1;const zn=O().data;St.data=s(zn,Ce)?zn:Ce,it&&It()&&N().onSuccess(Ce,y,n)}catch(jt){Tt();const zn=N(),{shouldRetryOnError:Sr}=zn;zn.isPaused()||(St.error=jt,it&&It()&&(zn.onError(jt,y,zn),(Sr===!0||Ml(Sr)&&Sr(jt))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||S())&&zn.onErrorRetry(jt,y,zn,qi=>{const el=f[y];el&&el[0]&&el[0](l8,qi)},{retryCount:(Xe.retryCount||0)+1,dedupe:!0})))}return Ee=!1,Kn(),!0},[y,r]),Ot=D.useCallback((...X)=>EV(r,_.current,...X),[]);if(fP(()=>{I.current=e,x.current=n,un(Y)||(oe.current=Y)}),fP(()=>{if(!y)return;const X=st.bind(Ti,yP);let ce=0;N().revalidateOnFocus&&(ce=Date.now()+N().focusThrottleInterval);const me=Rfe(y,f,(Ee,Xe={})=>{if(Ee==mV){const it=Date.now();N().revalidateOnFocus&&it>ce&&S()&&(ce=it+N().focusThrottleInterval,X())}else if(Ee==yV)N().revalidateOnReconnect&&S()&&X();else{if(Ee==wV)return st();if(Ee==l8)return st(Xe)}});return A.current=!1,_.current=y,v.current=!0,P({_k:b}),ue&&(g[y]||(un(ne)||gC?X():dfe(X))),()=>{A.current=!0,me()}},[y]),fP(()=>{let X;function ce(){const me=Ml(l)?l(O().data):l;me&&X!==-1&&(X=setTimeout(Ce,me))}function Ce(){!O().error&&(u||N().isVisible())&&(d||N().isOnline())?st(yP).then(ce):ce()}return ce(),()=>{X&&(clearTimeout(X),X=-1)}},[l,u,d,y]),D.useDebugValue(ae),i&&un(ne)&&y){if(!d8&&gC)throw new Error("Fallback data is required when using Suspense in SSR.");I.current=e,x.current=n,A.current=!1;const X=w[y];if(!un(X)){const ce=Ot(X);mP(ce)}if(un(le)){const ce=st(yP);un(ae)||(ce.status="fulfilled",ce.value=!0),mP(ce)}else throw le}return{mutate:Ot,get data(){return z.data=!0,ae},get error(){return z.error=!0,le},get isValidating(){return z.isValidating=!0,Ne},get isLoading(){return z.isLoading=!0,$e}}},p8=Tfe(Pfe);class Ofe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const kfe=p8.default||p8,Dfe="https://react-tweet.vercel.app";async function Mfe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Ofe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const Lfe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=kfe(()=>e||t?[e||t&&`${Dfe}/api/tweet/${t}`,n]:null,Mfe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},$fe=({id:t,apiUrl:e,fallback:n=m.jsx(Vhe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=Lfe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Whe;return m.jsx(l,{error:i?i(a):a})}return m.jsx(Bhe,{tweet:o,components:r})};var zN={exports:{}},AV={},SV={exports:{}},Ufe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Bfe=Ufe,Ffe=Bfe;function xV(){}function IV(){}IV.resetWarningCache=xV;var jfe=function(){function t(r,s,i,o,a,c){if(c!==Ffe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:IV,resetWarningCache:xV};return n.PropTypes=n,n};SV.exports=jfe();var NV=SV.exports,Jk={exports:{}};function TV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=TV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function g8(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=TV(t))&&(r&&(r+=" "),r+=e);return r}Jk.exports=g8,Jk.exports.clsx=g8;var Wfe=Jk.exports,Lr={},iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.dontSetMe=Vfe;iu.findInArray=zfe;iu.int=qfe;iu.isFunction=Hfe;iu.isNum=Gfe;function zfe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Hfe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Gfe(t){return typeof t=="number"&&!isNaN(t)}function qfe(t){return parseInt(t,10)}function Vfe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var pm={};Object.defineProperty(pm,"__esModule",{value:!0});pm.browserPrefixToKey=PV;pm.browserPrefixToStyle=Kfe;pm.default=void 0;pm.getPrefix=RV;const wP=["Moz","Webkit","O","ms"];function RV(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<wP.length;s++)if(PV(t,wP[s])in e)return wP[s];return""}function PV(t,e){return e?`${e}${Yfe(t)}`:t}function Kfe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Yfe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}pm.default=RV();Object.defineProperty(Lr,"__esModule",{value:!0});Lr.addClassName=DV;Lr.addEvent=Jfe;Lr.addUserSelectStyles=cpe;Lr.createCSSTransform=spe;Lr.createSVGTransform=ipe;Lr.getTouch=ope;Lr.getTouchIdentifier=ape;Lr.getTranslation=NL;Lr.innerHeight=tpe;Lr.innerWidth=npe;Lr.matchesSelector=kV;Lr.matchesSelectorAndParentsTo=Qfe;Lr.offsetXYFromParent=rpe;Lr.outerHeight=Xfe;Lr.outerWidth=epe;Lr.removeClassName=MV;Lr.removeEvent=Zfe;Lr.scheduleRemoveUserSelectStyles=lpe;var na=iu,m8=OV(pm);function OV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(OV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let xA="";function kV(t,e){return xA||(xA=(0,na.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,na.isFunction)(t[n])})),(0,na.isFunction)(t[xA])?t[xA](e):!1}function Qfe(t,e,n){let r=t;do{if(kV(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Jfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Zfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Xfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,na.int)(n.borderTopWidth),e+=(0,na.int)(n.borderBottomWidth),e}function epe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,na.int)(n.borderLeftWidth),e+=(0,na.int)(n.borderRightWidth),e}function tpe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,na.int)(n.paddingTop),e-=(0,na.int)(n.paddingBottom),e}function npe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,na.int)(n.paddingLeft),e-=(0,na.int)(n.paddingRight),e}function rpe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function spe(t,e){const n=NL(t,e,"px");return{[(0,m8.browserPrefixToKey)("transform",m8.default)]:n}}function ipe(t,e){return NL(t,e,"")}function NL(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function ope(t,e){return t.targetTouches&&(0,na.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,na.findInArray)(t.changedTouches,n=>e===n.identifier)}function ape(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function cpe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&DV(t.body,"react-draggable-transparent-selection")}function lpe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{y8(t)}):y8(t)}function y8(t){if(t)try{if(t.body&&MV(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function DV(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function MV(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.canDragX=hpe;ou.canDragY=fpe;ou.createCoreData=gpe;ou.createDraggableData=mpe;ou.getBoundPosition=upe;ou.getControlPosition=ppe;ou.snapToGrid=dpe;var $o=iu,Uy=Lr;function upe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:ype(r);const s=TL(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,$o.int)(u.paddingLeft)+(0,$o.int)(l.marginLeft),top:-s.offsetTop+(0,$o.int)(u.paddingTop)+(0,$o.int)(l.marginTop),right:(0,Uy.innerWidth)(c)-(0,Uy.outerWidth)(s)-s.offsetLeft+(0,$o.int)(u.paddingRight)-(0,$o.int)(l.marginRight),bottom:(0,Uy.innerHeight)(c)-(0,Uy.outerHeight)(s)-s.offsetTop+(0,$o.int)(u.paddingBottom)-(0,$o.int)(l.marginBottom)}}return(0,$o.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,$o.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,$o.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,$o.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function dpe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function hpe(t){return t.props.axis==="both"||t.props.axis==="x"}function fpe(t){return t.props.axis==="both"||t.props.axis==="y"}function ppe(t,e,n){const r=typeof e=="number"?(0,Uy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=TL(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Uy.offsetXYFromParent)(r||t,i,n.props.scale)}function gpe(t,e,n){const r=!(0,$o.isNum)(t.lastX),s=TL(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function mpe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function ype(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function TL(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var HN={},GN={};Object.defineProperty(GN,"__esModule",{value:!0});GN.default=wpe;function wpe(){}Object.defineProperty(HN,"__esModule",{value:!0});HN.default=void 0;var bP=LV(D),vi=RL(NV),bpe=RL(_L),ii=Lr,Pd=ou,vP=iu,cv=RL(GN);function RL(t){return t&&t.__esModule?t:{default:t}}function LV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(LV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function Ci(t,e,n){return(e=vpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vpe(t){var e=Epe(t,"string");return typeof e=="symbol"?e:e+""}function Epe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const pc={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Od=pc.mouse,qN=class extends bP.Component{constructor(){super(...arguments),Ci(this,"dragging",!1),Ci(this,"lastX",NaN),Ci(this,"lastY",NaN),Ci(this,"touchIdentifier",null),Ci(this,"mounted",!1),Ci(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,ii.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,ii.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,ii.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Pd.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Pd.createCoreData)(this,o,a);(0,cv.default)("DraggableCore: handleDragStart: %j",c),(0,cv.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ii.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,ii.addEvent)(r,Od.move,this.handleDrag),(0,ii.addEvent)(r,Od.stop,this.handleDragStop))}),Ci(this,"handleDrag",e=>{const n=(0,Pd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Pd.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Pd.createCoreData)(this,r,s);if((0,cv.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),Ci(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Pd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Pd.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Pd.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,ii.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,cv.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,cv.default)("DraggableCore: Removing handlers"),(0,ii.removeEvent)(a.ownerDocument,Od.move,this.handleDrag),(0,ii.removeEvent)(a.ownerDocument,Od.stop,this.handleDragStop))}),Ci(this,"onMouseDown",e=>(Od=pc.mouse,this.handleDragStart(e))),Ci(this,"onMouseUp",e=>(Od=pc.mouse,this.handleDragStop(e))),Ci(this,"onTouchStart",e=>(Od=pc.touch,this.handleDragStart(e))),Ci(this,"onTouchEnd",e=>(Od=pc.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ii.addEvent)(e,pc.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,ii.removeEvent)(n,pc.mouse.move,this.handleDrag),(0,ii.removeEvent)(n,pc.touch.move,this.handleDrag),(0,ii.removeEvent)(n,pc.mouse.stop,this.handleDragStop),(0,ii.removeEvent)(n,pc.touch.stop,this.handleDragStop),(0,ii.removeEvent)(e,pc.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ii.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:bpe.default.findDOMNode(this)}render(){return bP.cloneElement(bP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};HN.default=qN;Ci(qN,"displayName","DraggableCore");Ci(qN,"propTypes",{allowAnyClick:vi.default.bool,allowMobileScroll:vi.default.bool,children:vi.default.node.isRequired,disabled:vi.default.bool,enableUserSelectHack:vi.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:vi.default.arrayOf(vi.default.number),handle:vi.default.string,cancel:vi.default.string,nodeRef:vi.default.object,onStart:vi.default.func,onDrag:vi.default.func,onStop:vi.default.func,onMouseDown:vi.default.func,scale:vi.default.number,className:vP.dontSetMe,style:vP.dontSetMe,transform:vP.dontSetMe});Ci(qN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(D),n=u(NV),r=u(_L),s=Wfe,i=Lr,o=ou,a=iu,c=u(HN),l=u(GN);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(_,I){if(!I&&_&&_.__esModule)return _;var x,N,S={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return S;if(x=I?A:v){if(x.has(_))return x.get(_);x.set(_,S)}for(const O in _)O!=="default"&&{}.hasOwnProperty.call(_,O)&&((N=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,O))&&(N.get||N.set)?x(S,O,N):S[O]=_[O]);return S})(y,b)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var A in v)({}).hasOwnProperty.call(v,A)&&(y[A]=v[A])}return y},h.apply(null,arguments)}function f(y,b,v){return(b=p(b))in y?Object.defineProperty(y,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[b]=v,y}function p(y){var b=g(y,"string");return typeof b=="symbol"?b:b+""}function g(y,b){if(typeof y!="object"||!y)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var A=v.call(y,b);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(b,v){let{position:A}=b,{prevPropsPosition:_}=v;return A&&(!_||A.x!==_.x||A.y!==_.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:_}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(b){super(b),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const _=(0,o.createDraggableData)(this,A),I={x:_.x,y:_.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:S}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[O,P]=(0,o.getBoundPosition)(this,I.x,I.y);I.x=O,I.y=P,I.slackX=this.state.slackX+(N-I.x),I.slackY=this.state.slackY+(S-I.y),_.x=I.x,_.y=I.y,_.deltaX=I.x-this.state.x,_.deltaY=I.y-this.state.y}if(this.props.onDrag(v,_)===!1)return!1;this.setState(I)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:S}=this.props.position;I.x=N,I.y=S}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:A,defaultPosition:_,defaultClassName:I,defaultClassNameDragging:x,defaultClassNameDragged:N,position:S,positionOffset:O,scale:P,...F}=this.props;let q={},z=null;const R=!!!S||this.state.dragging,U=S||_,k={x:(0,o.canDragX)(this)&&R?this.state.x:U.x,y:(0,o.canDragY)(this)&&R?this.state.y:U.y};this.state.isElementSVG?z=(0,i.createSVGTransform)(k,O):q=(0,i.createCSSTransform)(k,O);const M=(0,s.clsx)(A.props.className||"",I,{[x]:this.state.dragging,[N]:this.state.dragged});return e.createElement(c.default,h({},F,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:M,style:{...A.props.style,...q},transform:z}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(AV);const{default:$V,DraggableCore:Cpe}=AV;zN.exports=$V;zN.exports.default=$V;zN.exports.DraggableCore=Cpe;var _pe=zN.exports;const r1=lm(_pe);function Cr(){return Cr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cr.apply(null,arguments)}function UV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var BV={exports:{}},Dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ts=typeof Symbol=="function"&&Symbol.for,PL=Ts?Symbol.for("react.element"):60103,OL=Ts?Symbol.for("react.portal"):60106,VN=Ts?Symbol.for("react.fragment"):60107,KN=Ts?Symbol.for("react.strict_mode"):60108,YN=Ts?Symbol.for("react.profiler"):60114,QN=Ts?Symbol.for("react.provider"):60109,JN=Ts?Symbol.for("react.context"):60110,kL=Ts?Symbol.for("react.async_mode"):60111,ZN=Ts?Symbol.for("react.concurrent_mode"):60111,XN=Ts?Symbol.for("react.forward_ref"):60112,eT=Ts?Symbol.for("react.suspense"):60113,Ape=Ts?Symbol.for("react.suspense_list"):60120,tT=Ts?Symbol.for("react.memo"):60115,nT=Ts?Symbol.for("react.lazy"):60116,Spe=Ts?Symbol.for("react.block"):60121,xpe=Ts?Symbol.for("react.fundamental"):60117,Ipe=Ts?Symbol.for("react.responder"):60118,Npe=Ts?Symbol.for("react.scope"):60119;function la(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case PL:switch(t=t.type,t){case kL:case ZN:case VN:case YN:case KN:case eT:return t;default:switch(t=t&&t.$$typeof,t){case JN:case XN:case nT:case tT:case QN:return t;default:return e}}case OL:return e}}}function FV(t){return la(t)===ZN}Dn.AsyncMode=kL;Dn.ConcurrentMode=ZN;Dn.ContextConsumer=JN;Dn.ContextProvider=QN;Dn.Element=PL;Dn.ForwardRef=XN;Dn.Fragment=VN;Dn.Lazy=nT;Dn.Memo=tT;Dn.Portal=OL;Dn.Profiler=YN;Dn.StrictMode=KN;Dn.Suspense=eT;Dn.isAsyncMode=function(t){return FV(t)||la(t)===kL};Dn.isConcurrentMode=FV;Dn.isContextConsumer=function(t){return la(t)===JN};Dn.isContextProvider=function(t){return la(t)===QN};Dn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===PL};Dn.isForwardRef=function(t){return la(t)===XN};Dn.isFragment=function(t){return la(t)===VN};Dn.isLazy=function(t){return la(t)===nT};Dn.isMemo=function(t){return la(t)===tT};Dn.isPortal=function(t){return la(t)===OL};Dn.isProfiler=function(t){return la(t)===YN};Dn.isStrictMode=function(t){return la(t)===KN};Dn.isSuspense=function(t){return la(t)===eT};Dn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===VN||t===ZN||t===YN||t===KN||t===eT||t===Ape||typeof t=="object"&&t!==null&&(t.$$typeof===nT||t.$$typeof===tT||t.$$typeof===QN||t.$$typeof===JN||t.$$typeof===XN||t.$$typeof===xpe||t.$$typeof===Ipe||t.$$typeof===Npe||t.$$typeof===Spe)};Dn.typeOf=la;BV.exports=Dn;var Tpe=BV.exports,DL=Tpe,Rpe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ppe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ope={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},jV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ML={};ML[DL.ForwardRef]=Ope;ML[DL.Memo]=jV;function w8(t){return DL.isMemo(t)?jV:ML[t.$$typeof]||Rpe}var kpe=Object.defineProperty,Dpe=Object.getOwnPropertyNames,b8=Object.getOwnPropertySymbols,Mpe=Object.getOwnPropertyDescriptor,Lpe=Object.getPrototypeOf,v8=Object.prototype;function WV(t,e,n){if(typeof e!="string"){if(v8){var r=Lpe(e);r&&r!==v8&&WV(t,r,n)}var s=Dpe(e);b8&&(s=s.concat(b8(e)));for(var i=w8(t),o=w8(e),a=0;a<s.length;++a){var c=s[a];if(!Ppe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=Mpe(e,c);try{kpe(t,c,l)}catch{}}}}return t}var $pe=WV;const Upe=lm($pe);var zV={};Object.defineProperty(zV,"__esModule",{value:!0});zV.default=Bpe;function Bpe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function IA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sI(){return sI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sI.apply(this,arguments)}function Fpe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function kd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jpe(t){var e=function(n){Fpe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,IA(kd(kd(i)),"cachedTheme",void 0),IA(kd(kd(i)),"lastOuterTheme",void 0),IA(kd(kd(i)),"lastTheme",void 0),IA(kd(kd(i)),"renderProvider",function(l){var u=i.props.children;return ea.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?sI({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?ea.createElement(t.Consumer,null,this.renderProvider):null},r}(ea.Component);return e}function Wpe(t){return function(n){var r=ea.forwardRef(function(s,i){return ea.createElement(t.Consumer,null,function(o){return ea.createElement(n,sI({theme:o,ref:i},s))})});return Upe(r,n),r}}function zpe(t){var e=function(){var r=ea.useContext(t);return r};return e}function Hpe(t){return{context:t,withTheme:Wpe(t),useTheme:zpe(t),ThemeProvider:jpe(t)}}var HV=D.createContext();Hpe(HV);var E8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pb=(typeof window>"u"?"undefined":E8(window))==="object"&&(typeof document>"u"?"undefined":E8(document))==="object"&&document.nodeType===9;function mC(t){"@babel/helpers - typeof";return mC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mC(t)}function Gpe(t,e){if(mC(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function qpe(t){var e=Gpe(t,"string");return mC(e)=="symbol"?e:e+""}function Vpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qpe(r.key),r)}}function LL(t,e,n){return e&&Vpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zk(t,e){return Zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Zk(t,e)}function GV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Zk(t,e)}function C8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Kpe={}.constructor;function Xk(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Xk);if(t.constructor!==Kpe)return t;var e={};for(var n in t)e[n]=Xk(t[n]);return e}function rT(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=Xk(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var _8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},vg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=_8(e[r]," ");else n=_8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function gb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function lv(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function yC(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=gb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=lv(f+":"+u+vg(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=lv(g+":"+u+vg(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=lv(y+":"+u+vg(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),lv(""+t+u+"{"+r,o)+lv("}",o))}var Ype=/([[\].#*$><+~=|^:(),"'`\s])/g,A8=typeof CSS<"u"&&CSS.escape,$L=function(t){return A8?A8(t):t.replace(Ype,"\\$1")},qV=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),eD=function(t){GV(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(C8(C8(o)),l),o.selectorText="."+$L(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=vg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Cr({},s,{allowEmpty:!0}):s;return yC(this.selectorText,this.style,a)},LL(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(qV),Qpe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new eD(e,n,r)}},EP={indent:1,children:!0},Jpe=/@([\w-]+)/,Zpe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Jpe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new sT(Cr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=EP);var s=gb(r),i=s.linebreak;if(r.indent==null&&(r.indent=EP.indent),r.children==null&&(r.children=EP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Xpe=/@container|@media|@supports\s+/,ege={onCreateRule:function(e,n,r){return Xpe.test(e)?new Zpe(e,n,r):null}},CP={indent:1,children:!0},tge=/@keyframes\s+([\w-]+)/,tD=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(tge);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:$L(c(this,a)),this.rules=new sT(Cr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Cr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=CP);var s=gb(r),i=s.linebreak;if(r.indent==null&&(r.indent=CP.indent),r.children==null&&(r.children=CP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),nge=/@keyframes\s+/,rge=/\$([\w-]+)/g,nD=function(e,n){return typeof e=="string"?e.replace(rge,function(r,s){return s in n?n[s]:r}):e},S8=function(e,n,r){var s=e[n],i=nD(s,r);i!==s&&(e[n]=i)},sge={onCreateRule:function(e,n,r){return typeof e=="string"&&nge.test(e)?new tD(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&S8(e,"animation-name",r.keyframes),"animation"in e&&S8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return nD(e,s.keyframes);case"animation-name":return nD(e,s.keyframes);default:return e}}},ige=function(t){GV(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Cr({},s,{allowEmpty:!0}):s;return yC(this.key,this.style,a)},e}(qV),oge={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new ige(e,n,r):null}},age=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=gb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=yC(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return yC(this.at,this.style,r)},t}(),cge=/@font-face/,lge={onCreateRule:function(e,n,r){return cge.test(e)?new age(e,n,r):null}},uge=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return yC(this.key,this.style,r)},t}(),dge={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new uge(e,n,r):null}},hge=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),fge={"@charset":!0,"@import":!0,"@namespace":!0},pge={onCreateRule:function(e,n,r){return e in fge?new hge(e,n,r):null}},x8=[Qpe,ege,sge,oge,lge,dge,pge],gge={process:!0},I8={force:!0,process:!0},sT=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Cr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+$L(this.classes[p]));var g=rT(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Cr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof eD?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof tD&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof eD?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof tD&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=gge);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,I8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,I8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=gb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),VV=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Cr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new sT(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),mge=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),yge=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=UV(s,["attached"]),a=gb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},LL(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),vE=new yge,rD=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),sD="2f1acc6c3a606b082e5eef5e54414ffb";rD[sD]==null&&(rD[sD]=0);var N8=rD[sD]++,T8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+N8+a+n:c+i.key+"-"+N8+(a?"-"+a:"")+"-"+n};return r},KV=function(e){var n;return function(){return n||(n=e()),n}},wge=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},bge=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=vg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},vge=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},Ege=function(e,n){return e.selectorText=n,e.selectorText===n},YV=KV(function(){return document.querySelector("head")});function Cge(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function _ge(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Age(t){for(var e=YV(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function Sge(t){var e=vE.registry;if(e.length>0){var n=Cge(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=_ge(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=Age(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function xge(t,e){var n=e.insertionPoint,r=Sge(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}YV().appendChild(t)}var Ige=KV(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),R8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},P8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},Nge=function(){var e=document.createElement("style");return e.textContent=`
`,e},Tge=function(){function t(n){this.getPropertyValue=wge,this.setProperty=bge,this.removeProperty=vge,this.setSelector=Ege,this.hasInsertedRules=!1,this.cssRules=[],n&&vE.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||Nge(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=Ige();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){xge(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=P8(i,s);if(a=R8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=P8(i,s),d=R8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof VV&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),Rge=0,Pge=function(){function t(n){this.id=Rge++,this.version="10.10.0",this.plugins=new mge,this.options={id:{minify:!1},createGenerateId:T8,Renderer:pb?Tge:null,plugins:[]},this.generateId=T8({minify:!1});for(var r=0;r<x8.length;r++)this.plugins.use(x8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Cr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=vE.index===0?0:vE.index+1);var a=new VV(r,Cr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),vE.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Cr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=rT(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),QV=function(e){return new Pge(e)},O8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},LL(t,[{key:"size",get:function(){return this.length}}]),t}(),UL=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function JV(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=JV(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */QV();var ZV=Date.now(),_P="fnValues"+ZV,AP="fnStyle"+ ++ZV,Oge=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=rT(n,{},s);return i[AP]=r,i},onProcessStyle:function(n,r){if(_P in r||AP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[_P]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[AP];a&&(o.style=a(n)||{});var c=o[_P];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function kge(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var my;typeof self<"u"?my=self:typeof window<"u"?my=window:typeof global<"u"?my=global:typeof module<"u"?my=module:my=Function("return this")();var k8=kge(my),D8=function(e){return e&&e[k8]&&e===e[k8]()},Dge=function(e){return{onCreateRule:function(r,s,i){if(!D8(s))return null;var o=s,a=rT(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!D8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},Mge=/;\n/,Lge=function(e){for(var n={},r=e.split(Mge),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},$ge=function(e){typeof e.style=="string"&&(e.style=Lge(e.style))};function Uge(){return{onProcessRule:$ge}}var cf="@global",iD="@global ",Bge=function(){function t(n,r,s){this.type="global",this.at=cf,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new sT(Cr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),Fge=function(){function t(n,r,s){this.type="global",this.at=cf,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(iD.length);this.rule=s.jss.createRule(i,r,Cr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),jge=/\s*,\s*/g;function XV(t,e){for(var n=t.split(jge),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function Wge(t,e){var n=t.options,r=t.style,s=r?r[cf]:null;if(s){for(var i in s)e.addRule(i,s[i],Cr({},n,{selector:XV(i,t.selector)}));delete r[cf]}}function zge(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,cf.length)!==cf)){var i=XV(s.substr(cf.length),t.selector);e.addRule(i,r[s],Cr({},n,{selector:i})),delete r[s]}}function Hge(){function t(n,r,s){if(!n)return null;if(n===cf)return new Bge(n,r,s);if(n[0]==="@"&&n.substr(0,iD.length)===iD)return new Fge(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(Wge(n,r),zge(n,r))}return{onCreateRule:t,onProcessRule:e}}var LS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},SP="extendCurrValue"+Date.now();function Gge(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Pp(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Cr({},t,{extend:l}):t.extend[c];Pp(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Pp(t.extend.extend,e,n,r);continue}if(LS(t.extend[d])){d in r||(r[d]={}),Pp(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function qge(t,e,n,r){for(var s in t)if(s!=="extend"){if(LS(r[s])&&LS(t[s])){Pp(t[s],e,n,r[s]);continue}if(LS(t[s])){r[s]=Pp(t[s],e,n);continue}r[s]=t[s]}}function Pp(t,e,n,r){return r===void 0&&(r={}),Gge(t,e,n,r),qge(t,e,n,r),r}function Vge(){function t(n,r,s){return"extend"in n?Pp(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[SP])s.prop(i,null);return s[SP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[SP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var M8=/\s*,\s*/g,Kge=/&/g,Yge=/\$([\w-]+)/g;function Qge(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(M8),a=s.split(M8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Kge,u):u+" "+h}return c}function n(s,i,o){if(o)return Cr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Cr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Yge,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Cr({},l,{selector:p})):c.addRule(g,s[d],Cr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function oD(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=oD(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return oD(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Jge(){function t(e,n){return"composes"in e&&(oD(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Zge=/[A-Z]/g,Xge=/^ms-/,xP={};function eme(t){return"-"+t.toLowerCase()}function eK(t){if(xP.hasOwnProperty(t))return xP[t];var e=t.replace(Zge,eme);return xP[t]=Xge.test(e)?"-"+e:e}function iI(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:eK(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(iI):e.fallbacks=iI(t.fallbacks)),e}function tme(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=iI(n[r]);return n}return iI(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=eK(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var de=UL&&CSS?CSS.px:"px",NA=UL&&CSS?CSS.ms:"ms",jm=UL&&CSS?CSS.percent:"%",nme={"animation-delay":NA,"animation-duration":NA,"background-position":de,"background-position-x":de,"background-position-y":de,"background-size":de,border:de,"border-bottom":de,"border-bottom-left-radius":de,"border-bottom-right-radius":de,"border-bottom-width":de,"border-left":de,"border-left-width":de,"border-radius":de,"border-right":de,"border-right-width":de,"border-top":de,"border-top-left-radius":de,"border-top-right-radius":de,"border-top-width":de,"border-width":de,"border-block":de,"border-block-end":de,"border-block-end-width":de,"border-block-start":de,"border-block-start-width":de,"border-block-width":de,"border-inline":de,"border-inline-end":de,"border-inline-end-width":de,"border-inline-start":de,"border-inline-start-width":de,"border-inline-width":de,"border-start-start-radius":de,"border-start-end-radius":de,"border-end-start-radius":de,"border-end-end-radius":de,margin:de,"margin-bottom":de,"margin-left":de,"margin-right":de,"margin-top":de,"margin-block":de,"margin-block-end":de,"margin-block-start":de,"margin-inline":de,"margin-inline-end":de,"margin-inline-start":de,padding:de,"padding-bottom":de,"padding-left":de,"padding-right":de,"padding-top":de,"padding-block":de,"padding-block-end":de,"padding-block-start":de,"padding-inline":de,"padding-inline-end":de,"padding-inline-start":de,"mask-position-x":de,"mask-position-y":de,"mask-size":de,height:de,width:de,"min-height":de,"max-height":de,"min-width":de,"max-width":de,bottom:de,left:de,top:de,right:de,inset:de,"inset-block":de,"inset-block-end":de,"inset-block-start":de,"inset-inline":de,"inset-inline-end":de,"inset-inline-start":de,"box-shadow":de,"text-shadow":de,"column-gap":de,"column-rule":de,"column-rule-width":de,"column-width":de,"font-size":de,"font-size-delta":de,"letter-spacing":de,"text-decoration-thickness":de,"text-indent":de,"text-stroke":de,"text-stroke-width":de,"word-spacing":de,motion:de,"motion-offset":de,outline:de,"outline-offset":de,"outline-width":de,perspective:de,"perspective-origin-x":jm,"perspective-origin-y":jm,"transform-origin":jm,"transform-origin-x":jm,"transform-origin-y":jm,"transform-origin-z":jm,"transition-delay":NA,"transition-duration":NA,"vertical-align":de,"flex-basis":de,"shape-margin":de,size:de,gap:de,grid:de,"grid-gap":de,"row-gap":de,"grid-row-gap":de,"grid-column-gap":de,"grid-template-rows":de,"grid-template-columns":de,"grid-auto-rows":de,"grid-auto-columns":de,"box-shadow-x":de,"box-shadow-y":de,"box-shadow-blur":de,"box-shadow-spread":de,"font-line-height":de,"text-shadow-x":de,"text-shadow-y":de,"text-shadow-blur":de};function tK(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var rme=tK(nme);function EE(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=EE(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=EE(s,e[s],n);else for(var i in e)e[i]=EE(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||rme[t];return o&&!(e===0&&o===de)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function sme(t){t===void 0&&(t={});var e=tK(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=EE(o,s[o],e);return s}function r(s,i){return EE(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var ime={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},ome={position:!0,size:!0},TA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},IP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function ame(t,e,n){return t.map(function(r){return rK(r,e,n,!1,!0)})}function nK(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?nK(t[0],e,n,r):typeof t[0]=="object"?ame(t,e,r):[t]}function rK(t,e,n,r,s){if(!(TA[e]||IP[e]))return[];var i=[];if(IP[e]&&(t=cme(t,n,IP[e],r)),Object.keys(t).length)for(var o in TA[e]){if(t[o]){Array.isArray(t[o])?i.push(ome[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}TA[e][o]!=null&&i.push(TA[e][o])}return!i.length||s?i:[i]}function cme(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=wC((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function wC(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=wC(t.fallbacks[i],e,!0);continue}t[r]=nK(s,r,ime,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=wC(t.fallbacks,e,!0);continue}t[r]=rK(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function lme(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=wC(e[r],n);return e}return wC(e,n)}return{onProcessStyle:t}}function aD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ume(t){if(Array.isArray(t))return aD(t)}function dme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hme(t,e){if(t){if(typeof t=="string")return aD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aD(t,e):void 0}}function fme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pme(t){return ume(t)||dme(t)||hme(t)||fme()}var Uv="",cD="",sK="",iK="",gme=pb&&"ontouchstart"in document.documentElement;if(pb){var NP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},mme=document.createElement("p"),TP=mme.style,yme="Transform";for(var RP in NP)if(RP+yme in TP){Uv=RP,cD=NP[RP];break}Uv==="Webkit"&&"msHyphens"in TP&&(Uv="ms",cD=NP.ms,iK="edge"),Uv==="Webkit"&&"-apple-trailing-word"in TP&&(sK="apple")}var Ut={js:Uv,css:cD,vendor:sK,browser:iK,isTouch:gme};function wme(t){return t[1]==="-"||Ut.js==="ms"?t:"@"+Ut.css+"keyframes"+t.substr(10)}var bme={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Ut.js==="ms"?"-webkit-"+e:Ut.css+e}},vme={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Ut.js==="Webkit"?Ut.css+"print-"+e:e}},Eme=/[-\s]+(.)?/g;function Cme(t,e){return e?e.toUpperCase():""}function BL(t){return t.replace(Eme,Cme)}function Sf(t){return BL("-"+t)}var _me={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Ut.js==="Webkit"){var r="mask-image";if(BL(r)in n)return e;if(Ut.js+Sf(r)in n)return Ut.css+e}return e}},Ame={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Ut.vendor==="apple"&&!Ut.isTouch?Ut.css+e:e}},Sme={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Ut.css+e}},xme={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Ut.css+e}},Ime={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Ut.js==="Webkit"||Ut.js==="ms"&&Ut.browser!=="edge"?Ut.css+e:e}},Nme={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Ut.js==="Moz"||Ut.js==="ms"||Ut.vendor==="apple"?Ut.css+e:e}},Tme={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Ut.js==="Webkit"){var r="WebkitColumn"+Sf(e);return r in n?Ut.css+"column-"+e:!1}if(Ut.js==="Moz"){var s="page"+Sf(e);return s in n?"page-"+e:!1}return!1}},Rme={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Ut.js==="Moz")return e;var r=e.replace("-inline","");return Ut.js+Sf(r)in n?Ut.css+r:!1}},Pme={supportedProperty:function(e,n){return BL(e)in n?e:!1}},Ome={supportedProperty:function(e,n){var r=Sf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Ut.js+r in n?Ut.css+e:Ut.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},kme={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Ut.js==="ms"?""+Ut.css+e:e}},Dme={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Ut.js==="ms"?Ut.css+"scroll-chaining":e}},Mme={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Lme={supportedProperty:function(e,n){var r=Mme[e];return r&&Ut.js+Sf(r)in n?Ut.css+r:!1}},oK={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},$me=Object.keys(oK),Ume=function(e){return Ut.css+e},Bme={supportedProperty:function(e,n,r){var s=r.multiple;if($me.indexOf(e)>-1){var i=oK[e];if(!Array.isArray(i))return Ut.js+Sf(i)in n?Ut.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Ut.js+Sf(i[0])in n))return!1;return i.map(Ume)}return!1}},aK=[bme,vme,_me,Ame,Sme,xme,Ime,Nme,Tme,Rme,Pme,Ome,kme,Dme,Lme,Bme],L8=aK.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),Fme=aK.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,pme(e.noPrefill)),t},[]),Bv,yp={};if(pb){Bv=document.createElement("p");var PP=window.getComputedStyle(document.documentElement,"");for(var OP in PP)isNaN(OP)||(yp[PP[OP]]=PP[OP]);Fme.forEach(function(t){return delete yp[t]})}function lD(t,e){if(e===void 0&&(e={}),!Bv)return t;if(yp[t]!=null)return yp[t];(t==="transition"||t==="transform")&&(e[t]=t in Bv.style);for(var n=0;n<L8.length&&(yp[t]=L8[n](t,Bv.style,e),!yp[t]);n++);try{Bv.style[t]=""}catch{return!1}return yp[t]}var Wm={},jme={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Wme=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Qd;function zme(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?lD(e):", "+lD(n);return r||e||n}pb&&(Qd=document.createElement("p"));function $8(t,e){var n=e;if(!Qd||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Wm[r]!=null)return Wm[r];try{Qd.style[t]=n}catch{return Wm[r]=!1,!1}if(jme[t])n=n.replace(Wme,zme);else if(Qd.style[t]===""&&(n=Ut.css+n,n==="-ms-flex"&&(Qd.style[t]="-ms-flexbox"),Qd.style[t]=n,Qd.style[t]===""))return Wm[r]=!1,!1;return Qd.style[t]="",Wm[r]=n,Wm[r]}function Hme(){function t(s){if(s.type==="keyframes"){var i=s;i.at=wme(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=lD(i);c&&c!==i&&(a=!0);var l=!1,u=$8(c,vg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return $8(i,vg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Gme(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var qme=function(e){return e===void 0&&(e={}),{plugins:[Oge(),Dge(e.observable),Uge(),Hge(),Vge(),Qge(),Jge(),tme(),sme(e.defaultUnit),lme(),Hme(),Gme()]}},Vme=Number.MIN_SAFE_INTEGER||-1e9,Kme=function(){return Vme++},Yme=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!pb}),U8=new Map,FL=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new O8),r[n];var s=U8.get(n);return s||(s=new O8,U8.set(n,s)),s},B8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=FL(r,s);o.manage(i),r.registry&&r.registry.add(n)}},Qme=function(e){if(e.sheet){var n=FL(e.context,e.index);n.unmanage(e.theme)}},Jme=QV(qme()),cK=new WeakMap,lK=function(e){return cK.get(e)},Zme=function(e,n){cK.set(e,n)},Xme=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function eye(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Cr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var tye=function(e){if(!e.context.disableStylesGeneration){var n=FL(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Jme,i=Xme(e),o=JV(i),a=s.createStyleSheet(i,eye(e,o!==null));return Zme(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},nye=function(e,n){for(var r in n)e.deleteRule(n[r])},rye=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},sye=function(e,n){var r=lK(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},iye=function(e,n){if(!n)return e.classes;var r=lK(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function F8(t){return t?D.useEffect:ea.useInsertionEffect||D.useLayoutEffect}var kP={},Jc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Kme():s,o=r.theming,a=r.name,c=UV(r,["index","theming","name"]),l=o&&o.context||HV,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||kP},d={};return function(f){var p=D.useRef(!0),g=D.useContext(Yme),w=u(f&&f.theme),y=D.useMemo(function(){var _=tye({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return _&&g.isSSR&&B8({index:i,context:g,sheet:_,theme:w}),[_,_?sye(_,f):null]},[g,w]),b=y[0],v=y[1];F8(g.isSSR)(function(){b&&v&&!p.current&&rye(f,b,v)},[f]),F8(g.isSSR)(function(){return b&&B8({index:i,context:g,sheet:b,theme:w}),function(){b&&(Qme({index:i,context:g,sheet:b,theme:w}),v&&nye(b,v))}},[b]);var A=D.useMemo(function(){return b&&v?iye(b,v):d},[b,v]);return D.useDebugValue(A),D.useDebugValue(w===kP?"No theme":w),D.useEffect(function(){p.current=!1}),A}};const oye=Jc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function DP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=oye(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(r1,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const aye=Jc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Aa({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=aye({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(r1,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const MP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],cye=80,lye=80,uye=10,dye=10,hye=10,fye=10,pye=({onIconClick:t})=>{const e=MP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:hye+d*(cye+uye),y:fye+u*(lye+dye)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(DP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(Aa,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:MP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(DP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(Aa,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:MP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(DP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},gye=Jc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),mye=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=gye({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function uK(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function jL(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function dK(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function WL(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function hK(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function fK(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,w,y,b,v,A,_,I,x,N,S,O,P,F,q,z,T,R,U,k,M,j,Y,ne,le,oe;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(_=u.mint)==null?void 0:_.slice(0,8)}`,image_url:((N=(x=(I=u.content)==null?void 0:I.files)==null?void 0:x[0])==null?void 0:N.uri)||((O=(S=u.content)==null?void 0:S.metadata)==null?void 0:O.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:((F=(P=u.content)==null?void 0:P.metadata)==null?void 0:F.description)||"",image:((T=(z=(q=u.content)==null?void 0:q.files)==null?void 0:z[0])==null?void 0:T.uri)||((U=(R=u.content)==null?void 0:R.metadata)==null?void 0:U.image)||"",image_url_shrunk:((j=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:j.uri)||((ne=(Y=u.content)==null?void 0:Y.metadata)==null?void 0:ne.image)||"",animation_url:((oe=(le=u.content)==null?void 0:le.metadata)==null?void 0:oe.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function yye(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,w,y,b,v,A,_,I,x,N,S,O,P,F,q,z,T,R,U,k,M,j,Y,ne,le,oe,ae,ue;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(_=u.mint)==null?void 0:_.slice(0,8)}`,image_url:((N=(x=(I=u.content)==null?void 0:I.files)==null?void 0:x[0])==null?void 0:N.uri)||((O=(S=u.content)==null?void 0:S.metadata)==null?void 0:O.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:((F=(P=u.content)==null?void 0:P.metadata)==null?void 0:F.description)||"",image:((T=(z=(q=u.content)==null?void 0:q.files)==null?void 0:z[0])==null?void 0:T.uri)||((U=(R=u.content)==null?void 0:R.metadata)==null?void 0:U.image)||"",image_url_shrunk:((j=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:j.uri)||((ne=(Y=u.content)==null?void 0:Y.metadata)==null?void 0:ne.image)||"",animation_url:((oe=(le=u.content)==null?void 0:le.metadata)==null?void 0:oe.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ue=(ae=u.grouping)==null?void 0:ae.find(tt=>tt.group_key==="collection"))==null?void 0:ue.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const pK="2.32.0";let uv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${pK}`},pe=class uD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof uD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof uD&&n.cause.docsPath||n.docsPath,i=(a=uv.getDocsUrl)==null?void 0:a.call(uv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...uv.version?[`Version: ${uv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=pK}walk(e){return gK(this,e)}};function gK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?gK(t.cause,e):e?null:t}let mK=class extends pe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class wye extends pe{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class bye extends pe{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let vye=class extends pe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},yK=class extends pe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},wK=class extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class j8 extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function mb(t,{dir:e,size:n=32}={}){return typeof t=="string"?lf(t,{dir:e,size:n}):Eye(t,{dir:e,size:n})}function lf(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new wK({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Eye(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new wK({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Ql(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function kr(t){return Ql(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Hl(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const Cye=new TextEncoder;function yb(t,e={}){return typeof t=="number"||typeof t=="bigint"?Aye(t,e):typeof t=="boolean"?_ye(t,e):Ql(t)?Ka(t,e):Eg(t,e)}function _ye(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Xa(n,{size:e.size}),mb(n,{size:e.size})):n}const lu={zero:48,nine:57,A:65,F:70,a:97,f:102};function W8(t){if(t>=lu.zero&&t<=lu.nine)return t-lu.zero;if(t>=lu.A&&t<=lu.F)return t-(lu.A-10);if(t>=lu.a&&t<=lu.f)return t-(lu.a-10)}function Ka(t,e={}){let n=t;e.size&&(Xa(n,{size:e.size}),n=mb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=W8(r.charCodeAt(a++)),l=W8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new pe(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Aye(t,e){const n=rt(t,e);return Ka(n)}function Eg(t,e={}){const n=Cye.encode(t);return typeof e.size=="number"?(Xa(n,{size:e.size}),mb(n,{dir:"right",size:e.size})):n}function Xa(t,{size:e}){if(kr(t)>e)throw new vye({givenSize:kr(t),maxSize:e})}function ia(t,e={}){const{signed:n}=e;e.size&&Xa(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Sye(t,e={}){let n=t;if(e.size&&(Xa(n,{size:e.size}),n=Hl(n)),Hl(n)==="0x00")return!1;if(Hl(n)==="0x01")return!0;throw new bye(n)}function qc(t,e={}){return Number(ia(t,e))}function bK(t,e={}){let n=Ka(t);return e.size&&(Xa(n,{size:e.size}),n=Hl(n,{dir:"right"})),new TextDecoder().decode(n)}const xye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ya(t,e={}){return typeof t=="number"||typeof t=="bigint"?rt(t,e):typeof t=="string"?Iw(t,e):typeof t=="boolean"?vK(t,e):ls(t,e)}function vK(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Xa(n,{size:e.size}),mb(n,{size:e.size})):n}function ls(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=xye[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Xa(r,{size:e.size}),mb(r,{dir:"right",size:e.size})):r}function rt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new mK({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?mb(a,{size:r}):a}const Iye=new TextEncoder;function Iw(t,e={}){const n=Iye.encode(t);return ls(n,e)}async function Nye(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:rt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Vc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new jye(t.type);return`${t.name}(${iT(t.inputs,{includeName:e})})`}function iT(t,{includeName:e=!1}={}){return t?t.map(n=>Tye(n,{includeName:e})).join(e?", ":","):""}function Tye(t,{includeName:e}){return t.type.startsWith("tuple")?`(${iT(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class Rye extends pe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class z8 extends pe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class EK extends pe{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${iT(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class s1 extends pe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Pye extends pe{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Oye extends pe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${kr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class kye extends pe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Dye extends pe{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class H8 extends pe{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class CK extends pe{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Mye extends pe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class _K extends pe{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class G8 extends pe{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Nw extends pe{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class AK extends pe{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Lye extends pe{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class $ye extends pe{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Vc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Vc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Uye=class extends pe{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class bC extends pe{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${iT(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class oT extends pe{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Vc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Bye extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Fye extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let SK=class extends pe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class jye extends pe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Qa(t){return typeof t[0]=="string"?wb(t):Wye(t)}function Wye(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function wb(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let xf=class extends pe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},aT=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const RA=BigInt(2**32-1),q8=BigInt(32);function zye(t,e=!1){return e?{h:Number(t&RA),l:Number(t>>q8&RA)}:{h:Number(t>>q8&RA)|0,l:Number(t&RA)|0}}function Hye(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=zye(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const Gye=(t,e,n)=>t<<n|e>>>32-n,qye=(t,e,n)=>e<<n|t>>>32-n,Vye=(t,e,n)=>e<<n-32|t>>>64-n,Kye=(t,e,n)=>t<<n-32|e>>>64-n,zm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function vC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Kc(t,...e){if(!zL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Yye(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");vC(t.outputLen),vC(t.blockLen)}function Tw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xK(t,e){Kc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Qye(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Rw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function LP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rl(t,e){return t<<32-e|t>>>e}const Jye=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Zye(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Xye(t){for(let e=0;e<t.length;e++)t[e]=Zye(t[e]);return t}const V8=Jye?t=>t:Xye,IK=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",e0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function EC(t){if(Kc(t),IK)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=e0e[t[n]];return e}const uu={_0:48,_9:57,A:65,F:70,a:97,f:102};function K8(t){if(t>=uu._0&&t<=uu._9)return t-uu._0;if(t>=uu.A&&t<=uu.F)return t-(uu.A-10);if(t>=uu.a&&t<=uu.f)return t-(uu.a-10)}function HL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(IK)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=K8(t.charCodeAt(i)),a=K8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function t0e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function i1(t){return typeof t=="string"&&(t=t0e(t)),Kc(t),t}function Op(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Kc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let GL=class{};function NK(t){const e=r=>t().update(i1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function n0e(t){const e=(r,s)=>t(s).update(i1(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function r0e(t=32){if(zm&&typeof zm.getRandomValues=="function")return zm.getRandomValues(new Uint8Array(t));if(zm&&typeof zm.randomBytes=="function")return Uint8Array.from(zm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const s0e=BigInt(0),dv=BigInt(1),i0e=BigInt(2),o0e=BigInt(7),a0e=BigInt(256),c0e=BigInt(113),TK=[],RK=[],PK=[];for(let t=0,e=dv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],TK.push(2*(5*r+n)),RK.push((t+1)*(t+2)/2%64);let s=s0e;for(let i=0;i<7;i++)e=(e<<dv^(e>>o0e)*c0e)%a0e,e&i0e&&(s^=dv<<(dv<<BigInt(i))-dv);PK.push(s)}const OK=Hye(PK,!0),l0e=OK[0],u0e=OK[1],Y8=(t,e,n)=>n>32?Vye(t,e,n):Gye(t,e,n),Q8=(t,e,n)=>n>32?Kye(t,e,n):qye(t,e,n);function kK(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Y8(l,u,1)^n[a],h=Q8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=RK[o],c=Y8(s,i,a),l=Q8(s,i,a),u=TK[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=l0e[r],t[1]^=u0e[r]}Rw(n)}let qL=class DK extends GL{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,vC(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Qye(this.state)}clone(){return this._cloneInto()}keccak(){V8(this.state32),kK(this.state32,this.rounds),V8(this.state32),this.posOut=0,this.pos=0}update(e){Tw(this),e=i1(e),Kc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Tw(this,!1),Kc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return vC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(xK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Rw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new DK(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Bf=(t,e,n)=>NK(()=>new qL(e,t,n)),d0e=Bf(6,144,224/8),h0e=Bf(6,136,256/8),f0e=Bf(6,104,384/8),p0e=Bf(6,72,512/8),g0e=Bf(1,144,224/8),VL=Bf(1,136,256/8),m0e=Bf(1,104,384/8),y0e=Bf(1,72,512/8),MK=(t,e,n)=>n0e((r={})=>new qL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),w0e=MK(31,168,128/8),b0e=MK(31,136,256/8),EVe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:qL,keccakP:kK,keccak_224:g0e,keccak_256:VL,keccak_384:m0e,keccak_512:y0e,sha3_224:d0e,sha3_256:h0e,sha3_384:f0e,sha3_512:p0e,shake128:w0e,shake256:b0e},Symbol.toStringTag,{value:"Module"}));function Hs(t,e){const n=e||"hex",r=VL(Ql(t,{strict:!1})?yb(t):t);return n==="bytes"?r:Ya(r)}const $P=new aT(8192);function o1(t,e){if($P.has(`${t}.${e}`))return $P.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Hs(Eg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return $P.set(`${t}.${e}`,i),i}function Ju(t,e){if(!Ja(t,{strict:!1}))throw new xf({address:t});return o1(t,e)}const v0e=/^0x[a-fA-F0-9]{40}$/,UP=new aT(8192);function Ja(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(UP.has(r))return UP.get(r);const s=v0e.test(t)?t.toLowerCase()===t?!0:n?o1(t)===t:!0:!1;return UP.set(r,s),s}function Pw(t,e,n,{strict:r}={}){return Ql(t,{strict:!1})?oI(t,e,n,{strict:r}):UK(t,e,n,{strict:r})}function LK(t,e){if(typeof e=="number"&&e>0&&e>kr(t)-1)throw new yK({offset:e,position:"start",size:kr(t)})}function $K(t,e,n){if(typeof e=="number"&&typeof n=="number"&&kr(t)!==n-e)throw new yK({offset:n,position:"end",size:kr(t)})}function UK(t,e,n,{strict:r}={}){LK(t,e);const s=t.slice(e,n);return r&&$K(s,e,n),s}function oI(t,e,n,{strict:r}={}){LK(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&$K(s,e,n),s}const E0e=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,BK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ff(t,e){if(t.length!==e.length)throw new kye({expectedLength:t.length,givenLength:e.length});const n=C0e({params:t,values:e}),r=YL(n);return r.length===0?"0x":r}function C0e({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(KL({param:t[r],value:e[r]}));return n}function KL({param:t,value:e}){const n=QL(t.type);if(n){const[r,s]=n;return A0e(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return T0e(e,{param:t});if(t.type==="address")return _0e(e);if(t.type==="bool")return x0e(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=BK.exec(t.type)??[];return I0e(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return S0e(e,{param:t});if(t.type==="string")return N0e(e);throw new Bye(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function YL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=kr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(rt(e+s,{size:32})),r.push(a),s+=kr(a)):n.push(a)}return Qa([...n,...r])}function _0e(t){if(!Ja(t))throw new xf({address:t});return{dynamic:!1,encoded:lf(t.toLowerCase())}}function A0e(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new SK(t);if(!r&&t.length!==e)throw new Pye({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=KL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=YL(i);if(r){const a=rt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Qa([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Qa(i.map(({encoded:o})=>o))}}function S0e(t,{param:e}){const[,n]=e.type.split("bytes"),r=kr(t);if(!n){let s=t;return r%32!==0&&(s=lf(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Qa([lf(rt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Oye({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:lf(t,{dir:"right"})}}function x0e(t){if(typeof t!="boolean")throw new pe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:lf(vK(t))}}function I0e(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new mK({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:rt(t,{size:32,signed:e})}}function N0e(t){const e=Iw(t),n=Math.ceil(kr(e)/32),r=[];for(let s=0;s<n;s++)r.push(lf(Pw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Qa([lf(rt(kr(e),{size:32})),...r])}}function T0e(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=KL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?YL(r):Qa(r.map(({encoded:s})=>s))}}function QL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const BP="/docs/contract/encodeDeployData";function cT(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Rye({docsPath:BP});if(!("inputs"in s))throw new z8({docsPath:BP});if(!s.inputs||s.inputs.length===0)throw new z8({docsPath:BP});const i=Ff(s.inputs,n);return wb([r,i])}function Mr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class gm extends pe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class $S extends pe{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function R0e(t){const e=Hs(`0x${t.substring(4)}`).substring(26);return o1(`0x${e}`)}const P0e="modulepreload",O0e=function(t){return"/"+t},J8={},hi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=O0e(c),c in J8)return;J8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":P0e,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function k0e({hash:t,signature:e}){const n=Ql(t)?t:Ya(t),{secp256k1:r}=await hi(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>YCe);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=Z8(f);return new r.Signature(ia(l),ia(u)).addRecoveryBit(p)}const o=Ql(e)?e:Ya(e);if(kr(o)!==65)throw new Error("invalid signature length");const a=qc(`0x${o.slice(130)}`),c=Z8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Z8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function FK({hash:t,signature:e}){return R0e(await k0e({hash:t,signature:e}))}class X8 extends pe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class jK extends pe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class D0e extends pe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const M0e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new D0e({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new jK({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new X8({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new X8({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function JL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(M0e);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function L0e(t,e="hex"){const n=WK(t),r=JL(new Uint8Array(n.length));return n.encode(r),e==="hex"?ls(r.bytes):r.bytes}function WK(t){return Array.isArray(t)?$0e(t.map(e=>WK(e))):U0e(t)}function $0e(t){const e=t.reduce((s,i)=>s+i.length,0),n=zK(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function U0e(t){const e=typeof t=="string"?Ka(t):t,n=zK(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function zK(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new pe("Length is too large.")}function B0e(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Hs(wb(["0x05",L0e([e?rt(e):"0x",s,n?rt(n):"0x"])]));return r==="bytes"?Ka(i):i}async function HK(t){const{authorization:e,signature:n}=t;return FK({hash:B0e(e),signature:n??e})}class dD extends pe{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class F0e extends pe{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class j0e extends pe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class GK extends pe{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function qK({chain:t,currentChainId:e}){if(!t)throw new j0e;if(e!==t.id)throw new F0e({chain:t,currentChainId:e})}const W0e={gwei:9,wei:18},z0e={ether:-9,wei:9},H0e={ether:-18,gwei:-9};function mm(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Ao(t,e="wei"){return mm(t,z0e[e])}class kp extends pe{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(kp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class aI extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Ao(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(aI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class hD extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Ao(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(hD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class fD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(fD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class pD extends pe{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(pD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class gD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(gD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class mD extends pe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(mD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class yD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(yD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class wD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(wD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class bD extends pe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(bD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class cI extends pe{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Ao(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Ao(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(cI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class a1 extends pe{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function ZL(t,e="wei"){return mm(t,W0e[e])}function c1(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class G0e extends pe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class q0e extends pe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",c1(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class V0e extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=c1({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${ZL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Ao(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ao(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Ao(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class VK extends pe{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class KK extends pe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class K0e extends pe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const as=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),Y0e=t=>t,XL=t=>t;class CE extends pe{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${XL(o)}`,e&&`Request body: ${as(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class e$ extends pe{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${XL(r)}`,`Request body: ${as(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class e4 extends pe{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${XL(n)}`,`Request body: ${as(e)}`],name:"TimeoutError"})}}const Q0e=-1;class To extends pe{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof e$?e.code:n??Q0e}}class ua extends To{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class CC extends To{constructor(e){super(e,{code:CC.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(CC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class _C extends To{constructor(e){super(e,{code:_C.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(_C,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class AC extends To{constructor(e,{method:n}={}){super(e,{code:AC.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(AC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class SC extends To{constructor(e){super(e,{code:SC.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(SC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class $g extends To{constructor(e){super(e,{code:$g.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty($g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Ug extends To{constructor(e){super(e,{code:Ug.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Ug,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class xC extends To{constructor(e){super(e,{code:xC.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(xC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class uf extends To{constructor(e){super(e,{code:uf.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(uf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Ow extends To{constructor(e){super(e,{code:Ow.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Ow,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Dp extends To{constructor(e,{method:n}={}){super(e,{code:Dp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Dp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class kw extends To{constructor(e){super(e,{code:kw.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(kw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class IC extends To{constructor(e){super(e,{code:IC.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(IC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Xr extends ua{constructor(e){super(e,{code:Xr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Xr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class NC extends ua{constructor(e){super(e,{code:NC.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(NC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class TC extends ua{constructor(e,{method:n}={}){super(e,{code:TC.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(TC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class RC extends ua{constructor(e){super(e,{code:RC.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(RC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class PC extends ua{constructor(e){super(e,{code:PC.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(PC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Jl extends ua{constructor(e){super(e,{code:Jl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Jl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Dw extends ua{constructor(e){super(e,{code:Dw.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Dw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class OC extends ua{constructor(e){super(e,{code:OC.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(OC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class kC extends ua{constructor(e){super(e,{code:kC.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(kC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class DC extends ua{constructor(e){super(e,{code:DC.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(DC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class MC extends ua{constructor(e){super(e,{code:MC.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(MC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class LC extends ua{constructor(e){super(e,{code:LC.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(LC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Mw extends ua{constructor(e){super(e,{code:Mw.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Mw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class J0e extends To{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function lT(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof pe?t.walk(s=>(s==null?void 0:s.code)===kp.code):t;return r instanceof pe?new kp({cause:t,message:r.details}):kp.nodeMessage.test(n)?new kp({cause:t,message:t.details}):aI.nodeMessage.test(n)?new aI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):hD.nodeMessage.test(n)?new hD({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):fD.nodeMessage.test(n)?new fD({cause:t,nonce:e==null?void 0:e.nonce}):pD.nodeMessage.test(n)?new pD({cause:t,nonce:e==null?void 0:e.nonce}):gD.nodeMessage.test(n)?new gD({cause:t,nonce:e==null?void 0:e.nonce}):mD.nodeMessage.test(n)?new mD({cause:t}):yD.nodeMessage.test(n)?new yD({cause:t,gas:e==null?void 0:e.gas}):wD.nodeMessage.test(n)?new wD({cause:t,gas:e==null?void 0:e.gas}):bD.nodeMessage.test(n)?new bD({cause:t}):cI.nodeMessage.test(n)?new cI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new a1({cause:t})}function YK(t,{docsPath:e,...n}){const r=(()=>{const s=lT(t,n);return s instanceof a1?t:s})();return new V0e(r,{docsPath:e,...n})}function uT(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const Z0e={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function bb(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=X0e(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>ls(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=rt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=rt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=rt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=rt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=rt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=rt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=Z0e[t.type]),typeof t.value<"u"&&(e.value=rt(t.value)),e}function X0e(t){return t.map(e=>({address:e.address,r:e.r?rt(BigInt(e.r)):e.r,s:e.s?rt(BigInt(e.s)):e.s,chainId:rt(e.chainId),nonce:rt(e.nonce),...typeof e.yParity<"u"?{yParity:rt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:rt(e.v)}:{}}))}function ft(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const ewe=2n**256n-1n;function ym(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Mr(e):void 0;if(o&&!Ja(o.address))throw new xf({address:o.address});if(i&&!Ja(i))throw new xf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new G0e;if(r&&r>ewe)throw new aI({maxFeePerGas:r});if(s&&r&&s>r)throw new cI({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function vb(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return qc(e)}class twe extends pe{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class t$ extends pe{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class nwe extends pe{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Ao(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class QK extends pe{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const JK={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function ZK(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?qc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?qc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?JK[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=rwe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function rwe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function XK(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:ZK(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Fl(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?rt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new QK({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||XK)(c)}async function n$(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function swe(t,e){return eY(t,e)}async function eY(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await ft(t,Fl,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return ia(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ft(t,Fl,"getBlock")({}),ft(t,n$,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new t$;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function iwe(t,e){return vD(t,e)}async function vD(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new twe;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await ft(t,Fl,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new t$;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await eY(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await ft(t,n$,"getGasPrice")({}))}}class owe extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=c1({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${ZL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Ao(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ao(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Ao(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function awe(t,{docsPath:e,...n}){const r=(()=>{const s=lT(t,n);return s instanceof a1?t:s})();return new owe(r,{docsPath:e,...n})}class cwe extends pe{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class lwe extends pe{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function t4(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function uwe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=t4(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=t4(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function n4(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new j8({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new j8({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function dwe(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=rt(e)),n!==void 0&&(o.nonce=rt(n)),r!==void 0&&(o.state=n4(r)),s!==void 0){if(o.state)throw new lwe;o.stateDiff=n4(s)}return o}function r$(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ja(n,{strict:!1}))throw new xf({address:n});if(e[n])throw new cwe({address:n});e[n]=dwe(r)}return e}async function s$(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?rt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function dT(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Mr(n):void 0;try{let z=function(R){const{block:U,request:k,rpcStateOverride:M}=R;return t.request({method:"eth_estimateGas",params:M?[k,U??"latest",M]:U?[k,U]:[k]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:A,stateOverride:_,...I}=await l1(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?rt(d):void 0)||h,S=r$(_),O=await(async()=>{if(I.to)return I.to;if(c&&c.length>0)return await HK({authorization:c[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`")})})();ym(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,q=(P||bb)({...uT(I,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:O,value:A});let T=BigInt(await z({block:N,request:q,rpcStateOverride:S}));if(c){const R=await s$(t,{address:q.from}),U=await Promise.all(c.map(async k=>{const{address:M}=k,j=await z({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:M,value:rt(R)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(j)}));T+=U.reduce((k,M)=>k+M,0n)}return T}catch(a){throw awe(a,{...e,account:r,chain:t.chain})}}async function i$(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?rt(r):n]},{dedupe:!!r});return qc(s)}function tY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ka(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>ls(i))}function nY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ka(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ka(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>ls(o))}function hwe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function fwe(t,e,n){return t&e^~t&n}function pwe(t,e,n){return t&e^t&n^e&n}class gwe extends GL{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=LP(this.buffer)}update(e){Tw(this),e=i1(e),Kc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=LP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Tw(this),xK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Rw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;hwe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=LP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Dd=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),mwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Md=new Uint32Array(64);let ywe=class extends gwe{constructor(e=32){super(64,e,8,!1),this.A=Dd[0]|0,this.B=Dd[1]|0,this.C=Dd[2]|0,this.D=Dd[3]|0,this.E=Dd[4]|0,this.F=Dd[5]|0,this.G=Dd[6]|0,this.H=Dd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Md[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Md[d-15],f=Md[d-2],p=rl(h,7)^rl(h,18)^h>>>3,g=rl(f,17)^rl(f,19)^f>>>10;Md[d]=g+Md[d-7]+p+Md[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=rl(a,6)^rl(a,11)^rl(a,25),f=u+h+fwe(a,c,l)+mwe[d]+Md[d]|0,g=(rl(r,2)^rl(r,13)^rl(r,22))+pwe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Rw(Md)}destroy(){this.set(0,0,0,0,0,0,0,0),Rw(this.buffer)}};const rY=NK(()=>new ywe),wwe=rY;function bwe(t,e){return wwe(Ql(t,{strict:!1})?yb(t):t)}function vwe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=bwe(e);return s.set([n],0),r==="bytes"?s:ls(s)}function Ewe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(vwe({commitment:i,to:r,version:n}));return s}const r4=6,sY=32,o$=4096,iY=sY*o$,s4=iY*r4-1-1*o$*r4;class Cwe extends pe{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class _we extends pe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Awe(t){const e=typeof t.data=="string"?Ka(t.data):t.data,n=kr(e);if(!n)throw new _we;if(n>s4)throw new Cwe({maxSize:s4,size:n});const r=[];let s=!0,i=0;for(;s;){const o=JL(new Uint8Array(iY));let a=0;for(;a<o$;){const c=e.slice(i,i+(sY-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>ls(o.bytes))}function Swe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Awe({data:e}),i=t.commitments??tY({blobs:s,kzg:n,to:r}),o=t.proofs??nY({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function xwe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new q0e({transaction:t})}const oY=["blobVersionedHashes","chainId","fees","gas","nonce","type"],i4=new Map;async function l1(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=oY,type:u}=e,d=n&&Mr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ft(t,Fl,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ft(t,vb,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await ft(t,i$,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=tY({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=Ewe({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=nY({blobs:r,commitments:y,kzg:o}),v=Swe({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=xwe(h)}catch{let y=i4.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",i4.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await vD(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new nwe({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new t$;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await vD(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await ft(t,dT,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),ym(h),delete h.parameters,h}async function a$(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const FP=new aT(128);async function u1(t,e){var b,v,A,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new gm({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Mr(n):null;try{ym(e);const I=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await HK({authorization:i[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let x;r!==null&&(x=await ft(t,vb,"getChainId")({}),qK({currentChainId:x,chain:r}));const N=(A=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,O=(N||bb)({...uT(w,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:I,type:p,value:g}),P=FP.get(t.uid),F=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:F,params:[O]},{retryCount:0})}catch(q){if(P===!1)throw q;const z=q;if(z.name==="InvalidInputRpcError"||z.name==="InvalidParamsRpcError"||z.name==="MethodNotFoundRpcError"||z.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(T=>(FP.set(t.uid,!0),T)).catch(T=>{const R=T;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(FP.set(t.uid,!1),z):R});throw z}}if((y==null?void 0:y.type)==="local"){const x=await ft(t,l1,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...oY,"sidecars"],type:p,value:g,...w,to:I}),N=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,S=await y.signTransaction(x,{serializer:N});return await ft(t,a$,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new $S({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new $S({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(I){throw I instanceof $S?I:YK(I,{...e,account:y,chain:e.chain||void 0})}}function Iwe(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=cT({abi:n,args:r,bytecode:s});return u1(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const ED=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],CD=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],aY=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],cY=[...aY,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Nwe=[...aY,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],o4=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],a4=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],c4=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function Twe(t,e={}){typeof e.size<"u"&&Xa(t,{size:e.size});const n=ls(t,e);return ia(n,e)}function Rwe(t,e={}){let n=t;if(typeof e.size<"u"&&(Xa(n,{size:e.size}),n=Hl(n)),n.length>1||n[0]>1)throw new wye(n);return!!n[0]}function nd(t,e={}){typeof e.size<"u"&&Xa(t,{size:e.size});const n=ls(t,e);return qc(n,e)}function Pwe(t,e={}){let n=t;return typeof e.size<"u"&&(Xa(n,{size:e.size}),n=Hl(n,{dir:"right"})),new TextDecoder().decode(n)}function d1(t,e){const n=typeof e=="string"?Ka(e):e,r=JL(n);if(kr(n)===0&&t.length>0)throw new s1;if(kr(e)&&kr(e)<32)throw new EK({data:typeof e=="string"?e:ls(e),params:t,size:kr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=r0(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function r0(t,e,{staticPosition:n}){const r=QL(e.type);if(r){const[s,i]=r;return kwe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return $we(t,e,{staticPosition:n});if(e.type==="address")return Owe(t);if(e.type==="bool")return Dwe(t);if(e.type.startsWith("bytes"))return Mwe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Lwe(t,e);if(e.type==="string")return Uwe(t,{staticPosition:n});throw new Fye(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const l4=32,_D=32;function Owe(t){const e=t.readBytes(32);return[o1(ls(UK(e,-20))),32]}function kwe(t,e,{length:n,staticPosition:r}){if(!n){const o=nd(t.readBytes(_D)),a=r+o,c=a+l4;t.setPosition(a);const l=nd(t.readBytes(l4)),u=$C(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=r0(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if($C(e)){const o=nd(t.readBytes(_D)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=r0(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=r0(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Dwe(t){return[Rwe(t.readBytes(32),{size:32}),32]}function Mwe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=nd(t.readBytes(32));t.setPosition(n+o);const a=nd(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[ls(c),32]}return[ls(t.readBytes(Number.parseInt(s),32)),32]}function Lwe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Twe(s,{signed:n}):nd(s,{signed:n}),32]}function $we(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if($C(e)){const o=nd(t.readBytes(_D)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=r0(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=r0(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Uwe(t,{staticPosition:e}){const n=nd(t.readBytes(32)),r=e+n;t.setPosition(r);const s=nd(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Pwe(Hl(i));return t.setPosition(e+32),[o,32]}function $C(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some($C);const n=QL(t.type);return!!(n&&$C({...t,type:n[1]}))}const Bwe=t=>Hs(yb(t));function Fwe(t){return Bwe(t)}const jwe="1.0.8";let da=class AD extends Error{constructor(e,n={}){var o;const r=n.cause instanceof AD?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof AD&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${jwe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Ad(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const lY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,uY=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,dY=/^\(.+?\).*?$/,u4=/^tuple(?<array>(\[(\d*)\])*)$/;function SD(t){let e=t.type;if(u4.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=SD(i),s<n-1&&(e+=", ")}const r=Ad(u4,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,SD({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function hv(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=SD(s),r!==n-1&&(e+=", ")}return e}function lI(t){var e;return t.type==="function"?`function ${t.name}(${hv(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${hv(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${hv(t.inputs)})`:t.type==="error"?`error ${t.name}(${hv(t.inputs)})`:t.type==="constructor"?`constructor(${hv(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const hY=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Wwe(t){return hY.test(t)}function zwe(t){return Ad(hY,t)}const fY=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Hwe(t){return fY.test(t)}function Gwe(t){return Ad(fY,t)}const pY=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function qwe(t){return pY.test(t)}function Vwe(t){return Ad(pY,t)}const gY=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function c$(t){return gY.test(t)}function Kwe(t){return Ad(gY,t)}const mY=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Ywe(t){return mY.test(t)}function Qwe(t){return Ad(mY,t)}const yY=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Jwe(t){return yY.test(t)}function Zwe(t){return Ad(yY,t)}const Xwe=/^receive\(\) external payable$/;function ebe(t){return Xwe.test(t)}const tbe=new Set(["indexed"]),xD=new Set(["calldata","memory","storage"]);class nbe extends da{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class rbe extends da{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class sbe extends da{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class ibe extends da{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class obe extends da{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class abe extends da{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class cbe extends da{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class lbe extends da{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Eb extends da{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class ube extends da{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class dbe extends da{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class hbe extends da{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class fbe extends da{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function pbe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const jP=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function ID(t,e={}){if(qwe(t))return gbe(t,e);if(Hwe(t))return mbe(t,e);if(Wwe(t))return ybe(t,e);if(Ywe(t))return wbe(t,e);if(Jwe(t))return bbe(t);if(ebe(t))return{type:"receive",stateMutability:"payable"};throw new ube({signature:t})}function gbe(t,e={}){const n=Vwe(t);if(!n)throw new Eb({signature:t,type:"function"});const r=Dc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Bg(r[a],{modifiers:xD,structs:e,type:"function"}));const o=[];if(n.returns){const a=Dc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Bg(a[l],{modifiers:xD,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function mbe(t,e={}){const n=Gwe(t);if(!n)throw new Eb({signature:t,type:"event"});const r=Dc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Bg(r[o],{modifiers:tbe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function ybe(t,e={}){const n=zwe(t);if(!n)throw new Eb({signature:t,type:"error"});const r=Dc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Bg(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function wbe(t,e={}){const n=Qwe(t);if(!n)throw new Eb({signature:t,type:"constructor"});const r=Dc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Bg(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function bbe(t){const e=Zwe(t);if(!e)throw new Eb({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const vbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Ebe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Cbe=/^u?int$/;function Bg(t,e){var d,h;const n=pbe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(jP.has(n))return jP.get(n);const r=dY.test(t),s=Ad(r?Ebe:vbe,t);if(!s)throw new ibe({param:t});if(s.name&&Abe(s.name))throw new obe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Dc(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Bg(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Cbe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!wY(c))throw new sbe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new abe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(xD.has(s.modifier)&&!Sbe(c,!!s.array))throw new cbe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return jP.set(n,u),u}function Dc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Dc(a,[...e,n.trim()]):Dc(a,e,`${n}${o}`,r);case"(":return Dc(a,e,`${n}${o}`,r+1);case")":return Dc(a,e,`${n}${o}`,r-1);default:return Dc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new fbe({current:n,depth:r});return e.push(n.trim()),e}function wY(t){return t==="address"||t==="bool"||t==="function"||t==="string"||lY.test(t)||uY.test(t)}const _be=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Abe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||lY.test(t)||uY.test(t)||_be.test(t)}function Sbe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function bY(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!c$(a))continue;const c=Kwe(a);if(!c)throw new Eb({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Bg(p,{type:"struct"});u.push(g)}if(!u.length)throw new dbe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=vY(c,e)}return r}const xbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function vY(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(dY.test(o.type))r.push(o);else{const c=Ad(xbe,o.type);if(!(c!=null&&c.type))throw new lbe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new hbe({type:u});r.push({...o,type:`tuple${l??""}`,components:vY(e[u]??[],e,new Set([...n,u]))})}else if(wY(u))r.push(o);else throw new rbe({type:u})}}return r}function EY(t){const e=bY(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];c$(i)||n.push(ID(i,e))}return n}function d4(t){let e;if(typeof t=="string")e=ID(t);else{const n=bY(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!c$(i)){e=ID(i,n);break}}}if(!e)throw new nbe({signature:t});return e}function Ibe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new pe("Unable to normalize signature.");return s}const Nbe=t=>{const e=typeof t=="string"?t:lI(t);return Ibe(e)};function CY(t){return Fwe(Nbe(t))}const hT=CY,h1=t=>Pw(CY(t),0,4);function wm(t){const{abi:e,args:n=[],name:r}=t,s=Ql(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?h1(a)===r:a.type==="event"?hT(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?ND(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=_Y(a.inputs,o.inputs,n);if(l)throw new $ye({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function ND(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ja(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>ND(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>ND(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function _Y(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return _Y(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ja(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ja(n[r],{strict:!1}):!1)return o}}const WP="/docs/contract/decodeFunctionResult";function bm(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=wm({abi:e,args:n,name:r});if(!a)throw new Nw(r,{docsPath:WP});i=a}if(i.type!=="function")throw new Nw(void 0,{docsPath:WP});if(!i.outputs)throw new AK(i.name,{docsPath:WP});const o=d1(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const h4="/docs/contract/encodeFunctionData";function Tbe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=wm({abi:e,args:n,name:r});if(!i)throw new Nw(r,{docsPath:h4});s=i}if(s.type!=="function")throw new Nw(void 0,{docsPath:h4});return{abi:[s],functionName:h1(Vc(s))}}function ec(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Tbe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Ff(s.inputs,e??[]):void 0;return wb([i,o??"0x"])}function Cb({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new dD({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new dD({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const AY={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},SY={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Rbe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Pbe(t){const{abi:e,data:n}=t,r=Pw(n,0,4);if(r==="0x")throw new s1;const i=[...e||[],SY,Rbe].find(o=>o.type==="error"&&r===h1(Vc(o)));if(!i)throw new CK(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?d1(i.inputs,Pw(n,4)):void 0,errorName:i.name}}function xY({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?as(e[i]):e[i]}`).join(", ")})`}class IY extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Mr(n):void 0;let g=c1({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${ZL(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Ao(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ao(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Ao(l)} gwei`,nonce:u});f&&(g+=`
${uwe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class NY extends pe{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=wm({abi:n,args:r,name:o}),l=c?xY({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Vc(c,{includeName:!0}):void 0,d=c1({address:s&&Y0e(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class TD extends pe{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Pbe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=AY[f]}else{const f=u?Vc(u,{includeName:!0}):void 0,p=u&&h?xY({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof CK&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Obe extends pe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class kbe extends pe{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class fT extends pe{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function l$(t,e){var r,s,i,o,a,c;if(!(t instanceof pe))return!1;const n=t.walk(l=>l instanceof TD);return n instanceof TD?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===AY[50]):!1}function Dbe(t){const{abi:e,data:n}=t,r=Pw(n,0,4),s=e.find(i=>i.type==="function"&&r===h1(Vc(i)));if(!s)throw new Lye(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?d1(s.inputs,Pw(n,4)):void 0}}const zP="/docs/contract/encodeErrorResult";function f4(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=wm({abi:e,args:r,name:n});if(!c)throw new H8(n,{docsPath:zP});s=c}if(s.type!=="error")throw new H8(void 0,{docsPath:zP});const i=Vc(s),o=h1(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Dye(s.name,{docsPath:zP});a=Ff(s.inputs,r)}return wb([o,a])}const HP="/docs/contract/encodeFunctionResult";function Mbe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=wm({abi:e,name:n});if(!o)throw new Nw(n,{docsPath:HP});s=o}if(s.type!=="function")throw new Nw(void 0,{docsPath:HP});if(!s.outputs)throw new AK(s.name,{docsPath:HP});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new SK(r)})();return Ff(s.outputs,i)}const u$="x-batch-gateway:true";async function Lbe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Dbe({abi:CD,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(u$)?await Lbe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=$be(c)}})),Mbe({abi:CD,functionName:"query",result:[s,i]})}function $be(t){return t.name==="HttpRequestError"&&t.status?f4({abi:CD,errorName:"HttpError",args:[t.status,t.shortMessage]}):f4({abi:[SY],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function TY(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ql(e)?e:null}function US(t){let e=new Uint8Array(32).fill(0);if(!t)return ls(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=TY(n[r]),i=s?yb(s):Hs(Eg(n[r]),"bytes");e=Hs(Qa([e,i]),"bytes")}return ls(e)}function Ube(t){return`[${t.slice(2)}]`}function Bbe(t){const e=new Uint8Array(32).fill(0);return t?TY(t)||Hs(Eg(t)):ls(e)}function pT(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Eg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Eg(s[i]);o.byteLength>255&&(o=Eg(Ube(Bbe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Fbe=3;function Fg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof fT?t:t instanceof pe?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof s1?new Obe({functionName:i}):[Fbe,$g.code].includes(c)&&(l||u||d||h)?new TD({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof e$?u:h??d}):t;return new NY(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const d$=BigInt(0),RD=BigInt(1);function uI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function PA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function RY(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?d$:BigInt("0x"+t)}function gT(t){return RY(EC(t))}function PY(t){return Kc(t),RY(EC(Uint8Array.from(t).reverse()))}function h$(t,e){return HL(t.toString(16).padStart(e*2,"0"))}function OY(t,e){return h$(t,e).reverse()}function Na(t,e,n){let r;if(typeof e=="string")try{r=HL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(zL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const GP=t=>typeof t=="bigint"&&d$<=t;function jbe(t,e,n){return GP(t)&&GP(e)&&GP(n)&&e<=t&&t<n}function Wbe(t,e,n,r){if(!jbe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function zbe(t){let e;for(e=0;t>d$;t>>=RD,e+=1);return e}const mT=t=>(RD<<BigInt(t))-RD;function Hbe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return Op(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function f$(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function p4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Gbe="0.1.1";function qbe(){return Gbe}let zr=class PD extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof PD){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof PD&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${qbe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return kY(this,e)}};function kY(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?kY(t.cause,e):e?null:t}const Vbe="#__bigint";function Kbe(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Vbe:s,n)}function Ybe(t,e){if(m4(t)>e)throw new ive({givenSize:m4(t),maxSize:e})}const du={zero:48,nine:57,A:65,F:70,a:97,f:102};function g4(t){if(t>=du.zero&&t<=du.nine)return t-du.zero;if(t>=du.A&&t<=du.F)return t-(du.A-10);if(t>=du.a&&t<=du.f)return t-(du.a-10)}function Qbe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new ove({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function p$(t,e){if(Za(t)>e)throw new dve({givenSize:Za(t),maxSize:e})}function Jbe(t,e){if(typeof e=="number"&&e>0&&e>Za(t)-1)throw new UY({offset:e,position:"start",size:Za(t)})}function Zbe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Za(t)!==n-e)throw new UY({offset:n,position:"end",size:Za(t)})}function DY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new hve({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Xbe=new TextEncoder;function eve(t){return t instanceof Uint8Array?t:typeof t=="string"?nve(t):tve(t)}function tve(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function nve(t,e={}){const{size:n}=e;let r=t;n&&(p$(t,n),r=Wg(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=g4(s.charCodeAt(c++)),u=g4(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new zr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function rve(t,e={}){const{size:n}=e,r=Xbe.encode(t);return typeof n=="number"?(Ybe(r,n),sve(r,n)):r}function sve(t,e){return Qbe(t,{dir:"right",size:e})}function m4(t){return t.length}let ive=class extends zr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},ove=class extends zr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const ave=new TextEncoder,cve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function lve(t,e={}){const{strict:n=!1}=e;if(!t)throw new y4(t);if(typeof t!="string")throw new y4(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new w4(t);if(!t.startsWith("0x"))throw new w4(t)}function Zl(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function MY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(p$(n,e.size),jg(n,e.size)):n}function LY(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=cve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(p$(r,e.size),Wg(r,e.size)):r}function Ri(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new $Y({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?jg(c,r):c}function g$(t,e={}){return LY(ave.encode(t),e)}function jg(t,e){return DY(t,{dir:"left",size:e})}function Wg(t,e){return DY(t,{dir:"right",size:e})}function m$(t,e,n,r={}){const{strict:s}=r;Jbe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Zbe(i,e,n),i}function Za(t){return Math.ceil((t.length-2)/2)}function uve(t,e={}){const{strict:n=!1}=e;try{return lve(t,{strict:n}),!0}catch{return!1}}let $Y=class extends zr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class y4 extends zr{constructor(e){super(`Value \`${typeof e=="object"?Kbe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class w4 extends zr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let dve=class extends zr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class UY extends zr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let hve=class extends zr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function fve(t){return{address:t.address,amount:Ri(t.amount),index:Ri(t.index),validatorIndex:Ri(t.validatorIndex)}}function BY(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Ri(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Ri(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Ri(t.gasLimit)},...typeof t.number=="bigint"&&{number:Ri(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Ri(t.prevRandao)},...typeof t.time=="bigint"&&{time:Ri(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(fve)}}}const pve="0x82ad56cb",FY="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",gve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",mve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function jY(t,{docsPath:e,...n}){const r=(()=>{const s=lT(t,n);return s instanceof a1?t:s})();return new IY(r,{docsPath:e,...n})}function y$(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const qP=new Map;function WY({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>qP.delete(e),a=()=>c().map(({args:u})=>u),c=()=>qP.get(e)||[],l=u=>qP.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=y$();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function f1(t,e){var q,z,T,R;const{account:n=t.account,authorizationList:r,batch:s=!!((q=t.batch)!=null&&q.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:A,value:_,stateOverride:I,...x}=e,N=n?Mr(n):void 0;if(u&&(h||f))throw new pe("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new pe("Cannot provide both `code` & `to` as parameters.");const S=u&&d,O=h&&f&&A&&d,P=S||O,F=S?bve({code:u,data:d}):O?vve({data:d,factory:h,factoryData:f,to:A}):d;try{ym(e);const k=(typeof i=="bigint"?rt(i):void 0)||o,M=l?BY(l):void 0,j=r$(I),Y=(R=(T=(z=t.chain)==null?void 0:z.formatters)==null?void 0:T.transactionRequest)==null?void 0:R.format,le=(Y||bb)({...uT(x,{format:Y}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:F,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:P?void 0:A,value:_});if(s&&yve({request:le})&&!j&&!M)try{return await wve(t,{...le,blockNumber:i,blockTag:o})}catch(ue){if(!(ue instanceof GK)&&!(ue instanceof dD))throw ue}const oe=(()=>{const ue=[le,k];return j&&M?[...ue,j,M]:j?[...ue,j]:M?[...ue,{},M]:ue})(),ae=await t.request({method:"eth_call",params:oe});return ae==="0x"?{data:void 0}:{data:ae}}catch(U){const k=Eve(U),{offchainLookup:M,offchainLookupSignature:j}=await hi(async()=>{const{offchainLookup:Y,offchainLookupSignature:ne}=await import("./ccip-CbDv2xxf.js");return{offchainLookup:Y,offchainLookupSignature:ne}},[]);if(t.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===j&&A)return{data:await M(t,{data:k,to:A})};throw P&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new kbe({factory:h}):jY(U,{...e,account:N,chain:t.chain})}}function yve({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(pve)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function wve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new GK;l=Cb({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?rt(s):void 0)||i,{schedule:h}=WY({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const y=w.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),b=ec({abi:ED,args:[y],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return bm({abi:ED,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new fT({data:f});return f==="0x"?{data:void 0}:{data:f}}function bve(t){const{code:e,data:n}=t;return cT({abi:EY(["constructor(bytes, bytes)"]),bytecode:FY,args:[e,n]})}function vve(t){const{data:e,factory:n,factoryData:r,to:s}=t;return cT({abi:EY(["constructor(address, bytes, address, bytes)"]),bytecode:gve,args:[s,e,n,r]})}function Eve(t){var n;if(!(t instanceof pe))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Xl(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=ec({abi:n,args:s,functionName:i});try{const{data:c}=await ft(t,f1,"call")({...o,data:a,to:r});return bm({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Fg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Cve(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Cb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=ec({abi:a4,functionName:"addr",...s!=null?{args:[US(i),BigInt(s)]}:{args:[US(i)]}}),h={address:l,abi:cY,functionName:"resolve",args:[Ya(pT(i)),d,o??[u$]],blockNumber:n,blockTag:r},p=await ft(t,Xl,"readContract")(h);if(p[0]==="0x")return null;const g=bm({abi:a4,args:s!=null?[US(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Hl(g)==="0x00"?null:g}catch(d){if(a)throw d;if(l$(d,"resolve"))return null;throw d}}class _ve extends pe{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class fv extends pe{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class w$ extends pe{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Ave extends pe{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Sve=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,xve=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Ive=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Nve=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Tve(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function b4(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function zY({uri:t,gatewayUrls:e}){const n=Ive.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=b4(e==null?void 0:e.ipfs,"https://ipfs.io"),s=b4(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Sve),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||xve.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(Nve,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new w$({uri:t})}function HY(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new _ve({data:t});return t.image||t.image_url||t.image_data}async function Rve({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await b$({gatewayUrls:t,uri:HY(n)})}catch{throw new w$({uri:e})}}async function b$({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=zY({uri:e,gatewayUrls:t});if(r||await Tve(n))return n;throw new w$({uri:e})}function Pve(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new fv({reason:"Only EIP-155 supported"});if(!o)throw new fv({reason:"Chain ID not found"});if(!c)throw new fv({reason:"Contract address not found"});if(!s)throw new fv({reason:"Token ID not found"});if(!a)throw new fv({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Ove(t,{nft:e}){if(e.namespace==="erc721")return Xl(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Xl(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Ave({namespace:e.namespace})}async function kve(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Dve(t,{gatewayUrls:e,record:n}):b$({uri:n,gatewayUrls:e})}async function Dve(t,{gatewayUrls:e,record:n}){const r=Pve(n),s=await Ove(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=zY({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return b$({uri:HY(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Rve({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function GY(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Cb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:cY,functionName:"resolve",args:[Ya(pT(i)),ec({abi:o4,functionName:"text",args:[US(i),s]}),o??[u$]],blockNumber:n,blockTag:r},f=await ft(t,Xl,"readContract")(d);if(f[0]==="0x")return null;const p=bm({abi:o4,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(l$(d,"resolve"))return null;throw d}}async function Mve(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ft(t,GY,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await kve(t,{record:c,gatewayUrls:r})}catch{return null}}async function qY(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Cb({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Nwe,functionName:"reverse",args:[Ya(pT(c))],blockNumber:n,blockTag:r},u=ft(t,Xl,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(l$(l,"reverse"))return null;throw l}}async function Lve(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Cb({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ft(t,Xl,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ya(pT(s))],blockNumber:n,blockTag:r});return c}async function VY(t,e){var w,y,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Mr(n):void 0;try{ym(e);const A=(typeof r=="bigint"?rt(r):void 0)||s,_=(b=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,x=(_||bb)({...uT(p,{format:_}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),N=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:N.accessList,gasUsed:BigInt(N.gasUsed)}}catch(v){throw jY(v,{...e,account:g,chain:t.chain})}}function yT(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function $ve(t){const e=yT(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Uve extends pe{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const v4="/docs/contract/encodeEventTopics";function p1(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=wm({abi:e,name:n});if(!l)throw new G8(n,{docsPath:v4});s=l}if(s.type!=="event")throw new G8(void 0,{docsPath:v4});const i=Vc(s),o=hT(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>E4({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?E4({param:d,value:u[h]}):null))??[])}return[o,...a]}function E4({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Hs(yb(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Uve(t.type);return Ff([t],[e])}async function KY(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=yT(t,{method:"eth_newFilter"}),u=i?p1({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?rt(o):o,toBlock:typeof c=="bigint"?rt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function YY(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=yT(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>p1({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?rt(i):i,toBlock:typeof a=="bigint"?rt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function QY(t){const e=yT(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Bve(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=ec({abi:n,args:s,functionName:i});try{return await ft(t,dT,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Mr(a.account):void 0;throw Fg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Fve(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const jve=new Map,Wve=new Map;function zve(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,jve),r=e(t,Wve);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Hve(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=zve(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Gve=t=>`blockNumber.${t}`;async function g1(t,{cacheTime:e=t.cacheTime}={}){const n=await Hve(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Gve(t.uid),cacheTime:e});return BigInt(n)}async function qve(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?rt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),qc(i)}async function C4(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?rt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function wT(t,e){if(!Ja(t,{strict:!1}))throw new xf({address:t});if(!Ja(e,{strict:!1}))throw new xf({address:e});return t.toLowerCase()===e.toLowerCase()}const _4="/docs/contract/decodeEventLog";function v$(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Mye({docsPath:_4});const c=e.find(g=>g.type==="event"&&o===hT(Vc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new _K(o,{docsPath:_4});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new oT({abiItem:c,param:w});h[d?y:w.name||y]=Vve({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=d1(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof EK||g instanceof jK?new bC({abiItem:c,data:n,params:p,size:kr(n)}):g}else if(i)throw new bC({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Vve({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(d1([t],e)||[])[0]}function E$(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===hT(u));if(!c)return null;const l=v$({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!Kve({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof _K)return null;if(c instanceof bC||c instanceof oT){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function Kve(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?wT(o,a):i.type==="string"||i.type==="bytes"?Hs(yb(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function md(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function C$(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>p1({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?rt(r):r,toBlock:typeof s=="bigint"?rt(s):s}]});const f=h.map(p=>md(p));return u?E$({abi:u,args:a,logs:f,strict:l}):f}async function JY(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?wm({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return ft(t,C$,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class Yve extends pe{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Qve(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await ft(t,Xl,"readContract")({abi:Jve,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Yve({address:n}):o}}const Jve=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Zve(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function Xve(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?rt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[rt(e),i||r,s]},{dedupe:!!i});return Zve(o)}async function bT(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>md(i));return!("abi"in e)||!e.abi?s:E$({abi:e.abi,logs:s,strict:n})}async function eEe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>md(i));return e.abi?E$({abi:e.abi,logs:s,strict:n}):s}async function tEe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?rt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function vT(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?rt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,rt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,rt(i)]},{dedupe:!!a}),!c)throw new VK({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||ZK)(c)}async function nEe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ft(t,g1,"getBlockNumber")({}),e?ft(t,vT,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const ZY={"0x0":"reverted","0x1":"success"};function rEe(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>md(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?qc(t.transactionIndex):null,status:t.status?ZY[t.status]:null,type:t.type?JK[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function OD(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new KK({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||rEe)(n)}async function XY(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=Cb({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:A,args:_,functionName:I}=l[b];try{const x=ec({abi:v,args:_,functionName:I});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const N=Fg(x,{abi:v,address:A,args:_,docsPath:"/docs/contract/multicall",functionName:I,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(b=>ft(t,Xl,"readContract")({abi:ED,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let _=0;_<h[b].length;_++)w.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let _=0;_<A.length;_++){const{returnData:I,success:x}=A[_],{callData:N}=h[b][_],{abi:S,address:O,functionName:P,args:F}=l[w.length];try{if(N==="0x")throw new s1;if(!x)throw new fT({data:I});const q=bm({abi:S,args:F,data:I,functionName:P});w.push(r?{result:q,status:"success"}:q)}catch(q){const z=Fg(q,{abi:S,address:O,args:F,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw z;w.push({error:z,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new pe("multicall results mismatch");return w}async function kD(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?BY(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,b=y.account?Mr(y.account):void 0,v=y.abi?ec(y):y.data,A={...y,data:y.dataSuffix?Qa([v||"0x",y.dataSuffix]):v,from:y.from??(b==null?void 0:b.address)};return ym(A),bb(A)}),g=h.stateOverrides?r$(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?rt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...XK(h),calls:h.calls.map((p,g)=>{var O,P;const{abi:w,args:y,functionName:b,to:v}=s[f].calls[g],A=((O=p.error)==null?void 0:O.data)??p.returnData,_=BigInt(p.gasUsed),I=(P=p.logs)==null?void 0:P.map(F=>md(F)),x=p.status==="0x1"?"success":"failure",N=w&&x==="success"&&A!=="0x"?bm({abi:w,data:A,functionName:b}):null,S=(()=>{var q;if(x==="success")return;let F;if(((q=p.error)==null?void 0:q.data)==="0x"?F=new s1:p.error&&(F=new fT(p.error)),!!F)return Fg(F,{abi:w??[],address:v??"0x",args:y,functionName:b??"<unknown>"})})();return{data:A,gasUsed:_,logs:I,status:x,...x==="success"?{result:N}:{error:S}}})}))}catch(c){const l=c,u=lT(l,{});throw u instanceof a1?l:u}}function eQ(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=VL(eve(t));return n==="Bytes"?r:LY(r)}let sEe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const iEe={checksum:new sEe(8192)},VP=iEe.checksum,oEe=/^0x[a-fA-F0-9]{40}$/;function ET(t,e={}){const{strict:n=!0}=e;if(!oEe.test(t))throw new A4({address:t,cause:new cEe});if(n){if(t.toLowerCase()===t)return;if(aEe(t)!==t)throw new A4({address:t,cause:new lEe})}}function aEe(t){if(VP.has(t))return VP.get(t);ET(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=eQ(rve(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return VP.set(t,s),s}function DD(t,e={}){const{strict:n=!0}=e??{};try{return ET(t,{strict:n}),!0}catch{return!1}}class A4 extends zr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class cEe extends zr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class lEe extends zr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function MD(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new zr("Unable to normalize signature.");return s}function LD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return DD(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>LD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>LD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function tQ(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return tQ(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?DD(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?DD(n[r],{strict:!1}):!1)return o}}function nQ(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?d4(t):t;return{...r,...n?{hash:By(r)}:{}}}function uEe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=uve(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?rQ(l)===m$(e,0,4):l.type==="event"?By(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new $D({name:e});if(o.length===1)return{...o[0],...s?{hash:By(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:By(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?LD(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=tQ(l.inputs,a.inputs,r);if(d)throw new hEe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new $D({name:e});return{...c,...s?{hash:By(c)}:{}}}function rQ(t){return m$(By(t),0,4)}function dEe(t){const e=typeof t=="string"?t:lI(t);return MD(e)}function By(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:eQ(g$(dEe(t)))}class hEe extends zr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${MD(lI(e.abiItem))}\`, and`,`\`${n.type}\` in \`${MD(lI(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class $D extends zr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const fEe=/^(.*)\[([0-9]*)\]$/,pEe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,sQ=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function gEe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(_$({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function _$({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=_Ee(r.type);if(s){const[i,o]=s;return yEe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return CEe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return mEe(n,{checksum:t});if(r.type==="bool")return bEe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=sQ.exec(r.type)??[];return vEe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return wEe(n,{type:r.type});if(r.type==="string")return EEe(n);throw new cQ(r.type)}function A$(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Za(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ri(e+s,{size:32})),r.push(a),s+=Za(a)):n.push(a)}return Zl(...n,...r)}function mEe(t,e){const{checksum:n=!1}=e;return ET(t,{strict:n}),{dynamic:!1,encoded:jg(t.toLowerCase())}}function yEe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new SEe(t);if(!i&&t.length!==r)throw new AEe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=_$({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=A$(a);if(i){const l=Ri(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Zl(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Zl(...a.map(({encoded:c})=>c))}}function wEe(t,{type:e}){const[,n]=e.split("bytes"),r=Za(t);if(!n){let s=t;return r%32!==0&&(s=Wg(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Zl(jg(Ri(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new oQ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Wg(t)}}function bEe(t){if(typeof t!="boolean")throw new zr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:jg(MY(t))}}function vEe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new $Y({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ri(t,{size:32,signed:e})}}function EEe(t){const e=g$(t),n=Math.ceil(Za(e)/32),r=[];for(let s=0;s<n;s++)r.push(Wg(m$(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Zl(Wg(Ri(Za(e),{size:32})),...r)}}function CEe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=_$({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?A$(i):Zl(...i.map(({encoded:o})=>o))}}function _Ee(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function iQ(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new aQ({expectedLength:t.length,givenLength:e.length});const s=gEe({checksumAddress:r,parameters:t,values:e}),i=A$(s);return i.length===0?"0x":i}function UD(t,e){if(t.length!==e.length)throw new aQ({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(UD.encode(s,i))}return Zl(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return ET(c),jg(c.toLowerCase(),s?32:0)}if(n==="string")return g$(r);if(n==="bytes")return r;if(n==="bool")return jg(MY(r),s?32:1);const i=n.match(sQ);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return Ri(r,{size:s?32:d,signed:l==="int"})}const o=n.match(pEe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new oQ({expectedSize:Number.parseInt(l),value:r});return Wg(r,s?32:0)}const a=n.match(fEe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Zl(...u)}throw new cQ(n)}t.encode=e})(UD||(UD={}));class AEe extends zr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class oQ extends zr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Za(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class aQ extends zr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class SEe extends zr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class cQ extends zr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function xEe(t,e){var s;const{bytecode:n,args:r}=e;return Zl(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?iQ(t.inputs,r):"0x")}function IEe(t){return nQ(t)}function NEe(t,...e){const{overloads:n}=t,r=n?TEe([t,...n],t.name,{args:e[0]}):t,s=REe(r),i=e.length>0?iQ(r.inputs,e[0]):void 0;return i?Zl(s,i):s}function Hm(t,e={}){return nQ(t,e)}function TEe(t,e,n){const r=uEe(t,e,n);if(r.type!=="function")throw new $D({name:e,type:"function"});return r}function REe(t){return rQ(t)}const PEe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",sl="0x0000000000000000000000000000000000000000",OA=new aT(8192);function OEe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(OA.get(n))return OA.get(n);const r=t().finally(()=>OA.delete(n));return OA.set(n,r),r}async function dI(t){return new Promise(e=>setTimeout(e,t))}function hI(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await dI(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function kEe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Dp(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Dp(new Error("method not supported"),{method:l});const u=s?Iw(`${c}.${as(n)}`):void 0;return OEe(()=>hI(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case CC.code:throw new CC(f);case _C.code:throw new _C(f);case AC.code:throw new AC(f,{method:n.method});case SC.code:throw new SC(f);case $g.code:throw new $g(f);case Ug.code:throw new Ug(f);case xC.code:throw new xC(f);case uf.code:throw new uf(f);case Ow.code:throw new Ow(f);case Dp.code:throw new Dp(f,{method:n.method});case kw.code:throw new kw(f);case IC.code:throw new IC(f);case Xr.code:throw new Xr(f);case NC.code:throw new NC(f);case TC.code:throw new TC(f);case RC.code:throw new RC(f);case PC.code:throw new PC(f);case Jl.code:throw new Jl(f);case Dw.code:throw new Dw(f);case OC.code:throw new OC(f);case kC.code:throw new kC(f);case DC.code:throw new DC(f);case MC.code:throw new MC(f);case LC.code:throw new LC(f);case Mw.code:throw new Mw(f);case 5e3:throw new Xr(f);default:throw h instanceof pe?h:new J0e(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof CE){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>DEe(h)}),{enabled:s,id:u})}}function DEe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===kw.code||t.code===$g.code:t instanceof CE&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function lQ(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function uQ(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function MEe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const S4=MEe();function LEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await uQ(async({signal:p})=>{const g={...a,body:Array.isArray(r)?as(r.map(v=>({jsonrpc:"2.0",id:v.id??S4.take(),...v}))):as({jsonrpc:"2.0",id:r.id??S4.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new e4({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new CE({body:r,details:as(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof CE||h instanceof e4?h:new CE({body:r,cause:h,url:t})}}}}class $Ee extends pe{constructor({domain:e}){super(`Invalid domain "${as(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class UEe extends pe{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class BEe extends pe{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function FEe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:mQ({domain:e}),...t.types};gQ({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(jEe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(dQ({data:n,primaryType:r,types:s})),Hs(Qa(i))}function jEe({domain:t,types:e}){return dQ({data:t,primaryType:"EIP712Domain",types:e})}function dQ({data:t,primaryType:e,types:n}){const r=hQ({data:t,primaryType:e,types:n});return Hs(r)}function hQ({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[WEe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=pQ({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Ff(r,s)}function WEe({primaryType:t,types:e}){const n=Ya(zEe({primaryType:t,types:e}));return Hs(n)}function zEe({primaryType:t,types:e}){let n="";const r=fQ({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function fQ({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])fQ({primaryType:i.type,types:e},n);return n}function pQ({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Hs(hQ({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Hs(r)];if(n==="string")return[{type:"bytes32"},Hs(Ya(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>pQ({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Hs(Ff(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function HEe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return as({domain:o,message:a,primaryType:r,types:s})}function gQ(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(BK);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;rt(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!Ja(d))throw new xf({address:d});const f=u.match(E0e);if(f){const[g,w]=f;if(w&&kr(d)!==Number.parseInt(w))throw new Uye({expectedSize:Number.parseInt(w),givenSize:kr(d)})}const p=s[u];p&&(GEe(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new $Ee({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new UEe({primaryType:r,types:s})}function mQ({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function GEe(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new BEe({type:t})}const qEe=`Ethereum Signed Message:
`;function VEe(t){const e=typeof t=="string"?Iw(t):typeof t.raw=="string"?t.raw:ls(t.raw),n=Iw(`${qEe}${kr(e)}`);return Qa([n,e])}function yQ(t,e){return Hs(VEe(t),e)}const wQ="0x6492649264926492649264926492649264926492649264926492649264926492";function KEe(t){return oI(t,-32)===wQ}function YEe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=wb([Ff([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),wQ]);return s==="hex"?i:Ka(i)}class QEe extends pe{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function JEe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new QEe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const ZEe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function XEe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Mr(e.account):void 0;if(o&&!l)throw new pe("`account` is required when `traceAssetChanges` is true");const u=l?xEe(IEe("constructor(bytes, bytes)"),{bytecode:FY,args:[ZEe,NEe(Hm("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async k=>{if(!k.data&&!k.abi)return;const{accessList:M}=await VY(t,{account:l.address,...k,data:k.abi?ec(k):k.data});return M.map(({address:j,storageKeys:Y})=>Y.length>0?j:null)})).then(k=>k.flat().filter(Boolean)):[],h=await kD(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((k,M)=>({abi:[Hm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:sl,nonce:M})),stateOverrides:[{address:sl,nonce:0}]}]:[],{calls:[...s,{}].map(k=>({...k,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((k,M)=>({abi:[Hm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:sl,nonce:M})),stateOverrides:[{address:sl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[Hm("function decimals() returns (uint256)")],functionName:"decimals",from:sl,nonce:M})),stateOverrides:[{address:sl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[Hm("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:sl,nonce:M})),stateOverrides:[{address:sl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[Hm("function symbol() returns (string)")],functionName:"symbol",from:sl,nonce:M})),stateOverrides:[{address:sl,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,y,b,v,A]=o?h:[],{calls:_,...I}=f,x=_.slice(0,-1)??[],N=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],O=[...N,...S].map(k=>k.status==="success"?ia(k.data):null),P=(w==null?void 0:w.calls)??[],F=(y==null?void 0:y.calls)??[],q=[...P,...F].map(k=>k.status==="success"?ia(k.data):null),z=((b==null?void 0:b.calls)??[]).map(k=>k.status==="success"?k.result:null),T=((A==null?void 0:A.calls)??[]).map(k=>k.status==="success"?k.result:null),R=((v==null?void 0:v.calls)??[]).map(k=>k.status==="success"?k.result:null),U=[];for(const[k,M]of q.entries()){const j=O[k];if(typeof M!="bigint"||typeof j!="bigint")continue;const Y=z[k-1],ne=T[k-1],le=R[k-1],oe=k===0?{address:PEe,decimals:18,symbol:"ETH"}:{address:d[k-1],decimals:le||Y?Number(Y??1):void 0,symbol:ne??void 0};U.some(ae=>ae.token.address===oe.address)||U.push({token:oe,value:{pre:j,post:M,diff:M-j}})}return{assetChanges:U,block:I,results:x}}const KP=new Map,x4=new Map;let eCe=0;function yd(t,e,n){const r=++eCe,s=()=>KP.get(t)||[],i=()=>{const u=s();KP.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=x4.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(KP.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&x4.set(t,l),o}function _b(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await dI(c);const l=async()=>{s&&(await t({unpoll:i}),await dI(r),l())};l()})(),i}function tCe(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=as(["watchBlocks",t.uid,e,n,r,u,c]);return yd(p,{onBlock:s,onError:i},g=>_b(async()=>{var w;try{const y=await ft(t,Fl,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<y.number;b++){const v=await ft(t,Fl,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(w=g.onError)==null||w.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&ft(t,Fl,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(v){var _;if(!p)return;const A=await ft(t,Fl,"getBlock")({blockNumber:(_=v.result)==null?void 0:_.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});w=b,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function bQ(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=as(["watchBlockNumber",t.uid,e,n,o]);return yd(d,{onBlockNumber:r,onError:s},h=>_b(async()=>{var f;try{const p=await ft(t,g1,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=as(["watchBlockNumber",t.uid,e,n]);return yd(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var v;if(!f)return;const b=ia((v=y.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function CT(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function nCe(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=as(["watchEvent",e,n,r,t.uid,s,u,o]);return yd(w,{onLogs:c,onError:a},y=>{let b;o!==void 0&&(b=o-1n);let v,A=!1;const _=_b(async()=>{var I;if(!A){try{v=await ft(t,YY,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await ft(t,bT,"getFilterChanges")({filter:v});else{const N=await ft(t,g1,"getBlockNumber")({});b&&b!==N?x=await ft(t,C$,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:N}):x=[],b=N}if(x.length===0)return;if(r)y.onLogs(x);else for(const N of x)y.onLogs([N])}catch(x){v&&x instanceof Ug&&(A=!1),(I=y.onError)==null||I.call(y,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await ft(t,CT,"uninstallFilter")({filter:v}),_()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>p1({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:_}=await b.subscribe({params:["logs",{address:e,topics:A}],onData(I){var N;if(!w)return;const x=I.result;try{const{eventName:S,args:O}=v$({abi:v??[],data:x.data,topics:x.topics,strict:f}),P=md(x,{args:O,eventName:S});c([P])}catch(S){let O,P;if(S instanceof bC||S instanceof oT){if(d)return;O=S.abiItem.name,P=(N=S.abiItem.inputs)==null?void 0:N.some(q=>!("name"in q&&q.name))}const F=md(x,{args:P?[]:{},eventName:O});c([F])}},onError(I){a==null||a(I)}});y=_,w||y()}catch(b){a==null||a(b)}})(),()=>y()})()}function vQ(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=as(["watchPendingTransactions",t.uid,e,i]);return yd(l,{onTransactions:r,onError:n},u=>{let d;const h=_b(async()=>{var f;try{if(!d)try{d=await ft(t,QY,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ft(t,bT,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ft(t,CT,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function rCe(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>o1(r))}async function sCe(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function iCe(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Mr(n):void 0,i=r?[s==null?void 0:s.address,[rt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const EQ="0x5792579257925792579257925792579257925792579257925792579257925792",CQ=rt(0,{size:32});async function oCe(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Mr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?ec({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Qa([p,f.dataSuffix]):p,to:f.to,value:f.value?rt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:rt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Dw(new pe(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Mw(new pe(y,{details:y}))}const p=[];for(const y of d){const b=u1(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?ia(y.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:CQ);return{id:Qa([...w,rt(s.id,{size:32}),EQ])}}throw YK(h,{...e,account:u,chain:e.chain})}}async function _Q(t,e){async function n(u){if(u.endsWith(EQ.slice(2))){const h=Hl(oI(u,-64,-32)),f=oI(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>CQ.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:qc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?qc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:ia(u.blockNumber),gasUsed:ia(u.gasUsed),status:ZY[u.status]})))??[],statusCode:l,status:c,version:o}}async function aCe(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function cCe(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=as(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=y$();let u;const d=yd(o,{resolve:c,reject:l},h=>{const f=_b(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await _Q(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new lCe({id:n}))},i):void 0,await a}class lCe extends pe{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function uCe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function dCe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?qc(t.nonce):void 0,storageProof:t.storageProof?uCe(t.storageProof):void 0}}async function hCe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?rt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return dCe(a)}async function AQ(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=as(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=y$(),b=a?setTimeout(()=>{p(),f(),y(new K0e({hash:n}))},a):void 0;return f=yd(c,{onReplaced:r,resolve:w,reject:y},v=>{p=ft(t,bQ,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const _=x=>{clearTimeout(b),p(),x(),f()};let I=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;_(()=>v.resolve(d));return}if(l||(h=!0,await hI(async()=>{l=await ft(t,vT,"getTransaction")({hash:n}),l.blockNumber&&(I=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ft(t,OD,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;_(()=>v.resolve(d))}catch(x){if(x instanceof VK||x instanceof KK){if(!l){h=!1;return}try{u=l,h=!0;const N=await hI(()=>ft(t,Fl,"getBlock")({blockNumber:I,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof QK});h=!1;const S=N.transactions.find(({from:P,nonce:F})=>P===u.from&&F===u.nonce);if(!S||(d=await ft(t,OD,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e)))return;let O="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?O="repriced":S.from===S.to&&S.value===0n&&(O="cancelled"),_(()=>{var P;(P=v.onReplaced)==null||P.call(v,{reason:O,replacedTransaction:u,transaction:S,transactionReceipt:d}),v.resolve(d)})}catch(N){_(()=>v.reject(N))}}else _(()=>v.reject(x))}}})}),g}async function fCe(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Ju(n))}async function pCe(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function SQ(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new gm({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Mr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Mr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ft(t,vb,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ft(t,i$,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&wT(o.address,i.address))&&(a.nonce+=1)),a}async function gCe(t,e){const{account:n=t.account}=e;if(!n)throw new gm({docsPath:"/docs/eip7702/signAuthorization"});const r=Mr(n);if(!r.signAuthorization)throw new $S({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await SQ(t,e);return r.signAuthorization(s)}async function mCe(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new gm({docsPath:"/docs/actions/wallet/signTransaction"});const i=Mr(n);ym({account:i,...e});const o=await ft(t,vb,"getChainId")({});r!==null&&qK({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||bb;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:rt(o),from:i.address}]},{retryCount:0})}async function xQ(t,{account:e=t.account,message:n}){if(!e)throw new gm({docsPath:"/docs/actions/wallet/signMessage"});const r=Mr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Iw(n):n.raw instanceof Uint8Array?Ya(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function yCe(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new gm({docsPath:"/docs/actions/wallet/signTypedData"});const o=Mr(n),a={EIP712Domain:mQ({domain:r}),...e.types};if(gQ({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=HEe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function wCe(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Mr(a.account):t.account,l=ec({abi:n,args:s,functionName:o});try{const{data:u}=await ft(t,f1,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=bm({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Fg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function bCe(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:rt(e)}]},{retryCount:0})}let IQ=class extends GL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Yye(e);const r=i1(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Rw(i)}update(e){return Tw(this),this.iHash.update(e),this}digestInto(e){Tw(this),Kc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const NQ=(t,e,n)=>new IQ(t,e).update(n).digest();NQ.create=(t,e)=>new IQ(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vo=BigInt(0),Bi=BigInt(1),Mp=BigInt(2),vCe=BigInt(3),TQ=BigInt(4),RQ=BigInt(5),PQ=BigInt(8);function La(t,e){const n=t%e;return n>=vo?n:e+n}function ma(t,e,n){let r=t;for(;e-- >vo;)r*=r,r%=n;return r}function I4(t,e){if(t===vo)throw new Error("invert: expected non-zero number");if(e<=vo)throw new Error("invert: expected positive modulus, got "+e);let n=La(t,e),r=e,s=vo,i=Bi;for(;n!==vo;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Bi)throw new Error("invert: does not exist");return La(s,e)}function OQ(t,e){const n=(t.ORDER+Bi)/TQ,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function ECe(t,e){const n=(t.ORDER-RQ)/PQ,r=t.mul(e,Mp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Mp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function CCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Bi,n=0;for(;e%Mp===vo;)e/=Mp,n++;let r=Mp;const s=_T(t);for(;N4(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return OQ;let i=s.pow(r,e);const o=(e+Bi)/Mp;return function(c,l){if(c.is0(l))return l;if(N4(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Bi<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function _Ce(t){return t%TQ===vCe?OQ:t%PQ===RQ?ECe:CCe(t)}const ACe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function SCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=ACe.reduce((r,s)=>(r[s]="function",r),e);return f$(t,n),t}function xCe(t,e,n){if(n<vo)throw new Error("invalid exponent, negatives unsupported");if(n===vo)return t.ONE;if(n===Bi)return e;let r=t.ONE,s=e;for(;n>vo;)n&Bi&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Bi;return r}function kQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function N4(t,e){const n=(t.ORDER-Bi)/Mp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ICe(t,e){e!==void 0&&vC(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _T(t,e,n=!1,r={}){if(t<=vo)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=ICe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:mT(o),ZERO:vo,ONE:Bi,create:u=>La(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return vo<=u&&u<t},is0:u=>u===vo,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Bi)===Bi,neg:u=>La(-u,t),eql:(u,d)=>u===d,sqr:u=>La(u*u,t),add:(u,d)=>La(u+d,t),sub:(u,d)=>La(u-d,t),mul:(u,d)=>La(u*d,t),pow:(u,d)=>xCe(l,u,d),div:(u,d)=>La(u*I4(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>I4(u,t),sqrt:i||(u=>(c||(c=_Ce(t)),c(l,u))),toBytes:u=>n?OY(u,a):h$(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?PY(u):gT(u)},invertBatch:u=>kQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function DQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function MQ(t){const e=DQ(t);return e+Math.ceil(e/2)}function NCe(t,e,n=!1){const r=t.length,s=DQ(e),i=MQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?PY(t):gT(t),a=La(o,e-Bi)+Bi;return n?OY(a,s):h$(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lw=BigInt(0),Lp=BigInt(1);function _E(t,e){const n=e.negate();return t?n:e}function TCe(t,e,n){const r=o=>o.pz,s=kQ(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function LQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function YP(t,e){LQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=mT(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function T4(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Lp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function RCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function PCe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const QP=new WeakMap,$Q=new WeakMap;function JP(t){return $Q.get(t)||1}function R4(t){if(t!==Lw)throw new Error("invalid wNAF")}function OCe(t,e){return{constTimeNegate:_E,hasPrecomputes(n){return JP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Lw;)r&Lp&&(s=s.add(i)),i=i.double(),r>>=Lp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=YP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=YP(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=T4(s,c,a);s=l,d?o=o.add(_E(f,r[p])):i=i.add(_E(h,r[u]))}return R4(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=YP(n,e);for(let a=0;a<o.windows&&s!==Lw;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=T4(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return R4(s),i},getPrecomputes(n,r,s){let i=QP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),QP.set(r,i))),i},wNAFCached(n,r,s){const i=JP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=JP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){LQ(r,e),$Q.set(n,r),QP.delete(n)}}}function kCe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Lw||r>Lw;)n&Lp&&(i=i.add(s)),r&Lp&&(o=o.add(s)),s=s.double(),n>>=Lp,r>>=Lp;return{p1:i,p2:o}}function DCe(t,e,n,r){RCe(n,t),PCe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=zbe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=mT(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function P4(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return SCe(e),e}else return _T(t)}function MCe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Lw))throw new Error(`CURVE.${a} must be positive bigint`)}const r=P4(e.p,n.Fp),s=P4(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function O4(t){t.lowS!==void 0&&uI("lowS",t.lowS),t.prehash!==void 0&&uI("prehash",t.prehash)}class LCe extends Error{constructor(e=""){super(e)}}const Tu={Err:LCe,_tlv:{encode:(t,e)=>{const{Err:n}=Tu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=PA(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?PA(s.length/2|128):"";return PA(t)+i+s+e},decode(t,e){const{Err:n}=Tu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Tu;if(t<AE)throw new e("integer: negative integers are not allowed");let n=PA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Tu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return gT(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Tu,s=Na("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Tu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},AE=BigInt(0),SE=BigInt(1),$Ce=BigInt(2),kA=BigInt(3),UCe=BigInt(4);function BCe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function UQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Na("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function FCe(t,e={}){const{Fp:n,Fn:r}=MCe("weierstrass",t,e),{h:s,n:i}=t;f$(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,S,O){const{x:P,y:F}=S.toAffine(),q=n.toBytes(P);if(uI("isCompressed",O),O){a();const z=!n.isOdd(F);return Op(BQ(z),q)}else return Op(Uint8Array.of(4),q,n.toBytes(F))}function l(N){Kc(N);const S=n.BYTES,O=S+1,P=2*S+1,F=N.length,q=N[0],z=N.subarray(1);if(F===O&&(q===2||q===3)){const T=n.fromBytes(z);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const R=h(T);let U;try{U=n.sqrt(R)}catch(j){const Y=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}a();const k=n.isOdd(U);return(q&1)===1!==k&&(U=n.neg(U)),{x:T,y:U}}else if(F===P&&q===4){const T=n.fromBytes(z.subarray(S*0,S*1)),R=n.fromBytes(z.subarray(S*1,S*2));if(!f(T,R))throw new Error("bad point: is not on curve");return{x:T,y:R}}else throw new Error(`bad point: got length ${F}, expected compressed=${O} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=BCe(n,t.a,t.b);function f(N,S){const O=n.sqr(S),P=h(N);return n.eql(O,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,kA),UCe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(N,S,O=!1){if(!n.isValid(S)||O&&n.is0(S))throw new Error(`bad point coordinate ${N}`);return S}function y(N){if(!(N instanceof _))throw new Error("ProjectivePoint expected")}const b=p4((N,S)=>{const{px:O,py:P,pz:F}=N;if(n.eql(F,n.ONE))return{x:O,y:P};const q=N.is0();S==null&&(S=q?n.ONE:n.inv(F));const z=n.mul(O,S),T=n.mul(P,S),R=n.mul(F,S);if(q)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:z,y:T}}),v=p4(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:S,y:O}=N.toAffine();if(!n.isValid(S)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(S,O))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(N,S,O,P,F){return O=new _(n.mul(O.px,N),O.py,O.pz),S=_E(P,S),O=_E(F,O),S.add(O)}class _{constructor(S,O,P){this.px=w("x",S),this.py=w("y",O,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:O,y:P}=S||{};if(!S||!n.isValid(O)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof _)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(P)?_.ZERO:new _(O,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return TCe(_,"pz",S)}static fromBytes(S){return Kc(S),_.fromHex(S)}static fromHex(S){const O=_.fromAffine(d(Na("pointHex",S)));return O.assertValidity(),O}static fromPrivateKey(S){const O=UQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(O(S))}static msm(S,O){return DCe(_,r,S,O)}precompute(S=8,O=!0){return x.setWindowSize(this,S),O||this.multiply(kA),this}_setWindowSize(S){this.precompute(S)}assertValidity(){v(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:O,py:P,pz:F}=this,{px:q,py:z,pz:T}=S,R=n.eql(n.mul(O,T),n.mul(q,F)),U=n.eql(n.mul(P,T),n.mul(z,F));return R&&U}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:O}=t,P=n.mul(O,kA),{px:F,py:q,pz:z}=this;let T=n.ZERO,R=n.ZERO,U=n.ZERO,k=n.mul(F,F),M=n.mul(q,q),j=n.mul(z,z),Y=n.mul(F,q);return Y=n.add(Y,Y),U=n.mul(F,z),U=n.add(U,U),T=n.mul(S,U),R=n.mul(P,j),R=n.add(T,R),T=n.sub(M,R),R=n.add(M,R),R=n.mul(T,R),T=n.mul(Y,T),U=n.mul(P,U),j=n.mul(S,j),Y=n.sub(k,j),Y=n.mul(S,Y),Y=n.add(Y,U),U=n.add(k,k),k=n.add(U,k),k=n.add(k,j),k=n.mul(k,Y),R=n.add(R,k),j=n.mul(q,z),j=n.add(j,j),k=n.mul(j,Y),T=n.sub(T,k),U=n.mul(j,M),U=n.add(U,U),U=n.add(U,U),new _(T,R,U)}add(S){y(S);const{px:O,py:P,pz:F}=this,{px:q,py:z,pz:T}=S;let R=n.ZERO,U=n.ZERO,k=n.ZERO;const M=t.a,j=n.mul(t.b,kA);let Y=n.mul(O,q),ne=n.mul(P,z),le=n.mul(F,T),oe=n.add(O,P),ae=n.add(q,z);oe=n.mul(oe,ae),ae=n.add(Y,ne),oe=n.sub(oe,ae),ae=n.add(O,F);let ue=n.add(q,T);return ae=n.mul(ae,ue),ue=n.add(Y,le),ae=n.sub(ae,ue),ue=n.add(P,F),R=n.add(z,T),ue=n.mul(ue,R),R=n.add(ne,le),ue=n.sub(ue,R),k=n.mul(M,ae),R=n.mul(j,le),k=n.add(R,k),R=n.sub(ne,k),k=n.add(ne,k),U=n.mul(R,k),ne=n.add(Y,Y),ne=n.add(ne,Y),le=n.mul(M,le),ae=n.mul(j,ae),ne=n.add(ne,le),le=n.sub(Y,le),le=n.mul(M,le),ae=n.add(ae,le),Y=n.mul(ne,ae),U=n.add(U,Y),Y=n.mul(ue,ae),R=n.mul(oe,R),R=n.sub(R,Y),Y=n.mul(oe,ne),k=n.mul(ue,k),k=n.add(k,Y),new _(R,U,k)}subtract(S){return this.add(S.negate())}is0(){return this.equals(_.ZERO)}multiply(S){const{endo:O}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,F;const q=z=>x.wNAFCached(this,z,_.normalizeZ);if(O){const{k1neg:z,k1:T,k2neg:R,k2:U}=O.splitScalar(S),{p:k,f:M}=q(T),{p:j,f:Y}=q(U);F=M.add(Y),P=A(O.beta,k,j,z,R)}else{const{p:z,f:T}=q(S);P=z,F=T}return _.normalizeZ([P,F])[0]}multiplyUnsafe(S){const{endo:O}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===AE||P.is0())return _.ZERO;if(S===SE)return P;if(x.hasPrecomputes(this))return this.multiply(S);if(O){const{k1neg:F,k1:q,k2neg:z,k2:T}=O.splitScalar(S),{p1:R,p2:U}=kCe(_,P,q,T);return A(O.beta,R,U,F,z)}else return x.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,O,P){const F=this.multiplyUnsafe(O).add(S.multiplyUnsafe(P));return F.is0()?void 0:F}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===SE?!0:S?S(_,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===SE?this:S?S(_,this):this.multiplyUnsafe(s)}toBytes(S=!0){return uI("isCompressed",S),this.assertValidity(),u(_,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return EC(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const I=r.BITS,x=OCe(_,e.endo?Math.ceil(I/2):I);return _}function BQ(t){return Uint8Array.of(t?2:3)}function jCe(t,e,n={}){f$(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||r0e,s=e.hmac||((P,...F)=>NQ(e.hash,P,Op(...F))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const F=a>>SE;return P>F}function u(P){return l(P)?o.neg(P):P}function d(P,F){if(!o.isValidNot0(F))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor(F,q,z){d("r",F),d("s",q),this.r=F,this.s=q,z!=null&&(this.recovery=z),Object.freeze(this)}static fromCompact(F){const q=o.BYTES,z=Na("compactSignature",F,q*2);return new h(o.fromBytes(z.subarray(0,q)),o.fromBytes(z.subarray(q,q*2)))}static fromDER(F){const{r:q,s:z}=Tu.toSig(Na("DER",F));return new h(q,z)}assertValidity(){}addRecoveryBit(F){return new h(this.r,this.s,F)}recoverPublicKey(F){const q=i.ORDER,{r:z,s:T,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(a*$Ce<q&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const k=R===2||R===3?z+a:z;if(!i.isValid(k))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(k),j=t.fromHex(Op(BQ((R&1)===0),M)),Y=o.inv(k),ne=v(Na("msgHash",F)),le=o.create(-ne*Y),oe=o.create(T*Y),ae=t.BASE.multiplyUnsafe(le).add(j.multiplyUnsafe(oe));if(ae.is0())throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(F){if(F==="compact")return Op(o.toBytes(this.r),o.toBytes(this.s));if(F==="der")return HL(Tu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return EC(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return EC(this.toBytes("compact"))}}const f=UQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return NCe(r(MQ(P)),P)},precompute(P=8,F=t.BASE){return F.precompute(P,!1)}};function g(P,F=!0){return t.fromPrivateKey(P).toBytes(F)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const q=Na("key",P).length,z=i.BYTES,T=z+1,R=2*z+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===T))return q===T||q===R}function y(P,F,q=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w(F)===!1)throw new Error("second arg must be public key");return t.fromHex(F).multiply(f(P)).toBytes(q)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const F=gT(P),q=P.length*8-c;return q>0?F>>BigInt(q):F},v=e.bits2int_modN||function(P){return o.create(b(P))},A=mT(c);function _(P){return Wbe("num < 2^"+c,P,AE,A),o.toBytes(P)}function I(P,F,q=x){if(["recovered","canonical"].some(oe=>oe in q))throw new Error("sign() legacy options not supported");const{hash:z}=e;let{lowS:T,prehash:R,extraEntropy:U}=q;T==null&&(T=!0),P=Na("msgHash",P),O4(q),R&&(P=Na("prehashed msgHash",z(P)));const k=v(P),M=f(F),j=[_(M),_(k)];if(U!=null&&U!==!1){const oe=U===!0?r(i.BYTES):U;j.push(Na("extraEntropy",oe))}const Y=Op(...j),ne=k;function le(oe){const ae=b(oe);if(!o.isValidNot0(ae))return;const ue=o.inv(ae),tt=t.BASE.multiply(ae).toAffine(),Ne=o.create(tt.x);if(Ne===AE)return;const $e=o.create(ue*o.create(ne+Ne*M));if($e===AE)return;let st=(tt.x===Ne?0:2)|Number(tt.y&SE),Ot=$e;return T&&l($e)&&(Ot=u($e),st^=1),new h(Ne,Ot,st)}return{seed:Y,k2sig:le}}const x={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function S(P,F,q=x){const{seed:z,k2sig:T}=I(P,F,q);return Hbe(e.hash.outputLen,o.BYTES,s)(z,T)}t.BASE.precompute(8);function O(P,F,q,z=N){const T=P;F=Na("msgHash",F),q=Na("publicKey",q),O4(z);const{lowS:R,prehash:U,format:k}=z;if("strict"in z)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&!["compact","der","js"].includes(k))throw new Error('format must be "compact", "der" or "js"');const M=typeof T=="string"||zL(T),j=!M&&!k&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!M&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Y,ne;try{if(j)if(k===void 0||k==="js")Y=new h(T.r,T.s);else throw new Error("invalid format");if(M){try{k!=="compact"&&(Y=h.fromDER(T))}catch(Ot){if(!(Ot instanceof Tu.Err))throw Ot}!Y&&k!=="der"&&(Y=h.fromCompact(T))}ne=t.fromHex(q)}catch{return!1}if(!Y||R&&Y.hasHighS())return!1;U&&(F=e.hash(F));const{r:le,s:oe}=Y,ae=v(F),ue=o.inv(oe),tt=o.create(ae*ue),Ne=o.create(le*ue),$e=t.BASE.multiplyUnsafe(tt).add(ne.multiplyUnsafe(Ne));return $e.is0()?!1:o.create($e.x)===le}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:S,verify:O,utils:p,Point:t,Signature:h})}function WCe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=_T(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function zCe(t){const{CURVE:e,curveOpts:n}=WCe(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function HCe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function GCe(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=zCe(t),s=FCe(e,n),i=jCe(s,r,n);return HCe(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qCe(t,e){const n=r=>GCe({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const VCe=BigInt(1),BD=BigInt(2),k4=(t,e)=>(t+e/BD)/e;function KCe(t){const e=fI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ma(u,n,e)*u%e,h=ma(d,n,e)*u%e,f=ma(h,BD,e)*l%e,p=ma(f,s,e)*f%e,g=ma(p,i,e)*p%e,w=ma(g,a,e)*g%e,y=ma(w,c,e)*w%e,b=ma(y,a,e)*g%e,v=ma(b,n,e)*u%e,A=ma(v,o,e)*p%e,_=ma(A,r,e)*l%e,I=ma(_,BD,e);if(!FD.eql(FD.sqr(I),t))throw new Error("Cannot find square root");return I}const FD=_T(fI.p,void 0,void 0,{sqrt:KCe}),FQ=qCe({...fI,Fp:FD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=fI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-VCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=k4(i*t,e),c=k4(-r*t,e);let l=La(t-a*n-c*s,e),u=La(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},rY),YCe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:FQ},Symbol.toStringTag,{value:"Module"}));function QCe({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new FQ.Signature(ia(t),ia(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Ka(o)}async function S$(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Ql(o)?o:typeof o=="object"&&"r"in o&&"s"in o?QCe(o):ls(o),u=await(async()=>!r&&!s||KEe(l)?l:YEe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:ec({abi:c4,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:cT({abi:c4,args:[n,i,u],bytecode:mve}),...c},{data:g}=await ft(t,f1,"call")(p);return Sye(g??"0x0")}catch(p){try{if(wT(Ju(n),await FK({hash:i,signature:o})))return!0}catch{}if(p instanceof IY)return!1;throw p}}async function JCe(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=yQ(n);return S$(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function ZCe(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=FEe({message:o,primaryType:a,types:c,domain:l});return S$(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function XCe(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function e_e(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=as(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return yd(y,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let A,_=!1;const I=_b(async()=>{var x;if(!_){try{A=await ft(t,KY,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}_=!0;return}try{let N;if(A)N=await ft(t,bT,"getFilterChanges")({filter:A});else{const S=await ft(t,g1,"getBlockNumber")({});v&&v<S?N=await ft(t,JY,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:S,strict:w}):N=[],v=S}if(N.length===0)return;if(i)b.onLogs(N);else for(const S of N)b.onLogs([S])}catch(N){A&&N instanceof Ug&&(_=!1),(x=b.onError)==null||x.call(b,N)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await ft(t,CT,"uninstallFilter")({filter:A}),I()}})})():(()=>{const w=h??!1,y=as(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,v=()=>b=!1;return yd(y,{onLogs:l,onError:c},A=>((async()=>{try{const _=(()=>{if(t.transport.type==="fallback"){const N=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return N?N.value:t.transport}return t.transport})(),I=o?p1({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await _.subscribe({params:["logs",{address:r,topics:I}],onData(N){var O;if(!b)return;const S=N.result;try{const{eventName:P,args:F}=v$({abi:n,data:S.data,topics:S.topics,strict:h}),q=md(S,{args:F,eventName:P});A.onLogs([q])}catch(P){let F,q;if(P instanceof bC||P instanceof oT){if(h)return;F=P.abiItem.name,q=(O=P.abiItem.inputs)==null?void 0:O.some(T=>!("name"in T&&T.name))}const z=md(S,{args:q?[]:{},eventName:F});A.onLogs([z])}},onError(N){var S;(S=A.onError)==null||S.call(A,N)}});v=x,b||v()}catch(_){c==null||c(_)}})(),()=>v()))})()}async function jQ(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new gm({docsPath:"/docs/contract/writeContract"});const l=r?Mr(r):null,u=ec({abi:n,args:i,functionName:a});try{return await ft(t,u1,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Fg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function ra(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const BS="2.17.3",t_e=()=>`@wagmi/core@${BS}`;var WQ=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},pI,zQ;let Sd=class jD extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return t_e()}constructor(e,n={}){var i;super(),pI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof jD?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof jD&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return WQ(this,pI,"m",zQ).call(this,this,e)}};pI=new WeakSet,zQ=function t(e,n){return n!=null&&n(e)?e:e.cause?WQ(this,pI,"m",t).call(this,e.cause,n):e};class UC extends Sd{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class n_e extends Sd{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class r_e extends Sd{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class s_e extends Sd{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class i_e extends Sd{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class o_e extends Sd{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function FS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new n_e;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const WD=256;let DA=WD,MA;function HQ(t=11){if(!MA||DA+t>WD*2){MA="",DA=0;for(let e=0;e<WD;e++)MA+=(256+Math.random()*256|0).toString(16).substring(1)}return MA.substring(DA,DA+++t)}function GQ(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Mr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:HQ()};function y(b){return v=>{const A=v(b);for(const I in w)delete A[I];const _={...b,...A};return Object.assign(_,{extend:y(_)})}}return Object.assign(w,{extend:y(w)})}function x$({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=HQ();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:kEe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function a_e(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>x$({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function gI(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=c_e,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=x$({key:n,name:r,async request({method:g,params:w}){let y;const b=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const _=await A.request({method:g,params:w});return f({method:g,params:w,response:_,transport:A,status:"success"}),_}catch(_){if(f({error:_,method:g,params:w,transport:A,status:"error"}),i(_)||v===h.length-1||(y??(y=h.slice(v+1).some(I=>{const{include:x,exclude:N}=I({chain:c}).config.methods||{};return x?x.includes(g):N?!N.includes(g):!0})),!y))throw _;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};l_e({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function c_e(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Ow.code||t.code===Xr.code||kp.nodeMessage.test(t.message)||t.code===5e3))}function l_e({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-y,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(I=>I[w].latency),v=1-y.reduce((I,x)=>I+x,0)/y.length/f,A=u.map(I=>I[w].success),_=A.reduce((I,x)=>I+x,0)/A.length;return _===0?[0,w]:[l*v+c*_,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await dI(e),d()};d()}class u_e extends pe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Wa(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new u_e;const v=LEe(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return x$({key:s,methods:i,name:o,async request({method:A,params:_}){const I={method:A,params:_},{schedule:x}=WY({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>v.request({body:P}),sort:(P,F)=>P.id-F.id}),N=async P=>n?x(P):[await v.request({body:P})],[{error:S,result:O}]=await N(I);if(u)return{error:S,result:O};if(S)throw new e$({body:I,error:S,url:b});return O},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function d_e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(h_e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(f_e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const h_e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,f_e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function p_e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Ja(r.address,{strict:!1})||e&&!wT(r.address,e))return!1}catch{return!1}return!0}async function g_e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=d_e(s);if(!u.address||!p_e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=yQ(s);return S$(t,{address:u.address,hash:h,signature:a,...l})}function m_e(t){return{call:e=>f1(t,e),createAccessList:e=>VY(t,e),createBlockFilter:()=>$ve(t),createContractEventFilter:e=>KY(t,e),createEventFilter:e=>YY(t,e),createPendingTransactionFilter:()=>QY(t),estimateContractGas:e=>Bve(t,e),estimateGas:e=>dT(t,e),getBalance:e=>s$(t,e),getBlobBaseFee:()=>Fve(t),getBlock:e=>Fl(t,e),getBlockNumber:e=>g1(t,e),getBlockTransactionCount:e=>qve(t,e),getBytecode:e=>C4(t,e),getChainId:()=>vb(t),getCode:e=>C4(t,e),getContractEvents:e=>JY(t,e),getEip712Domain:e=>Qve(t,e),getEnsAddress:e=>Cve(t,e),getEnsAvatar:e=>Mve(t,e),getEnsName:e=>qY(t,e),getEnsResolver:e=>Lve(t,e),getEnsText:e=>GY(t,e),getFeeHistory:e=>Xve(t,e),estimateFeesPerGas:e=>iwe(t,e),getFilterChanges:e=>bT(t,e),getFilterLogs:e=>eEe(t,e),getGasPrice:()=>n$(t),getLogs:e=>C$(t,e),getProof:e=>hCe(t,e),estimateMaxPriorityFeePerGas:e=>swe(t,e),getStorageAt:e=>tEe(t,e),getTransaction:e=>vT(t,e),getTransactionConfirmations:e=>nEe(t,e),getTransactionCount:e=>i$(t,e),getTransactionReceipt:e=>OD(t,e),multicall:e=>XY(t,e),prepareTransactionRequest:e=>l1(t,e),readContract:e=>Xl(t,e),sendRawTransaction:e=>a$(t,e),simulate:e=>kD(t,e),simulateBlocks:e=>kD(t,e),simulateCalls:e=>XEe(t,e),simulateContract:e=>wCe(t,e),verifyMessage:e=>JCe(t,e),verifySiweMessage:e=>g_e(t,e),verifyTypedData:e=>ZCe(t,e),uninstallFilter:e=>CT(t,e),waitForTransactionReceipt:e=>AQ(t,e),watchBlocks:e=>tCe(t,e),watchBlockNumber:e=>bQ(t,e),watchContractEvent:e=>e_e(t,e),watchEvent:e=>nCe(t,e),watchPendingTransactions:e=>vQ(t,e)}}function y_e(t){return{addChain:e=>Nye(t,e),deployContract:e=>Iwe(t,e),getAddresses:()=>rCe(t),getCallsStatus:e=>_Q(t,e),getCapabilities:e=>iCe(t,e),getChainId:()=>vb(t),getPermissions:()=>sCe(t),prepareAuthorization:e=>SQ(t,e),prepareTransactionRequest:e=>l1(t,e),requestAddresses:()=>fCe(t),requestPermissions:e=>pCe(t,e),sendCalls:e=>oCe(t,e),sendRawTransaction:e=>a$(t,e),sendTransaction:e=>u1(t,e),showCallsStatus:e=>aCe(t,e),signAuthorization:e=>gCe(t,e),signMessage:e=>xQ(t,e),signTransaction:e=>mCe(t,e),signTypedData:e=>yCe(t,e),switchChain:e=>bCe(t,e),waitForCallsStatus:e=>cCe(t,e),watchAsset:e=>XCe(t,e),writeContract:e=>jQ(t,e)}}async function m1(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new o_e({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new r_e;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new i_e({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Mr(e.account??n.accounts[0]);if(o&&(o.address=Ju(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new s_e({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return GQ({account:o,chain:a,name:"Connector Client",transport:l=>a_e(c)({...l,retryCount:0})})}async function zD(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function w_e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await m1(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return ra(o,dT,"estimateGas")({...s,account:i})}function qQ(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(H0e[t])}function s0(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function b_e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return ra(o,XY,"multicall")({allowFailure:n,contracts:s,...i})}function VQ(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ra(s,Xl,"readContract")(r)}async function v_e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>b_e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof NY)throw c;const l=()=>o.map(u=>VQ(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function KQ(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await D4(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await D4(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=bK(Hl(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await ra(c,s$,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:mm(u,qQ(a)),symbol:d.nativeCurrency.symbol,value:u}}async function D4(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await v_e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=mm(c??"0",qQ(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function M4(t){return t.state.chainId}function If(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!If(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!If(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let ZP=[];function L4(t){const e=t.chains;return If(ZP,e)?ZP:(ZP=e,e)}function E_e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let LA=[];function bc(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||If(LA,e)?LA:(LA=e,e)}let XP=[];function $4(t){const e=t.connectors;return If(XP,e)?XP:(XP=e,e)}function C_e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ra(s,qY,"getEnsName")(r)}function HD(t,e={}){const n=E_e(t,e);return n==null?void 0:n.extend(m_e)}async function __e(t,e={}){return(await m1(t,e)).extend(y_e)}async function A_e(t,e){const{account:n,chainId:r,...s}=e,i=n??s0(t).address,o=t.getClient({chainId:r});return ra(o,l1,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let eO=!1;async function GD(t,e={}){var l,u;if(eO)return[];eO=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),eO=!1,a}async function S_e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await m1(t,{account:n??void 0,chainId:r,connector:s}),await ra(o,u1,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function x_e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await m1(t,{account:n,connector:r}),ra(i,xQ,"signMessage")({...s,...n?{account:n}:{}})}class nh extends Sd{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class I_e extends Sd{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function qD(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new I_e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new UC;return t.setState(a=>({...a,chainId:r})),i}function YQ(t,e){const{onChange:n}=e;return t.subscribe(()=>s0(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return If(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function N_e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function QQ(t,e){const{onChange:n}=e;return t.subscribe(()=>bc(t),n,{equalityFn:If})}function JQ(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function T_e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=ra(l,vQ,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function R_e(t,e){const{onChange:n}=e;return t.subscribe(()=>HD(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function ZQ(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await ra(i,AQ,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await ra(i,vT,"getTransaction")({hash:a.transactionHash}),d=await ra(i,f1,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?bK(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function XQ(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await m1(t,{account:n??void 0,chainId:r,connector:s}),await ra(o,jQ,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function RVe(t){return t}AT.type="injected";function AT(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...P_e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:AT.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new nh;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(A=>Ju(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===Xr.code)throw new Xr(A);if(A.code===uf.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>Ju(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(_=>{if(_.code===Xr.code)throw _;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===Xr.code?new Xr(A):A.code===uf.code?new uf(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new nh;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await uQ(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new nh;return(await l.request({method:"eth_accounts"})).map(d=>Ju(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new nh;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=jS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new nh}return!!(await hI(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new nh;const h=c.chains.find(b=>b.id===u);if(!h)throw new Jl(new UC);const f=new Promise(b=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:rt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,..._}=h.blockExplorers??{};let I;l!=null&&l.blockExplorerUrls?I=l.blockExplorerUrls:A&&(I=[A.url,...Object.values(_).map(S=>S.url)]);let x;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?x=l.rpcUrls:x=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const N={blockExplorerUrls:I,chainId:rt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Xr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new Xr(A)}throw v.code===Xr.code?new Xr(v):new Jl(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Ju(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const P_e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:jS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return jS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:jS(t,"isPhantom")}}};function jS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function O_e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function k_e(){const t=new Set;let e=[];const n=()=>O_e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const D_e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},M_e=D_e;function L_e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const VD=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return VD(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return VD(r)(n)}}}},$_e=(t,e)=>(n,r,s)=>{let i={storage:L_e(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return VD(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[A,_]=b;if(f=i.merge(_,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},U_e=$_e,U4=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},tO=t=>t?U4(t):U4;var eJ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var A=w.length,_;for(v=0;v<A;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),y){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(eJ);var B_e=eJ.exports;const F_e=lm(B_e);class j_e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new F_e})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function W_e(t){return new j_e(t)}function z_e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function B4(t,e){return t.slice(0,e).join(".")||"."}function F4(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function H_e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=F4(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=F4(s,c);if(u!==0)return r?e.call(this,a,c,B4(i,u)):`[ref=${B4(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function G_e(t,e,n,r){return JSON.stringify(t,H_e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function q_e(t){const{deserialize:e=z_e,key:n="wagmi",serialize:r=G_e,storage:s=tJ}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const tJ={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function V_e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:tJ;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const KD=256;let $A=KD,UA;function K_e(t=11){if(!UA||$A+t>KD*2){UA="",$A=0;for(let e=0;e<KD;e++)UA+=(256+Math.random()*256|0).toString(16).substring(1)}return UA.substring($A,$A+++t)}function nJ(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=q_e({storage:V_e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?k_e():void 0,a=tO(()=>i.chains),c=tO(()=>{const _=[],I=new Set;for(const x of i.connectors??[]){const N=l(x);if(_.push(N),!s&&N.rdns){const S=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const O of S)I.add(O)}}if(!s&&o){const x=o.getProviders();for(const N of x)I.has(N.info.rdns)||_.push(l(u(N)))}return _});function l(_){var N;const I=W_e(K_e()),x={..._({emitter:I,chains:a.getState(),storage:n,transports:i.transports}),emitter:I,uid:I.uid};return I.on("connect",v),(N=x.setup)==null||N.call(x),x}function u(_){const{info:I}=_,x=_.provider;return AT({target:{...I,id:I.rdns,provider:x}})}const d=new Map;function h(_={}){const I=_.chainId??w.getState().chainId,x=a.getState().find(S=>S.id===I);if(_.chainId&&!x)throw new UC;{const S=d.get(w.getState().chainId);if(S&&!x)return S;if(!x)throw new UC}{const S=d.get(I);if(S)return S}let N;if(i.client)N=i.client({chain:x});else{const S=x.id,O=a.getState().map(q=>q.id),P={},F=Object.entries(i);for(const[q,z]of F)if(!(q==="chains"||q==="client"||q==="connectors"||q==="transports"))if(typeof z=="object")if(S in z)P[q]=z[S];else{if(O.some(R=>R in z))continue;P[q]=z}else P[q]=z;N=GQ({...P,chain:x,batch:P.batch??{multicall:!0},transport:q=>i.transports[S]({...q,connectors:c})})}return d.set(I,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";BS.startsWith(g)?p=Number.parseInt(BS.replace(g,"")):p=Number.parseInt(BS.split(".")[0]??"0");const w=tO(M_e(n?U_e(f,{migrate(_,I){if(I===p)return _;const x=f(),N=y(_,x.chainId);return{...x,chainId:N}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([I,x])=>{const{id:N,name:S,type:O,uid:P}=x.connector;return[I,{...x,connector:{id:N,name:S,type:O,uid:P}}]})},chainId:_.chainId,current:_.current}},merge(_,I){typeof _=="object"&&_&&"status"in _&&delete _.status;const x=y(_,I.chainId);return{...I,..._,chainId:x}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(_,I){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(x=>x.id===_.chainId)?_.chainId:I}r&&w.subscribe(({connections:_,current:I})=>{var x;return I?(x=_.get(I))==null?void 0:x.chainId:void 0},_=>{if(a.getState().some(x=>x.id===_))return w.setState(x=>({...x,chainId:_??x.chainId}))}),o==null||o.subscribe(_=>{const I=new Set,x=new Set;for(const S of c.getState())if(I.add(S.id),S.rdns){const O=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of O)x.add(P)}const N=[];for(const S of _){if(x.has(S.info.rdns))continue;const O=l(u(S));I.has(O.id)||N.push(O)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...N],!0)});function b(_){w.setState(I=>{const x=I.connections.get(_.uid);return x?{...I,connections:new Map(I.connections).set(_.uid,{accounts:_.accounts??x.accounts,chainId:_.chainId??x.chainId,connector:x.connector})}:I})}function v(_){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(I=>{const x=c.getState().find(N=>N.uid===_.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...I,connections:new Map(I.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:x}),current:_.uid,status:"connected"}):I})}function A(_){w.setState(I=>{const x=I.connections.get(_.uid);if(x){const S=x.connector;S.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),S.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(I.connections.delete(_.uid),I.connections.size===0)return{...I,connections:new Map,current:null,status:"disconnected"};const N=I.connections.values().next().value;return{...I,connections:new Map(I.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(_){let I;typeof _=="function"?I=_(w.getState()):I=_;const x=f();typeof I!="object"&&(I=x),Object.keys(x).some(S=>!(S in I))&&(I=x),w.setState(I,!0)},subscribe(_,I,x){return w.subscribe(_,I,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const I=typeof _=="function"?_(a.getState()):_;if(I.length!==0)return a.setState(I,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:b,connect:v,disconnect:A}}}}function Y_e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?GD(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Q_e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Y_e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const rJ=D.createContext(void 0);function J_e(t){const{children:e,config:n}=t,r={value:n};return D.createElement(Q_e,t,D.createElement(rJ.Provider,r,e))}const Z_e="2.15.6",X_e=()=>`wagmi@${Z_e}`;let e1e=class extends Sd{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return X_e()}};class t1e extends e1e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Hi(t={}){const e=t.config??D.useContext(rJ);if(!e)throw new t1e;return e}function n1e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var sJ={exports:{}},iJ={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ST=D,r1e=gV;function s1e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var i1e=typeof Object.is=="function"?Object.is:s1e,o1e=r1e.useSyncExternalStore,a1e=ST.useRef,c1e=ST.useEffect,l1e=ST.useMemo,u1e=ST.useDebugValue;iJ.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=a1e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=l1e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,i1e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=o1e(t,i[0],i[1]);return c1e(function(){o.hasValue=!0,o.value=a},[a]),u1e(a),a};sJ.exports=iJ;var oJ=sJ.exports;const nO=t=>typeof t=="object"&&!Array.isArray(t);function d1e(t,e,n=e,r=If){const s=D.useRef([]),i=oJ.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(nO(o)&&nO(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(nO(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function Ab(t={}){const e=Hi(t);return d1e(n=>YQ(e,{onChange:n}),()=>s0(e))}var Sb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zg=typeof window>"u"||"Deno"in globalThis;function Ni(){}function h1e(t,e){return typeof t=="function"?t(e):t}function YD(t){return typeof t=="number"&&t>=0&&t!==1/0}function aJ(t,e){return Math.max(t+(e||0)-Date.now(),0)}function df(t,e){return typeof t=="function"?t(e):t}function $a(t,e){return typeof t=="function"?t(e):t}function j4(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==I$(o,e.options))return!1}else if(!BC(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function W4(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Hg(e.options.mutationKey)!==Hg(i))return!1}else if(!BC(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function I$(t,e){return((e==null?void 0:e.queryKeyHashFn)||Hg)(t)}function Hg(t){return JSON.stringify(t,(e,n)=>QD(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function BC(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>BC(t[n],e[n])):!1}function N$(t,e){if(t===e)return t;const n=z4(t)&&z4(e);if(n||QD(t)&&QD(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=N$(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function mI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function z4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function QD(t){if(!H4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!H4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function H4(t){return Object.prototype.toString.call(t)==="[object Object]"}function f1e(t){return new Promise(e=>{setTimeout(e,t)})}function JD(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?N$(t,e):e}function p1e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function g1e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var T$=Symbol();function cJ(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===T$?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function lJ(t,e){return typeof t=="function"?t(...e):!!t}var zp,dh,g0,az,m1e=(az=class extends Sb{constructor(){super();Q(this,zp);Q(this,dh);Q(this,g0);$(this,g0,e=>{if(!zg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){C(this,dh)||this.setEventListener(C(this,g0))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,dh))==null||e.call(this),$(this,dh,void 0))}setEventListener(e){var n;$(this,g0,e),(n=C(this,dh))==null||n.call(this),$(this,dh,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){C(this,zp)!==e&&($(this,zp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof C(this,zp)=="boolean"?C(this,zp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zp=new WeakMap,dh=new WeakMap,g0=new WeakMap,az),R$=new m1e,m0,hh,y0,cz,y1e=(cz=class extends Sb{constructor(){super();Q(this,m0,!0);Q(this,hh);Q(this,y0);$(this,y0,e=>{if(!zg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){C(this,hh)||this.setEventListener(C(this,y0))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,hh))==null||e.call(this),$(this,hh,void 0))}setEventListener(e){var n;$(this,y0,e),(n=C(this,hh))==null||n.call(this),$(this,hh,e(this.setOnline.bind(this)))}setOnline(e){C(this,m0)!==e&&($(this,m0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return C(this,m0)}},m0=new WeakMap,hh=new WeakMap,y0=new WeakMap,cz),yI=new y1e;function ZD(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function w1e(t){return Math.min(1e3*2**t,3e4)}function uJ(t){return(t??"online")==="online"?yI.isOnline():!0}var dJ=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function rO(t){return t instanceof dJ}function hJ(t){let e=!1,n=0,r=!1,s;const i=ZD(),o=g=>{var w;r||(h(new dJ(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>R$.isFocused()&&(t.networkMode==="always"||yI.isOnline())&&t.canRun(),u=()=>uJ(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var I;if(r)return;const b=t.retry??(zg?0:3),v=t.retryDelay??w1e,A=typeof v=="function"?v(n,y):v,_=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!_){h(y);return}n++,(I=t.onFail)==null||I.call(t,n,y),f1e(A).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var b1e=t=>setTimeout(t,0);function v1e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=b1e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var rs=v1e(),Hp,lz,fJ=(lz=class{constructor(){Q(this,Hp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),YD(this.gcTime)&&$(this,Hp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(zg?1/0:5*60*1e3))}clearGcTimeout(){C(this,Hp)&&(clearTimeout(C(this,Hp)),$(this,Hp,void 0))}},Hp=new WeakMap,lz),w0,Gp,Ta,qp,ci,I_,Vp,Ec,_u,uz,E1e=(uz=class extends fJ{constructor(e){super();Q(this,Ec);Q(this,w0);Q(this,Gp);Q(this,Ta);Q(this,qp);Q(this,ci);Q(this,I_);Q(this,Vp);$(this,Vp,!1),$(this,I_,e.defaultOptions),this.setOptions(e.options),this.observers=[],$(this,qp,e.client),$(this,Ta,C(this,qp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,$(this,w0,C1e(this.options)),this.state=e.state??C(this,w0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=C(this,ci))==null?void 0:e.promise}setOptions(e){this.options={...C(this,I_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,Ta).remove(this)}setData(e,n){const r=JD(this.state.data,e,this.options);return he(this,Ec,_u).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){he(this,Ec,_u).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=C(this,ci))==null?void 0:r.promise;return(s=C(this,ci))==null||s.cancel(e),n?n.then(Ni).catch(Ni):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,w0))}isActive(){return this.observers.some(e=>$a(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===T$||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>df(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!aJ(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,ci))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,ci))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),C(this,Ta).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(C(this,ci)&&(C(this,Vp)?C(this,ci).cancel({revert:!0}):C(this,ci).cancelRetry()),this.scheduleGc()),C(this,Ta).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||he(this,Ec,_u).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(C(this,ci))return C(this,ci).continueRetry(),C(this,ci).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>($(this,Vp,!0),r.signal)})},i=()=>{const h=cJ(this.options,n),p=(()=>{const g={client:C(this,qp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return $(this,Vp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:C(this,qp),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),$(this,Gp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&he(this,Ec,_u).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;rO(h)&&h.silent||he(this,Ec,_u).call(this,{type:"error",error:h}),rO(h)||((p=(f=C(this,Ta).config).onError)==null||p.call(f,h,this),(w=(g=C(this,Ta).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return $(this,ci,hJ({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=C(this,Ta).config).onSuccess)==null||p.call(f,h,this),(w=(g=C(this,Ta).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{he(this,Ec,_u).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{he(this,Ec,_u).call(this,{type:"pause"})},onContinue:()=>{he(this,Ec,_u).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),C(this,ci).start()}},w0=new WeakMap,Gp=new WeakMap,Ta=new WeakMap,qp=new WeakMap,ci=new WeakMap,I_=new WeakMap,Vp=new WeakMap,Ec=new WeakSet,_u=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...pJ(r.data,this.options),fetchMeta:e.meta??null};case"success":return $(this,Gp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return rO(s)&&s.revert&&C(this,Gp)?{...C(this,Gp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),rs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),C(this,Ta).notify({query:this,type:"updated",action:e})})},uz);function pJ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uJ(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function C1e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ml,dz,_1e=(dz=class extends Sb{constructor(e={}){super();Q(this,ml);this.config=e,$(this,ml,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??I$(s,n);let o=this.get(i);return o||(o=new E1e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){C(this,ml).has(e.queryHash)||(C(this,ml).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=C(this,ml).get(e.queryHash);n&&(e.destroy(),n===e&&C(this,ml).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return C(this,ml).get(e)}getAll(){return[...C(this,ml).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>j4(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>j4(e,r)):n}notify(e){rs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){rs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ml=new WeakMap,dz),yl,_i,Kp,wl,Jd,hz,A1e=(hz=class extends fJ{constructor(e){super();Q(this,wl);Q(this,yl);Q(this,_i);Q(this,Kp);this.mutationId=e.mutationId,$(this,_i,e.mutationCache),$(this,yl,[]),this.state=e.state||gJ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){C(this,yl).includes(e)||(C(this,yl).push(e),this.clearGcTimeout(),C(this,_i).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){$(this,yl,C(this,yl).filter(n=>n!==e)),this.scheduleGc(),C(this,_i).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){C(this,yl).length||(this.state.status==="pending"?this.scheduleGc():C(this,_i).remove(this))}continue(){var e;return((e=C(this,Kp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,v,A,_,I,x,N;const n=()=>{he(this,wl,Jd).call(this,{type:"continue"})};$(this,Kp,hJ({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,O)=>{he(this,wl,Jd).call(this,{type:"failed",failureCount:S,error:O})},onPause:()=>{he(this,wl,Jd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,_i).canRun(this)}));const r=this.state.status==="pending",s=!C(this,Kp).canStart();try{if(r)n();else{he(this,wl,Jd).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=C(this,_i).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&he(this,wl,Jd).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const S=await C(this,Kp).start();return await((u=(l=C(this,_i).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=C(this,_i).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),he(this,wl,Jd).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=C(this,_i).config).onError)==null?void 0:b.call(y,S,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,S,e,this.state.context)),await((I=(_=C(this,_i).config).onSettled)==null?void 0:I.call(_,void 0,S,this.state.variables,this.state.context,this)),await((N=(x=this.options).onSettled)==null?void 0:N.call(x,void 0,S,e,this.state.context)),S}finally{he(this,wl,Jd).call(this,{type:"error",error:S})}}finally{C(this,_i).runNext(this)}}},yl=new WeakMap,_i=new WeakMap,Kp=new WeakMap,wl=new WeakSet,Jd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rs.batch(()=>{C(this,yl).forEach(r=>{r.onMutationUpdate(e)}),C(this,_i).notify({mutation:this,type:"updated",action:e})})},hz);function gJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ou,Cc,N_,fz,S1e=(fz=class extends Sb{constructor(e={}){super();Q(this,Ou);Q(this,Cc);Q(this,N_);this.config=e,$(this,Ou,new Set),$(this,Cc,new Map),$(this,N_,0)}build(e,n,r){const s=new A1e({mutationCache:this,mutationId:++Td(this,N_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){C(this,Ou).add(e);const n=BA(e);if(typeof n=="string"){const r=C(this,Cc).get(n);r?r.push(e):C(this,Cc).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(C(this,Ou).delete(e)){const n=BA(e);if(typeof n=="string"){const r=C(this,Cc).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&C(this,Cc).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=BA(e);if(typeof n=="string"){const r=C(this,Cc).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=BA(e);if(typeof n=="string"){const s=(r=C(this,Cc).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rs.batch(()=>{C(this,Ou).forEach(e=>{this.notify({type:"removed",mutation:e})}),C(this,Ou).clear(),C(this,Cc).clear()})}getAll(){return Array.from(C(this,Ou))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>W4(n,r))}findAll(e={}){return this.getAll().filter(n=>W4(e,n))}notify(e){rs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return rs.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ni))))}},Ou=new WeakMap,Cc=new WeakMap,N_=new WeakMap,fz);function BA(t){var e;return(e=t.options.scope)==null?void 0:e.id}function G4(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=cJ(e.options,e.fetchOptions),b=async(v,A,_)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:A,direction:_?"backward":"forward",meta:e.options.meta};return w(P),P})(),N=await y(x),{maxPages:S}=e.options,O=_?g1e:p1e;return{pages:O(v.pages,N,S),pageParams:O(v.pageParams,A,S)}};if(s&&i.length){const v=s==="backward",A=v?x1e:q4,_={pages:i,pageParams:o},I=A(r,_);a=await b(_,I,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:q4(r,a);if(c>0&&A==null)break;a=await b(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function q4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function x1e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Nr,fh,ph,b0,v0,gh,E0,C0,pz,I1e=(pz=class{constructor(t={}){Q(this,Nr);Q(this,fh);Q(this,ph);Q(this,b0);Q(this,v0);Q(this,gh);Q(this,E0);Q(this,C0);$(this,Nr,t.queryCache||new _1e),$(this,fh,t.mutationCache||new S1e),$(this,ph,t.defaultOptions||{}),$(this,b0,new Map),$(this,v0,new Map),$(this,gh,0)}mount(){Td(this,gh)._++,C(this,gh)===1&&($(this,E0,R$.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,Nr).onFocus())})),$(this,C0,yI.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,Nr).onOnline())})))}unmount(){var t,e;Td(this,gh)._--,C(this,gh)===0&&((t=C(this,E0))==null||t.call(this),$(this,E0,void 0),(e=C(this,C0))==null||e.call(this),$(this,C0,void 0))}isFetching(t){return C(this,Nr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return C(this,fh).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,Nr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=C(this,Nr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(df(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return C(this,Nr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=C(this,Nr).get(r.queryHash),i=s==null?void 0:s.state.data,o=h1e(e,i);if(o!==void 0)return C(this,Nr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return rs.batch(()=>C(this,Nr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,Nr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=C(this,Nr);rs.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=C(this,Nr);return rs.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=rs.batch(()=>C(this,Nr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ni).catch(Ni)}invalidateQueries(t,e={}){return rs.batch(()=>(C(this,Nr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=rs.batch(()=>C(this,Nr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ni)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ni)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=C(this,Nr).build(this,e);return n.isStaleByTime(df(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ni).catch(Ni)}fetchInfiniteQuery(t){return t.behavior=G4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ni).catch(Ni)}ensureInfiniteQueryData(t){return t.behavior=G4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return yI.isOnline()?C(this,fh).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,Nr)}getMutationCache(){return C(this,fh)}getDefaultOptions(){return C(this,ph)}setDefaultOptions(t){$(this,ph,t)}setQueryDefaults(t,e){C(this,b0).set(Hg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...C(this,b0).values()],n={};return e.forEach(r=>{BC(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){C(this,v0).set(Hg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...C(this,v0).values()],n={};return e.forEach(r=>{BC(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...C(this,ph).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=I$(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===T$&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...C(this,ph).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){C(this,Nr).clear(),C(this,fh).clear()}},Nr=new WeakMap,fh=new WeakMap,ph=new WeakMap,b0=new WeakMap,v0=new WeakMap,gh=new WeakMap,E0=new WeakMap,C0=new WeakMap,pz),io,rn,T_,Ai,Yp,_0,mh,yh,R_,A0,S0,Qp,Jp,wh,x0,Nn,Fv,XD,e3,t3,n3,r3,s3,i3,mJ,gz,N1e=(gz=class extends Sb{constructor(e,n){super();Q(this,Nn);Q(this,io);Q(this,rn);Q(this,T_);Q(this,Ai);Q(this,Yp);Q(this,_0);Q(this,mh);Q(this,yh);Q(this,R_);Q(this,A0);Q(this,S0);Q(this,Qp);Q(this,Jp);Q(this,wh);Q(this,x0,new Set);this.options=n,$(this,io,e),$(this,yh,null),$(this,mh,ZD()),this.options.experimental_prefetchInRender||C(this,mh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,rn).addObserver(this),V4(C(this,rn),this.options)?he(this,Nn,Fv).call(this):this.updateResult(),he(this,Nn,n3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return o3(C(this,rn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return o3(C(this,rn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,he(this,Nn,r3).call(this),he(this,Nn,s3).call(this),C(this,rn).removeObserver(this)}setOptions(e){const n=this.options,r=C(this,rn);if(this.options=C(this,io).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $a(this.options.enabled,C(this,rn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");he(this,Nn,i3).call(this),C(this,rn).setOptions(this.options),n._defaulted&&!mI(this.options,n)&&C(this,io).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,rn),observer:this});const s=this.hasListeners();s&&K4(C(this,rn),r,this.options,n)&&he(this,Nn,Fv).call(this),this.updateResult(),s&&(C(this,rn)!==r||$a(this.options.enabled,C(this,rn))!==$a(n.enabled,C(this,rn))||df(this.options.staleTime,C(this,rn))!==df(n.staleTime,C(this,rn)))&&he(this,Nn,XD).call(this);const i=he(this,Nn,e3).call(this);s&&(C(this,rn)!==r||$a(this.options.enabled,C(this,rn))!==$a(n.enabled,C(this,rn))||i!==C(this,wh))&&he(this,Nn,t3).call(this,i)}getOptimisticResult(e){const n=C(this,io).getQueryCache().build(C(this,io),e),r=this.createResult(n,e);return R1e(this,r)&&($(this,Ai,r),$(this,_0,this.options),$(this,Yp,C(this,rn).state)),r}getCurrentResult(){return C(this,Ai)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){C(this,x0).add(e)}getCurrentQuery(){return C(this,rn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=C(this,io).defaultQueryOptions(e),r=C(this,io).getQueryCache().build(C(this,io),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return he(this,Nn,Fv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,Ai)))}createResult(e,n){var S;const r=C(this,rn),s=this.options,i=C(this,Ai),o=C(this,Yp),a=C(this,_0),l=e!==r?e.state:C(this,T_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),P=!O&&V4(e,n),F=O&&K4(e,r,n,s);(P||F)&&(d={...d,...pJ(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,y=!0):O=typeof n.placeholderData=="function"?n.placeholderData((S=C(this,S0))==null?void 0:S.state.data,C(this,S0)):n.placeholderData,O!==void 0&&(w="success",f=JD(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===C(this,R_))f=C(this,A0);else try{$(this,R_,n.select),f=n.select(f),f=JD(i==null?void 0:i.data,f,n),$(this,A0,f),$(this,yh,null)}catch(O){$(this,yh,O)}C(this,yh)&&(p=C(this,yh),f=C(this,A0),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",A=w==="error",_=v&&b,I=f!==void 0,N={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:A,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:A&&!I,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&I,isStale:P$(e,n),refetch:this.refetch,promise:C(this,mh),isEnabled:$a(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=q=>{N.status==="error"?q.reject(N.error):N.data!==void 0&&q.resolve(N.data)},P=()=>{const q=$(this,mh,N.promise=ZD());O(q)},F=C(this,mh);switch(F.status){case"pending":e.queryHash===r.queryHash&&O(F);break;case"fulfilled":(N.status==="error"||N.data!==F.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==F.reason)&&P();break}}return N}updateResult(){const e=C(this,Ai),n=this.createResult(C(this,rn),this.options);if($(this,Yp,C(this,rn).state),$(this,_0,this.options),C(this,Yp).data!==void 0&&$(this,S0,C(this,rn)),mI(n,e))return;$(this,Ai,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!C(this,x0).size)return!0;const o=new Set(i??C(this,x0));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,Ai)).some(a=>{const c=a;return C(this,Ai)[c]!==e[c]&&o.has(c)})};he(this,Nn,mJ).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&he(this,Nn,n3).call(this)}},io=new WeakMap,rn=new WeakMap,T_=new WeakMap,Ai=new WeakMap,Yp=new WeakMap,_0=new WeakMap,mh=new WeakMap,yh=new WeakMap,R_=new WeakMap,A0=new WeakMap,S0=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,wh=new WeakMap,x0=new WeakMap,Nn=new WeakSet,Fv=function(e){he(this,Nn,i3).call(this);let n=C(this,rn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ni)),n},XD=function(){he(this,Nn,r3).call(this);const e=df(this.options.staleTime,C(this,rn));if(zg||C(this,Ai).isStale||!YD(e))return;const r=aJ(C(this,Ai).dataUpdatedAt,e)+1;$(this,Qp,setTimeout(()=>{C(this,Ai).isStale||this.updateResult()},r))},e3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,rn)):this.options.refetchInterval)??!1},t3=function(e){he(this,Nn,s3).call(this),$(this,wh,e),!(zg||$a(this.options.enabled,C(this,rn))===!1||!YD(C(this,wh))||C(this,wh)===0)&&$(this,Jp,setInterval(()=>{(this.options.refetchIntervalInBackground||R$.isFocused())&&he(this,Nn,Fv).call(this)},C(this,wh)))},n3=function(){he(this,Nn,XD).call(this),he(this,Nn,t3).call(this,he(this,Nn,e3).call(this))},r3=function(){C(this,Qp)&&(clearTimeout(C(this,Qp)),$(this,Qp,void 0))},s3=function(){C(this,Jp)&&(clearInterval(C(this,Jp)),$(this,Jp,void 0))},i3=function(){const e=C(this,io).getQueryCache().build(C(this,io),this.options);if(e===C(this,rn))return;const n=C(this,rn);$(this,rn,e),$(this,T_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},mJ=function(e){rs.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(C(this,Ai))}),C(this,io).getQueryCache().notify({query:C(this,rn),type:"observerResultsUpdated"})})},gz);function T1e(t,e){return $a(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function V4(t,e){return T1e(t,e)||t.state.data!==void 0&&o3(t,e,e.refetchOnMount)}function o3(t,e,n){if($a(e.enabled,t)!==!1&&df(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&P$(t,e)}return!1}function K4(t,e,n,r){return(t!==e||$a(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&P$(t,n)}function P$(t,e){return $a(e.enabled,t)!==!1&&t.isStaleByTime(df(e.staleTime,t))}function R1e(t,e){return!mI(t.getCurrentResult(),e)}var bh,vh,oo,ku,ld,WS,a3,mz,P1e=(mz=class extends Sb{constructor(n,r){super();Q(this,ld);Q(this,bh);Q(this,vh);Q(this,oo);Q(this,ku);$(this,bh,n),this.setOptions(r),this.bindMethods(),he(this,ld,WS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=C(this,bh).defaultMutationOptions(n),mI(this.options,r)||C(this,bh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,oo),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Hg(r.mutationKey)!==Hg(this.options.mutationKey)?this.reset():((s=C(this,oo))==null?void 0:s.state.status)==="pending"&&C(this,oo).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=C(this,oo))==null||n.removeObserver(this)}onMutationUpdate(n){he(this,ld,WS).call(this),he(this,ld,a3).call(this,n)}getCurrentResult(){return C(this,vh)}reset(){var n;(n=C(this,oo))==null||n.removeObserver(this),$(this,oo,void 0),he(this,ld,WS).call(this),he(this,ld,a3).call(this)}mutate(n,r){var s;return $(this,ku,r),(s=C(this,oo))==null||s.removeObserver(this),$(this,oo,C(this,bh).getMutationCache().build(C(this,bh),this.options)),C(this,oo).addObserver(this),C(this,oo).execute(n)}},bh=new WeakMap,vh=new WeakMap,oo=new WeakMap,ku=new WeakMap,ld=new WeakSet,WS=function(){var r;const n=((r=C(this,oo))==null?void 0:r.state)??gJ();$(this,vh,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},a3=function(n){rs.batch(()=>{var r,s,i,o,a,c,l,u;if(C(this,ku)&&this.hasListeners()){const d=C(this,vh).variables,h=C(this,vh).context;(n==null?void 0:n.type)==="success"?((s=(r=C(this,ku)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=C(this,ku)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=C(this,ku)).onError)==null||c.call(a,n.error,d,h),(u=(l=C(this,ku)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(C(this,vh))})})},mz);function O1e(t,e){return N$(t,e)}function k1e(t){return JSON.stringify(t,(e,n)=>D1e(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function D1e(t){if(!Y4(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Y4(n)||!n.hasOwnProperty("isPrototypeOf"))}function Y4(t){return Object.prototype.toString.call(t)==="[object Object]"}function y1(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:v,enabled:A,notifyOnChangeProps:_,placeholderData:I,refetchInterval:x,refetchIntervalInBackground:N,refetchOnMount:S,refetchOnReconnect:O,refetchOnWindowFocus:P,retryOnMount:F,select:q,staleTime:z,suspense:T,throwOnError:R,config:U,connector:k,query:M,...j}=t;return j}function M1e(t){return{mutationFn(e){return FS(t,e)},mutationKey:["connect"]}}function L1e(t){return{mutationFn(e){return zD(t,e)},mutationKey:["disconnect"]}}function $1e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return await KQ(t,{...i,address:r})??null},queryKey:U1e(e)}}function U1e(t={}){return["balance",y1(t)]}function B1e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return C_e(t,{...i,address:r})},queryKey:F1e(e)}}function F1e(t={}){return["ensName",y1(t)]}function j1e(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return __e(t,{...o,connector:r})},queryKey:W1e(e)}}function W1e(t={}){const{connector:e,...n}=t;return["walletClient",{...y1(n),connectorUid:e==null?void 0:e.uid}]}function z1e(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return VQ(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:H1e(e)}}function H1e(t={}){const{abi:e,...n}=t;return["readContract",y1(n)]}function G1e(t){return{mutationFn(e){return qD(t,e)},mutationKey:["switchChain"]}}function q1e(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return ZQ(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:V1e(e)}}function V1e(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",y1(n)]}function K1e(t){return{mutationFn(e){return XQ(t,e)},mutationKey:["writeContract"]}}var yJ=D.createContext(void 0),O$=t=>{const e=D.useContext(yJ);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Y1e=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(yJ.Provider,{value:t,children:e})),wJ=D.createContext(!1),Q1e=()=>D.useContext(wJ);wJ.Provider;function J1e(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Z1e=D.createContext(J1e()),X1e=()=>D.useContext(Z1e),eAe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},tAe=t=>{D.useEffect(()=>{t.clearReset()},[t])},nAe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||lJ(n,[t.error,r])),rAe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},sAe=(t,e)=>t.isLoading&&t.isFetching&&!e,iAe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Q4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function oAe(t,e,n){var d,h,f,p,g;const r=Q1e(),s=X1e(),i=O$(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",rAe(o),eAe(o,s),tAe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(w=>{const y=u?c.subscribe(rs.batchCalls(w)):Ni;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),iAe(o,l))throw Q4(o,c,s);if(nAe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!zg&&sAe(l,r)){const w=a?Q4(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(Ni).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function aAe(t,e){return oAe(t,N1e)}function xT(t,e){const n=O$(),[r]=D.useState(()=>new P1e(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(rs.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(Ni)},[r]);if(s.error&&lJ(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function w1(t){const e=aAe({...t,queryKeyHashFn:k1e});return e.queryKey=t.queryKey,e}function tc(t={}){const e=Hi(t);return D.useSyncExternalStore(n=>N_e(e,{onChange:n}),()=>M4(e),()=>M4(e))}function cAe(t={}){const{address:e,query:n={}}=t,r=Hi(t),s=tc({config:r}),i=$1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return w1({...n,...i,enabled:o})}function lAe(t={}){const e=Hi(t);return D.useSyncExternalStore(n=>n1e(e,{onChange:n}),()=>L4(e),()=>L4(e))}function uAe(t={}){const e=Hi(t);return D.useSyncExternalStore(n=>JQ(e,{onChange:n}),()=>$4(e),()=>$4(e))}function dAe(t={}){const{mutation:e}=t,n=Hi(t),r=M1e(n),{mutate:s,mutateAsync:i,...o}=xT({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:uAe({config:n})}}function hAe(t={}){const e=Hi(t);return D.useSyncExternalStore(n=>QQ(e,{onChange:n}),()=>bc(e),()=>bc(e))}function fAe(t={}){const{mutation:e}=t,n=Hi(t),r=L1e(n),{mutate:s,mutateAsync:i,...o}=xT({...e,...r});return{...o,connectors:hAe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function pAe(t={}){const{address:e,query:n={}}=t,r=Hi(t),s=tc({config:r}),i=B1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return w1({...n,...i,enabled:o})}function gAe(t={}){const e=Hi(t);return oJ.useSyncExternalStoreWithSelector(n=>R_e(e,{onChange:n}),()=>HD(e,t),()=>HD(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function xE(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Hi(t),a=tc({config:o}),c=z1e(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return w1({...s,...c,enabled:l,structuralSharing:s.structuralSharing??O1e})}function k$(t={}){const{mutation:e}=t,n=Hi(t),r=G1e(n),{mutate:s,mutateAsync:i,...o}=xT({...e,...r});return{...o,chains:lAe({config:n}),switchChain:s,switchChainAsync:i}}function mAe(t={}){const{query:e={},...n}=t,r=Hi(n),s=O$(),{address:i,connector:o,status:a}=Ab({config:r}),c=tc({config:r}),l=t.connector??o,{queryKey:u,...d}=j1e(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),w1({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function jv(t={}){const{hash:e,query:n={}}=t,r=Hi(t),s=tc({config:r}),i=q1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return w1({...n,...i,enabled:o})}function Wv(t={}){const{mutation:e}=t,n=Hi(t),r=K1e(n),{mutate:s,mutateAsync:i,...o}=xT({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const wI=lQ({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),Zo=lQ({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),yAe=Jc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),wAe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=yAe({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),[w,y]=D.useState(null),b=tc(),{switchChain:v}=k$();D.useEffect(()=>{t&&r&&A()},[t,r]);const A=async()=>{if(l(!0),g(null),b!==Zo.id){g(`Please switch to Ethereum mainnet to mint Pixelawbs. Current network: ${b}`),l(!1);return}try{const S=await uK(r);a(S);const O={};S.forEach(P=>{O[P.id]=0}),f(O)}catch(S){g(S.message)}finally{l(!1)}},_=(S,O)=>{f(P=>({...P,[S]:Math.max(0,O)}))},I=async()=>{const S=Object.entries(h).filter(([,O])=>O>0).map(([O,P])=>({id:O,quantity:P}));if(S.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}if(b!==Zo.id){g("Please switch to Ethereum mainnet to mint Pixelawbs");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const O=await dK(r,S);if(console.log("Mint API result:",O),O.success&&O.mintTransaction){console.log("Got mint transaction:",O.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const P=await w.sendTransaction({to:O.mintTransaction.to,value:BigInt(O.mintTransaction.value),data:O.mintTransaction.data});console.log("Transaction sent successfully:",P),alert(`NFT Minted Successfully: Transaction Hash - ${P}`),e()}catch(P){console.error("Transaction sending failed:",P),g("Transaction failed: "+P.message)}}else throw new Error(O.message||"Could not retrieve minting transaction.")}catch(O){console.error("Minting failed:",O),g("Minting failed: "+O.message)}finally{d(!1)}},x=(S,O)=>`${parseFloat(S)} ${O}`,N=()=>{n&&n()};return t?m.jsx(r1,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsxs("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:[p,b!==Zo.id&&m.jsx("div",{style:{marginTop:"10px"},children:m.jsx("button",{onClick:()=>v({chainId:Zo.id}),style:{backgroundColor:"#008000",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Switch to Ethereum"})})]}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(S=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",x(S.token_price,S.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:O=>_(S.id,parseInt(O.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),m.jsx("button",{onClick:()=>void I(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},bJ=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",vJ=({src:t,alt:e,style:n})=>{const[r,s]=D.useState(t),[i,o]=D.useState(!1),[a,c]=D.useState(0);D.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?m.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):m.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},bAe=Jc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),vAe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},EAe=({nft:t,onClose:e})=>{const n=bAe(),r=D.useRef(null),s=vAe(t.attributes);return m.jsx(r1,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx(vJ,{src:bJ(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},CAe=Symbol(),J4=Object.getPrototypeOf,c3=new WeakMap,_Ae=t=>t&&(c3.has(t)?c3.get(t):J4(t)===Object.prototype||J4(t)===Array.prototype),AAe=t=>_Ae(t)&&t[CAe]||null,Z4=(t,e=!0)=>{c3.set(t,e)},bI={},sO=t=>typeof t=="object"&&t!==null,rh=new WeakMap,zv=new WeakSet,SAe=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>sO(l)&&!zv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return Z4(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(zv.has(g))Z4(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(rh.has(g)){const[b,v]=rh.get(g);y.value=i(b,v(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!sO(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,O=++a[0])=>{d!==O&&(d=O,h.forEach(P=>P(S,O)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([O])=>{const P=O[1](S);P>d&&(d=P)})),d),w=S=>(O,P)=>{const F=[...O];F[1]=[S,...F[1]],f(F,P)},y=new Map,b=(S,O)=>{if((bI?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const P=O[3](w(S));y.set(S,[O,P])}else y.set(S,[O])},v=S=>{var O;const P=y.get(S);P&&(y.delete(S),(O=P[1])==null||O.call(P))},A=S=>(h.add(S),h.size===1&&y.forEach(([P,F],q)=>{if((bI?"production":void 0)!=="production"&&F)throw new Error("remove already exists");const z=P[3](w(q));y.set(q,[P,z])}),()=>{h.delete(S),h.size===0&&y.forEach(([P,F],q)=>{F&&(F(),y.set(q,[P]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(_,{deleteProperty(S,O){const P=Reflect.get(S,O);v(O);const F=Reflect.deleteProperty(S,O);return F&&f(["delete",[O],P]),F},set(S,O,P,F){const q=Reflect.has(S,O),z=Reflect.get(S,O,F);if(q&&(t(z,P)||o.has(P)&&t(z,o.get(P))))return!0;v(O),sO(P)&&(P=AAe(P)||P);let T=P;if(P instanceof Promise)P.then(R=>{P.status="fulfilled",P.value=R,f(["resolve",[O],R])}).catch(R=>{P.status="rejected",P.reason=R,f(["reject",[O],R])});else{!rh.has(P)&&n(P)&&(T=c(P));const R=!zv.has(T)&&rh.get(T);R&&b(O,R)}return Reflect.set(S,O,T,F),f(["set",[O],P,z]),!0}});o.set(l,x);const N=[_,g,i,A];return rh.set(x,N),Reflect.ownKeys(l).forEach(S=>{const O=Object.getOwnPropertyDescriptor(l,S);"value"in O&&(x[S]=l[S],delete O.value,delete O.writable),Object.defineProperty(_,S,O)}),x})=>[c,rh,zv,t,e,n,r,s,i,o,a],[xAe]=SAe();function dr(t={}){return xAe(t)}function mi(t,e,n){const r=rh.get(t);(bI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function FC(t,e){const n=rh.get(t);(bI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Gg(t){return zv.add(t),t}function wi(t,e,n,r){let s=t[e];return mi(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function IAe(t){const e=dr({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var X4={};const We={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof X4<"u"?X4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},EJ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=We.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var NAe=20,TAe=1,qg=1e6,eF=1e6,RAe=-7,PAe=21,OAe=!1,b1="[big.js] ",vm=b1+"Invalid ",IT=vm+"decimal places",kAe=vm+"rounding mode",CJ=b1+"Division by zero",kn={},Gl=void 0,DAe=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function _J(){function t(e){var n=this;if(!(n instanceof t))return e===Gl?_J():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(vm+"value");e=e===0&&1/e<0?"-0":String(e)}MAe(n,e)}n.constructor=t}return t.prototype=kn,t.DP=NAe,t.RM=TAe,t.NE=RAe,t.PE=PAe,t.strict=OAe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function MAe(t,e){var n,r,s;if(!DAe.test(e))throw Error(vm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Em(t,e,n,r){var s=t.c;if(n===Gl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(kAe);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Gl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Gl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Cm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}kn.abs=function(){var t=new this.constructor(this);return t.s=1,t};kn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};kn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>qg)throw Error(IT);if(!s[0])throw Error(CJ);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],v=0,A=o+(y.e=e.e-t.e)+1;for(y.s=i,i=A<0?0:A,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Gl)&&i--);return!b[0]&&v!=1&&(b.shift(),y.e--,A--),v>A&&Em(y,A,n.RM,g[0]!==Gl),y};kn.eq=function(t){return this.cmp(t)===0};kn.gt=function(t){return this.cmp(t)>0};kn.gte=function(t){return this.cmp(t)>-1};kn.lt=function(t){return this.cmp(t)<0};kn.lte=function(t){return this.cmp(t)<1};kn.minus=kn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};kn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(CJ);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};kn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};kn.plus=kn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};kn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-eF||t>eF)throw Error(vm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};kn.prec=function(t,e){if(t!==~~t||t<1||t>qg)throw Error(vm+"precision");return Em(new this.constructor(this),t,e)};kn.round=function(t,e){if(t===Gl)t=0;else if(t!==~~t||t<-qg||t>qg)throw Error(IT);return Em(new this.constructor(this),t+this.e+1,e)};kn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(b1+"No square root");i=Math.sqrt(+Cm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Em(t,(s.DP-=4)+t.e+1,s.RM)};kn.times=kn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};kn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Gl){if(t!==~~t||t<0||t>qg)throw Error(IT);for(n=Em(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Cm(n,!0,!!r)};kn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Gl){if(t!==~~t||t<0||t>qg)throw Error(IT);for(n=Em(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Cm(n,!1,!!r)};kn[Symbol.for("nodejs.util.inspect.custom")]=kn.toJSON=kn.toString=function(){var t=this,e=t.constructor;return Cm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};kn.toNumber=function(){var t=+Cm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(b1+"Imprecise conversion");return t};kn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Gl){if(t!==~~t||t<1||t>qg)throw Error(vm+"precision");for(n=Em(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Cm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};kn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(b1+"valueOf disallowed");return Cm(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ll=_J();const LAe={bigNumber(t){return t?new Ll(t):new Ll(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ll(0);const n=new Ll(t),r=new Ll(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},$Ae=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],UAe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],BAe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],FAe={getERC20Abi:t=>We.USDT_CONTRACT_ADDRESSES.includes(t)?BAe:$Ae,getSwapAbi:()=>UAe},Ld={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Mt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function iO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Rt={setItem(t,e){Hv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Hv())return localStorage.getItem(t)||void 0},removeItem(t){Hv()&&localStorage.removeItem(t)},clear(){Hv()&&localStorage.clear()}};function Hv(){return typeof window<"u"&&typeof localStorage<"u"}function Zu(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var tF={};const oO=(typeof process<"u"&&typeof tF<"u"?tF.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",AJ=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],jAe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Bn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:oO,SECURE_SITE_DASHBOARD:`${oO}/dashboard`,SECURE_SITE_FAVICON:`${oO}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Qe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Qe.getActiveNamespace(),e=Qe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Rt.setItem(Mt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Rt.getItem(Mt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Rt.removeItem(Mt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Rt.setItem(Mt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Rt.setItem(Mt.ACTIVE_CAIP_NETWORK_ID,t),Qe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Rt.getItem(Mt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Rt.removeItem(Mt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=iO(t);Rt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Qe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Rt.setItem(Mt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Rt.getItem(Mt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=iO(t);Rt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Rt.getItem(Mt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=iO(t);return Rt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Rt.setItem(Mt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Rt.getItem(Mt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Rt.removeItem(Mt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Rt.getItem(Mt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Rt.getItem(Mt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Rt.setItem(Mt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Rt.getItem(Mt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Rt.getItem(Mt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Rt.setItem(Mt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces();e.includes(t)||(e.push(t),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Rt.getItem(Mt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Rt.setItem(Mt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Rt.removeItem(Mt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Rt.getItem(Mt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Qe.getBalanceCache();Rt.setItem(Mt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Qe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Qe.getBalanceCache();e[t.caipAddress]=t,Rt.setItem(Mt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Rt.getItem(Mt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Qe.getBalanceCache();Rt.setItem(Mt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Qe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Qe.getNativeBalanceCache();e[t.caipAddress]=t,Rt.setItem(Mt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Rt.getItem(Mt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Qe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Qe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Qe.getEnsCache();e[t.address]=t,Rt.setItem(Mt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Qe.getEnsCache();Rt.setItem(Mt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Rt.getItem(Mt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Qe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Qe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Qe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Rt.setItem(Mt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Qe.getIdentityCache();Rt.setItem(Mt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Rt.removeItem(Mt.PORTFOLIO_CACHE),Rt.removeItem(Mt.NATIVE_BALANCE_CACHE),Rt.removeItem(Mt.ENS_CACHE),Rt.removeItem(Mt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Rt.setItem(Mt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Rt.getItem(Mt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Qe.getConnections(),[e]:t};Rt.setItem(Mt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Rt.getItem(Mt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},lt={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return lt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Bn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Bn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(lt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Bn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(lt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!lt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Qe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,lt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return We.W3M_API_URL},getBlockchainApiUrl(){return We.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return We.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Bn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in We.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function pv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let v1=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await pv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const WAe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Bn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(lt.isTelegram()){if(lt.isIos())return t.filter(e=>e!=="google");if(lt.isMac())return t.filter(e=>e!=="x");if(lt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},mt=dr({features:Bn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Bn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ve={state:mt,subscribeKey(t,e){return wi(mt,t,e)},setOptions(t){Object.assign(mt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...mt.remoteFeatures,...t};mt.remoteFeatures=e,(n=mt.remoteFeatures)!=null&&n.socials&&(mt.remoteFeatures.socials=WAe.filterSocialsByPlatform(mt.remoteFeatures.socials))},setFeatures(t){if(!t)return;mt.features||(mt.features=Bn.DEFAULT_FEATURES);const e={...mt.features,...t};mt.features=e},setProjectId(t){mt.projectId=t},setCustomRpcUrls(t){mt.customRpcUrls=t},setAllWallets(t){mt.allWallets=t},setIncludeWalletIds(t){mt.includeWalletIds=t},setExcludeWalletIds(t){mt.excludeWalletIds=t},setFeaturedWalletIds(t){mt.featuredWalletIds=t},setTokens(t){mt.tokens=t},setTermsConditionsUrl(t){mt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){mt.privacyPolicyUrl=t},setCustomWallets(t){mt.customWallets=t},setIsSiweEnabled(t){mt.isSiweEnabled=t},setIsUniversalProvider(t){mt.isUniversalProvider=t},setSdkVersion(t){mt.sdkVersion=t},setMetadata(t){mt.metadata=t},setDisableAppend(t){mt.disableAppend=t},setEIP6963Enabled(t){mt.enableEIP6963=t},setDebug(t){mt.debug=t},setEnableWalletConnect(t){mt.enableWalletConnect=t},setEnableWalletGuide(t){mt.enableWalletGuide=t},setEnableAuthLogger(t){mt.enableAuthLogger=t},setEnableWallets(t){mt.enableWallets=t},setPreferUniversalLinks(t){mt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){mt.hasMultipleAddresses=t},setSIWX(t){mt.siwx=t},setConnectMethodsOrder(t){mt.features={...mt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){mt.features={...mt.features,walletFeaturesOrder:t}},setSocialsOrder(t){mt.remoteFeatures={...mt.remoteFeatures,socials:t}},setCollapseWallets(t){mt.features={...mt.features,collapseWallets:t}},setEnableEmbedded(t){mt.enableEmbedded=t},setAllowUnsupportedChain(t){mt.allowUnsupportedChain=t},setManualWCControl(t){mt.manualWCControl=t},setEnableNetworkSwitch(t){mt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(mt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){mt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return mt.universalProviderConfigOverride},getSnapshot(){return FC(mt)}},zAe=Object.freeze({enabled:!0,events:[]}),HAe=new v1({baseUrl:lt.getAnalyticsUrl(),clientId:null}),GAe=5,qAe=60*1e3,$d=dr({...zAe}),VAe={state:$d,subscribeKey(t,e){return wi($d,t,e)},async sendError(t,e){if(!$d.enabled)return;const n=Date.now();if($d.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<qAe}).length>=GAe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};$d.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ve.state;await HAe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:lt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){$d.enabled=!0},disable(){$d.enabled=!1},clearEvents(){$d.events=[]}};let l3=class u3 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,u3.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,u3):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function nF(t,e){const n=t instanceof l3?t:new l3(t instanceof Error?t.message:String(t),e,t);throw VAe.sendError(n,n.category),n}function ha(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return nF(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return nF(a,e)}},n[r]=i}else n[r]=s}),n}const Tl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},KAe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Tl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Tl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Tl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Tl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===We.CHAIN.SOLANA&&t===Tl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Tl.COINBASE.url}/dapp?cb_url=${r}`)}},Oo=dr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),YAe={state:Oo,subscribeNetworkImages(t){return mi(Oo.networkImages,()=>t(Oo.networkImages))},subscribeKey(t,e){return wi(Oo,t,e)},subscribe(t){return mi(Oo,()=>t(Oo))},setWalletImage(t,e){Oo.walletImages[t]=e},setNetworkImage(t,e){Oo.networkImages[t]=e},setChainImage(t,e){Oo.chainImages[t]=e},setConnectorImage(t,e){Oo.connectorImages={...Oo.connectorImages,[t]:e}},setTokenImage(t,e){Oo.tokenImages[t]=e},setCurrencyImage(t,e){Oo.currencyImages[t]=e}},Rc=ha(YAe),QAe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},aO=dr({networkImagePromises:{}}),SJ={async fetchWalletImage(t){if(t)return await ut._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(aO.networkImagePromises[t]||(aO.networkImagePromises[t]=ut._fetchNetworkImage(t)),await aO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Rc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Rc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Rc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Rc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Rc.state.connectorImages[t.imageId]},getChainImage(t){return Rc.state.networkImages[QAe[t]]}},Ud=dr({message:"",variant:"info",open:!1}),JAe={state:Ud,subscribeKey(t,e){return wi(Ud,t,e)},open(t,e){const{debug:n}=ve.state,{shortMessage:r,longMessage:s}=t;n&&(Ud.message=r,Ud.variant=e,Ud.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Ud.open=!1,Ud.message="",Ud.variant="info"}},$l=ha(JAe),ZAe=lt.getAnalyticsUrl(),XAe=new v1({baseUrl:ZAe,clientId:null}),eSe=["MODAL_CREATED"],hu=dr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),mr={state:hu,subscribe(t){return mi(hu,()=>t(hu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ye.state.address;if(eSe.includes(t.data.event)||typeof window>"u")return;await XAe.post({path:"/e",params:mr.getSdkProperties(),body:{eventId:lt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),hu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===We.HTTP_STATUS_CODES.FORBIDDEN&&!hu.reportedErrors.FORBIDDEN&&($l.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Hv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),hu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;hu.timestamp=Date.now(),hu.data=t,(e=ve.state.features)!=null&&e.analytics&&mr._sendAnalyticsEvent(hu)}},tSe=lt.getApiUrl(),Vi=new v1({baseUrl:tSe,clientId:null}),nSe=40,rF=4,rSe=20,Lt=dr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ut={state:Lt,subscribeKey(t,e){return wi(Lt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ve.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Vi.baseUrl}/getWalletImage/${t}`,n=await Vi.getBlob({path:e,params:ut._getSdkProperties()});Rc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Vi.baseUrl}/public/getAssetImage/${t}`,n=await Vi.getBlob({path:e,params:ut._getSdkProperties()});Rc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Vi.baseUrl}/public/getAssetImage/${t}`,n=await Vi.getBlob({path:e,params:ut._getSdkProperties()});Rc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Vi.baseUrl}/public/getCurrencyImage/${t}`,n=await Vi.getBlob({path:e,params:ut._getSdkProperties()});Rc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Vi.baseUrl}/public/getTokenImage/${t}`,n=await Vi.getBlob({path:e,params:ut._getSdkProperties()});Rc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return lt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Tl.COINBASE.id?!0:H.state.activeChain==="solana"&&(n.id===Tl.SOLFLARE.id||n.id===Tl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Vi.get({path:"/appkit/v1/config",params:ut._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Vi.get({path:"/projects/v1/origins",params:ut._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=H.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!SJ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ut._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=je.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ut._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ut._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ut._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ut._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Tl).map(o=>o.id));const r=await Vi.get({path:"/getWallets",params:{...ut._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ut._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ve.state;if(t!=null&&t.length){const e={...ut._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??rF,include:t},{data:n}=await ut.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ut._fetchWalletImage(i))),Lt.featured=r,Lt.allFeatured=r}},async fetchRecommendedWallets(){try{Lt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ve.state,r=[...e??[],...n??[]].filter(Boolean),s=H.getRequestedCaipNetworkIds().join(","),i={page:1,entries:rF,include:t,exclude:r,chains:s},{data:o,count:a}=await ut.fetchWallets(i),c=Qe.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ut._fetchWalletImage(d))),Lt.recommended=o,Lt.allRecommended=o,Lt.count=a??0}catch{}finally{Lt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ve.state,s=H.getRequestedCaipNetworkIds().join(","),i=[...Lt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:nSe,include:e,exclude:i,chains:s},{data:a,count:c}=await ut.fetchWallets(o),l=a.slice(0,rSe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ut._fetchWalletImage(u))),Lt.wallets=lt.uniqueBy([...Lt.wallets,...ut._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Lt.count=c>Lt.count?c:Lt.count,Lt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ut.fetchWallets(e);n&&n.forEach(r=>{Lt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ve.state,s=H.getRequestedCaipNetworkIds().join(",");Lt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ut.fetchWallets(i);mr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ut._fetchWalletImage(c)),lt.wait(300)]),Lt.search=ut._filterOutExtensions(o)},initPromise(t,e){const n=Lt.promises[t];return n||(Lt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ut.initPromise("connectorImages",ut.fetchConnectorImages),e&&ut.initPromise("featuredWallets",ut.fetchFeaturedWallets),n&&ut.initPromise("recommendedWallets",ut.fetchRecommendedWallets),r&&ut.initPromise("networkImages",ut.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ve.state.features)!=null&&t.analytics&&ut.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Vi.get({path:"/getAnalyticsConfig",params:ut._getSdkProperties()});ve.setFeatures({analytics:t})}catch{ve.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Lt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Mn=dr({view:"Connect",history:["Connect"],transactionStack:[]}),sSe={state:Mn,subscribeKey(t,e){return wi(Mn,t,e)},pushTransactionStack(t){Mn.transactionStack.push(t)},popTransactionStack(t){const e=Mn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ht.goBack();break;case"cancel":s==null||s(),Ht.goBack();break}},push(t,e){t!==Mn.view&&(Mn.view=t,Mn.history.push(t),Mn.data=e)},reset(t,e){Mn.view=t,Mn.history=[t],Mn.data=e},replace(t,e){Mn.history.at(-1)===t||(Mn.view=t,Mn.history[Mn.history.length-1]=t,Mn.data=e)},goBack(){var r;const t=H.state.activeCaipAddress,e=Ht.state.view==="ConnectingFarcaster",n=!t&&e;if(Mn.history.length>1){Mn.history.pop();const[s]=Mn.history.slice(-1);s&&(t&&s==="Connect"?Mn.view="Account":Mn.view=s)}else As.close();(r=Mn.data)!=null&&r.wallet&&(Mn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ye.setFarcasterUrl(void 0,H.state.activeChain);const a=je.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=FC(ve.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Mn.history.length>1){Mn.history=Mn.history.slice(0,t+1);const[e]=Mn.history.slice(-1);e&&(Mn.view=e)}},goBackOrCloseModal(){Ht.state.history.length>1?Ht.goBack():As.close()}},Ht=ha(sSe),fu=dr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),d3={state:fu,subscribe(t){return mi(fu,()=>t(fu))},setThemeMode(t){fu.themeMode=t;try{const e=je.getAuthConnector();if(e){const n=d3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Zu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){fu.themeVariables={...fu.themeVariables,...t};try{const e=je.getAuthConnector();if(e){const n=d3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Zu(fu.themeVariables,fu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return FC(fu)}},uo=ha(d3),xJ={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},hn=dr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...xJ},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),iSe={state:hn,subscribe(t){return mi(hn,()=>{t(hn)})},subscribeKey(t,e){return wi(hn,t,e)},initialize(t){t.forEach(e=>{const n=Qe.getConnectedConnectorId(e);n&&je.setConnectorId(n,e)})},setActiveConnector(t){t&&(hn.activeConnector=Gg(t))},setConnectors(t){t.filter(s=>!hn.allConnectors.some(i=>i.id===s.id&&je.getConnectorName(i.name)===je.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&hn.allConnectors.push(Gg(s))});const n=je.getEnabledNamespaces(),r=je.getEnabledConnectors(n);hn.connectors=je.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(hn.filterByNamespaceMap).forEach(e=>{hn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{hn.filterByNamespaceMap[e]=!0}),je.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){hn.filterByNamespaceMap[t]=e,je.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=je.getEnabledNamespaces(),e=je.getEnabledConnectors(t),n=je.areAllNamespacesEnabled();hn.connectors=je.mergeMultiChainConnectors(e),n?ut.clearFilterByNamespaces():ut.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(hn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return hn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(hn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=je.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===We.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=je.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===We.CONNECTOR_ID.AUTH){const s=t,i=FC(ve.state),o=uo.getSnapshot().themeMode,a=uo.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Zu(a,o)}),je.setConnectors([t])}else je.setConnectors([t])},getAuthConnector(t){var r;const e=t||H.state.activeChain,n=hn.connectors.find(s=>s.id===We.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return hn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return hn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return hn.allConnectors.filter(r=>r.chain===H.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=FC(ve.state),r=uo.getSnapshot().themeMode,s=uo.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Zu(s,r)})},getConnectorsByNamespace(t){const e=hn.allConnectors.filter(n=>n.chain===t);return je.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=je.getConnector(t.id,t.rdns),n=H.state.activeChain;KAe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Ht.push("ConnectingExternal",{connector:e}):Ht.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?je.getConnectorsByNamespace(t):je.mergeMultiChainConnectors(hn.allConnectors)},setFilterByNamespace(t){hn.filterByNamespace=t,hn.connectors=je.getConnectors(t),ut.setFilterByNamespace(t)},setConnectorId(t,e){t&&(hn.activeConnectorIds={...hn.activeConnectorIds,[e]:t},Qe.setConnectedConnectorId(e,t))},removeConnectorId(t){hn.activeConnectorIds={...hn.activeConnectorIds,[t]:void 0},Qe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return hn.activeConnectorIds[t]},isConnected(t){return t?!!hn.activeConnectorIds[t]:Object.values(hn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){hn.activeConnectorIds={...xJ}}},je=ha(iSe);var $w={};const oSe="https://secure.walletconnect.org/sdk",aSe=(typeof process<"u"&&typeof $w<"u"?$w.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||oSe,cSe=(typeof process<"u"&&typeof $w<"u"?$w.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",lSe=(typeof process<"u"&&typeof $w<"u"?$w.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ve={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},qs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},dp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Qr=dr({...dp}),uSe={state:Qr,subscribeKey(t,e){return wi(Qr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=lt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Qr.message=dp.message,Qr.variant=dp.variant,Qr.svg=dp.svg,Qr.open=dp.open,Qr.autoClose=dp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=dp.autoClose}){Qr.open?(Qr.open=!1,setTimeout(()=>{Qr.message=t,Qr.variant=n,Qr.svg=e,Qr.open=!0,Qr.autoClose=r},150)):(Qr.message=t,Qr.variant=n,Qr.svg=e,Qr.open=!0,Qr.autoClose=r)}},Mc=uSe,Zn=dr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),dSe={state:Zn,subscribe(t){return mi(Zn,()=>t(Zn))},setLastNetworkInView(t){Zn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Zn.loading=!0;try{const s=await wt.fetchTransactions({account:t,cursor:Zn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Gv.filterSpamTransactions(s.data),o=Gv.filterByConnectedChain(i),a=[...Zn.transactions,...o];Zn.loading=!1,e==="coinbase"?Zn.coinbaseTransactions=Gv.groupTransactionsByYearAndMonth(Zn.coinbaseTransactions,s.data):(Zn.transactions=a,Zn.transactionsByYear=Gv.groupTransactionsByYearAndMonth(Zn.transactionsByYear,o)),Zn.empty=a.length===0,Zn.next=s.next?s.next:void 0}catch{const i=H.state.activeChain;mr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ve.state.projectId,cursor:Zn.next,isSmartAccount:((r=Ye.state.preferredAccountTypes)==null?void 0:r[i])===qs.ACCOUNT_TYPES.SMART_ACCOUNT}}),Mc.showError("Failed to fetch transactions"),Zn.loading=!1,Zn.empty=!0,Zn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Zn.next=void 0},resetTransactions(){Zn.transactions=[],Zn.transactionsByYear={},Zn.lastNetworkInView=void 0,Zn.loading=!1,Zn.empty=!1,Zn.next=void 0}},Gv=ha(dSe,"API_ERROR"),Gn=dr({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Zf;const hSe={state:Gn,subscribeKey(t,e){return wi(Gn,t,e)},_getClient(){return Gn._client},setClient(t){Gn._client=Gg(t)},async connectWalletConnect(){var t,e,n,r;if(lt.isTelegram()||lt.isSafari()&&lt.isIos()){if(Zf){await Zf,Zf=void 0;return}if(!lt.isPairingExpired(Gn==null?void 0:Gn.wcPairingExpiry)){const s=Gn.wcUri;Gn.wcUri=s;return}Zf=(e=(t=bt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),bt.state.status="connecting",await Zf,Zf=void 0,Gn.wcPairingExpiry=void 0,bt.state.status="connected"}else await((r=(n=bt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=bt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&H.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=bt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||H.state.activeChain;e&&je.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;As.setLoading(!0,H.state.activeChain);const n=je.getAuthConnector();n&&(Ye.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Qe.setPreferredAccountTypes(Ye.state.preferredAccountTypes??{[e]:t}),await bt.reconnectExternal(n),As.setLoading(!1,H.state.activeChain),mr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=bt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=bt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=bt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=bt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=bt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=bt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=bt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=bt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=bt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=bt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=bt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=bt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Gn.wcUri=void 0,Gn.wcPairingExpiry=void 0,Gn.wcLinking=void 0,Gn.recentWallet=void 0,Gn.status="disconnected",Gv.resetTransactions(),Qe.deleteWalletConnectDeepLink()},resetUri(){Gn.wcUri=void 0,Gn.wcPairingExpiry=void 0,Zf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=bt.state;t&&Qe.setWalletConnectDeepLink(t),e&&Qe.setAppKitRecent(e),mr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ht.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Gn.wcBasic=t},setUri(t){Gn.wcUri=t,Gn.wcPairingExpiry=lt.getPairingExpiry()},setWcLinking(t){Gn.wcLinking=t},setWcError(t){Gn.wcError=t,Gn.buffering=!1},setRecentWallet(t){Gn.recentWallet=t},setBuffering(t){Gn.buffering=t},setStatus(t){Gn.status=t},async disconnect(t){var e;try{await((e=bt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new l3("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Gn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(je.state.activeConnectorIds[n]===t.connectorId){const i=H.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ye.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=je.getConnector(t.connectorId);i?bt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},bt=ha(hSe),Gm=dr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),ql={state:Gm,subscribe(t){return mi(Gm,()=>t(Gm))},subscribeOpen(t){return wi(Gm,"open",t)},set(t){Object.assign(Gm,{...Gm,...t})}},cO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return mm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},sF={async getMyTokensWithBalance(t){const e=Ye.state.address,n=H.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await wt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=cO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await bt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await bt.walletGetAssets({account:t,chainFilter:[s]});return cO.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>cO.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:H.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Rn=dr({tokenBalances:[],loading:!1}),fSe={state:Rn,subscribe(t){return mi(Rn,()=>t(Rn))},subscribeKey(t,e){return wi(Rn,t,e)},setToken(t){t&&(Rn.token=Gg(t))},setTokenAmount(t){Rn.sendTokenAmount=t},setReceiverAddress(t){Rn.receiverAddress=t},setReceiverProfileImageUrl(t){Rn.receiverProfileImageUrl=t},setReceiverProfileName(t){Rn.receiverProfileName=t},setNetworkBalanceInUsd(t){Rn.networkBalanceInUSD=t},setLoading(t){Rn.loading=t},async sendToken(){var t;try{switch(En.setLoading(!0),(t=H.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await En.sendEvmToken();return;case"solana":await En.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{En.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=H.state.activeChain,e=(n=Ye.state.preferredAccountTypes)==null?void 0:n[t];if(!En.state.sendTokenAmount||!En.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!En.state.token)throw new Error("A token is required");(r=En.state.token)!=null&&r.address?(mr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===qs.ACCOUNT_TYPES.SMART_ACCOUNT,token:En.state.token.address,amount:En.state.sendTokenAmount,network:((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await En.sendERC20Token({receiverAddress:En.state.receiverAddress,tokenAddress:En.state.token.address,sendTokenAmount:En.state.sendTokenAmount,decimals:En.state.token.quantity.decimals})):(mr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===qs.ACCOUNT_TYPES.SMART_ACCOUNT,token:En.state.token.symbol||"",amount:En.state.sendTokenAmount,network:((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await En.sendNativeToken({receiverAddress:En.state.receiverAddress,sendTokenAmount:En.state.sendTokenAmount,decimals:En.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Rn.loading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?lt.getPlainAddress(r):void 0;if(Rn.lastRetry&&!lt.isAllowedRetry(Rn.lastRetry,30*Bn.ONE_SEC_MS))return Rn.loading=!1,[];try{if(s&&e&&n){const a=await sF.getMyTokensWithBalance();return Rn.tokenBalances=a,Rn.lastRetry=void 0,a}}catch(a){Rn.lastRetry=Date.now(),t==null||t(a),Mc.showError("Token Balance Unavailable")}finally{Rn.loading=!1}return[]},fetchNetworkBalance(){if(Rn.tokenBalances.length===0)return;const t=sF.mapBalancesToSwapTokens(Rn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===H.getActiveNetworkTokenAddress());e&&(Rn.networkBalanceInUSD=e?LAe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Ht.pushTransactionStack({});const e=t.receiverAddress,n=Ye.state.address,r=bt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await bt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),mr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ye.state.preferredAccountTypes)==null?void 0:i.eip155)===qs.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=En.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=bt._getClient())==null||c.updateBalance("eip155"),En.resetSend()},async sendERC20Token(t){Ht.pushTransactionStack({onSuccess(){Ht.replace("Account")}});const e=bt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ye.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=lt.getPlainAddress(t.tokenAddress);await bt.writeContract({fromAddress:Ye.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:FAe.getERC20Abi(n),chainNamespace:"eip155"}),En.resetSend()}},async sendSolanaToken(){var t;if(!En.state.sendTokenAmount||!En.state.receiverAddress)throw new Error("An amount and receiver address are required");Ht.pushTransactionStack({onSuccess(){Ht.replace("Account")}}),await bt.sendTransaction({chainNamespace:"solana",to:En.state.receiverAddress,value:En.state.sendTokenAmount}),(t=bt._getClient())==null||t.updateBalance("solana"),En.resetSend()},resetSend(){Rn.token=void 0,Rn.sendTokenAmount=void 0,Rn.receiverAddress=void 0,Rn.receiverProfileImageUrl=void 0,Rn.receiverProfileName=void 0,Rn.loading=!1,Rn.tokenBalances=[]}},En=ha(fSe),lO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},FA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Me=dr({chains:IAe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),pSe={state:Me,subscribe(t){return mi(Me,()=>{t(Me)})},subscribeKey(t,e){return wi(Me,t,e)},subscribeChainProp(t,e,n){let r;return mi(Me.chains,()=>{var i;const s=n||Me.activeChain;if(s){const o=(i=Me.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Qe.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ve.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Me.noAdapters=!0),Me.noAdapters||(Me.activeChain=a==null?void 0:a.namespace,Me.activeCaipNetwork=i,H.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Me.activeChain&&ql.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);H.state.chains.set(u,{namespace:u,networkState:dr({...FA,caipNetwork:d==null?void 0:d[0]}),accountState:dr(lO),caipNetworks:d??[],...n}),H.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Me.activeChain===t){const r=Array.from(Me.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&H.setActiveCaipNetwork(s)}}Me.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Me.chains.set(t.namespace,{namespace:t.namespace,networkState:{...FA,caipNetwork:r[0]},accountState:lO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),H.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Me.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Me.chains.set(t.chainNamespace,{...e,caipNetworks:r}),H.setRequestedCaipNetworks(r,t.chainNamespace),je.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Me.chains.get(t);if(n){const o=((r=Me.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&H.setActiveCaipNetwork(n.caipNetworks[0]),Me.chains.set(t,{...n,caipNetworks:a}),H.setRequestedCaipNetworks(a||[],t),a.length===0&&je.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Me.chains.get(t);n&&(n.networkState={...n.networkState||FA,...e},Me.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Me.chains.get(t);if(r){const s={...r.accountState||lO,...e};Me.chains.set(t,{...r,accountState:s}),(Me.chains.size===1||Me.activeChain===t)&&(e.caipAddress&&(Me.activeCaipAddress=e.caipAddress),Ye.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Me.chains.get(t);if(n){const r={...n.networkState||FA,...e};Me.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){H.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&je.removeConnectorId(n)},setActiveNamespace(t){var r,s;Me.activeChain=t;const e=t?Me.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Me.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Me.activeCaipNetwork=n,H.setChainNetworkData(t,{caipNetwork:n}),Qe.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),ql.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Me.activeChain!==t.chainNamespace&&H.setIsSwitchingNamespace(!0);const e=Me.chains.get(t.chainNamespace);Me.activeChain=t.chainNamespace,Me.activeCaipNetwork=t,H.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Me.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Me.activeCaipAddress=void 0,H.setAccountProp("caipAddress",Me.activeCaipAddress,t.chainNamespace),e&&Ye.replaceState(e.accountState),En.resetSend(),ql.set({activeChain:Me.activeChain,selectedNetworkId:(i=Me.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Qe.setActiveCaipNetworkId(t.caipNetworkId),!H.checkIfSupportedNetwork(t.chainNamespace)&&ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&!bt.state.wcBasic&&H.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Me.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==H.state.activeChain,n=(s=H.getNetworkData(t))==null?void 0:s.caipNetwork,r=H.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await H.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=H.state.chains.get(H.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Me.activeCaipNetwork)==null?void 0:o.id)})),r=H.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&As.close()}catch{Ht.goBack()}mr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Me.activeChain,n=Me.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Me.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Me.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Me.activeChain;if(e&&(n=e),!n)return;const r=(s=Me.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Me.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Me.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return lt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Me.chains.forEach(e=>{const n=H.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){H.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=H.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));je.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Me.chains.forEach(e=>{const n=H.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Me.activeCaipNetwork},getActiveCaipAddress(){return Me.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Me.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=H.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());H.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Me.activeCaipNetwork,r=H.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Me.activeChain)return!0;const e=H.getRequestedCaipNetworks(Me.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){H.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=EJ.caipNetworkIdToNumber((r=Me.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Me.activeChain;if(!e||!t)return!1;const n=H.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Me.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Me.activeCaipNetwork)==null?void 0:s.id)||1,n=Bn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){As.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Me.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Bn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){H.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Me.activeCaipAddress=void 0,H.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),je.removeConnectorId(e)},setIsSwitchingNamespace(t){Me.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Me.chains.forEach(s=>{We.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Me.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=H.state.chains.get(t))==null?void 0:e.accountState:Ye.state},getNetworkData(t){var n;const e=t||Me.activeChain;if(e)return(n=H.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=H.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=je.state.filterByNamespace;return(t?[Me.chains.get(t)]:Array.from(Me.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?H.getRequestedCaipNetworks(t):H.getAllRequestedCaipNetworks()}},H=ha(pSe),gSe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},IJ=lt.getBlockchainApiUrl(),Ki=dr({clientId:null,api:new v1({baseUrl:IJ,clientId:null}),supportedChains:{http:[],ws:[]}}),wt={state:Ki,async get(t){const{st:e,sv:n}=wt.getSdkProperties(),r=ve.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ki.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ve.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ki.supportedChains.http.length||await wt.getSupportedNetworks()}catch{return!1}return Ki.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await wt.get({path:"v1/supported-chains"});return Ki.supportedChains=t,t}catch{return Ki.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await wt.isNetworkSupported(e))return{avatar:"",name:""};const r=Qe.getIdentityFromCacheForAddress(t);if(r)return r;const s=await wt.get({path:`/v1/identity/${t}`,params:{sender:H.state.activeCaipAddress?lt.getPlainAddress(H.state.activeCaipAddress):void 0}});return Qe.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await wt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?wt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await wt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?wt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ki.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ve.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await wt.isNetworkSupported((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?wt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=wt.getSdkProperties();if(!await wt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return wt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await wt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ki.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Bn.CONVERT_SLIPPAGE_TOLERANCE},projectId:ve.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=wt.getSdkProperties();if(!await wt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return wt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=wt.getSdkProperties();if(!await wt.isNetworkSupported((l=H.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Mc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Qe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await wt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Qe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ye.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await wt.isNetworkSupported((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ki.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await wt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ki.api.post({path:"/v1/generators/onrampurl",params:{projectId:ve.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await wt.isNetworkSupported((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await wt.get({path:"/v1/onramp/options"})}catch{return gSe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await wt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ki.api.post({path:"/v1/onramp/quote",params:{projectId:ve.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await wt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ki.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ve.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ki.clientId=t,Ki.api=new v1({baseUrl:IJ,clientId:t})}},ya=dr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),mSe={state:ya,replaceState(t){t&&Object.assign(ya,Gg(t))},subscribe(t){return H.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return H.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){H.setAccountProp("status",t,e)},getCaipAddress(t){return H.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?lt.getPlainAddress(t):void 0;e===H.state.activeChain&&(H.state.activeCaipAddress=t),H.setAccountProp("caipAddress",t,e),H.setAccountProp("address",n,e)},setBalance(t,e,n){H.setAccountProp("balance",t,n),H.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){H.setAccountProp("profileName",t,e)},setProfileImage(t,e){H.setAccountProp("profileImage",t,e)},setUser(t,e){H.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){H.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){H.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){H.setAccountProp("currentTab",t,H.state.activeChain)},setTokenBalance(t,e){t&&H.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){H.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){H.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=H.getAccountProp("addressLabels",n)||new Map;r.set(t,e),H.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=H.getAccountProp("addressLabels",e)||new Map;n.delete(t),H.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){H.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){H.setAccountProp("preferredAccountTypes",{...ya.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){ya.preferredAccountTypes=t},setSocialProvider(t,e){t&&H.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){H.setAccountProp("socialWindow",t?Gg(t):void 0,e)},setFarcasterUrl(t,e){H.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ya.balanceLoading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?lt.getPlainAddress(r):void 0;if(ya.lastRetry&&!lt.isAllowedRetry(ya.lastRetry,30*Bn.ONE_SEC_MS))return ya.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await wt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ye.setTokenBalance(c,n),ya.lastRetry=void 0,ya.balanceLoading=!1,c}}catch(a){ya.lastRetry=Date.now(),t==null||t(a),Mc.showError("Token Balance Unavailable")}finally{ya.balanceLoading=!1}return[]},resetAccount(t){H.resetAccount(t)}},Ye=ha(mSe),ySe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=H.state.activeCaipNetwork,r=Ht.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ye.getCaipAddress(H.state.activeChain),o=t.chainNamespace!==H.state.activeChain,a=Ye.getCaipAddress(t.chainNamespace),l=je.getConnectorId(H.state.activeChain)===We.CONNECTOR_ID.AUTH,u=We.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ht.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ht.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ht.push("SwitchNetwork",{...r,network:t})}},Yi=dr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),wSe={state:Yi,subscribe(t){return mi(Yi,()=>t(Yi))},subscribeKey(t,e){return wi(Yi,t,e)},async open(t){var o,a;const e=Ye.state.status==="connected",n=t==null?void 0:t.namespace,r=H.state.activeChain,s=n&&n!==r,i=(o=H.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(bt.state.wcBasic?ut.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ut.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),je.setFilterByNamespace(t==null?void 0:t.namespace),As.setLoading(!0,n),n&&s){const c=((a=H.getNetworkData(n))==null?void 0:a.caipNetwork)||H.getRequestedCaipNetworks(n)[0];c&&ySe.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=H.state.noAdapters;ve.state.manualWCControl||c&&!i?lt.isMobile()?Ht.reset("AllWallets"):Ht.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ht.reset(t.view,t.data):i?Ht.reset("Account"):Ht.reset("Connect")}Yi.open=!0,ql.set({open:!0}),mr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ve.state.enableEmbedded,e=!!H.state.activeCaipAddress;Yi.open&&mr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Yi.open=!1,Ht.reset("Connect"),As.clearLoading(),t?e?Ht.replace("Account"):Ht.push("Connect"):ql.set({open:!1}),bt.resetUri()},setLoading(t,e){e&&Yi.loadingNamespaceMap.set(e,t),Yi.loading=t,ql.set({loading:t})},clearLoading(){Yi.loadingNamespaceMap.clear(),Yi.loading=!1},shake(){Yi.shake||(Yi.shake=!0,setTimeout(()=>{Yi.shake=!1},500))}},As=ha(wSe),IE={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},h3={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},bSe={providers:AJ,selectedProvider:null,error:null,purchaseCurrency:IE,paymentCurrency:h3,purchaseCurrencies:[IE],paymentCurrencies:[],quotesLoading:!1},ln=dr(bSe),vSe={state:ln,subscribe(t){return mi(ln,()=>t(ln))},subscribeKey(t,e){return wi(ln,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=H.state.activeChain===We.CHAIN.SOLANA?"SOL":"USDC",n=Ye.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",jAe),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ve.state.projectId),ln.selectedProvider={...t,url:r.toString()}}else ln.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=AJ.filter(r=>e.includes(r.name));ln.providers=n}else ln.providers=[]},setPurchaseCurrency(t){ln.purchaseCurrency=t},setPaymentCurrency(t){ln.paymentCurrency=t},setPurchaseAmount(t){f3.state.purchaseAmount=t},setPaymentAmount(t){f3.state.paymentAmount=t},async getAvailableCurrencies(){const t=await wt.getOnrampOptions();ln.purchaseCurrencies=t.purchaseCurrencies,ln.paymentCurrencies=t.paymentCurrencies,ln.paymentCurrency=t.paymentCurrencies[0]||h3,ln.purchaseCurrency=t.purchaseCurrencies[0]||IE,await ut.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ut.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;ln.quotesLoading=!0;try{const n=await wt.getOnrampQuote({purchaseCurrency:ln.purchaseCurrency,paymentCurrency:ln.paymentCurrency,amount:((t=ln.paymentAmount)==null?void 0:t.toString())||"0",network:(e=ln.purchaseCurrency)==null?void 0:e.symbol});return ln.quotesLoading=!1,ln.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return ln.error=n.message,ln.quotesLoading=!1,null}finally{ln.quotesLoading=!1}},resetState(){ln.selectedProvider=null,ln.error=null,ln.purchaseCurrency=IE,ln.paymentCurrency=h3,ln.purchaseCurrencies=[IE],ln.paymentCurrencies=[],ln.paymentAmount=void 0,ln.purchaseAmount=void 0,ln.quotesLoading=!1}},f3=ha(vSe),iF=2147483648,ESe={convertEVMChainIdToCoinType(t){if(t>=iF)throw new Error("Invalid chainId");return(iF|t)>>>0}},wa=dr({suggestions:[],loading:!1}),CSe={state:wa,subscribe(t){return mi(wa,()=>t(wa))},subscribeKey(t,e){return wi(wa,t,e)},async resolveName(t){var e,n;try{return await wt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await wt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{wa.loading=!0,wa.suggestions=[];const e=await wt.getEnsNameSuggestions(t);return wa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],wa.suggestions}catch(e){const n=NE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{wa.loading=!1}},async getNamesForAddress(t){try{if(!H.state.activeCaipNetwork)return[];const n=Qe.getEnsFromCacheForAddress(t);if(n)return n;const r=await wt.reverseLookupEnsName({address:t});return Qe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=NE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=H.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ye.state.address,r=je.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");wa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ht.pushTransactionStack({onCancel(){Ht.replace("RegisterAccountName")}});const i=await bt.signMessage(s);wa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=ESe.convertEVMChainIdToCoinType(Number(o));await wt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ye.setProfileName(t,e.chainNamespace),Ht.replace("RegisterAccountNameSuccess")}catch(s){const i=NE.parseEnsApiError(s,`Error registering name ${t}`);throw Ht.replace("RegisterAccountName"),new Error(i)}finally{wa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},NE=ha(CSe);var D$={exports:{}},i0=typeof Reflect=="object"?Reflect:null,oF=i0&&typeof i0.apply=="function"?i0.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},zS;i0&&typeof i0.ownKeys=="function"?zS=i0.ownKeys:Object.getOwnPropertySymbols?zS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:zS=function(e){return Object.getOwnPropertyNames(e)};function _Se(t){console&&console.warn&&console.warn(t)}var NJ=Number.isNaN||function(e){return e!==e};function Wn(){Wn.init.call(this)}D$.exports=Wn;D$.exports.once=ISe;Wn.EventEmitter=Wn;Wn.prototype._events=void 0;Wn.prototype._eventsCount=0;Wn.prototype._maxListeners=void 0;var aF=10;function NT(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Wn,"defaultMaxListeners",{enumerable:!0,get:function(){return aF},set:function(t){if(typeof t!="number"||t<0||NJ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");aF=t}});Wn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Wn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NJ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function TJ(t){return t._maxListeners===void 0?Wn.defaultMaxListeners:t._maxListeners}Wn.prototype.getMaxListeners=function(){return TJ(this)};Wn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")oF(c,this,n);else for(var l=c.length,u=DJ(c,l),r=0;r<l;++r)oF(u[r],this,n);return!0};function RJ(t,e,n,r){var s,i,o;if(NT(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=TJ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,_Se(a)}return t}Wn.prototype.addListener=function(e,n){return RJ(this,e,n,!1)};Wn.prototype.on=Wn.prototype.addListener;Wn.prototype.prependListener=function(e,n){return RJ(this,e,n,!0)};function ASe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function PJ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=ASe.bind(r);return s.listener=n,r.wrapFn=s,s}Wn.prototype.once=function(e,n){return NT(n),this.on(e,PJ(this,e,n)),this};Wn.prototype.prependOnceListener=function(e,n){return NT(n),this.prependListener(e,PJ(this,e,n)),this};Wn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(NT(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():SSe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Wn.prototype.off=Wn.prototype.removeListener;Wn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function OJ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?xSe(s):DJ(s,s.length)}Wn.prototype.listeners=function(e){return OJ(this,e,!0)};Wn.prototype.rawListeners=function(e){return OJ(this,e,!1)};Wn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):kJ.call(t,e)};Wn.prototype.listenerCount=kJ;function kJ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Wn.prototype.eventNames=function(){return this._eventsCount>0?zS(this._events):[]};function DJ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function SSe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function xSe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function ISe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}MJ(t,e,i,{once:!0}),e!=="error"&&NSe(t,s,{once:!0})})}function NSe(t,e,n){typeof t.on=="function"&&MJ(t,"error",e,n)}function MJ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var nc=D$.exports;const M$=lm(nc);var Re={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var p3=function(t,e){return p3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},p3(t,e)};function TSe(t,e){p3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var g3=function(){return g3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g3.apply(this,arguments)};function RSe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function PSe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function OSe(t,e){return function(n,r){e(n,r,t)}}function kSe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function DSe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function MSe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function LSe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function $Se(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function m3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function LJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function USe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(LJ(arguments[e]));return t}function BSe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function jC(t){return this instanceof jC?(this.v=t,this):new jC(t)}function FSe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof jC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function jSe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:jC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function WSe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof m3=="function"?m3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function zSe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function HSe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function GSe(t){return t&&t.__esModule?t:{default:t}}function qSe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function VSe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const KSe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return g3},__asyncDelegator:jSe,__asyncGenerator:FSe,__asyncValues:WSe,__await:jC,__awaiter:DSe,__classPrivateFieldGet:qSe,__classPrivateFieldSet:VSe,__createBinding:LSe,__decorate:PSe,__exportStar:$Se,__extends:TSe,__generator:MSe,__importDefault:GSe,__importStar:HSe,__makeTemplateObject:zSe,__metadata:kSe,__param:OSe,__read:LJ,__rest:RSe,__spread:USe,__spreadArrays:BSe,__values:m3},Symbol.toStringTag,{value:"Module"})),TT=bz(KSe);var uO={},gv={},cF;function YSe(){if(cF)return gv;cF=1,Object.defineProperty(gv,"__esModule",{value:!0}),gv.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return gv.delay=t,gv}var Xf={},dO={},ep={},lF;function QSe(){return lF||(lF=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.ONE_THOUSAND=ep.ONE_HUNDRED=void 0,ep.ONE_HUNDRED=100,ep.ONE_THOUSAND=1e3),ep}var hO={},uF;function JSe(){return uF||(uF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(hO)),hO}var dF;function $J(){return dF||(dF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=TT;e.__exportStar(QSe(),t),e.__exportStar(JSe(),t)}(dO)),dO}var hF;function ZSe(){if(hF)return Xf;hF=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.fromMiliseconds=Xf.toMiliseconds=void 0;const t=$J();function e(r){return r*t.ONE_THOUSAND}Xf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Xf.fromMiliseconds=n,Xf}var fF;function XSe(){return fF||(fF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=TT;e.__exportStar(YSe(),t),e.__exportStar(ZSe(),t)}(uO)),uO}var qm={},pF;function exe(){if(pF)return qm;pF=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return qm.Watch=t,qm.default=t,qm}var fO={},mv={},gF;function txe(){if(gF)return mv;gF=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.IWatch=void 0;class t{}return mv.IWatch=t,mv}var mF;function nxe(){return mF||(mF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),TT.__exportStar(txe(),t)}(fO)),fO}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=TT;e.__exportStar(XSe(),t),e.__exportStar(exe(),t),e.__exportStar(nxe(),t),e.__exportStar($J(),t)})(Re);class _m{}let rxe=class extends _m{constructor(e){super()}};const yF=Re.FIVE_SECONDS,Am={pulse:"heartbeat_pulse"};let sxe=class UJ extends rxe{constructor(e){super(e),this.events=new nc.EventEmitter,this.interval=yF,this.interval=(e==null?void 0:e.interval)||yF}static async init(e){const n=new UJ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Re.toMiliseconds(this.interval))}pulse(){this.events.emit(Am.pulse)}};const ixe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,oxe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,axe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function cxe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){lxe(t);return}return e}function lxe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function jA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!axe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(ixe.test(t)||oxe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,cxe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Sm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function BJ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Sm(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let pO;function E1(){return pO||(pO=BJ("keyval-store","keyval")),pO}function wF(t,e=E1()){return e("readonly",n=>Sm(n.get(t)))}function uxe(t,e,n=E1()){return n("readwrite",r=>(r.put(e,t),Sm(r.transaction)))}function dxe(t,e=E1()){return e("readwrite",n=>(n.delete(t),Sm(n.transaction)))}function hxe(t=E1()){return t("readwrite",e=>(e.clear(),Sm(e.transaction)))}function fxe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Sm(t.transaction)}function pxe(t=E1()){return t("readonly",e=>{if(e.getAllKeys)return Sm(e.getAllKeys());const n=[];return fxe(e,r=>n.push(r.key)).then(()=>n)})}const gxe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),mxe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Vg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return mxe(t)}catch{return t}}function wd(t){return typeof t=="string"?t:gxe(t)||""}function yxe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var wxe=bxe;function bxe(t,e,n){var r=n&&n.stringify||yxe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const bF=wxe;var yy=Vl;const WC=Txe().console||{},vxe={mapHttpRequest:WA,mapHttpResponse:WA,wrapRequestSerializer:gO,wrapResponseSerializer:gO,wrapErrorSerializer:gO,req:WA,res:WA,err:Sxe};function Exe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Vl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||WC;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Exe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=zC),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:xxe(t)};c.levels=Vl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=zC,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=y3());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Vm(l,c,"error","log"),Vm(l,c,"fatal","error"),Vm(l,c,"warn","error"),Vm(l,c,"info","log"),Vm(l,c,"debug","log"),Vm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,RT([p],b,y,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Km(A,p,"error"),this.fatal=Km(A,p,"fatal"),this.warn=Km(A,p,"warn"),this.info=Km(A,p,"info"),this.debug=Km(A,p,"debug"),this.trace=Km(A,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=y3([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Vl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Vl.stdSerializers=vxe;Vl.stdTimeFunctions=Object.assign({},{nullTime:FJ,epochTime:jJ,unixTime:Ixe,isoTime:Nxe});function Vm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?zC:s[n]?s[n]:WC[n]||WC[r]||zC,Cxe(t,e,n)}function Cxe(t,e,n){!t.transmit&&e[n]===zC||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===WC?WC:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&RT(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,_xe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Vl.levels.values[l],d=Vl.levels.values[n];if(d<u)return;Axe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Vl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function _xe(t,e,n,r){t._serialize&&RT(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Vl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?bF(s.shift(),s):void 0}else typeof i=="string"&&(i=bF(s.shift(),s));return i!==void 0&&(o.msg=i),o}function RT(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Vl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Km(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Axe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;RT(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=y3(c)}function y3(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Sxe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function xxe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?FJ:jJ}function WA(){return{}}function gO(t){return t}function zC(){}function FJ(){return!1}function jJ(){return Date.now()}function Ixe(){return Math.round(Date.now()/1e3)}function Nxe(){return new Date(Date.now()).toISOString()}function Txe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const C1=lm(yy),Rxe={level:"info"},_1="custom_context",L$=1e3*1024;let Pxe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},vF=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Pxe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},WJ=class{constructor(e,n=L$){this.level=e??"error",this.levelValue=yy.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new vF(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===yy.levels.values.error?console.error(e):n===yy.levels.values.warn?console.warn(e):n===yy.levels.values.debug?console.debug(e):n===yy.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(wd({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new vF(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(wd({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Oxe=class{constructor(e,n=L$){this.baseChunkLogger=new WJ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},kxe=class{constructor(e,n=L$){this.baseChunkLogger=new WJ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Dxe=Object.defineProperty,Mxe=Object.defineProperties,Lxe=Object.getOwnPropertyDescriptors,EF=Object.getOwnPropertySymbols,$xe=Object.prototype.hasOwnProperty,Uxe=Object.prototype.propertyIsEnumerable,CF=(t,e,n)=>e in t?Dxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vI=(t,e)=>{for(var n in e||(e={}))$xe.call(e,n)&&CF(t,n,e[n]);if(EF)for(var n of EF(e))Uxe.call(e,n)&&CF(t,n,e[n]);return t},EI=(t,e)=>Mxe(t,Lxe(e));function xm(t){return EI(vI({},t),{level:(t==null?void 0:t.level)||Rxe.level})}function Bxe(t,e=_1){return t[e]||""}function Fxe(t,e,n=_1){return t[n]=e,t}function Ro(t,e=_1){let n="";return typeof t.bindings>"u"?n=Bxe(t,e):n=t.bindings().context||"",n}function jxe(t,e,n=_1){const r=Ro(t,n);return r.trim()?`${r}/${e}`:e}function Js(t,e,n=_1){const r=jxe(t,e,n),s=t.child({context:r});return Fxe(s,r,n)}function Wxe(t){var e,n;const r=new Oxe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:C1(EI(vI({},t.opts),{level:"trace",browser:EI(vI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function zxe(t){var e;const n=new kxe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:C1(EI(vI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function PT(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Wxe(t):zxe(t)}function Hxe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function zJ(t,...e){if(!Hxe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _F(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Gxe(t,e){zJ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ym=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function qxe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function HJ(t){return typeof t=="string"&&(t=qxe(t)),zJ(t),t}let Vxe=class{clone(){return this._cloneInto()}};function Kxe(t){const e=r=>t().update(HJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function GJ(t=32){if(Ym&&typeof Ym.getRandomValues=="function")return Ym.getRandomValues(new Uint8Array(t));if(Ym&&typeof Ym.randomBytes=="function")return Ym.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Yxe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Qxe=class extends Vxe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=mO(this.buffer)}update(e){_F(this);const{view:n,buffer:r,blockLen:s}=this;e=HJ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=mO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){_F(this),Gxe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Yxe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=mO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const zA=BigInt(2**32-1),w3=BigInt(32);function qJ(t,e=!1){return e?{h:Number(t&zA),l:Number(t>>w3&zA)}:{h:Number(t>>w3&zA)|0,l:Number(t&zA)|0}}function Jxe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=qJ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Zxe=(t,e)=>BigInt(t>>>0)<<w3|BigInt(e>>>0),Xxe=(t,e,n)=>t>>>n,eIe=(t,e,n)=>t<<32-n|e>>>n,tIe=(t,e,n)=>t>>>n|e<<32-n,nIe=(t,e,n)=>t<<32-n|e>>>n,rIe=(t,e,n)=>t<<64-n|e>>>n-32,sIe=(t,e,n)=>t>>>n-32|e<<64-n,iIe=(t,e)=>e,oIe=(t,e)=>t,aIe=(t,e,n)=>t<<n|e>>>32-n,cIe=(t,e,n)=>e<<n|t>>>32-n,lIe=(t,e,n)=>e<<n-32|t>>>64-n,uIe=(t,e,n)=>t<<n-32|e>>>64-n;function dIe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const hIe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),fIe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,pIe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),gIe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,mIe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),yIe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Wt={fromBig:qJ,split:Jxe,toBig:Zxe,shrSH:Xxe,shrSL:eIe,rotrSH:tIe,rotrSL:nIe,rotrBH:rIe,rotrBL:sIe,rotr32H:iIe,rotr32L:oIe,rotlSH:aIe,rotlSL:cIe,rotlBH:lIe,rotlBL:uIe,add:dIe,add3L:hIe,add3H:fIe,add4L:pIe,add4H:gIe,add5H:yIe,add5L:mIe},[wIe,bIe]=Wt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Bd=new Uint32Array(80),Fd=new Uint32Array(80);let vIe=class extends Qxe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Bd[v]=e.getUint32(n),Fd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Bd[v-15]|0,_=Fd[v-15]|0,I=Wt.rotrSH(A,_,1)^Wt.rotrSH(A,_,8)^Wt.shrSH(A,_,7),x=Wt.rotrSL(A,_,1)^Wt.rotrSL(A,_,8)^Wt.shrSL(A,_,7),N=Bd[v-2]|0,S=Fd[v-2]|0,O=Wt.rotrSH(N,S,19)^Wt.rotrBH(N,S,61)^Wt.shrSH(N,S,6),P=Wt.rotrSL(N,S,19)^Wt.rotrBL(N,S,61)^Wt.shrSL(N,S,6),F=Wt.add4L(x,P,Fd[v-7],Fd[v-16]),q=Wt.add4H(F,I,O,Bd[v-7],Bd[v-16]);Bd[v]=q|0,Fd[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=Wt.rotrSH(d,h,14)^Wt.rotrSH(d,h,18)^Wt.rotrBH(d,h,41),_=Wt.rotrSL(d,h,14)^Wt.rotrSL(d,h,18)^Wt.rotrBL(d,h,41),I=d&f^~d&g,x=h&p^~h&w,N=Wt.add5L(b,_,x,bIe[v],Fd[v]),S=Wt.add5H(N,y,A,I,wIe[v],Bd[v]),O=N|0,P=Wt.rotrSH(r,s,28)^Wt.rotrBH(r,s,34)^Wt.rotrBH(r,s,39),F=Wt.rotrSL(r,s,28)^Wt.rotrBL(r,s,34)^Wt.rotrBL(r,s,39),q=r&i^r&a^i&a,z=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Wt.add(l|0,u|0,S|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=Wt.add3L(O,F,z);r=Wt.add3H(T,S,P,q),s=T|0}({h:r,l:s}=Wt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Wt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Wt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Wt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Wt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Wt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Wt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Wt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Bd.fill(0),Fd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const EIe=Kxe(()=>new vIe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $$=BigInt(0),VJ=BigInt(1),CIe=BigInt(2);function U$(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function B$(t){if(!U$(t))throw new Error("Uint8Array expected")}function yO(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const _Ie=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function F$(t){B$(t);let e="";for(let n=0;n<t.length;n++)e+=_Ie[t[n]];return e}function KJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?$$:BigInt("0x"+t)}const pu={_0:48,_9:57,A:65,F:70,a:97,f:102};function AF(t){if(t>=pu._0&&t<=pu._9)return t-pu._0;if(t>=pu.A&&t<=pu.F)return t-(pu.A-10);if(t>=pu.a&&t<=pu.f)return t-(pu.a-10)}function YJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=AF(t.charCodeAt(i)),a=AF(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function AIe(t){return KJ(F$(t))}function HS(t){return B$(t),KJ(F$(Uint8Array.from(t).reverse()))}function QJ(t,e){return YJ(t.toString(16).padStart(e*2,"0"))}function b3(t,e){return QJ(t,e).reverse()}function gu(t,e,n){let r;if(typeof e=="string")try{r=YJ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(U$(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function SF(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];B$(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const wO=t=>typeof t=="bigint"&&$$<=t;function SIe(t,e,n){return wO(t)&&wO(e)&&wO(n)&&e<=t&&t<n}function yv(t,e,n,r){if(!SIe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function xIe(t){let e;for(e=0;t>$$;t>>=VJ,e+=1);return e}const IIe=t=>(CIe<<BigInt(t-1))-VJ,NIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||U$(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function j$(t,e,n={}){const r=(s,i,o)=>{const a=NIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function xF(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Ss=BigInt(0),Fr=BigInt(1),wp=BigInt(2),TIe=BigInt(3),v3=BigInt(4),IF=BigInt(5),NF=BigInt(8);function ts(t,e){const n=t%e;return n>=Ss?n:e+n}function RIe(t,e,n){if(e<Ss)throw new Error("invalid exponent, negatives unsupported");if(n<=Ss)throw new Error("invalid modulus");if(n===Fr)return Ss;let r=Fr;for(;e>Ss;)e&Fr&&(r=r*t%n),t=t*t%n,e>>=Fr;return r}function il(t,e,n){let r=t;for(;e-- >Ss;)r*=r,r%=n;return r}function TF(t,e){if(t===Ss)throw new Error("invert: expected non-zero number");if(e<=Ss)throw new Error("invert: expected positive modulus, got "+e);let n=ts(t,e),r=e,s=Ss,i=Fr;for(;n!==Ss;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Fr)throw new Error("invert: does not exist");return ts(s,e)}function PIe(t){const e=(t-Fr)/wp;let n,r,s;for(n=t-Fr,r=0;n%wp===Ss;n/=wp,r++);for(s=wp;s<t&&RIe(s,e,t)!==t-Fr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Fr)/v3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Fr)/wp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Fr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function OIe(t){if(t%v3===TIe){const e=(t+Fr)/v3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%NF===IF){const e=(t-IF)/NF;return function(n,r){const s=n.mul(r,wp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,wp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return PIe(t)}const kIe=(t,e)=>(ts(t,e)&Fr)===Fr,DIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function MIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=DIe.reduce((r,s)=>(r[s]="function",r),e);return j$(t,n)}function LIe(t,e,n){if(n<Ss)throw new Error("invalid exponent, negatives unsupported");if(n===Ss)return t.ONE;if(n===Fr)return e;let r=t.ONE,s=e;for(;n>Ss;)n&Fr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Fr;return r}function $Ie(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function JJ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ZJ(t,e,n=!1,r={}){if(t<=Ss)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=JJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:IIe(s),ZERO:Ss,ONE:Fr,create:c=>ts(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ss<=c&&c<t},is0:c=>c===Ss,isOdd:c=>(c&Fr)===Fr,neg:c=>ts(-c,t),eql:(c,l)=>c===l,sqr:c=>ts(c*c,t),add:(c,l)=>ts(c+l,t),sub:(c,l)=>ts(c-l,t),mul:(c,l)=>ts(c*l,t),pow:(c,l)=>LIe(a,c,l),div:(c,l)=>ts(c*TF(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>TF(c,t),sqrt:r.sqrt||(c=>(o||(o=OIe(t)),o(a,c))),invertBatch:c=>$Ie(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?b3(c,i):QJ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?HS(c):AIe(c)}});return Object.freeze(a)}const RF=BigInt(0),HA=BigInt(1);function bO(t,e){const n=e.negate();return t?n:e}function XJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function vO(t,e){XJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function UIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function BIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const EO=new WeakMap,eZ=new WeakMap;function CO(t){return eZ.get(t)||1}function FIe(t,e){return{constTimeNegate:bO,hasPrecomputes(n){return CO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>RF;)r&HA&&(s=s.add(i)),i=i.double(),r>>=HA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=vO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=vO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=HA);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(bO(y,r[g])):a=a.add(bO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=vO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===RF)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=HA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=EO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&EO.set(r,s(i))),i},wNAFCached(n,r,s){const i=CO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=CO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){XJ(r,e),eZ.set(n,r),EO.delete(n)}}}function jIe(t,e,n,r){if(UIe(n,t),BIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=xIe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function WIe(t){return MIe(t.Fp),j$(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...JJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const lc=BigInt(0),Qi=BigInt(1),GA=BigInt(2),zIe=BigInt(8),HIe={zip215:!0};function GIe(t){const e=WIe(t);return j$(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function qIe(t){const e=GIe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=GA<<BigInt(a*8)-Qi,u=n.create,d=ZJ(e.n,e.nBitLength),h=e.uvRatio||((T,R)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(R))}}catch{return{isValid:!1,value:lc}}}),f=e.adjustScalarBytes||(T=>T),p=e.domain||((T,R,U)=>{if(yO("phflag",U),R.length||U)throw new Error("Contexts/pre-hash are not supported");return T});function g(T,R){yv("coordinate "+T,R,lc,l)}function w(T){if(!(T instanceof v))throw new Error("ExtendedPoint expected")}const y=xF((T,R)=>{const{ex:U,ey:k,ez:M}=T,j=T.is0();R==null&&(R=j?zIe:n.inv(M));const Y=u(U*R),ne=u(k*R),le=u(M*R);if(j)return{x:lc,y:Qi};if(le!==Qi)throw new Error("invZ was invalid");return{x:Y,y:ne}}),b=xF(T=>{const{a:R,d:U}=e;if(T.is0())throw new Error("bad point: ZERO");const{ex:k,ey:M,ez:j,et:Y}=T,ne=u(k*k),le=u(M*M),oe=u(j*j),ae=u(oe*oe),ue=u(ne*R),tt=u(oe*u(ue+le)),Ne=u(ae+u(U*u(ne*le)));if(tt!==Ne)throw new Error("bad point: equation left != right (1)");const $e=u(k*M),st=u(j*Y);if($e!==st)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(R,U,k,M){this.ex=R,this.ey=U,this.ez=k,this.et=M,g("x",R),g("y",U),g("z",k),g("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof v)throw new Error("extended point not allowed");const{x:U,y:k}=R||{};return g("x",U),g("y",k),new v(U,k,Qi,u(U*k))}static normalizeZ(R){const U=n.invertBatch(R.map(k=>k.ez));return R.map((k,M)=>k.toAffine(U[M])).map(v.fromAffine)}static msm(R,U){return jIe(v,d,R,U)}_setWindowSize(R){I.setWindowSize(this,R)}assertValidity(){b(this)}equals(R){w(R);const{ex:U,ey:k,ez:M}=this,{ex:j,ey:Y,ez:ne}=R,le=u(U*ne),oe=u(j*M),ae=u(k*ne),ue=u(Y*M);return le===oe&&ae===ue}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:R}=e,{ex:U,ey:k,ez:M}=this,j=u(U*U),Y=u(k*k),ne=u(GA*u(M*M)),le=u(R*j),oe=U+k,ae=u(u(oe*oe)-j-Y),ue=le+Y,tt=ue-ne,Ne=le-Y,$e=u(ae*tt),st=u(ue*Ne),Ot=u(ae*Ne),Xt=u(tt*ue);return new v($e,st,Xt,Ot)}add(R){w(R);const{a:U,d:k}=e,{ex:M,ey:j,ez:Y,et:ne}=this,{ex:le,ey:oe,ez:ae,et:ue}=R;if(U===BigInt(-1)){const it=u((j-M)*(oe+le)),It=u((j+M)*(oe-le)),St=u(It-it);if(St===lc)return this.double();const Kn=u(Y*GA*ue),Tt=u(ne*GA*ae),Hr=Tt+Kn,jt=It+it,zn=Tt-Kn,Sr=u(Hr*St),qi=u(jt*zn),el=u(Hr*zn),zf=u(St*jt);return new v(Sr,qi,zf,el)}const tt=u(M*le),Ne=u(j*oe),$e=u(ne*k*ue),st=u(Y*ae),Ot=u((M+j)*(le+oe)-tt-Ne),Xt=st-$e,X=st+$e,ce=u(Ne-U*tt),Ce=u(Ot*Xt),me=u(X*ce),Ee=u(Ot*ce),Xe=u(Xt*X);return new v(Ce,me,Xe,Ee)}subtract(R){return this.add(R.negate())}wNAF(R){return I.wNAFCached(this,R,v.normalizeZ)}multiply(R){const U=R;yv("scalar",U,Qi,r);const{p:k,f:M}=this.wNAF(U);return v.normalizeZ([k,M])[0]}multiplyUnsafe(R,U=v.ZERO){const k=R;return yv("scalar",k,lc,r),k===lc?_:this.is0()||k===Qi?this:I.wNAFCachedUnsafe(this,k,v.normalizeZ,U)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(R){return y(this,R)}clearCofactor(){const{h:R}=e;return R===Qi?this:this.multiplyUnsafe(R)}static fromHex(R,U=!1){const{d:k,a:M}=e,j=n.BYTES;R=gu("pointHex",R,j),yO("zip215",U);const Y=R.slice(),ne=R[j-1];Y[j-1]=ne&-129;const le=HS(Y),oe=U?l:n.ORDER;yv("pointHex.y",le,lc,oe);const ae=u(le*le),ue=u(ae-Qi),tt=u(k*ae-M);let{isValid:Ne,value:$e}=h(ue,tt);if(!Ne)throw new Error("Point.fromHex: invalid y coordinate");const st=($e&Qi)===Qi,Ot=(ne&128)!==0;if(!U&&$e===lc&&Ot)throw new Error("Point.fromHex: x=0 and x_0=1");return Ot!==st&&($e=u(-$e)),v.fromAffine({x:$e,y:le})}static fromPrivateKey(R){return S(R).point}toRawBytes(){const{x:R,y:U}=this.toAffine(),k=b3(U,n.BYTES);return k[k.length-1]|=R&Qi?128:0,k}toHex(){return F$(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Qi,u(e.Gx*e.Gy)),v.ZERO=new v(lc,Qi,Qi,lc);const{BASE:A,ZERO:_}=v,I=FIe(v,a*8);function x(T){return ts(T,r)}function N(T){return x(HS(T))}function S(T){const R=n.BYTES;T=gu("private key",T,R);const U=gu("hashed private key",i(T),2*R),k=f(U.slice(0,R)),M=U.slice(R,2*R),j=N(k),Y=A.multiply(j),ne=Y.toRawBytes();return{head:k,prefix:M,scalar:j,point:Y,pointBytes:ne}}function O(T){return S(T).pointBytes}function P(T=new Uint8Array,...R){const U=SF(...R);return N(i(p(U,gu("context",T),!!s)))}function F(T,R,U={}){T=gu("message",T),s&&(T=s(T));const{prefix:k,scalar:M,pointBytes:j}=S(R),Y=P(U.context,k,T),ne=A.multiply(Y).toRawBytes(),le=P(U.context,ne,j,T),oe=x(Y+le*M);yv("signature.s",oe,lc,r);const ae=SF(ne,b3(oe,n.BYTES));return gu("result",ae,n.BYTES*2)}const q=HIe;function z(T,R,U,k=q){const{context:M,zip215:j}=k,Y=n.BYTES;T=gu("signature",T,2*Y),R=gu("message",R),U=gu("publicKey",U,Y),j!==void 0&&yO("zip215",j),s&&(R=s(R));const ne=HS(T.slice(Y,2*Y));let le,oe,ae;try{le=v.fromHex(U,j),oe=v.fromHex(T.slice(0,Y),j),ae=A.multiplyUnsafe(ne)}catch{return!1}if(!j&&le.isSmallOrder())return!1;const ue=P(M,oe.toRawBytes(),le.toRawBytes(),R);return oe.add(le.multiplyUnsafe(ue)).subtract(ae).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:F,verify:z,ExtendedPoint:v,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,R=v.BASE){return R._setWindowSize(T),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const W$=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),PF=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const VIe=BigInt(1),OF=BigInt(2);BigInt(3);const KIe=BigInt(5),YIe=BigInt(8);function QIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=W$,o=t*t%i*t%i,a=il(o,OF,i)*o%i,c=il(a,VIe,i)*t%i,l=il(c,KIe,i)*c%i,u=il(l,e,i)*l%i,d=il(u,n,i)*u%i,h=il(d,r,i)*d%i,f=il(h,s,i)*h%i,p=il(f,s,i)*h%i,g=il(p,e,i)*l%i;return{pow_p_5_8:il(g,OF,i)*t%i,b2:o}}function JIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ZIe(t,e){const n=W$,r=ts(e*e*e,n),s=ts(r*r*e,n),i=QIe(t*s).pow_p_5_8;let o=ts(t*r*i,n);const a=ts(e*o*o,n),c=o,l=ts(o*PF,n),u=a===t,d=a===ts(-t,n),h=a===ts(-t*PF,n);return u&&(o=c),(d||h)&&(o=l),kIe(o,n)&&(o=ts(-o,n)),{isValid:u||d,value:o}}const XIe=ZJ(W$,void 0,!0),eNe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:XIe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:YIe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:EIe,randomBytes:GJ,adjustScalarBytes:JIe,uvRatio:ZIe},tZ=qIe(eNe),tNe="EdDSA",nNe="JWT",CI=".",OT="base64url",nZ="utf8",rZ="utf8",rNe=":",sNe="did",iNe="key",kF="base58btc",oNe="z",aNe="K36",cNe=32;function z$(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function sZ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?z$(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function iZ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=sZ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return z$(n)}function lNe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var uNe=lNe,dNe=uNe;const oZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},hNe=t=>new TextEncoder().encode(t),fNe=t=>new TextDecoder().decode(t);let pNe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},gNe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return aZ(this,e)}},mNe=class{constructor(e){this.decoders=e}or(e){return aZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const aZ=(t,e)=>new mNe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let yNe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new pNe(e,n,r),this.decoder=new gNe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const kT=({name:t,prefix:e,encode:n,decode:r})=>new yNe(t,e,n,r),A1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=dNe(n,e);return kT({prefix:t,name:e,encode:r,decode:i=>oZ(s(i))})},wNe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},bNe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Zs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>kT({prefix:e,name:t,encode(s){return bNe(s,r,n)},decode(s){return wNe(s,r,n,t)}}),vNe=kT({prefix:"\0",name:"identity",encode:t=>fNe(t),decode:t=>hNe(t)});var ENe=Object.freeze({__proto__:null,identity:vNe});const CNe=Zs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var _Ne=Object.freeze({__proto__:null,base2:CNe});const ANe=Zs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var SNe=Object.freeze({__proto__:null,base8:ANe});const xNe=A1({prefix:"9",name:"base10",alphabet:"0123456789"});var INe=Object.freeze({__proto__:null,base10:xNe});const NNe=Zs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),TNe=Zs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var RNe=Object.freeze({__proto__:null,base16:NNe,base16upper:TNe});const PNe=Zs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ONe=Zs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),kNe=Zs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),DNe=Zs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),MNe=Zs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),LNe=Zs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$Ne=Zs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),UNe=Zs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),BNe=Zs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var FNe=Object.freeze({__proto__:null,base32:PNe,base32upper:ONe,base32pad:kNe,base32padupper:DNe,base32hex:MNe,base32hexupper:LNe,base32hexpad:$Ne,base32hexpadupper:UNe,base32z:BNe});const jNe=A1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),WNe=A1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zNe=Object.freeze({__proto__:null,base36:jNe,base36upper:WNe});const HNe=A1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),GNe=A1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qNe=Object.freeze({__proto__:null,base58btc:HNe,base58flickr:GNe});const VNe=Zs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),KNe=Zs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),YNe=Zs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),QNe=Zs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var JNe=Object.freeze({__proto__:null,base64:VNe,base64pad:KNe,base64url:YNe,base64urlpad:QNe});const cZ=Array.from(""),ZNe=cZ.reduce((t,e,n)=>(t[n]=e,t),[]),XNe=cZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function eTe(t){return t.reduce((e,n)=>(e+=ZNe[n],e),"")}function tTe(t){const e=[];for(const n of t){const r=XNe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const nTe=kT({prefix:"",name:"base256emoji",encode:eTe,decode:tTe});var rTe=Object.freeze({__proto__:null,base256emoji:nTe}),sTe=lZ,DF=128,iTe=-128,oTe=Math.pow(2,31);function lZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=oTe;)e[n++]=t&255|DF,t/=128;for(;t&iTe;)e[n++]=t&255|DF,t>>>=7;return e[n]=t|0,lZ.bytes=n-r+1,e}var aTe=E3,cTe=128,MF=127;function E3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw E3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&MF)<<s:(o&MF)*Math.pow(2,s),s+=7}while(o>=cTe);return E3.bytes=i-r,n}var lTe=Math.pow(2,7),uTe=Math.pow(2,14),dTe=Math.pow(2,21),hTe=Math.pow(2,28),fTe=Math.pow(2,35),pTe=Math.pow(2,42),gTe=Math.pow(2,49),mTe=Math.pow(2,56),yTe=Math.pow(2,63),wTe=function(t){return t<lTe?1:t<uTe?2:t<dTe?3:t<hTe?4:t<fTe?5:t<pTe?6:t<gTe?7:t<mTe?8:t<yTe?9:10},bTe={encode:sTe,decode:aTe,encodingLength:wTe},uZ=bTe;const LF=(t,e,n=0)=>(uZ.encode(t,e,n),e),$F=t=>uZ.encodingLength(t),C3=(t,e)=>{const n=e.byteLength,r=$F(t),s=r+$F(n),i=new Uint8Array(s+n);return LF(t,i,0),LF(n,i,r),i.set(e,s),new vTe(t,n,e,i)};let vTe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const dZ=({name:t,code:e,encode:n})=>new ETe(t,e,n);let ETe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?C3(this.code,n):n.then(r=>C3(this.code,r))}else throw Error("Unknown type, must be binary type")}};const hZ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),CTe=dZ({name:"sha2-256",code:18,encode:hZ("SHA-256")}),_Te=dZ({name:"sha2-512",code:19,encode:hZ("SHA-512")});var ATe=Object.freeze({__proto__:null,sha256:CTe,sha512:_Te});const fZ=0,STe="identity",pZ=oZ,xTe=t=>C3(fZ,pZ(t)),ITe={code:fZ,name:STe,encode:pZ,digest:xTe};var NTe=Object.freeze({__proto__:null,identity:ITe});new TextEncoder,new TextDecoder;const UF={...ENe,..._Ne,...SNe,...INe,...RNe,...FNe,...zNe,...qNe,...JNe,...rTe};({...ATe,...NTe});function gZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const BF=gZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),_O=gZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=sZ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),mZ={utf8:BF,"utf-8":BF,hex:UF.base16,latin1:_O,ascii:_O,binary:_O,...UF};function DT(t,e="utf8"){const n=mZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function xb(t,e="utf8"){const n=mZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?z$(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function FF(t){return Vg(DT(xb(t,OT),nZ))}function _I(t){return DT(xb(wd(t),nZ),OT)}function yZ(t){const e=xb(aNe,kF),n=oNe+DT(iZ([e,t]),kF);return[sNe,iNe,n].join(rNe)}function TTe(t){return DT(t,OT)}function RTe(t){return xb(t,OT)}function PTe(t){return xb([_I(t.header),_I(t.payload)].join(CI),rZ)}function OTe(t){return[_I(t.header),_I(t.payload),TTe(t.signature)].join(CI)}function _3(t){const e=t.split(CI),n=FF(e[0]),r=FF(e[1]),s=RTe(e[2]),i=xb(e.slice(0,2).join(CI),rZ);return{header:n,payload:r,signature:s,data:i}}function jF(t=GJ(cNe)){const e=tZ.getPublicKey(t);return{secretKey:iZ([t,e]),publicKey:e}}async function kTe(t,e,n,r,s=Re.fromMiliseconds(Date.now())){const i={alg:tNe,typ:nNe},o=yZ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=PTe({header:i,payload:c}),u=tZ.sign(l,r.secretKey.slice(0,32));return OTe({header:i,payload:c,signature:u})}var WF=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},DTe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),MTe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),LTe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),$Te=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),UTe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),BTe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,FTe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,zF=3,jTe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",BTe]],HF=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function WTe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new UTe:typeof navigator<"u"?HTe(navigator.userAgent):qTe()}function zTe(t){return t!==""&&jTe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function HTe(t){var e=zTe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new $Te;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<zF&&(s=WF(WF([],s,!0),VTe(zF-s.length),!0)):s=[];var i=s.join("."),o=GTe(t),a=FTe.exec(t);return a&&a[1]?new LTe(n,i,o,a[1]):new DTe(n,i,o)}function GTe(t){for(var e=0,n=HF.length;e<n;e++){var r=HF[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function qTe(){var t=typeof process<"u"&&process.version;return t?new MTe(process.version.slice(1)):null}function VTe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.getLocalStorage=nr.getLocalStorageOrThrow=nr.getCrypto=nr.getCryptoOrThrow=wZ=nr.getLocation=nr.getLocationOrThrow=H$=nr.getNavigator=nr.getNavigatorOrThrow=Kg=nr.getDocument=nr.getDocumentOrThrow=nr.getFromWindowOrThrow=nr.getFromWindow=void 0;function Im(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}nr.getFromWindow=Im;function Ib(t){const e=Im(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}nr.getFromWindowOrThrow=Ib;function KTe(){return Ib("document")}nr.getDocumentOrThrow=KTe;function YTe(){return Im("document")}var Kg=nr.getDocument=YTe;function QTe(){return Ib("navigator")}nr.getNavigatorOrThrow=QTe;function JTe(){return Im("navigator")}var H$=nr.getNavigator=JTe;function ZTe(){return Ib("location")}nr.getLocationOrThrow=ZTe;function XTe(){return Im("location")}var wZ=nr.getLocation=XTe;function eRe(){return Ib("crypto")}nr.getCryptoOrThrow=eRe;function tRe(){return Im("crypto")}nr.getCrypto=tRe;function nRe(){return Ib("localStorage")}nr.getLocalStorageOrThrow=nRe;function rRe(){return Im("localStorage")}nr.getLocalStorage=rRe;var G$={};Object.defineProperty(G$,"__esModule",{value:!0});var bZ=G$.getWindowMetadata=void 0;const GF=nr;function sRe(){let t,e;try{t=GF.getDocumentOrThrow(),e=GF.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");y+=v+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}bZ=G$.getWindowMetadata=sRe;function iRe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let A=p-1;(b!==0||v<d)&&A!==-1;A--,v++)b+=256*g[A]>>>0,g[A]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let A=0;for(let _=f-1;(v!==0||A<h)&&_!==-1;_--,A++)v+=n*p[_]>>>0,p[_]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var oRe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const vZ=iRe(oRe);function EZ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function TE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=EZ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function aRe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var cRe=aRe,lRe=cRe;const uRe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},dRe=t=>new TextEncoder().encode(t),hRe=t=>new TextDecoder().decode(t);class fRe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class pRe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return CZ(this,e)}}class gRe{constructor(e){this.decoders=e}or(e){return CZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const CZ=(t,e)=>new gRe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class mRe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new fRe(e,n,r),this.decoder=new pRe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const MT=({name:t,prefix:e,encode:n,decode:r})=>new mRe(t,e,n,r),S1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=lRe(n,e);return MT({prefix:t,name:e,encode:r,decode:i=>uRe(s(i))})},yRe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},wRe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Xs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>MT({prefix:e,name:t,encode(s){return wRe(s,r,n)},decode(s){return yRe(s,r,n,t)}}),bRe=MT({prefix:"\0",name:"identity",encode:t=>hRe(t),decode:t=>dRe(t)}),vRe=Object.freeze(Object.defineProperty({__proto__:null,identity:bRe},Symbol.toStringTag,{value:"Module"})),ERe=Xs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),CRe=Object.freeze(Object.defineProperty({__proto__:null,base2:ERe},Symbol.toStringTag,{value:"Module"})),_Re=Xs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ARe=Object.freeze(Object.defineProperty({__proto__:null,base8:_Re},Symbol.toStringTag,{value:"Module"})),SRe=S1({prefix:"9",name:"base10",alphabet:"0123456789"}),xRe=Object.freeze(Object.defineProperty({__proto__:null,base10:SRe},Symbol.toStringTag,{value:"Module"})),IRe=Xs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),NRe=Xs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),TRe=Object.freeze(Object.defineProperty({__proto__:null,base16:IRe,base16upper:NRe},Symbol.toStringTag,{value:"Module"})),RRe=Xs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),PRe=Xs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ORe=Xs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kRe=Xs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),DRe=Xs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),MRe=Xs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),LRe=Xs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$Re=Xs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),URe=Xs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),BRe=Object.freeze(Object.defineProperty({__proto__:null,base32:RRe,base32hex:DRe,base32hexpad:LRe,base32hexpadupper:$Re,base32hexupper:MRe,base32pad:ORe,base32padupper:kRe,base32upper:PRe,base32z:URe},Symbol.toStringTag,{value:"Module"})),FRe=S1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jRe=S1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),WRe=Object.freeze(Object.defineProperty({__proto__:null,base36:FRe,base36upper:jRe},Symbol.toStringTag,{value:"Module"})),zRe=S1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),HRe=S1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),GRe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:zRe,base58flickr:HRe},Symbol.toStringTag,{value:"Module"})),qRe=Xs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),VRe=Xs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),KRe=Xs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),YRe=Xs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),QRe=Object.freeze(Object.defineProperty({__proto__:null,base64:qRe,base64pad:VRe,base64url:KRe,base64urlpad:YRe},Symbol.toStringTag,{value:"Module"})),_Z=Array.from(""),JRe=_Z.reduce((t,e,n)=>(t[n]=e,t),[]),ZRe=_Z.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function XRe(t){return t.reduce((e,n)=>(e+=JRe[n],e),"")}function ePe(t){const e=[];for(const n of t){const r=ZRe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const tPe=MT({prefix:"",name:"base256emoji",encode:XRe,decode:ePe}),nPe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:tPe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const qF={...vRe,...CRe,...ARe,...xRe,...TRe,...BRe,...WRe,...GRe,...QRe,...nPe};function AZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const VF=AZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),AO=AZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=EZ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),SZ={utf8:VF,"utf-8":VF,hex:qF.base16,latin1:AO,ascii:AO,binary:AO,...qF};function za(t,e="utf8"){const n=SZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function So(t,e="utf8"){const n=SZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const rPe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},sPe="PARSE_ERROR",iPe="INVALID_REQUEST",oPe="METHOD_NOT_FOUND",aPe="INVALID_PARAMS",xZ="INTERNAL_ERROR",q$="SERVER_ERROR",cPe=[-32700,-32600,-32601,-32602,-32603],RE={[sPe]:{code:-32700,message:"Parse error"},[iPe]:{code:-32600,message:"Invalid Request"},[oPe]:{code:-32601,message:"Method not found"},[aPe]:{code:-32602,message:"Invalid params"},[xZ]:{code:-32603,message:"Internal error"},[q$]:{code:-32e3,message:"Server error"}},IZ=q$;function lPe(t){return cPe.includes(t)}function KF(t){return Object.keys(RE).includes(t)?RE[t]:RE[IZ]}function uPe(t){const e=Object.values(RE).find(n=>n.code===t);return e||RE[IZ]}function NZ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var TZ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A3=function(t,e){return A3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},A3(t,e)};function dPe(t,e){A3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var S3=function(){return S3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},S3.apply(this,arguments)};function hPe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fPe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function pPe(t,e){return function(n,r){e(n,r,t)}}function gPe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function mPe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function yPe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function wPe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function bPe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function x3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function RZ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function vPe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(RZ(arguments[e]));return t}function EPe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function HC(t){return this instanceof HC?(this.v=t,this):new HC(t)}function CPe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof HC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function _Pe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:HC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function APe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof x3=="function"?x3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function SPe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function xPe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function IPe(t){return t&&t.__esModule?t:{default:t}}function NPe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function TPe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const RPe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return S3},__asyncDelegator:_Pe,__asyncGenerator:CPe,__asyncValues:APe,__await:HC,__awaiter:mPe,__classPrivateFieldGet:NPe,__classPrivateFieldSet:TPe,__createBinding:wPe,__decorate:fPe,__exportStar:bPe,__extends:dPe,__generator:yPe,__importDefault:IPe,__importStar:xPe,__makeTemplateObject:SPe,__metadata:gPe,__param:pPe,__read:RZ,__rest:hPe,__spread:vPe,__spreadArrays:EPe,__values:x3},Symbol.toStringTag,{value:"Module"})),PPe=bz(RPe);var mu={},YF;function OPe(){if(YF)return mu;YF=1,Object.defineProperty(mu,"__esModule",{value:!0}),mu.isBrowserCryptoAvailable=mu.getSubtleCrypto=mu.getBrowerCrypto=void 0;function t(){return(Nl==null?void 0:Nl.crypto)||(Nl==null?void 0:Nl.msCrypto)||{}}mu.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}mu.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return mu.isBrowserCryptoAvailable=n,mu}var yu={},QF;function kPe(){if(QF)return yu;QF=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.isBrowser=yu.isNode=yu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}yu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}yu.isNode=e;function n(){return!t()&&!e()}return yu.isBrowser=n,yu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=PPe;e.__exportStar(OPe(),t),e.__exportStar(kPe(),t)})(TZ);function fl(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function $p(t=6){return BigInt(fl(t))}function Wh(t,e,n){return{id:n||fl(),jsonrpc:"2.0",method:t,params:e}}function LT(t,e){return{id:t,jsonrpc:"2.0",result:e}}function $T(t,e,n){return{id:t,jsonrpc:"2.0",error:DPe(e)}}function DPe(t,e){return typeof t>"u"?KF(xZ):(typeof t=="string"&&(t=Object.assign(Object.assign({},KF(q$)),{message:t})),lPe(t.code)&&(t=uPe(t.code)),t)}let MPe=class{},LPe=class extends MPe{constructor(){super()}},$Pe=class extends LPe{constructor(e){super()}};const UPe="^https?:",BPe="^wss?:";function FPe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function PZ(t,e){const n=FPe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function JF(t){return PZ(t,UPe)}function ZF(t){return PZ(t,BPe)}function jPe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function OZ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function V$(t){return OZ(t)&&"method"in t}function UT(t){return OZ(t)&&(pl(t)||Da(t))}function pl(t){return"result"in t}function Da(t){return"error"in t}let rc=class extends $Pe{constructor(e){super(e),this.events=new nc.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Wh(e.method,e.params||[],e.id||$p().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Da(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),UT(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const WPe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),zPe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",XF=t=>t.split("?")[0],ej=10,HPe=WPe();let GPe=class{constructor(e){if(this.url=e,this.events=new nc.EventEmitter,this.registering=!1,!ZF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(wd(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!ZF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=TZ.isReactNative()?void 0:{rejectUnauthorized:!jPe(e)},i=new HPe(e,[],s);zPe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Vg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=$T(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return NZ(e,XF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ej&&this.events.setMaxListeners(ej)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${XF(this.url)}`));return this.events.emit("register_error",n),n}};var I3={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Nl<"u"&&Nl,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Nl<"u"&&Nl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(T){return T&&DataView.prototype.isPrototypeOf(T)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&u.indexOf(Object.prototype.toString.call(T))>-1};function h(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function f(T){return typeof T!="string"&&(T=String(T)),T}function p(T){var R={next:function(){var U=T.shift();return{done:U===void 0,value:U}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function g(T){this.map={},T instanceof g?T.forEach(function(R,U){this.append(U,R)},this):Array.isArray(T)?T.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(R){this.append(R,T[R])},this)}g.prototype.append=function(T,R){T=h(T),R=f(R);var U=this.map[T];this.map[T]=U?U+", "+R:R},g.prototype.delete=function(T){delete this.map[h(T)]},g.prototype.get=function(T){return T=h(T),this.has(T)?this.map[T]:null},g.prototype.has=function(T){return this.map.hasOwnProperty(h(T))},g.prototype.set=function(T,R){this.map[h(T)]=f(R)},g.prototype.forEach=function(T,R){for(var U in this.map)this.map.hasOwnProperty(U)&&T.call(R,this.map[U],U,this)},g.prototype.keys=function(){var T=[];return this.forEach(function(R,U){T.push(U)}),p(T)},g.prototype.values=function(){var T=[];return this.forEach(function(R){T.push(R)}),p(T)},g.prototype.entries=function(){var T=[];return this.forEach(function(R,U){T.push([U,R])}),p(T)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function y(T){return new Promise(function(R,U){T.onload=function(){R(T.result)},T.onerror=function(){U(T.error)}})}function b(T){var R=new FileReader,U=y(R);return R.readAsArrayBuffer(T),U}function v(T){var R=new FileReader,U=y(R),k=/charset=([A-Za-z0-9_-]+)/.exec(T.type),M=k?k[1]:"utf-8";return R.readAsText(T,M),U}function A(T){for(var R=new Uint8Array(T),U=new Array(R.length),k=0;k<R.length;k++)U[k]=String.fromCharCode(R[k]);return U.join("")}function _(T){if(T.slice)return T.slice(0);var R=new Uint8Array(T.byteLength);return R.set(new Uint8Array(T)),R.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:c.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:c.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():c.arrayBuffer&&c.blob&&l(T)?(this._bodyArrayBuffer=_(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=_(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=w(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(T){var R=T.toUpperCase();return x.indexOf(R)>-1?R:T}function S(T,R){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var U=R.body;if(T instanceof S){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,R.headers||(this.headers=new g(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!U&&T._bodyInit!=null&&(U=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new g(R.headers)),this.method=N(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&U)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(U),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function O(T){var R=new FormData;return T.trim().split("&").forEach(function(U){if(U){var k=U.split("="),M=k.shift().replace(/\+/g," "),j=k.join("=").replace(/\+/g," ");R.append(decodeURIComponent(M),decodeURIComponent(j))}}),R}function P(T){var R=new g,U=T.replace(/\r?\n[\t ]+/g," ");return U.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var M=k.split(":"),j=M.shift().trim();if(j){var Y=M.join(":").trim();try{R.append(j,Y)}catch(ne){console.warn("Response "+ne.message)}}}),R}I.call(S.prototype);function F(T,R){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new g(R.headers),this.url=R.url||"",this._initBody(T)}I.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var T=new F(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var q=[301,302,303,307,308];F.redirect=function(T,R){if(q.indexOf(R)===-1)throw new RangeError("Invalid status code");return new F(null,{status:R,headers:{location:T}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,U){this.message=R,this.name=U;var k=Error(R);this.stack=k.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function z(T,R){return new Promise(function(U,k){var M=new S(T,R);if(M.signal&&M.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function Y(){j.abort()}j.onload=function(){var oe={statusText:j.statusText,headers:P(j.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(j.status<200||j.status>599)?oe.status=200:oe.status=j.status,oe.url="responseURL"in j?j.responseURL:oe.headers.get("X-Request-URL");var ae="response"in j?j.response:j.responseText;setTimeout(function(){U(new F(ae,oe))},0)},j.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function ne(oe){try{return oe===""&&a.location.href?a.location.href:oe}catch{return oe}}if(j.open(M.method,ne(M.url),!0),M.credentials==="include"?j.withCredentials=!0:M.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof g||a.Headers&&R.headers instanceof a.Headers)){var le=[];Object.getOwnPropertyNames(R.headers).forEach(function(oe){le.push(h(oe)),j.setRequestHeader(oe,f(R.headers[oe]))}),M.headers.forEach(function(oe,ae){le.indexOf(ae)===-1&&j.setRequestHeader(ae,oe)})}else M.headers.forEach(function(oe,ae){j.setRequestHeader(ae,oe)});M.signal&&(M.signal.addEventListener("abort",Y),j.onreadystatechange=function(){j.readyState===4&&M.signal.removeEventListener("abort",Y)}),j.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return z.polyfill=!0,a.fetch||(a.fetch=z,a.Headers=g,a.Request=S,a.Response=F),o.Headers=g,o.Request=S,o.Response=F,o.fetch=z,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(I3,I3.exports);var qPe=I3.exports;const tj=lm(qPe);var VPe=Object.defineProperty,KPe=Object.defineProperties,YPe=Object.getOwnPropertyDescriptors,nj=Object.getOwnPropertySymbols,QPe=Object.prototype.hasOwnProperty,JPe=Object.prototype.propertyIsEnumerable,rj=(t,e,n)=>e in t?VPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sj=(t,e)=>{for(var n in e||(e={}))QPe.call(e,n)&&rj(t,n,e[n]);if(nj)for(var n of nj(e))JPe.call(e,n)&&rj(t,n,e[n]);return t},ij=(t,e)=>KPe(t,YPe(e));const ZPe={Accept:"application/json","Content-Type":"application/json"},XPe="POST",oj={headers:ZPe,method:XPe},aj=10;let Zc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new nc.EventEmitter,this.isAvailable=!1,this.registering=!1,!JF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=wd(e),r=await(await tj(this.url,ij(sj({},oj),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!JF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=wd({id:1,jsonrpc:"2.0",method:"test",params:[]});await tj(e,ij(sj({},oj),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Vg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=$T(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return NZ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>aj&&this.events.setMaxListeners(aj)}};const PE={getSIWX(){return ve.state.siwx},async initializeIfEnabled(){var i;const t=ve.state.siwx,e=H.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(H.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await As.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),mr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=bt._getClient())==null?void 0:i.disconnect().catch(console.error)),Ht.reset("Connect"),Mc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ve.state.siwx,e=lt.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork(),r=bt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();je.getConnectorId(n.chainNamespace)===We.CONNECTOR_ID.AUTH&&Ht.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),As.close(),mr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!As.state.open||Ht.state.view==="ApproveTransaction")&&await As.open({view:"SIWXSignMessage"}),i.isSmartAccount?Mc.showError("This application might not support Smart Accounts"):Mc.showError("Signature declined"),mr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await bt.disconnect():As.close(),Ht.reset("Connect"),mr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ve.state.siwx,e=lt.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ht.state.view==="ApproveTransaction",r=Ht.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=PE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=H.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Mc.showLoading("Authenticating...",{autoClose:!1}),Ye.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),mr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:PE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),mr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:PE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Mc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=H.state.activeChain;return{network:((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ye.state.preferredAccountTypes)==null?void 0:n[t])===qs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function qA(t,e){return je.getConnectorId(t)===e}function eOe(t){const e=Array.from(H.state.chains.keys());let n=[];return t?(n.push([t,H.state.chains.get(t)]),qA(t,We.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&qA(r,We.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,H.state.chains.get(r)])}):qA(t,We.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&qA(r,We.CONNECTOR_ID.AUTH)&&n.push([r,H.state.chains.get(r)])})):n=Array.from(H.state.chains.entries()),n}const ho={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},AI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[We.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[We.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[We.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[We.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[We.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[We.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[We.CONNECTOR_ID.INJECTED]:"Browser Wallet",[We.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[We.CONNECTOR_ID.COINBASE]:"Coinbase",[We.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[We.CONNECTOR_ID.LEDGER]:"Ledger",[We.CONNECTOR_ID.SAFE]:"Safe"}},BT={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${ho.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},tOe=new AbortController,Rl={EmbeddedWalletAbortController:tOe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${nOe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function nOe(){return typeof window<"u"}const rOe={createLogger(t,e="error"){const n=xm({level:e}),{logger:r}=PT({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},sOe="rpc.walletconnect.org";function cj(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const SO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],wy={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===sOe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:We.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${We.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return SO.includes(e)?cj(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:AI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>wy.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Wa(a.url,a.config))}),SO.includes(t.caipNetworkId)&&r.push(Wa(cj(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Wa(a))}),gI(r)},extendWagmiTransports(t,e,n){if(SO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return gI([n,Wa(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:We.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Qe.getActiveCaipNetworkId(),n=H.getAllRequestedCaipNetworks(),r=Array.from(((c=H.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},SI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ji=dr({providers:{...SI},providerIds:{...SI}}),$n={state:Ji,subscribeKey(t,e){return wi(Ji,t,e)},subscribe(t){return mi(Ji,()=>{t(Ji)})},subscribeProviders(t){return mi(Ji.providers,()=>t(Ji.providers))},setProvider(t,e){e&&(Ji.providers[t]=Gg(e))},getProvider(t){return Ji.providers[t]},setProviderId(t,e){e&&(Ji.providerIds[t]=e)},getProviderId(t){if(t)return Ji.providerIds[t]},reset(){Ji.providers={...SI},Ji.providerIds={...SI}},resetChain(t){Ji.providers[t]=void 0,Ji.providerIds[t]=void 0}},lj={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ls={set(t,e){Qo.isClient&&localStorage.setItem(`${Ve.STORAGE_KEY}${t}`,e)},get(t){return Qo.isClient?localStorage.getItem(`${Ve.STORAGE_KEY}${t}`):null},delete(t,e){Qo.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ve.STORAGE_KEY}${t}`))}},VA=30*1e3,Qo={checkIfAllowedToTriggerEmail(){const t=Ls.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<VA){const n=Math.ceil((VA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ls.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<VA)return Math.ceil((VA-e)/1e3)}return 0},checkIfRequestExists(t){return qs.NOT_SAFE_RPC_METHODS.includes(t.method)||qs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(lj.transactionHash))||(t==null?void 0:t.match(lj.signedMessage)))?Ve.RPC_RESPONSE_TYPE_TX:Ve.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return qs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var yn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(yn||(yn={}));var N3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(N3||(N3={}));const Ue=yn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ch=t=>{switch(typeof t){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return isNaN(t)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(t)?Ue.array:t===null?Ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ue.promise:typeof Map<"u"&&t instanceof Map?Ue.map:typeof Set<"u"&&t instanceof Set?Ue.set:typeof Date<"u"&&t instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Ie=yn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),iOe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class zc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,yn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}zc.create=t=>new zc(t);const GC=(t,e)=>{let n;switch(t.code){case Ie.invalid_type:t.received===Ue.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ie.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yn.jsonStringifyReplacer)}`;break;case Ie.unrecognized_keys:n=`Unrecognized key(s) in object: ${yn.joinValues(t.keys,", ")}`;break;case Ie.invalid_union:n="Invalid input";break;case Ie.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yn.joinValues(t.options)}`;break;case Ie.invalid_enum_value:n=`Invalid enum value. Expected ${yn.joinValues(t.options)}, received '${t.received}'`;break;case Ie.invalid_arguments:n="Invalid function arguments";break;case Ie.invalid_return_type:n="Invalid function return type";break;case Ie.invalid_date:n="Invalid date";break;case Ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ie.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ie.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ie.custom:n="Invalid input";break;case Ie.invalid_intersection_types:n="Intersection results could not be merged";break;case Ie.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ie.not_finite:n="Number must be finite";break;default:n=e.defaultError,yn.assertNever(t)}return{message:n}};let kZ=GC;function oOe(t){kZ=t}function xI(){return kZ}const II=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},aOe=[];function Ge(t,e){const n=II({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,xI(),GC].filter(r=>!!r)});t.common.issues.push(n)}class yi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Dt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return yi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Dt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Dt=Object.freeze({status:"aborted"}),DZ=t=>({status:"dirty",value:t}),ji=t=>({status:"valid",value:t}),T3=t=>t.status==="aborted",R3=t=>t.status==="dirty",qC=t=>t.status==="valid",NI=t=>typeof Promise<"u"&&t instanceof Promise;var ht;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ht||(ht={}));class eu{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const uj=(t,e)=>{if(qC(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new zc(t.common.issues);return this._error=n,this._error}}};function Bt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Gt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ch(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ch(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new yi,ctx:{common:e.parent.common,data:e.data,parsedType:ch(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(NI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ch(e)},i=this._parseSync({data:e,path:s.path,parent:s});return uj(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ch(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(NI(s)?s:Promise.resolve(s));return uj(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ie.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Yc({schema:this,typeName:At.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return rd.create(this,this._def)}nullable(){return Jg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hc.create(this,this._def)}promise(){return Bw.create(this,this._def)}or(e){return QC.create([this,e],this._def)}and(e){return JC.create(this,e,this._def)}transform(e){return new Yc({...Bt(this._def),schema:this,typeName:At.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new n_({...Bt(this._def),innerType:this,defaultValue:n,typeName:At.ZodDefault})}brand(){return new LZ({typeName:At.ZodBranded,type:this,...Bt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new OI({...Bt(this._def),innerType:this,catchValue:n,typeName:At.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return x1.create(this,e)}readonly(){return DI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cOe=/^c[^\s-]{8,}$/i,lOe=/^[a-z][a-z0-9]*$/,uOe=/^[0-9A-HJKMNP-TV-Z]{26}$/,dOe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hOe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fOe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let xO;const pOe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,gOe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,mOe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function yOe(t,e){return!!((e==="v4"||!e)&&pOe.test(t)||(e==="v6"||!e)&&gOe.test(t))}class Uc extends Gt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ie.invalid_type,expected:Ue.string,received:i.parsedType}),Dt}const r=new yi;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ge(s,{code:Ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ge(s,{code:Ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")hOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"email",code:Ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")xO||(xO=new RegExp(fOe,"u")),xO.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"emoji",code:Ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")dOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"uuid",code:Ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")cOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid",code:Ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")lOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid2",code:Ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")uOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ulid",code:Ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ge(s,{validation:"url",code:Ie.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"regex",code:Ie.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ie.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ie.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ie.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?mOe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ie.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?yOe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ip",code:Ie.invalid_string,message:i.message}),r.dirty()):yn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ie.invalid_string,...ht.errToObj(r)})}_addCheck(e){return new Uc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ht.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ht.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ht.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ht.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ht.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ht.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ht.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ht.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ht.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ht.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ht.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ht.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ht.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ht.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ht.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ht.errToObj(n)})}nonempty(e){return this.min(1,ht.errToObj(e))}trim(){return new Uc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Uc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Uc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Uc.create=t=>{var e;return new Uc({checks:[],typeName:At.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Bt(t)})};function wOe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Nf extends Gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ie.invalid_type,expected:Ue.number,received:i.parsedType}),Dt}let r;const s=new yi;for(const i of this._def.checks)i.kind==="int"?yn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ie.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ie.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ie.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?wOe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ie.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ie.not_finite,message:i.message}),s.dirty()):yn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ht.toString(n))}setLimit(e,n,r,s){return new Nf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ht.toString(s)}]})}_addCheck(e){return new Nf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ht.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ht.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ht.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ht.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ht.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Nf.create=t=>new Nf({checks:[],typeName:At.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Bt(t)});class Tf extends Gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ue.bigint){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ie.invalid_type,expected:Ue.bigint,received:i.parsedType}),Dt}let r;const s=new yi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ie.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ie.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ie.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):yn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ht.toString(n))}setLimit(e,n,r,s){return new Tf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ht.toString(s)}]})}_addCheck(e){return new Tf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ht.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Tf.create=t=>{var e;return new Tf({checks:[],typeName:At.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Bt(t)})};class VC extends Gt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ie.invalid_type,expected:Ue.boolean,received:r.parsedType}),Dt}return ji(e.data)}}VC.create=t=>new VC({typeName:At.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Bt(t)});class Yg extends Gt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ie.invalid_type,expected:Ue.date,received:i.parsedType}),Dt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ie.invalid_date}),Dt}const r=new yi;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ie.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ie.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):yn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Yg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ht.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ht.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Yg.create=t=>new Yg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:At.ZodDate,...Bt(t)});class TI extends Gt{_parse(e){if(this._getType(e)!==Ue.symbol){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ie.invalid_type,expected:Ue.symbol,received:r.parsedType}),Dt}return ji(e.data)}}TI.create=t=>new TI({typeName:At.ZodSymbol,...Bt(t)});class KC extends Gt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ie.invalid_type,expected:Ue.undefined,received:r.parsedType}),Dt}return ji(e.data)}}KC.create=t=>new KC({typeName:At.ZodUndefined,...Bt(t)});class YC extends Gt{_parse(e){if(this._getType(e)!==Ue.null){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ie.invalid_type,expected:Ue.null,received:r.parsedType}),Dt}return ji(e.data)}}YC.create=t=>new YC({typeName:At.ZodNull,...Bt(t)});class Uw extends Gt{constructor(){super(...arguments),this._any=!0}_parse(e){return ji(e.data)}}Uw.create=t=>new Uw({typeName:At.ZodAny,...Bt(t)});class Cg extends Gt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ji(e.data)}}Cg.create=t=>new Cg({typeName:At.ZodUnknown,...Bt(t)});class bd extends Gt{_parse(e){const n=this._getOrReturnCtx(e);return Ge(n,{code:Ie.invalid_type,expected:Ue.never,received:n.parsedType}),Dt}}bd.create=t=>new bd({typeName:At.ZodNever,...Bt(t)});class RI extends Gt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ie.invalid_type,expected:Ue.void,received:r.parsedType}),Dt}return ji(e.data)}}RI.create=t=>new RI({typeName:At.ZodVoid,...Bt(t)});class Hc extends Gt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ue.array)return Ge(n,{code:Ie.invalid_type,expected:Ue.array,received:n.parsedType}),Dt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ge(n,{code:o?Ie.too_big:Ie.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ge(n,{code:Ie.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ge(n,{code:Ie.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new eu(n,o,n.path,a)))).then(o=>yi.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new eu(n,o,n.path,a)));return yi.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Hc({...this._def,minLength:{value:e,message:ht.toString(n)}})}max(e,n){return new Hc({...this._def,maxLength:{value:e,message:ht.toString(n)}})}length(e,n){return new Hc({...this._def,exactLength:{value:e,message:ht.toString(n)}})}nonempty(e){return this.min(1,e)}}Hc.create=(t,e)=>new Hc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:At.ZodArray,...Bt(e)});function by(t){if(t instanceof wr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=rd.create(by(r))}return new wr({...t._def,shape:()=>e})}else return t instanceof Hc?new Hc({...t._def,type:by(t.element)}):t instanceof rd?rd.create(by(t.unwrap())):t instanceof Jg?Jg.create(by(t.unwrap())):t instanceof tu?tu.create(t.items.map(e=>by(e))):t}class wr extends Gt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ue.object){const l=this._getOrReturnCtx(e);return Ge(l,{code:Ie.invalid_type,expected:Ue.object,received:l.parsedType}),Dt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof bd&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new eu(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof bd){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Ge(s,{code:Ie.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new eu(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>yi.mergeObjectSync(r,l)):yi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ht.errToObj,new wr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ht.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new wr({...this._def,unknownKeys:"strip"})}passthrough(){return new wr({...this._def,unknownKeys:"passthrough"})}extend(e){return new wr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new wr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:At.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new wr({...this._def,catchall:e})}pick(e){const n={};return yn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new wr({...this._def,shape:()=>n})}omit(e){const n={};return yn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new wr({...this._def,shape:()=>n})}deepPartial(){return by(this)}partial(e){const n={};return yn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new wr({...this._def,shape:()=>n})}required(e){const n={};return yn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof rd;)i=i._def.innerType;n[r]=i}}),new wr({...this._def,shape:()=>n})}keyof(){return MZ(yn.objectKeys(this.shape))}}wr.create=(t,e)=>new wr({shape:()=>t,unknownKeys:"strip",catchall:bd.create(),typeName:At.ZodObject,...Bt(e)});wr.strictCreate=(t,e)=>new wr({shape:()=>t,unknownKeys:"strict",catchall:bd.create(),typeName:At.ZodObject,...Bt(e)});wr.lazycreate=(t,e)=>new wr({shape:t,unknownKeys:"strip",catchall:bd.create(),typeName:At.ZodObject,...Bt(e)});class QC extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new zc(a.ctx.common.issues));return Ge(n,{code:Ie.invalid_union,unionErrors:o}),Dt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new zc(c));return Ge(n,{code:Ie.invalid_union,unionErrors:a}),Dt}}get options(){return this._def.options}}QC.create=(t,e)=>new QC({options:t,typeName:At.ZodUnion,...Bt(e)});const GS=t=>t instanceof XC?GS(t.schema):t instanceof Yc?GS(t.innerType()):t instanceof e_?[t.value]:t instanceof Rf?t.options:t instanceof t_?Object.keys(t.enum):t instanceof n_?GS(t._def.innerType):t instanceof KC?[void 0]:t instanceof YC?[null]:null;class FT extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.object)return Ge(n,{code:Ie.invalid_type,expected:Ue.object,received:n.parsedType}),Dt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ge(n,{code:Ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Dt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=GS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new FT({typeName:At.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Bt(r)})}}function P3(t,e){const n=ch(t),r=ch(e);if(t===e)return{valid:!0,data:t};if(n===Ue.object&&r===Ue.object){const s=yn.objectKeys(e),i=yn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=P3(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ue.array&&r===Ue.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=P3(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ue.date&&r===Ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class JC extends Gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(T3(i)||T3(o))return Dt;const a=P3(i.value,o.value);return a.valid?((R3(i)||R3(o))&&n.dirty(),{status:n.value,value:a.data}):(Ge(r,{code:Ie.invalid_intersection_types}),Dt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}JC.create=(t,e,n)=>new JC({left:t,right:e,typeName:At.ZodIntersection,...Bt(n)});class tu extends Gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.array)return Ge(r,{code:Ie.invalid_type,expected:Ue.array,received:r.parsedType}),Dt;if(r.data.length<this._def.items.length)return Ge(r,{code:Ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Dt;!this._def.rest&&r.data.length>this._def.items.length&&(Ge(r,{code:Ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new eu(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>yi.mergeArray(n,o)):yi.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new tu({...this._def,rest:e})}}tu.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new tu({items:t,typeName:At.ZodTuple,rest:null,...Bt(e)})};class ZC extends Gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.object)return Ge(r,{code:Ie.invalid_type,expected:Ue.object,received:r.parsedType}),Dt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new eu(r,a,r.path,a)),value:o._parse(new eu(r,r.data[a],r.path,a))});return r.common.async?yi.mergeObjectAsync(n,s):yi.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Gt?new ZC({keyType:e,valueType:n,typeName:At.ZodRecord,...Bt(r)}):new ZC({keyType:Uc.create(),valueType:e,typeName:At.ZodRecord,...Bt(n)})}}class PI extends Gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.map)return Ge(r,{code:Ie.invalid_type,expected:Ue.map,received:r.parsedType}),Dt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new eu(r,a,r.path,[l,"key"])),value:i._parse(new eu(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Dt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Dt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}PI.create=(t,e,n)=>new PI({valueType:e,keyType:t,typeName:At.ZodMap,...Bt(n)});class Qg extends Gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.set)return Ge(r,{code:Ie.invalid_type,expected:Ue.set,received:r.parsedType}),Dt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ge(r,{code:Ie.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ge(r,{code:Ie.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Dt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new eu(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Qg({...this._def,minSize:{value:e,message:ht.toString(n)}})}max(e,n){return new Qg({...this._def,maxSize:{value:e,message:ht.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Qg.create=(t,e)=>new Qg({valueType:t,minSize:null,maxSize:null,typeName:At.ZodSet,...Bt(e)});class o0 extends Gt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.function)return Ge(n,{code:Ie.invalid_type,expected:Ue.function,received:n.parsedType}),Dt;function r(a,c){return II({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,xI(),GC].filter(l=>!!l),issueData:{code:Ie.invalid_arguments,argumentsError:c}})}function s(a,c){return II({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,xI(),GC].filter(l=>!!l),issueData:{code:Ie.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Bw){const a=this;return ji(async function(...c){const l=new zc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return ji(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new zc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new zc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new o0({...this._def,args:tu.create(e).rest(Cg.create())})}returns(e){return new o0({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new o0({args:e||tu.create([]).rest(Cg.create()),returns:n||Cg.create(),typeName:At.ZodFunction,...Bt(r)})}}class XC extends Gt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}XC.create=(t,e)=>new XC({getter:t,typeName:At.ZodLazy,...Bt(e)});class e_ extends Gt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ge(n,{received:n.data,code:Ie.invalid_literal,expected:this._def.value}),Dt}return{status:"valid",value:e.data}}get value(){return this._def.value}}e_.create=(t,e)=>new e_({value:t,typeName:At.ZodLiteral,...Bt(e)});function MZ(t,e){return new Rf({values:t,typeName:At.ZodEnum,...Bt(e)})}class Rf extends Gt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{expected:yn.joinValues(r),received:n.parsedType,code:Ie.invalid_type}),Dt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{received:n.data,code:Ie.invalid_enum_value,options:r}),Dt}return ji(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Rf.create(e)}exclude(e){return Rf.create(this.options.filter(n=>!e.includes(n)))}}Rf.create=MZ;class t_ extends Gt{_parse(e){const n=yn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=yn.objectValues(n);return Ge(r,{expected:yn.joinValues(s),received:r.parsedType,code:Ie.invalid_type}),Dt}if(n.indexOf(e.data)===-1){const s=yn.objectValues(n);return Ge(r,{received:r.data,code:Ie.invalid_enum_value,options:s}),Dt}return ji(e.data)}get enum(){return this._def.values}}t_.create=(t,e)=>new t_({values:t,typeName:At.ZodNativeEnum,...Bt(e)});class Bw extends Gt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.promise&&n.common.async===!1)return Ge(n,{code:Ie.invalid_type,expected:Ue.promise,received:n.parsedType}),Dt;const r=n.parsedType===Ue.promise?n.data:Promise.resolve(n.data);return ji(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Bw.create=(t,e)=>new Bw({type:t,typeName:At.ZodPromise,...Bt(e)});class Yc extends Gt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===At.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ge(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Dt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Dt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!qC(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>qC(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);yn.assertNever(s)}}Yc.create=(t,e,n)=>new Yc({schema:t,typeName:At.ZodEffects,effect:e,...Bt(n)});Yc.createWithPreprocess=(t,e,n)=>new Yc({schema:e,effect:{type:"preprocess",transform:t},typeName:At.ZodEffects,...Bt(n)});class rd extends Gt{_parse(e){return this._getType(e)===Ue.undefined?ji(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rd.create=(t,e)=>new rd({innerType:t,typeName:At.ZodOptional,...Bt(e)});class Jg extends Gt{_parse(e){return this._getType(e)===Ue.null?ji(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Jg.create=(t,e)=>new Jg({innerType:t,typeName:At.ZodNullable,...Bt(e)});class n_ extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}n_.create=(t,e)=>new n_({innerType:t,typeName:At.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Bt(e)});class OI extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return NI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new zc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}OI.create=(t,e)=>new OI({innerType:t,typeName:At.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Bt(e)});class kI extends Gt{_parse(e){if(this._getType(e)!==Ue.nan){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ie.invalid_type,expected:Ue.nan,received:r.parsedType}),Dt}return{status:"valid",value:e.data}}}kI.create=t=>new kI({typeName:At.ZodNaN,...Bt(t)});const bOe=Symbol("zod_brand");class LZ extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class x1 extends Gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Dt:i.status==="dirty"?(n.dirty(),DZ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Dt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new x1({in:e,out:n,typeName:At.ZodPipeline})}}class DI extends Gt{_parse(e){const n=this._def.innerType._parse(e);return qC(n)&&(n.value=Object.freeze(n.value)),n}}DI.create=(t,e)=>new DI({innerType:t,typeName:At.ZodReadonly,...Bt(e)});const $Z=(t,e={},n)=>t?Uw.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Uw.create(),vOe={object:wr.lazycreate};var At;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(At||(At={}));const EOe=(t,e={message:`Input not instance of ${t.name}`})=>$Z(n=>n instanceof t,e),UZ=Uc.create,BZ=Nf.create,COe=kI.create,_Oe=Tf.create,FZ=VC.create,AOe=Yg.create,SOe=TI.create,xOe=KC.create,IOe=YC.create,NOe=Uw.create,TOe=Cg.create,ROe=bd.create,POe=RI.create,OOe=Hc.create,kOe=wr.create,DOe=wr.strictCreate,MOe=QC.create,LOe=FT.create,$Oe=JC.create,UOe=tu.create,BOe=ZC.create,FOe=PI.create,jOe=Qg.create,WOe=o0.create,zOe=XC.create,HOe=e_.create,GOe=Rf.create,qOe=t_.create,VOe=Bw.create,dj=Yc.create,KOe=rd.create,YOe=Jg.create,QOe=Yc.createWithPreprocess,JOe=x1.create,ZOe=()=>UZ().optional(),XOe=()=>BZ().optional(),e2e=()=>FZ().optional(),t2e={string:t=>Uc.create({...t,coerce:!0}),number:t=>Nf.create({...t,coerce:!0}),boolean:t=>VC.create({...t,coerce:!0}),bigint:t=>Tf.create({...t,coerce:!0}),date:t=>Yg.create({...t,coerce:!0})},n2e=Dt;var E=Object.freeze({__proto__:null,defaultErrorMap:GC,setErrorMap:oOe,getErrorMap:xI,makeIssue:II,EMPTY_PATH:aOe,addIssueToContext:Ge,ParseStatus:yi,INVALID:Dt,DIRTY:DZ,OK:ji,isAborted:T3,isDirty:R3,isValid:qC,isAsync:NI,get util(){return yn},get objectUtil(){return N3},ZodParsedType:Ue,getParsedType:ch,ZodType:Gt,ZodString:Uc,ZodNumber:Nf,ZodBigInt:Tf,ZodBoolean:VC,ZodDate:Yg,ZodSymbol:TI,ZodUndefined:KC,ZodNull:YC,ZodAny:Uw,ZodUnknown:Cg,ZodNever:bd,ZodVoid:RI,ZodArray:Hc,ZodObject:wr,ZodUnion:QC,ZodDiscriminatedUnion:FT,ZodIntersection:JC,ZodTuple:tu,ZodRecord:ZC,ZodMap:PI,ZodSet:Qg,ZodFunction:o0,ZodLazy:XC,ZodLiteral:e_,ZodEnum:Rf,ZodNativeEnum:t_,ZodPromise:Bw,ZodEffects:Yc,ZodTransformer:Yc,ZodOptional:rd,ZodNullable:Jg,ZodDefault:n_,ZodCatch:OI,ZodNaN:kI,BRAND:bOe,ZodBranded:LZ,ZodPipeline:x1,ZodReadonly:DI,custom:$Z,Schema:Gt,ZodSchema:Gt,late:vOe,get ZodFirstPartyTypeKind(){return At},coerce:t2e,any:NOe,array:OOe,bigint:_Oe,boolean:FZ,date:AOe,discriminatedUnion:LOe,effect:dj,enum:GOe,function:WOe,instanceof:EOe,intersection:$Oe,lazy:zOe,literal:HOe,map:FOe,nan:COe,nativeEnum:qOe,never:ROe,null:IOe,nullable:YOe,number:BZ,object:kOe,oboolean:e2e,onumber:XOe,optional:KOe,ostring:ZOe,pipeline:JOe,preprocess:QOe,promise:VOe,record:BOe,set:jOe,strictObject:DOe,string:UZ,symbol:SOe,transformer:dj,tuple:UOe,undefined:xOe,union:MOe,unknown:TOe,void:POe,NEVER:n2e,ZodIssueCode:Ie,quotelessJson:iOe,ZodError:zc});const xr=E.object({message:E.string()});function ze(t){return E.literal(Ve[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const r2e=E.object({chainId:E.string().or(E.number())}),s2e=E.object({email:E.string().email()}),i2e=E.object({otp:E.string()}),o2e=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),a2e=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),c2e=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),l2e=E.object({email:E.string().email()}),u2e=E.object({otp:E.string()}),d2e=E.object({otp:E.string()}),h2e=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),f2e=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),p2e=E.object({type:E.string()}),g2e=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),m2e=E.object({url:E.string()}),y2e=E.object({userName:E.string()}),w2e=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([qs.ACCOUNT_TYPES.EOA,qs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),b2e=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),v2e=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([qs.ACCOUNT_TYPES.EOA,qs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),E2e=E.object({uri:E.string()}),C2e=E.object({isConnected:E.boolean()}),_2e=E.object({chainId:E.string().or(E.number())}),A2e=E.object({chainId:E.string().or(E.number())}),S2e=E.object({newEmail:E.string().email()}),x2e=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const I2e=E.object({version:E.string().optional()}),N2e=E.object({type:E.string(),address:E.string()}),T2e=E.any(),R2e=E.object({method:E.literal("eth_accounts")}),P2e=E.object({method:E.literal("eth_blockNumber")}),O2e=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),k2e=E.object({method:E.literal("eth_chainId")}),D2e=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),M2e=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),L2e=E.object({method:E.literal("eth_gasPrice")}),$2e=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),U2e=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),B2e=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),F2e=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),j2e=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),W2e=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),z2e=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),H2e=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),G2e=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),q2e=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),V2e=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),K2e=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),Y2e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),Q2e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),J2e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),Z2e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),X2e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),eke=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),tke=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),nke=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),rke=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),ske=E.object({method:E.literal("eth_newBlockFilter")}),ike=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),oke=E.object({method:E.literal("eth_newPendingTransactionFilter")}),ake=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),cke=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),lke=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),hj=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),uke=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),dke=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),hke=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),fke=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),pke=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),gke=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),mke=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),yke=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),wke=E.object({method:E.literal("wallet_getCapabilities")}),bke=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),vke=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),Eke=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),fj=E.object({token:E.string()}),He=E.object({id:E.string().optional()}),wv={appEvent:He.extend({type:ze("APP_SWITCH_NETWORK"),payload:r2e}).or(He.extend({type:ze("APP_CONNECT_EMAIL"),payload:s2e})).or(He.extend({type:ze("APP_CONNECT_DEVICE")})).or(He.extend({type:ze("APP_CONNECT_OTP"),payload:i2e})).or(He.extend({type:ze("APP_CONNECT_SOCIAL"),payload:o2e})).or(He.extend({type:ze("APP_GET_FARCASTER_URI")})).or(He.extend({type:ze("APP_CONNECT_FARCASTER")})).or(He.extend({type:ze("APP_GET_USER"),payload:E.optional(a2e)})).or(He.extend({type:ze("APP_GET_SOCIAL_REDIRECT_URI"),payload:c2e})).or(He.extend({type:ze("APP_SIGN_OUT")})).or(He.extend({type:ze("APP_IS_CONNECTED"),payload:E.optional(fj)})).or(He.extend({type:ze("APP_GET_CHAIN_ID")})).or(He.extend({type:ze("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(He.extend({type:ze("APP_INIT_SMART_ACCOUNT")})).or(He.extend({type:ze("APP_SET_PREFERRED_ACCOUNT"),payload:p2e})).or(He.extend({type:ze("APP_RPC_REQUEST"),payload:hj.or(Eke).or(R2e).or(P2e).or(O2e).or(k2e).or(D2e).or(M2e).or(L2e).or($2e).or(U2e).or(B2e).or(F2e).or(j2e).or(W2e).or(z2e).or(H2e).or(G2e).or(q2e).or(V2e).or(K2e).or(Y2e).or(Q2e).or(J2e).or(Z2e).or(X2e).or(eke).or(tke).or(nke).or(rke).or(ske).or(ike).or(oke).or(ake).or(cke).or(lke).or(hj).or(uke).or(dke).or(hke).or(fke).or(pke).or(gke).or(yke).or(mke).or(wke).or(bke).or(vke)})).or(He.extend({type:ze("APP_UPDATE_EMAIL"),payload:l2e})).or(He.extend({type:ze("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:u2e})).or(He.extend({type:ze("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:d2e})).or(He.extend({type:ze("APP_SYNC_THEME"),payload:h2e})).or(He.extend({type:ze("APP_SYNC_DAPP_DATA"),payload:f2e})).or(He.extend({type:ze("APP_RELOAD")})),frameEvent:He.extend({type:ze("FRAME_SWITCH_NETWORK_ERROR"),payload:xr}).or(He.extend({type:ze("FRAME_SWITCH_NETWORK_SUCCESS"),payload:A2e})).or(He.extend({type:ze("FRAME_CONNECT_EMAIL_SUCCESS"),payload:g2e})).or(He.extend({type:ze("FRAME_CONNECT_EMAIL_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:m2e})).or(He.extend({type:ze("FRAME_GET_FARCASTER_URI_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:y2e})).or(He.extend({type:ze("FRAME_CONNECT_FARCASTER_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_CONNECT_OTP_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_CONNECT_OTP_SUCCESS")})).or(He.extend({type:ze("FRAME_CONNECT_DEVICE_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_CONNECT_DEVICE_SUCCESS")})).or(He.extend({type:ze("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:w2e})).or(He.extend({type:ze("FRAME_CONNECT_SOCIAL_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_GET_USER_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_GET_USER_SUCCESS"),payload:v2e})).or(He.extend({type:ze("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:E2e})).or(He.extend({type:ze("FRAME_SIGN_OUT_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_SIGN_OUT_SUCCESS")})).or(He.extend({type:ze("FRAME_IS_CONNECTED_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_IS_CONNECTED_SUCCESS"),payload:C2e})).or(He.extend({type:ze("FRAME_GET_CHAIN_ID_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_GET_CHAIN_ID_SUCCESS"),payload:_2e})).or(He.extend({type:ze("FRAME_RPC_REQUEST_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_RPC_REQUEST_SUCCESS"),payload:T2e})).or(He.extend({type:ze("FRAME_SESSION_UPDATE"),payload:fj})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_SUCCESS"),payload:b2e})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:S2e})).or(He.extend({type:ze("FRAME_SYNC_THEME_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_SYNC_THEME_SUCCESS")})).or(He.extend({type:ze("FRAME_SYNC_DAPP_DATA_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(He.extend({type:ze("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:x2e})).or(He.extend({type:ze("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:N2e})).or(He.extend({type:ze("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_READY"),payload:I2e})).or(He.extend({type:ze("FRAME_RELOAD_ERROR"),payload:xr})).or(He.extend({type:ze("FRAME_RELOAD_SUCCESS")}))};function IO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let Cke=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=We.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!IO(Ve.FRAME_EVENT_KEY,l))return;const u=wv.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Qo.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Qo.isClient&&window.addEventListener("message",({data:o})=>{if(!IO(Ve.FRAME_EVENT_KEY,o))return;const a=wv.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Qo.isClient&&window.addEventListener("message",({data:o})=>{if(!IO(Ve.APP_EVENT_KEY,o))return;const a=wv.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Qo.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");wv.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Qo.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");wv.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Qo.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${aSe}?projectId=${e}&chainId=${r}&version=${lSe}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},_ke=class{constructor(e){var i;const n=xm({level:cSe}),{logger:r,chunkLoggerController:s}=PT({opts:n});this.logger=Js(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},Ake=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new _ke(e)),this.abortController=i,this.w3mFrame=new Cke({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ls.get(Ve.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ls.get(Ve.EMAIL)}getUsername(){return Ls.get(Ve.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ve.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Qo.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ve.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ve.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ve.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ve.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ve.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ve.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ve.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ve.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ve.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ve.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ve.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(qs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ve.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:qs.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{qs.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ve.APP_SYNC_DAPP_DATA,Ve.APP_SYNC_THEME,Ve.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ve.APP_CONNECT_EMAIL,Ve.APP_CONNECT_DEVICE,Ve.APP_CONNECT_OTP,Ve.APP_CONNECT_SOCIAL,Ve.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ls.set(Ve.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ls.set(Ve.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ls.set(Ve.EMAIL,e),Ls.set(Ve.EMAIL_LOGIN_USED_KEY,"true"),Ls.delete(Ve.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ls.delete(Ve.EMAIL_LOGIN_USED_KEY),Ls.delete(Ve.EMAIL),Ls.delete(Ve.LAST_USED_CHAIN_KEY),Ls.delete(Ve.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ls.set(Ve.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ls.get(Ve.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ls.set(Ve.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},Ske=class qS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return qS.instance||(qS.instance=new Ake({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),qS.instance}};function xke(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function gs(t,...e){try{return xke(t(...e))}catch(n){return Promise.reject(n)}}function Ike(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Nke(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function VS(t){if(Ike(t))return String(t);if(Nke(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return VS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const O3="base64:";function Tke(t){return typeof t=="string"?t:O3+Oke(t)}function Rke(t){return typeof t!="string"||!t.startsWith(O3)?t:Pke(t.slice(O3.length))}function Pke(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Oke(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function no(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function kke(...t){return no(t.join(":"))}function KA(t){return t=no(t),t?t+":":""}function Dke(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Mke(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const Lke="memory",$ke=()=>{const t=new Map;return{name:Lke,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Uke(t={}){const e={mounts:{"":t.driver||$ke()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=no(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await pj(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=no(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:y,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=no(l);const{relativeKey:d,driver:h}=n(l);return gs(h.hasItem,d,u)},getItem(l,u={}){l=no(l);const{relativeKey:d,driver:h}=n(l);return gs(h.getItem,d,u).then(f=>jA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?gs(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:kke(d.base,f.key),value:jA(f.value)}))):Promise.all(d.items.map(h=>gs(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:jA(f)})))))},getItemRaw(l,u={}){l=no(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?gs(h.getItemRaw,d,u):gs(h.getItem,d,u).then(f=>Rke(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=no(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await gs(f.setItem,h,VS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return gs(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:VS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>gs(d.driver.setItem,h.relativeKey,VS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=no(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await gs(f.setItemRaw,h,u,d);else if(f.setItem)await gs(f.setItem,h,Tke(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=no(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await gs(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await gs(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=no(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await gs(h.getMeta,d,u)),!u.nativeOnly){const p=await gs(h.getItem,d+"$",u).then(g=>jA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=KA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await gs(y.driver.getKeys,y.relativeBase,u);for(const v of b){const A=y.mountpoint+no(v);h.some(_=>A.startsWith(_))||f.push(A)}h=[y.mountpoint,...h.filter(v=>!v.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||Dke(y,u.maxDepth))&&Mke(y,l))},async clear(l,u={}){l=KA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return gs(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>gj(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=KA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(pj(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=KA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await gj(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=no(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=no(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function pj(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function gj(t){typeof t.dispose=="function"&&await gs(t.dispose)}const Bke="idb-keyval";var Fke=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=BJ(t.dbName,t.storeName)),{name:Bke,options:t,async hasItem(s){return!(typeof await wF(n(s),r)>"u")},async getItem(s){return await wF(n(s),r)??null},setItem(s,i){return uxe(n(s),i,r)},removeItem(s){return dxe(n(s),r)},getKeys(){return pxe(r)},clear(){return hxe(r)}}};const jke="WALLET_CONNECT_V2_INDEXED_DB",Wke="keyvaluestorage";let zke=class{constructor(){this.indexedDb=Uke({driver:Fke({dbName:jke,storeName:Wke})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,wd(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var NO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof NO<"u"&&NO.localStorage?KS.exports=NO.localStorage:typeof window<"u"&&window.localStorage?KS.exports=window.localStorage:KS.exports=new e})();function Hke(t){var e;return[t[0],Vg((e=t[1])!=null?e:"")]}let Gke=class{constructor(){this.localStorage=KS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Hke)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Vg(n)}async setItem(e,n){this.localStorage.setItem(e,wd(n))}async removeItem(e){this.localStorage.removeItem(e)}};const qke="wc_storage_version",mj=1,Vke=async(t,e,n)=>{const r=qke,s=await e.getItem(r);if(s&&s>=mj){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,mj),n(e),Kke(t,o)},Kke=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Yke=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Gke;this.storage=e;try{const n=new zke;Vke(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var Qke=Object.defineProperty,Jke=(t,e,n)=>e in t?Qke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yj=(t,e,n)=>Jke(t,typeof e!="symbol"?e+"":e,n);let Zke=class extends _m{constructor(e){super(),this.opts=e,yj(this,"protocol","wc"),yj(this,"version",2)}};var Xke=Object.defineProperty,eDe=(t,e,n)=>e in t?Xke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tDe=(t,e,n)=>eDe(t,e+"",n);let nDe=class extends _m{constructor(e,n){super(),this.core=e,this.logger=n,tDe(this,"records",new Map)}},rDe=class{constructor(e,n){this.logger=e,this.core=n}},sDe=class extends _m{constructor(e,n){super(),this.relayer=e,this.logger=n}},iDe=class extends _m{constructor(e){super()}},oDe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},aDe=class extends _m{constructor(e,n){super(),this.relayer=e,this.logger=n}},cDe=class extends _m{constructor(e,n){super(),this.core=e,this.logger=n}},lDe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},uDe=class{constructor(e,n){this.projectId=e,this.logger=n}},dDe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var hDe=Object.defineProperty,fDe=(t,e,n)=>e in t?hDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wj=(t,e,n)=>fDe(t,typeof e!="symbol"?e+"":e,n);let pDe=class{constructor(e){this.opts=e,wj(this,"protocol","wc"),wj(this,"version",2)}},gDe=class{constructor(e){this.client=e}};function r_(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function bj(t){return r_(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const jZ="2.23.2";let bv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${jZ}`};class Zg extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Zg?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Zg&&n.cause.docsPath||n.docsPath,i=(a=bv.getDocsUrl)==null?void 0:a.call(bv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...bv.version?[`Version: ${bv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=jZ}walk(e){return WZ(this,e)}}function WZ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?WZ(t.cause,e):e?null:t}class zZ extends Zg{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Nb(t,{dir:e,size:n=32}={}){return typeof t=="string"?mDe(t,{dir:e,size:n}):yDe(t,{dir:e,size:n})}function mDe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new zZ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function yDe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new zZ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class wDe extends Zg{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class bDe extends Zg{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Tb(t,{size:e}){if(bj(t)>e)throw new bDe({givenSize:bj(t),maxSize:e})}function k3(t,e={}){const{signed:n}=e;e.size&&Tb(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function vDe(t,e={}){return Number(k3(t,e))}const EDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function D3(t,e={}){return typeof t=="number"||typeof t=="bigint"?GZ(t,e):typeof t=="string"?ADe(t,e):typeof t=="boolean"?CDe(t,e):HZ(t,e)}function CDe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Tb(n,{size:e.size}),Nb(n,{size:e.size})):n}function HZ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=EDe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Tb(r,{size:e.size}),Nb(r,{dir:"right",size:e.size})):r}function GZ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new wDe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Nb(a,{size:r}):a}const _De=new TextEncoder;function ADe(t,e={}){const n=_De.encode(t);return HZ(n,e)}const SDe=new TextEncoder;function xDe(t,e={}){return typeof t=="number"||typeof t=="bigint"?NDe(t,e):typeof t=="boolean"?IDe(t,e):r_(t)?qZ(t,e):VZ(t,e)}function IDe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Tb(n,{size:e.size}),Nb(n,{size:e.size})):n}const wu={zero:48,nine:57,A:65,F:70,a:97,f:102};function vj(t){if(t>=wu.zero&&t<=wu.nine)return t-wu.zero;if(t>=wu.A&&t<=wu.F)return t-(wu.A-10);if(t>=wu.a&&t<=wu.f)return t-(wu.a-10)}function qZ(t,e={}){let n=t;e.size&&(Tb(n,{size:e.size}),n=Nb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=vj(r.charCodeAt(a++)),l=vj(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Zg(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function NDe(t,e){const n=GZ(t,e);return qZ(n)}function VZ(t,e={}){const n=SDe.encode(t);return typeof e.size=="number"?(Tb(n,{size:e.size}),Nb(n,{dir:"right",size:e.size})):n}function MI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function TDe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function jT(t,...e){if(!TDe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function vKe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");MI(t.outputLen),MI(t.blockLen)}function Ej(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function RDe(t,e){jT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const YA=BigInt(2**32-1),Cj=BigInt(32);function PDe(t,e=!1){return e?{h:Number(t&YA),l:Number(t>>Cj&YA)}:{h:Number(t>>Cj&YA)|0,l:Number(t&YA)|0}}function ODe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=PDe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const kDe=(t,e,n)=>t<<n|e>>>32-n,DDe=(t,e,n)=>e<<n|t>>>32-n,MDe=(t,e,n)=>e<<n-32|t>>>64-n,LDe=(t,e,n)=>t<<n-32|e>>>64-n,Qm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $De(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function EKe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function CKe(t,e){return t<<32-e|t>>>e}const _j=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function UDe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Aj(t){for(let e=0;e<t.length;e++)t[e]=UDe(t[e])}function BDe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function KZ(t){return typeof t=="string"&&(t=BDe(t)),jT(t),t}function _Ke(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];jT(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let FDe=class{clone(){return this._cloneInto()}};function jDe(t){const e=r=>t().update(KZ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function SKe(t=32){if(Qm&&typeof Qm.getRandomValues=="function")return Qm.getRandomValues(new Uint8Array(t));if(Qm&&typeof Qm.randomBytes=="function")return Qm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const YZ=[],QZ=[],JZ=[],WDe=BigInt(0),vv=BigInt(1),zDe=BigInt(2),HDe=BigInt(7),GDe=BigInt(256),qDe=BigInt(113);for(let t=0,e=vv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],YZ.push(2*(5*r+n)),QZ.push((t+1)*(t+2)/2%64);let s=WDe;for(let i=0;i<7;i++)e=(e<<vv^(e>>HDe)*qDe)%GDe,e&zDe&&(s^=vv<<(vv<<BigInt(i))-vv);JZ.push(s)}const[VDe,KDe]=ODe(JZ,!0),Sj=(t,e,n)=>n>32?MDe(t,e,n):kDe(t,e,n),xj=(t,e,n)=>n>32?LDe(t,e,n):DDe(t,e,n);function YDe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Sj(l,u,1)^n[a],h=xj(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=QZ[o],c=Sj(s,i,a),l=xj(s,i,a),u=YZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=VDe[r],t[1]^=KDe[r]}n.fill(0)}let QDe=class ZZ extends FDe{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,MI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=$De(this.state)}keccak(){_j||Aj(this.state32),YDe(this.state32,this.rounds),_j||Aj(this.state32),this.posOut=0,this.pos=0}update(e){Ej(this);const{blockLen:n,state:r}=this;e=KZ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ej(this,!1),jT(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return MI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(RDe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new ZZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const JDe=(t,e,n)=>jDe(()=>new QDe(e,t,n)),ZDe=JDe(1,136,256/8);function XZ(t,e){const n=e||"hex",r=ZDe(r_(t,{strict:!1})?xDe(t):t);return n==="bytes"?r:D3(r)}class XDe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const TO=new XDe(8192);function e3e(t,e){if(TO.has(`${t}.${e}`))return TO.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=XZ(VZ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return TO.set(`${t}.${e}`,i),i}function t3e(t){const e=XZ(`0x${t.substring(4)}`).substring(26);return e3e(`0x${e}`)}async function n3e({hash:t,signature:e}){const n=r_(t)?t:D3(t),{secp256k1:r}=await hi(async()=>{const{secp256k1:o}=await import("./secp256k1-CQHEHJfG.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=Ij(f);return new r.Signature(k3(l),k3(u)).addRecoveryBit(p)}const o=r_(e)?e:D3(e),a=vDe(`0x${o.slice(130)}`),c=Ij(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Ij(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function r3e({hash:t,signature:e}){return t3e(await n3e({hash:t,signature:e}))}var s3e={};const i3e=":";function a0(t){const[e,n]=t.split(i3e);return{namespace:e,reference:n}}function eX(t,e){return t.includes(":")?[t]:e.chains||[]}var o3e=Object.defineProperty,a3e=Object.defineProperties,c3e=Object.getOwnPropertyDescriptors,Nj=Object.getOwnPropertySymbols,l3e=Object.prototype.hasOwnProperty,u3e=Object.prototype.propertyIsEnumerable,Tj=(t,e,n)=>e in t?o3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rj=(t,e)=>{for(var n in e||(e={}))l3e.call(e,n)&&Tj(t,n,e[n]);if(Nj)for(var n of Nj(e))u3e.call(e,n)&&Tj(t,n,e[n]);return t},d3e=(t,e)=>a3e(t,c3e(e));const h3e="ReactNative",Xo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},f3e="js";function LI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function jf(){return!Kg()&&!!H$()&&navigator.product===h3e}function p3e(){return jf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function g3e(){return jf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Rb(){return!LI()&&!!H$()&&!!Kg()}function I1(){return jf()?Xo.reactNative:LI()?Xo.node:Rb()?Xo.browser:Xo.unknown}function Pj(){var t;try{return jf()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function m3e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function y3e(t){var e,n;const r=tX();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),d3e(Rj(Rj({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function tX(){return bZ()||{name:"",description:"",url:"",icons:[""]}}function w3e(){if(I1()===Xo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=WTe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function b3e(){var t;const e=I1();return e===Xo.browser?[e,((t=wZ())==null?void 0:t.host)||"unknown"].join(":"):e}function nX(t,e,n){const r=w3e(),s=b3e();return[[t,e].join("-"),[f3e,n].join("-"),r,s].join("/")}function v3e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=nX(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=m3e(l[1]||"",d);return l[0]+"?"+h}function Up(t,e){return t.filter(n=>e.includes(n)).length===t.length}function M3(t){return Object.fromEntries(t.entries())}function L3(t){return new Map(Object.entries(t))}function hp(t=Re.FIVE_MINUTES,e){const n=Re.toMiliseconds(t||Re.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function zh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function rX(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function E3e(t){return rX("topic",t)}function C3e(t){return rX("id",t)}function sX(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Zr(t,e){return Re.fromMiliseconds(Date.now()+Re.toMiliseconds(t))}function sh(t){return Date.now()>=Re.toMiliseconds(t)}function xn(t,e){return`${t}${e?`:${e}`:""}`}function Kl(t=[],e=[]){return[...new Set([...t,...e])]}async function _3e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=A3e(i,t,e),a=I1();if(a===Xo.browser){if(!((r=Kg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}S3e(o)}else a===Xo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function A3e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${T3e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function S3e(t){let e="_self";N3e()?e="_top":(I3e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function x3e(t,e){let n="";try{if(Rb()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function Oj(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function kj(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function K$(){return typeof process<"u"&&s3e.IS_VITEST==="true"}function I3e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function N3e(){try{return window.self!==window.top}catch{return!1}}function T3e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function iX(t){return Buffer.from(t,"base64").toString("utf-8")}function R3e(t){return new Promise(e=>setTimeout(e,t))}function s_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function P3e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function N1(t,...e){if(!P3e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Y$(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");s_(t.outputLen),s_(t.blockLen)}function Fw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function oX(t,e){N1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const QA=BigInt(2**32-1),Dj=BigInt(32);function O3e(t,e=!1){return e?{h:Number(t&QA),l:Number(t>>Dj&QA)}:{h:Number(t>>Dj&QA)|0,l:Number(t&QA)|0}}function k3e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=O3e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const D3e=(t,e,n)=>t<<n|e>>>32-n,M3e=(t,e,n)=>e<<n|t>>>32-n,L3e=(t,e,n)=>e<<n-32|t>>>64-n,$3e=(t,e,n)=>t<<n-32|e>>>64-n,Jm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function U3e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function RO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ol(t,e){return t<<32-e|t>>>e}const Mj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function B3e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Lj(t){for(let e=0;e<t.length;e++)t[e]=B3e(t[e])}function F3e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function jw(t){return typeof t=="string"&&(t=F3e(t)),N1(t),t}function j3e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];N1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Q$=class{clone(){return this._cloneInto()}};function aX(t){const e=r=>t().update(jw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Pb(t=32){if(Jm&&typeof Jm.getRandomValues=="function")return Jm.getRandomValues(new Uint8Array(t));if(Jm&&typeof Jm.randomBytes=="function")return Jm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const cX=[],lX=[],uX=[],W3e=BigInt(0),Ev=BigInt(1),z3e=BigInt(2),H3e=BigInt(7),G3e=BigInt(256),q3e=BigInt(113);for(let t=0,e=Ev,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],cX.push(2*(5*r+n)),lX.push((t+1)*(t+2)/2%64);let s=W3e;for(let i=0;i<7;i++)e=(e<<Ev^(e>>H3e)*q3e)%G3e,e&z3e&&(s^=Ev<<(Ev<<BigInt(i))-Ev);uX.push(s)}const[V3e,K3e]=k3e(uX,!0),$j=(t,e,n)=>n>32?L3e(t,e,n):D3e(t,e,n),Uj=(t,e,n)=>n>32?$3e(t,e,n):M3e(t,e,n);function Y3e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=$j(l,u,1)^n[a],h=Uj(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=lX[o],c=$j(s,i,a),l=Uj(s,i,a),u=cX[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=V3e[r],t[1]^=K3e[r]}n.fill(0)}let Q3e=class dX extends Q${constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,s_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=U3e(this.state)}keccak(){Mj||Lj(this.state32),Y3e(this.state32,this.rounds),Mj||Lj(this.state32),this.posOut=0,this.pos=0}update(e){Fw(this);const{blockLen:n,state:r}=this;e=jw(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Fw(this,!1),N1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return s_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(oX(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new dX(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const J3e=(t,e,n)=>aX(()=>new Q3e(e,t,n)),Z3e=J3e(1,136,256/8),X3e="https://rpc.walletconnect.org/v1";function hX(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Z3e(n)).toString("hex")}async function e5e(t,e,n,r,s,i){switch(n.t){case"eip191":return await t5e(t,e,n.s);case"eip1271":return await n5e(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function t5e(t,e,n){return(await r3e({hash:hX(e),signature:n})).toLowerCase()===t.toLowerCase()}async function n5e(t,e,n,r,s,i){const o=a0(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=hX(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||X3e}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:r5e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function r5e(){return Date.now()+Math.floor(Math.random()*1e3)}function s5e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return vZ.encode(i)}var i5e=Object.defineProperty,o5e=Object.defineProperties,a5e=Object.getOwnPropertyDescriptors,Bj=Object.getOwnPropertySymbols,c5e=Object.prototype.hasOwnProperty,l5e=Object.prototype.propertyIsEnumerable,Fj=(t,e,n)=>e in t?i5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u5e=(t,e)=>{for(var n in e||(e={}))c5e.call(e,n)&&Fj(t,n,e[n]);if(Bj)for(var n of Bj(e))l5e.call(e,n)&&Fj(t,n,e[n]);return t},d5e=(t,e)=>o5e(t,a5e(e));const h5e="did:pkh:",J$=t=>t==null?void 0:t.split(":"),f5e=t=>{const e=t&&J$(t);if(e)return t.includes(h5e)?e[3]:e[1]},$3=t=>{const e=t&&J$(t);if(e)return e[2]+":"+e[3]},$I=t=>{const e=t&&J$(t);if(e)return e.pop()};async function jj(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=fX(s,s.iss),o=$I(s.iss);return await e5e(o,i,r,$3(s.iss),n)}const fX=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=$I(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${f5e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=YS(t.resources);if(p){const g=i_(p);s=C5e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function p5e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function g5e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Xg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function m5e(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:y5e(e,n,r)}}}function y5e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function pX(t){return Xg(t),`urn:recap:${p5e(t).replace(/=/g,"")}`}function i_(t){const e=g5e(t.replace("urn:recap:",""));return Xg(e),e}function w5e(t,e,n){const r=m5e(t,e,n);return pX(r)}function b5e(t){return t&&t.includes("urn:recap:")}function v5e(t,e){const n=i_(t),r=i_(e),s=E5e(n,r);return pX(s)}function E5e(t,e){Xg(t),Xg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=d5e(u5e({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function C5e(t="",e){Xg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function Wj(t){var e;const n=i_(t);Xg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function zj(t){const e=i_(t);Xg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function YS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return b5e(e)?e:void 0}function PO(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function gX(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Yo(t,...e){if(!gX(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Hj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _5e(t,e){Yo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Gj(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const hf=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),A5e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),S5e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!S5e)throw new Error("Non little-endian hardware is not supported");function x5e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function U3(t){if(typeof t=="string")t=x5e(t);else if(gX(t))t=B3(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function I5e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function N5e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const T5e=(t,e)=>{function n(r,...s){if(Yo(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Yo(l):Yo(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Yo(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Yo(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Yo(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Yo(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function qj(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!R5e(e))throw new Error("invalid output, must be aligned");return e}function Vj(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function R5e(t){return t.byteOffset%4===0}function B3(t){return Uint8Array.from(t)}function Ww(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const mX=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),P5e=mX("expand 16-byte k"),O5e=mX("expand 32-byte k"),k5e=hf(P5e),D5e=hf(O5e);function fn(t,e){return t<<e|t>>>32-e}function F3(t){return t.byteOffset%4===0}const JA=64,M5e=16,yX=2**32-1,Kj=new Uint32Array;function L5e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(JA),u=hf(l),d=F3(s)&&F3(i),h=d?hf(s):Kj,f=d?hf(i):Kj;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=yX)throw new Error("arx: counter overflow");const g=Math.min(JA,c-p);if(d&&g===JA){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<M5e;y++)b=w+y,f[b]=h[b]^u[y];p+=JA;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function $5e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=I5e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return PO(s),PO(o),Gj(i),Gj(n),(a,c,l,u,d=0)=>{Yo(a),Yo(c),Yo(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Yo(u),PO(d),d<0||d>=yX)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=B3(a)),w=D5e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=k5e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);F3(c)||f.push(c=B3(c));const y=hf(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,hf(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=hf(c);return L5e(t,w,y,v,l,u,d,o),Ww(...f),u}}const Ps=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class U5e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=U3(e),Yo(e,32);const n=Ps(e,0),r=Ps(e,2),s=Ps(e,4),i=Ps(e,6),o=Ps(e,8),a=Ps(e,10),c=Ps(e,12),l=Ps(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ps(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Ps(e,n+0),b=Ps(e,n+2),v=Ps(e,n+4),A=Ps(e,n+6),_=Ps(e,n+8),I=Ps(e,n+10),x=Ps(e,n+12),N=Ps(e,n+14);let S=i[0]+(y&8191),O=i[1]+((y>>>13|b<<3)&8191),P=i[2]+((b>>>10|v<<6)&8191),F=i[3]+((v>>>7|A<<9)&8191),q=i[4]+((A>>>4|_<<12)&8191),z=i[5]+(_>>>1&8191),T=i[6]+((_>>>14|I<<2)&8191),R=i[7]+((I>>>11|x<<5)&8191),U=i[8]+((x>>>8|N<<8)&8191),k=i[9]+(N>>>5|s),M=0,j=M+S*a+O*(5*w)+P*(5*g)+F*(5*p)+q*(5*f);M=j>>>13,j&=8191,j+=z*(5*h)+T*(5*d)+R*(5*u)+U*(5*l)+k*(5*c),M+=j>>>13,j&=8191;let Y=M+S*c+O*a+P*(5*w)+F*(5*g)+q*(5*p);M=Y>>>13,Y&=8191,Y+=z*(5*f)+T*(5*h)+R*(5*d)+U*(5*u)+k*(5*l),M+=Y>>>13,Y&=8191;let ne=M+S*l+O*c+P*a+F*(5*w)+q*(5*g);M=ne>>>13,ne&=8191,ne+=z*(5*p)+T*(5*f)+R*(5*h)+U*(5*d)+k*(5*u),M+=ne>>>13,ne&=8191;let le=M+S*u+O*l+P*c+F*a+q*(5*w);M=le>>>13,le&=8191,le+=z*(5*g)+T*(5*p)+R*(5*f)+U*(5*h)+k*(5*d),M+=le>>>13,le&=8191;let oe=M+S*d+O*u+P*l+F*c+q*a;M=oe>>>13,oe&=8191,oe+=z*(5*w)+T*(5*g)+R*(5*p)+U*(5*f)+k*(5*h),M+=oe>>>13,oe&=8191;let ae=M+S*h+O*d+P*u+F*l+q*c;M=ae>>>13,ae&=8191,ae+=z*a+T*(5*w)+R*(5*g)+U*(5*p)+k*(5*f),M+=ae>>>13,ae&=8191;let ue=M+S*f+O*h+P*d+F*u+q*l;M=ue>>>13,ue&=8191,ue+=z*c+T*a+R*(5*w)+U*(5*g)+k*(5*p),M+=ue>>>13,ue&=8191;let tt=M+S*p+O*f+P*h+F*d+q*u;M=tt>>>13,tt&=8191,tt+=z*l+T*c+R*a+U*(5*w)+k*(5*g),M+=tt>>>13,tt&=8191;let Ne=M+S*g+O*p+P*f+F*h+q*d;M=Ne>>>13,Ne&=8191,Ne+=z*u+T*l+R*c+U*a+k*(5*w),M+=Ne>>>13,Ne&=8191;let $e=M+S*w+O*g+P*p+F*f+q*h;M=$e>>>13,$e&=8191,$e+=z*d+T*u+R*l+U*c+k*a,M+=$e>>>13,$e&=8191,M=(M<<2)+M|0,M=M+j|0,j=M&8191,M=M>>>13,Y+=M,i[0]=j,i[1]=Y,i[2]=ne,i[3]=le,i[4]=oe,i[5]=ae,i[6]=ue,i[7]=tt,i[8]=Ne,i[9]=$e}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Ww(r)}update(e){Hj(this);const{buffer:n,blockLen:r}=this;e=U3(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Ww(this.h,this.r,this.buffer,this.pad)}digestInto(e){Hj(this),_5e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function B5e(t){const e=(r,s)=>t(s).update(U3(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const F5e=B5e(t=>new U5e(t));function j5e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,v=n[0],A=n[1],_=n[2],I=o,x=a,N=c,S=l,O=u,P=d,F=h,q=f,z=p,T=g,R=w,U=y,k=b,M=v,j=A,Y=_;for(let le=0;le<i;le+=2)I=I+O|0,k=fn(k^I,16),z=z+k|0,O=fn(O^z,12),I=I+O|0,k=fn(k^I,8),z=z+k|0,O=fn(O^z,7),x=x+P|0,M=fn(M^x,16),T=T+M|0,P=fn(P^T,12),x=x+P|0,M=fn(M^x,8),T=T+M|0,P=fn(P^T,7),N=N+F|0,j=fn(j^N,16),R=R+j|0,F=fn(F^R,12),N=N+F|0,j=fn(j^N,8),R=R+j|0,F=fn(F^R,7),S=S+q|0,Y=fn(Y^S,16),U=U+Y|0,q=fn(q^U,12),S=S+q|0,Y=fn(Y^S,8),U=U+Y|0,q=fn(q^U,7),I=I+P|0,Y=fn(Y^I,16),R=R+Y|0,P=fn(P^R,12),I=I+P|0,Y=fn(Y^I,8),R=R+Y|0,P=fn(P^R,7),x=x+F|0,k=fn(k^x,16),U=U+k|0,F=fn(F^U,12),x=x+F|0,k=fn(k^x,8),U=U+k|0,F=fn(F^U,7),N=N+q|0,M=fn(M^N,16),z=z+M|0,q=fn(q^z,12),N=N+q|0,M=fn(M^N,8),z=z+M|0,q=fn(q^z,7),S=S+O|0,j=fn(j^S,16),T=T+j|0,O=fn(O^T,12),S=S+O|0,j=fn(j^S,8),T=T+j|0,O=fn(O^T,7);let ne=0;r[ne++]=o+I|0,r[ne++]=a+x|0,r[ne++]=c+N|0,r[ne++]=l+S|0,r[ne++]=u+O|0,r[ne++]=d+P|0,r[ne++]=h+F|0,r[ne++]=f+q|0,r[ne++]=p+z|0,r[ne++]=g+T|0,r[ne++]=w+R|0,r[ne++]=y+U|0,r[ne++]=b+k|0,r[ne++]=v+M|0,r[ne++]=A+j|0,r[ne++]=_+Y|0}const W5e=$5e(j5e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),z5e=new Uint8Array(16),Yj=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(z5e.subarray(n))},H5e=new Uint8Array(32);function Qj(t,e,n,r,s){const i=t(e,n,H5e),o=F5e.create(i);s&&Yj(o,s),Yj(o,r);const a=new Uint8Array(16),c=A5e(a);Vj(c,0,BigInt(s?s.length:0),!0),Vj(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Ww(i,a),l}const G5e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=qj(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Qj(t,e,n,a,r);return i.set(c,o),Ww(c),i},decrypt(s,i){i=qj(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Qj(t,e,n,o,r);if(!N5e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Ww(c),i}}),wX=T5e({blockSize:64,nonceLength:12,tagLength:16},G5e(W5e));let bX=class extends Q${constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Y$(e);const r=jw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Fw(this),this.iHash.update(e),this}digestInto(e){Fw(this),N1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const WT=(t,e,n)=>new bX(t,e).update(n).digest();WT.create=(t,e)=>new bX(t,e);function q5e(t,e,n){return Y$(t),n===void 0&&(n=new Uint8Array(t.outputLen)),WT(t,jw(n),jw(e))}const OO=new Uint8Array([0]),Jj=new Uint8Array;function V5e(t,e,n,r=32){if(Y$(t),s_(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=Jj);const i=new Uint8Array(s*t.outputLen),o=WT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)OO[0]=l+1,a.update(l===0?Jj:c).update(n).update(OO).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),OO.fill(0),i.slice(0,r)}const K5e=(t,e,n,r,s)=>V5e(t,q5e(t,e,n),r,s);function Y5e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Q5e(t,e,n){return t&e^~t&n}function J5e(t,e,n){return t&e^t&n^e&n}let Z5e=class extends Q${constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=RO(this.buffer)}update(e){Fw(this);const{view:n,buffer:r,blockLen:s}=this;e=jw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=RO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fw(this),oX(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Y5e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=RO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const X5e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wd=new Uint32Array(64);class eMe extends Z5e{constructor(){super(64,32,8,!1),this.A=jd[0]|0,this.B=jd[1]|0,this.C=jd[2]|0,this.D=jd[3]|0,this.E=jd[4]|0,this.F=jd[5]|0,this.G=jd[6]|0,this.H=jd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Wd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Wd[d-15],f=Wd[d-2],p=ol(h,7)^ol(h,18)^h>>>3,g=ol(f,17)^ol(f,19)^f>>>10;Wd[d]=g+Wd[d-7]+p+Wd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ol(a,6)^ol(a,11)^ol(a,25),f=u+h+Q5e(a,c,l)+X5e[d]+Wd[d]|0,p=(ol(r,2)^ol(r,13)^ol(r,22))+J5e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Wd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const T1=aX(()=>new eMe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zT=BigInt(0),HT=BigInt(1),tMe=BigInt(2);function em(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function R1(t){if(!em(t))throw new Error("Uint8Array expected")}function zw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const nMe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Hw(t){R1(t);let e="";for(let n=0;n<t.length;n++)e+=nMe[t[n]];return e}function Fy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Z$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?zT:BigInt("0x"+t)}const bu={_0:48,_9:57,A:65,F:70,a:97,f:102};function Zj(t){if(t>=bu._0&&t<=bu._9)return t-bu._0;if(t>=bu.A&&t<=bu.F)return t-(bu.A-10);if(t>=bu.a&&t<=bu.f)return t-(bu.a-10)}function Gw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Zj(t.charCodeAt(i)),a=Zj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function _g(t){return Z$(Hw(t))}function o_(t){return R1(t),Z$(Hw(Uint8Array.from(t).reverse()))}function qw(t,e){return Gw(t.toString(16).padStart(e*2,"0"))}function GT(t,e){return qw(t,e).reverse()}function rMe(t){return Gw(Fy(t))}function Vo(t,e,n){let r;if(typeof e=="string")try{r=Gw(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(em(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function a_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];R1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function sMe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function iMe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const kO=t=>typeof t=="bigint"&&zT<=t;function qT(t,e,n){return kO(t)&&kO(e)&&kO(n)&&e<=t&&t<n}function sd(t,e,n,r){if(!qT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function vX(t){let e;for(e=0;t>zT;t>>=HT,e+=1);return e}function oMe(t,e){return t>>BigInt(e)&HT}function aMe(t,e,n){return t|(n?HT:zT)<<BigInt(e)}const X$=t=>(tMe<<BigInt(t-1))-HT,DO=t=>new Uint8Array(t),Xj=t=>Uint8Array.from(t);function EX(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=DO(t),s=DO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=DO())=>{s=a(Xj([0]),u),r=a(),u.length!==0&&(s=a(Xj([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return a_(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const cMe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||em(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Ob(t,e,n={}){const r=(s,i,o)=>{const a=cMe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const lMe=()=>{throw new Error("not implemented")};function j3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var uMe=Object.freeze({__proto__:null,isBytes:em,abytes:R1,abool:zw,bytesToHex:Hw,numberToHexUnpadded:Fy,hexToNumber:Z$,hexToBytes:Gw,bytesToNumberBE:_g,bytesToNumberLE:o_,numberToBytesBE:qw,numberToBytesLE:GT,numberToVarBytesBE:rMe,ensureBytes:Vo,concatBytes:a_,equalBytes:sMe,utf8ToBytes:iMe,inRange:qT,aInRange:sd,bitLen:vX,bitGet:oMe,bitSet:aMe,bitMask:X$,createHmacDrbg:EX,validateObject:Ob,notImplemented:lMe,memoized:j3});const xs=BigInt(0),jr=BigInt(1),bp=BigInt(2),dMe=BigInt(3),W3=BigInt(4),e9=BigInt(5),t9=BigInt(8);function fo(t,e){const n=t%e;return n>=xs?n:e+n}function CX(t,e,n){if(e<xs)throw new Error("invalid exponent, negatives unsupported");if(n<=xs)throw new Error("invalid modulus");if(n===jr)return xs;let r=jr;for(;e>xs;)e&jr&&(r=r*t%n),t=t*t%n,e>>=jr;return r}function gc(t,e,n){let r=t;for(;e-- >xs;)r*=r,r%=n;return r}function z3(t,e){if(t===xs)throw new Error("invert: expected non-zero number");if(e<=xs)throw new Error("invert: expected positive modulus, got "+e);let n=fo(t,e),r=e,s=xs,i=jr;for(;n!==xs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==jr)throw new Error("invert: does not exist");return fo(s,e)}function hMe(t){const e=(t-jr)/bp;let n,r,s;for(n=t-jr,r=0;n%bp===xs;n/=bp,r++);for(s=bp;s<t&&CX(s,e,t)!==t-jr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+jr)/W3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+jr)/bp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,jr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function fMe(t){if(t%W3===dMe){const e=(t+jr)/W3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%t9===e9){const e=(t-e9)/t9;return function(n,r){const s=n.mul(r,bp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,bp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return hMe(t)}const pMe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gMe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=pMe.reduce((r,s)=>(r[s]="function",r),e);return Ob(t,n)}function mMe(t,e,n){if(n<xs)throw new Error("invalid exponent, negatives unsupported");if(n===xs)return t.ONE;if(n===jr)return e;let r=t.ONE,s=e;for(;n>xs;)n&jr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=jr;return r}function yMe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function _X(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function AX(t,e,n=!1,r={}){if(t<=xs)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=_X(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:X$(s),ZERO:xs,ONE:jr,create:c=>fo(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return xs<=c&&c<t},is0:c=>c===xs,isOdd:c=>(c&jr)===jr,neg:c=>fo(-c,t),eql:(c,l)=>c===l,sqr:c=>fo(c*c,t),add:(c,l)=>fo(c+l,t),sub:(c,l)=>fo(c-l,t),mul:(c,l)=>fo(c*l,t),pow:(c,l)=>mMe(a,c,l),div:(c,l)=>fo(c*z3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>z3(c,t),sqrt:r.sqrt||(c=>(o||(o=fMe(t)),o(a,c))),invertBatch:c=>yMe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?GT(c,i):qw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?o_(c):_g(c)}});return Object.freeze(a)}function SX(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function xX(t){const e=SX(t);return e+Math.ceil(e/2)}function wMe(t,e,n=!1){const r=t.length,s=SX(e),i=xX(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?o_(t):_g(t),a=fo(o,e-jr)+jr;return n?GT(a,s):qw(a,s)}const n9=BigInt(0),ZA=BigInt(1);function MO(t,e){const n=e.negate();return t?n:e}function IX(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function LO(t,e){IX(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function bMe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function vMe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const $O=new WeakMap,NX=new WeakMap;function UO(t){return NX.get(t)||1}function EMe(t,e){return{constTimeNegate:MO,hasPrecomputes(n){return UO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>n9;)r&ZA&&(s=s.add(i)),i=i.double(),r>>=ZA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=LO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=LO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=ZA);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(MO(y,r[g])):a=a.add(MO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=LO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===n9)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=ZA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=$O.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&$O.set(r,s(i))),i},wNAFCached(n,r,s){const i=UO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=UO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){IX(r,e),NX.set(n,r),$O.delete(n)}}}function CMe(t,e,n,r){if(bMe(n,t),vMe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=vX(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function TX(t){return gMe(t.Fp),Ob(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({..._X(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Zm=BigInt(0),BO=BigInt(1);function _Me(t){return Ob(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function AMe(t){const e=_Me(t),{P:n}=e,r=b=>fo(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>CX(b,n-BigInt(2),n));function l(b,v,A){const _=r(b*(v-A));return v=r(v-_),A=r(A+_),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){sd("u",b,Zm,n),sd("scalar",v,Zm,n);const A=v,_=b;let I=BO,x=Zm,N=b,S=BO,O=Zm,P;for(let q=BigInt(s-1);q>=Zm;q--){const z=A>>q&BO;O^=z,P=l(O,I,N),I=P[0],N=P[1],P=l(O,x,S),x=P[0],S=P[1],O=z;const T=I+x,R=r(T*T),U=I-x,k=r(U*U),M=R-k,j=N+S,Y=N-S,ne=r(Y*T),le=r(j*U),oe=ne+le,ae=ne-le;N=r(oe*oe),S=r(_*r(ae*ae)),I=r(R*k),x=r(M*(R+r(u*M)))}P=l(O,I,N),I=P[0],N=P[1],P=l(O,x,S),x=P[0],S=P[1];const F=c(x);return r(I*F)}function h(b){return GT(r(b),i)}function f(b){const v=Vo("u coordinate",b,i);return o===32&&(v[31]&=127),o_(v)}function p(b){const v=Vo("scalar",b),A=v.length;if(A!==i&&A!==o){let _=""+i+" or "+o;throw new Error("invalid scalar, expected "+_+" bytes, got "+A)}return o_(a(v))}function g(b,v){const A=f(v),_=p(b),I=d(A,_);if(I===Zm)throw new Error("invalid private or public key received");return h(I)}const w=h(e.Gu);function y(b){return g(b,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const H3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const SMe=BigInt(1),r9=BigInt(2),xMe=BigInt(3),IMe=BigInt(5);BigInt(8);function NMe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=H3,o=t*t%i*t%i,a=gc(o,r9,i)*o%i,c=gc(a,SMe,i)*t%i,l=gc(c,IMe,i)*c%i,u=gc(l,e,i)*l%i,d=gc(u,n,i)*u%i,h=gc(d,r,i)*d%i,f=gc(h,s,i)*h%i,p=gc(f,s,i)*h%i,g=gc(p,e,i)*l%i;return{pow_p_5_8:gc(g,r9,i)*t%i,b2:o}}function TMe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const G3=AMe({P:H3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=H3,{pow_p_5_8:n,b2:r}=NMe(t);return fo(gc(n,xMe,e)*r,e)},adjustScalarBytes:TMe,randomBytes:Pb});function s9(t){t.lowS!==void 0&&zw("lowS",t.lowS),t.prehash!==void 0&&zw("prehash",t.prehash)}function RMe(t){const e=TX(t);Ob(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:PMe,hexToBytes:OMe}=uMe;class kMe extends Error{constructor(e=""){super(e)}}const Ru={Err:kMe,_tlv:{encode:(t,e)=>{const{Err:n}=Ru;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Fy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Fy(s.length/2|128):"";return Fy(t)+i+s+e},decode(t,e){const{Err:n}=Ru;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ru;if(t<qu)throw new e("integer: negative integers are not allowed");let n=Fy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ru;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return PMe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ru,s=typeof t=="string"?OMe(t):t;R1(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Ru,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},qu=BigInt(0),ys=BigInt(1);BigInt(2);const i9=BigInt(3);BigInt(4);function DMe(t){const e=RMe(t),{Fp:n}=e,r=AX(e.n,e.nBitLength),s=e.toBytes||((g,w,y)=>{const b=w.toAffine();return a_(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return qT(g,ys,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:v}=e;if(w&&typeof g!="bigint"){if(em(g)&&(g=Hw(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let A;try{A=typeof g=="bigint"?g:_g(Vo("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(A=fo(A,v)),sd("private key",A,ys,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=j3((g,w)=>{const{px:y,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:y,y:b};const A=g.is0();w==null&&(w=A?n.ONE:n.inv(v));const _=n.mul(y,w),I=n.mul(b,w),x=n.mul(v,w);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:_,y:I}}),d=j3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),v=o(w);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(y)&&v(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(Vo("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return CMe(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:_,pz:I}=w,x=n.eql(n.mul(y,I),n.mul(A,v)),N=n.eql(n.mul(b,I),n.mul(_,v));return x&&N}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,i9),{px:v,py:A,pz:_}=this;let I=n.ZERO,x=n.ZERO,N=n.ZERO,S=n.mul(v,v),O=n.mul(A,A),P=n.mul(_,_),F=n.mul(v,A);return F=n.add(F,F),N=n.mul(v,_),N=n.add(N,N),I=n.mul(w,N),x=n.mul(b,P),x=n.add(I,x),I=n.sub(O,x),x=n.add(O,x),x=n.mul(I,x),I=n.mul(F,I),N=n.mul(b,N),P=n.mul(w,P),F=n.sub(S,P),F=n.mul(w,F),F=n.add(F,N),N=n.add(S,S),S=n.add(N,S),S=n.add(S,P),S=n.mul(S,F),x=n.add(x,S),P=n.mul(A,_),P=n.add(P,P),S=n.mul(P,F),I=n.sub(I,S),N=n.mul(P,O),N=n.add(N,N),N=n.add(N,N),new h(I,x,N)}add(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:_,pz:I}=w;let x=n.ZERO,N=n.ZERO,S=n.ZERO;const O=e.a,P=n.mul(e.b,i9);let F=n.mul(y,A),q=n.mul(b,_),z=n.mul(v,I),T=n.add(y,b),R=n.add(A,_);T=n.mul(T,R),R=n.add(F,q),T=n.sub(T,R),R=n.add(y,v);let U=n.add(A,I);return R=n.mul(R,U),U=n.add(F,z),R=n.sub(R,U),U=n.add(b,v),x=n.add(_,I),U=n.mul(U,x),x=n.add(q,z),U=n.sub(U,x),S=n.mul(O,R),x=n.mul(P,z),S=n.add(x,S),x=n.sub(q,S),S=n.add(q,S),N=n.mul(x,S),q=n.add(F,F),q=n.add(q,F),z=n.mul(O,z),R=n.mul(P,R),q=n.add(q,z),z=n.sub(F,z),z=n.mul(O,z),R=n.add(R,z),F=n.mul(q,R),N=n.add(N,F),F=n.mul(U,R),x=n.mul(T,x),x=n.sub(x,F),F=n.mul(T,q),S=n.mul(U,S),S=n.add(S,F),new h(x,N,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;sd("scalar",w,qu,b);const v=h.ZERO;if(w===qu)return v;if(this.is0()||w===ys)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:A,k1:_,k2neg:I,k2:x}=y.splitScalar(w),N=v,S=v,O=this;for(;_>qu||x>qu;)_&ys&&(N=N.add(O)),x&ys&&(S=S.add(O)),O=O.double(),_>>=ys,x>>=ys;return A&&(N=N.negate()),I&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),N.add(S)}multiply(w){const{endo:y,n:b}=e;sd("scalar",w,ys,b);let v,A;if(y){const{k1neg:_,k1:I,k2neg:x,k2:N}=y.splitScalar(w);let{p:S,f:O}=this.wNAF(I),{p:P,f:F}=this.wNAF(N);S=p.constTimeNegate(_,S),P=p.constTimeNegate(x,P),P=new h(n.mul(P.px,y.beta),P.py,P.pz),v=S.add(P),A=O.add(F)}else{const{p:_,f:I}=this.wNAF(w);v=_,A=I}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(w,y,b){const v=h.BASE,A=(I,x)=>x===qu||x===ys||!I.equals(v)?I.multiplyUnsafe(x):I.multiply(x),_=A(this,y).add(A(w,b));return _.is0()?void 0:_}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===ys)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===ys?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return zw("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return zw("isCompressed",w),Hw(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=EMe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function MMe(t){const e=TX(t);return Ob(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function LMe(t){const e=MMe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(z){return fo(z,r)}function a(z){return z3(z,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=DMe({...e,toBytes(z,T,R){const U=T.toAffine(),k=n.toBytes(U.x),M=a_;return zw("isCompressed",R),R?M(Uint8Array.from([T.hasEvenY()?2:3]),k):M(Uint8Array.from([4]),k,n.toBytes(U.y))},fromBytes(z){const T=z.length,R=z[0],U=z.subarray(1);if(T===s&&(R===2||R===3)){const k=_g(U);if(!qT(k,ys,n.ORDER))throw new Error("Point is not on curve");const M=u(k);let j;try{j=n.sqrt(M)}catch(ne){const le=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+le)}const Y=(j&ys)===ys;return(R&1)===1!==Y&&(j=n.neg(j)),{x:k,y:j}}else if(T===i&&R===4){const k=n.fromBytes(U.subarray(0,n.BYTES)),M=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:k,y:M}}else{const k=s,M=i;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+M+", got "+T)}}}),h=z=>Hw(qw(z,e.nByteLength));function f(z){const T=r>>ys;return z>T}function p(z){return f(z)?o(-z):z}const g=(z,T,R)=>_g(z.slice(T,R));class w{constructor(T,R,U){this.r=T,this.s=R,this.recovery=U,this.assertValidity()}static fromCompact(T){const R=e.nByteLength;return T=Vo("compactSignature",T,R*2),new w(g(T,0,R),g(T,R,2*R))}static fromDER(T){const{r:R,s:U}=Ru.toSig(Vo("DER",T));return new w(R,U)}assertValidity(){sd("r",this.r,ys,r),sd("s",this.s,ys,r)}addRecoveryBit(T){return new w(this.r,this.s,T)}recoverPublicKey(T){const{r:R,s:U,recovery:k}=this,M=I(Vo("msgHash",T));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const j=k===2||k===3?R+e.n:R;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Y=k&1?"03":"02",ne=c.fromHex(Y+h(j)),le=a(j),oe=o(-M*le),ae=o(U*le),ue=c.BASE.multiplyAndAddUnsafe(ne,oe,ae);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Gw(this.toDERHex())}toDERHex(){return Ru.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Gw(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(z){try{return l(z),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const z=xX(e.n);return wMe(e.randomBytes(z),e.n)},precompute(z=8,T=c.BASE){return T._setWindowSize(z),T.multiply(BigInt(3)),T}};function b(z,T=!0){return c.fromPrivateKey(z).toRawBytes(T)}function v(z){const T=em(z),R=typeof z=="string",U=(T||R)&&z.length;return T?U===s||U===i:R?U===2*s||U===2*i:z instanceof c}function A(z,T,R=!0){if(v(z))throw new Error("first arg must be private key");if(!v(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(z)).toRawBytes(R)}const _=e.bits2int||function(z){if(z.length>8192)throw new Error("input is too large");const T=_g(z),R=z.length*8-e.nBitLength;return R>0?T>>BigInt(R):T},I=e.bits2int_modN||function(z){return o(_(z))},x=X$(e.nBitLength);function N(z){return sd("num < 2^"+e.nBitLength,z,qu,x),qw(z,e.nByteLength)}function S(z,T,R=O){if(["recovered","canonical"].some(Ne=>Ne in R))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:k}=e;let{lowS:M,prehash:j,extraEntropy:Y}=R;M==null&&(M=!0),z=Vo("msgHash",z),s9(R),j&&(z=Vo("prehashed msgHash",U(z)));const ne=I(z),le=l(T),oe=[N(le),N(ne)];if(Y!=null&&Y!==!1){const Ne=Y===!0?k(n.BYTES):Y;oe.push(Vo("extraEntropy",Ne))}const ae=a_(...oe),ue=ne;function tt(Ne){const $e=_(Ne);if(!d($e))return;const st=a($e),Ot=c.BASE.multiply($e).toAffine(),Xt=o(Ot.x);if(Xt===qu)return;const X=o(st*o(ue+Xt*le));if(X===qu)return;let ce=(Ot.x===Xt?0:2)|Number(Ot.y&ys),Ce=X;return M&&f(X)&&(Ce=p(X),ce^=1),new w(Xt,Ce,ce)}return{seed:ae,k2sig:tt}}const O={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function F(z,T,R=O){const{seed:U,k2sig:k}=S(z,T,R),M=e;return EX(M.hash.outputLen,M.nByteLength,M.hmac)(U,k)}c.BASE._setWindowSize(8);function q(z,T,R,U=P){var X;const k=z;T=Vo("msgHash",T),R=Vo("publicKey",R);const{lowS:M,prehash:j,format:Y}=U;if(s9(U),"strict"in U)throw new Error("options.strict was renamed to lowS");if(Y!==void 0&&Y!=="compact"&&Y!=="der")throw new Error("format must be compact or der");const ne=typeof k=="string"||em(k),le=!ne&&!Y&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!ne&&!le)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let oe,ae;try{if(le&&(oe=new w(k.r,k.s)),ne){try{Y!=="compact"&&(oe=w.fromDER(k))}catch(ce){if(!(ce instanceof Ru.Err))throw ce}!oe&&Y!=="der"&&(oe=w.fromCompact(k))}ae=c.fromHex(R)}catch{return!1}if(!oe||M&&oe.hasHighS())return!1;j&&(T=e.hash(T));const{r:ue,s:tt}=oe,Ne=I(T),$e=a(tt),st=o(Ne*$e),Ot=o(ue*$e),Xt=(X=c.BASE.multiplyAndAddUnsafe(ae,st,Ot))==null?void 0:X.toAffine();return Xt?o(Xt.x)===ue:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:A,sign:F,verify:q,ProjectivePoint:c,Signature:w,utils:y}}function $Me(t){return{hash:t,hmac:(e,...n)=>WT(t,e,j3e(...n)),randomBytes:Pb}}function UMe(t,e){const n=r=>LMe({...t,...$Me(r)});return{...n(e),create:n}}const RX=AX(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),BMe=RX.create(BigInt("-3")),FMe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),jMe=UMe({a:BMe,b:FMe,Fp:RX,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},T1),PX="base10",Fi="base16",Bc="base64pad",lh="base64url",P1="utf8",OX=0,id=1,O1=2,WMe=0,o9=1,OE=12,eU=32;function zMe(){const t=G3.utils.randomPrivateKey(),e=G3.getPublicKey(t);return{privateKey:So(t,Fi),publicKey:So(e,Fi)}}function q3(){const t=Pb(eU);return So(t,Fi)}function HMe(t,e){const n=G3.getSharedSecret(za(t,Fi),za(e,Fi)),r=K5e(T1,n,void 0,void 0,eU);return So(r,Fi)}function QS(t){const e=T1(za(t,Fi));return So(e,Fi)}function Pl(t){const e=T1(za(t,P1));return So(e,Fi)}function kX(t){return za(`${t}`,PX)}function tm(t){return Number(So(t,PX))}function DX(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function MX(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function GMe(t){const e=kX(typeof t.type<"u"?t.type:OX);if(tm(e)===id&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?za(t.senderPublicKey,Fi):void 0,r=typeof t.iv<"u"?za(t.iv,Fi):Pb(OE),s=za(t.symKey,Fi),i=wX(s,r).encrypt(za(t.message,P1)),o=LX({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===lh?DX(o):o}function qMe(t){const e=za(t.symKey,Fi),{sealed:n,iv:r}=c_({encoded:t.encoded,encoding:t.encoding}),s=wX(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return So(s,P1)}function VMe(t,e){const n=kX(O1),r=Pb(OE),s=za(t,P1),i=LX({type:n,sealed:s,iv:r});return e===lh?DX(i):i}function KMe(t,e){const{sealed:n}=c_({encoded:t,encoding:e});return So(n,P1)}function LX(t){if(tm(t.type)===O1)return So(TE([t.type,t.sealed]),Bc);if(tm(t.type)===id){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return So(TE([t.type,t.senderPublicKey,t.iv,t.sealed]),Bc)}return So(TE([t.type,t.iv,t.sealed]),Bc)}function c_(t){const e=(t.encoding||Bc)===lh?MX(t.encoded):t.encoded,n=za(e,Bc),r=n.slice(WMe,o9),s=o9;if(tm(r)===id){const c=s+eU,l=c+OE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(tm(r)===O1){const c=n.slice(s),l=Pb(OE);return{type:r,sealed:c,iv:l}}const i=s+OE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function YMe(t,e){const n=c_({encoded:t,encoding:e==null?void 0:e.encoding});return $X({type:tm(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?So(n.senderPublicKey,Fi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function $X(t){const e=(t==null?void 0:t.type)||OX;if(e===id){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function a9(t){return t.type===id&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function c9(t){return t.type===O1}function QMe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return TE([new Uint8Array([4]),e,n])}function JMe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(MX(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=T1(c),u=QMe(e);if(!jMe.verify(TE([o,a]),l,u))throw new Error("Invalid signature");return _3(t).payload}const ZMe="irn";function UI(t){return(t==null?void 0:t.relay)||{protocol:ZMe}}function qv(t){const e=rPe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function XMe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function l9(t){if(!t.includes("wc:")){const l=iX(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:eLe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:XMe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function eLe(t){return t.startsWith("//")?t.substring(2):t}function tLe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function u9(t){const e=new URLSearchParams,n=tLe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function XA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var nLe=Object.defineProperty,rLe=Object.defineProperties,sLe=Object.getOwnPropertyDescriptors,d9=Object.getOwnPropertySymbols,iLe=Object.prototype.hasOwnProperty,oLe=Object.prototype.propertyIsEnumerable,h9=(t,e,n)=>e in t?nLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aLe=(t,e)=>{for(var n in e||(e={}))iLe.call(e,n)&&h9(t,n,e[n]);if(d9)for(var n of d9(e))oLe.call(e,n)&&h9(t,n,e[n]);return t},cLe=(t,e)=>rLe(t,sLe(e));function kb(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function lLe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...kb(n.accounts))}),e}function uLe(t,e){const n=[];return Object.values(t).forEach(r=>{kb(r.accounts).includes(e)&&n.push(...r.methods)}),n}function dLe(t,e){const n=[];return Object.values(t).forEach(r=>{kb(r.accounts).includes(e)&&n.push(...r.events)}),n}function VT(t){return t.includes(":")}function jy(t){return VT(t)?t.split(":")[0]:t}function f9(t){var e,n,r;const s={};if(!pf(t))return s;for(const[i,o]of Object.entries(t)){const a=VT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=jy(i);s[u]=cLe(aLe({},s[u]),{chains:Kl(a,(e=s[u])==null?void 0:e.chains),methods:Kl(c,(n=s[u])==null?void 0:n.methods),events:Kl(l,(r=s[u])==null?void 0:r.events)})}return s}function hLe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function p9(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=hLe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Kl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function fLe(t,e){var n,r,s,i,o,a;const c=f9(t),l=f9(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Kl((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Kl((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Kl((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const pLe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},gLe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Pe(t,e){const{message:n,code:r}=gLe[t];return{message:e?`${n} ${e}`:n,code:r}}function Un(t,e){const{message:n,code:r}=pLe[t];return{message:e?`${n} ${e}`:n,code:r}}function ff(t,e){return!!Array.isArray(t)}function pf(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Fs(t){return typeof t>"u"}function Vr(t,e){return e&&Fs(t)?!0:typeof t=="string"&&!!t.trim().length}function tU(t,e){return e&&Fs(t)?!0:typeof t=="number"&&!isNaN(t)}function mLe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Up(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=kb(a),d=n[o];(!Up(eX(o,d),u)||!Up(d.methods,c)||!Up(d.events,l))&&(i=!1)}),i):!1}function BI(t){return Vr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function yLe(t){if(Vr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&BI(n)}}return!1}function wLe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Vr(t,!1)){if(e(t))return!0;const n=iX(t);return e(n)}}catch{}return!1}function bLe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function vLe(t){return t==null?void 0:t.topic}function ELe(t,e){let n=null;return Vr(t==null?void 0:t.publicKey,!1)||(n=Pe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function g9(t){let e=!0;return ff(t)?t.length&&(e=t.every(n=>Vr(n,!1))):e=!1,e}function CLe(t,e,n){let r=null;return ff(e)&&e.length?e.forEach(s=>{r||BI(s)||(r=Un("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):BI(t)||(r=Un("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function _Le(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=CLe(s,eX(s,i),`${e} ${n}`);o&&(r=o)}),r}function ALe(t,e){let n=null;return ff(t)?t.forEach(r=>{n||yLe(r)||(n=Un("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Un("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function SLe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=ALe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function xLe(t,e){let n=null;return g9(t==null?void 0:t.methods)?g9(t==null?void 0:t.events)||(n=Un("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Un("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function UX(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=xLe(r,`${e}, namespace`);s&&(n=s)}),n}function ILe(t,e,n){let r=null;if(t&&pf(t)){const s=UX(t,e);s&&(r=s);const i=_Le(t,e,n);i&&(r=i)}else r=Pe("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function FO(t,e){let n=null;if(t&&pf(t)){const r=UX(t,e);r&&(n=r);const s=SLe(t,e);s&&(n=s)}else n=Pe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function BX(t){return Vr(t.protocol,!0)}function NLe(t,e){let n=!1;return t?t&&ff(t)&&t.length&&t.forEach(r=>{n=BX(r)}):n=!0,n}function TLe(t){return typeof t=="number"}function so(t){return typeof t<"u"&&typeof t!==null}function RLe(t){return!(!t||typeof t!="object"||!t.code||!tU(t.code,!1)||!t.message||!Vr(t.message,!1))}function PLe(t){return!(Fs(t)||!Vr(t.method,!1))}function OLe(t){return!(Fs(t)||Fs(t.result)&&Fs(t.error)||!tU(t.id,!1)||!Vr(t.jsonrpc,!1))}function kLe(t){return!(Fs(t)||!Vr(t.name,!1))}function m9(t,e){return!(!BI(e)||!lLe(t).includes(e))}function DLe(t,e,n){return Vr(n,!1)?uLe(t,e).includes(n):!1}function MLe(t,e,n){return Vr(n,!1)?dLe(t,e).includes(n):!1}function y9(t,e,n){let r=null;const s=LLe(t),i=$Le(e),o=Object.keys(s),a=Object.keys(i),c=w9(Object.keys(t)),l=w9(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Up(o,a)||(r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=kb(e[d].accounts);h.includes(d)||(r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Up(s[d].methods,i[d].methods)?Up(s[d].events,i[d].events)||(r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function LLe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function w9(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function $Le(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=kb(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function ULe(t,e){return tU(t,!1)&&t<=e.max&&t>=e.min}function b9(){const t=I1();return new Promise(e=>{switch(t){case Xo.browser:e(BLe());break;case Xo.reactNative:e(FLe());break;case Xo.node:e(jLe());break;default:e(!0)}})}function BLe(){return Rb()&&(navigator==null?void 0:navigator.onLine)}async function FLe(){if(jf()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function jLe(){return!0}function WLe(t){switch(I1()){case Xo.browser:zLe(t);break;case Xo.reactNative:HLe(t);break}}function zLe(t){!jf()&&Rb()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function HLe(t){jf()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function GLe(){var t;return Rb()&&Kg()?((t=Kg())==null?void 0:t.visibilityState)==="visible":!0}const jO={};class Cv{static get(e){return jO[e]}static set(e,n){jO[e]=n}static delete(e){delete jO[e]}}var qLe={};const FX="wc",jX=2,V3="core",nu=`${FX}@2:${V3}:`,VLe={logger:"error"},KLe={database:":memory:"},YLe="crypto",v9="client_ed25519_seed",QLe=Re.ONE_DAY,JLe="keychain",ZLe="0.3",XLe="messages",e$e="0.3",E9=Re.SIX_HOURS,t$e="publisher",WX="irn",n$e="error",zX="wss://relay.walletconnect.org",r$e="relayer",Cs={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},s$e="_subscription",ba={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},i$e=.1,K3="2.21.0",lr={link_mode:"link_mode",relay:"relay"},JS={inbound:"inbound",outbound:"outbound"},o$e="0.3",a$e="WALLETCONNECT_CLIENT_ID",C9="WALLETCONNECT_LINK_MODE_APPS",Fo={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},c$e="subscription",l$e="0.3",u$e="pairing",d$e="0.3",_v={wc_pairingDelete:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Re.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Re.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Re.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:0},res:{ttl:Re.ONE_DAY,prompt:!1,tag:0}}},vp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},uc={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},h$e="history",f$e="0.3",p$e="expirer",Sa={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},g$e="0.3",m$e="verify-api",y$e="https://verify.walletconnect.com",HX="https://verify.walletconnect.org",kE=HX,w$e=`${kE}/v3`,b$e=[y$e,HX],v$e="echo",E$e="https://echo.walletconnect.com",dl={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Au={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},dc={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},tp={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},np={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Av={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},C$e=.1,_$e="event-client",A$e=86400,S$e="https://pulse.walletconnect.org/batch";function x$e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var I$e=x$e,N$e=I$e;const GX=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},T$e=t=>new TextEncoder().encode(t),R$e=t=>new TextDecoder().decode(t);class P$e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class O$e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qX(this,e)}}class k$e{constructor(e){this.decoders=e}or(e){return qX(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qX=(t,e)=>new k$e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class D$e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new P$e(e,n,r),this.decoder=new O$e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const KT=({name:t,prefix:e,encode:n,decode:r})=>new D$e(t,e,n,r),k1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=N$e(n,e);return KT({prefix:t,name:e,encode:r,decode:i=>GX(s(i))})},M$e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},L$e=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},ei=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>KT({prefix:e,name:t,encode(s){return L$e(s,r,n)},decode(s){return M$e(s,r,n,t)}}),$$e=KT({prefix:"\0",name:"identity",encode:t=>R$e(t),decode:t=>T$e(t)});var U$e=Object.freeze({__proto__:null,identity:$$e});const B$e=ei({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var F$e=Object.freeze({__proto__:null,base2:B$e});const j$e=ei({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var W$e=Object.freeze({__proto__:null,base8:j$e});const z$e=k1({prefix:"9",name:"base10",alphabet:"0123456789"});var H$e=Object.freeze({__proto__:null,base10:z$e});const G$e=ei({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),q$e=ei({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var V$e=Object.freeze({__proto__:null,base16:G$e,base16upper:q$e});const K$e=ei({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Y$e=ei({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Q$e=ei({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),J$e=ei({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Z$e=ei({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),X$e=ei({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eUe=ei({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tUe=ei({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),nUe=ei({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var rUe=Object.freeze({__proto__:null,base32:K$e,base32upper:Y$e,base32pad:Q$e,base32padupper:J$e,base32hex:Z$e,base32hexupper:X$e,base32hexpad:eUe,base32hexpadupper:tUe,base32z:nUe});const sUe=k1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),iUe=k1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var oUe=Object.freeze({__proto__:null,base36:sUe,base36upper:iUe});const aUe=k1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),cUe=k1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var lUe=Object.freeze({__proto__:null,base58btc:aUe,base58flickr:cUe});const uUe=ei({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dUe=ei({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),hUe=ei({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),fUe=ei({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var pUe=Object.freeze({__proto__:null,base64:uUe,base64pad:dUe,base64url:hUe,base64urlpad:fUe});const VX=Array.from(""),gUe=VX.reduce((t,e,n)=>(t[n]=e,t),[]),mUe=VX.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function yUe(t){return t.reduce((e,n)=>(e+=gUe[n],e),"")}function wUe(t){const e=[];for(const n of t){const r=mUe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const bUe=KT({prefix:"",name:"base256emoji",encode:yUe,decode:wUe});var vUe=Object.freeze({__proto__:null,base256emoji:bUe}),EUe=KX,_9=128,CUe=-128,_Ue=Math.pow(2,31);function KX(t,e,n){e=e||[],n=n||0;for(var r=n;t>=_Ue;)e[n++]=t&255|_9,t/=128;for(;t&CUe;)e[n++]=t&255|_9,t>>>=7;return e[n]=t|0,KX.bytes=n-r+1,e}var AUe=Y3,SUe=128,A9=127;function Y3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Y3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&A9)<<s:(o&A9)*Math.pow(2,s),s+=7}while(o>=SUe);return Y3.bytes=i-r,n}var xUe=Math.pow(2,7),IUe=Math.pow(2,14),NUe=Math.pow(2,21),TUe=Math.pow(2,28),RUe=Math.pow(2,35),PUe=Math.pow(2,42),OUe=Math.pow(2,49),kUe=Math.pow(2,56),DUe=Math.pow(2,63),MUe=function(t){return t<xUe?1:t<IUe?2:t<NUe?3:t<TUe?4:t<RUe?5:t<PUe?6:t<OUe?7:t<kUe?8:t<DUe?9:10},LUe={encode:EUe,decode:AUe,encodingLength:MUe},YX=LUe;const S9=(t,e,n=0)=>(YX.encode(t,e,n),e),x9=t=>YX.encodingLength(t),Q3=(t,e)=>{const n=e.byteLength,r=x9(t),s=r+x9(n),i=new Uint8Array(s+n);return S9(t,i,0),S9(n,i,r),i.set(e,s),new $Ue(t,n,e,i)};class $Ue{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const QX=({name:t,code:e,encode:n})=>new UUe(t,e,n);class UUe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Q3(this.code,n):n.then(r=>Q3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const JX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),BUe=QX({name:"sha2-256",code:18,encode:JX("SHA-256")}),FUe=QX({name:"sha2-512",code:19,encode:JX("SHA-512")});var jUe=Object.freeze({__proto__:null,sha256:BUe,sha512:FUe});const ZX=0,WUe="identity",XX=GX,zUe=t=>Q3(ZX,XX(t)),HUe={code:ZX,name:WUe,encode:XX,digest:zUe};var GUe=Object.freeze({__proto__:null,identity:HUe});new TextEncoder,new TextDecoder;const I9={...U$e,...F$e,...W$e,...H$e,...V$e,...rUe,...oUe,...lUe,...pUe,...vUe};({...jUe,...GUe});function qUe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function eee(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const N9=eee("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),WO=eee("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=qUe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),VUe={utf8:N9,"utf-8":N9,hex:I9.base16,latin1:WO,ascii:WO,binary:WO,...I9};function KUe(t,e="utf8"){const n=VUe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var YUe=Object.defineProperty,QUe=(t,e,n)=>e in t?YUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,al=(t,e,n)=>QUe(t,typeof e!="symbol"?e+"":e,n);class JUe{constructor(e,n){this.core=e,this.logger=n,al(this,"keychain",new Map),al(this,"name",JLe),al(this,"version",ZLe),al(this,"initialized",!1),al(this,"storagePrefix",nu),al(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),al(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),al(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),al(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Pe("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),al(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Js(n,this.name)}get context(){return Ro(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,M3(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?L3(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ZUe=Object.defineProperty,XUe=(t,e,n)=>e in t?ZUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Os=(t,e,n)=>XUe(t,typeof e!="symbol"?e+"":e,n);class eBe{constructor(e,n,r){this.core=e,this.logger=n,Os(this,"name",YLe),Os(this,"keychain"),Os(this,"randomSessionIdentifier",q3()),Os(this,"initialized",!1),Os(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Os(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Os(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=jF(s);return yZ(i.publicKey)}),Os(this,"generateKeyPair",()=>{this.isInitialized();const s=zMe();return this.setPrivateKey(s.publicKey,s.privateKey)}),Os(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=jF(i),a=this.randomSessionIdentifier;return await kTe(a,s,QLe,o)}),Os(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=HMe(a,i);return this.setSymKey(c,o)}),Os(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||QS(s);return await this.keychain.set(o,s),o}),Os(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Os(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Os(this,"encode",async(s,i,o)=>{this.isInitialized();const a=$X(o),c=wd(i);if(c9(a))return VMe(c,o==null?void 0:o.encoding);if(a9(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return GMe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Os(this,"decode",async(s,i,o)=>{this.isInitialized();const a=YMe(i,o);if(c9(a)){const c=KMe(i,o==null?void 0:o.encoding);return Vg(c)}if(a9(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=qMe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Vg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Os(this,"getPayloadType",(s,i=Bc)=>{const o=c_({encoded:s,encoding:i});return tm(o.type)}),Os(this,"getPayloadSenderPublicKey",(s,i=Bc)=>{const o=c_({encoded:s,encoding:i});return o.senderPublicKey?So(o.senderPublicKey,Fi):void 0}),this.core=e,this.logger=Js(n,this.name),this.keychain=r||new JUe(this.core,this.logger)}get context(){return Ro(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(v9)}catch{e=q3(),await this.keychain.set(v9,e)}return KUe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var tBe=Object.defineProperty,nBe=Object.defineProperties,rBe=Object.getOwnPropertyDescriptors,T9=Object.getOwnPropertySymbols,sBe=Object.prototype.hasOwnProperty,iBe=Object.prototype.propertyIsEnumerable,J3=(t,e,n)=>e in t?tBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oBe=(t,e)=>{for(var n in e||(e={}))sBe.call(e,n)&&J3(t,n,e[n]);if(T9)for(var n of T9(e))iBe.call(e,n)&&J3(t,n,e[n]);return t},aBe=(t,e)=>nBe(t,rBe(e)),ko=(t,e,n)=>J3(t,typeof e!="symbol"?e+"":e,n);class cBe extends rDe{constructor(e,n){super(e,n),this.logger=e,this.core=n,ko(this,"messages",new Map),ko(this,"messagesWithoutClientAck",new Map),ko(this,"name",XLe),ko(this,"version",e$e),ko(this,"initialized",!1),ko(this,"storagePrefix",nu),ko(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),ko(this,"set",async(r,s,i)=>{this.isInitialized();const o=Pl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===JS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,aBe(oBe({},c),{[o]:s}))}return await this.persist(),o}),ko(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),ko(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),ko(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Pl(s);return typeof i[o]<"u"}),ko(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Pl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),ko(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Js(e,this.name),this.core=n}get context(){return Ro(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,M3(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,M3(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?L3(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?L3(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lBe=Object.defineProperty,uBe=Object.defineProperties,dBe=Object.getOwnPropertyDescriptors,R9=Object.getOwnPropertySymbols,hBe=Object.prototype.hasOwnProperty,fBe=Object.prototype.propertyIsEnumerable,Z3=(t,e,n)=>e in t?lBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eS=(t,e)=>{for(var n in e||(e={}))hBe.call(e,n)&&Z3(t,n,e[n]);if(R9)for(var n of R9(e))fBe.call(e,n)&&Z3(t,n,e[n]);return t},zO=(t,e)=>uBe(t,dBe(e)),hc=(t,e,n)=>Z3(t,typeof e!="symbol"?e+"":e,n);class pBe extends sDe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,hc(this,"events",new nc.EventEmitter),hc(this,"name",t$e),hc(this,"queue",new Map),hc(this,"publishTimeout",Re.toMiliseconds(Re.ONE_MINUTE)),hc(this,"initialPublishTimeout",Re.toMiliseconds(Re.ONE_SECOND*15)),hc(this,"needsTransportRestart",!1),hc(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||E9,c=UI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||$p().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(Cs.publish,w),g(h))};this.relayer.events.on(Cs.publish,w);const y=zh(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Cs.publish,w)}catch(b){this.queue.set(d,zO(eS({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await zh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),hc(this,"on",(r,s)=>{this.events.on(r,s)}),hc(this,"once",(r,s)=>{this.events.once(r,s)}),hc(this,"off",(r,s)=>{this.events.off(r,s)}),hc(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Js(n,this.name),this.registerEventListeners()}get context(){return Ro(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=E9,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:qv(UI().protocol).publish,params:eS({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Fs((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Fs((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Cs.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,zO(eS({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(zO(eS({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Am.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Cs.connection_stalled);return}this.checkQueue()}),this.relayer.on(Cs.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var gBe=Object.defineProperty,mBe=(t,e,n)=>e in t?gBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xm=(t,e,n)=>mBe(t,typeof e!="symbol"?e+"":e,n);class yBe{constructor(){Xm(this,"map",new Map),Xm(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Xm(this,"get",e=>this.map.get(e)||[]),Xm(this,"exists",(e,n)=>this.get(e).includes(n)),Xm(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Xm(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var wBe=Object.defineProperty,bBe=Object.defineProperties,vBe=Object.getOwnPropertyDescriptors,P9=Object.getOwnPropertySymbols,EBe=Object.prototype.hasOwnProperty,CBe=Object.prototype.propertyIsEnumerable,X3=(t,e,n)=>e in t?wBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sv=(t,e)=>{for(var n in e||(e={}))EBe.call(e,n)&&X3(t,n,e[n]);if(P9)for(var n of P9(e))CBe.call(e,n)&&X3(t,n,e[n]);return t},HO=(t,e)=>bBe(t,vBe(e)),qn=(t,e,n)=>X3(t,typeof e!="symbol"?e+"":e,n);class _Be extends aDe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,qn(this,"subscriptions",new Map),qn(this,"topicMap",new yBe),qn(this,"events",new nc.EventEmitter),qn(this,"name",c$e),qn(this,"version",l$e),qn(this,"pending",new Map),qn(this,"cached",[]),qn(this,"initialized",!1),qn(this,"storagePrefix",nu),qn(this,"subscribeTimeout",Re.toMiliseconds(Re.ONE_MINUTE)),qn(this,"initialSubscribeTimeout",Re.toMiliseconds(Re.ONE_SECOND*15)),qn(this,"clientId"),qn(this,"batchSubscribeTopicsLimit",500),qn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),qn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=UI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),qn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),qn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),qn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),qn(this,"on",(r,s)=>{this.events.on(r,s)}),qn(this,"once",(r,s)=>{this.events.once(r,s)}),qn(this,"off",(r,s)=>{this.events.off(r,s)}),qn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),qn(this,"start",async()=>{await this.onConnect()}),qn(this,"stop",async()=>{await this.onDisconnect()}),qn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),qn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),qn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Am.pulse,async()=>{await this.checkPending()}),this.events.on(Fo.created,async r=>{const s=Fo.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Fo.deleted,async r=>{const s=Fo.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Js(n,this.name),this.clientId=""}get context(){return Ro(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=UI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Un("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===lr.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:qv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===lr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},Re.toMiliseconds(Re.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Fo.created,d),u(h.id))};this.events.on(Fo.created,d);try{const h=await zh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Fo.created,d),u(h)}catch{}}),l=await zh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Cs.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:qv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await zh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Cs.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:qv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await zh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Cs.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:qv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,HO(Sv({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Sv({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Sv({},n)),this.topicMap.set(n.topic,e),this.events.emit(Fo.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Fo.deleted,HO(Sv({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Fo.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Fo.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>HO(Sv({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await R3e(Re.toMiliseconds(Re.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Pl(e+await this.getClientId())}}var ABe=Object.defineProperty,O9=Object.getOwnPropertySymbols,SBe=Object.prototype.hasOwnProperty,xBe=Object.prototype.propertyIsEnumerable,e5=(t,e,n)=>e in t?ABe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k9=(t,e)=>{for(var n in e||(e={}))SBe.call(e,n)&&e5(t,n,e[n]);if(O9)for(var n of O9(e))xBe.call(e,n)&&e5(t,n,e[n]);return t},pn=(t,e,n)=>e5(t,typeof e!="symbol"?e+"":e,n);class IBe extends iDe{constructor(e){super(e),pn(this,"protocol","wc"),pn(this,"version",2),pn(this,"core"),pn(this,"logger"),pn(this,"events",new nc.EventEmitter),pn(this,"provider"),pn(this,"messages"),pn(this,"subscriber"),pn(this,"publisher"),pn(this,"name",r$e),pn(this,"transportExplicitlyClosed",!1),pn(this,"initialized",!1),pn(this,"connectionAttemptInProgress",!1),pn(this,"relayUrl"),pn(this,"projectId"),pn(this,"packageName"),pn(this,"bundleId"),pn(this,"hasExperiencedNetworkDisruption",!1),pn(this,"pingTimeout"),pn(this,"heartBeatTimeout",Re.toMiliseconds(Re.THIRTY_SECONDS+Re.FIVE_SECONDS)),pn(this,"reconnectTimeout"),pn(this,"connectPromise"),pn(this,"reconnectInProgress",!1),pn(this,"requestsInFlight",[]),pn(this,"connectTimeout",Re.toMiliseconds(Re.ONE_SECOND*15)),pn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||$p().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),pn(this,"resetPingTimeout",()=>{LI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),pn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),pn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Cs.connect)}),pn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),pn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Cs.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),pn(this,"registerProviderListeners",()=>{this.provider.on(ba.payload,this.onPayloadHandler),this.provider.on(ba.connect,this.onConnectHandler),this.provider.on(ba.disconnect,this.onDisconnectHandler),this.provider.on(ba.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Js(e.logger,this.name):C1(xm({level:e.logger||n$e})),this.messages=new cBe(this.logger,e.core),this.subscriber=new _Be(this,this.logger),this.publisher=new pBe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||zX,this.projectId=e.projectId,p3e()?this.packageName=Pj():g3e()&&(this.bundleId=Pj()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return Ro(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:lr.relay},JS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Fo.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Fo.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,k9({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await zh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await b9())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Zr(Re.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Cs.message,e),await this.recordMessageEvent(e,JS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ba.disconnect,i),await zh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ba.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ba.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ba.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Re.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(LI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new rc(new GPe(v3e({sdkVersion:K3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),V$(e)){if(!e.method.endsWith(s$e))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:lr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(k9({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else UT(e)&&this.events.emit(Cs.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,JS.inbound),this.events.emit(Cs.message,e))}async acknowledgePayload(e){const n=LT(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(ba.payload,this.onPayloadHandler),this.provider.off(ba.connect,this.onConnectHandler),this.provider.off(ba.disconnect,this.onDisconnectHandler),this.provider.off(ba.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await b9();WLe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Am.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&GLe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Cs.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Re.toMiliseconds(i$e)))))}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function NBe(){}function D9(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function M9(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function L9(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const TBe="[object RegExp]",RBe="[object String]",PBe="[object Number]",OBe="[object Boolean]",$9="[object Arguments]",kBe="[object Symbol]",DBe="[object Date]",MBe="[object Map]",LBe="[object Set]",$Be="[object Array]",UBe="[object Function]",BBe="[object ArrayBuffer]",GO="[object Object]",FBe="[object Error]",jBe="[object DataView]",WBe="[object Uint8Array]",zBe="[object Uint8ClampedArray]",HBe="[object Uint16Array]",GBe="[object Uint32Array]",qBe="[object BigUint64Array]",VBe="[object Int8Array]",KBe="[object Int16Array]",YBe="[object Int32Array]",QBe="[object BigInt64Array]",JBe="[object Float32Array]",ZBe="[object Float64Array]";function XBe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function e6e(t,e,n){return Vv(t,e,void 0,void 0,void 0,void 0,n)}function Vv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return DE(t,e,i,o)}return DE(t,e,i,o)}function DE(t,e,n,r){if(Object.is(t,e))return!0;let s=L9(t),i=L9(e);if(s===$9&&(s=GO),i===$9&&(i=GO),s!==i)return!1;switch(s){case RBe:return t.toString()===e.toString();case PBe:{const c=t.valueOf(),l=e.valueOf();return XBe(c,l)}case OBe:case DBe:case kBe:return Object.is(t.valueOf(),e.valueOf());case TBe:return t.source===e.source&&t.flags===e.flags;case UBe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case MBe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Vv(l,e.get(c),c,t,e,n,r))return!1;return!0}case LBe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Vv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case $Be:case WBe:case zBe:case HBe:case GBe:case qBe:case VBe:case KBe:case YBe:case QBe:case JBe:case ZBe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Vv(t[c],e[c],c,t,e,n,r))return!1;return!0}case BBe:return t.byteLength!==e.byteLength?!1:DE(new Uint8Array(t),new Uint8Array(e),n,r);case jBe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:DE(new Uint8Array(t),new Uint8Array(e),n,r);case FBe:return t.name===e.name&&t.message===e.message;case GO:{if(!(DE(t.constructor,e.constructor,n,r)||D9(t)&&D9(e)))return!1;const c=[...Object.keys(t),...M9(t)],l=[...Object.keys(e),...M9(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Vv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function t6e(t,e){return e6e(t,e,NBe)}var n6e=Object.defineProperty,U9=Object.getOwnPropertySymbols,r6e=Object.prototype.hasOwnProperty,s6e=Object.prototype.propertyIsEnumerable,t5=(t,e,n)=>e in t?n6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B9=(t,e)=>{for(var n in e||(e={}))r6e.call(e,n)&&t5(t,n,e[n]);if(U9)for(var n of U9(e))s6e.call(e,n)&&t5(t,n,e[n]);return t},Zi=(t,e,n)=>t5(t,typeof e!="symbol"?e+"":e,n);class Nm extends oDe{constructor(e,n,r,s=nu,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Zi(this,"map",new Map),Zi(this,"version",o$e),Zi(this,"cached",[]),Zi(this,"initialized",!1),Zi(this,"getKey"),Zi(this,"storagePrefix",nu),Zi(this,"recentlyDeleted",[]),Zi(this,"recentlyDeletedLimit",200),Zi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Fs(o)?this.map.set(this.getKey(o),o):bLe(o)?this.map.set(o.id,o):vLe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Zi(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Zi(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Zi(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>t6e(a[c],o[c]))):this.values)),Zi(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=B9(B9({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Zi(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Js(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Ro(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Pe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var i6e=Object.defineProperty,o6e=(t,e,n)=>e in t?i6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tn=(t,e,n)=>o6e(t,typeof e!="symbol"?e+"":e,n);class a6e{constructor(e,n){this.core=e,this.logger=n,tn(this,"name",u$e),tn(this,"version",d$e),tn(this,"events",new M$),tn(this,"pairings"),tn(this,"initialized",!1),tn(this,"storagePrefix",nu),tn(this,"ignoredPayloadTypes",[id]),tn(this,"registeredMethods",[]),tn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),tn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),tn(this,"create",async r=>{this.isInitialized();const s=q3(),i=await this.core.crypto.setSymKey(s),o=Zr(Re.FIVE_MINUTES),a={protocol:WX},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=u9({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(vp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),tn(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[dl.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=l9(r.uri);s.props.properties.topic=i,s.addTrace(dl.pairing_uri_validation_success),s.addTrace(dl.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(dl.existing_pairing),u.active)throw s.setError(Au.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(dl.pairing_not_expired)}const d=c||Zr(Re.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(dl.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(vp.create,h),s.addTrace(dl.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(dl.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Au.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Au.subscribe_pairing_topic_failure),f}return s.addTrace(dl.subscribe_pairing_topic_success),h}),tn(this,"activate",async({topic:r})=>{this.isInitialized();const s=Zr(Re.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),tn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=hp();this.events.once(xn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),tn(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),tn(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),tn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),tn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Un("USER_DISCONNECTED")),await this.deletePairing(s))}),tn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return u9({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),tn(this,"sendRequest",async(r,s,i)=>{const o=Wh(s,i),a=await this.core.crypto.encode(r,o),c=_v[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),tn(this,"sendResult",async(r,s,i)=>{const o=LT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=_v[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),tn(this,"sendError",async(r,s,i)=>{const o=$T(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=_v[c]?_v[c].res:_v.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),tn(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Un("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),tn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>sh(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),tn(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),tn(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),tn(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(vp.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),tn(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{pl(s)?this.events.emit(xn("pairing_ping",i),{}):Da(s)&&this.events.emit(xn("pairing_ping",i),{error:s.error})},500)}),tn(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(vp.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),tn(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Un("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),tn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Un("WC_METHOD_UNSUPPORTED",r))}),tn(this,"isValidPair",(r,s)=>{var i;if(!so(r)){const{message:a}=Pe("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Au.malformed_pairing_uri),new Error(a)}if(!wLe(r.uri)){const{message:a}=Pe("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Au.malformed_pairing_uri),new Error(a)}const o=l9(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Pe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Au.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Pe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Au.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Re.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Au.pairing_expired);const{message:a}=Pe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),tn(this,"isValidPing",async r=>{if(!so(r)){const{message:i}=Pe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),tn(this,"isValidDisconnect",async r=>{if(!so(r)){const{message:i}=Pe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),tn(this,"isValidPairingTopic",async r=>{if(!Vr(r,!1)){const{message:s}=Pe("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(sh(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Pe("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Js(n,this.name),this.pairings=new Nm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ro(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Cs.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==lr.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);V$(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):UT(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Sa.expired,async e=>{const{topic:n}=sX(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(vp.expire,{topic:n}))})}}var c6e=Object.defineProperty,l6e=(t,e,n)=>e in t?c6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ks=(t,e,n)=>l6e(t,typeof e!="symbol"?e+"":e,n);class u6e extends nDe{constructor(e,n){super(e,n),this.core=e,this.logger=n,ks(this,"records",new Map),ks(this,"events",new nc.EventEmitter),ks(this,"name",h$e),ks(this,"version",f$e),ks(this,"cached",[]),ks(this,"initialized",!1),ks(this,"storagePrefix",nu),ks(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ks(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Zr(Re.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(uc.created,o)}),ks(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Da(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(uc.updated,s))}),ks(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),ks(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(uc.deleted,i)}}),this.persist()}),ks(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),ks(this,"on",(r,s)=>{this.events.on(r,s)}),ks(this,"once",(r,s)=>{this.events.once(r,s)}),ks(this,"off",(r,s)=>{this.events.off(r,s)}),ks(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Js(n,this.name)}get context(){return Ro(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Wh(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(uc.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(uc.created,e=>{const n=uc.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(uc.updated,e=>{const n=uc.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(uc.deleted,e=>{const n=uc.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Am.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Re.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(uc.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var d6e=Object.defineProperty,h6e=(t,e,n)=>e in t?d6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oi=(t,e,n)=>h6e(t,typeof e!="symbol"?e+"":e,n);class f6e extends cDe{constructor(e,n){super(e,n),this.core=e,this.logger=n,oi(this,"expirations",new Map),oi(this,"events",new nc.EventEmitter),oi(this,"name",p$e),oi(this,"version",g$e),oi(this,"cached",[]),oi(this,"initialized",!1),oi(this,"storagePrefix",nu),oi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),oi(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),oi(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Sa.created,{target:i,expiration:o})}),oi(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),oi(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Sa.deleted,{target:s,expiration:i})}}),oi(this,"on",(r,s)=>{this.events.on(r,s)}),oi(this,"once",(r,s)=>{this.events.once(r,s)}),oi(this,"off",(r,s)=>{this.events.off(r,s)}),oi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Js(n,this.name)}get context(){return Ro(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return E3e(e);if(typeof e=="number")return C3e(e);const{message:n}=Pe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Sa.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Re.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Sa.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Am.pulse,()=>this.checkExpirations()),this.events.on(Sa.created,e=>{const n=Sa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Sa.expired,e=>{const n=Sa.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Sa.deleted,e=>{const n=Sa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var p6e=Object.defineProperty,g6e=(t,e,n)=>e in t?p6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qr=(t,e,n)=>g6e(t,typeof e!="symbol"?e+"":e,n);class m6e extends lDe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,qr(this,"name",m$e),qr(this,"abortController"),qr(this,"isDevEnv"),qr(this,"verifyUrlV3",w$e),qr(this,"storagePrefix",nu),qr(this,"version",jX),qr(this,"publicKey"),qr(this,"fetchPromise"),qr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Re.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),qr(this,"register",async s=>{if(!Rb()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Kg(),u=this.startAbortTimer(Re.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(_3(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),qr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(_3(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),qr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Re.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),qr(this,"getVerifyUrl",s=>{let i=s||kE;return b$e.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${kE}`),i=kE),i}),qr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Re.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),qr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),qr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),qr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),qr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),qr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),qr(this,"validateAttestation",(s,i)=>{const o=JMe(s,i.publicKey),a={hasExpired:Re.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Js(n,this.name),this.abortController=new AbortController,this.isDevEnv=K$(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Ro(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Re.toMiliseconds(e))}}var y6e=Object.defineProperty,w6e=(t,e,n)=>e in t?y6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F9=(t,e,n)=>w6e(t,typeof e!="symbol"?e+"":e,n);class b6e extends uDe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,F9(this,"context",v$e),F9(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${E$e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Js(n,this.context)}}var v6e=Object.defineProperty,j9=Object.getOwnPropertySymbols,E6e=Object.prototype.hasOwnProperty,C6e=Object.prototype.propertyIsEnumerable,n5=(t,e,n)=>e in t?v6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xv=(t,e)=>{for(var n in e||(e={}))E6e.call(e,n)&&n5(t,n,e[n]);if(j9)for(var n of j9(e))C6e.call(e,n)&&n5(t,n,e[n]);return t},fs=(t,e,n)=>n5(t,typeof e!="symbol"?e+"":e,n);class _6e extends dDe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,fs(this,"context",_$e),fs(this,"storagePrefix",nu),fs(this,"storageVersion",C$e),fs(this,"events",new Map),fs(this,"shouldPersist",!1),fs(this,"init",async()=>{if(!K$())try{const s={eventId:kj(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:nX(this.core.relayer.protocol,this.core.relayer.version,K3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),fs(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=kj(),u=this.core.projectId||"",d=Date.now(),h=xv({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),fs(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return xv(xv({},a),this.setMethods(a.eventId))}),fs(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),fs(this,"setEventListeners",()=>{this.core.heartbeat.on(Am.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Re.fromMiliseconds(Date.now())-Re.fromMiliseconds(s.timestamp)>A$e&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),fs(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),fs(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),fs(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),fs(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),fs(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,xv(xv({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),fs(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),fs(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${S$e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${K3}${i}`,{method:"POST",body:JSON.stringify(s)})}),fs(this,"getAppDomain",()=>tX().url),this.logger=Js(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var A6e=Object.defineProperty,W9=Object.getOwnPropertySymbols,S6e=Object.prototype.hasOwnProperty,x6e=Object.prototype.propertyIsEnumerable,r5=(t,e,n)=>e in t?A6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z9=(t,e)=>{for(var n in e||(e={}))S6e.call(e,n)&&r5(t,n,e[n]);if(W9)for(var n of W9(e))x6e.call(e,n)&&r5(t,n,e[n]);return t},Xn=(t,e,n)=>r5(t,typeof e!="symbol"?e+"":e,n);let I6e=class tee extends Zke{constructor(e){var n;super(e),Xn(this,"protocol",FX),Xn(this,"version",jX),Xn(this,"name",V3),Xn(this,"relayUrl"),Xn(this,"projectId"),Xn(this,"customStoragePrefix"),Xn(this,"events",new nc.EventEmitter),Xn(this,"logger"),Xn(this,"heartbeat"),Xn(this,"relayer"),Xn(this,"crypto"),Xn(this,"storage"),Xn(this,"history"),Xn(this,"expirer"),Xn(this,"pairing"),Xn(this,"verify"),Xn(this,"echoClient"),Xn(this,"linkModeSupportedApps"),Xn(this,"eventClient"),Xn(this,"initialized",!1),Xn(this,"logChunkController"),Xn(this,"on",(a,c)=>this.events.on(a,c)),Xn(this,"once",(a,c)=>this.events.once(a,c)),Xn(this,"off",(a,c)=>this.events.off(a,c)),Xn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Xn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:lr.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||zX,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=xm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:VLe.logger,name:V3}),{logger:i,chunkLoggerController:o}=PT({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Js(i,this.name),this.heartbeat=new sxe,this.crypto=new eBe(this,this.logger,e==null?void 0:e.keychain),this.history=new u6e(this,this.logger),this.expirer=new f6e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Yke(z9(z9({},KLe),e==null?void 0:e.storageOptions)),this.relayer=new IBe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new a6e(this,this.logger),this.verify=new m6e(this,this.logger,this.storage),this.echoClient=new b6e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new _6e(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new tee(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(a$e,r),n}get context(){return Ro(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(C9,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(C9)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&qLe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const N6e=I6e,nee="wc",ree=2,see="client",nU=`${nee}@${ree}:${see}:`,qO={name:see,logger:"error"},H9="WALLETCONNECT_DEEPLINK_CHOICE",T6e="proposal",G9="Proposal expired",R6e="session",ey=Re.SEVEN_DAYS,P6e="engine",ps={wc_sessionPropose:{req:{ttl:Re.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Re.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Re.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Re.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Re.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Re.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Re.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Re.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Re.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1119}}},VO={min:Re.FIVE_MINUTES,max:Re.SEVEN_DAYS},cl={idle:"IDLE",active:"ACTIVE"},q9={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},O6e="request",k6e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],D6e="wc",M6e="auth",L6e="authKeys",$6e="pairingTopics",U6e="requests",YT=`${D6e}@${1.5}:${M6e}:`,ZS=`${YT}:PUB_KEY`;var B6e=Object.defineProperty,F6e=Object.defineProperties,j6e=Object.getOwnPropertyDescriptors,V9=Object.getOwnPropertySymbols,W6e=Object.prototype.hasOwnProperty,z6e=Object.prototype.propertyIsEnumerable,s5=(t,e,n)=>e in t?B6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vn=(t,e)=>{for(var n in e||(e={}))W6e.call(e,n)&&s5(t,n,e[n]);if(V9)for(var n of V9(e))z6e.call(e,n)&&s5(t,n,e[n]);return t},Ei=(t,e)=>F6e(t,j6e(e)),we=(t,e,n)=>s5(t,typeof e!="symbol"?e+"":e,n);class H6e extends gDe{constructor(e){super(e),we(this,"name",P6e),we(this,"events",new M$),we(this,"initialized",!1),we(this,"requestQueue",{state:cl.idle,queue:[]}),we(this,"sessionRequestQueue",{state:cl.idle,queue:[]}),we(this,"requestQueueDelay",Re.ONE_SECOND),we(this,"expectedPairingMethodMap",new Map),we(this,"recentlyDeletedMap",new Map),we(this,"recentlyDeletedLimit",200),we(this,"relayMessageCache",[]),we(this,"pendingSessions",new Map),we(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ps)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Re.toMiliseconds(this.requestQueueDelay)))}),we(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Ei(Vn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=fLe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const I=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),I}if(!u||!h){const{topic:I,uri:x}=await this.client.core.pairing.create();u=I,d=x}if(!u){const{message:I}=Pe("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(I)}const f=await this.client.core.crypto.generateKeyPair(),p=ps.wc_sessionPropose.req.ttl||Re.FIVE_MINUTES,g=Zr(p),w=Ei(Vn(Vn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:WX}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:fl()}),y=xn("session_connect",w.id),{reject:b,resolve:v,done:A}=hp(p,G9),_=({id:I})=>{I===w.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:G9,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(y,({error:I,session:x})=>{this.client.events.off("proposal_expire",_),I?b(I):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:A}}),we(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),we(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[dc.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(tp.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(tp.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(tp.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:dc.session_approve_started,properties:{topic:p,trace:[dc.session_approve_started,dc.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,_=await this.client.core.crypto.generateSharedKey(v,A),I=Vn(Vn(Vn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Zr(ey)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=lr.relay;b.addTrace(dc.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:x})}catch(S){throw b.setError(tp.subscribe_session_topic_failure),S}b.addTrace(dc.subscribe_session_topic_success);const N=Ei(Vn({},I),{topic:_,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:I.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:lr.relay});await this.client.session.set(_,N),b.addTrace(dc.store_session);try{b.addTrace(dc.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(tp.session_settle_publish_failure),S}),b.addTrace(dc.session_settle_publish_success),b.addTrace(dc.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(tp.session_approve_publish_failure),S}),b.addTrace(dc.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(_,Un("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Un("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,Zr(ey)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),we(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:ps.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Un("USER_DISCONNECTED")))}),we(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=hp(),c=fl(),l=$p().toString(),u=this.client.session.get(r).namespaces;return this.events.once(xn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),we(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=fl(),{done:i,resolve:o,reject:a}=hp();return this.events.once(xn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Zr(ey)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),we(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=ps.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===lr.relay&&await this.confirmOnlineStateOrThrow();const c=fl(),l=$p().toString(),{done:u,resolve:d,reject:h}=hp(o,"Request expired. Please try again.");this.events.once(xn("session_request",c),({error:y,result:b})=>{y?h(y):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Ei(Vn({},s),{expiryTimestamp:Zr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Ei(Vn({},s),{expiryTimestamp:Zr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(Vn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await x3e(this.client.core.storage,H9);await _3e({id:c,topic:i,wcDeepLink:v})}y()}),u()]).then(y=>y[2])}),we(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===lr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);pl(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Da(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),we(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=fl(),i=$p().toString(),{done:o,resolve:a,reject:c}=hp();this.events.once(xn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),we(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=$p().toString(),a=fl();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),we(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Un("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Pe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),we(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>mLe(r,n)))),we(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),we(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?lr.link_mode:lr.relay;o===lr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),_=QS(A);if(await Promise.all([this.client.auth.authKeys.set(ZS,{responseTopic:_,publicKey:A}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:b})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:M}=a0(a[0]);let j=w5e(M,"request",g);YS(y)&&(j=v5e(j,y.pop())),y.push(j)}const I=w&&w>ps.wc_sessionAuthenticate.req.ttl?w:ps.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Zr(I)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Zr(ps.wc_sessionPropose.req.ttl),id:fl()},{done:O,resolve:P,reject:F}=hp(I,"Request expired"),q=fl(),z=xn("session_connect",S.id),T=xn("session_request",q),R=async({error:M,session:j})=>{this.events.off(T,U),M?F(M):j&&P({session:j})},U=async M=>{var j,Y,ne;if(await this.deletePendingAuthRequest(q,{message:"fulfilled",code:0}),M.error){const $e=Un("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===$e.code?void 0:(this.events.off(z,R),F(M.error.message))}await this.deleteProposal(S.id),this.events.off(z,R);const{cacaos:le,responder:oe}=M.result,ae=[],ue=[];for(const $e of le){await jj({cacao:$e,projectId:this.client.core.projectId})||(this.client.logger.error($e,"Signature verification failed"),F(Un("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:st}=$e,Ot=YS(st.resources),Xt=[$3(st.iss)],X=$I(st.iss);if(Ot){const ce=Wj(Ot),Ce=zj(Ot);ae.push(...ce),Xt.push(...Ce)}for(const ce of Xt)ue.push(`${ce}:${X}`)}const tt=await this.client.core.crypto.generateSharedKey(A,oe.publicKey);let Ne;ae.length>0&&(Ne={topic:tt,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:oe,controller:oe.publicKey,expiry:Zr(ey),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:p9([...new Set(ae)],[...new Set(ue)]),transportType:o},await this.client.core.relayer.subscribe(tt,{transportType:o}),await this.client.session.set(tt,Ne),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:oe.metadata}),Ne=this.client.session.get(tt)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(Y=oe.metadata.redirect)!=null&&Y.linkMode&&(ne=oe.metadata.redirect)!=null&&ne.universal&&r&&(this.client.core.addLinkModeSupportedApp(oe.metadata.redirect.universal),this.client.session.update(tt,{transportType:lr.link_mode})),P({auths:le,session:Ne})};this.events.once(z,R),this.events.once(T,U);let k;try{if(i){const M=Wh("wc_sessionAuthenticate",x,q);this.client.core.history.set(b,M);const j=await this.client.core.crypto.encode("",M,{type:O1,encoding:lh});k=XA(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:q}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:ps.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(M){throw this.events.off(z,R),this.events.off(T,U),M}return await this.setProposal(S.id,S),await this.setAuthRequest(q,{request:Ei(Vn({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:k??v,response:O}}),we(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[np.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(Av.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Av.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||lr.relay;a===lr.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=QS(c),d={type:id,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await jj({cacao:w,projectId:this.client.core.projectId})){i.setError(Av.invalid_cacao);const _=Un("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(np.cacaos_verified);const{p:y}=w,b=YS(y.resources),v=[$3(y.iss)],A=$I(y.iss);if(b){const _=Wj(b),I=zj(b);h.push(..._),v.push(...I)}for(const _ of v)f.push(`${_}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(np.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Zr(ey),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:p9([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(np.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(Av.subscribe_authenticated_session_topic_failure),w}i.addTrace(np.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(np.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(np.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(Av.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),we(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===lr.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=QS(o),l={type:id,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:ps.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Un("USER_DISCONNECTED"))}),we(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return fX(r,s)}),we(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),we(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),we(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Un("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(H9).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Un("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=cl.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),we(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(tp.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Un("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),we(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=cl.idle,this.client.events.emit("session_request_expire",{id:n}))}),we(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),we(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),we(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Zr(ps.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),we(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=lr.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),we(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Zr(ps.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),we(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Wh(s,i,c);let f;const p=!!u;try{const y=p?lh:Bc;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(k6e.includes(s)){const y=Pl(JSON.stringify(h)),b=Pl(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=ps[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=XA(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=ps[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Ei(Vn({},d),{correlationId:h.id}),l?(y.internal=Ei(Vn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),we(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=LT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?lh:Bc;u=await this.client.core.crypto.encode(s,l,Ei(Vn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=XA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=ps[p].res;g.tvf=Ei(Vn({},f),{correlationId:r}),o?(g.internal=Ei(Vn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),we(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=$T(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?lh:Bc;u=await this.client.core.crypto.encode(s,l,Ei(Vn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=XA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||ps[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),we(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;sh(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{sh(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),we(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),we(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),we(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===cl.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=cl.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=cl.idle}),we(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),we(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),we(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Pe("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),we(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),we(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Au.proposal_listener_not_found)),this.isValidConnect(Vn({},s.params));const u=a.expiryTimestamp||Zr(ps.wc_sessionPropose.req.ttl),d=Vn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Pl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(dl.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:ps.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),we(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(pl(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Da(r)){await this.client.proposal.delete(i,Un("USER_DISCONNECTED"));const o=xn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),we(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=Ei(Vn(Vn(Vn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:lr.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(xn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;pl(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(xn("session_approve",s),{})):Da(r)&&(await this.client.session.delete(n,Un("USER_DISCONNECTED")),this.events.emit(xn("session_approve",s),{error:r.error}))}),we(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Cv.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Un("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Vn({topic:n},s));try{Cv.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Cv.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),we(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=xn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);pl(r)?this.events.emit(xn("session_update",s),{}):Da(r)&&this.events.emit(xn("session_update",s),{error:r.error})}),we(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Zr(ey)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=xn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);pl(r)?this.events.emit(xn("session_extend",s),{}):Da(r)&&this.events.emit(xn("session_extend",s),{error:r.error})}),we(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=xn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);pl(r)?this.events.emit(xn("session_ping",s),{}):Da(r)&&this.events.emit(xn("session_ping",s),{error:r.error})},500)}),we(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Cs.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Un("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),we(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Vn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Pl(JSON.stringify(Wh("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===lr.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),we(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=xn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);pl(r)?this.events.emit(xn("session_request",s),{result:r.result}):Da(r)&&this.events.emit(xn("session_request",s),{error:r.error})}),we(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Cv.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Vn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Cv.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),pl(r)?this.events.emit(xn("session_request",s),{result:r.result}):Da(r)&&this.events.emit(xn("session_request",s),{error:r.error})}),we(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Pl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===lr.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:id,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:ps.wc_sessionAuthenticate.autoReject,appLink:h})}}),we(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),we(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=cl.idle,this.processSessionRequestQueue()},Re.toMiliseconds(this.requestQueueDelay))}),we(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=xn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(xn("session_request",i.request.id),{error:r})})}),we(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===cl.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=cl.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),we(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),we(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Wh("wc_sessionPropose",Ei(Vn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),we(this,"isValidConnect",async n=>{if(!so(n)){const{message:l}=Pe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Fs(r)||await this.isValidPairingTopic(r),!NLe(c)){const{message:l}=Pe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Fs(s)&&pf(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Fs(i)&&pf(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Fs(o)||this.validateSessionProps(o,"sessionProperties"),!Fs(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),we(this,"validateNamespaces",(n,r)=>{const s=ILe(n,"connect()",r);if(s)throw new Error(s.message)}),we(this,"isValidApprove",async n=>{if(!so(n))throw new Error(Pe("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=FO(s,"approve()");if(l)throw new Error(l.message);const u=y9(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Vr(i,!0)){const{message:d}=Pe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Fs(o)||this.validateSessionProps(o,"sessionProperties"),!Fs(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),we(this,"isValidReject",async n=>{if(!so(n)){const{message:i}=Pe("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!RLe(s)){const{message:i}=Pe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),we(this,"isValidSessionSettleRequest",n=>{if(!so(n)){const{message:l}=Pe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!BX(r)){const{message:l}=Pe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=ELe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=FO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(sh(o)){const{message:l}=Pe("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),we(this,"isValidUpdate",async n=>{if(!so(n)){const{message:c}=Pe("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=FO(s,"update()");if(o)throw new Error(o.message);const a=y9(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),we(this,"isValidExtend",async n=>{if(!so(n)){const{message:s}=Pe("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),we(this,"isValidRequest",async n=>{if(!so(n)){const{message:c}=Pe("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!m9(a,i)){const{message:c}=Pe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!PLe(s)){const{message:c}=Pe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!DLe(a,i,s.method)){const{message:c}=Pe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!ULe(o,VO)){const{message:c}=Pe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${VO.min} and ${VO.max}`);throw new Error(c)}}),we(this,"isValidRespond",async n=>{var r;if(!so(n)){const{message:o}=Pe("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!OLe(i)){const{message:o}=Pe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),we(this,"isValidPing",async n=>{if(!so(n)){const{message:s}=Pe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidEmit",async n=>{if(!so(n)){const{message:a}=Pe("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!m9(o,i)){const{message:a}=Pe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!kLe(s)){const{message:a}=Pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!MLe(o,i,s.name)){const{message:a}=Pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),we(this,"isValidDisconnect",async n=>{if(!so(n)){const{message:s}=Pe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Vr(s,!1))throw new Error("uri is required parameter");if(!Vr(i,!1))throw new Error("domain is required parameter");if(!Vr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>a0(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=a0(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),we(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||kE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===lr.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),we(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Pe("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),we(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),we(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),we(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Pe("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),we(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==lr.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),we(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),we(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=Oj(n,"topic")||"",s=decodeURIComponent(Oj(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:lr.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),we(this,"registerLinkModeListeners",async()=>{var n;if(K$()||jf()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),we(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(q9).includes(s.method)}),we(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return Ei(Vn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),we(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),we(this,"extractTxHashesFromResult",(n,r)=>{try{const s=q9[n];if(typeof r=="string")return[r];const i=r[s.key];if(ff(i))return n==="solana_signAllTransactions"?i.map(o=>s5e(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Cs.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(ZS)?this.client.auth.authKeys.get(ZS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===lr.link_mode?lh:Bc});V$(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Pl(r)})):UT(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Sa.expired,async e=>{const{topic:n,id:r}=sX(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Pe("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Pe("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(vp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(vp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Vr(e,!1)){const{message:n}=Pe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(sh(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Pe("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Vr(e,!1)){const{message:n}=Pe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Pe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(sh(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Pe("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Pe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Vr(e,!1)){const{message:n}=Pe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Pe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!TLe(e)){const{message:n}=Pe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Pe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(sh(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Pe("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class G6e extends Nm{constructor(e,n){super(e,n,T6e,nU),this.core=e,this.logger=n}}let q6e=class extends Nm{constructor(e,n){super(e,n,R6e,nU),this.core=e,this.logger=n}};class V6e extends Nm{constructor(e,n){super(e,n,O6e,nU,r=>r.id),this.core=e,this.logger=n}}class K6e extends Nm{constructor(e,n){super(e,n,L6e,YT,()=>ZS),this.core=e,this.logger=n}}class Y6e extends Nm{constructor(e,n){super(e,n,$6e,YT),this.core=e,this.logger=n}}class Q6e extends Nm{constructor(e,n){super(e,n,U6e,YT,r=>r.id),this.core=e,this.logger=n}}var J6e=Object.defineProperty,Z6e=(t,e,n)=>e in t?J6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KO=(t,e,n)=>Z6e(t,typeof e!="symbol"?e+"":e,n);class X6e{constructor(e,n){this.core=e,this.logger=n,KO(this,"authKeys"),KO(this,"pairingTopics"),KO(this,"requests"),this.authKeys=new K6e(this.core,this.logger),this.pairingTopics=new Y6e(this.core,this.logger),this.requests=new Q6e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var e8e=Object.defineProperty,t8e=(t,e,n)=>e in t?e8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nn=(t,e,n)=>t8e(t,typeof e!="symbol"?e+"":e,n);let n8e=class iee extends pDe{constructor(e){super(e),nn(this,"protocol",nee),nn(this,"version",ree),nn(this,"name",qO.name),nn(this,"metadata"),nn(this,"core"),nn(this,"logger"),nn(this,"events",new nc.EventEmitter),nn(this,"engine"),nn(this,"session"),nn(this,"proposal"),nn(this,"pendingRequest"),nn(this,"auth"),nn(this,"signConfig"),nn(this,"on",(r,s)=>this.events.on(r,s)),nn(this,"once",(r,s)=>this.events.once(r,s)),nn(this,"off",(r,s)=>this.events.off(r,s)),nn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),nn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),nn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),nn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),nn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||qO.name,this.metadata=y3e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:C1(xm({level:(e==null?void 0:e.logger)||qO.logger}));this.core=(e==null?void 0:e.core)||new N6e(e),this.logger=Js(n,this.name),this.session=new q6e(this.core,this.logger),this.proposal=new G6e(this.core,this.logger),this.pendingRequest=new V6e(this.core,this.logger),this.engine=new H6e(this),this.auth=new X6e(this.core,this.logger)}static async init(e){const n=new iee(e);return await n.initialize(),n}get context(){return Ro(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Re.toMiliseconds(Re.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const K9="error",r8e="wss://relay.walletconnect.org",s8e="wc",i8e="universal_provider",tS=`${s8e}@2:${i8e}:`,oee="https://rpc.walletconnect.org/v1/",vy="generic",o8e=`${oee}bundler`,sc={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function a8e(){}function rU(t){return t==null||typeof t!="object"&&typeof t!="function"}function sU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function c8e(t){if(rU(t))return t;if(Array.isArray(t)||sU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Y9(t){return typeof t=="object"&&t!==null}function aee(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function cee(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const l8e="[object RegExp]",lee="[object String]",uee="[object Number]",dee="[object Boolean]",hee="[object Arguments]",u8e="[object Symbol]",d8e="[object Date]",h8e="[object Map]",f8e="[object Set]",p8e="[object Array]",g8e="[object ArrayBuffer]",m8e="[object Object]",y8e="[object DataView]",w8e="[object Uint8Array]",b8e="[object Uint8ClampedArray]",v8e="[object Uint16Array]",E8e="[object Uint32Array]",C8e="[object Int8Array]",_8e="[object Int16Array]",A8e="[object Int32Array]",S8e="[object Float32Array]",x8e="[object Float64Array]";function I8e(t,e){return Wy(t,void 0,t,new Map,e)}function Wy(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(rU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Wy(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Wy(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Wy(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(sU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Wy(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Ep(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Ep(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Ep(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Ep(o,t,n,r,s),o}if(typeof t=="object"&&N8e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Ep(o,t,n,r,s),o}return t}function Ep(t,e,n=t,r,s){const i=[...Object.keys(e),...aee(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Wy(e[a],a,n,r,s))}}function N8e(t){switch(cee(t)){case hee:case p8e:case g8e:case y8e:case dee:case d8e:case S8e:case x8e:case C8e:case _8e:case A8e:case h8e:case uee:case m8e:case l8e:case f8e:case lee:case u8e:case w8e:case b8e:case v8e:case E8e:return!0;default:return!1}}function T8e(t,e){return I8e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case uee:case lee:case dee:{const o=new t.constructor(t==null?void 0:t.valueOf());return Ep(o,t),o}case hee:{const o={};return Ep(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Q9(t){return T8e(t)}function J9(t){return t!==null&&typeof t=="object"&&cee(t)==="[object Arguments]"}function R8e(t){return sU(t)}function P8e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function O8e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=i5(s,o,r,new Map)}return s}function i5(t,e,n,r){if(rU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return c8e(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...aee(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(J9(a)&&(a={...a}),J9(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Q9(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Y9(c)&&Y9(a)?t[o]=i5(c,a,n,r):c==null&&P8e(a)?t[o]=i5({},a,n,r):c==null&&R8e(a)?t[o]=Q9(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function k8e(t,...e){return O8e(t,...e,a8e)}var D8e=Object.defineProperty,M8e=Object.defineProperties,L8e=Object.getOwnPropertyDescriptors,Z9=Object.getOwnPropertySymbols,$8e=Object.prototype.hasOwnProperty,U8e=Object.prototype.propertyIsEnumerable,X9=(t,e,n)=>e in t?D8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nS=(t,e)=>{for(var n in e||(e={}))$8e.call(e,n)&&X9(t,n,e[n]);if(Z9)for(var n of Z9(e))U8e.call(e,n)&&X9(t,n,e[n]);return t},B8e=(t,e)=>M8e(t,L8e(e));function oa(t,e,n){var r;const s=a0(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${oee}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Tm(t){return t.includes(":")?t.split(":")[1]:t}function fee(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function F8e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function rS(t={},e={}){const n=e7(t),r=e7(e);return k8e(n,r)}function e7(t){var e,n,r,s,i;const o={};if(!pf(t))return o;for(const[a,c]of Object.entries(t)){const l=VT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=jy(a);o[f]=B8e(nS(nS({},o[f]),c),{chains:Kl(l,(e=o[f])==null?void 0:e.chains),methods:Kl(u,(n=o[f])==null?void 0:n.methods),events:Kl(d,(r=o[f])==null?void 0:r.events)}),(pf(h)||pf(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=nS(nS({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function t7(t){return t.includes(":")?t.split(":")[2]:t}function n7(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=VT(n)?[n]:r.chains?r.chains:fee(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function YO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const pee={},bn=t=>pee[t],QO=(t,e)=>{pee[t]=e};var j8e=Object.defineProperty,W8e=(t,e,n)=>e in t?j8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ty=(t,e,n)=>W8e(t,typeof e!="symbol"?e+"":e,n);class z8e{constructor(e){ty(this,"name","polkadot"),ty(this,"client"),ty(this,"httpProviders"),ty(this,"events"),ty(this,"namespace"),ty(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||oa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new Zc(r,bn("disableProviderPing")))}}var H8e=Object.defineProperty,G8e=Object.defineProperties,q8e=Object.getOwnPropertyDescriptors,r7=Object.getOwnPropertySymbols,V8e=Object.prototype.hasOwnProperty,K8e=Object.prototype.propertyIsEnumerable,o5=(t,e,n)=>e in t?H8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,s7=(t,e)=>{for(var n in e||(e={}))V8e.call(e,n)&&o5(t,n,e[n]);if(r7)for(var n of r7(e))K8e.call(e,n)&&o5(t,n,e[n]);return t},i7=(t,e)=>G8e(t,q8e(e)),ny=(t,e,n)=>o5(t,typeof e!="symbol"?e+"":e,n);class Y8e{constructor(e){ny(this,"name","eip155"),ny(this,"client"),ny(this,"chainId"),ny(this,"namespace"),ny(this,"httpProviders"),ny(this,"events"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||oa(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new Zc(r,bn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Tm(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:i7(s7({},u.sessionProperties||{}),{capabilities:i7(s7({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Wh("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${o8e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var Q8e=Object.defineProperty,J8e=(t,e,n)=>e in t?Q8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ry=(t,e,n)=>J8e(t,typeof e!="symbol"?e+"":e,n);class Z8e{constructor(e){ry(this,"name","solana"),ry(this,"client"),ry(this,"httpProviders"),ry(this,"events"),ry(this,"namespace"),ry(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||oa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new Zc(r,bn("disableProviderPing")))}}var X8e=Object.defineProperty,e4e=(t,e,n)=>e in t?X8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sy=(t,e,n)=>e4e(t,typeof e!="symbol"?e+"":e,n);class t4e{constructor(e){sy(this,"name","cosmos"),sy(this,"client"),sy(this,"httpProviders"),sy(this,"events"),sy(this,"namespace"),sy(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||oa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new Zc(r,bn("disableProviderPing")))}}var n4e=Object.defineProperty,r4e=(t,e,n)=>e in t?n4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iy=(t,e,n)=>r4e(t,typeof e!="symbol"?e+"":e,n);class s4e{constructor(e){iy(this,"name","algorand"),iy(this,"client"),iy(this,"httpProviders"),iy(this,"events"),iy(this,"namespace"),iy(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||oa(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||oa(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new rc(new Zc(r,bn("disableProviderPing")))}}var i4e=Object.defineProperty,o4e=(t,e,n)=>e in t?i4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oy=(t,e,n)=>o4e(t,typeof e!="symbol"?e+"":e,n);class a4e{constructor(e){oy(this,"name","cip34"),oy(this,"client"),oy(this,"httpProviders"),oy(this,"events"),oy(this,"namespace"),oy(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Tm(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new Zc(r,bn("disableProviderPing")))}}var c4e=Object.defineProperty,l4e=(t,e,n)=>e in t?c4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ay=(t,e,n)=>l4e(t,typeof e!="symbol"?e+"":e,n);class u4e{constructor(e){ay(this,"name","elrond"),ay(this,"client"),ay(this,"httpProviders"),ay(this,"events"),ay(this,"namespace"),ay(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||oa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new Zc(r,bn("disableProviderPing")))}}var d4e=Object.defineProperty,h4e=(t,e,n)=>e in t?d4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cy=(t,e,n)=>h4e(t,typeof e!="symbol"?e+"":e,n);class f4e{constructor(e){cy(this,"name","multiversx"),cy(this,"client"),cy(this,"httpProviders"),cy(this,"events"),cy(this,"namespace"),cy(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||oa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new Zc(r,bn("disableProviderPing")))}}var p4e=Object.defineProperty,g4e=(t,e,n)=>e in t?p4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ly=(t,e,n)=>g4e(t,typeof e!="symbol"?e+"":e,n);class m4e{constructor(e){ly(this,"name","near"),ly(this,"client"),ly(this,"httpProviders"),ly(this,"events"),ly(this,"namespace"),ly(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||oa(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||oa(e,this.namespace);return typeof r>"u"?void 0:new rc(new Zc(r,bn("disableProviderPing")))}}var y4e=Object.defineProperty,w4e=(t,e,n)=>e in t?y4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uy=(t,e,n)=>w4e(t,typeof e!="symbol"?e+"":e,n);class b4e{constructor(e){uy(this,"name","tezos"),uy(this,"client"),uy(this,"httpProviders"),uy(this,"events"),uy(this,"namespace"),uy(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||oa(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||oa(e,this.namespace);return typeof r>"u"?void 0:new rc(new Zc(r))}}var v4e=Object.defineProperty,E4e=(t,e,n)=>e in t?v4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dy=(t,e,n)=>E4e(t,typeof e!="symbol"?e+"":e,n);class C4e{constructor(e){dy(this,"name",vy),dy(this,"client"),dy(this,"httpProviders"),dy(this,"events"),dy(this,"namespace"),dy(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=a0(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||oa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new Zc(r,bn("disableProviderPing")))}}var _4e=Object.defineProperty,A4e=Object.defineProperties,S4e=Object.getOwnPropertyDescriptors,o7=Object.getOwnPropertySymbols,x4e=Object.prototype.hasOwnProperty,I4e=Object.prototype.propertyIsEnumerable,a5=(t,e,n)=>e in t?_4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sS=(t,e)=>{for(var n in e||(e={}))x4e.call(e,n)&&a5(t,n,e[n]);if(o7)for(var n of o7(e))I4e.call(e,n)&&a5(t,n,e[n]);return t},JO=(t,e)=>A4e(t,S4e(e)),va=(t,e,n)=>a5(t,typeof e!="symbol"?e+"":e,n);let N4e=class gee{constructor(e){va(this,"client"),va(this,"namespaces"),va(this,"optionalNamespaces"),va(this,"sessionProperties"),va(this,"scopedProperties"),va(this,"events",new M$),va(this,"rpcProviders",{}),va(this,"session"),va(this,"providerOpts"),va(this,"logger"),va(this,"uri"),va(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:C1(xm({level:(e==null?void 0:e.logger)||K9})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new gee(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:sS({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,LT(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Un("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=n7(this.session.namespaces);this.namespaces=rS(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=n7(s.namespaces);return this.namespaces=rS(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===vy?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(ff(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await n8e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||K9,relayUrl:this.providerOpts.relayUrl||r8e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>jy(n)))];QO("client",this.client),QO("events",this.events),QO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=F8e(n,this.session),s=fee(r),i=rS(this.namespaces,this.optionalNamespaces),o=JO(sS({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new Y8e({namespace:o});break;case"algorand":this.rpcProviders[n]=new s4e({namespace:o});break;case"solana":this.rpcProviders[n]=new Z8e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new t4e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new z8e({namespace:o});break;case"cip34":this.rpcProviders[n]=new a4e({namespace:o});break;case"elrond":this.rpcProviders[n]=new u4e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new f4e({namespace:o});break;case"near":this.rpcProviders[n]=new m4e({namespace:o});break;case"tezos":this.rpcProviders[n]=new b4e({namespace:o});break;default:this.rpcProviders[vy]?this.rpcProviders[vy].updateNamespace(o):this.rpcProviders[vy]=new C4e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&ff(o)&&this.events.emit("accountsChanged",o.map(t7))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=jy(o),l=YO(o)!==YO(a)?`${c}:${YO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=JO(sS({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",JO(sS({},Un("USER_DISCONNECTED")),{data:e.topic})))}),this.on(sc.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[vy]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=rS(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>jy(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=jy(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(t7);if(!ff(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${tS}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${tS}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${tS}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(tS)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var a7={};const T4e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof a7<"u"?a7.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},c5={filterOutDuplicatesByRDNS(t){const e=ve.state.enableEIP6963?je.state.connectors:[],n=Qe.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&lt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=je.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Qe.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=je.state,{featuredWalletIds:n}=ve.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ve.state.features)==null?void 0:c.connectMethodsOrder),r=e||je.state.connectors;if(n)return n;const{injected:s,announced:i}=XS.getConnectorsByType(r,ut.state.recommended,ut.state.featured),o=s.filter(XS.showConnector),a=i.filter(XS.showConnector);return o.length||a.length?["wallet","email","social"]:T4e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ut.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ut.state.excludedWallets.some(r=>BT.isLowerCaseMatch(r.name,t.name));return e||n}},XS={getConnectorsByType(t,e,n){const{customWallets:r}=ve.state,s=Qe.getRecentWallets(),i=c5.filterOutDuplicateWallets(e),o=c5.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ut.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ut.state.excludedWallets.some(i=>BT.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!lt.isMobile()||lt.isMobile()&&!e&&!bt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(H.state.chains.values()).some(n=>je.getConnectorId(n.namespace)===We.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ve.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=XS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ve.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:v})=>v===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ex=globalThis,iU=ex.ShadowRoot&&(ex.ShadyCSS===void 0||ex.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,oU=Symbol(),c7=new WeakMap;let mee=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==oU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(iU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=c7.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&c7.set(n,e))}return e}toString(){return this.cssText}};const _a=t=>new mee(typeof t=="string"?t:t+"",void 0,oU),od=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new mee(n,t,oU)},R4e=(t,e)=>{if(iU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=ex.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},l7=iU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return _a(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:P4e,defineProperty:O4e,getOwnPropertyDescriptor:k4e,getOwnPropertyNames:D4e,getOwnPropertySymbols:M4e,getPrototypeOf:L4e}=Object,gf=globalThis,u7=gf.trustedTypes,$4e=u7?u7.emptyScript:"",ZO=gf.reactiveElementPolyfillSupport,ME=(t,e)=>t,l5={toAttribute(t,e){switch(e){case Boolean:t=t?$4e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},yee=(t,e)=>!P4e(t,e),d7={attribute:!0,type:String,converter:l5,reflect:!1,useDefault:!1,hasChanged:yee};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),gf.litPropertyMetadata??(gf.litPropertyMetadata=new WeakMap);let Ey=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=d7){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&O4e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=k4e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??d7}static _$Ei(){if(this.hasOwnProperty(ME("elementProperties")))return;const e=L4e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ME("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ME("properties"))){const n=this.properties,r=[...D4e(n),...M4e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(l7(s))}else e!==void 0&&n.push(l7(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return R4e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:l5).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:l5;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??yee)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Ey.elementStyles=[],Ey.shadowRootOptions={mode:"open"},Ey[ME("elementProperties")]=new Map,Ey[ME("finalized")]=new Map,ZO==null||ZO({ReactiveElement:Ey}),(gf.reactiveElementVersions??(gf.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const LE=globalThis,FI=LE.trustedTypes,h7=FI?FI.createPolicy("lit-html",{createHTML:t=>t}):void 0,wee="$lit$",uh=`lit$${Math.random().toFixed(9).slice(2)}$`,bee="?"+uh,U4e=`<${bee}>`,nm=document,l_=()=>nm.createComment(""),u_=t=>t===null||typeof t!="object"&&typeof t!="function",aU=Array.isArray,B4e=t=>aU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",XO=`[ 	
\f\r]`,Iv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,f7=/-->/g,p7=/>/g,rp=RegExp(`>|${XO}(?:([^\\s"'>=/]+)(${XO}*=${XO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),g7=/'/g,m7=/"/g,vee=/^(?:script|style|textarea|title)$/i,Eee=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),OKe=Eee(1),kKe=Eee(2),Vw=Symbol.for("lit-noChange"),_s=Symbol.for("lit-nothing"),y7=new WeakMap,Bp=nm.createTreeWalker(nm,129);function Cee(t,e){if(!aU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return h7!==void 0?h7.createHTML(e):e}const F4e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Iv;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Iv?u[1]==="!--"?o=f7:u[1]!==void 0?o=p7:u[2]!==void 0?(vee.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=rp):u[3]!==void 0&&(o=rp):o===rp?u[0]===">"?(o=s??Iv,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?rp:u[3]==='"'?m7:g7):o===m7||o===g7?o=rp:o===f7||o===p7?o=Iv:(o=rp,s=void 0);const f=o===rp&&t[a+1].startsWith("/>")?" ":"";i+=o===Iv?c+U4e:d>=0?(r.push(l),c.slice(0,d)+wee+c.slice(d)+uh+f):c+uh+(d===-2?a:f)}return[Cee(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class d_{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=F4e(e,n);if(this.el=d_.createElement(l,r),Bp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Bp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(wee)){const h=u[o++],f=s.getAttribute(d).split(uh),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?W4e:p[1]==="?"?z4e:p[1]==="@"?H4e:QT}),s.removeAttribute(d)}else d.startsWith(uh)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(vee.test(s.tagName)){const d=s.textContent.split(uh),h=d.length-1;if(h>0){s.textContent=FI?FI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],l_()),Bp.nextNode(),c.push({type:2,index:++i});s.append(d[h],l_())}}}else if(s.nodeType===8)if(s.data===bee)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(uh,d+1))!==-1;)c.push({type:7,index:i}),d+=uh.length-1}i++}}static createElement(e,n){const r=nm.createElement("template");return r.innerHTML=e,r}}function Kw(t,e,n=t,r){var o,a;if(e===Vw)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=u_(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Kw(t,s._$AS(t,e.values),s,r)),e}class j4e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??nm).importNode(n,!0);Bp.currentNode=s;let i=Bp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new D1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new G4e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Bp.nextNode(),o++)}return Bp.currentNode=nm,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class D1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=_s,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Kw(this,e,n),u_(e)?e===_s||e==null||e===""?(this._$AH!==_s&&this._$AR(),this._$AH=_s):e!==this._$AH&&e!==Vw&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):B4e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==_s&&u_(this._$AH)?this._$AA.nextSibling.data=e:this.T(nm.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=d_.createElement(Cee(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new j4e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=y7.get(e.strings);return n===void 0&&y7.set(e.strings,n=new d_(e)),n}k(e){aU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new D1(this.O(l_()),this.O(l_()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class QT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=_s,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=_s}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Kw(this,e,n,0),o=!u_(e)||e!==this._$AH&&e!==Vw,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Kw(this,a[r+c],n,c),l===Vw&&(l=this._$AH[c]),o||(o=!u_(l)||l!==this._$AH[c]),l===_s?e=_s:e!==_s&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===_s?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class W4e extends QT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===_s?void 0:e}}class z4e extends QT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==_s)}}class H4e extends QT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Kw(this,e,n,0)??_s)===Vw)return;const r=this._$AH,s=e===_s&&r!==_s||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==_s&&(r===_s||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class G4e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Kw(this,e)}}const e2=LE.litHtmlPolyfillSupport;e2==null||e2(d_,D1),(LE.litHtmlVersions??(LE.litHtmlVersions=[])).push("3.3.1");const q4e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new D1(e.insertBefore(l_(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ag=globalThis;let tx=class extends Ey{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=q4e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Vw}};var yz;tx._$litElement$=!0,tx.finalized=!0,(yz=Ag.litElementHydrateSupport)==null||yz.call(Ag,{LitElement:tx});const t2=Ag.litElementPolyfillSupport;t2==null||t2({LitElement:tx});(Ag.litElementVersions??(Ag.litElementVersions=[])).push("4.2.1");let $E,mf,yf;function MKe(t,e){$E=document.createElement("style"),mf=document.createElement("style"),yf=document.createElement("style"),$E.textContent=c0(t).core.cssText,mf.textContent=c0(t).dark.cssText,yf.textContent=c0(t).light.cssText,document.head.appendChild($E),document.head.appendChild(mf),document.head.appendChild(yf),_ee(e)}function _ee(t){mf&&yf&&(t==="light"?(mf.removeAttribute("media"),yf.media="enabled"):(yf.removeAttribute("media"),mf.media="enabled"))}function V4e(t){$E&&mf&&yf&&($E.textContent=c0(t).core.cssText,mf.textContent=c0(t).dark.cssText,yf.textContent=c0(t).light.cssText)}function c0(t){return{core:od`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${_a(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${_a((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${_a((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${_a((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${_a((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:od`
      :root {
        --w3m-color-mix: ${_a((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${_a(Zu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${_a(Zu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:od`
      :root {
        --w3m-color-mix: ${_a((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${_a(Zu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${_a(Zu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const LKe=od`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,$Ke=od`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,UKe=od`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Kv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};function M1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const jI=M1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),WI=M1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),Aee=M1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});M1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});M1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const K4e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},nx={getMethodsByChainNamespace(t){return K4e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case jI.caipNetworkId:u.chains.push(jI.deprecatedCaipNetworkId);break;case WI.caipNetworkId:u.chains.push(WI.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await NE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let See=class{constructor({provider:e,namespace:n}){this.id=We.CONNECTOR_ID.WALLET_CONNECT,this.name=AI.ConnectorNamesMap[We.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=AI.ConnectorImageIds[We.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=H.getCaipNetworks.bind(H),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ve.state.universalProviderConfigOverride,s=nx.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return PE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Y4e})}};const Y4e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let Q4e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>H.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:We.CONNECTOR_ID.AUTH,type:"AUTH",name:We.CONNECTOR_NAMES.AUTH,provider:e,imageId:AI.ConnectorImageIds[We.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ye.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ye.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof See);if(!e)throw new Error("WalletConnectConnector not found");return e}};class J4e extends Q4e{setUniversalProvider(e){this.addConnector(new See({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>lt.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Bn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ye.state.balanceLoading&&e.chainId===((c=H.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ye.state.balance||"0.00",symbol:Ye.state.balanceSymbol||""};const s=(await Ye.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===We.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:vZ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=H.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===We.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Ya(n.id)}]}))}catch(u){if(u.code===Kv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Kv.ERROR_INVALID_CHAIN_ID||u.code===Kv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Kv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Ya(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const Z4e=["email","socials","swaps","onramp","activity","reownBranding"],iS={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},X4e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=iS[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=iS[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return iS[t].processApi(e)},processFallbackFeature(t,e){return iS[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await ut.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Bn.DEFAULT_REMOTE_FEATURES:Bn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of Z4e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Bn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;$l.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class eFe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=H.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=H.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=H.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return H.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>H.getCaipNetworks(n),this.getActiveChainNamespace=()=>H.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{H.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>H.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>H.state.activeChain===n||!n?H.state.activeCaipAddress:H.getAccountProp("caipAddress",n),this.setClientId=n=>{wt.setClientId(n)},this.getProvider=n=>$n.getProvider(n),this.getProviderType=n=>$n.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ye.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ye.setCaipAddress(n,r),n&&ve.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ye.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ye.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ye.setProfileImage(n,r)},this.setUser=(n,r)=>{Ye.setUser(n,r)},this.resetAccount=n=>{Ye.resetAccount(n)},this.setCaipNetwork=n=>{H.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{H.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ye.setAllAccounts(n,r),ve.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ye.setStatus(n,r),je.isConnected()?Qe.setConnectionStatus("connected"):Qe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>H.getAccountProp("address",n),this.setConnectors=n=>{const r=[...je.state.allConnectors,...n];je.setConnectors(r)},this.setConnections=(n,r)=>{bt.setConnections(n,r)},this.fetchIdentity=n=>wt.fetchIdentity(n),this.getReownName=n=>NE.getNamesForAddress(n),this.getConnectors=()=>je.getConnectors(),this.getConnectorImage=n=>SJ.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=$n.getProviderId(r),i=n?{...n,type:s}:void 0;Ye.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!H.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ye.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ye.removeAddressLabel(n,r)},this.getAddress=n=>H.state.activeChain===n||!n?Ye.state.address:H.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>H.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{H.resetNetwork(n)},this.addConnector=n=>{je.addConnector(n)},this.resetWcConnection=()=>{bt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ye.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ye.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{H.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ye.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ve.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await X4e.fetchRemoteFeatures(e),ve.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&f3.setOnrampProviders(this.remoteFeatures.onramp),((n=ve.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ve.state.remoteFeatures)==null?void 0:r.socials)&&((s=ve.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await ut.fetchAllowedOrigins();if(e&&lt.isClient()){const n=window.location.origin;nx.isOriginAllowed(n,e,Kv.DEFAULT_ALLOWED_ANCESTORS)||$l.open(Rl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else $l.open(Rl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,mr.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&uo.setThemeMode(e.themeMode),e.themeVariables&&uo.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");H.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&H.setActiveCaipNetwork(n)}initializeConnectionController(e){bt.setWcBasic(e.basic??!1)}initializeConnectorController(){je.initialize(this.chainNamespaces)}initializeProjectSettings(e){ve.setProjectId(e.projectId),ve.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ve.setDebug(e.debug!==!1),ve.setEnableWalletConnect(e.enableWalletConnect!==!1),ve.setEnableWalletGuide(e.enableWalletGuide!==!1),ve.setEnableWallets(e.enableWallets!==!1),ve.setEIP6963Enabled(e.enableEIP6963!==!1),ve.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ve.setEnableAuthLogger(e.enableAuthLogger!==!1),ve.setCustomRpcUrls(e.customRpcUrls),ve.setEnableEmbedded(e.enableEmbedded),ve.setAllWallets(e.allWallets),ve.setIncludeWalletIds(e.includeWalletIds),ve.setExcludeWalletIds(e.excludeWalletIds),ve.setFeaturedWalletIds(e.featuredWalletIds),ve.setTokens(e.tokens),ve.setTermsConditionsUrl(e.termsConditionsUrl),ve.setPrivacyPolicyUrl(e.privacyPolicyUrl),ve.setCustomWallets(e.customWallets),ve.setFeatures(e.features),ve.setAllowUnsupportedChain(e.allowUnsupportedChain),ve.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ve.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ve.setDefaultAccountTypes(e.defaultAccountTypes);const n=Qe.getPreferredAccountTypes()||{},r={...ve.state.defaultAccountTypes,...n};Ye.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ve.setMetadata(e.metadata),ve.setDisableAppend(e.disableAppend),ve.setEnableEmbedded(e.enableEmbedded),ve.setSIWX(e.siwx),!e.projectId){$l.open(Rl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===We.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ve.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return lt.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=wy.getUnsupportedNetwork(`${n}:${e}`);H.setActiveCaipNetwork(r)}}getDefaultNetwork(){return wy.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return wy.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return wy.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?wy.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=$n.getProvider(e),s=$n.getProviderId(e),{caipAddress:i}=H.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Qe.removeConnectedNamespace(e),$n.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),je.removeConnectorId(e),H.resetAccount(e),H.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=H.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Qe.setConnectedNamespaces([...H.state.chains.keys()]),this.chainNamespaces.forEach(o=>{je.setConnectorId(ho.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,v,A;const c=H.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(I=>I.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((A=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Qe.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ye.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=H.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Qe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=eOe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));En.resetSend(),bt.resetWcConnection(),await PE.clearSessions(),je.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Qe.deleteConnectedSocialProvider(),mr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(H.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ye.state.address,provider:$n.getProvider(H.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Bn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(H.state.activeChain),s=$n.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===We.CHAIN.EVM){const n=this.getAdapter(H.state.activeChain),r=$n.getProvider(H.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ye.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:H.state.activeChain}),Ye.state.profileImage||!1},getEnsAddress:async e=>await nx.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(H.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=$n.getProvider(H.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ye.state.address||this.updateNativeBalance(Ye.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},bt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if($n.getProviderId(H.state.activeChain)===ho.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=$n.getProvider(n),i=$n.getProviderId(n);if(e.chainNamespace===H.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===ho.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Ld.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new J4e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Qe.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Qe.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=H.state.activeChain===e,c=H.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ye.state.address,i=H.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=H.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=H.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=H.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===We.CHAIN.EVM&&lt.isSafeApp()&&je.setConnectorId(We.CONNECTOR_ID.SAFE,e);const n=je.getConnectorId(e);switch(this.setStatus("connecting",e),n){case We.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case We.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=je.getConnectorId(e),s=this.getCaipNetwork(e),o=je.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([lt.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=H.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Ld.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Ld.validateCaipAddress(o),{chainId:f,address:p}=Ld.parseCaipAddress(h);if($n.setProviderId(n,ho.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&H.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==We.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:H.state.activeCaipNetwork});$n.setProvider(n,g)}else $n.setProvider(n,this.universalProvider);je.setConnectorId(We.CONNECTOR_ID.WALLET_CONNECT,n),Qe.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await H.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Ld.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>lt.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){$n.setProviderId(s,e),$n.setProvider(s,n),je.setConnectorId(r,s)}async syncAllAccounts(e){const n=je.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===H.state.activeChain,r=H.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Qe.getActiveNetworkProps(),c=i||a,l=((d=H.state.activeCaipNetwork)==null?void 0:d.name)===We.UNSUPPORTED_NETWORK_NAME,u=H.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(v=>{var A;return((A=Ld.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),b=w.find(v=>{var A;return((A=Ld.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===y),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===H.state.activeChain?ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&((h=H.state.activeCaipNetwork)==null?void 0:h.name)===We.UNSUPPORTED_NETWORK_NAME?H.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),BT.isLowerCaseMatch(s,Ye.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=je.getConnectorId(e),r=$n.getProviderId(e);if(r===ho.CONNECTOR_TYPE_ANNOUNCED||r===ho.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===ho.CONNECTOR_TYPE_WALLET_CONNECT){const i=$n.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===We.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===We.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!EJ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=H.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=rOe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ve.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await N4e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{bt.setUri(e)}),this.universalProvider.on("connect",bt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),bt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(nx.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&lt.isCaipAddress(r[0])&&this.syncAccount(Ld.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&lt.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){mr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Rl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Rl.ALERT_ERRORS[o];a&&($l.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&bt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return As.open({...e,data:{swap:e.arguments}})}return As.open(e)}async close(){await this.injectModalUi(),As.close()}setLoading(e,n){As.setLoading(e,n)}async disconnect(e){await bt.disconnect(e)}getSIWX(){return ve.state.siwx}getError(){return""}getChainId(){var e;return(e=H.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){$l.open(Rl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await H.switchActiveNetwork(n)}getWalletProvider(){return H.state.activeChain?$n.state.providers[H.state.activeChain]:null}getWalletProviderType(){return $n.getProviderId(H.state.activeChain)}subscribeProviders(e){return $n.subscribeProviders(e)}getThemeMode(){return uo.state.themeMode}getThemeVariables(){return uo.state.themeVariables}setThemeMode(e){uo.setThemeMode(e),_ee(uo.state.themeMode)}setTermsConditionsUrl(e){ve.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ve.setPrivacyPolicyUrl(e)}setThemeVariables(e){uo.setThemeVariables(e),V4e(uo.state.themeVariables)}subscribeTheme(e){return uo.subscribe(e)}getWalletInfo(){return Ye.state.connectedWalletInfo}getAccount(e){var o;const n=je.getAuthConnector(e),r=H.getAccountData(e),s=H.state.activeChain,i=Qe.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:lt.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===We.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Qe.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?H.subscribeChainProp("accountState",r,n):H.subscribe(r),je.subscribe(r)}subscribeNetwork(e){return H.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ye.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ye.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){H.subscribeKey("activeCaipNetwork",e)}getState(){return ql.state}subscribeState(e){return ql.subscribe(e)}showErrorMessage(e){Mc.showError(e)}showSuccessMessage(e){Mc.showSuccess(e)}getEvent(){return{...mr.state}}subscribeEvents(e){return mr.subscribe(e)}replace(e){Ht.replace(e)}redirect(e){Ht.push(e)}popTransactionStack(e){Ht.popTransactionStack(e)}isOpen(){return As.state.open}isTransactionStackEmpty(){return Ht.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ve.setFeatures(e)}updateRemoteFeatures(e){ve.setRemoteFeatures(e)}updateOptions(e){const r={...ve.state||{},...e};ve.setOptions(r)}setConnectMethodsOrder(e){ve.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ve.setWalletFeaturesOrder(e)}setCollapseWallets(e){ve.setCollapseWallets(e)}setSocialsOrder(e){ve.setSocialsOrder(e)}getConnectMethodsOrder(){return c5.getConnectOrderMethod(ve.state.features,je.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||H.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&H.removeNetwork(e,n)}}let w7=!1;class tFe extends eFe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Qo.checkIfRequestExists(n)?Qo.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(qs.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(qs.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Qo.checkIfRequestIsSafe(r),i=Ye.state.address,o=H.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=H.state.activeChain;je.getConnectorId(n)===We.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=H.state.activeChain,s=r===We.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ve.state.defaultAccountTypes[r],o=(l=Ye.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;BT.isLowerCaseMatch(n.address,Ye.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ye.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>lt.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[lt.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ye.state.user||{},username:n},H.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,H.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,H.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=We.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ye.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=uo.getSnapshot(),l=ve.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Zu(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:We.CONNECTOR_ID.AUTH,info:{name:We.CONNECTOR_ID.AUTH},type:ho.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=H.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):je.getConnectorId(n)===We.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Qe.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!lt.isTelegram())return;const r=Qe.getTelegramSocialProvider();if(!r||!lt.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ye.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=je.getAuthConnector();r&&o&&(this.setLoading(!0,e),await bt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Qe.setConnectedSocialProvider(r),Qe.removeTelegramSocialProvider(),mr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!We.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=Ske.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:Rl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?$l.open(Rl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?$l.open(Rl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&$l.open(Rl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),ql.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ut.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=H.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=$n.getProvider(r),u=$n.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=$n.getProviderId(n)===ho.CONNECTOR_TYPE_AUTH,u=$n.getProviderId(r),d=u===ho.CONNECTOR_TYPE_AUTH,h=We.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(H.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:We.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:ho.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===ho.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),ql.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==We.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=$n.getProviderId(e);if(n===ho.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Qe.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(lt.isClient()&&!w7)try{const e={...Bn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),lt.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ve.state.disableAppend&&!ve.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}w7=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!lt.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(hi(()=>import("./embedded-wallet-BR63Ztz8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(hi(()=>import("./email-DMTQtmuZ.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(hi(()=>import("./socials-A_6eDGRS.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(hi(()=>import("./swaps-C25R9VzU.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(hi(()=>import("./send-Bqr-qHjl.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(hi(()=>import("./receive-F-0Y0GNL.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(hi(()=>import("./onramp-gERYt3ak.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(hi(()=>import("./transactions-Br1dCGO0.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(hi(()=>import("./index-CdzwUp8p.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,hi(()=>import("./index-B2BfAjMq.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),hi(()=>import("./w3m-modal-DzCm2Llk.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Zd;function xee(t){t&&(Zd=t)}function L1(){if(!Zd)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Zd==null?void 0:Zd.open(n))}async function e(){await(Zd==null?void 0:Zd.close())}return{open:t,close:e}}const nFe="1.7.8";let oS;function rFe(t){return oS||(oS=new tFe({...t,sdkVersion:lt.generateSdkVersion(t.adapters??[],"react",nFe)}),xee(oS)),oS}const sFe=Jc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),b7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],iFe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=sFe({isOpen:t}),{open:i}=L1(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,w]=D.useState(1),[y,b]=D.useState(1),[v,A]=D.useState(0),[_,I]=D.useState(null),[x,N]=D.useState(b7[0]),[S,O]=D.useState(!1),[P,F]=D.useState(null),q=D.useCallback(async()=>{var M,j;try{if((M=window.solana)!=null&&M.isPhantom){const Y=await window.solana.connect();F(Y.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const Y=await window.solflare.connect();F(Y.publicKey.toString());return}i()}catch(Y){console.error("Failed to connect Solana wallet:",Y),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);D.useEffect(()=>{var M,j;(M=window.solana)!=null&&M.publicKey?F(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&F(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let Y,ne=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!P){O(!0),u(!1);return}ne=P||void 0,Y=await fK(x.slug,50),console.log("Fetched Solana NFTs from collection:",Y.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(j=Y.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",Y.data.map(oe=>({name:oe.name,owners:oe.owners,owner_of:oe.owner_of}))),Y.data.some(oe=>oe.owners&&oe.owners.length>0)?(Y.data=Y.data.filter(oe=>{const ae=oe.owners.some(ue=>ue.owner_of&&ue.owner_of.toLowerCase()===P.toLowerCase());return ae&&console.log("Found owned NFT:",oe.name),ae}),console.log("NFTs after filtering:",Y.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?Y=await WL(x.slug,50,ne):Y=await jL(x.slug,g,50,ne);c(Y.data),b(Y.totalPages),A(Y.totalCount)}catch(Y){Y instanceof Error?h(Y.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,P]),D.useEffect(()=>{S&&q()},[S,q]);const z=M=>new Date(M).toLocaleDateString(),T=M=>x.api==="opensea-solana"?M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"N/A",R=()=>{n&&n()},U=async M=>{if(x.api==="opensea"&&x.chain)try{const j=await hK(x.chain,M.address,M.token_id.toString()),Y={...M,attributes:JSON.stringify(j.traits||[])};I(Y)}catch(j){console.error("Failed to fetch full NFT details",j),I(M)}else I(M)},k=M=>{N(M),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(r1,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:R,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsx("div",{className:s.collectionSelector,children:b7.map(M=>m.jsx("button",{className:`${s.collectionButton} ${x.slug===M.slug?"active":""}`,onClick:()=>k(M),children:M.name},M.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{q()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!P&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(M=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{U(M)},children:[m.jsx(vJ,{src:bJ(M),alt:`NFT #${M.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",M.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",T(M)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",z(M.created_at)]})]},M.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(M=>Math.min(y,M+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&m.jsx(EAe,{nft:_,onClose:()=>I(null)})]}):null};var aS,oFe=new Uint8Array(16);function aFe(){if(!aS&&(aS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!aS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aS(oFe)}const cFe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function lFe(t){return typeof t=="string"&&cFe.test(t)}var Ds=[];for(var n2=0;n2<256;++n2)Ds.push((n2+256).toString(16).substr(1));function uFe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ds[t[e+0]]+Ds[t[e+1]]+Ds[t[e+2]]+Ds[t[e+3]]+"-"+Ds[t[e+4]]+Ds[t[e+5]]+"-"+Ds[t[e+6]]+Ds[t[e+7]]+"-"+Ds[t[e+8]]+Ds[t[e+9]]+"-"+Ds[t[e+10]]+Ds[t[e+11]]+Ds[t[e+12]]+Ds[t[e+13]]+Ds[t[e+14]]+Ds[t[e+15]]).toLowerCase();if(!lFe(n))throw TypeError("Stringified UUID is invalid");return n}function dFe(t,e,n){t=t||{};var r=t.random||(t.rng||aFe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,uFe(r)}const hFe=Jc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),fFe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],pFe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],Do=500;function Iee(){const t=hFe(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(50),[u,d]=D.useState(50),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[w,y]=D.useState(!1),[b,v]=D.useState(!1),[A,_]=D.useState(!1),[I,x]=D.useState([]),[N,S]=D.useState(null),O=D.useRef(null),[P,F]=D.useState(null),q=async X=>{const ce=X.getContext("2d");if(!ce)return;ce.clearRect(0,0,X.width,X.height),n?await new Promise(me=>{const Ee=new window.Image;Ee.crossOrigin="anonymous",Ee.onload=()=>{const Xe=Math.min(X.width/Ee.width,X.height/Ee.height),it=(X.width-Ee.width*Xe)/2,It=(X.height-Ee.height*Xe)/2;ce.drawImage(Ee,it,It,Ee.width*Xe,Ee.height*Xe),me()},Ee.onerror=()=>me(),Ee.src=n}):(ce.fillStyle="#333",ce.fillRect(0,0,X.width,X.height)),(me=>{me.textAlign="center",me.strokeStyle="black",me.lineWidth=3,me.fillStyle="white";const Ee=(Xe,it)=>{const It=Xe.toUpperCase().split(" "),St=[];let Kn=It[0];for(let Tt=1;Tt<It.length;Tt++){const Hr=It[Tt];me.measureText(Kn+" "+Hr).width<it?Kn+=" "+Hr:(St.push(Kn),Kn=Hr)}return St.push(Kn),St};if(s&&(me.font=`${c}px Impact`,Ee(s,Do-20).forEach((it,It)=>{const St=c+It*c*1.2;me.strokeText(it,Do/2,St),me.fillText(it,Do/2,St)})),o){me.font=`${u}px Impact`;const Xe=Ee(o,Do-20);Xe.forEach((it,It)=>{const St=Do-(Xe.length-It)*u*1.2+u;me.strokeText(it,Do/2,St),me.fillText(it,Do/2,St)})}})(ce),await Promise.all(I.map(me=>new Promise(Ee=>{const Xe=new window.Image;Xe.src=me.src,Xe.onload=()=>{ce.save(),ce.translate(me.x,me.y),ce.rotate(me.rotation*Math.PI/180),ce.scale(me.scale,me.scale),ce.drawImage(Xe,-40,-40,80,80),ce.restore(),Ee()},Xe.onerror=()=>Ee()})));try{h&&z(X),p&&T(X),w&&R(X)}catch(me){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",me),f(!1),g(!1),y(!1)}},z=X=>{const ce=X.getContext("2d");if(!ce)return;const Ce=ce.getImageData(0,0,X.width,X.height),me=Ce.data;for(let Ee=0;Ee<me.length;Ee+=4){const Xe=me[Ee],it=me[Ee+1],It=me[Ee+2],St=(Xe+it+It)/3,Kn=1.8;me[Ee]=Math.min(255,St+(Xe-St)*Kn),me[Ee+1]=Math.min(255,St+(it-St)*Kn*.7),me[Ee+2]=Math.min(255,St+(It-St)*Kn*.4);const Tt=1.3;me[Ee]=Math.min(255,Math.max(0,me[Ee]*Tt)),me[Ee+1]=Math.min(255,Math.max(0,me[Ee+1]*Tt)),me[Ee+2]=Math.min(255,Math.max(0,me[Ee+2]*Tt))}ce.putImageData(Ce,0,0)},T=X=>{const ce=X.getContext("2d");if(!ce)return;const Ce=4,Ee=ce.getImageData(0,0,X.width,X.height).data,Xe=new Uint8ClampedArray(Ee);for(let it=0;it<X.height;it+=Ce)for(let It=0;It<X.width;It+=Ce){const St=(it*X.width+It)*4,Kn=Ee[St],Tt=Ee[St+1],Hr=Ee[St+2],jt=Ee[St+3];for(let zn=0;zn<Ce&&it+zn<X.height;zn++)for(let Sr=0;Sr<Ce&&It+Sr<X.width;Sr++){const qi=((it+zn)*X.width+(It+Sr))*4;Xe[qi]=Kn,Xe[qi+1]=Tt,Xe[qi+2]=Hr,Xe[qi+3]=jt}}ce.putImageData(new ImageData(Xe,X.width,X.height),0,0)},R=X=>{const ce=X.getContext("2d");if(!ce)return;const Ce=ce.getImageData(0,0,X.width,X.height),me=Ce.data;for(let Ee=0;Ee<me.length;Ee+=4){const Xe=(Math.random()-.5)*50;me[Ee]=Math.max(0,Math.min(255,me[Ee]+Xe)),me[Ee+1]=Math.max(0,Math.min(255,me[Ee+1]+Xe)),me[Ee+2]=Math.max(0,Math.min(255,me[Ee+2]+Xe))}ce.putImageData(Ce,0,0)};D.useEffect(()=>{e.current&&q(e.current)},[q]);const U=D.useRef(null),k=500,M=X=>{X.preventDefault(),U.current=setTimeout(()=>{const ce=e.current;ce&&(navigator.share?ce.toBlob(Ce=>{if(Ce){const me=new File([Ce],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[me]}).catch(()=>{ae()})}}):ae())},k)},j=()=>{U.current&&(clearTimeout(U.current),U.current=null)},Y=()=>{U.current&&(clearTimeout(U.current),U.current=null)},ne=X=>{X.preventDefault()},le=X=>{var Ce;const ce=(Ce=X.target.files)==null?void 0:Ce[0];ce&&r(URL.createObjectURL(ce))},oe=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),g(!1),y(!1)},ae=async()=>{const X=e.current;if(!X)return;await q(X);const ce=document.createElement("a");ce.download="meme.png",ce.href=X.toDataURL("image/png"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},ue=async X=>{_(!0),v(!1);try{console.log("Fetching NFTs for collection:",X);let ce;if(X.api==="opensea"){console.log("Using OpenSea API for:",X.slug);const Ce=await WL(X.slug,50);ce=Ce.data,console.log("OpenSea response:",Ce)}else if(X.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",X.slug);const Ce=await fK(X.slug,50);if(ce=Ce.data,console.log("Helius Solana response:",Ce),!ce||ce.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",X.slug);const Ce=await jL(X.slug,1,50);ce=Ce.data,console.log("Scatter response:",Ce)}if(ce&&ce.length>0){const Ce=ce[Math.floor(Math.random()*ce.length)],me=Ce.image||Ce.image_url||Ce.image_url_shrunk;console.log("Selected NFT:",Ce),console.log("Image URL:",me),r(me)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ce){console.error("Error fetching NFTs:",ce),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}},tt=X=>{const ce={id:dFe(),src:X,x:80,y:80,scale:1,rotation:0};x(Ce=>Ce.length>=2||Ce.some(me=>me.src===X&&!me.id.startsWith("upload-"))?Ce:[...Ce,ce]),F(ce.id)},Ne=X=>{var Ce;const ce=(Ce=X.target.files)==null?void 0:Ce[0];if(ce){const me=URL.createObjectURL(ce);tt(me)}},$e=(X,ce,Ce)=>{x(me=>me.map(Ee=>{if(Ee.id!==X)return Ee;let Xe=Ee.x+ce/1.2,it=Ee.y+Ce/1.2;const It=40*Ee.scale,St=40*Ee.scale;return Xe=Math.max(It,Math.min(Do-It,Xe)),it=Math.max(St,Math.min(Do-St,it)),{...Ee,x:Xe,y:it}}))},st=(X,ce,Ce,me,Ee)=>{x(Xe=>Xe.map(it=>{if(it.id!==X)return it;const It=it.x,St=it.y,Kn=Math.atan2(Ee-St,me-It)*180/Math.PI;return{...it,rotation:Ce+(Kn-ce)*.5}}))},Ot=X=>{x(ce=>ce.filter(Ce=>Ce.id!==X))},Xt=(X,ce)=>{x(Ce=>Ce.map(me=>me.id===X?{...me,scale:Math.max(.2,me.scale*(1+(ce-1)*.2))}:me))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(X=>!X),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:fFe.map(X=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{ue(X)},children:X.name},X.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:le})]}),A&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:X=>i(X.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:X=>l(Number(X.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:X=>a(X.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:X=>d(Number(X.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(X=>!X),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(X=>!X),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(X=>!X),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[pFe.map((X,ce)=>m.jsx("img",{src:X,alt:`sticker${ce+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>tt(X)},X)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:O,onChange:Ne})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:ae,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:oe,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:Do,height:Do,className:t.canvas,onTouchStart:M,onTouchEnd:j,onTouchMove:Y,onContextMenu:ne,style:{touchAction:"none"}})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:Do,height:Do,pointerEvents:"none"},children:I.map(X=>P===X.id?m.jsxs("div",{style:{position:"absolute",left:X.x,top:X.y,width:80*X.scale,height:80*X.scale,transform:`rotate(${X.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ce=>{S(X.id),ce.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:ce=>{N===X.id&&ce.buttons===1&&$e(X.id,ce.movementX,ce.movementY)},children:[m.jsx("img",{src:X.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ce=>{var Kn;ce.stopPropagation();const Ce=(Kn=ce.currentTarget.parentElement)==null?void 0:Kn.getBoundingClientRect(),me=Ce?Ce.left+Ce.width/2:0,Ee=Ce?Ce.top+Ce.height/2:0,Xe=Math.atan2(ce.clientY-Ee,ce.clientX-me)*180/Math.PI,it=X.rotation,It=Tt=>{st(X.id,Xe,it,Tt.clientX,Tt.clientY)},St=()=>{window.removeEventListener("mousemove",It),window.removeEventListener("mouseup",St)};window.addEventListener("mousemove",It),window.addEventListener("mouseup",St)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ce=>{ce.stopPropagation();const Ce=ce.clientX,me=Xe=>{const it=(Xe.clientX-Ce)/80;Xt(X.id,1+it)},Ee=()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",Ee)};window.addEventListener("mousemove",me),window.addEventListener("mouseup",Ee)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>Ot(X.id),children:""}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>F(null),children:"Place"})]},X.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h_(){return h_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h_.apply(this,arguments)}var Hh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hh||(Hh={}));const v7="popstate";function gFe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return u5("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Tee(s)}return yFe(e,n,null,t)}function cs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nee(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mFe(){return Math.random().toString(36).substr(2,8)}function E7(t,e){return{usr:t.state,key:t.key,idx:e}}function u5(t,e,n,r){return n===void 0&&(n=null),h_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Db(e):e,{state:n,key:e&&e.key||r||mFe()})}function Tee(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Db(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yFe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Hh.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(h_({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Hh.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=Hh.Push;let b=u5(g.location,w,y);l=u()+1;let v=E7(b,l),A=g.createHref(b);try{o.pushState(v,"",A)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=Hh.Replace;let b=u5(g.location,w,y);l=u();let v=E7(b,l),A=g.createHref(b);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:Tee(w);return b=b.replace(/ $/,"%20"),cs(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(v7,d),c=w,()=>{s.removeEventListener(v7,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var C7;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(C7||(C7={}));function wFe(t,e,n){return n===void 0&&(n="/"),bFe(t,e,n)}function bFe(t,e,n,r){let s=typeof e=="string"?Db(e):e,i=Oee(s.pathname||"/",n);if(i==null)return null;let o=Ree(t);vFe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=OFe(i);a=TFe(o[c],l)}return a}function Ree(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(cs(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Sg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(cs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Ree(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:IFe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Pee(i.path))s(i,o,c)}),e}function Pee(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Pee(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function vFe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NFe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const EFe=/^:[\w-]+$/,CFe=3,_Fe=2,AFe=1,SFe=10,xFe=-2,_7=t=>t==="*";function IFe(t,e){let n=t.split("/"),r=n.length;return n.some(_7)&&(r+=xFe),e&&(r+=_Fe),n.filter(s=>!_7(s)).reduce((s,i)=>s+(EFe.test(i)?CFe:i===""?AFe:SFe),r)}function NFe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function TFe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=RFe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Sg([i,d.pathname]),pathnameBase:UFe(Sg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Sg([i,d.pathnameBase]))}return o}function RFe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PFe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function PFe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Nee(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OFe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nee(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Oee(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kFe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Db(t):t;return{pathname:n?n.startsWith("/")?n:DFe(n,e):e,search:BFe(r),hash:FFe(s)}}function DFe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function r2(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MFe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function LFe(t,e){let n=MFe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $Fe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Db(t):(s=h_({},t),cs(!s.pathname||!s.pathname.includes("?"),r2("?","pathname","search",s)),cs(!s.pathname||!s.pathname.includes("#"),r2("#","pathname","hash",s)),cs(!s.search||!s.search.includes("#"),r2("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=kFe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Sg=t=>t.join("/").replace(/\/\/+/g,"/"),UFe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BFe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FFe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jFe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kee=["post","put","patch","delete"];new Set(kee);const WFe=["get",...kee];new Set(WFe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f_(){return f_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f_.apply(this,arguments)}const cU=D.createContext(null),zFe=D.createContext(null),JT=D.createContext(null),ZT=D.createContext(null),Mb=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Dee=D.createContext(null);function XT(){return D.useContext(ZT)!=null}function Mee(){return XT()||cs(!1),D.useContext(ZT).location}function Lee(t){D.useContext(JT).static||D.useLayoutEffect(t)}function HFe(){let{isDataRoute:t}=D.useContext(Mb);return t?rje():GFe()}function GFe(){XT()||cs(!1);let t=D.useContext(cU),{basename:e,future:n,navigator:r}=D.useContext(JT),{matches:s}=D.useContext(Mb),{pathname:i}=Mee(),o=JSON.stringify(LFe(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return Lee(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=$Fe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Sg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function qFe(t,e){return VFe(t,e)}function VFe(t,e,n,r){XT()||cs(!1);let{navigator:s}=D.useContext(JT),{matches:i}=D.useContext(Mb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=Mee(),u;if(e){var d;let w=typeof e=="string"?Db(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||cs(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=wFe(t,{pathname:f}),g=ZFe(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Sg([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Sg([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?D.createElement(ZT.Provider,{value:{location:f_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Hh.Pop}},g):g}function KFe(){let t=nje(),e=jFe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const YFe=D.createElement(KFe,null);class QFe extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Mb.Provider,{value:this.props.routeContext},D.createElement(Dee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JFe(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(cU);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Mb.Provider,{value:e},r)}function ZFe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||cs(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||YFe,c&&(l<0&&h===0?(sje("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(JFe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(QFe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var $ee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($ee||{}),Uee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Uee||{});function XFe(t){let e=D.useContext(cU);return e||cs(!1),e}function eje(t){let e=D.useContext(zFe);return e||cs(!1),e}function tje(t){let e=D.useContext(Mb);return e||cs(!1),e}function Bee(t){let e=tje(),n=e.matches[e.matches.length-1];return n.route.id||cs(!1),n.route.id}function nje(){var t;let e=D.useContext(Dee),n=eje(),r=Bee();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rje(){let{router:t}=XFe($ee.UseNavigateStable),e=Bee(Uee.UseNavigateStable),n=D.useRef(!1);return Lee(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,f_({fromRouteId:e},i)))},[t,e])}const A7={};function sje(t,e,n){A7[t]||(A7[t]=!0)}function ije(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rx(t){cs(!1)}function oje(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Hh.Pop,navigator:i,static:o=!1,future:a}=t;XT()&&cs(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:f_({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Db(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let w=Oee(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(JT.Provider,{value:l},D.createElement(ZT.Provider,{children:n,value:g}))}function aje(t){let{children:e,location:n}=t;return qFe(d5(e),n)}new Promise(()=>{});function d5(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,d5(r.props.children,i));return}r.type!==rx&&cs(!1),!r.props.index||!r.props.children||cs(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=d5(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const cje="6";try{window.__reactRouterVersion=cje}catch{}const lje="startTransition",S7=Ore[lje];function uje(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=gFe({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&S7?S7(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>ije(r),[r]),D.createElement(oje,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var x7;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(x7||(x7={}));var I7;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(I7||(I7={}));const dje=Jc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function hje(){const t=dje(),{open:e}=L1(),{address:n,isConnected:r}=Ab(),s=tc(),[i,o]=D.useState("pixelawbs-popup"),[a,c]=D.useState(new Set),[l,u]=D.useState(!1),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(""),v=HFe();D.useEffect(()=>{if(g){const R=setTimeout(()=>{console.log("[CHESS] Loading timeout reached, navigating directly"),w(!1),v("/chess")},15e3);return()=>clearTimeout(R)}},[g,v]),D.useEffect(()=>{if(g){const R="Lawb Chess Loading";let U="";const k=setInterval(()=>{U=U.length>=4?"":U+".",b(R+U)},500);return()=>clearInterval(k)}else b("")},[g]);const A=D.useRef(null);D.useEffect(()=>{if(i==="halloween-popup"&&A.current){const R=A.current.querySelector("script[data-tiktok-embed]");R&&R.remove();const U=document.createElement("script");U.src="https://www.tiktok.com/embed.js",U.async=!0,U.setAttribute("data-tiktok-embed","true"),A.current.appendChild(U)}},[i]);const _=(R,U,k)=>{if(R==="url"&&k)window.open(k,"_blank");else if(R==="popup"&&U)o(U),c(M=>{const j=new Set(M);return j.delete(U),j}),document.body.offsetWidth;else if(R==="wallet")r?console.log("Wallet disconnect requested"):e();else if(R==="mint"){if(!n){alert("Please connect your wallet first!");return}if(s!==Zo.id){alert("Please switch to Ethereum mainnet to mint Pixelawbs. Current network: "+s);return}u(!0)}else R==="nft-gallery"?h(!0):R==="meme-generator"?p(!0):R==="chess"&&(console.log("[CHESS] Chess icon clicked, isConnected:",r),w(!0))},I=()=>o(null),x=R=>{c(U=>new Set(U).add(R)),o(null)},N=R=>{R==="mint-popup"?u(!0):R==="nft-gallery-popup"?h(!0):R==="meme-generator-popup"?p(!0):o(R),c(U=>{const k=new Set(U);return k.delete(R),k})},S=()=>u(!1),O=()=>h(!1),P=()=>p(!1),F=()=>{u(!1),c(R=>new Set(R).add("mint-popup"))},q=()=>{h(!1),c(R=>new Set(R).add("nft-gallery-popup"))},z=()=>{p(!1),c(R=>new Set(R).add("meme-generator-popup"))},T=m.jsxs("div",{onClick:()=>{r?console.log("Wallet disconnect requested"):e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),r?`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[g&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",zIndex:9999,overflow:"hidden"},children:[m.jsx("video",{src:"/images/loadingchess.mp4",style:{width:"100vw",height:"100vh",objectFit:"cover",position:"absolute",top:0,left:0},autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"auto",onLoadStart:()=>{console.log("[CHESS] Video started loading")},onCanPlay:()=>{console.log("[CHESS] Video can play")},onPlay:()=>{console.log("[CHESS] Video started playing")},onError:R=>{console.log("[CHESS] Video failed to load:",R)}}),m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e4,textAlign:"center"},children:m.jsx("div",{style:{color:"#ff0000",fontSize:"32px",fontFamily:"monospace",fontWeight:"bold",textShadow:"0 0 20px #ff0000, 0 0 40px #ff0000, 0 0 60px #ff0000",letterSpacing:"2px"},children:y})})]}),m.jsx(pye,{onIconClick:_}),m.jsx(mye,{minimizedWindows:Array.from(a),onRestoreWindow:N,walletButton:T,connectionStatus:{connected:r,address:n,ens:void 0}}),m.jsxs(Aa,{id:"chat-popup",isOpen:i==="chat-popup",onClose:I,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Aa,{id:"purity-popup",isOpen:i==="purity-popup",onClose:I,onMinimize:x,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Aa,{id:"lawbstarz-popup",isOpen:i==="lawbstarz-popup",onClose:I,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Aa,{id:"lawbstation-popup",isOpen:i==="lawbstation-popup",onClose:I,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Aa,{id:"nexus-popup",isOpen:i==="nexus-popup",onClose:I,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(Aa,{id:"lawbsters-popup",isOpen:i==="lawbsters-popup",onClose:I,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx($fe,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(Aa,{id:"pixelawbs-popup",isOpen:i==="pixelawbs-popup",onClose:I,onMinimize:x,children:(()=>{const R=U=>{U.preventDefault(),o(null),u(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:R,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(Aa,{id:"halloween-popup",isOpen:i==="halloween-popup",onClose:I,onMinimize:x,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:A,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),m.jsxs(Aa,{id:"lawb-popup",isOpen:i==="lawb-popup",onClose:I,onMinimize:x,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(wAe,{isOpen:l,onClose:S,onMinimize:F,walletAddress:n||""}),m.jsx(iFe,{isOpen:d,onClose:O,onMinimize:q,walletAddress:n}),m.jsx(Aa,{id:"meme-generator-popup",isOpen:f,onClose:P,onMinimize:z,children:m.jsx(Iee,{})})]})}const fje=Jc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),N7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],pje=({onBack:t,walletAddress:e})=>{const n=fje(),{open:r}=L1(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(N7[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[w,y]=D.useState("all"),[b,v]=D.useState(null),A=D.useCallback(async()=>{var N,S;try{if((N=window.solana)!=null&&N.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var N,S;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let S,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,S=await yye(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await WL(u.slug,100,O):S=await jL(u.slug,1,100,O);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(F=>F.owners&&F.owners.length>0)?S.data=S.data.filter(F=>F.owners.some(z=>z.owner_of&&z.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),D.useEffect(()=>{h&&A()},[h,A]);const _=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await hK(u.chain,N.address,N.token_id.toString()),O={...N,attributes:JSON.stringify(S.traits||[])};l(O)}catch(S){console.error("Failed to fetch full NFT details",S),l(N)}else l(N);a(!1)},I=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:N.map((S,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},O))})]})},x=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:N7.map(N=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(N=>{let S=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void _(N),children:[m.jsx("img",{src:S,alt:N.name,onError:O=>{O.currentTarget.src!==N.image_url&&N.image_url?O.currentTarget.src=N.image_url:O.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?O.currentTarget.src=N.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:N.name})]},N.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?I():x()})]})},gje=Jc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),mc=({isOpen:t,onClose:e,title:n,children:r})=>{const s=gje();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),m.jsx("div",{className:s.content,children:r})]})}):null},mje=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=mAe(),p=tc(),{switchChain:g}=k$();D.useEffect(()=>{t&&n&&w()},[t,n]);const w=async()=>{if(o(!0),h(null),p!==Zo.id){h(`Please switch to Ethereum mainnet to mint Pixelawbs. Current network: ${p}`),o(!1);return}try{const I=await uK(n);s(I);const x={};I.forEach(N=>{x[N.id]=0}),u(x)}catch(I){h(I.message)}finally{o(!1)}},y=(I,x)=>{u(N=>({...N,[I]:Math.max(0,x)}))},b=async()=>{const I=Object.entries(l).filter(([,x])=>x>0).map(([x,N])=>({id:x,quantity:N}));if(I.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}if(p!==Zo.id){h("Please switch to Ethereum mainnet to mint Pixelawbs");return}c(!0),h(null);try{const x=await dK(n,I);if(x.success&&x.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const N=await f.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${N}`),e()}catch(N){h("Transaction failed: "+N.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){h("Minting failed: "+x.message)}finally{c(!1)}},v=(I,x)=>`${parseFloat(I)} ${x}`,A={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},_={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(mc,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsxs("div",{style:_,children:[d,p!==Zo.id&&m.jsx("div",{style:{marginTop:"10px"},children:m.jsx("button",{onClick:()=>g({chainId:Zo.id}),style:{backgroundColor:"#008000",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Switch to Ethereum"})})]}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(I=>m.jsxs("div",{style:A,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:I.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",v(I.token_price,I.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",I.wallet_limit===4294967295?"Unlimited":I.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:I.wallet_limit===4294967295?void 0:I.wallet_limit,value:l[I.id]||"",onChange:x=>y(I.id,parseInt(x.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},I.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:b,disabled:a,children:a?"Minting...":"Mint"})]})]})},yje=Jc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),wje=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],bje=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],vje=()=>{const t=yje(),{open:e}=L1(),{address:n,isConnected:r}=Ab(),{isPending:s}=dAe(),{disconnect:i}=fAe(),{data:o}=pAe({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),[v,A]=D.useState(!1),[_,I]=D.useState(!1),[x,N]=D.useState(!1),[S,O]=D.useState(!1),[P,F]=D.useState(!1),[q,z]=D.useState(!1),[T,R]=D.useState(!1),[U,k]=D.useState(!1),[M,j]=D.useState(!1),Y=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>I(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],ne=ae=>{ae.disabled||ae.action()};if(D.useEffect(()=>{const ae=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ae)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(pje,{onBack:()=>c("main"),walletAddress:n||void 0});function le({open:ae,onClose:ue,title:tt,nfts:Ne}){const $e=st=>{switch(st){case"lawbsters":N(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":F(!0);break;case"halloween":z(!0);break;case"lawbstation":R(!0);break;case"nexus":k(!0);break}};return m.jsx(mc,{isOpen:ae,onClose:ue,title:tt,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Ne.map(st=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>$e(st.id),children:[m.jsx("img",{src:st.image,alt:st.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:st.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:st.description})]},st.id))})})}function oe({open:ae,onClose:ue}){return ae?m.jsxs(mc,{isOpen:ae,onClose:ue,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:Y.map(ae=>m.jsxs("div",{className:t.icon,onClick:()=>ne(ae),children:[m.jsx("img",{src:ae.icon,alt:ae.label}),m.jsx("span",{children:ae.label})]},ae.label))}),l&&m.jsxs(mc,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ae=>ae.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(mje,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(le,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:wje}),m.jsx(le,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:bje}),m.jsx(oe,{open:_,onClose:()=>I(!1)}),m.jsxs(mc,{isOpen:x,onClose:()=>N(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(mc,{isOpen:S,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(mc,{isOpen:P,onClose:()=>F(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{F(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(mc,{isOpen:q,onClose:()=>z(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(mc,{isOpen:T,onClose:()=>R(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(mc,{isOpen:U,onClose:()=>k(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(mc,{isOpen:M,onClose:()=>j(!1),title:"Meme Generator",children:m.jsx(Iee,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function Eje(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const zI={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},HI={id:1996,name:"Sanko",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{default:{http:["https://mainnet.sanko.xyz","https://sanko-mainnet.calderachain.xyz/http"]},public:{http:["https://mainnet.sanko.xyz","https://sanko-mainnet.calderachain.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},Cje=nJ({chains:[Zo,wI,zI,HI],transports:{[Zo.id]:Wa(),[wI.id]:Wa(),[zI.id]:Wa("https://sanko-arb-sepolia.rpc.caldera.xyz/http"),[HI.id]:Wa("https://mainnet.sanko.xyz")}}),lU=()=>{if(!kx)throw new Error("[FIREBASE] Database not initialized");return kx},rm=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,GI=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=lU(),s=ro(r,`leaderboard/${t}`),i=await mp(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await uE(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",rm(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},_je=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:rm(e),redPlayer:rm(n)}),await GI(e,t==="blue"?"win":t==="red"?"loss":"draw"),await GI(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},Fee=async(t=20)=>{try{const e=lU(),n=ro(e,"leaderboard"),r=await mp(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},jee=async()=>{try{const t=lU(),e=ro(t,"leaderboard/0x0000000000000000000000000000000000000000");return await iG(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},fc=()=>{if(!kx)throw new Error("[FIREBASE] Database not initialized");return kx},ai={async getGame(t){try{const e=fc(),n=ro(e,`chess_games/${t}`),r=await mp(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=fc(),r=ro(n,`chess_games/${t}`);await _ce(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=fc(),r=ro(n,`chess_games/${t}`);return JB(r,i=>{if(i.exists()){const o=i.val();e(o)}})}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=fc(),r=ro(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await uE(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await mp(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async createGameFromTransaction(t,e,n,r){try{const s=fc(),i=ro(s,`chess_games/${t}`);let o="DMT";n==="0x754cDAd6f5821077d6915004Be2cE05f93d176f8"?o="DMT":n==="0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"?o="LAWB":n==="0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D"?o="GOLD":n==="0xeA240b96A9621e67159c59941B9d588eb290ef09"&&(o="MOSS");const a={invite_code:t,game_title:`Chess Game ${t.slice(-6)}`,bet_amount:r,bet_token:o,blue_player:e,red_player:"0x0000000000000000000000000000000000000000",game_state:"waiting",board:{positions:{"0,0":"R","0,1":"N","0,2":"B","0,3":"Q","0,4":"K","0,5":"B","0,6":"N","0,7":"R","1,0":"P","1,1":"P","1,2":"P","1,3":"P","1,4":"P","1,5":"P","1,6":"P","1,7":"P","6,0":"p","6,1":"p","6,2":"p","6,3":"p","6,4":"p","6,5":"p","6,6":"p","6,7":"p","7,0":"r","7,1":"n","7,2":"b","7,3":"q","7,4":"k","7,5":"b","7,6":"n","7,7":"r"},rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56",is_public:!0,created_at:new Date().toISOString()};return await uE(i,a),console.log("[FIREBASE] Game created from transaction:",t,"with token:",o),a}catch(s){throw console.error("[FIREBASE] Error creating game from transaction:",s),s}},async getActiveGames(){try{const t=fc(),e=ro(t,"chess_games"),n=await mp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting_for_join"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=fc(),e=ro(t,"chess_games"),n=await mp(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r),console.log("[FIREBASE] Number of total games:",Object.keys(r||{}).length),r&&Object.keys(r).forEach(i=>{const o=r[i];console.log("[FIREBASE] Game details:",{inviteCode:o.invite_code,gameState:o.game_state,isPublic:o.is_public,redPlayer:o.red_player,bluePlayer:o.blue_player,createdAt:o.created_at})});const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting_for_join",a=i.is_public!==!1,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000",l=i.game_state==="waiting_for_join"||i.game_state===void 0;return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,originalIsPublic:i.is_public,redPlayer:i.red_player,isWaitingForJoin:o,isPublic:a,noRedPlayer:c,hasValidState:l,passes:l&&a&&c}),l&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=fc(),n=ro(e,`chess_games/${t}`);await iG(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=fc(),n=ro(e,`leaderboard/${t.username}`);await uE(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=fc(),e=ro(t,"leaderboard"),n=await mp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=fc(),n=ro(e,"leaderboard");return JB(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},Aje="6.15.0";function Sje(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function Ii(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function vt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&Sje(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function zy(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>zy(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return zy(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${zy(r,e)}: ${zy(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function zs(t,e){return t&&t.code===e}function uU(t){return zs(t,"CALL_EXCEPTION")}function pr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${zy(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+zy(a))}}i.push(`code=${e}`),i.push(`version=${Aje}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return vt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&vt(s,{shortMessage:r}),s}function ye(t,e,n,r){if(!t)throw pr(e,n,r)}function Z(t,e,n,r){ye(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Wee(t,e,n){n==null&&(n=""),n&&(n=": "+n),ye(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ye(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function eR(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function zee(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Z(!1,"invalid BytesLike value",e||"value",t)}function Yt(t,e){return zee(t,e,!1)}function Pi(t,e){return zee(t,e,!0)}function ar(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function dU(t){return ar(t,!0)||t instanceof Uint8Array}const T7="0123456789abcdef";function Le(t){const e=Yt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=T7[(s&240)>>4]+T7[s&15]}return n}function Dr(t){return"0x"+t.map(e=>Le(e).substring(2)).join("")}function l0(t){return ar(t,!0)?(t.length-2)/2:Yt(t).length}function Tr(t,e,n){const r=Yt(t);return n!=null&&n>r.length&&ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Le(r.slice(e??0,n??r.length))}function Hee(t,e,n){const r=Yt(t);ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Le(s)}function vd(t,e){return Hee(t,e,!0)}function xje(t,e){return Hee(t,e,!1)}const tR=BigInt(0),Lc=BigInt(1),Hy=9007199254740991;function Ije(t,e){const n=nR(t,"value"),r=BigInt(Qt(e,"width"));if(ye(n>>r===tR,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Lc){const s=(Lc<<r)-Lc;return-((~n&s)+Lc)}return n}function Gee(t,e){let n=Ze(t,"value");const r=BigInt(Qt(e,"width")),s=Lc<<r-Lc;if(n<tR){n=-n,ye(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Lc<<r)-Lc;return(~n&i)+Lc}else ye(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Yv(t,e){const n=nR(t,"value"),r=BigInt(Qt(e,"bits"));return n&(Lc<<r)-Lc}function Ze(t,e){switch(typeof t){case"bigint":return t;case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Hy&&t<=Hy,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Z(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Z(!1,"invalid BigNumberish value",e||"value",t)}function nR(t,e){const n=Ze(t,e);return ye(n>=tR,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const R7="0123456789abcdef";function hU(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=R7[n>>4],e+=R7[n&15];return BigInt(e)}return Ze(t)}function Qt(t,e){switch(typeof t){case"bigint":return Z(t>=-Hy&&t<=Hy,"overflow",e||"value",t),Number(t);case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Hy&&t<=Hy,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Qt(BigInt(t),e)}catch(n){Z(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Z(!1,"invalid numeric value",e||"value",t)}function Nje(t){return Qt(hU(t))}function Pf(t,e){let r=nR(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Qt(e,"width");for(ye(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function os(t){const e=nR(t,"value");if(e===tR)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Pc(t){let e=Le(dU(t)?t:os(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const P7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const O7=BigInt(58);function Tje(t){const e=Yt(t);let n=hU(e),r="";for(;n;)r=P7[Number(n%O7)]+r,n/=O7;for(let s=0;s<e.length&&!e[s];s++)r=P7[0]+r;return r}function Rje(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Yt(e)}function Pje(t){const e=Yt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var I0;class qee{constructor(e,n,r){te(this,"filter");te(this,"emitter");Q(this,I0);$(this,I0,n),vt(this,{emitter:e,filter:r})}async removeListener(){C(this,I0)!=null&&await this.emitter.off(this.filter,C(this,I0))}}I0=new WeakMap;function Oje(t,e,n,r,s){Z(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Vee(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function kje(t,e,n,r,s){return t==="OVERLONG"?(Z(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),Vee(t,e,n))}const Dje=Object.freeze({error:Oje,ignore:Vee,replace:kje});function Mje(t,e){e==null&&(e=Dje.error);const n=Yt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function ad(t,e){Z(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Z(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function Lje(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function qI(t,e){return Lje(Mje(t,e))}function Kee(t){async function e(n,r){ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ye(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ye(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=pr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=pr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const $je=12,Uje=250;let k7=Kee();const Bje=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Fje=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let s2=!1;async function Yee(t,e){try{const n=t.match(Bje);if(!n)throw new Error("invalid data");return new wf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Rje(n[3]):Wje(n[3]))}catch{return new wf(599,"BAD REQUEST (invalid data: URI)",{},null,new Of(t))}}function Qee(t){async function e(n,r){try{const s=n.match(Fje);if(!s)throw new Error("invalid link");return new Of(`${t}${s[2]}`)}catch{return new wf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Of(n))}}return e}const cS={data:Yee,ipfs:Qee("https://gateway.ipfs.io/ipfs/")},Jee=new WeakMap;var Zp,Eh;class jje{constructor(e){Q(this,Zp);Q(this,Eh);$(this,Zp,[]),$(this,Eh,!1),Jee.set(e,()=>{if(!C(this,Eh)){$(this,Eh,!0);for(const n of C(this,Zp))setTimeout(()=>{n()},0);$(this,Zp,[])}})}addListener(e){ye(!C(this,Eh),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),C(this,Zp).push(e)}get cancelled(){return C(this,Eh)}checkSignal(){ye(!this.cancelled,"cancelled","CANCELLED",{})}}Zp=new WeakMap,Eh=new WeakMap;function lS(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var N0,T0,_c,Du,R0,P0,ms,Wo,Mu,Xp,eg,tg,bl,Ac,Ch,ng,Qv;const aN=class aN{constructor(e){Q(this,ng);Q(this,N0);Q(this,T0);Q(this,_c);Q(this,Du);Q(this,R0);Q(this,P0);Q(this,ms);Q(this,Wo);Q(this,Mu);Q(this,Xp);Q(this,eg);Q(this,tg);Q(this,bl);Q(this,Ac);Q(this,Ch);$(this,P0,String(e)),$(this,N0,!1),$(this,T0,!0),$(this,_c,{}),$(this,Du,""),$(this,R0,3e5),$(this,Ac,{slotInterval:Uje,maxAttempts:$je}),$(this,Ch,null)}get url(){return C(this,P0)}set url(e){$(this,P0,String(e))}get body(){return C(this,ms)==null?null:new Uint8Array(C(this,ms))}set body(e){if(e==null)$(this,ms,void 0),$(this,Wo,void 0);else if(typeof e=="string")$(this,ms,ad(e)),$(this,Wo,"text/plain");else if(e instanceof Uint8Array)$(this,ms,e),$(this,Wo,"application/octet-stream");else if(typeof e=="object")$(this,ms,ad(JSON.stringify(e))),$(this,Wo,"application/json");else throw new Error("invalid body")}hasBody(){return C(this,ms)!=null}get method(){return C(this,Du)?C(this,Du):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),$(this,Du,String(e).toUpperCase())}get headers(){const e=Object.assign({},C(this,_c));return C(this,Mu)&&(e.authorization=`Basic ${Pje(ad(C(this,Mu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&C(this,Wo)&&(e["content-type"]=C(this,Wo)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){C(this,_c)[String(e).toLowerCase()]=String(n)}clearHeaders(){$(this,_c,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return C(this,Mu)||null}setCredentials(e,n){Z(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),$(this,Mu,`${e}:${n}`)}get allowGzip(){return C(this,T0)}set allowGzip(e){$(this,T0,!!e)}get allowInsecureAuthentication(){return!!C(this,N0)}set allowInsecureAuthentication(e){$(this,N0,!!e)}get timeout(){return C(this,R0)}set timeout(e){Z(e>=0,"timeout must be non-zero","timeout",e),$(this,R0,e)}get preflightFunc(){return C(this,Xp)||null}set preflightFunc(e){$(this,Xp,e)}get processFunc(){return C(this,eg)||null}set processFunc(e){$(this,eg,e)}get retryFunc(){return C(this,tg)||null}set retryFunc(e){$(this,tg,e)}get getUrlFunc(){return C(this,Ch)||k7}set getUrlFunc(e){$(this,Ch,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${C(this,ms)?Le(C(this,ms)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(C(this,Ac).slotInterval=e.slotInterval),e.maxAttempts!=null&&(C(this,Ac).maxAttempts=e.maxAttempts)}send(){return ye(C(this,bl)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),$(this,bl,new jje(this)),he(this,ng,Qv).call(this,0,D7()+this.timeout,0,this,new wf(0,"",{},null,this))}cancel(){ye(C(this,bl)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Jee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ye(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new aN(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,$(s,_c,Object.assign({},C(this,_c))),C(this,ms)&&$(s,ms,new Uint8Array(C(this,ms))),$(s,Wo,C(this,Wo)),s}clone(){const e=new aN(this.url);return $(e,Du,C(this,Du)),C(this,ms)&&$(e,ms,C(this,ms)),$(e,Wo,C(this,Wo)),$(e,_c,Object.assign({},C(this,_c))),$(e,Mu,C(this,Mu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),$(e,Xp,C(this,Xp)),$(e,eg,C(this,eg)),$(e,tg,C(this,tg)),$(e,Ac,Object.assign({},C(this,Ac))),$(e,Ch,C(this,Ch)),e}static lockConfig(){s2=!0}static getGateway(e){return cS[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(s2)throw new Error("gateways locked");cS[e]=n}static registerGetUrl(e){if(s2)throw new Error("gateways locked");k7=e}static createGetUrlFunc(e){return Kee(e)}static createDataGateway(){return Yee}static createIpfsGatewayFunc(e){return Qee(e)}};N0=new WeakMap,T0=new WeakMap,_c=new WeakMap,Du=new WeakMap,R0=new WeakMap,P0=new WeakMap,ms=new WeakMap,Wo=new WeakMap,Mu=new WeakMap,Xp=new WeakMap,eg=new WeakMap,tg=new WeakMap,bl=new WeakMap,Ac=new WeakMap,Ch=new WeakMap,ng=new WeakSet,Qv=async function(e,n,r,s,i){var u,d,h;if(e>=C(this,Ac).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ye(D7()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await zje(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in cS){const f=await cS[a](o.url,lS(C(s,bl)));if(f instanceof wf){let p=f;if(this.processFunc){lS(C(s,bl));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,lS(C(s,bl)));let l=new wf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return he(u=o.redirect(f),ng,Qv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=C(this,Ac).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),he(d=o.clone(),ng,Qv).call(d,e+1,n,p,s,l)}if(this.processFunc){lS(C(s,bl));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=C(this,Ac).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),he(h=o.clone(),ng,Qv).call(h,e+1,n,p,s,l)}}return l};let Of=aN;var P_,O_,k_,zo,O0,rg;const DU=class DU{constructor(e,n,r,s,i){Q(this,P_);Q(this,O_);Q(this,k_);Q(this,zo);Q(this,O0);Q(this,rg);$(this,P_,e),$(this,O_,n),$(this,k_,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),$(this,zo,s==null?null:new Uint8Array(s)),$(this,O0,i||null),$(this,rg,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${C(this,zo)?Le(C(this,zo)):"null"}>`}get statusCode(){return C(this,P_)}get statusMessage(){return C(this,O_)}get headers(){return Object.assign({},C(this,k_))}get body(){return C(this,zo)==null?null:new Uint8Array(C(this,zo))}get bodyText(){try{return C(this,zo)==null?"":qI(C(this,zo))}catch{ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new DU(599,r,this.headers,this.body,C(this,O0)||void 0);return $(s,rg,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Z(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw vt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return C(this,zo)!=null}get request(){return C(this,O0)}ok(){return C(this,rg).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=C(this,rg);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{C(this,zo)&&(s=qI(C(this,zo)))}catch{}ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};P_=new WeakMap,O_=new WeakMap,k_=new WeakMap,zo=new WeakMap,O0=new WeakMap,rg=new WeakMap;let wf=DU;function D7(){return new Date().getTime()}function Wje(t){return ad(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function zje(t){return new Promise(e=>setTimeout(e,t))}function Hje(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function M7(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function L7(t,e,n,r){const s=[];for(;n<e+1+r;){const i=Zee(t,n);s.push(i.result),n+=i.consumed,ye(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function Zee(t,e){ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ye(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=M7(t,e+1,r);return n(e+1+r+s),L7(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),L7(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=M7(t,e+1,r);n(e+1+r+s);const i=Le(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Le(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Hje(t[e])}}function $1(t){const e=Yt(t,"data"),n=Zee(e,0);return Z(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function $7(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Xee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(Xee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=$7(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Yt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=$7(e.length);return n.unshift(183+n.length),n.concat(e)}const U7="0123456789abcdef";function kf(t){let e="0x";for(const n of Xee(t))e+=U7[n>>4],e+=U7[n&15];return e}const ki=32,h5=new Uint8Array(ki),Gje=["then"],uS={},ete=new WeakMap;function Cp(t){return ete.get(t)}function B7(t,e){ete.set(t,e)}function Nv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function f5(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof Yw?f5(Cp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof Yw&&(o=f5(Cp(o),o,n)),r[s]=o),r},{})}var k0;const Gy=class Gy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==uS&&(s=n,i=[],o=!1);super(s.length);Q(this,k0);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(B7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),$(this,k0,[]),C(this,k0)==null&&C(this,k0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Qt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&Nv(`index ${f}`,p),p}if(Gje.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return B7(c,Cp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Nv(`index ${i}`,s),n&&s instanceof Gy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=Cp(this);return r.reduce((s,i,o)=>(ye(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),f5(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=Cp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Gy(uS,i,o)}filter(n,r){const s=Cp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&Nv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Gy(uS,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Nv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=Cp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&Nv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Gy(uS,n,r)}};k0=new WeakMap;let Yw=Gy;function F7(t){let e=os(t);return ye(e.length<=ki,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:ki,offset:e.length}),e.length!==ki&&(e=Pi(Dr([h5.slice(e.length%ki),e]))),e}class xd{constructor(e,n,r,s){te(this,"name");te(this,"type");te(this,"localName");te(this,"dynamic");vt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Z(!1,e,this.localName,n)}}var Lu,sg,D0,sx;class p5{constructor(){Q(this,D0);Q(this,Lu);Q(this,sg);$(this,Lu,[]),$(this,sg,0)}get data(){return Dr(C(this,Lu))}get length(){return C(this,sg)}appendWriter(e){return he(this,D0,sx).call(this,Pi(e.data))}writeBytes(e){let n=Pi(e);const r=n.length%ki;return r&&(n=Pi(Dr([n,h5.slice(r)]))),he(this,D0,sx).call(this,n)}writeValue(e){return he(this,D0,sx).call(this,F7(e))}writeUpdatableValue(){const e=C(this,Lu).length;return C(this,Lu).push(h5),$(this,sg,C(this,sg)+ki),n=>{C(this,Lu)[e]=F7(n)}}}Lu=new WeakMap,sg=new WeakMap,D0=new WeakSet,sx=function(e){return C(this,Lu).push(e),$(this,sg,C(this,sg)+e.length),e.length};var ao,Ho,ig,og,_h,cm,m5,tte;const MU=class MU{constructor(e,n,r){Q(this,cm);te(this,"allowLoose");Q(this,ao);Q(this,Ho);Q(this,ig);Q(this,og);Q(this,_h);vt(this,{allowLoose:!!n}),$(this,ao,Pi(e)),$(this,ig,0),$(this,og,null),$(this,_h,r??1024),$(this,Ho,0)}get data(){return Le(C(this,ao))}get dataLength(){return C(this,ao).length}get consumed(){return C(this,Ho)}get bytes(){return new Uint8Array(C(this,ao))}subReader(e){const n=new MU(C(this,ao).slice(C(this,Ho)+e),this.allowLoose,C(this,_h));return $(n,og,this),n}readBytes(e,n){let r=he(this,cm,tte).call(this,0,e,!!n);return he(this,cm,m5).call(this,e),$(this,Ho,C(this,Ho)+r.length),r.slice(0,e)}readValue(){return hU(this.readBytes(ki))}readIndex(){return Nje(this.readBytes(ki))}};ao=new WeakMap,Ho=new WeakMap,ig=new WeakMap,og=new WeakMap,_h=new WeakMap,cm=new WeakSet,m5=function(e){var n;if(C(this,og))return he(n=C(this,og),cm,m5).call(n,e);$(this,ig,C(this,ig)+e),ye(C(this,_h)<1||C(this,ig)<=C(this,_h)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${C(this,_h)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Pi(C(this,ao)),offset:C(this,Ho),length:e,info:{bytesRead:C(this,ig),dataLength:this.dataLength}})},tte=function(e,n,r){let s=Math.ceil(n/ki)*ki;return C(this,Ho)+s>C(this,ao).length&&(this.allowLoose&&r&&C(this,Ho)+n<=C(this,ao).length?s=n:ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Pi(C(this,ao)),length:C(this,ao).length,offset:C(this,Ho)+s})),C(this,ao).slice(C(this,Ho),C(this,Ho)+s)};let g5=MU;function VI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function fU(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function qje(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");VI(t.outputLen),VI(t.blockLen)}function Qw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nte(t,e){fU(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const i2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rte=t=>t instanceof Uint8Array,Vje=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),o2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ll=(t,e)=>t<<32-e|t>>>e,Kje=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Kje)throw new Error("Non little-endian hardware is not supported");function Yje(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function rR(t){if(typeof t=="string"&&(t=Yje(t)),!rte(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Qje(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!rte(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class pU{clone(){return this._cloneInto()}}function gU(t){const e=r=>t().update(rR(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Jje(t=32){if(i2&&typeof i2.getRandomValues=="function")return i2.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class ste extends pU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,qje(e);const r=rR(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Qw(this),this.iHash.update(e),this}digestInto(e){Qw(this),fU(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ite=(t,e,n)=>new ste(t,e).update(n).digest();ite.create=(t,e)=>new ste(t,e);function Zje(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class ote extends pU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=o2(this.buffer)}update(e){Qw(this);const{view:n,buffer:r,blockLen:s}=this;e=rR(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=o2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qw(this),nte(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Zje(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=o2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const Xje=(t,e,n)=>t&e^~t&n,e9e=(t,e,n)=>t&e^t&n^e&n,t9e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hd=new Uint32Array(64);class n9e extends ote{constructor(){super(64,32,8,!1),this.A=zd[0]|0,this.B=zd[1]|0,this.C=zd[2]|0,this.D=zd[3]|0,this.E=zd[4]|0,this.F=zd[5]|0,this.G=zd[6]|0,this.H=zd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Hd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Hd[d-15],f=Hd[d-2],p=ll(h,7)^ll(h,18)^h>>>3,g=ll(f,17)^ll(f,19)^f>>>10;Hd[d]=g+Hd[d-7]+p+Hd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ll(a,6)^ll(a,11)^ll(a,25),f=u+h+Xje(a,c,l)+t9e[d]+Hd[d]|0,g=(ll(r,2)^ll(r,13)^ll(r,22))+e9e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Hd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ate=gU(()=>new n9e),dS=BigInt(2**32-1),y5=BigInt(32);function cte(t,e=!1){return e?{h:Number(t&dS),l:Number(t>>y5&dS)}:{h:Number(t>>y5&dS)|0,l:Number(t&dS)|0}}function lte(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=cte(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const r9e=(t,e)=>BigInt(t>>>0)<<y5|BigInt(e>>>0),s9e=(t,e,n)=>t>>>n,i9e=(t,e,n)=>t<<32-n|e>>>n,o9e=(t,e,n)=>t>>>n|e<<32-n,a9e=(t,e,n)=>t<<32-n|e>>>n,c9e=(t,e,n)=>t<<64-n|e>>>n-32,l9e=(t,e,n)=>t>>>n-32|e<<64-n,u9e=(t,e)=>e,d9e=(t,e)=>t,ute=(t,e,n)=>t<<n|e>>>32-n,dte=(t,e,n)=>e<<n|t>>>32-n,hte=(t,e,n)=>e<<n-32|t>>>64-n,fte=(t,e,n)=>t<<n-32|e>>>64-n;function h9e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const f9e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),p9e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,g9e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),m9e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,y9e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),w9e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,zt={fromBig:cte,split:lte,toBig:r9e,shrSH:s9e,shrSL:i9e,rotrSH:o9e,rotrSL:a9e,rotrBH:c9e,rotrBL:l9e,rotr32H:u9e,rotr32L:d9e,rotlSH:ute,rotlSL:dte,rotlBH:hte,rotlBL:fte,add:h9e,add3L:f9e,add3H:p9e,add4L:g9e,add4H:m9e,add5H:w9e,add5L:y9e},[b9e,v9e]=zt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Gd=new Uint32Array(80),qd=new Uint32Array(80);class E9e extends ote{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Gd[v]=e.getUint32(n),qd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Gd[v-15]|0,_=qd[v-15]|0,I=zt.rotrSH(A,_,1)^zt.rotrSH(A,_,8)^zt.shrSH(A,_,7),x=zt.rotrSL(A,_,1)^zt.rotrSL(A,_,8)^zt.shrSL(A,_,7),N=Gd[v-2]|0,S=qd[v-2]|0,O=zt.rotrSH(N,S,19)^zt.rotrBH(N,S,61)^zt.shrSH(N,S,6),P=zt.rotrSL(N,S,19)^zt.rotrBL(N,S,61)^zt.shrSL(N,S,6),F=zt.add4L(x,P,qd[v-7],qd[v-16]),q=zt.add4H(F,I,O,Gd[v-7],Gd[v-16]);Gd[v]=q|0,qd[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=zt.rotrSH(d,h,14)^zt.rotrSH(d,h,18)^zt.rotrBH(d,h,41),_=zt.rotrSL(d,h,14)^zt.rotrSL(d,h,18)^zt.rotrBL(d,h,41),I=d&f^~d&g,x=h&p^~h&w,N=zt.add5L(b,_,x,v9e[v],qd[v]),S=zt.add5H(N,y,A,I,b9e[v],Gd[v]),O=N|0,P=zt.rotrSH(r,s,28)^zt.rotrBH(r,s,34)^zt.rotrBH(r,s,39),F=zt.rotrSL(r,s,28)^zt.rotrBL(r,s,34)^zt.rotrBL(r,s,39),q=r&i^r&a^i&a,z=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=zt.add(l|0,u|0,S|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=zt.add3L(O,F,z);r=zt.add3H(T,S,P,q),s=T|0}({h:r,l:s}=zt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=zt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=zt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=zt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=zt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=zt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=zt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=zt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Gd.fill(0),qd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const C9e=gU(()=>new E9e);function _9e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const j7=_9e();j7.crypto||j7.msCrypto;function A9e(t){switch(t){case"sha256":return ate.create();case"sha512":return C9e.create()}Z(!1,"invalid hashing algorithm name","algorithm",t)}const[pte,gte,mte]=[[],[],[]],S9e=BigInt(0),Tv=BigInt(1),x9e=BigInt(2),I9e=BigInt(7),N9e=BigInt(256),T9e=BigInt(113);for(let t=0,e=Tv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],pte.push(2*(5*r+n)),gte.push((t+1)*(t+2)/2%64);let s=S9e;for(let i=0;i<7;i++)e=(e<<Tv^(e>>I9e)*T9e)%N9e,e&x9e&&(s^=Tv<<(Tv<<BigInt(i))-Tv);mte.push(s)}const[R9e,P9e]=lte(mte,!0),W7=(t,e,n)=>n>32?hte(t,e,n):ute(t,e,n),z7=(t,e,n)=>n>32?fte(t,e,n):dte(t,e,n);function O9e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=W7(l,u,1)^n[a],h=z7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=gte[o],c=W7(s,i,a),l=z7(s,i,a),u=pte[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=R9e[r],t[1]^=P9e[r]}n.fill(0)}class mU extends pU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,VI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Vje(this.state)}keccak(){O9e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Qw(this);const{blockLen:n,state:r}=this;e=rR(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Qw(this,!1),fU(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return VI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(nte(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new mU(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const k9e=(t,e,n)=>gU(()=>new mU(e,t,n)),D9e=k9e(1,136,256/8);let yte=!1;const wte=function(t){return D9e(t)};let bte=wte;function Yr(t){const e=Yt(t,"data");return Le(bte(e))}Yr._=wte;Yr.lock=function(){yte=!0};Yr.register=function(t){if(yte)throw new TypeError("keccak256 is locked");bte=t};Object.freeze(Yr);const vte=function(t){return A9e("sha256").update(t).digest()};let Ete=vte,Cte=!1;function Lb(t){const e=Yt(t,"data");return Le(Ete(e))}Lb._=vte;Lb.lock=function(){Cte=!0};Lb.register=function(t){if(Cte)throw new Error("sha256 is locked");Ete=t};Object.freeze(Lb);Object.freeze(Lb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _te=BigInt(0),sR=BigInt(1),M9e=BigInt(2),iR=t=>t instanceof Uint8Array,L9e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Jw(t){if(!iR(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=L9e[t[n]];return e}function Ate(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function yU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Zw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function xg(t){return yU(Jw(t))}function wU(t){if(!iR(t))throw new Error("Uint8Array expected");return yU(Jw(Uint8Array.from(t).reverse()))}function Xw(t,e){return Zw(t.toString(16).padStart(e*2,"0"))}function bU(t,e){return Xw(t,e).reverse()}function $9e(t){return Zw(Ate(t))}function vc(t,e,n){let r;if(typeof e=="string")try{r=Zw(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(iR(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function p_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!iR(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function U9e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function B9e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function F9e(t){let e;for(e=0;t>_te;t>>=sR,e+=1);return e}function j9e(t,e){return t>>BigInt(e)&sR}const W9e=(t,e,n)=>t|(n?sR:_te)<<BigInt(e),vU=t=>(M9e<<BigInt(t-1))-sR,a2=t=>new Uint8Array(t),H7=t=>Uint8Array.from(t);function Ste(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=a2(t),s=a2(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=a2())=>{s=a(H7([0]),d),r=a(),d.length!==0&&(s=a(H7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return p_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const z9e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function U1(t,e,n={}){const r=(s,i,o)=>{const a=z9e[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const H9e=Object.freeze(Object.defineProperty({__proto__:null,bitGet:j9e,bitLen:F9e,bitMask:vU,bitSet:W9e,bytesToHex:Jw,bytesToNumberBE:xg,bytesToNumberLE:wU,concatBytes:p_,createHmacDrbg:Ste,ensureBytes:vc,equalBytes:U9e,hexToBytes:Zw,hexToNumber:yU,numberToBytesBE:Xw,numberToBytesLE:bU,numberToHexUnpadded:Ate,numberToVarBytesBE:$9e,utf8ToBytes:B9e,validateObject:U1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Is=BigInt(0),Wr=BigInt(1),_p=BigInt(2),G9e=BigInt(3),w5=BigInt(4),G7=BigInt(5),q7=BigInt(8);BigInt(9);BigInt(16);function po(t,e){const n=t%e;return n>=Is?n:e+n}function q9e(t,e,n){if(n<=Is||e<Is)throw new Error("Expected power/modulo > 0");if(n===Wr)return Is;let r=Wr;for(;e>Is;)e&Wr&&(r=r*t%n),t=t*t%n,e>>=Wr;return r}function Ea(t,e,n){let r=t;for(;e-- >Is;)r*=r,r%=n;return r}function b5(t,e){if(t===Is||e<=Is)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=po(t,e),r=e,s=Is,i=Wr;for(;n!==Is;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Wr)throw new Error("invert: does not exist");return po(s,e)}function V9e(t){const e=(t-Wr)/_p;let n,r,s;for(n=t-Wr,r=0;n%_p===Is;n/=_p,r++);for(s=_p;s<t&&q9e(s,e,t)!==t-Wr;s++);if(r===1){const o=(t+Wr)/w5;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Wr)/_p;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Wr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function K9e(t){if(t%w5===G9e){const e=(t+Wr)/w5;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%q7===G7){const e=(t-G7)/q7;return function(r,s){const i=r.mul(s,_p),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,_p),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return V9e(t)}const Y9e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Q9e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Y9e.reduce((r,s)=>(r[s]="function",r),e);return U1(t,n)}function J9e(t,e,n){if(n<Is)throw new Error("Expected power > 0");if(n===Is)return t.ONE;if(n===Wr)return e;let r=t.ONE,s=e;for(;n>Is;)n&Wr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Wr;return r}function Z9e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function xte(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function X9e(t,e,n=!1,r={}){if(t<=Is)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=xte(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=K9e(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:vU(s),ZERO:Is,ONE:Wr,create:c=>po(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Is<=c&&c<t},is0:c=>c===Is,isOdd:c=>(c&Wr)===Wr,neg:c=>po(-c,t),eql:(c,l)=>c===l,sqr:c=>po(c*c,t),add:(c,l)=>po(c+l,t),sub:(c,l)=>po(c-l,t),mul:(c,l)=>po(c*l,t),pow:(c,l)=>J9e(a,c,l),div:(c,l)=>po(c*b5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>b5(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>Z9e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?bU(c,i):Xw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?wU(c):xg(c)}});return Object.freeze(a)}function Ite(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Nte(t){const e=Ite(t);return e+Math.ceil(e/2)}function e7e(t,e,n=!1){const r=t.length,s=Ite(e),i=Nte(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?xg(t):wU(t),a=po(o,e-Wr)+Wr;return n?bU(a,s):Xw(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t7e=BigInt(0),c2=BigInt(1);function n7e(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>t7e;)i&c2&&(o=o.add(a)),a=a.double(),i>>=c2;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let w=Number(o&d);o>>=f,w>c&&(w-=h,o+=c2);const y=g,b=g+Math.abs(w)-1,v=p%2!==0,A=w<0;w===0?u=u.add(n(v,i[y])):l=l.add(n(A,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Tte(t){return Q9e(t.Fp),U1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xte(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function r7e(t){const e=Tte(t);U1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:s7e,hexToBytes:i7e}=H9e,Fp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Fp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:s7e(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Fp,n=typeof t=="string"?i7e(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Fp._parseInt(n.subarray(2)),{d:o,l:a}=Fp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Vu=BigInt(0),Ma=BigInt(1);BigInt(2);const V7=BigInt(3);BigInt(4);function o7e(t){const e=r7e(t),{Fp:n}=e,r=e.toBytes||((p,g,w)=>{const y=g.toAffine();return p_(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),y=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y}});function i(p){const{a:g,b:w}=e,y=n.sqr(p),b=n.mul(y,p);return n.add(n.add(b,n.mul(p,g)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Vu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:y,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Jw(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:xg(vc("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return y&&(v=po(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,y){if(this.px=g,this.py=w,this.pz=y,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(g){const{x:w,y}=g||{};if(!g||!n.isValid(w)||!n.isValid(y))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(w)&&b(y)?d.ZERO:new d(w,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(y=>y.pz));return g.map((y,b)=>y.toAffine(w[b])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(s(vc("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const y=n.sqr(w),b=i(g);if(!n.eql(y,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:_}=g,I=n.eql(n.mul(w,_),n.mul(v,b)),x=n.eql(n.mul(y,_),n.mul(A,b));return I&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,y=n.mul(w,V7),{px:b,py:v,pz:A}=this;let _=n.ZERO,I=n.ZERO,x=n.ZERO,N=n.mul(b,b),S=n.mul(v,v),O=n.mul(A,A),P=n.mul(b,v);return P=n.add(P,P),x=n.mul(b,A),x=n.add(x,x),_=n.mul(g,x),I=n.mul(y,O),I=n.add(_,I),_=n.sub(S,I),I=n.add(S,I),I=n.mul(_,I),_=n.mul(P,_),x=n.mul(y,x),O=n.mul(g,O),P=n.sub(N,O),P=n.mul(g,P),P=n.add(P,x),x=n.add(N,N),N=n.add(x,N),N=n.add(N,O),N=n.mul(N,P),I=n.add(I,N),O=n.mul(v,A),O=n.add(O,O),N=n.mul(O,P),_=n.sub(_,N),x=n.mul(O,S),x=n.add(x,x),x=n.add(x,x),new d(_,I,x)}add(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:_}=g;let I=n.ZERO,x=n.ZERO,N=n.ZERO;const S=e.a,O=n.mul(e.b,V7);let P=n.mul(w,v),F=n.mul(y,A),q=n.mul(b,_),z=n.add(w,y),T=n.add(v,A);z=n.mul(z,T),T=n.add(P,F),z=n.sub(z,T),T=n.add(w,b);let R=n.add(v,_);return T=n.mul(T,R),R=n.add(P,q),T=n.sub(T,R),R=n.add(y,b),I=n.add(A,_),R=n.mul(R,I),I=n.add(F,q),R=n.sub(R,I),N=n.mul(S,T),I=n.mul(O,q),N=n.add(I,N),I=n.sub(F,N),N=n.add(F,N),x=n.mul(I,N),F=n.add(P,P),F=n.add(F,P),q=n.mul(S,q),T=n.mul(O,T),F=n.add(F,q),q=n.sub(P,q),q=n.mul(S,q),T=n.add(T,q),P=n.mul(F,T),x=n.add(x,P),P=n.mul(R,T),I=n.mul(z,I),I=n.sub(I,P),P=n.mul(z,F),N=n.mul(R,N),N=n.add(N,P),new d(I,x,N)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,w=>{const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===Vu)return w;if(a(g),g===Ma)return this;const{endo:y}=e;if(!y)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:A,k2:_}=y.splitScalar(g),I=w,x=w,N=this;for(;v>Vu||_>Vu;)v&Ma&&(I=I.add(N)),_&Ma&&(x=x.add(N)),N=N.double(),v>>=Ma,_>>=Ma;return b&&(I=I.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,y.beta),x.py,x.pz),I.add(x)}multiply(g){a(g);let w=g,y,b;const{endo:v}=e;if(v){const{k1neg:A,k1:_,k2neg:I,k2:x}=v.splitScalar(w);let{p:N,f:S}=this.wNAF(_),{p:O,f:P}=this.wNAF(x);N=f.constTimeNegate(A,N),O=f.constTimeNegate(I,O),O=new d(n.mul(O.px,v.beta),O.py,O.pz),y=N.add(O),b=S.add(P)}else{const{p:A,f:_}=this.wNAF(w);y=A,b=_}return d.normalizeZ([y,b])[0]}multiplyAndAddUnsafe(g,w,y){const b=d.BASE,v=(_,I)=>I===Vu||I===Ma||!_.equals(b)?_.multiplyUnsafe(I):_.multiply(I),A=v(this,w).add(v(g,y));return A.is0()?void 0:A}toAffine(g){const{px:w,py:y,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const A=n.mul(w,g),_=n.mul(y,g),I=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:A,y:_}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===Ma)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===Ma?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return Jw(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=n7e(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function a7e(t){const e=Tte(t);return U1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function c7e(t){const e=a7e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(T){return Vu<T&&T<n.ORDER}function a(T){return po(T,r)}function c(T){return b5(T,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=o7e({...e,toBytes(T,R,U){const k=R.toAffine(),M=n.toBytes(k.x),j=p_;return U?j(Uint8Array.from([R.hasEvenY()?2:3]),M):j(Uint8Array.from([4]),M,n.toBytes(k.y))},fromBytes(T){const R=T.length,U=T[0],k=T.subarray(1);if(R===s&&(U===2||U===3)){const M=xg(k);if(!o(M))throw new Error("Point is not on curve");const j=d(M);let Y=n.sqrt(j);const ne=(Y&Ma)===Ma;return(U&1)===1!==ne&&(Y=n.neg(Y)),{x:M,y:Y}}else if(R===i&&U===4){const M=n.fromBytes(k.subarray(0,n.BYTES)),j=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:M,y:j}}else throw new Error(`Point of length ${R} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=T=>Jw(Xw(T,e.nByteLength));function p(T){const R=r>>Ma;return T>R}function g(T){return p(T)?a(-T):T}const w=(T,R,U)=>xg(T.slice(R,U));class y{constructor(R,U,k){this.r=R,this.s=U,this.recovery=k,this.assertValidity()}static fromCompact(R){const U=e.nByteLength;return R=vc("compactSignature",R,U*2),new y(w(R,0,U),w(R,U,2*U))}static fromDER(R){const{r:U,s:k}=Fp.toSig(vc("DER",R));return new y(U,k)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){const{r:U,s:k,recovery:M}=this,j=x(vc("msgHash",R));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const Y=M===2||M===3?U+e.n:U;if(Y>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ne=M&1?"03":"02",le=l.fromHex(ne+f(Y)),oe=c(Y),ae=a(-j*oe),ue=a(k*oe),tt=l.BASE.multiplyAndAddUnsafe(le,ae,ue);if(!tt)throw new Error("point at infinify");return tt.assertValidity(),tt}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Zw(this.toDERHex())}toDERHex(){return Fp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Zw(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(T){try{return u(T),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const T=Nte(e.n);return e7e(e.randomBytes(T),e.n)},precompute(T=8,R=l.BASE){return R._setWindowSize(T),R.multiply(BigInt(3)),R}};function v(T,R=!0){return l.fromPrivateKey(T).toRawBytes(R)}function A(T){const R=T instanceof Uint8Array,U=typeof T=="string",k=(R||U)&&T.length;return R?k===s||k===i:U?k===2*s||k===2*i:T instanceof l}function _(T,R,U=!0){if(A(T))throw new Error("first arg must be private key");if(!A(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(T)).toRawBytes(U)}const I=e.bits2int||function(T){const R=xg(T),U=T.length*8-e.nBitLength;return U>0?R>>BigInt(U):R},x=e.bits2int_modN||function(T){return a(I(T))},N=vU(e.nBitLength);function S(T){if(typeof T!="bigint")throw new Error("bigint expected");if(!(Vu<=T&&T<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Xw(T,e.nByteLength)}function O(T,R,U=P){if(["recovered","canonical"].some($e=>$e in U))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:M}=e;let{lowS:j,prehash:Y,extraEntropy:ne}=U;j==null&&(j=!0),T=vc("msgHash",T),Y&&(T=vc("prehashed msgHash",k(T)));const le=x(T),oe=u(R),ae=[S(oe),S(le)];if(ne!=null){const $e=ne===!0?M(n.BYTES):ne;ae.push(vc("extraEntropy",$e))}const ue=p_(...ae),tt=le;function Ne($e){const st=I($e);if(!h(st))return;const Ot=c(st),Xt=l.BASE.multiply(st).toAffine(),X=a(Xt.x);if(X===Vu)return;const ce=a(Ot*a(tt+X*oe));if(ce===Vu)return;let Ce=(Xt.x===X?0:2)|Number(Xt.y&Ma),me=ce;return j&&p(ce)&&(me=g(ce),Ce^=1),new y(X,me,Ce)}return{seed:ue,k2sig:Ne}}const P={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function q(T,R,U=P){const{seed:k,k2sig:M}=O(T,R,U),j=e;return Ste(j.hash.outputLen,j.nByteLength,j.hmac)(k,M)}l.BASE._setWindowSize(8);function z(T,R,U,k=F){var Xt;const M=T;if(R=vc("msgHash",R),U=vc("publicKey",U),"strict"in k)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:Y}=k;let ne,le;try{if(typeof M=="string"||M instanceof Uint8Array)try{ne=y.fromDER(M)}catch(X){if(!(X instanceof Fp.Err))throw X;ne=y.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:X,s:ce}=M;ne=new y(X,ce)}else throw new Error("PARSE");le=l.fromHex(U)}catch(X){if(X.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&ne.hasHighS())return!1;Y&&(R=e.hash(R));const{r:oe,s:ae}=ne,ue=x(R),tt=c(ae),Ne=a(ue*tt),$e=a(oe*tt),st=(Xt=l.BASE.multiplyAndAddUnsafe(le,Ne,$e))==null?void 0:Xt.toAffine();return st?a(st.x)===oe:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:_,sign:q,verify:z,ProjectivePoint:l,Signature:y,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function l7e(t){return{hash:t,hmac:(e,...n)=>ite(t,e,Qje(...n)),randomBytes:Jje}}function u7e(t,e){const n=r=>c7e({...t,...l7e(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rte=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),K7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),d7e=BigInt(1),v5=BigInt(2),Y7=(t,e)=>(t+e/v5)/e;function h7e(t){const e=Rte,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Ea(u,n,e)*u%e,h=Ea(d,n,e)*u%e,f=Ea(h,v5,e)*l%e,p=Ea(f,s,e)*f%e,g=Ea(p,i,e)*p%e,w=Ea(g,a,e)*g%e,y=Ea(w,c,e)*w%e,b=Ea(y,a,e)*g%e,v=Ea(b,n,e)*u%e,A=Ea(v,o,e)*p%e,_=Ea(A,r,e)*l%e,I=Ea(_,v5,e);if(!E5.eql(E5.sqr(I),t))throw new Error("Cannot find square root");return I}const E5=X9e(Rte,void 0,void 0,{sqrt:h7e}),Xd=u7e({a:BigInt(0),b:BigInt(7),Fp:E5,n:K7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=K7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-d7e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Y7(i*t,e),c=Y7(-r*t,e);let l=po(t-a*n-c*s,e),u=po(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},ate);BigInt(0);Xd.ProjectivePoint;const g_="0x0000000000000000000000000000000000000000",Q7="0x0000000000000000000000000000000000000000000000000000000000000000",J7=BigInt(0),Z7=BigInt(1),X7=BigInt(2),eW=BigInt(27),tW=BigInt(28),hS=BigInt(35),hy={};function nW(t){return vd(os(t),32)}var M0,vl,L0,ag;const yc=class yc{constructor(e,n,r,s){Q(this,M0);Q(this,vl);Q(this,L0);Q(this,ag);eR(e,hy,"Signature"),$(this,M0,n),$(this,vl,r),$(this,L0,s),$(this,ag,null)}get r(){return C(this,M0)}set r(e){Z(l0(e)===32,"invalid r","value",e),$(this,M0,Le(e))}get s(){return Z(parseInt(C(this,vl).substring(0,3))<8,"non-canonical s; use ._s","s",C(this,vl)),C(this,vl)}set s(e){Z(l0(e)===32,"invalid s","value",e),$(this,vl,Le(e))}get _s(){return C(this,vl)}isValid(){return parseInt(C(this,vl).substring(0,3))<8}get v(){return C(this,L0)}set v(e){const n=Qt(e,"value");Z(n===27||n===28,"invalid v","v",e),$(this,L0,n)}get networkV(){return C(this,ag)}get legacyChainId(){const e=this.networkV;return e==null?null:yc.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Yt(this.s);return this.yParity&&(e[0]|=128),Le(e)}get compactSerialized(){return Dr([this.r,this.yParityAndS])}get serialized(){return Dr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new yc(hy,this.r,this._s,this.v);return this.networkV&&$(e,ag,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ze(e,"v");return n==eW||n==tW?J7:(Z(n>=hS,"invalid EIP-155 v","v",e),(n-hS)/X7)}static getChainIdV(e,n){return Ze(e)*X7+BigInt(35+n-27)}static getNormalizedV(e){const n=Ze(e);return n===J7||n===eW?27:n===Z7||n===tW?28:(Z(n>=hS,"invalid v","v",e),n&Z7?27:28)}static from(e){function n(l,u){Z(l,u,"signature",e)}if(e==null)return new yc(hy,Q7,Q7,27);if(typeof e=="string"){const l=Yt(e,"signature");if(l.length===64){const u=Le(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new yc(hy,u,Le(d),h)}if(l.length===65){const u=Le(l.slice(0,32)),d=Le(l.slice(32,64)),h=yc.getNormalizedV(l[64]);return new yc(hy,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof yc)return e.clone();const r=e.r;n(r!=null,"missing r");const s=nW(r),i=function(l,u){if(l!=null)return nW(l);if(u!=null){n(ar(u,32),"invalid yParityAndS");const d=Yt(u);return d[0]&=127,Le(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Ze(l);return{networkV:h>=hS?h:void 0,v:yc.getNormalizedV(h)}}if(u!=null)return n(ar(u,32),"invalid yParityAndS"),{v:Yt(u)[0]&128?28:27};if(d!=null){switch(Qt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new yc(hy,s,i,a);return o&&$(c,ag,o),n(e.yParity==null||Qt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};M0=new WeakMap,vl=new WeakMap,L0=new WeakMap,ag=new WeakMap;let xo=yc;var $u;const Ap=class Ap{constructor(e){Q(this,$u);Z(l0(e)===32,"invalid private key","privateKey","[REDACTED]"),$(this,$u,Le(e))}get privateKey(){return C(this,$u)}get publicKey(){return Ap.computePublicKey(C(this,$u))}get compressedPublicKey(){return Ap.computePublicKey(C(this,$u),!0)}sign(e){Z(l0(e)===32,"invalid digest length","digest",e);const n=Xd.sign(Pi(e),Pi(C(this,$u)),{lowS:!0});return xo.from({r:Pf(n.r,32),s:Pf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Ap.computePublicKey(e);return Le(Xd.getSharedSecret(Pi(C(this,$u)),Yt(n),!1))}static computePublicKey(e,n){let r=Yt(e,"key");if(r.length===32){const i=Xd.getPublicKey(r,!!n);return Le(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Xd.ProjectivePoint.fromHex(r);return Le(s.toRawBytes(n))}static recoverPublicKey(e,n){Z(l0(e)===32,"invalid digest length","digest",e);const r=xo.from(n);let s=Xd.Signature.fromCompact(Pi(Dr([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(Pi(e));return Z(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Xd.ProjectivePoint.fromHex(Ap.computePublicKey(e).substring(2)),i=Xd.ProjectivePoint.fromHex(Ap.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};$u=new WeakMap;let m_=Ap;const f7e=BigInt(0),p7e=BigInt(36);function rW(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Yt(Yr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const EU={};for(let t=0;t<10;t++)EU[String(t)]=String(t);for(let t=0;t<26;t++)EU[String.fromCharCode(65+t)]=String(10+t);const sW=15;function g7e(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>EU[r]).join("");for(;e.length>=sW;){let r=e.substring(0,sW);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const m7e=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function y7e(t){t=t.toLowerCase();let e=f7e;for(let n=0;n<t.length;n++)e=e*p7e+m7e[t[n]];return e}function In(t){if(Z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=rW(t);return Z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(t.substring(2,4)===g7e(t),"bad icap checksum","address",t);let e=y7e(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return rW("0x"+e)}Z(!1,"invalid address","address",t)}function w7e(t){const e=In(t.from);let r=Ze(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,In(Tr(Yr(kf([e,r])),12))}function Pte(t){return t&&typeof t.getAddress=="function"}async function l2(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),In(n)}function Di(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?In(t):(ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),l2(t,e.resolveName(t)));if(Pte(t))return l2(t,t.getAddress());if(t&&typeof t.then=="function")return l2(t,t);Z(!1,"unsupported addressable value","target",t)}const xu={};function qe(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new pi(xu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function gn(t,e){return new pi(xu,`bytes${e||""}`,t,{size:e})}const iW=Symbol.for("_ethers_typed");var cg;const Iu=class Iu{constructor(e,n,r,s){te(this,"type");te(this,"value");Q(this,cg);te(this,"_typedSymbol");s==null&&(s=null),eR(xu,e,"Typed"),vt(this,{_typedSymbol:iW,type:n,value:r}),$(this,cg,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return C(this,cg)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return C(this,cg)===!0?-1:C(this,cg)===!1?this.value.length:null}static from(e,n){return new Iu(xu,e,n)}static uint8(e){return qe(e,8)}static uint16(e){return qe(e,16)}static uint24(e){return qe(e,24)}static uint32(e){return qe(e,32)}static uint40(e){return qe(e,40)}static uint48(e){return qe(e,48)}static uint56(e){return qe(e,56)}static uint64(e){return qe(e,64)}static uint72(e){return qe(e,72)}static uint80(e){return qe(e,80)}static uint88(e){return qe(e,88)}static uint96(e){return qe(e,96)}static uint104(e){return qe(e,104)}static uint112(e){return qe(e,112)}static uint120(e){return qe(e,120)}static uint128(e){return qe(e,128)}static uint136(e){return qe(e,136)}static uint144(e){return qe(e,144)}static uint152(e){return qe(e,152)}static uint160(e){return qe(e,160)}static uint168(e){return qe(e,168)}static uint176(e){return qe(e,176)}static uint184(e){return qe(e,184)}static uint192(e){return qe(e,192)}static uint200(e){return qe(e,200)}static uint208(e){return qe(e,208)}static uint216(e){return qe(e,216)}static uint224(e){return qe(e,224)}static uint232(e){return qe(e,232)}static uint240(e){return qe(e,240)}static uint248(e){return qe(e,248)}static uint256(e){return qe(e,256)}static uint(e){return qe(e,256)}static int8(e){return qe(e,-8)}static int16(e){return qe(e,-16)}static int24(e){return qe(e,-24)}static int32(e){return qe(e,-32)}static int40(e){return qe(e,-40)}static int48(e){return qe(e,-48)}static int56(e){return qe(e,-56)}static int64(e){return qe(e,-64)}static int72(e){return qe(e,-72)}static int80(e){return qe(e,-80)}static int88(e){return qe(e,-88)}static int96(e){return qe(e,-96)}static int104(e){return qe(e,-104)}static int112(e){return qe(e,-112)}static int120(e){return qe(e,-120)}static int128(e){return qe(e,-128)}static int136(e){return qe(e,-136)}static int144(e){return qe(e,-144)}static int152(e){return qe(e,-152)}static int160(e){return qe(e,-160)}static int168(e){return qe(e,-168)}static int176(e){return qe(e,-176)}static int184(e){return qe(e,-184)}static int192(e){return qe(e,-192)}static int200(e){return qe(e,-200)}static int208(e){return qe(e,-208)}static int216(e){return qe(e,-216)}static int224(e){return qe(e,-224)}static int232(e){return qe(e,-232)}static int240(e){return qe(e,-240)}static int248(e){return qe(e,-248)}static int256(e){return qe(e,-256)}static int(e){return qe(e,-256)}static bytes1(e){return gn(e,1)}static bytes2(e){return gn(e,2)}static bytes3(e){return gn(e,3)}static bytes4(e){return gn(e,4)}static bytes5(e){return gn(e,5)}static bytes6(e){return gn(e,6)}static bytes7(e){return gn(e,7)}static bytes8(e){return gn(e,8)}static bytes9(e){return gn(e,9)}static bytes10(e){return gn(e,10)}static bytes11(e){return gn(e,11)}static bytes12(e){return gn(e,12)}static bytes13(e){return gn(e,13)}static bytes14(e){return gn(e,14)}static bytes15(e){return gn(e,15)}static bytes16(e){return gn(e,16)}static bytes17(e){return gn(e,17)}static bytes18(e){return gn(e,18)}static bytes19(e){return gn(e,19)}static bytes20(e){return gn(e,20)}static bytes21(e){return gn(e,21)}static bytes22(e){return gn(e,22)}static bytes23(e){return gn(e,23)}static bytes24(e){return gn(e,24)}static bytes25(e){return gn(e,25)}static bytes26(e){return gn(e,26)}static bytes27(e){return gn(e,27)}static bytes28(e){return gn(e,28)}static bytes29(e){return gn(e,29)}static bytes30(e){return gn(e,30)}static bytes31(e){return gn(e,31)}static bytes32(e){return gn(e,32)}static address(e){return new Iu(xu,"address",e)}static bool(e){return new Iu(xu,"bool",!!e)}static bytes(e){return new Iu(xu,"bytes",e)}static string(e){return new Iu(xu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Iu(xu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===iW}static dereference(e,n){if(Iu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};cg=new WeakMap;let pi=Iu;class b7e extends xd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=pi.dereference(n,"string");try{r=In(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return In(Pf(e.readValue(),20))}}class v7e extends xd{constructor(n){super(n.name,n.type,"_",n.dynamic);te(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function Ote(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return ye(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),ye(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Z(!1,"invalid tuple value","tuple",n);Z(e.length===r.length,"types/value length mismatch","tuple",n);let s=new p5,i=new p5,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function kte(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(zs(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(zs(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),Yw.fromItems(n,r)}class E7e extends xd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);te(this,"coder");te(this,"length");vt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=pi.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Wee(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Ote(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ye(r*ki<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*ki,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new v7e(this.coder));return kte(n,s)}}class C7e extends xd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=pi.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Dte extends xd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=Pi(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class _7e extends Dte{constructor(e){super("bytes",e)}decode(e){return Le(super.decode(e))}}class A7e extends xd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);te(this,"size");vt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=Pi(pi.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Le(n.readBytes(this.size))}}const S7e=new Uint8Array([]);class x7e extends xd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(S7e)}decode(e){return e.readBytes(0),null}}const I7e=BigInt(0),N7e=BigInt(1),T7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class R7e extends xd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);te(this,"size");te(this,"signed");vt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Ze(pi.dereference(r,this.type)),i=Yv(T7e,ki*8);if(this.signed){let o=Yv(i,this.size*8-1);(s>o||s<-(o+N7e))&&this._throwError("value out-of-bounds",r),s=Gee(s,8*ki)}else(s<I7e||s>Yv(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Yv(n.readValue(),this.size*8);return this.signed&&(r=Ije(r,this.size*8)),r}}class P7e extends Dte{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,ad(pi.dereference(n,"string")))}decode(e){return qI(super.decode(e))}}class fS extends xd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);te(this,"coders");vt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=pi.dereference(r,"tuple");return Ote(n,this.coders,s)}decode(n){return kte(n,this.coders)}}function u2(t,e){return{address:In(t),storageKeys:e.map((n,r)=>(Z(ar(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Rm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Z(n.length===2,"invalid slot set",`value[${r}]`,n),u2(n[0],n[1])):(Z(n!=null&&typeof n=="object","invalid address-slot set","value",t),u2(n.address,n.storageKeys)));Z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return u2(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Mte(t){return{address:In(t.address),nonce:Ze(t.nonce!=null?t.nonce:0),chainId:Ze(t.chainId!=null?t.chainId:0),signature:xo.from(t.signature)}}function O7e(t){let e;return typeof t=="string"?e=m_.computePublicKey(t,!1):e=t.publicKey,In(Yr("0x"+e.substring(4)).substring(26))}function k7e(t,e){return O7e(m_.recoverPublicKey(t,e))}const Es=BigInt(0),D7e=BigInt(2),M7e=BigInt(27),L7e=BigInt(28),$7e=BigInt(35),U7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),d2=4096*32;function B7e(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Yt(t.blobToKzgCommitment(Le(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Yt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Yt(t.blobToKZGCommitment(Le(r)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Yt(t.computeBlobProof(Le(r),Le(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Yt(t.computeBlobKZGProof(Le(r),Le(s)));Z(!1,"unsupported KZG library","kzg",t)}}}function oW(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Lb(e).substring(4),"0x"+n}function $b(t){return t==="0x"?null:In(t)}function oR(t,e){try{return Rm(t)}catch(n){Z(!1,n.message,e,t)}}function F7e(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:$b(s[1]),nonce:Fn(s[2],"nonce"),chainId:Fn(s[0],"chainId"),signature:xo.from({yParity:Pm(s[3],"yParity"),r:vd(s[4],32),s:vd(s[5],32)})})}return n}catch(n){Z(!1,n.message,e,t)}}function Pm(t,e){return t==="0x"?0:Qt(t,e)}function Fn(t,e){if(t==="0x")return Es;const n=Ze(t,e);return Z(n<=U7e,"value exceeds uint size",e,n),n}function on(t,e){const n=Ze(t,"value"),r=os(n);return Z(r.length<=32,"value too large",`tx.${e}`,n),r}function aR(t){return Rm(t).map(e=>[e.address,e.storageKeys])}function j7e(t){return t.map(e=>[on(e.chainId,"chainId"),e.address,on(e.nonce,"nonce"),on(e.signature.yParity,"yParity"),os(e.signature.r),os(e.signature.s)])}function W7e(t,e){Z(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Z(ar(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function z7e(t){const e=$1(t);Z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Pm(e[0],"nonce"),gasPrice:Fn(e[1],"gasPrice"),gasLimit:Fn(e[2],"gasLimit"),to:$b(e[3]),value:Fn(e[4],"value"),data:Le(e[5]),chainId:Es};if(e.length===6)return n;const r=Fn(e[6],"v"),s=Fn(e[7],"r"),i=Fn(e[8],"s");if(s===Es&&i===Es)n.chainId=r;else{let o=(r-$7e)/D7e;o<Es&&(o=Es),n.chainId=o,Z(o!==Es||r===M7e||r===L7e,"non-canonical legacy v","v",e[6]),n.signature=xo.from({r:vd(e[7],32),s:vd(e[8],32),v:r})}return n}function H7e(t,e){const n=[on(t.nonce,"nonce"),on(t.gasPrice||0,"gasPrice"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data];let r=Es;if(t.chainId!=Es)r=Ze(t.chainId,"tx.chainId"),Z(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==Es&&(n.push(os(r)),n.push("0x"),n.push("0x")),kf(n);let s=BigInt(27+e.yParity);return r!==Es?s=xo.getChainIdV(r,e.v):BigInt(e.v)!==s&&Z(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(os(s)),n.push(os(e.r)),n.push(os(e.s)),kf(n)}function cR(t,e){let n;try{if(n=Pm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const r=vd(e[1],32),s=vd(e[2],32),i=xo.from({r,s,yParity:n});t.signature=i}function G7e(t){const e=$1(Yt(t).slice(1));Z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Le(t));const n={type:2,chainId:Fn(e[0],"chainId"),nonce:Pm(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:$b(e[5]),value:Fn(e[6],"value"),data:Le(e[7]),accessList:oR(e[8],"accessList")};return e.length===9||cR(n,e.slice(9)),n}function q7e(t,e){const n=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data,aR(t.accessList||[])];return e&&(n.push(on(e.yParity,"yParity")),n.push(os(e.r)),n.push(os(e.s))),Dr(["0x02",kf(n)])}function V7e(t){const e=$1(Yt(t).slice(1));Z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Le(t));const n={type:1,chainId:Fn(e[0],"chainId"),nonce:Pm(e[1],"nonce"),gasPrice:Fn(e[2],"gasPrice"),gasLimit:Fn(e[3],"gasLimit"),to:$b(e[4]),value:Fn(e[5],"value"),data:Le(e[6]),accessList:oR(e[7],"accessList")};return e.length===8||cR(n,e.slice(8)),n}function K7e(t,e){const n=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.gasPrice||0,"gasPrice"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data,aR(t.accessList||[])];return e&&(n.push(on(e.yParity,"recoveryParam")),n.push(os(e.r)),n.push(os(e.s))),Dr(["0x01",kf(n)])}function Y7e(t){let e=$1(Yt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Z(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Z(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Z(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Z(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Le(t));const s={type:3,chainId:Fn(e[0],"chainId"),nonce:Pm(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:$b(e[5]),value:Fn(e[6],"value"),data:Le(e[7]),accessList:oR(e[8],"accessList"),maxFeePerBlobGas:Fn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Z(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Z(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Z(ar(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||cR(s,e.slice(11)),s}function Q7e(t,e,n){const r=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit,"gasLimit"),t.to||g_,on(t.value,"value"),t.data,aR(t.accessList||[]),on(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),W7e(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(on(e.yParity,"yParity")),r.push(os(e.r)),r.push(os(e.s)),n)?Dr(["0x03",kf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Dr(["0x03",kf(r)])}function J7e(t){const e=$1(Yt(t).slice(1));Z(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Le(t));const n={type:4,chainId:Fn(e[0],"chainId"),nonce:Pm(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:$b(e[5]),value:Fn(e[6],"value"),data:Le(e[7]),accessList:oR(e[8],"accessList"),authorizationList:F7e(e[9],"authorizationList")};return e.length===10||cR(n,e.slice(10)),n}function Z7e(t,e){const n=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data,aR(t.accessList||[]),j7e(t.authorizationList||[])];return e&&(n.push(on(e.yParity,"yParity")),n.push(os(e.r)),n.push(os(e.s))),Dr(["0x04",kf(n)])}var Sc,$0,U0,B0,F0,j0,W0,z0,H0,G0,q0,V0,lg,Ah,El,Sh,K0,Y0,ix;const gl=class gl{constructor(){Q(this,Y0);Q(this,Sc);Q(this,$0);Q(this,U0);Q(this,B0);Q(this,F0);Q(this,j0);Q(this,W0);Q(this,z0);Q(this,H0);Q(this,G0);Q(this,q0);Q(this,V0);Q(this,lg);Q(this,Ah);Q(this,El);Q(this,Sh);Q(this,K0);$(this,Sc,null),$(this,$0,null),$(this,B0,0),$(this,F0,Es),$(this,j0,null),$(this,W0,null),$(this,z0,null),$(this,U0,"0x"),$(this,H0,Es),$(this,G0,Es),$(this,q0,null),$(this,V0,null),$(this,lg,null),$(this,Ah,null),$(this,El,null),$(this,Sh,null),$(this,K0,null)}get type(){return C(this,Sc)}set type(e){switch(e){case null:$(this,Sc,null);break;case 0:case"legacy":$(this,Sc,0);break;case 1:case"berlin":case"eip-2930":$(this,Sc,1);break;case 2:case"london":case"eip-1559":$(this,Sc,2);break;case 3:case"cancun":case"eip-4844":$(this,Sc,3);break;case 4:case"pectra":case"eip-7702":$(this,Sc,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=C(this,$0);return e==null&&this.type===3?g_:e}set to(e){$(this,$0,e==null?null:In(e))}get nonce(){return C(this,B0)}set nonce(e){$(this,B0,Qt(e,"value"))}get gasLimit(){return C(this,F0)}set gasLimit(e){$(this,F0,Ze(e))}get gasPrice(){const e=C(this,j0);return e==null&&(this.type===0||this.type===1)?Es:e}set gasPrice(e){$(this,j0,e==null?null:Ze(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=C(this,W0);return e??(this.type===2||this.type===3?Es:null)}set maxPriorityFeePerGas(e){$(this,W0,e==null?null:Ze(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=C(this,z0);return e??(this.type===2||this.type===3?Es:null)}set maxFeePerGas(e){$(this,z0,e==null?null:Ze(e,"maxFeePerGas"))}get data(){return C(this,U0)}set data(e){$(this,U0,Le(e))}get value(){return C(this,H0)}set value(e){$(this,H0,Ze(e,"value"))}get chainId(){return C(this,G0)}set chainId(e){$(this,G0,Ze(e))}get signature(){return C(this,q0)||null}set signature(e){$(this,q0,e==null?null:xo.from(e))}get accessList(){const e=C(this,V0)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){$(this,V0,e==null?null:Rm(e))}get authorizationList(){const e=C(this,K0)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){$(this,K0,e==null?null:e.map(n=>Mte(n)))}get maxFeePerBlobGas(){const e=C(this,lg);return e==null&&this.type===3?Es:e}set maxFeePerBlobGas(e){$(this,lg,e==null?null:Ze(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=C(this,Ah);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Z(ar(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}$(this,Ah,e)}get blobs(){return C(this,Sh)==null?null:C(this,Sh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){$(this,Sh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(dU(i)){ye(C(this,El),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Yt(i);if(Z(o.length<=d2,"blob is too large",`blobs[${s}]`,i),o.length!==d2){const l=new Uint8Array(d2);l.set(o),o=l}const a=C(this,El).blobToKzgCommitment(o),c=Le(C(this,El).computeBlobKzgProof(o,a));n.push({data:Le(o),commitment:Le(a),proof:c}),r.push(oW(1,a))}else{const o=Le(i.commitment);n.push({data:Le(i.data),commitment:o,proof:Le(i.proof)}),r.push(oW(1,o))}}$(this,Sh,n),$(this,Ah,r)}get kzg(){return C(this,El)}set kzg(e){e==null?$(this,El,null):$(this,El,B7e(e))}get hash(){return this.signature==null?null:Yr(he(this,Y0,ix).call(this,!0,!1))}get unsignedHash(){return Yr(this.unsignedSerialized)}get from(){return this.signature==null?null:k7e(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:m_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return he(this,Y0,ix).call(this,!0,!0)}get unsignedSerialized(){return he(this,Y0,ix).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=C(this,lg)!=null||C(this,Ah);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return gl.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new gl;if(typeof e=="string"){const r=Yt(e);if(r[0]>=127)return gl.from(z7e(r));switch(r[0]){case 1:return gl.from(V7e(r));case 2:return gl.from(G7e(r));case 3:return gl.from(Y7e(r));case 4:return gl.from(J7e(r))}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new gl;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=xo.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Sc=new WeakMap,$0=new WeakMap,U0=new WeakMap,B0=new WeakMap,F0=new WeakMap,j0=new WeakMap,W0=new WeakMap,z0=new WeakMap,H0=new WeakMap,G0=new WeakMap,q0=new WeakMap,V0=new WeakMap,lg=new WeakMap,Ah=new WeakMap,El=new WeakMap,Sh=new WeakMap,K0=new WeakMap,Y0=new WeakSet,ix=function(e,n){ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return H7e(this,r);case 1:return K7e(this,r);case 2:return q7e(this,r);case 3:return Q7e(this,r,n?this.blobs:null);case 4:return Z7e(this,r)}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let KI=gl;function sm(t){return Yr(ad(t))}var X7e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const aW=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),cW=4;function eWe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let _=1;_<r;_++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let w=0;for(let _=0;_<d;_++)w=w<<1|u();let y=[],b=0,v=h;for(;;){let _=Math.floor(((w-b+1)*s-1)/v),I=0,x=r;for(;x-I>1;){let O=I+x>>>1;_<i[O]?x=O:I=O}if(I==0)break;y.push(I);let N=b+Math.floor(v*i[I]/s),S=b+Math.floor(v*i[I+1]/s)-1;for(;!((N^S)&f);)w=w<<1&g|u(),N=N<<1&g,S=S<<1&g|1;for(;N&~S&p;)w=w&f|w<<1&g>>>1|u(),N=N<<1^f,S=(S^f)<<1|f|1;b=N,v=1+S-N}let A=r-4;return y.map(_=>{switch(_-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return _-1}})}function tWe(t){let e=0;return()=>t[e++]}function Lte(t){return tWe(eWe(nWe(t)))}function nWe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function rWe(t){return t&1?~t>>1:t>>1}function sWe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=rWe(e());return n}function y_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function $te(t){return w_(()=>{let e=y_(t);if(e.length)return e})}function Ute(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(iWe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(oWe(n,t))}return e.flat()}function w_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Bte(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)sWe(t,n).forEach((i,o)=>r[o].push(i));return r}function iWe(t,e){let n=1+e(),r=e(),s=w_(e);return Bte(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function oWe(t,e){let n=1+e();return Bte(n,1+t,e).map(s=>[s[0],s.slice(1)])}function aWe(t){let e=[],n=y_(t);return s(r([]),[]),e;function r(i){let o=t(),a=w_(()=>{let c=y_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function cWe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Fte(t){return`{${cWe(t)}}`}function lWe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function eb(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function uWe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var dWe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const b_=44032,YI=4352,QI=4449,JI=4519,jte=19,Wte=21,tb=28,ZI=Wte*tb,hWe=jte*ZI,fWe=b_+hWe,pWe=YI+jte,gWe=QI+Wte,mWe=JI+tb;function Jv(t){return t>>24&255}function zte(t){return t&16777215}let C5,lW,_5,ox;function yWe(){let t=Lte(dWe);C5=new Map($te(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),lW=new Set(y_(t)),_5=new Map,ox=new Map;for(let[e,n]of Ute(t)){if(!lW.has(e)&&n.length==2){let[r,s]=n,i=ox.get(r);i||(i=new Map,ox.set(r,i)),i.set(s,e)}_5.set(e,n.reverse())}}function Hte(t){return t>=b_&&t<fWe}function wWe(t,e){if(t>=YI&&t<pWe&&e>=QI&&e<gWe)return b_+(t-YI)*ZI+(e-QI)*tb;if(Hte(t)&&e>JI&&e<mWe&&(t-b_)%tb==0)return t+(e-JI);{let n=ox.get(t);return n&&(n=n.get(e),n)?n:-1}}function Gte(t){C5||yWe();let e=[],n=[],r=!1;function s(i){let o=C5.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(Hte(i)){let o=i-b_,a=o/ZI|0,c=o%ZI/tb|0,l=o%tb;s(YI+a),s(QI+c),l>0&&s(JI+l)}else{let o=_5.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Jv(e[0]);for(let o=1;o<e.length;o++){let a=Jv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Jv(e[--c]),i<=a))break}i=Jv(e[o])}}return e}function bWe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Jv(i),a=zte(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=wWe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function qte(t){return Gte(t).map(zte)}function vWe(t){return bWe(Gte(t))}const uW=45,Vte=".",Kte=65039,Yte=1,XI=t=>Array.from(t);function v_(t,e){return t.P.has(e)||t.Q.has(e)}class EWe extends Array{get is_emoji(){return!0}}let A5,Qte,jp,S5,Jte,u0,h2,Cy,fp,dW,x5;function CU(){if(A5)return;let t=Lte(X7e);const e=()=>y_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));A5=new Map(Ute(t)),Qte=n(),jp=e(),S5=new Set(e().map(u=>jp[u])),jp=new Set(jp),Jte=n(),n();let s=$te(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};u0=w_(u=>{let d=w_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=eb(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),h2=n(),Cy=new Map;let a=e().concat(XI(h2)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),h2.has(u)||Cy.set(u,f)});for(let{V:u,M:d}of new Set(Cy.values())){let h=[];for(let p of u){let g=u0.filter(y=>v_(y,p)),w=h.find(({G:y})=>g.some(b=>y.has(b)));w||(w={G:new Set,V:[]},h.push(w)),w.V.push(p),r(w.G,g)}let f=h.flatMap(p=>XI(p.G));for(let{G:p,V:g}of h){let w=new Set(f.filter(y=>!p.has(y)));for(let y of g)d.set(y,w)}}fp=new Set;let c=new Set;const l=u=>fp.has(u)?c.add(u):fp.add(u);for(let u of u0){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of fp)!Cy.has(u)&&!c.has(u)&&Cy.set(u,Yte);r(fp,qte(fp)),dW=aWe(t).map(u=>EWe.from(u)).sort(uWe),x5=new Map;for(let u of dW){let d=[x5];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===Kte?d.push(...f):d=f}for(let h of d)h.V=u}}function _U(t){return(Zte(t)?"":`${AU(lR([t]))} `)+Fte(t)}function AU(t){return`"${t}"`}function CWe(t){if(t.length>=4&&t[2]==uW&&t[3]==uW)throw new Error(`invalid label extension: "${eb(t.slice(0,4))}"`)}function _We(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function AWe(t){let e=t[0],n=aW.get(e);if(n)throw UE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=aW.get(e);if(o){if(s==i)throw UE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw UE(`trailing ${n}`)}function lR(t,e=1/0,n=Fte){let r=[];SWe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];Zte(a)&&(r.push(eb(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(eb(t.slice(s,i))),r.join("")}function SWe(t){return CU(),jp.has(t)}function Zte(t){return CU(),Jte.has(t)}function xWe(t){return RWe(IWe(t,vWe,kWe))}function IWe(t,e,n){if(!t)return[];CU();let r=0;return t.split(Vte).map(s=>{let i=lWe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=OWe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(_We(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))CWe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(jp.has(u[0]))throw UE("leading combining mark");for(let g=1;g<c;g++){let w=a[g];if(!w.is_emoji&&jp.has(w[0]))throw UE(`emoji + combining mark: "${eb(a[g-1])} + ${lR([w[0]])}"`)}AWe(u);let f=XI(new Set(h)),[p]=TWe(f);PWe(p,h),NWe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function NWe(t,e){let n,r=[];for(let s of e){let i=Cy.get(s);if(i===Yte)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):XI(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>v_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function TWe(t){let e=u0;for(let n of t){let r=e.filter(s=>v_(s,n));if(!r.length)throw u0.some(s=>v_(s,n))?ene(e[0],n):Xte(n);if(e=r,r.length==1)break}return e}function RWe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${AU(lR(e,63))}: ${s}`)}return eb(r)}).join(Vte)}function Xte(t){return new Error(`disallowed character: ${_U(t)}`)}function ene(t,e){let n=_U(e),r=u0.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function UE(t){return new Error(`illegal placement: ${t}`)}function PWe(t,e){for(let n of e)if(!v_(t,n))throw ene(t,n);if(t.M){let n=qte(e);for(let r=1,s=n.length;r<s;r++)if(S5.has(n[r])){let i=r+1;for(let o;i<s&&S5.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${_U(o)}`);if(i-r>cW)throw new Error(`excessive non-spacing marks: ${AU(lR(n.slice(r-1,i)))} (${i-r}/${cW})`);r=i}}}function OWe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=DWe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(fp.has(o))s.push(o);else{let a=A5.get(o);if(a)s.push(...a);else if(!Qte.has(o))throw Xte(o)}}}return s.length&&r.push(e(s)),r}function kWe(t){return t.filter(e=>e!=Kte)}function DWe(t,e){let n=x5,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const tne=new Uint8Array(32);tne.fill(0);function hW(t){return Z(t.length!==0,"invalid ENS name; empty component","comp",t),t}function nne(t){const e=ad(MWe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(hW(e.slice(r,s))),r=s+1);return Z(r<e.length,"invalid ENS name; empty component","name",t),n.push(hW(e.slice(r))),n}function MWe(t){try{if(t.length===0)throw new Error("empty label");return xWe(t)}catch(e){Z(!1,`invalid ENS name (${e.message})`,"name",t)}}function I5(t){Z(typeof t=="string","invalid ENS name; not a string","name",t),Z(t.length,"invalid ENS name (empty label)","name",t);let e=tne;const n=nne(t);for(;n.length;)e=Yr(Dr([e,Yr(n.pop())]));return Le(e)}function LWe(t,e){const n=e;return Z(n<=255,"DNS encoded label cannot exceed 255","length",n),Le(Dr(nne(t).map(r=>{Z(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const rne=new Uint8Array(32);rne.fill(0);const $We=BigInt(-1),sne=BigInt(0),ine=BigInt(1),UWe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function BWe(t){const e=Yt(t),n=e.length%32;return n?Dr([e,rne.slice(n)]):Le(e)}const FWe=Pf(ine,32),jWe=Pf(sne,32),fW={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},f2=["name","version","chainId","verifyingContract","salt"];function pW(t){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const WWe={name:pW("name"),version:pW("version"),chainId:function(t){const e=Ze(t,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Pc(e)},verifyingContract:function(t){try{return In(t).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Yt(t,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",t),Le(e)}};function p2(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Z(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Yv(UWe,n?r-1:r),i=n?(s+ine)*$We:sne;return function(o){const a=Ze(o,"value");return Z(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),Pf(n?Gee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Z(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Yt(r);return Z(s.length===n,`invalid length for ${t}`,"value",r),BWe(r)}}}switch(t){case"address":return function(e){return vd(In(e),32)};case"bool":return function(e){return e?FWe:jWe};case"bytes":return function(e){return Yr(e)};case"string":return function(e){return sm(e)}}return null}function gW(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function pS(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var D_,Uu,Q0,cN,one;const xa=class xa{constructor(e){Q(this,cN);te(this,"primaryType");Q(this,D_);Q(this,Uu);Q(this,Q0);$(this,Uu,new Map),$(this,Q0,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=pS(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),$(this,D_,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Z(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=pS(u.type).base;Z(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!p2(d)&&(Z(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Z(o.length!==0,"missing primary type","types",e),Z(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),vt(this,{primaryType:o[0]});function a(c,l){Z(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),C(this,Uu).set(c,gW(c,i[c])+u.map(d=>gW(d,i[d])).join(""))}}get types(){return JSON.parse(C(this,D_))}getEncoder(e){let n=C(this,Q0).get(e);return n||(n=he(this,cN,one).call(this,e),C(this,Q0).set(e,n)),n}encodeType(e){const n=C(this,Uu).get(e);return Z(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Yr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(p2(e))return r(e,n);const s=pS(e).array;if(s)return Z(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new xa(e)}static getPrimaryType(e){return xa.from(e).primaryType}static hashStruct(e,n,r){return xa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=fW[r];Z(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>f2.indexOf(r.name)-f2.indexOf(s.name)),xa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Dr(["0x1901",xa.hashDomain(e),xa.from(n).hash(r)])}static hash(e,n,r){return Yr(xa.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!ar(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=xa.from(n);o.visit(r,(a,c)=>(a==="address"&&!ar(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){xa.hashDomain(e);const s={},i=[];f2.forEach(c=>{const l=e[c];l!=null&&(s[c]=WWe[c](l),i.push({name:c,type:fW[c]}))});const o=xa.from(n);n=o.types;const a=Object.assign({},n);return Z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Le(Yt(l));if(c.match(/^u?int/))return Ze(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Z(typeof l=="string","invalid string","value",l),l}Z(!1,"unsupported type","type",c)})}}};D_=new WeakMap,Uu=new WeakMap,Q0=new WeakMap,cN=new WeakSet,one=function(e){{const s=p2(e);if(s)return s}const n=pS(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Z(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return C(this,Uu).has(s)&&(a=a.map(Yr)),Yr(Dr(a))}}const r=this.types[e];if(r){const s=sm(C(this,Uu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return C(this,Uu).has(c)?Yr(l):l});return o.unshift(s),Dr(o)}}Z(!1,`unknown type: ${e}`,"type",e)};let eN=xa;function Mi(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const zWe="external public payable override",HWe=Mi(zWe.split(" ")),ane="constant external internal payable private public pure view override",GWe=Mi(ane.split(" ")),cne="constructor error event fallback function receive struct",lne=Mi(cne.split(" ")),une="calldata memory storage payable indexed",qWe=Mi(une.split(" ")),VWe="tuple returns",KWe=[cne,une,VWe,ane].join(" "),YWe=Mi(KWe.split(" ")),QWe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},JWe=new RegExp("^(\\s*)"),ZWe=new RegExp("^([0-9]+)"),XWe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),dne=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),hne=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Us,xc,M_,N5;const lN=class lN{constructor(e){Q(this,M_);Q(this,Us);Q(this,xc);$(this,Us,0),$(this,xc,e.slice())}get offset(){return C(this,Us)}get length(){return C(this,xc).length-C(this,Us)}clone(){return new lN(C(this,xc))}reset(){$(this,Us,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=he(this,M_,N5).call(this,C(this,Us)+1,e.match+1);return $(this,Us,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;C(this,Us)<e.match-1;){const r=this.peek().linkNext;n.push(he(this,M_,N5).call(this,C(this,Us)+1,r)),$(this,Us,r)}return $(this,Us,e.match+1),n}peek(){if(C(this,Us)>=C(this,xc).length)throw new Error("out-of-bounds");return C(this,xc)[C(this,Us)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Td(this,Us)._++,e}toString(){const e=[];for(let n=C(this,Us);n<C(this,xc).length;n++){const r=C(this,xc)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Us=new WeakMap,xc=new WeakMap,M_=new WeakSet,N5=function(e=0,n=0){return new lN(C(this,xc).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Qc=lN;function Wf(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(JWe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=QWe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Qt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(XWe),a){if(c.text=a[1],i+=c.text.length,YWe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(hne)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(ZWe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Qc(e.map(o=>Object.freeze(o)))}function mW(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function uR(t,e){if(e.peekKeyword(lne)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Ed(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function fne(t){let e=Ed(t,GWe);return mW(e,Mi("constant payable nonpayable".split(" "))),mW(e,Mi("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function cd(t,e){return t.popParams().map(n=>Vs.from(n,e))}function pne(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ze(t.pop().text);throw new Error("invalid gas")}return null}function im(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const eze=new RegExp(/^(.*)\[([0-9]*)\]$/);function yW(t){const e=t.match(hne);if(Z(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Z(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Z(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const vr={},Io=Symbol.for("_ethers_internal"),wW="_ParamTypeInternal",bW="_ErrorInternal",vW="_EventInternal",EW="_ConstructorInternal",CW="_FallbackInternal",_W="_FunctionInternal",AW="_StructInternal";var J0,ax;const Ia=class Ia{constructor(e,n,r,s,i,o,a,c){Q(this,J0);te(this,"name");te(this,"type");te(this,"baseType");te(this,"indexed");te(this,"components");te(this,"arrayLength");te(this,"arrayChildren");if(eR(e,vr,"ParamType"),Object.defineProperty(this,Io,{value:wW}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");vt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return he(this,J0,ax).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(Ia.isParamType(e))return e;if(typeof e=="string")try{return Ia.from(Wf(e),n)}catch{Z(!1,"invalid param type","obj",e)}else if(e instanceof Qc){let a="",c="",l=null;Ed(e,Mi(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>Ia.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=yW(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new Ia(vr,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(Ed(e,qWe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ia(vr,p,a,c,h,l,d,u)}const r=e.name;Z(!r||typeof r=="string"&&r.match(dne),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Z(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(eze);if(o){const a=parseInt(o[2]||"-1"),c=Ia.from({type:o[1],components:e.components});return new Ia(vr,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>Ia.from(l)):null;return new Ia(vr,r||"",i,"tuple",s,a,null,null)}return i=yW(e.type),new Ia(vr,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[Io]===wW}};J0=new WeakSet,ax=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;he(u=o,J0,ax).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;he(u=o[l],J0,ax).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Vs=Ia;class om{constructor(e,n,r){te(this,"type");te(this,"inputs");eR(e,vr,"Fragment"),r=Object.freeze(r.slice()),vt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{om.from(JSON.parse(e))}catch{}return om.from(Wf(e))}if(e instanceof Qc)switch(e.peekKeyword(lne)){case"constructor":return Xu.from(e);case"error":return mo.from(e);case"event":return Ul.from(e);case"fallback":case"receive":return Pu.from(e);case"function":return Bl.from(e);case"struct":return Ig.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Xu.from(e);case"error":return mo.from(e);case"event":return Ul.from(e);case"fallback":case"receive":return Pu.from(e);case"function":return Bl.from(e);case"struct":return Ig.from(e)}ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Z(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Xu.isFragment(e)}static isError(e){return mo.isFragment(e)}static isEvent(e){return Ul.isFragment(e)}static isFunction(e){return Bl.isFragment(e)}static isStruct(e){return Ig.isFragment(e)}}class dR extends om{constructor(n,r,s,i){super(n,r,i);te(this,"name");Z(typeof s=="string"&&s.match(dne),"invalid identifier","name",s),i=Object.freeze(i.slice()),vt(this,{name:s})}}function E_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class mo extends dR{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,Io,{value:bW})}get selector(){return sm(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+E_(e,this.inputs)),n.join(" ")}static from(e){if(mo.isFragment(e))return e;if(typeof e=="string")return mo.from(Wf(e));if(e instanceof Qc){const n=uR("error",e),r=cd(e);return im(e),new mo(vr,n,r)}return new mo(vr,e.name,e.inputs?e.inputs.map(Vs.from):[])}static isFragment(e){return e&&e[Io]===bW}}class Ul extends dR{constructor(n,r,s,i){super(n,"event",r,s);te(this,"anonymous");Object.defineProperty(this,Io,{value:vW}),vt(this,{anonymous:i})}get topicHash(){return sm(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+E_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Vs.from(i)),new Ul(vr,n,r,!1).topicHash}static from(n){if(Ul.isFragment(n))return n;if(typeof n=="string")try{return Ul.from(Wf(n))}catch{Z(!1,"invalid event fragment","obj",n)}else if(n instanceof Qc){const r=uR("event",n),s=cd(n,!0),i=!!Ed(n,Mi(["anonymous"])).has("anonymous");return im(n),new Ul(vr,r,s,i)}return new Ul(vr,n.name,n.inputs?n.inputs.map(r=>Vs.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Io]===vW}}class Xu extends om{constructor(n,r,s,i,o){super(n,r,s);te(this,"payable");te(this,"gas");Object.defineProperty(this,Io,{value:EW}),vt(this,{payable:i,gas:o})}format(n){if(ye(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${E_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Xu.isFragment(n))return n;if(typeof n=="string")try{return Xu.from(Wf(n))}catch{Z(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Qc){Ed(n,Mi(["constructor"]));const r=cd(n),s=!!Ed(n,HWe).has("payable"),i=pne(n);return im(n),new Xu(vr,"constructor",r,s,i)}return new Xu(vr,"constructor",n.inputs?n.inputs.map(Vs.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Io]===EW}}class Pu extends om{constructor(n,r,s){super(n,"fallback",r);te(this,"payable");Object.defineProperty(this,Io,{value:CW}),vt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Pu.isFragment(n))return n;if(typeof n=="string")try{return Pu.from(Wf(n))}catch{Z(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Qc){const r=n.toString(),s=n.peekKeyword(Mi(["fallback","receive"]));if(Z(s,"type must be fallback or receive","obj",r),n.popKeyword(Mi(["fallback","receive"]))==="receive"){const c=cd(n);return Z(c.length===0,"receive cannot have arguments","obj.inputs",c),Ed(n,Mi(["payable"])),im(n),new Pu(vr,[],!0)}let o=cd(n);o.length?Z(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Vs.from("bytes")];const a=fne(n);if(Z(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Ed(n,Mi(["returns"])).has("returns")){const c=cd(n);Z(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return im(n),new Pu(vr,o,a==="payable")}if(n.type==="receive")return new Pu(vr,[],!0);if(n.type==="fallback"){const r=[Vs.from("bytes")],s=n.stateMutability==="payable";return new Pu(vr,r,s)}Z(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Io]===CW}}class Bl extends dR{constructor(n,r,s,i,o,a){super(n,"function",r,i);te(this,"constant");te(this,"outputs");te(this,"stateMutability");te(this,"payable");te(this,"gas");Object.defineProperty(this,Io,{value:_W}),o=Object.freeze(o.slice()),vt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return sm(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+E_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(E_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Vs.from(i)),new Bl(vr,n,"view",r,[],null).selector}static from(n){if(Bl.isFragment(n))return n;if(typeof n=="string")try{return Bl.from(Wf(n))}catch{Z(!1,"invalid function fragment","obj",n)}else if(n instanceof Qc){const s=uR("function",n),i=cd(n),o=fne(n);let a=[];Ed(n,Mi(["returns"])).has("returns")&&(a=cd(n));const c=pne(n);return im(n),new Bl(vr,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Bl(vr,n.name,r,n.inputs?n.inputs.map(Vs.from):[],n.outputs?n.outputs.map(Vs.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Io]===_W}}class Ig extends dR{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,Io,{value:AW})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Ig.from(Wf(e))}catch{Z(!1,"invalid struct fragment","obj",e)}else if(e instanceof Qc){const n=uR("struct",e),r=cd(e);return im(e),new Ig(vr,n,r)}return new Ig(vr,e.name,e.inputs?e.inputs.map(Vs.from):[])}static isFragment(e){return e&&e[Io]===AW}}const Xc=new Map;Xc.set(0,"GENERIC_PANIC");Xc.set(1,"ASSERT_FALSE");Xc.set(17,"OVERFLOW");Xc.set(18,"DIVIDE_BY_ZERO");Xc.set(33,"ENUM_RANGE_ERROR");Xc.set(34,"BAD_STORAGE_DATA");Xc.set(49,"STACK_UNDERFLOW");Xc.set(50,"ARRAY_RANGE_ERROR");Xc.set(65,"OUT_OF_MEMORY");Xc.set(81,"UNINITIALIZED_FUNCTION_CALL");const tze=new RegExp(/^bytes([0-9]*)$/),nze=new RegExp(/^(u?int)([0-9]*)$/);let g2=null,SW=1024;function rze(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Yt(n);if(n=Le(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Le(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Le(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Xc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?In(e.to):null,data:e.data||"0x"};return e.from&&(c.from=In(e.from)),pr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var xh,_y;const uN=class uN{constructor(){Q(this,xh)}getDefaultValue(e){const n=e.map(s=>he(this,xh,_y).call(this,Vs.from(s)));return new fS(n,"_").defaultValue()}encode(e,n){Wee(n.length,e.length,"types/values length mismatch");const r=e.map(o=>he(this,xh,_y).call(this,Vs.from(o))),s=new fS(r,"_"),i=new p5;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>he(this,xh,_y).call(this,Vs.from(o)));return new fS(s,"_").decode(new g5(n,r,SW))}static _setDefaultMaxInflation(e){Z(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),SW=e}static defaultAbiCoder(){return g2==null&&(g2=new uN),g2}static getBuiltinCallException(e,n,r){return rze(e,n,r,uN.defaultAbiCoder())}};xh=new WeakSet,_y=function(e){if(e.isArray())return new E7e(he(this,xh,_y).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new fS(e.components.map(r=>he(this,xh,_y).call(this,r)),e.name);switch(e.baseType){case"address":return new b7e(e.name);case"bool":return new C7e(e.name);case"string":return new P7e(e.name);case"bytes":return new _7e(e.name);case"":return new x7e(e.name)}let n=e.type.match(nze);if(n){let r=parseInt(n[2]||"256");return Z(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new R7e(r/8,n[1]==="int",e.name)}if(n=e.type.match(tze),n){let r=parseInt(n[1]);return Z(r!==0&&r<=32,"invalid bytes length","param",e),new A7e(r,e.name)}Z(!1,"invalid type","type",e.type)};let C_=uN;class sze{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"signature");te(this,"topic");te(this,"args");const s=e.name,i=e.format();vt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class ize{constructor(e,n,r,s){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");te(this,"value");const i=e.name,o=e.format();vt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class oze{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");const s=e.name,i=e.format();vt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class xW{constructor(e){te(this,"hash");te(this,"_isIndexed");vt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const IW={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},NW={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&IW[t.toString()]&&(e=IW[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Cl,_l,Al,li,Yl,cx,lx;const Sp=class Sp{constructor(e){Q(this,Yl);te(this,"fragments");te(this,"deploy");te(this,"fallback");te(this,"receive");Q(this,Cl);Q(this,_l);Q(this,Al);Q(this,li);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,$(this,Al,new Map),$(this,Cl,new Map),$(this,_l,new Map);const r=[];for(const o of n)try{r.push(om.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}vt(this,{fragments:Object.freeze(r)});let s=null,i=!1;$(this,li,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}vt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Z(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=C(this,Al);break;case"event":c=C(this,_l);break;case"error":c=C(this,Cl);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||vt(this,{deploy:Xu.from("constructor()")}),vt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return C_.defaultAbiCoder()}getFunctionName(e){const n=he(this,Yl,cx).call(this,e,null,!1);return Z(n,"no matching function","key",e),n.name}hasFunction(e){return!!he(this,Yl,cx).call(this,e,null,!1)}getFunction(e,n){return he(this,Yl,cx).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(C(this,Al).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,Al).get(s),r)}}getEventName(e){const n=he(this,Yl,lx).call(this,e,null,!1);return Z(n,"no matching event","key",e),n.name}hasEvent(e){return!!he(this,Yl,lx).call(this,e,null,!1)}getEvent(e,n){return he(this,Yl,lx).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(C(this,_l).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,_l).get(s),r)}}getError(e,n){if(ar(e)){const s=e.toLowerCase();if(NW[s])return mo.from(NW[s].signature);for(const i of C(this,Cl).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of C(this,Cl))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?mo.from("error Error(string)"):e==="Panic"?mo.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Z(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=mo.from(e).format(),e==="Error(string)")return mo.from("error Error(string)");if(e==="Panic(uint256)")return mo.from("error Panic(uint256)");const r=C(this,Cl).get(e);return r||null}forEachError(e){const n=Array.from(C(this,Cl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,Cl).get(s),r)}}_decodeParams(e,n){return C(this,li).decode(e,n)}_encodeParams(e,n){return C(this,li).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Z(Tr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Tr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Dr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Z(Tr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Tr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Dr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Z(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Pi(n);if(s.length%32===0)try{return C(this,li).decode(e.outputs,s)}catch{r="could not decode result data"}ye(!1,r,"BAD_DATA",{value:Le(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Yt(e,"data"),s=C_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Le(r.slice(0,4)),c=this.getError(a);if(c)try{const l=C(this,li).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Le(C(this,li).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Z(i,"unknown event","eventFragment",e),e=i}ye(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?sm(o):i.type==="bytes"?Yr(Le(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Pf(o):i.type.match(/^bytes/)?o=xje(o,32):i.type==="address"&&C(this,li).encode(["address"],[o]),vd(Le(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Z(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Z(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Z(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Z(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(sm(c));else if(o.type==="bytes")r.push(Yr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(C(this,li).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:C(this,li).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Z(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Z(ar(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Vs.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?C(this,li).decode(s,Dr(r)):null,c=C(this,li).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new xW(null);else if(o[p])g=new xW(a[h++]);else try{g=a[h++]}catch(w){g=w}else try{g=c[d++]}catch(w){g=w}l.push(g),u.push(f.name||null)}),Yw.fromItems(l,u)}parseTransaction(e){const n=Yt(e.data,"tx.data"),r=Ze(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Le(n.slice(0,4)));if(!s)return null;const i=C(this,li).decode(s.inputs,n.slice(4));return new ize(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new sze(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Le(e),r=this.getError(Tr(n,0,4));if(!r)return null;const s=C(this,li).decode(r.inputs,Tr(n,4));return new oze(r,r.selector,s)}static from(e){return e instanceof Sp?e:typeof e=="string"?new Sp(JSON.parse(e)):typeof e.formatJson=="function"?new Sp(e.formatJson()):typeof e.format=="function"?new Sp(e.format("json")):new Sp(e)}};Cl=new WeakMap,_l=new WeakMap,Al=new WeakMap,li=new WeakMap,Yl=new WeakSet,cx=function(e,n,r){if(ar(e)){const i=e.toLowerCase();for(const o of C(this,Al).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of C(this,Al))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;pi.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(pi.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=C(this,Al).get(Bl.from(e).format());return s||null},lx=function(e,n,r){if(ar(e)){const i=e.toLowerCase();for(const o of C(this,_l).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of C(this,_l))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(pi.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=C(this,_l).get(Ul.from(e).format());return s||null};let T5=Sp;const gne=BigInt(0);function d0(t){return t??null}function Ur(t){return t==null?null:t.toString()}class TW{constructor(e,n,r){te(this,"gasPrice");te(this,"maxFeePerGas");te(this,"maxPriorityFeePerGas");vt(this,{gasPrice:d0(e),maxFeePerGas:d0(n),maxPriorityFeePerGas:d0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Ur(e),maxFeePerGas:Ur(n),maxPriorityFeePerGas:Ur(r)}}}function tN(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Le(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Ze(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Qt(t[s],`request.${s}`));return t.accessList&&(e.accessList=Rm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>dU(s)?Le(s):Object.assign({},s))),e}var Bu;class aze{constructor(e,n){te(this,"provider");te(this,"number");te(this,"hash");te(this,"timestamp");te(this,"parentHash");te(this,"parentBeaconBlockRoot");te(this,"nonce");te(this,"difficulty");te(this,"gasLimit");te(this,"gasUsed");te(this,"stateRoot");te(this,"receiptsRoot");te(this,"blobGasUsed");te(this,"excessBlobGas");te(this,"miner");te(this,"prevRandao");te(this,"extraData");te(this,"baseFeePerGas");Q(this,Bu);$(this,Bu,e.transactions.map(r=>typeof r!="string"?new __(r,n):r)),vt(this,{provider:n,hash:d0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:d0(e.prevRandao),extraData:e.extraData,baseFeePerGas:d0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return C(this,Bu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=C(this,Bu).slice();return e.length===0?[]:(ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:Ur(e),difficulty:Ur(n),extraData:r,gasLimit:Ur(s),gasUsed:Ur(i),blobGasUsed:Ur(this.blobGasUsed),excessBlobGas:Ur(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return C(this,Bu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=C(this,Bu)[e];else{const r=e.toLowerCase();for(const s of C(this,Bu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Z(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return cze(this)}}Bu=new WeakMap;class B1{constructor(e,n){te(this,"provider");te(this,"transactionHash");te(this,"blockHash");te(this,"blockNumber");te(this,"removed");te(this,"address");te(this,"data");te(this,"topics");te(this,"index");te(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());vt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return lze(this)}}var L_;class mne{constructor(e,n){te(this,"provider");te(this,"to");te(this,"from");te(this,"contractAddress");te(this,"hash");te(this,"index");te(this,"blockHash");te(this,"blockNumber");te(this,"logsBloom");te(this,"gasUsed");te(this,"blobGasUsed");te(this,"cumulativeGasUsed");te(this,"gasPrice");te(this,"blobGasPrice");te(this,"type");te(this,"status");te(this,"root");Q(this,L_);$(this,L_,Object.freeze(e.logs.map(s=>new B1(s,n))));let r=gne;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),vt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return C(this,L_)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Ur(this.cumulativeGasUsed),from:n,gasPrice:Ur(this.gasPrice),blobGasUsed:Ur(this.blobGasUsed),blobGasPrice:Ur(this.blobGasPrice),gasUsed:Ur(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return wne(this)}reorderedEvent(e){return ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),yne(this,e)}}L_=new WeakMap;var Ih;const LU=class LU{constructor(e,n){te(this,"provider");te(this,"blockNumber");te(this,"blockHash");te(this,"index");te(this,"hash");te(this,"type");te(this,"to");te(this,"from");te(this,"nonce");te(this,"gasLimit");te(this,"gasPrice");te(this,"maxPriorityFeePerGas");te(this,"maxFeePerGas");te(this,"maxFeePerBlobGas");te(this,"data");te(this,"value");te(this,"chainId");te(this,"signature");te(this,"accessList");te(this,"blobVersionedHashes");te(this,"authorizationList");Q(this,Ih);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,$(this,Ih,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Ur(this.chainId),data:l,from:a,gasLimit:Ur(this.gasLimit),gasPrice:Ur(this.gasPrice),hash:s,maxFeePerGas:Ur(this.maxFeePerGas),maxPriorityFeePerGas:Ur(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ur(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Ur(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Ii({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=C(this,Ih),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await Ii({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<C(this,Ih)&&(o=C(this,Ih)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const y=await g.getTransaction(w);if(y.from===this.from&&y.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(y.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";y.data===this.data&&y.to===this.to&&y.value===this.value?v="repriced":y.data==="0x"&&y.from===y.to&&y.value===gne&&(v="cancelled"),ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:y.replaceableTransaction(i),hash:y.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(y=>y())};if(p.push(()=>{a=!0}),s>0){const y=setTimeout(()=>{g(),f(pr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(y)})}const w=async y=>{if(await y.confirmations()>=r){g();try{h(l(y))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),i>=0){const y=async()=>{try{await c()}catch(b){if(zs(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",y)};p.push(()=>{this.provider.off("block",y)}),this.provider.once("block",y)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),wne(this)}reorderedEvent(e){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),yne(this,e)}replaceableTransaction(e){Z(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new LU(this,this.provider);return $(n,Ih,e),n}};Ih=new WeakMap;let __=LU;function cze(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function yne(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function wne(t){return{orphan:"drop-transaction",tx:t}}function lze(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class SU extends B1{constructor(n,r,s){super(n,n.provider);te(this,"interface");te(this,"fragment");te(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);vt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class bne extends B1{constructor(n,r){super(n,n.provider);te(this,"error");vt(this,{error:r})}}var Z0;class uze extends mne{constructor(n,r,s){super(s,r);Q(this,Z0);$(this,Z0,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?C(this,Z0).getEvent(n.topics[0]):null;if(r)try{return new SU(n,C(this,Z0),r)}catch(s){return new bne(n,s)}return n})}}Z0=new WeakMap;var $_;class xU extends __{constructor(n,r,s){super(s,r);Q(this,$_);$(this,$_,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new uze(C(this,$_),this.provider,s)}}$_=new WeakMap;class vne extends qee{constructor(n,r,s,i){super(n,r,s);te(this,"log");vt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class dze extends vne{constructor(e,n,r,s,i){super(e,n,r,new SU(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);vt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const RW=BigInt(0);function Ene(t){return t&&typeof t.call=="function"}function Cne(t){return t&&typeof t.estimateGas=="function"}function hR(t){return t&&typeof t.resolveName=="function"}function _ne(t){return t&&typeof t.sendTransaction=="function"}function Ane(t){if(t!=null){if(hR(t))return t;if(t.provider)return t.provider}}var U_;class hze{constructor(e,n,r){Q(this,U_);te(this,"fragment");if(vt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=am(e.runner,"resolveName"),i=hR(s)?s:null;$(this,U_,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Di(h,i))):Di(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return C(this,U_)}}U_=new WeakMap;function am(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Wp(t){return t==null?null:t.provider||null}async function Sne(t,e){const n=pi.dereference(t,"overrides");Z(typeof n=="object","invalid overrides parameter","overrides",t);const r=tN(n);return Z(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Z(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function fze(t,e,n){const r=am(t,"resolveName"),s=hR(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=pi.dereference(c,a),a==="address"?Di(c,s):c))))}function pze(t){const e=async function(o){const a=await Sne(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Di(a.from,Ane(t.runner)));const c=t.interface,l=Ze(a.value||RW,"overrides.value")===RW,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Z(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Z(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=am(t.runner,"call");ye(Ene(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw uU(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;ye(_ne(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Wp(t.runner);return new xU(t.interface,l,c)},s=async function(o){const a=am(t.runner,"estimateGas");return ye(Cne(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return vt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function gze(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return ye(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await Sne(l.pop()),d.from&&(d.from=await Di(d.from,Ane(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await fze(t.runner,u.inputs,l);return Object.assign({},d,await Ii({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;ye(_ne(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Wp(t.runner);return new xU(t.interface,h,d)},o=async function(...l){const u=am(t.runner,"estimateGas");return ye(Cne(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=am(t.runner,"call");ye(Ene(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw uU(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return vt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return ye(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function mze(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new hze(t,n(...s),s)};return vt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const nN=Symbol.for("_ethersInternal_contract"),xne=new WeakMap;function yze(t,e){xne.set(t[nN],e)}function jo(t){return xne.get(t[nN])}function wze(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function IU(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(ar(o,32))return o;const a=t.interface.getEvent(o);return Z(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?ar(e,32)?n=[e]:(r=t.interface.getEvent(e),Z(r,"unknown fragment","event",e),n=[r.topicHash]):wze(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Z(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Zv(t,e){const{subs:n}=jo(t);return n.get((await IU(t,e)).tag)||null}async function PW(t,e,n){const r=Wp(t.runner);ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await IU(t,n),{addr:a,subs:c}=jo(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=w=>{let y=s;if(y==null)try{y=t.interface.getEvent(w.topics[0])}catch{}if(y){const b=y,v=s?t.interface.decodeEventLog(s,w.data,w.topics):[];P5(t,n,v,A=>new dze(t,A,n,b,w))}else P5(t,n,[],b=>new vne(t,b,n,w))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let w=f;f=[],await Promise.all(w),r.off(d,h)}},c.set(i,l)}return l}let R5=Promise.resolve();async function bze(t,e,n,r){await R5;const s=await Zv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),jo(t).subs.delete(s.tag)),i>0}async function P5(t,e,n,r){try{await R5}catch{}const s=bze(t,e,n,r);return R5=s,await s}const gS=["then"];var wz;wz=nN;const BE=class BE{constructor(e,n,r,s){te(this,"target");te(this,"interface");te(this,"runner");te(this,"filters");te(this,wz);te(this,"fallback");Z(typeof e=="string"||Pte(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=T5.from(n);vt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,nN,{value:{}});let o,a=null,c=null;if(s){const d=Wp(r);c=new xU(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(ar(e))a=e,o=Promise.resolve(e);else{const d=am(r,"resolveName");if(!hR(d))throw pr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw pr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return jo(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return jo(this).addr=d,d});yze(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||gS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!zs(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>gS.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return vt(this,{filters:u}),vt(this,{fallback:i.receive||i.fallback?pze(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||gS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!zs(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||gS.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new BE(this.target,this.interface,e)}attach(e){return new BE(e,this.interface,this.runner)}async getAddress(){return await jo(this).addrPromise}async getDeployedCode(){const e=Wp(this.runner);ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Wp(this.runner);return ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return jo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),gze(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),mze(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=jo(this),o=s||await i,{fragment:a,topics:c}=await IU(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Wp(this.runner);return ye(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new SU(d,this.interface,h)}catch(f){return new bne(d,f)}return new B1(d,u)})}async on(e,n){const r=await PW(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await PW(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await P5(this,e,n,null)}async listenerCount(e){if(e){const s=await Zv(this,e);return s?s.listeners.length:0}const{subs:n}=jo(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Zv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=jo(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Zv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),jo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Zv(this,e);if(!n)return this;n.stop(),jo(this).subs.delete(n.tag)}else{const{subs:n}=jo(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends BE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let O5=BE;function vze(){return O5}class h0 extends vze(){}function m2(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Z(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class Eze{constructor(e){te(this,"name");vt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Ine=new RegExp("^(ipfs)://(.*)$","i"),OW=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Ine,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Nh,ug,Th,Ay,dN,Nne;const qy=class qy{constructor(e,n,r){Q(this,Th);te(this,"provider");te(this,"address");te(this,"name");Q(this,Nh);Q(this,ug);vt(this,{provider:e,address:n,name:r}),$(this,Nh,null),$(this,ug,new h0(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return C(this,Nh)==null&&$(this,Nh,(async()=>{try{return await C(this,ug).supportsInterface("0x9061b923")}catch(e){if(zs(e,"CALL_EXCEPTION"))return!1;throw $(this,Nh,null),e}})()),await C(this,Nh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await he(this,Th,Ay).call(this,"addr(bytes32)");return i==null||i===g_?null:i}catch(i){if(zs(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await he(this,Th,Ay).call(this,"addr(bytes32,uint)",[i]);if(ar(o,20))return In(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof Eze&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await he(this,Th,Ay).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await he(this,Th,Ay).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await he(this,Th,Ay).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${Tje("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<OW.length;r++){const s=n.match(OW[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=m2(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new h0(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",Pf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=m2(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Of(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const y=f.body;return y&&e.push({type:"!metadata",value:Le(y)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(Ine)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=m2(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await he(s=qy,dN,Nne).call(s,e,r);if(i!=null){const o=new qy(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Nh=new WeakMap,ug=new WeakMap,Th=new WeakSet,Ay=async function(e,n){n=(n||[]).slice();const r=C(this,ug).interface;n.unshift(I5(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ye(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[LWe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await C(this,ug)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!zs(i,"CALL_EXCEPTION"))throw i}return null},dN=new WeakSet,Nne=async function(e,n){const r=await qy.getEnsAddress(e);try{const i=await new h0(r,["function resolver(bytes32) view returns (address)"],e).resolver(I5(n),{enableCcipRead:!0});return i===g_?null:i}catch(s){throw s}return null},Q(qy,dN);let rN=qy;const kW=BigInt(0);function sn(t,e){return function(n){return n==null?e:t(n)}}function A_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function F1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ye(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function Cze(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Z(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function nb(t){return Z(ar(t,!0),"invalid data","value",t),t}function Ws(t){return Z(ar(t,32),"invalid hash","value",t),t}const _ze=F1({address:In,blockHash:Ws,blockNumber:Qt,data:nb,index:Qt,removed:sn(Cze,!1),topics:A_(Ws),transactionHash:Ws,transactionIndex:Qt},{index:["logIndex"]});function Aze(t){return _ze(t)}const Sze=F1({hash:sn(Ws),parentHash:Ws,parentBeaconBlockRoot:sn(Ws,null),number:Qt,timestamp:Qt,nonce:sn(nb),difficulty:Ze,gasLimit:Ze,gasUsed:Ze,stateRoot:sn(Ws,null),receiptsRoot:sn(Ws,null),blobGasUsed:sn(Ze,null),excessBlobGas:sn(Ze,null),miner:sn(In),prevRandao:sn(Ws,null),extraData:nb,baseFeePerGas:sn(Ze)},{prevRandao:["mixHash"]});function xze(t){const e=Sze(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Tne(n)),e}const Ize=F1({transactionIndex:Qt,blockNumber:Qt,transactionHash:Ws,address:In,topics:A_(Ws),data:nb,index:Qt,blockHash:Ws},{index:["logIndex"]});function Nze(t){return Ize(t)}const Tze=F1({to:sn(In,null),from:sn(In,null),contractAddress:sn(In,null),index:Qt,root:sn(Le),gasUsed:Ze,blobGasUsed:sn(Ze,null),logsBloom:sn(nb),blockHash:Ws,hash:Ws,logs:A_(Nze),blockNumber:Qt,cumulativeGasUsed:Ze,effectiveGasPrice:sn(Ze),blobGasPrice:sn(Ze,null),status:sn(Qt),type:sn(Qt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Rze(t){return Tze(t)}function Tne(t){t.to&&Ze(t.to)===kW&&(t.to="0x0000000000000000000000000000000000000000");const e=F1({hash:Ws,index:sn(Qt,void 0),type:n=>n==="0x"||n==null?0:Qt(n),accessList:sn(Rm,null),blobVersionedHashes:sn(A_(Ws,!0),null),authorizationList:sn(A_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:In(n.address),chainId:Ze(n.chainId),nonce:Ze(n.nonce),signature:xo.from(r)}},!1),null),blockHash:sn(Ws,null),blockNumber:sn(Qt,null),transactionIndex:sn(Qt,null),from:In,gasPrice:sn(Ze),maxPriorityFeePerGas:sn(Ze),maxFeePerGas:sn(Ze),maxFeePerBlobGas:sn(Ze,null),gasLimit:Ze,to:sn(In,null),value:Ze,nonce:Qt,data:nb,creates:sn(In,null),chainId:sn(Ze,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=w7e(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=xo.from(t.signature):e.signature=xo.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ze(e.blockHash)===kW&&(e.blockHash=null),e}const Pze="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class j1{constructor(e){te(this,"name");vt(this,{name:e})}clone(){return new j1(this.name)}}class fR extends j1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);te(this,"effectiveBlock");te(this,"txBase");te(this,"txCreate");te(this,"txDataZero");te(this,"txDataNonzero");te(this,"txAccessListStorageKey");te(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Z(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),vt(this,s)}clone(){return new fR(this.effectiveBlock,this)}}class pR extends j1{constructor(n,r){super("org.ethers.plugins.network.Ens");te(this,"address");te(this,"targetNetwork");vt(this,{address:n||Pze,targetNetwork:r??1})}clone(){return new pR(this.address,this.targetNetwork)}}var B_,F_;class Oze extends j1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Q(this,B_);Q(this,F_);$(this,B_,n),$(this,F_,r)}get url(){return C(this,B_)}get processFunc(){return C(this,F_)}clone(){return this}}B_=new WeakMap,F_=new WeakMap;const y2=new Map;var X0,ew,Rh;const Vy=class Vy{constructor(e,n){Q(this,X0);Q(this,ew);Q(this,Rh);$(this,X0,e),$(this,ew,Ze(n)),$(this,Rh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return C(this,X0)}set name(e){$(this,X0,e)}get chainId(){return C(this,ew)}set chainId(e){$(this,ew,Ze(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ze(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ze(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ze(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(C(this,Rh).values())}attachPlugin(e){if(C(this,Rh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,Rh).set(e.name,e.clone()),this}getPlugin(e){return C(this,Rh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Vy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new fR;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=Rm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(kze(),e==null)return Vy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=y2.get(e);if(n)return n();if(typeof e=="bigint")return new Vy("unknown",e);Z(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Z(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Vy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new pR(e.ensAddress,e.ensNetwork)),n}Z(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=y2.get(e);r&&Z(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),y2.set(e,n)}};X0=new WeakMap,ew=new WeakMap,Rh=new WeakMap;let jl=Vy;function DW(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function MW(t){return new Oze(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:DW(a.maxFee,9),maxPriorityFeePerGas:DW(a.maxPriorityFee,9)}}catch(i){ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let LW=!1;function kze(){if(LW)return;LW=!0;function t(e,n,r){const s=function(){const i=new jl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new pR(null,r.ensNetwork)),i.attachPlugin(new fR),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};jl.register(e,s),jl.register(n,s),r.altNames&&r.altNames.forEach(i=>{jl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[MW("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[MW("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function k5(t){return JSON.parse(JSON.stringify(t))}var Fu,Ra,Ph,Sl,tw,ux;class Dze{constructor(e){Q(this,tw);Q(this,Fu);Q(this,Ra);Q(this,Ph);Q(this,Sl);$(this,Fu,e),$(this,Ra,null),$(this,Ph,4e3),$(this,Sl,-2)}get pollingInterval(){return C(this,Ph)}set pollingInterval(e){$(this,Ph,e)}start(){C(this,Ra)||($(this,Ra,C(this,Fu)._setTimeout(he(this,tw,ux).bind(this),C(this,Ph))),he(this,tw,ux).call(this))}stop(){C(this,Ra)&&(C(this,Fu)._clearTimeout(C(this,Ra)),$(this,Ra,null))}pause(e){this.stop(),e&&$(this,Sl,-2)}resume(){this.start()}}Fu=new WeakMap,Ra=new WeakMap,Ph=new WeakMap,Sl=new WeakMap,tw=new WeakSet,ux=async function(){try{const e=await C(this,Fu).getBlockNumber();if(C(this,Sl)===-2){$(this,Sl,e);return}if(e!==C(this,Sl)){for(let n=C(this,Sl)+1;n<=e;n++){if(C(this,Ra)==null)return;await C(this,Fu).emit("block",n)}$(this,Sl,e)}}catch{}C(this,Ra)!=null&&$(this,Ra,C(this,Fu)._setTimeout(he(this,tw,ux).bind(this),C(this,Ph)))};var dg,hg,Oh;class NU{constructor(e){Q(this,dg);Q(this,hg);Q(this,Oh);$(this,dg,e),$(this,Oh,!1),$(this,hg,n=>{this._poll(n,C(this,dg))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){C(this,Oh)||($(this,Oh,!0),C(this,hg).call(this,-2),C(this,dg).on("block",C(this,hg)))}stop(){C(this,Oh)&&($(this,Oh,!1),C(this,dg).off("block",C(this,hg)))}pause(e){this.stop()}resume(){this.start()}}dg=new WeakMap,hg=new WeakMap,Oh=new WeakMap;var nw,ju;class Mze extends NU{constructor(n,r){super(n);Q(this,nw);Q(this,ju);$(this,nw,r),$(this,ju,-2)}pause(n){n&&$(this,ju,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(C(this,nw));s!=null&&(C(this,ju)===-2?$(this,ju,s.number):s.number>C(this,ju)&&(r.emit(C(this,nw),s.number),$(this,ju,s.number)))}}nw=new WeakMap,ju=new WeakMap;var hN;class Lze extends NU{constructor(n,r){super(n);Q(this,hN);$(this,hN,k5(r))}async _poll(n,r){throw new Error("@TODO")}}hN=new WeakMap;var rw;class $ze extends NU{constructor(n,r){super(n);Q(this,rw);$(this,rw,r)}async _poll(n,r){const s=await r.getTransactionReceipt(C(this,rw));s&&r.emit(C(this,rw),s)}}rw=new WeakMap;var Wu,sw,iw,kh,Pa,fN,Rne;class TU{constructor(e,n){Q(this,fN);Q(this,Wu);Q(this,sw);Q(this,iw);Q(this,kh);Q(this,Pa);$(this,Wu,e),$(this,sw,k5(n)),$(this,iw,he(this,fN,Rne).bind(this)),$(this,kh,!1),$(this,Pa,-2)}start(){C(this,kh)||($(this,kh,!0),C(this,Pa)===-2&&C(this,Wu).getBlockNumber().then(e=>{$(this,Pa,e)}),C(this,Wu).on("block",C(this,iw)))}stop(){C(this,kh)&&($(this,kh,!1),C(this,Wu).off("block",C(this,iw)))}pause(e){this.stop(),e&&$(this,Pa,-2)}resume(){this.start()}}Wu=new WeakMap,sw=new WeakMap,iw=new WeakMap,kh=new WeakMap,Pa=new WeakMap,fN=new WeakSet,Rne=async function(e){if(C(this,Pa)===-2)return;const n=k5(C(this,sw));n.fromBlock=C(this,Pa)+1,n.toBlock=e;const r=await C(this,Wu).getLogs(n);if(r.length===0){C(this,Pa)<e-60&&$(this,Pa,e-60);return}for(const s of r)C(this,Wu).emit(C(this,sw),s),$(this,Pa,s.blockNumber)};const Uze=BigInt(2),Bze=10;function mS(t){return t&&typeof t.then=="function"}function dx(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class Pne{constructor(e){te(this,"name");vt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Fze(t){return JSON.parse(JSON.stringify(t))}function D5(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function w2(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(ar(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:dx("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:dx("orphan",n),filter:Fze(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?D5(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{ar(a)?s.push(a):i.push((async()=>{s.push(await Di(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=D5(s.map(a=>a.toLowerCase()))}return{filter:r,tag:dx("event",r),type:"event"}}Z(!1,"unknown ProviderEvent","event",t)}function b2(){return new Date().getTime()}const jze={cacheTimeout:250,pollingInterval:4e3};var ui,Dh,di,ow,Go,fg,Mh,zu,j_,Oa,aw,cw,qt,Uo,M5,L5,Xv,$5,eE,hx;class Wze{constructor(e,n){Q(this,qt);Q(this,ui);Q(this,Dh);Q(this,di);Q(this,ow);Q(this,Go);Q(this,fg);Q(this,Mh);Q(this,zu);Q(this,j_);Q(this,Oa);Q(this,aw);Q(this,cw);if($(this,cw,Object.assign({},jze,n||{})),e==="any")$(this,fg,!0),$(this,Go,null);else if(e){const r=jl.from(e);$(this,fg,!1),$(this,Go,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else $(this,fg,!1),$(this,Go,null);$(this,zu,-1),$(this,Mh,new Map),$(this,ui,new Map),$(this,Dh,new Map),$(this,di,null),$(this,ow,!1),$(this,j_,1),$(this,Oa,new Map),$(this,aw,!1)}get pollingInterval(){return C(this,cw).pollingInterval}get provider(){return this}get plugins(){return Array.from(C(this,Dh).values())}attachPlugin(e){if(C(this,Dh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,Dh).set(e.name,e.connect(this)),this}getPlugin(e){return C(this,Dh).get(e)||null}get disableCcipRead(){return C(this,aw)}set disableCcipRead(e){$(this,aw,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Of(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}ye(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}ye(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new aze(xze(e),this)}_wrapLog(e,n){return new B1(Aze(e),this)}_wrapTransactionReceipt(e,n){return new mne(Rze(e),this)}_wrapTransactionResponse(e,n){return new __(Tne(e),this)}_detectNetwork(){ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Qt(await he(this,qt,Uo).call(this,{method:"getBlockNumber"}),"%response");return C(this,zu)>=0&&$(this,zu,e),e}_getAddress(e){return Di(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(ar(e))return ar(e,32)?e:Pc(e);if(typeof e=="bigint"&&(e=Qt(e,"blockTag")),typeof e=="number")return e>=0?Pc(e):C(this,zu)>=0?Pc(C(this,zu)+e):this.getBlockNumber().then(n=>Pc(n+e));Z(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?D5(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=tN(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Di(n[s],this);mS(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);mS(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(C(this,Go)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw C(this,Go)===s&&$(this,Go,null),i}})();return $(this,Go,s),(await s).clone()}const e=C(this,Go),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(C(this,fg)?(this.emit("network",r,n),C(this,Go)===e&&$(this,Go,Promise.resolve(r))):ye(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await Ii({_block:he(this,qt,$5).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await he(this,qt,Uo).call(this,{method:"getGasPrice"});return Ze(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await he(this,qt,Uo).call(this,{method:"getPriorityFee"});return Ze(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*Uze+c),new TW(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Of(r.url),i=await r.processFunc(n,this,s);return new TW(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return mS(n)&&(n=await n),Ze(await he(this,qt,Uo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await Ii({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await he(this,qt,L5).call(this,he(this,qt,M5).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ze(await he(this,qt,Xv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Qt(await he(this,qt,Xv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Le(await he(this,qt,Xv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Ze(n,"position");return Le(await he(this,qt,Xv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await Ii({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=KI.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await Ii({network:this.getNetwork(),params:he(this,qt,$5).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await Ii({network:this.getNetwork(),params:he(this,qt,Uo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Ii({network:this.getNetwork(),params:he(this,qt,Uo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await he(this,qt,Uo).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Ii({network:this.getNetwork(),result:he(this,qt,Uo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Le(n)}async getLogs(e){let n=this._getFilter(e);mS(n)&&(n=await n);const{network:r,params:s}=await Ii({network:this.getNetwork(),params:he(this,qt,Uo).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await rN.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=In(e);const n=I5(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await rN.getEnsAddress(this),i=await new h0(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===g_)return null;const a=await new h0(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(zs(r,"BAD_DATA")&&r.value==="0x"||zs(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(pr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=C(this,Oa).get(e);n&&(n.timer&&clearTimeout(n.timer),C(this,Oa).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Td(this,j_)._++,s=()=>{C(this,Oa).delete(r),e()};if(this.paused)C(this,Oa).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);C(this,Oa).set(r,{timer:i,func:s,time:b2()})}return r}_forEachSubscriber(e){for(const n of C(this,ui).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Pne(e.type);case"block":{const n=new Dze(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new Mze(this,e.type);case"event":return new TU(this,e.filter);case"transaction":return new $ze(this,e.hash);case"orphan":return new Lze(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of C(this,ui).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),C(this,di)!=null&&n.pause(C(this,di));break}}async on(e,n){const r=await he(this,qt,hx).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,C(this,di)!=null&&r.subscriber.pause(C(this,di))),this}async once(e,n){const r=await he(this,qt,hx).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,C(this,di)!=null&&r.subscriber.pause(C(this,di))),this}async emit(e,...n){const r=await he(this,qt,eE).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new qee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),C(this,ui).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await he(this,qt,eE).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of C(this,ui).values())n+=r.length;return n}async listeners(e){if(e){const r=await he(this,qt,eE).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of C(this,ui).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await he(this,qt,eE).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),C(this,ui).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await he(this,qt,hx).call(this,e);r&&s.stop(),C(this,ui).delete(n)}else for(const[n,{started:r,subscriber:s}]of C(this,ui))r&&s.stop(),C(this,ui).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return C(this,ow)}destroy(){this.removeAllListeners();for(const e of C(this,Oa).keys())this._clearTimeout(e);$(this,ow,!0)}get paused(){return C(this,di)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if($(this,zu,-1),C(this,di)!=null){if(C(this,di)==!!e)return;ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),$(this,di,!!e);for(const n of C(this,Oa).values())n.timer&&clearTimeout(n.timer),n.time=b2()-n.time}resume(){if(C(this,di)!=null){this._forEachSubscriber(e=>e.resume()),$(this,di,null);for(const e of C(this,Oa).values()){let n=e.time;n<0&&(n=0),e.time=b2(),setTimeout(e.func,n)}}}}ui=new WeakMap,Dh=new WeakMap,di=new WeakMap,ow=new WeakMap,Go=new WeakMap,fg=new WeakMap,Mh=new WeakMap,zu=new WeakMap,j_=new WeakMap,Oa=new WeakMap,aw=new WeakMap,cw=new WeakMap,qt=new WeakSet,Uo=async function(e){const n=C(this,cw).cacheTimeout;if(n<0)return await this._perform(e);const r=dx(e.method,e);let s=C(this,Mh).get(r);return s||(s=this._perform(e),C(this,Mh).set(r,s),setTimeout(()=>{C(this,Mh).get(r)===s&&C(this,Mh).delete(r)},n)),await s},M5=async function(e,n,r){ye(r<Bze,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=tN(e);try{return Le(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&uU(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Tr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Di(s.to,this);let c;try{c=Vze(Tr(i.data,4))}catch(d){ye(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ye(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);ye(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Dr([c.selector,qze([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await he(this,qt,M5).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},L5=async function(e){const{value:n}=await Ii({network:this.getNetwork(),value:e});return n},Xv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await he(this,qt,L5).call(this,he(this,qt,Uo).call(this,Object.assign(e,{address:s,blockTag:i})))},$5=async function(e,n){if(ar(e,32))return await he(this,qt,Uo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await he(this,qt,Uo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},eE=async function(e,n){let r=await w2(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await w2({orphan:"drop-log",log:n[0]},this)),C(this,ui).get(r.tag)||null},hx=async function(e){const n=await w2(e,this),r=n.tag;let s=C(this,ui).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},C(this,ui).set(r,s)),s};function zze(t,e){try{const n=U5(t,e);if(n)return qI(n)}catch{}return null}function U5(t,e){if(t==="0x")return null;try{const n=Qt(Tr(t,e,e+32)),r=Qt(Tr(t,n,n+32));return Tr(t,n+32,n+32+r)}catch{}return null}function $W(t){const e=os(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function Hze(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const Gze=new Uint8Array([]);function qze(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(Gze),n+=32;for(let r=0;r<t.length;r++){const s=Yt(t[r]);e[r]=$W(n),e.push($W(s.length)),e.push(Hze(s)),n+=32+Math.ceil(s.length/32)*32}return Dr(e)}const UW="0x0000000000000000000000000000000000000000000000000000000000000000";function Vze(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ye(l0(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Tr(t,0,32);ye(Tr(n,0,12)===Tr(UW,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Tr(n,12);try{const r=[],s=Qt(Tr(t,32,64)),i=Qt(Tr(t,s,s+32)),o=Tr(t,s+32);for(let a=0;a<i;a++){const c=zze(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=U5(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ye(Tr(t,100,128)===Tr(UW,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Tr(t,96,100);try{const r=U5(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function sp(t,e){if(t.provider)return t.provider;ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function BW(t,e){let n=tN(e);if(n.to!=null&&(n.to=Di(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Di(r,t)]).then(([s,i])=>(Z(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await Ii(n)}class Kze{constructor(e){te(this,"provider");vt(this,{provider:e||null})}async getNonce(e){return sp(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await BW(this,e)}async populateTransaction(e){const n=sp(this,"populateTransaction"),r=await BW(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Ze(r.chainId);Z(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Ii(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await sp(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return sp(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return sp(this,"call").call(await this.populateCall(e))}async resolveName(e){return await sp(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=sp(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=KI.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Yze(t){return JSON.parse(JSON.stringify(t))}var Si,xl,pg,Lh,gg,lw,Mf,B5,F5;class One{constructor(e){Q(this,Mf);Q(this,Si);Q(this,xl);Q(this,pg);Q(this,Lh);Q(this,gg);Q(this,lw);$(this,Si,e),$(this,xl,null),$(this,pg,he(this,Mf,B5).bind(this)),$(this,Lh,!1),$(this,gg,null),$(this,lw,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){C(this,Lh)||($(this,Lh,!0),he(this,Mf,B5).call(this,-2))}stop(){C(this,Lh)&&($(this,Lh,!1),$(this,lw,!0),he(this,Mf,F5).call(this),C(this,Si).off("block",C(this,pg)))}pause(e){e&&he(this,Mf,F5).call(this),C(this,Si).off("block",C(this,pg))}resume(){this.start()}}Si=new WeakMap,xl=new WeakMap,pg=new WeakMap,Lh=new WeakMap,gg=new WeakMap,lw=new WeakMap,Mf=new WeakSet,B5=async function(e){try{C(this,xl)==null&&$(this,xl,this._subscribe(C(this,Si)));let n=null;try{n=await C(this,xl)}catch(i){if(!zs(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){$(this,xl,null),C(this,Si)._recoverSubscriber(this,this._recover(C(this,Si)));return}const r=await C(this,Si).getNetwork();if(C(this,gg)||$(this,gg,r),C(this,gg).chainId!==r.chainId)throw new Error("chaid changed");if(C(this,lw))return;const s=await C(this,Si).send("eth_getFilterChanges",[n]);await this._emitResults(C(this,Si),s)}catch(n){console.log("@TODO",n)}C(this,Si).once("block",C(this,pg))},F5=function(){const e=C(this,xl);e&&($(this,xl,null),e.then(n=>{C(this,Si).destroyed||C(this,Si).send("eth_uninstallFilter",[n])}))};var mg;class Qze extends One{constructor(n,r){super(n);Q(this,mg);$(this,mg,Yze(r))}_recover(n){return new TU(n,C(this,mg))}async _subscribe(n){return await n.send("eth_newFilter",[C(this,mg)])}async _emitResults(n,r){for(const s of r)n.emit(C(this,mg),n._wrapLog(s,n._network))}}mg=new WeakMap;class Jze extends One{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const Zze="bigint,boolean,function,number,string,symbol".split(/,/g);function fx(t){if(t==null||Zze.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(fx);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function Xze(t){return new Promise(e=>{setTimeout(e,t)})}function fy(t){return t&&t.toLowerCase()}function FW(t){return t&&typeof t.pollingInterval=="number"}const kne={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class v2 extends Kze{constructor(n,r){super(n);te(this,"address");r=In(r),vt(this,{address:r})}connect(n){ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=fx(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Di(o,this.provider);Z(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Di(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(zs(u,"CANCELLED")||zs(u,"BAD_DATA")||zs(u,"NETWORK_ERROR")||zs(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(zs(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",pr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=fx(n);if(r.from){const i=await Di(r.from,this.provider);Z(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?ad(n):n;return await this.provider.send("personal_sign",[Le(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=fx(s),o=await eN.resolveNames(n,r,i,async a=>{const c=await Di(a);return Z(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(eN.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?ad(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Le(r)])}}var yg,uw,Hu,Il,Ic,ka,co,W_,j5;class eHe extends Wze{constructor(n,r){super(n,r);Q(this,W_);Q(this,yg);Q(this,uw);Q(this,Hu);Q(this,Il);Q(this,Ic);Q(this,ka);Q(this,co);$(this,uw,1),$(this,yg,Object.assign({},kne,r||{})),$(this,Hu,[]),$(this,Il,null),$(this,ka,null),$(this,co,null);{let i=null;const o=new Promise(a=>{i=a});$(this,Ic,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Z(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&$(this,ka,jl.from(n))):s&&(Z(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),$(this,ka,s))}_getOption(n){return C(this,yg)[n]}get _network(){return ye(C(this,ka),"network is not available yet","NETWORK_ERROR"),C(this,ka)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Ze(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(C(this,ka))return C(this,ka)}else return n;return C(this,co)?await C(this,co):this.ready?($(this,co,(async()=>{try{const r=jl.from(Ze(await this.send("eth_chainId",[])));return $(this,co,null),r}catch(r){throw $(this,co,null),r}})()),await C(this,co)):($(this,co,(async()=>{const r={id:Td(this,uw)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],$(this,co,null)}catch(i){throw $(this,co,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return jl.from(Ze(s.result));throw this.getRpcError(r,s)})()),await C(this,co))}_start(){C(this,Ic)==null||C(this,Ic).resolve==null||(C(this,Ic).resolve(),$(this,Ic,null),(async()=>{for(;C(this,ka)==null&&!this.destroyed;)try{$(this,ka,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",pr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await Xze(1e3)}he(this,W_,j5).call(this)})())}async _waitUntilReady(){if(C(this,Ic)!=null)return await C(this,Ic).promise}_getSubscriber(n){return n.type==="pending"?new Jze(this):n.type==="event"?this._getOption("polling")?new TU(this,n.filter):new Qze(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Pne("orphan"):super._getSubscriber(n)}get ready(){return C(this,Ic)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Pc(Ze(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Le(n[s]))}),n.accessList&&(r.accessList=Rm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Mte(s);return{address:i.address,nonce:Pc(i.nonce),chainId:Pc(i.chainId),yParity:Pc(i.signature.yParity),r:Pc(i.signature.r),s:Pc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[fy(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[fy(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[fy(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[fy(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(fy):n.filter.address=fy(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return pr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return pr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=W5(i),l=C_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(nHe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return pr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return pr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return pr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return pr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return pr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?pr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):pr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Td(this,uw)._++,i=new Promise((o,a)=>{C(this,Hu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return he(this,W_,j5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new v2(this,i[n])}const{accounts:s}=await Ii({network:this.getNetwork(),accounts:r});n=In(n);for(const i of s)if(In(i)===n)return new v2(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new v2(this,r))}destroy(){C(this,Il)&&(clearTimeout(C(this,Il)),$(this,Il,null));for(const{payload:n,reject:r}of C(this,Hu))r(pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));$(this,Hu,[]),super.destroy()}}yg=new WeakMap,uw=new WeakMap,Hu=new WeakMap,Il=new WeakMap,Ic=new WeakMap,ka=new WeakMap,co=new WeakMap,W_=new WeakSet,j5=function(){if(C(this,Il))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");$(this,Il,setTimeout(()=>{$(this,Il,null);const r=C(this,Hu);for($(this,Hu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==C(this,yg).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>C(this,yg).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=pr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var $h;class tHe extends eHe{constructor(n,r){super(n,r);Q(this,$h);let s=this._getOption("pollingInterval");s==null&&(s=kne.pollingInterval),$(this,$h,s)}_getSubscriber(n){const r=super._getSubscriber(n);return FW(r)&&(r.pollingInterval=C(this,$h)),r}get pollingInterval(){return C(this,$h)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");$(this,$h,n),this._forEachSubscriber(r=>{FW(r)&&(r.pollingInterval=C(this,$h))})}}$h=new WeakMap;function W5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&ar(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=W5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return W5(JSON.parse(t))}catch{}return null}function z5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)z5(t[n],e);if(typeof t=="string")try{return z5(JSON.parse(t),e)}catch{}}}function nHe(t){const e=[];return z5(t,e),e}var dw,hw;const xp=class xp extends tHe{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Z(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);Q(this,dw);Q(this,hw);$(this,hw,null),s&&s.providerInfo&&$(this,hw,s.providerInfo),$(this,dw,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return C(this,hw)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Z(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await C(this,dw).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await C(this,dw).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new xp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new xp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof xp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new xp(p,void 0,{providerInfo:g}))}else a(pr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new xp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};dw=new WeakMap,hw=new WeakMap;let H5=xp;const yr={NATIVE_DMT:{symbol:"DMT",name:"Native DMT",address:"0x0000000000000000000000000000000000000000",decimals:18,logo:"/images/dmt-logo.png",isNative:!0,color:"#FF6B35"},DMT:{symbol:"DMT",name:"DMT Token",address:"0x754cDAd6f5821077d6915004Be2cE05f93d176f8",decimals:18,logo:"/images/dmt-logo.png",isNative:!1,color:"#FF6B35"},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png",isNative:!1,color:"#FFD700"},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:6,logo:"/images/lawb-logo.png",isNative:!1,color:"#8B4513"},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png",isNative:!1,color:"#00FF00"}},jW={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},Gh={testnet:{chainId:1992},mainnet:{chainId:1996}},RU=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Ms=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function Dne(t,e){return yr[t].address}function Mne(t,e){const n=tc(),r=yr[t],s=r.isNative||!1,i=n===Gh.mainnet.chainId,o=n===Gh.testnet.chainId;(t==="DMT"||t==="NATIVE_DMT")&&console.log(`[CHAIN DEBUG] useTokenBalance for ${t}:`,{chainId:n,expectedMainnet:Gh.mainnet.chainId,expectedTestnet:Gh.testnet.chainId,isOnSankoMainnet:i,isOnSankoTestnet:o,address:!!e,isNative:s});const a=!!e&&i,{data:c,isLoading:l,error:u}=cAe({address:e,query:{enabled:a&&s}}),{data:d,isLoading:h,error:f}=xE({address:r.address,abi:RU,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:a&&!s}}),p=s?c==null?void 0:c.value:d,g=s?l:h,w=s?u:f;return console.log(`[TOKEN BALANCE QUERY] ${t}:`,{queryEnabled:a,address:!!e,isOnSankoMainnet:i,isNative:s,contractCall:a?s?"native balance":`balanceOf(${e})`:"DISABLED"}),console.log(`[TOKEN BALANCE] ${t}:`,{tokenAddress:r.address,userAddress:e,chainId:n,isOnSankoMainnet:i,isOnSankoTestnet:o,isNative:s,balance:p==null?void 0:p.toString(),balanceFormatted:p?Number(p)/Math.pow(10,r.decimals):0,isLoading:g,error:w==null?void 0:w.message,errorDetails:w,queryEnabled:!!e&&i}),{balance:p?Number(p)/Math.pow(10,r.decimals):0,balanceWei:p||BigInt(0),isLoading:g,error:w,isOnSankoMainnet:i,isOnSankoTestnet:o}}function rHe(t,e,n){const r=tc(),s=Dne(t),i=r===Gh.mainnet.chainId,o=r===Gh.testnet.chainId,{data:a,isLoading:c,error:l}=xE({address:s,abi:RU,functionName:"allowance",args:n&&e?[n,e]:void 0,query:{enabled:!!n&&!!e&&i}});return{allowance:a||BigInt(0),allowanceFormatted:a?Number(a)/Math.pow(10,yr[t].decimals):0,isLoading:c,error:l,isOnSankoMainnet:i,isOnSankoTestnet:o}}function sHe(){const{writeContract:t,data:e,isPending:n,error:r}=Wv(),{isLoading:s}=jv({hash:e});return tc(),{approve:(o,a,c)=>{const l=Dne(o);t({address:l,abi:RU,functionName:"approve",args:[a,c]})},isPending:n||s,error:r,hash:e}}const iHe=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=Ab(),{balance:o,isOnSankoMainnet:a,isOnSankoTestnet:c}=Mne(t,i),[l,u]=D.useState(!1),d=f=>{e(f),u(!1)},h=f=>{const p=yr[f];return p.isNative?`${p.symbol} (Native)`:p.symbol};return m.jsxs("div",{style:{marginBottom:"10px"},children:[m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px",color:"#ff0000"},children:"Token:"}),m.jsxs("div",{style:{position:"relative"},children:[m.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#000000",color:"#ff0000",cursor:s?"not-allowed":"pointer",minWidth:"120px",textAlign:"left"},children:[h(t),m.jsx("span",{style:{float:"right"},children:""})]}),l&&!s&&m.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#000000",border:"2px outset #fff",zIndex:10,minWidth:"120px"},children:Object.entries(yr).map(([f,p])=>m.jsx("div",{onClick:()=>d(f),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #333",fontSize:"12px",color:"#ff0000",background:"#000000"},onMouseEnter:g=>g.currentTarget.style.background="#333",onMouseLeave:g=>g.currentTarget.style.background="#000000",children:h(f)},f))})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px",color:"#ff0000"},children:"Amount:"}),m.jsx("input",{type:"number",value:n,onChange:f=>r(Number(f.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#000000",color:"#ff0000",width:"100px"}}),m.jsxs("span",{style:{color:"#ff0000",fontSize:"12px"},children:["Balance: ",a?`${o.toFixed(2)} ${yr[t].symbol}`:"Connect to Sanko Mainnet",yr[t].isNative&&m.jsx("span",{style:{color:"#ff0000",fontWeight:"bold"},children:" (Native)"})]})]}),c&&m.jsx("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet - tokens are not available on testnet"}),!a&&!c&&m.jsx("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet to see token balances"}),n>o&&a&&m.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",yr[t].symbol,yr[t].isNative&&m.jsx("span",{children:" (Native)"})]}),o===0&&a&&m.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:[" You have 0 ",yr[t].symbol,yr[t].isNative&&m.jsx("span",{children:" (Native)"}),". Get tokens from ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000"},children:"Sanko Bridge"})]})]})},oHe=t=>t===Gh.testnet.chainId?jW.testnet.chess:jW.mainnet.chess,an={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},E2={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},vu=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],aHe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function cHe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function WW(t,e){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const n=new H5(window.ethereum);return await new h0(e,Ms,n).playerToGame(t)}catch(n){return console.error("Error fetching invite code from contract:",n),null}}const Lne=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s,chainId:i}=Ab(),o=oHe(i||Gh.mainnet.chainId),[a,c]=D.useState(""),[l,u]=D.useState(""),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),{writeContract:v,isPending:A,data:_}=Wv(),{writeContract:I,isPending:x,data:N,error:S}=Wv(),{writeContract:O,isPending:P,data:F}=Wv(),{writeContract:q,isPending:z,data:T}=Wv(),{approve:R,isPending:U,error:k,hash:M}=sHe(),j=gAe(),{isLoading:Y}=jv({hash:_}),{isLoading:ne,data:le}=jv({hash:N}),{isLoading:oe}=jv({hash:F}),{isLoading:ae}=jv({hash:T});D.useEffect(()=>{T&&!ae&&(console.log("[REFUND] Transaction completed successfully"),dt("Match refunded successfully! Your wager has been returned."),(async()=>{try{let B=Ne;if(!B&&r)try{const W=await WW(r,o);W&&W!=="0x000000000000"&&(B=W)}catch(W){console.error("[REFUND] Error getting invite code from contract:",W)}B?(console.log("[REFUND] Updating Firebase for cancelled game:",B),await ai.updateGame(B,{game_state:"cancelled",red_player:"0x0000000000000000000000000000000000000000"}),console.log("[REFUND] Firebase updated successfully")):console.warn("[REFUND] Could not determine invite code for Firebase update")}catch(B){console.error("[REFUND] Error updating Firebase after refund:",B)}_n(an.LOBBY),$e(""),Qn(null),Xe(0,"refund completed"),ds(null),Dm()})())},[T,ae]);const{data:ue}=xE({address:o,abi:Ms,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:tt}=xE({address:o,abi:Ms,functionName:"games",args:ue?[ue]:void 0,query:{enabled:!!ue&&ue!=="0x000000000000"}}),[Ne,$e]=D.useState(""),[st,Ot]=D.useState(!1),{data:Xt,error:X,isLoading:ce}=xE({address:o,abi:Ms,functionName:"games",args:Ne?[Ne]:void 0,query:{enabled:!!Ne&&Ne!=="0x000000000000"&&st}});D.useEffect(()=>{console.log("[LOBBY_CONTRACT] lobbyGameContractData changed:",Xt),console.log("[LOBBY_CONTRACT] lobbyGameContractError:",X),console.log("[LOBBY_CONTRACT] lobbyGameContractLoading:",ce),console.log("[LOBBY_CONTRACT] isJoiningFromLobby:",st),console.log("[LOBBY_CONTRACT] inviteCode:",Ne),console.log("[LOBBY_CONTRACT] Contract read enabled:",!!Ne&&Ne!=="0x000000000000"&&st)},[Xt,X,ce,st,Ne]);const Ce=()=>(console.log("[HELPER] getCurrentContractGameData called"),console.log("[HELPER] isJoiningFromLobby:",st),console.log("[HELPER] lobbyGameContractData:",Xt),console.log("[HELPER] contractGameData:",tt),st&&Xt?(console.log("[HELPER] Returning lobbyGameContractData"),Xt):(console.log("[HELPER] Returning contractGameData"),tt)),me=(L,B)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${L}" from ${B}`),Ne&&!L&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${Ne}" to "${L}" from ${B}`),$e(L)},Ee=(L,B="NATIVE_DMT")=>{var V;const W=((V=yr[B])==null?void 0:V.decimals)||18;return parseFloat(L.toString())/Math.pow(10,W)},Xe=(L,B)=>{console.log(`[WAGER_DEBUG] Setting wager to ${L} TDMT from ${B}`),Om!==L&&console.log(`[WAGER_DEBUG] Wager changed from ${Om} to ${L} TDMT`),q1(L)},[it,It]=D.useState("moves"),St=async()=>{if(!Ne||!r){alert("No match to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",Ne);const L=await ai.getGame(Ne);if(!L||L.blue_player!==r){alert("Only the match creator can refund the match");return}if(L.red_player&&L.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund match after opponent has joined");return}await q({address:o,abi:Ms,functionName:"cancelGame",args:[Ne]}),console.log("[REFUND] Cancel game transaction submitted")}catch(L){console.error("[REFUND] Error refunding game:",L),alert("Failed to refund match. Please try again.")}},Kn=async()=>{if(!r||!en){console.error("[CLAIM] Missing required data for claiming winnings");return}let L=Ne;if(!L&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const B=await WW(r,o);B&&B!=="0x000000000000"&&(L=B,console.log("[CLAIM] Retrieved invite code from contract:",L))}catch(B){console.error("[CLAIM] Error getting invite code from contract:",B)}}if(!L){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine match invite code. Please try refreshing the page.");return}try{w(!0),console.log("[CLAIM] Claiming winnings for game:",L,"Player:",en,"Address:",r);const B=await ai.getGame(L);if(!B){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",B);let W=null;B.winner&&(B.blue_player||B.red_player)&&(W=B.winner==="blue"?B.blue_player:B.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:B.winner,winnerAddress:W}));const V=Ce();if(!W&&V)if(B.winner&&(B.winner==="blue"||B.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let Se,xe,ke,_e,gt,Ft;if(Array.isArray(V))[Se,xe,ke,_e,gt,Ft]=V;else{console.error("[CLAIM] Unexpected contract data format:",V),alert("Failed to verify winner. Please try again.");return}W=B.winner==="blue"?Se:xe,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:B.winner,winnerAddress:W,player1:Se,player2:xe})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",V);let Se,xe,ke,_e,gt,Ft;if(Array.isArray(V))[Se,xe,ke,_e,gt,Ft]=V;else{console.error("[CLAIM] Unexpected contract data format:",V),alert("Failed to verify winner. Please try again.");return}const Hn=String(_e);if(Hn.startsWith("0x"))W=Hn;else if(Hn==="blue"||Hn==="red")W=Hn==="blue"?Se:xe;else if(Hn==="1"||Hn==="2")W=Hn==="1"?Se:xe;else{console.error("[CLAIM] Unknown winner format:",_e,"as string:",Hn),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:_e,winnerAddress:W,player1:Se,player2:xe,winnerType:typeof _e,winnerValue:_e,address:r,addressType:typeof r})}if(!W){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:W,address:r,playerColor:en,winnerAddressType:typeof W,addressType:typeof r,addressesMatch:W===r,winnerAddressLength:W==null?void 0:W.length,addressLength:r==null?void 0:r.length}),W!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:W,address:r,playerColor:en}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM]  Winner verification passed! Proceeding with contract call...");let re=L;if(!re&&V){console.log("[CLAIM] Using invite code from contract data as fallback");let Se,xe,ke,_e,gt,Ft;if(Array.isArray(V))[Se,xe,ke,_e,gt,Ft]=V,re=gt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",V),alert("Failed to get invite code. Please try again.");return}}if(!re||typeof re!="string"){console.error("[CLAIM] Invalid invite code format:",re),alert("Invalid invite code format.");return}let ge=re;if(re.startsWith("0x")||(ge="0x"+re),ge.length!==14){console.error("[CLAIM] Invalid invite code length for contract claim:",ge,"length:",ge.length),alert("Invalid invite code length for contract claim.");return}console.log("[CLAIM] Formatted invite code:",ge),console.log("[CLAIM] Original invite code:",re),console.log("[CLAIM] Winner address:",W),console.log("[CLAIM] Calling contract with:",{inviteCode:re,winner:W,functionName:"endGame",inviteCodeSource:B.invite_code?"Firebase":"Contract",inviteCodeLength:re.length,inviteCodeValid:re.startsWith("0x")&&re.length===14,winnerAddressValid:W.startsWith("0x")&&W.length===42}),console.log("[CLAIM] About to call writeEndGame with:",{address:o,functionName:"endGame",args:[ge,W],abiLength:Ms.length,chainId:i,isConnected:s});try{O({address:o,abi:Ms,functionName:"endGame",args:[ge,W]}),console.log("[CLAIM] Contract call initiated successfully"),P?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:P,endGameHash:F})}catch(Se){console.error("[CLAIM] Error calling writeEndGame:",Se),alert("Failed to initiate contract call. Please try again.");return}}catch(B){console.error("[CLAIM] Error claiming winnings:",B),alert("Failed to claim winnings. Please try again.")}finally{w(!1)}},[Tt,Hr]=D.useState(vu),[jt,zn]=D.useState("blue"),[Sr,qi]=D.useState(null),[el,zf]=D.useState([]),[Ub,$U]=D.useState([]),[G1,dt]=D.useState("Waiting for opponent..."),[us,_n]=D.useState(an.LOBBY),[Yn,Bb]=D.useState(!1),[en,Qn]=D.useState(null),[fa,ds]=D.useState(null),[Om,q1]=D.useState(0),[Fb,V1]=D.useState([]),[K1,bi]=D.useState(!1),[Hf,hs]=D.useState(!1),[Gr,Po]=D.useState(null),[Jn,oc]=D.useState(null),[km,pa]=D.useState(!1),[mR,yR]=D.useState(""),[ti,wR]=D.useState(0),[$r,Y1]=D.useState("NATIVE_DMT"),[Q1,jb]=D.useState("NATIVE_DMT");D.useEffect(()=>{console.log("[JOIN_TRANSACTION] joinGameHash changed:",N),console.log("[JOIN_TRANSACTION] isJoiningGameContract:",x),console.log("[JOIN_TRANSACTION] joinGameError:",S),console.log("[JOIN_TRANSACTION] Full join transaction state:",{joinGameHash:N,isJoiningGameContract:x,joinGameError:S,pendingJoinGameData:Jn})},[N,x,S,Jn]),D.useEffect(()=>{!U&&km&&Ne&&st&&!N&&!x&&(console.log("[AUTO_JOIN] Token approval completed, attempting to auto-join"),console.log("[AUTO_JOIN] isApproving:",U),console.log("[AUTO_JOIN] waitingForApproval:",km),console.log("[AUTO_JOIN] inviteCode:",Ne),console.log("[AUTO_JOIN] isJoiningFromLobby:",st),console.log("[AUTO_JOIN] joinGameHash:",N),console.log("[AUTO_JOIN] isJoiningGameContract:",x),pa(!1),console.log("[AUTO_JOIN] Calling joinGame automatically"),zU(Ne))},[U,km,Ne,st,N,x]),Mne($r,r);const Wb=BigInt(Math.floor(ti*Math.pow(10,yr[$r].decimals))),{allowance:bR}=rHe($r,r,o),[J1]=D.useState(!0),[Id,Z1]=D.useState(null),[UU,vR]=D.useState(0),[zb,tl]=D.useState(Date.now()),Hb=36e5,[BU,X1]=D.useState(!1),[eA,Gb]=D.useState(null),[tA,Gf]=D.useState(!1),[qb,Vb]=D.useState(null),[qf,ni]=D.useState(!1),[ac,ga]=D.useState(!1),[Nd,G]=D.useState("moves"),[K,ie]=D.useState(!0),[se,ee]=D.useState(null),be=async()=>{if(!Ne||!en)return;console.log("[TIMEOUT] Handling timeout for game:",Ne);const L=jt==="blue"?"red":"blue",B=Ce(),W=L==="blue"?B==null?void 0:B[0]:B==null?void 0:B[1];W&&(console.log("[TIMEOUT] Ending game with winner:",W),O({address:o,abi:Ms,functionName:"endGame",args:[Ne,W]}),dt(`Game ended due to timeout. ${L==="red"?"Red":"Blue"} wins!`),_n(an.FINISHED))},Oe=D.useCallback(()=>{Id&&clearTimeout(Id);const L=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),be()},Hb);Z1(L),tl(Date.now())},[be]),et=D.useCallback(()=>{Id&&(clearTimeout(Id),Z1(null))},[]),[at,An]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[fr,vn]=D.useState([]),[au,Hne]=D.useState(null),Vf=D.useRef(null),Kf=D.useRef(null),FU=D.useRef(r);D.useEffect(()=>{FU.current=r},[r]),D.useEffect(()=>{N&&!ne&&Jn&&(console.log("[CONTRACT] Join transaction confirmed:",N),r===Jn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),Qn("red"),ds(Jn.gameData.blue_player)),ai.updateGame(Jn.inviteCode,{...Jn.gameData,red_player:Jn.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),_n(an.ACTIVE),ga(!0),dt("Game started!"),$e(Jn.inviteCode),Yf(Jn.inviteCode),console.log("[CONTRACT] Clearing pending join data"),oc(null),Ot(!1)}).catch(L=>{console.error("Error updating game in database:",L),dt("Joined game on contract but failed to update database"),oc(null)}))},[N,ne,Jn,r]),D.useEffect(()=>{F&&!oe&&(console.log("[CLAIM] End game transaction confirmed:",F),dt("Winnings claimed successfully! Transaction hash: "+F.slice(0,10)+"..."),w(!1))},[F,oe]),D.useEffect(()=>{P===!1&&g&&!F&&(console.log("[CLAIM] End game transaction rejected or failed"),dt("Claim transaction was rejected. Please try again."),w(!1))},[P,g,F]),D.useEffect(()=>{if(_&&!Y){console.log("[CONTRACT] Create game transaction confirmed:",_);let L=Gr;if(!L&&j){console.log("[CREATE DEBUG] No pendingGameData, attempting to reconstruct game data");const B=(Gr==null?void 0:Gr.invite_code)||_;console.log("[CREATE DEBUG] Using invite code for contract read:",B),j.readContract({address:o,abi:Ms,functionName:"games",args:[B]}).then(W=>{var V;if(W&&Array.isArray(W)&&W[0]!=="0x0000000000000000000000000000000000000000"){const re={invite_code:B,game_title:`Chess Game ${B.slice(-6)}`,bet_amount:((V=W[2])==null?void 0:V.toString())||"0",bet_token:W[1]||"",blue_player:W[0]||"",red_player:"0x0000000000000000000000000000000000000000",game_state:"waiting_for_join",board:{positions:Kb(vu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE DEBUG] Reconstructed game data:",re),ai.createGame(re).then(()=>{console.log("[FIREBASE] Game created successfully with reconstructed data"),$e(re.invite_code),Qn("blue"),Xe(ti,"create game success"),_n(an.WAITING),dt("Waiting for opponent to join..."),Yf(re.invite_code),setTimeout(()=>{Dm()},1e3),Po(null),bi(!1),hs(!1)}).catch(ge=>{console.error("[FIREBASE] Error creating game with reconstructed data:",ge),dt("Transaction confirmed but failed to create game in database"),Po(null),bi(!1),hs(!1)})}}).catch(W=>{console.error("[CREATE DEBUG] Error reconstructing game data:",W),dt("Transaction confirmed but game data not available"),Po(null),bi(!1),hs(!1)});return}if(L){const B={...L,game_state:"waiting_for_join"};ai.createGame(B).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),$e(L.invite_code),Qn("blue"),Xe(ti,"create game success"),_n(an.WAITING),dt("Waiting for opponent to join..."),Yf(L.invite_code),setTimeout(()=>{Dm()},1e3),Po(null),bi(!1),hs(!1)}).catch(W=>{console.error("[FIREBASE] Error creating game after transaction:",W),dt("Transaction confirmed but failed to create game in database"),Po(null),bi(!1),hs(!1)})}else console.log("[CREATE DEBUG] No game data available for Firebase creation"),dt("Transaction confirmed but game data not available"),Po(null),bi(!1),hs(!1)}},[_,Y,Gr,ti]),D.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",Gr)},[Gr]),D.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",Jn),Jn){const L=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),oc(null)},3e4);return()=>clearTimeout(L)}},[Jn]),D.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",A),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",Gr),console.log("[CREATE REJECTION DEBUG] - createGameHash:",_),console.log("[CREATE REJECTION DEBUG] - condition:",A===!1&&Gr&&!_),A===!1&&Gr&&!_&&(console.log("[CONTRACT] Create game transaction rejected or failed"),dt("Transaction was rejected. Please try again."),Po(null),bi(!1),hs(!1))},[A,Gr,_]),D.useEffect(()=>{x===!1&&Jn&&!N&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",x),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",Jn),console.log("[CONTRACT] Rejection details - joinGameHash:",N),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",ue),dt("Transaction was rejected. Please try again."),me("","join transaction rejection"),Qn(null),Xe(0,"join transaction rejection"),ds(null),_n(an.LOBBY),dt(""),oc(null),Ot(!1))},[x,Jn,N,r,ue]),D.useEffect(()=>{if(r&&ue!==void 0&&!y){const L=Ce();(ue!=="0x000000000000"&&L||ue==="0x000000000000")&&Gne()}},[r,ue,tt,Xt,y]),D.useEffect(()=>{b(!1)},[r]),D.useEffect(()=>{us===an.ACTIVE&&en?(console.log("[TIMEOUT] Starting timeout timer for active game"),Oe()):et()},[us,en]),D.useEffect(()=>{us===an.ACTIVE&&Ub.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),Oe())},[Ub,us]),D.useEffect(()=>{if(us===an.ACTIVE&&Id){const L=setInterval(()=>{const B=Date.now()-zb,W=Math.max(0,Hb-B);vR(Math.ceil(W/1e3))},1e3);return()=>clearInterval(L)}},[us,Id,zb]),D.useEffect(()=>()=>{Kne(),et(),Vf.current&&Vf.current(),Kf.current&&clearTimeout(Kf.current)},[]);const Gne=async()=>{if(r)try{console.log("[GAME_STATE] Checking for active games for player:",r);const L=Ce();if(ue&&ue!=="0x000000000000"&&!L){console.log("[GAME_STATE] Waiting for contract data...");return}if(ue&&ue!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",ue),L)){let V,re,ge,Se,xe,ke;if(Array.isArray(L))[V,re,ge,Se,xe,ke]=L;else{console.error("[GAME_STATE] Unexpected contract data format:",L);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:V,player2:re,isActive:ge,winner:Se,inviteCode:xe,wagerAmount:ke}),!xe){console.error("[GAME_STATE] Invalid invite code:",xe);return}const _e=V===r?"blue":"red",gt=V===r?re:V;console.log("[GAME_STATE] Player is",_e,"opponent is",gt);const Ft=await ai.getGame(xe);if(Ft){if(console.log("[GAME_STATE] Found game in Firebase:",Ft),$e(xe),Qn(_e),Xe(Ee(Ft.bet_amount,Ft.bet_token||"DMT"),"checkPlayerGameState Firebase"),ds(gt),Ft.game_state==="waiting_for_join")_n(an.WAITING),dt("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(Ft.game_state==="active"||Ft.game_state==="test_update"){if(_n(an.ACTIVE),ga(!0),dt("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",Ft.game_state,")"),Ft.board){const Hn=Ft.board;Hr(Mm(Hn)),zn(Ft.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",Ft.game_state,"- treating as active"),_n(an.ACTIVE),ga(!0),dt("Game in progress"),Ft.board){const Hn=Ft.board;Hr(Mm(Hn)),zn(Ft.current_player||"blue")}Yf(xe),b(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",us),console.log("[GAME_STATE] Game state from Firebase:",Ft.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase - waiting for transaction confirmation"),console.log("[GAME_STATE] This prevents ghost games from failed transactions");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const W=(await ai.getActiveGames()).filter(V=>V.chain==="sanko"&&(V.blue_player===r||V.red_player===r)&&["waiting","active"].includes(V.game_state));if(W&&W.length>0){const V=W[0];if(console.log("[GAME_STATE] Found active game in Firebase:",V),$e(V.invite_code),Qn(V.blue_player===r?"blue":"red"),Xe(Ee(V.bet_amount,V.bet_token||"DMT"),"checkPlayerGameState fallback"),jb(V.bet_token||"DMT"),ds(V.blue_player===r?V.red_player:V.blue_player),V.game_state==="waiting")_n(an.WAITING),dt("Waiting for opponent to join...");else if(V.game_state==="active"||V.game_state==="test_update"){if(_n(an.ACTIVE),ga(!0),dt("Game in progress"),V.board){const re=V.board;Hr(Mm(re)),zn(V.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",V.game_state,"- treating as active"),_n(an.ACTIVE),dt("Game in progress"),V.board){const re=V.board;Hr(Mm(re)),zn(V.current_player||"blue")}Yf(V.invite_code),b(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),_n(an.LOBBY),bi(!1),b(!0)}catch(L){console.error("[GAME_STATE] Error in checkPlayerGameState:",L)}},nA=async()=>{try{await jee();const L=await Fee(20);vn(L)}catch(L){console.error("Error loading leaderboard:",L)}},jU=async L=>{if(console.log("[SCORE] updateScore called with:",L,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",rm(r)),await GI(r,L)?console.log("[SCORE] Successfully updated score for:",rm(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(B){console.error("[SCORE] Error updating score:",B)}},WU=async(L,B,W)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:L,bluePlayer:B,redPlayer:W}),!B||!W){console.error("[SCORE] Missing player addresses from contract");return}await _je(L,B,W)?(console.log("[SCORE] Successfully updated both players scores"),await nA()):console.error("[SCORE] Failed to update both players scores")}catch(V){console.error("[SCORE] Error updating both players scores:",V)}},Dm=async()=>{try{console.log("[LOBBY] Loading open games...");const L=await ai.getOpenGames();console.log("[LOBBY] Loaded open games:",L),console.log("[LOBBY] Number of open games:",L.length),V1(L)}catch(L){console.error("[LOBBY] Error loading open games:",L)}},qne=async()=>{if(!r)return!1;try{return yr[$r].isNative?(console.log("[APPROVAL] Native token detected, skipping approval"),!0):bR<Wb?(console.log("[APPROVAL] Token approval needed, calling approveToken"),new Promise(B=>{let W=0;const V=60,re=()=>{if(W++,k){console.error("[APPROVAL] User denied approval or error occurred:",k),dt("Token approval was cancelled. Please try again."),B(!1);return}if(M&&!U){console.log("[APPROVAL] Token approval successful, proceeding with game creation"),B(!0);return}if(W>=V){console.error("[APPROVAL] Timeout waiting for approval result"),dt("Approval timeout. Please try again."),B(!1);return}setTimeout(re,500)};R($r,o,Wb),re()})):(console.log("[APPROVAL] Token already approved, proceeding with game creation"),!0)}catch(L){return console.error("[APPROVAL] Error checking approval:",L),dt("Failed to check token approval. Please try again."),!1}},Vne=async()=>{if(!(!r||ti<=0)){hs(!0);try{const L=yr[$r],B=BigInt(Math.floor(ti*Math.pow(10,L.decimals)));if(j)try{let ke;if(L.isNative?ke=await j.getBalance({address:r}):ke=await j.readContract({address:L.address,abi:[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"}],functionName:"balanceOf",args:[r]}),console.log("[CREATE] Token balance check:",{token:$r,balance:ke.toString(),required:B.toString(),sufficient:ke>=B}),ke<B){const _e=Number(ke)/Math.pow(10,L.decimals);dt(`Insufficient ${$r} balance. You have ${_e.toFixed(6)} ${$r}, need ${ti} ${$r}.`),hs(!1);return}}catch(ke){console.error("[CREATE] Error checking token balance:",ke),dt("Failed to check token balance. Please try again."),hs(!1);return}if(!await qne()){hs(!1);return}const V=cHe(),re=yr[$r].address;if(j)try{const ke=await j.readContract({address:o,abi:Ms,functionName:"tokenMinWager",args:[re]}),_e=await j.readContract({address:o,abi:Ms,functionName:"tokenMaxWager",args:[re]});if(console.log("[VALIDATION] Contract limits for",$r,":",{minWager:ke.toString(),maxWager:_e.toString(),userWager:B.toString()}),B<ke){const gt=Number(ke)/Math.pow(10,yr[$r].decimals);dt(`Wager too low. Minimum for ${$r}: ${gt}`),hs(!1);return}if(B>_e){const gt=Number(_e)/Math.pow(10,yr[$r].decimals);dt(`Wager too high. Maximum for ${$r}: ${gt}`),hs(!1);return}console.log("[VALIDATION] Wager amount is within contract limits")}catch(ke){console.warn("[VALIDATION] Could not validate wager limits, proceeding anyway:",ke)}const ge={invite_code:V,game_title:`Chess Game ${V.slice(-6)}`,bet_amount:B.toString(),bet_token:$r,blue_player:r,game_state:"waiting_for_join",board:{positions:Kb(vu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",ge),console.log("[CREATE] Calling contract with args:",[V,re,B]);let Se=300000n;try{if(j){const ke=await j.estimateContractGas({address:o,abi:Ms,functionName:"createGame",args:[V,re,B],account:r});Se=ke,console.log("[CREATE] Estimated gas:",ke.toString())}}catch(ke){console.warn("[CREATE] Gas estimation failed, using default:",ke)}let xe;yr[$r].isNative?(console.log("[CREATE] Native DMT transaction - adding value:",B.toString()),xe=v({address:o,abi:Ms,functionName:"createGame",args:[V,re,B],gas:Se,value:B})):xe=v({address:o,abi:Ms,functionName:"createGame",args:[V,re,B],gas:Se}),console.log("[CREATE] Contract call initiated, result:",xe),console.log("[CREATE] createGameHash after writeCreateGame:",_),console.log("[CREATE] Pending game data being set:",ge),Po(ge),dt("Creating game... Please confirm transaction in your wallet.")}catch(L){console.error("[CREATE] Error creating game:",L),dt("Failed to create game. Please try again.")}finally{hs(!1)}}},zU=async L=>{var B;if(r)try{const W=await ai.getGame(L);if(!W||W.game_state!=="waiting_for_join"){dt("Game not found or already full");return}const V=W.bet_token,re=yr[V],ge=BigInt(W.bet_amount);if(j)try{let _e;if(re.isNative?_e=await j.getBalance({address:r}):_e=await j.readContract({address:re.address,abi:[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"}],functionName:"balanceOf",args:[r]}),console.log("[JOIN] Token balance check:",{token:V,balance:_e.toString(),required:ge.toString(),sufficient:_e>=ge}),_e<ge){const gt=Number(_e)/Math.pow(10,re.decimals),Ft=Number(ge)/Math.pow(10,re.decimals);dt(`Insufficient ${V} balance. You have ${gt.toFixed(6)} ${V}, need ${Ft} ${V} to join this game.`);return}}catch(_e){console.error("[JOIN] Error checking token balance:",_e),dt("Failed to check token balance. Please try again.");return}const Se=Ee(W.bet_amount,W.bet_token||"NATIVE_DMT");if($e(L),Ot(!0),Qn("red"),Xe(Se,"joinGame"),ds(W.blue_player),r===W.blue_player){console.error("[JOIN] Player cannot join their own game"),dt("You cannot join your own game");return}if(ue&&ue!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",ue),dt("You already have an active game");return}const xe=(B=yr[W.bet_token])==null?void 0:B.address;if(xe&&xe!=="0x0000000000000000000000000000000000000000"&&j)try{const gt=await j.readContract({address:xe,abi:[{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],type:"function"}],functionName:"allowance",args:[r,o]}),Ft=BigInt(W.bet_amount);if(gt<Ft){dt(`Approving ${W.bet_token} spending...`),pa(!0);try{R(W.bet_token,o,Ft);return}catch(Hn){console.error("[JOIN] Error approving token:",Hn),dt(`Failed to approve ${W.bet_token}. Please try again.`),pa(!1);return}}}catch(_e){console.error("[JOIN] Error checking token allowance:",_e)}dt("Joining game... Please confirm transaction in your wallet.");let ke=200000n;try{if(j){const _e=await j.estimateContractGas({address:o,abi:Ms,functionName:"joinGame",args:[L],account:r});ke=_e,console.log("[JOIN] Estimated gas:",_e.toString())}}catch(_e){console.warn("[JOIN] Gas estimation failed, using default:",_e)}try{const _e=yr[W.bet_token];if(_e==null?void 0:_e.isNative){console.log("[JOIN] Native DMT game - adding value:",W.bet_amount);const Ft=I({address:o,abi:Ms,functionName:"joinGame",args:[L],gas:ke,value:BigInt(W.bet_amount)})}else{const Ft=I({address:o,abi:Ms,functionName:"joinGame",args:[L],gas:ke})}oc({inviteCode:L,gameData:W,address:r})}catch(_e){console.error("[JOIN] Error calling writeJoinGame:",_e),dt("Failed to send transaction. Please try again.")}}catch(W){console.error("[JOIN] Error joining game:",W),dt("Failed to join game. Please try again."),me("","join game error"),Qn(null),Xe(0,"join game error"),ds(null)}},[rVe,sVe]=D.useState(null),[iVe,oVe]=D.useState(""),[aVe,cVe]=D.useState(!0),Kne=()=>{console.log("[FIREBASE] No fallback to stop")},Yf=L=>{Vf.current&&Vf.current();const B=ai.subscribeToGame(L,W=>{const V=FU.current;if(!W)return;if(Jn&&V===Jn.address)W.game_state==="active"&&oc(null),W.blue_player&&W.red_player&&W.red_player!=="0x0000000000000000000000000000000000000000"&&ds(W.blue_player===V?W.red_player:W.blue_player);else if(V&&W.blue_player&&W.red_player&&W.red_player!=="0x0000000000000000000000000000000000000000"){const Se=V.toLowerCase()===W.blue_player.toLowerCase(),xe=V.toLowerCase()===W.red_player.toLowerCase();Se&&en!=="blue"?(Qn("blue"),ds(W.red_player)):xe&&en!=="red"?(Qn("red"),ds(W.blue_player)):!Se&&!xe&&en!==null&&(Qn(null),ds(null))}else{if(!(en&&(en==="blue"||en==="red"))){if(V){const Se=Ce();if(Se&&Array.isArray(Se)){const[xe,ke]=Se;if(xe&&ke){const _e=xe.toLowerCase()===V.toLowerCase()?"blue":"red",gt=xe.toLowerCase()===V.toLowerCase()?ke:xe;Qn(_e),ds(gt)}}}}W.blue_player&&W.red_player&&W.red_player!=="0x0000000000000000000000000000000000000000"&&ds(W.blue_player===V?W.red_player:W.blue_player)}if(W.board&&!Yn){const Se=Mm(W.board);Hr(Se)}else W.board&&Yn&&console.log("[FIREBASE] Skipping board update due to local move in progress");W.current_player&&zn(W.current_player),W.game_state==="active"?(_n(an.ACTIVE),ga(!0),dt("Game in progress")):W.game_state==="finished"?(_n(an.FINISHED),dt("Game finished")):W.game_state==="waiting_for_join"&&(_n(an.WAITING),dt("Waiting for opponent to join..."));let re=0;const ge=W.bet_token||"NATIVE_DMT";if(W.bet_amount&&!isNaN(parseFloat(W.bet_amount)))re=Ee(W.bet_amount,ge);else{const Se=Ce();Se&&Array.isArray(Se)&&Se[5]&&(re=Ee(Se[5].toString(),ge))}Xe(re,"Firebase subscription"),jb(ge)});return Vf.current=B,B};D.useEffect(()=>{if(Ne){const L=Yf(Ne);return()=>{L&&typeof L=="function"&&L()}}},[Ne]),D.useEffect(()=>{const L=Ce();if(L&&!en&&r){console.log("[FALLBACK] Setting playerColor from contract data");let B,W,V,re,ge,Se;if(Array.isArray(L))[B,W,V,re,ge,Se]=L;else{console.error("[FALLBACK] Unexpected contract data format:",L);return}const xe=B===r?"blue":"red",ke=B===r?W:B;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",B),console.log("[FALLBACK] - player2 (red):",W),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",xe),console.log("[FALLBACK] - opponent:",ke),console.log("[FALLBACK] - inviteCode from contract:",ge),Qn(xe),ds(ke),!Ne&&ge&&(console.log("[FALLBACK] Setting missing inviteCode:",ge),$e(ge)),Ne&&(console.log("[AUTO-FIX] Checking Firebase data for inviteCode:",Ne),ai.getGame(Ne).then(_e=>{console.log("[AUTO-FIX] Current Firebase data:",_e),console.log("[AUTO-FIX] Contract data:",L);const gt=!_e||!_e.blue_player||_e.red_player==="0x0000000000000000000000000000000000000000"||_e.game_state!=="active";if(console.log("[AUTO-FIX] Needs update:",gt),gt&&L&&Array.isArray(L)){console.log("[AUTO-FIX] Updating Firebase with correct data...");const[Ft,Hn]=L;console.log("[AUTO-FIX] Updating Firebase with player1 (blue):",Ft),console.log("[AUTO-FIX] Updating Firebase with player2 (red):",Hn),ai.updateGame(Ne,{blue_player:Ft,red_player:Hn,game_state:"active",current_player:"blue"}).then(()=>{console.log("[AUTO-FIX] Firebase updated with correct player data")}).catch(_R=>{console.error("[AUTO-FIX] Error updating Firebase:",_R)})}_e&&_e.game_state==="active"&&Jn&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),oc(null))}).catch(_e=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",_e)}))}},[tt,Xt,en,r,Ne]),D.useEffect(()=>{if(le&&Jn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",le.transactionHash),console.log("[RECEIPT] Pending data:",Jn);const{inviteCode:L,gameData:B,address:W}=Jn;ai.updateGame(L,{red_player:W,blue_player:B.blue_player,bet_amount:B.bet_amount,game_state:"active",last_move:null,board:{positions:Kb(vu),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),dt("Game started! You are the red player."),_n(an.ACTIVE),ga(!0),oc(null)}).catch(V=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",V),dt("Game joined but failed to update game state. Please refresh.")})}},[le,Jn]),D.useEffect(()=>{S&&(console.error("[ERROR] Join transaction failed:",S),dt(`Failed to join game: ${S.message||"Transaction rejected"}`),me("","join game error effect"),Qn(null),Xe(0,"join game error effect"),ds(null),oc(null))},[S]);const Kb=L=>{const B={};return L.forEach((W,V)=>{W.forEach((re,ge)=>{B[`${V}_${ge}`]=re})}),B},Mm=L=>{if(!L||!L.positions)return console.warn("[BOARD] No board data available, using initial board"),vu;if(console.log("[BOARD] Attempting to reconstruct board from:",L),console.log("[BOARD] Positions type:",typeof L.positions),console.log("[BOARD] Positions is array:",Array.isArray(L.positions)),console.log("[BOARD] Positions value:",L.positions),typeof L.positions=="object"&&!Array.isArray(L.positions)){const B=L.positions,W=L.rows||8,V=L.cols||8,re=Array(W).fill(null).map(()=>Array(V).fill(null));for(let ge=0;ge<W;ge++)for(let Se=0;Se<V;Se++){const xe=`${ge}_${Se}`;re[ge][Se]=B[xe]||null}return console.log("[BOARD] Reconstructed from flat structure:",re),re}return Array.isArray(L.positions)?(console.log("[BOARD] Found array structure, length:",L.positions.length),L.positions.length===8?L.positions.every((W,V)=>{const re=Array.isArray(W)&&W.length===8;return re||console.warn(`[BOARD] Row ${V} is invalid:`,W,"Type:",typeof W,"Length:",W==null?void 0:W.length),re})?(console.log("[BOARD] Using legacy array structure"),L.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),vu):(console.warn("[BOARD] Array has wrong length:",L.positions.length,"expected 8"),vu)):(console.warn("[BOARD] Unknown board structure, using initial board:",L),vu)},rA=L=>L?`${L.slice(0,6)}...${L.slice(-4)}`:"Unknown",Tn=L=>L&&L===L.toUpperCase()?"red":"blue",HU=(L,B)=>L>=0&&L<8&&B>=0&&B<8,GU=(L,B)=>`${"abcdefgh"[B]}${"87654321"[L]}`,Yne=(L,B,W,V)=>{const re=GU(L.row,L.col),ge=GU(B.row,B.col);return`${re}-${ge}`},Lm=(L,B)=>{const W=B==="red"?"K":"k";let V=-1,re=-1;for(let Se=0;Se<8;Se++){for(let xe=0;xe<8;xe++)if(L[Se][xe]===W){V=Se,re=xe;break}if(V!==-1)break}return V===-1?!1:cu(V,re,B==="red"?"blue":"red",L)},cu=(L,B,W,V)=>{if(!V||!Array.isArray(V)||V.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",V),!1;for(let re=0;re<8;re++){if(!V[re]||!Array.isArray(V[re])||V[re].length!==8)return console.warn("[SAFETY] Invalid board row structure:",V[re]),!1;for(let ge=0;ge<8;ge++){const Se=V[re][ge];if(Se&&Tn(Se)===W&&$m(Se,re,ge,L,B,!1,W,V,!0))return!0}}return!1},Qne=(L,B,W,V,re,ge=Tt)=>{const Se=ge[L][B];if(!Se)return!1;const xe=ge.map(ke=>[...ke]);return xe[W][V]=Se,xe[L][B]=null,Lm(xe,re)},Jne=(L,B,W,V,re,ge)=>{const Se=L==="blue"?-1:1,xe=L==="blue"?6:1;if(!HU(V,re)||L==="blue"&&V>=B||L==="red"&&V<=B)return!1;if(W===re&&V===B+Se)return ge[V][re]===null;if(W===re&&B===xe&&V===B+2*Se)return ge[B+Se][W]===null&&ge[V][re]===null;if(Math.abs(W-re)===1&&V===B+Se){const ke=ge[V][re];if(ke!==null&&Tn(ke)!==L)return!0;if(ke===null&&at.lastPawnDoubleMove){const{row:_e,col:gt}=at.lastPawnDoubleMove;if(_e===B&&gt===re){const Ft=ge[B][re];if(Ft&&Ft.toLowerCase()==="p"&&Tn(Ft)!==L)return!0}}}return!1},qU=(L,B,W,V,re)=>L===W||B===V,Zne=(L,B,W,V)=>{const re=Math.abs(L-W),ge=Math.abs(B-V);return re===2&&ge===1||re===1&&ge===2},VU=(L,B,W,V,re)=>Math.abs(L-W)===Math.abs(B-V),Xne=(L,B,W,V,re)=>qU(L,B,W,V)||VU(L,B,W,V),KU=L=>L==="blue"?"red":"blue",ere=(L,B,W,V,re,ge=Tt)=>{const Se=Math.abs(B-V),xe=Math.abs(W-re);if(Se<=1&&xe<=1)return!0;if(Se===0&&xe===2){if(Lm(ge,L))return!1;if(L==="blue"&&!at.blueKingMoved){if(re===6&&!at.blueRooksMove.right&&ge[B][5]===null&&ge[B][6]===null){const ke=L==="blue"?"red":"blue";if(!cu(B,5,ke,ge)&&!cu(B,6,ke,ge))return!0}if(re===2&&!at.blueRooksMove.left&&ge[B][1]===null&&ge[B][2]===null&&ge[B][3]===null){const ke=L==="blue"?"red":"blue";if(!cu(B,2,ke,ge)&&!cu(B,3,ke,ge))return!0}}else if(L==="red"&&!at.redKingMoved){if(re===6&&!at.redRooksMove.right&&ge[B][5]===null&&ge[B][6]===null){const ke=KU(L);if(!cu(B,5,ke,ge)&&!cu(B,6,ke,ge))return!0}if(re===2&&!at.redRooksMove.left&&ge[B][1]===null&&ge[B][2]===null&&ge[B][3]===null){const ke=KU(L);if(!cu(B,2,ke,ge)&&!cu(B,3,ke,ge))return!0}}}return!1},ER=(L,B,W,V,re)=>{const ge=L===W?0:(W-L)/Math.abs(W-L),Se=B===V?0:(V-B)/Math.abs(V-B);let xe=L+ge,ke=B+Se;for(;xe!==W||ke!==V;){if(re[xe][ke]!==null)return!1;xe+=ge,ke+=Se}return!0},$m=(L,B,W,V,re,ge=!0,Se=Tn(L),xe=Tt,ke=!1)=>{if(!L||!HU(V,re))return!1;const _e=xe[V][re];if(_e&&Tn(_e)===Se)return!1;let gt=!1;switch(L.toUpperCase()){case"P":gt=Jne(Se,B,W,V,re,xe);break;case"R":gt=qU(B,W,V,re)&&ER(B,W,V,re,xe);break;case"N":gt=Zne(B,W,V,re);break;case"B":gt=VU(B,W,V,re)&&ER(B,W,V,re,xe);break;case"Q":gt=Xne(B,W,V,re)&&ER(B,W,V,re,xe);break;case"K":gt=ere(Se,B,W,V,re,xe);break}return!(!gt||ge&&Qne(B,W,V,re,Se,xe))},CR=(L,B=Tt,W=jt)=>{const V=[],re=B[L.row][L.col];if(!re||Tn(re)!==W)return V;const ge=re.toLowerCase();if(ge==="p"){const Se=W==="blue"?-1:1,xe=W==="blue"?6:1,ke=L.row+Se;if(ke>=0&&ke<8&&$m(re,L.row,L.col,ke,L.col,!0,W,B,!0)&&V.push({row:ke,col:L.col}),L.row===xe){const _e=L.row+2*Se;_e>=0&&_e<8&&$m(re,L.row,L.col,_e,L.col,!0,W,B,!0)&&V.push({row:_e,col:L.col})}for(const _e of[-1,1]){const gt=L.col+_e,Ft=L.row+Se;gt>=0&&gt<8&&Ft>=0&&Ft<8&&$m(re,L.row,L.col,Ft,gt,!0,W,B,!0)&&V.push({row:Ft,col:gt})}}else if(ge==="n"){const Se=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[xe,ke]of Se){const _e=L.row+xe,gt=L.col+ke;_e>=0&&_e<8&&gt>=0&&gt<8&&$m(re,L.row,L.col,_e,gt,!0,W,B,!0)&&V.push({row:_e,col:gt})}}else for(let Se=0;Se<8;Se++)for(let xe=0;xe<8;xe++)$m(re,L.row,L.col,Se,xe,!0,W,B,!0)&&V.push({row:Se,col:xe});return V},tre=(L,B=Tt)=>{if(!Lm(B,L))return!1;for(let W=0;W<8;W++)for(let V=0;V<8;V++){const re=B[W][V];if(re&&Tn(re)===L&&CR({row:W,col:V},B,L).length>0)return!1}return!0},nre=(L,B=Tt)=>{if(Lm(B,L))return!1;for(let W=0;W<8;W++)for(let V=0;V<8;V++){const re=B[W][V];if(re&&Tn(re)===L&&CR({row:W,col:V},B,L).length>0)return!1}return!0},YU=(L,B)=>{if(console.log("[CLICK] Square clicked:",{row:L,col:B}),console.log("[CLICK] Game mode:",us,"Player color:",en),console.log("[CLICK] Current player:",jt,"Player color:",en),us!==an.ACTIVE||!en){console.log("[CLICK] Game not active or no player color");return}const W=Tt[L][B],V=W?Tn(W):null;if(console.log("[CLICK] Piece at square:",W,"Piece color:",V),jt!==en){console.log("[CLICK] Not player's turn. Current:",jt,"Player:",en);return}if(W&&V===en){qi({row:L,col:B});const re=CR({row:L,col:B});zf(re);return}if(Sr&&el.some(re=>re.row===L&&re.col===B)){rre(Sr,{row:L,col:B}),qi(null),zf([]);return}qi(null),zf([])},rre=async(L,B)=>{if(!en||jt!==en)return;const W=Tt[L.row][L.col];if(W){if(console.log("[PAWN_PROMOTION_CHECK]",{piece:W,pieceLower:W.toLowerCase(),isPawn:W.toLowerCase()==="p",pieceColor:Tn(W),toRow:B.row,bluePromotion:Tn(W)==="blue"&&B.row===0,redPromotion:Tn(W)==="red"&&B.row===7,shouldPromote:W.toLowerCase()==="p"&&(Tn(W)==="blue"&&B.row===0||Tn(W)==="red"&&B.row===7)}),W.toLowerCase()==="p"&&(Tn(W)==="blue"&&B.row===0||Tn(W)==="red"&&B.row===7)){console.log("[PAWN_PROMOTION] Triggering promotion dialog"),Vb({from:L,to:B}),Gf(!0);return}await QU(L,B)}},QU=async(L,B,W="q")=>{if(!en||jt!==en)return;const V=Tt[L.row][L.col];if(!V)return;const re=Tt[B.row][B.col],ge=re!==null;if(console.log("[MOVE] Executing move:",{from:{row:L.row,col:L.col,piece:V},to:{row:B.row,col:B.col,capturedPiece:re},player:jt,isCapture:ge,moveType:V.toUpperCase()==="K"?"king":V.toUpperCase()==="R"?"rook":"other"}),Qf(ge?"capture":"move"),ge){ee({row:B.row,col:B.col,show:!0}),setTimeout(()=>{JU(L,B,W),ee(null)},500);return}JU(L,B,W)},JU=async(L,B,W="q")=>{if(!en||jt!==en)return;const V=Tt[L.row][L.col];if(!V)return;Bb(!0),console.log("[MOVE_ANIMATION] Starting move execution:",{from:{row:L.row,col:L.col,piece:V},to:{row:B.row,col:B.col,capturedPiece:Tt[B.row][B.col]},currentBoard:Tt.map(_e=>[..._e])});const re=Tt.map(_e=>[..._e]);console.log("[MOVE_ANIMATION] Before special moves handling"),ore(re,L,B,V,W),console.log("[MOVE_ANIMATION] After special moves handling"),re[B.row][B.col]===null?re[B.row][B.col]=V:V.toLowerCase()==="p"&&(Tn(V)==="blue"&&B.row===0||Tn(V)==="red"&&B.row===7)?console.log("[MOVE_ANIMATION] Promotion already handled by special moves"):(console.log("[MOVE_ANIMATION] Capturing piece, replacing captured piece with attacking piece"),re[B.row][B.col]=V),re[L.row][L.col]=null,console.log("[MOVE_ANIMATION] Move completed:",{from:{row:L.row,col:L.col},to:{row:B.row,col:B.col},piece:V,finalBoardState:re.map(_e=>[..._e])}),are(L,B,V);const ge=Yne(L,B);$U(_e=>{const gt=[..._e,ge];return console.log("[MOVE HISTORY UPDATED]",gt),gt});const Se=jt==="blue"?"red":"blue";Lm(re,Se)&&Qf("check");let xe="active",ke=null;if(tre(Se,re)){xe="finished",ke=jt,dt(`${jt==="red"?"Red":"Blue"} wins by checkmate!`),jt===en?(Qf("victory"),tB()):(Qf("loser"),nB());const _e=Ce();_e&&_e.length>=2?await WU(jt,_e[0],_e[1]):(await jU(jt===en?"win":"loss"),await nA()),ke===en&&setTimeout(()=>{Kn()},2e3)}else if(nre(Se,re)){const _e=jt;xe="finished",dt(`${_e==="red"?"Red":"Blue"} wins by stalemate!`),_e===en?(Qf("victory"),tB()):(Qf("loser"),nB());const gt=Ce();gt&&gt.length>=2?await WU(_e,gt[0],gt[1]):(await jU(_e===en?"win":"loss"),await nA()),_e===en&&setTimeout(()=>{Kn()},2e3)}try{if(!Ne){console.error("[BUG] inviteCode is missing when trying to update game!"),dt("Game code missing. Please reload or rejoin the game.");return}const _e=Kb(re);await ai.updateGame(Ne,{board:{positions:_e,rows:8,cols:8},current_player:Se,game_state:xe,winner:ke,last_move:{from:L,to:B}})}catch(_e){console.error("[DATABASE] Error updating game:",_e)}Hr(re),zn(Se),Hne({from:L,to:B}),Gf(!1),Vb(null),setTimeout(()=>{Bb(!1)},1e3)},[sre,ZU]=D.useState(!1),[ire,XU]=D.useState(!1),eB=()=>{ZU(!1),XU(!1),ni(!1)},tB=()=>{ni(!0),ZU(!0);for(let L=0;L<50;L++)setTimeout(()=>{const B=document.createElement("div");B.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(B),setTimeout(()=>B.remove(),3e3)},L*100);for(let L=0;L<15;L++)setTimeout(()=>{const B=document.createElement("div"),W=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],V=W[Math.floor(Math.random()*W.length)];B.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${V};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(B),setTimeout(()=>B.remove(),6e3)},L*200);Kf.current&&clearTimeout(Kf.current),Kf.current=setTimeout(()=>{ni(!1)},5e3)},nB=()=>{XU(!0);for(let L=0;L<20;L++)setTimeout(()=>{const B=document.createElement("div");B.className="blood-drip",B.style.cssText=`
          position: fixed;
          top: 0;
          width: 18px;
          height: 60px;
          background: linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%);
          border-radius: 50% 50% 60% 60%/60% 60% 100% 100%;
          opacity: 0.85;
          z-index: 2000;
          left: ${Math.random()*window.innerWidth}px;
          animation: blood-drip-fall 2.8s linear forwards;
        `,document.body.appendChild(B),setTimeout(()=>B.remove(),2800)},L*150)},ore=(L,B,W,V,re="q")=>{if(console.log("[SPECIAL_MOVES] Checking for special moves:",{piece:V,from:B,to:W,isKing:V.toLowerCase()==="k",colDifference:Math.abs(B.col-W.col)}),console.log("[SPECIAL_MOVES_PROMOTION_CHECK]",{piece:V,isPawn:V.toLowerCase()==="p",pieceColor:Tn(V),toRow:W.row,promotionPiece:re,shouldPromote:V.toLowerCase()==="p"&&(Tn(V)==="blue"&&W.row===0||Tn(V)==="red"&&W.row===7)}),V.toLowerCase()==="p"&&(Tn(V)==="blue"&&W.row===0||Tn(V)==="red"&&W.row===7)){const ge=Tn(V)==="blue"?re.toLowerCase():re.toUpperCase();console.log("[SPECIAL_MOVES_PROMOTION] Promoting pawn to:",ge),L[W.row][W.col]=ge}if(V.toLowerCase()==="k"&&Math.abs(B.col-W.col)===2){if(console.log("[SPECIAL_MOVES] Castling detected!",{fromCol:B.col,toCol:W.col,castlingType:W.col===6?"kingside":"queenside"}),W.col===6)console.log("[SPECIAL_MOVES] Executing kingside castling"),L[B.row][7]=null,L[B.row][5]=Tn(V)==="blue"?"r":"R";else if(W.col===2){console.log("[SPECIAL_MOVES] Executing queenside castling");const ge=L[B.row][3];ge&&ge.toLowerCase()==="q"&&(L[B.row][4]=ge),L[B.row][0]=null,L[B.row][3]=Tn(V)==="blue"?"r":"R"}}else console.log("[SPECIAL_MOVES] No castling detected");V.toLowerCase()==="p"&&Math.abs(B.col-W.col)===1&&L[W.row][W.col]===null&&at.lastPawnDoubleMove&&at.lastPawnDoubleMove.row===B.row&&at.lastPawnDoubleMove.col===W.col&&(L[B.row][W.col]=null)},are=(L,B,W)=>{const V={...at};W.toLowerCase()==="k"?Tn(W)==="blue"?V.blueKingMoved=!0:V.redKingMoved=!0:W.toLowerCase()==="r"&&(Tn(W)==="blue"?(L.col===0&&(V.blueRooksMove.left=!0),L.col===7&&(V.blueRooksMove.right=!0)):(L.col===0&&(V.redRooksMove.left=!0),L.col===7&&(V.redRooksMove.right=!0))),W.toLowerCase()==="p"&&Math.abs(L.row-B.row)===2?V.lastPawnDoubleMove={row:B.row,col:B.col}:V.lastPawnDoubleMove=null,An(V)},Qf=L=>{if(!K)return;let B="";switch(L){case"move":B="/images/move.mp3";break;case"capture":B="/images/capture.mp3";break;case"check":B="/images/play.mp3";break;case"checkmate":B="/images/victory.mp3";break;case"victory":B="/images/victory.mp3";break;case"loser":B="/images/loser.mp3";break;case"upgrade":B="/images/upgrade.mp3";break;default:B="/images/move.mp3"}try{const W=new Audio(B);W.volume=.3,W.play().catch(V=>console.warn("Audio play failed:",V))}catch(W){console.warn("Sound play failed:",W)}},cre=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(L){console.error("Error checking stuck games:",L)}},lre=(L,B,W)=>{W.preventDefault(),YU(L,B)},ure=L=>{L.preventDefault()},dre=(L,B)=>{if(!Tt||!Array.isArray(Tt)||Tt.length!==8||!Tt[L]||!Array.isArray(Tt[L])||Tt[L].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:L,col:B,board:Tt}),m.jsx("div",{className:"square error",children:m.jsx("div",{className:"error-indicator",children:"!"})},`${L}-${B}`);const W=Tt[L][B],V=(Sr==null?void 0:Sr.row)===L&&(Sr==null?void 0:Sr.col)===B,re=el.some(xe=>xe.row===L&&xe.col===B),ge=au&&(au.from.row===L&&au.from.col===B||au.to.row===L&&au.to.col===B),Se=W&&W.toUpperCase()==="K"&&Lm(Tt,Tn(W));return m.jsxs("div",{className:`square ${V?"selected":""} ${re?"legal-move":""} ${ge?"last-move":""} ${Se?"square-in-check":""}`,onClick:()=>YU(L,B),onTouchStart:xe=>lre(L,B,xe),onTouchMove:ure,children:[W&&m.jsx("div",{className:"piece",style:{backgroundImage:E2[W]?`url(${E2[W]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),re&&m.jsx("div",{className:"legal-move-indicator"})]},`${L}-${B}`)},hre=()=>{if(!tA||!qb)return null;const L=jt==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:L.map(B=>m.jsx("div",{className:"promotion-piece",onClick:()=>{QU(qb.from,qb.to,B),Gf(!1),Vb(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:m.jsx("img",{src:E2[B],alt:B,style:{width:"40px",height:"40px"}})},B))})]})})},fre=()=>m.jsxs("div",{className:"piece-gallery",children:[m.jsx("h3",{children:"Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:aHe.map(L=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{Gb(eA===L.key?null:L.key)},children:[m.jsx("img",{src:L.img,alt:L.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:L.name}),eA===L.key&&m.jsx("div",{className:"piece-gallery-desc",children:L.desc})]},L.key))})]});return D.useEffect(()=>{nA(),Dm(),cre();const L=setInterval(Dm,3e4);return()=>{clearInterval(L),Vf.current&&Vf.current(),Kf.current&&clearTimeout(Kf.current)}},[]),m.jsxs("div",{className:`chess-game${ac?" game-active":""}`,children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[(us===an.ACTIVE||us===an.FINISHED)&&ac&&m.jsxs("div",{className:"left-sidebar",children:[Nd==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:fr.slice(0,8).map((L,B)=>m.jsxs("tr",{children:[m.jsx("td",{children:B+1}),m.jsx("td",{children:rA(L.username)}),m.jsx("td",{children:L.points})]},L.username))})]})})]}),Nd==="moves"&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:Ub.slice().reverse().map((L,B)=>m.jsx("li",{children:L},Ub.length-1-B))})]}),Nd==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:fre()})]}),m.jsxs("div",{className:"center-area",children:[us===an.LOBBY&&m.jsxs("div",{className:"chess-multiplayer-lobby",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",textAlign:"center",padding:"20px",marginTop:"20px"},children:[m.jsx("h2",{style:{color:"#ff0000",fontFamily:"Impact, Charcoal, sans-serif",fontSize:"48px",fontWeight:"bold",textShadow:"0 0 10px #ff0000, 0 0 20px #ff0000, 0 0 30px #ff0000",marginBottom:"10px",textTransform:"uppercase"},children:"PVP CHESS LAWBY"}),s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"status-bar",style:{marginBottom:"20px",color:"#ff0000"},children:["Connected: ",rA(r)]}),m.jsxs("div",{className:"lobby-content",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[m.jsxs("div",{className:"actions",style:{order:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[m.jsx("button",{className:"create-btn",onClick:()=>bi(!0),disabled:K1||Hf,style:{color:"#ff0000"},children:"Create New Match"}),m.jsx("button",{onClick:Dm,style:{background:"rgba(255, 0, 0, 0.1)",border:"2px solid #ff0000",color:"#ff0000",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Refresh Lobby"}),m.jsx("button",{onClick:()=>window.location.href="/chess",style:{background:"rgba(255, 0, 0, 0.1)",border:"2px solid #ff0000",color:"#ff0000",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Back to Chess Home"})]}),K1&&m.jsxs("div",{className:"create-form",style:{order:2,marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#ff0000"},children:"Create New Match"}),m.jsxs("div",{style:{background:"rgba(255, 0, 0, 0.1)",border:"1px solid #ff0000",padding:"12px",marginBottom:"15px",borderRadius:"4px",fontSize:"13px",lineHeight:"1.4",color:"#ff0000"},children:[m.jsx("strong",{children:" Game Creation Flow:"}),m.jsx("br",{}),"1 ",m.jsx("strong",{children:"Select Token"})," - Choose DMT or other supported Sanko tokens",m.jsx("br",{}),"2 ",m.jsx("strong",{children:"Enter Amount"})," - Set your wager amount (must be within min/max limits)",m.jsx("br",{}),"3 ",m.jsx("strong",{children:'Click "Create Game"'})," - This will trigger two transactions:",m.jsx("br",{})," ",m.jsx("strong",{children:"Approval Transaction"})," - Allows the contract to spend your tokens",m.jsx("br",{})," ",m.jsx("strong",{children:"Create Game Transaction"})," - Creates the game and locks your wager",m.jsx("br",{}),m.jsx("br",{}),m.jsx("strong",{children:" Note:"})," You'll need to confirm both transactions in your wallet. The first approval may be for a higher amount to avoid future approvals."]}),m.jsx(iHe,{selectedToken:$r,onTokenSelect:Y1,wagerAmount:ti,onWagerChange:wR,disabled:Hf}),m.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"10px",justifyContent:"center",marginTop:"10px"},children:[m.jsx("button",{className:"create-confirm-btn",onClick:Vne,disabled:ti<=0||Hf,style:{padding:"8px 16px",backgroundColor:"#ff0000",color:"#000000",border:"none",borderRadius:"0px",cursor:ti<=0||Hf?"not-allowed":"pointer",fontWeight:"bold"},children:Hf?"Creating...":"Create Game"}),m.jsx("button",{className:"cancel-btn",onClick:()=>{bi(!1),hs(!1)},style:{padding:"8px 16px",backgroundColor:"#ff0000",color:"#000000",border:"none",borderRadius:"0px",cursor:"pointer",fontWeight:"bold"},children:"Cancel"})]})]}),m.jsxs("div",{className:"open-games",style:{order:3},children:[m.jsxs("h3",{style:{color:"#ff0000"},children:["Open Games (",Fb.length,")"]}),m.jsxs("div",{className:"games-list",style:{display:"flex",flexDirection:"column",gap:"5px"},children:[Fb.map(L=>(console.log("[RENDER LOBBY] Rendering game:",L),m.jsxs("div",{className:"game-item",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"5px",padding:"8px",border:"1px solid #333",borderRadius:"3px",backgroundColor:"#000000"},children:[m.jsxs("div",{className:"game-details",style:{textAlign:"center",fontSize:"0.9rem",display:"flex",flexDirection:"column",gap:"4px",color:"#ff0000"},children:[m.jsx("div",{className:"game-id",style:{fontWeight:"bold",color:"#ff0000"},children:L.game_title||"Untitled Game"}),m.jsxs("div",{className:"wager",style:{color:"#ff0000"},children:["Wager: ",(parseFloat(L.bet_amount)/Math.pow(10,yr[L.bet_token||"DMT"].decimals)).toFixed(2)," ",L.bet_token||"DMT"]}),m.jsxs("div",{className:"creator",style:{fontSize:"0.8rem",color:"#ff0000"},children:["Created by: ",rA(L.blue_player)]})]}),m.jsx("button",{className:"join-btn",onClick:()=>zU(L.invite_code),style:{padding:"4px 12px",fontSize:"0.8rem",backgroundColor:"#ff0000",color:"white",border:"none",borderRadius:"0px",cursor:"pointer"},children:"Join Game"})]},L.invite_code))),Fb.length===0&&m.jsxs("div",{className:"no-games",style:{color:"#ff0000",textAlign:"center",padding:"20px",background:"rgba(255, 0, 0, 0.05)",border:"1px solid rgba(255, 0, 0, 0.2)",borderRadius:"4px"},children:[m.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"8px"},children:" No Open Games Available"}),m.jsxs("div",{style:{fontSize:"12px",lineHeight:"1.4"},children:['Be the first to create a match! Click "Create New Match" above to start.',m.jsx("br",{}),"Other players will be able to match wage and join your game once it's created."]})]})]})]})]})]}):m.jsx("div",{className:"wallet-notice",style:{marginBottom:"20px",color:"#ff0000"},children:"Please connect your wallet to play multiplayer chess"})]}),us===an.WAITING&&m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Invite Code: ",m.jsx("strong",{children:Ne})]}),m.jsx("div",{className:"game-info",children:m.jsxs("p",{children:["Wager: ",Om.toFixed(6)," ",Q1]})}),m.jsxs("div",{className:"waiting-actions",children:[m.jsx("button",{onClick:St,disabled:z||ae,className:"refund-game-btn",children:z||ae?" Refunding...":" Refund Game"}),m.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),(us===an.ACTIVE||us===an.FINISHED)&&ac&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:jt==="blue"?"current-blue":"current-red",children:[jt==="blue"?"Blue":"Red"," to move"]}),m.jsxs("span",{className:"wager-display",children:["Wager: ",Om.toFixed(6)," ",Q1]}),fa&&m.jsxs("span",{className:"opponent-info",children:["vs ",rA(fa)]})]}),m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",children:[Array.from({length:8},(L,B)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(W,V)=>dre(B,V))},B)),se&&se.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${se.row*12.5}%`,left:`${se.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsxs("div",{className:"sidebar-toggle-group",children:[m.jsx("button",{className:Nd==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>G("moves"),children:"Moves"}),m.jsx("button",{className:Nd==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>G("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:Nd==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>G("gallery"),children:"Gallery"})]}),m.jsx("button",{onClick:()=>{_n(an.LOBBY),ga(!1)},children:"New Match"}),m.jsx("button",{onClick:()=>{_n(an.LOBBY),ga(!1)},children:"Menu"})]})]})]})]})]}),hre(),sre&&m.jsxs("div",{className:"victory-overlay",children:[m.jsx("div",{className:"balloons-container"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Victory!"}),m.jsx("button",{onClick:()=>{eB(),_n(an.LOBBY),ga(!1)},children:"Back to Lobby"})]})})]}),ire&&m.jsxs("div",{className:"defeat-overlay",children:[m.jsx("div",{className:"blood-overlay"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Defeat!"}),m.jsx("button",{onClick:()=>{eB(),_n(an.LOBBY),ga(!1)},children:"Back to Lobby"})]})})]})]})},yS={AI:"ai"},lHe=1996,wS={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},zW=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],uHe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],dHe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},hHe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},fHe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=Ab(),i=tc();k$();const{open:o}=L1(),[a,c]=D.useState(yS.AI),[l,u]=D.useState(()=>JSON.parse(JSON.stringify(zW))),[d,h]=D.useState("blue"),[f,p]=D.useState(null),[g,w]=D.useState("active"),[y,b]=D.useState("hard"),[v,A]=D.useState("Connect wallet to play"),[_,I]=D.useState([]),[x,N]=D.useState([]),[S,O]=D.useState([]),[P,F]=D.useState(null),[q,z]=D.useState(!1),[T,R]=D.useState(!1),[U,k]=D.useState(null),[M,j]=D.useState(null),[Y]=D.useState(""),[ne]=D.useState(.1),[le,oe]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ae=D.useRef(null),ue=D.useRef(!1),tt=D.useRef(l),Ne=D.useRef(null),$e=D.useRef(null),st=D.useRef(!1),Ot=D.useRef(!1),[Xt,X]=D.useState(!1),[ce,Ce]=D.useState(!1),[me,Ee]=D.useState(!1),{stockfishReady:Xe}=dHe(),{getOpeningData:it}=hHe(),[It,St]=D.useState("loading"),[Kn,Tt]=D.useState(!1),[Hr,jt]=D.useState([]),[zn,Sr]=D.useState(!1),[qi,el]=D.useState(()=>{const G=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*G.length),ie=G[K];return console.log("[DEBUG] Initial random chessboard selected:",ie,"(index:",K,")"),ie}),[zf,Ub]=D.useState(!0),[$U,G1]=D.useState(!1);D.useEffect(()=>{!s||!r?(A("Connect wallet to play"),z(!1),X(!1),o()):i!==lHe?(A("Switch to Sanko Mainnet to play"),z(!1),X(!1),o()):A("Select match mode")},[s,r,i,o]);const dt=()=>{const G=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*G.length),ie=G[K];return console.log("[DEBUG] Random chessboard selected:",ie,"(index:",K,")"),ie};D.useEffect(()=>{if(Xe)St("ready");else{const G=window.setTimeout(()=>{Xe||(St("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(G)}},[Xe]),D.useEffect(()=>{tt.current=l},[l]),D.useEffect(()=>(!ae.current&&typeof Worker<"u"&&(ae.current=new Worker("/aiWorker.js"),ae.current.onmessage=G=>{console.log("[DEBUG] AI worker response received:",G.data);const{move:K,nodes:ie}=G.data;K&&ue.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",K),console.log("[DEBUG] AI searched",ie,"nodes"),ue.current=!1,$e.current&&(window.clearTimeout($e.current),$e.current=null),Ne.current&&Ne.current(K.from,K.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ae.current.onerror=G=>{console.error("[DEBUG] AI worker error:",G),A("AI worker error - using fallback mode"),ue.current=!1}),()=>{ae.current&&(ae.current.terminate(),ae.current=null),$e.current&&(window.clearTimeout($e.current),$e.current=null)}),[]),D.useEffect(()=>{us()},[]);const us=async()=>{try{await jee();const G=await Fee(20);N(G),console.log("Leaderboard data loaded:",G)}catch(G){A("Failed to load leaderboard"),console.error("Leaderboard error:",G)}},_n=async G=>{if(console.log("[DEBUG] updateScore called with:",G),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",rm(r)),await GI(r,G)?(console.log("[DEBUG] Successfully updated score for:",rm(r)),await us()):console.error("[DEBUG] Failed to update score")}catch(K){console.error("[DEBUG] Error in updateScore:",K)}},Yn=G=>G&&G===G.toUpperCase()?"red":"blue",Bb=(G,K)=>G>=0&&G<8&&K>=0&&K<8,en=(G,K)=>`${String.fromCharCode(97+K)}${8-G}`,Qn=(G,K)=>{const ie=K==="blue"?"k":"K";let se=null;for(let Oe=0;Oe<8;Oe++){for(let et=0;et<8;et++)if(G[Oe][et]===ie){se={row:Oe,col:et};break}if(se)break}if(!se)return console.log(`King not found for ${K}`),!1;const ee=K==="blue"?"red":"blue",be=fa(se.row,se.col,ee,G);return console.log(`${K} king at ${se.row},${se.col} under attack: ${be}`),be},fa=(G,K,ie,se)=>{for(let ee=0;ee<8;ee++)for(let be=0;be<8;be++){const Oe=se[ee][be];if(Oe&&Yn(Oe)===ie&&Gr(Oe,ee,be,G,K,!1,ie,se,!0))return!0}return!1},ds=(G,K,ie,se,ee,be=l)=>{const Oe=be.map(at=>[...at]),et=Oe[G][K];return Oe[ie][se]=et,Oe[G][K]=null,Qn(Oe,ee)},Om=(G,K,ie,se,ee,be)=>{const Oe=G==="blue"?-1:1,et=G==="blue"?6:1;if(!Bb(se,ee)||G==="blue"&&se>=K||G==="red"&&se<=K)return!1;const at=Math.abs(se-K),An=Math.abs(ee-ie);if((at===1&&An===0||at===2&&An===0&&K===et||at===1&&An===1)&&at<=2&&An<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:G,from:`${K},${ie}`,to:`${se},${ee}`}),ie===ee&&se===K+Oe)return be[se][ee]===null;if(ie===ee&&K===et&&se===K+2*Oe)return be[K+Oe][ie]===null&&be[se][ee]===null;if(Math.abs(ie-ee)===1&&se===K+Oe){const vn=be[se][ee];return vn!==null&&Yn(vn)!==G}if(Math.abs(ie-ee)===1&&se===K+Oe){const vn=be[K][ee];if(vn&&Yn(vn)!==G&&vn.toLowerCase()==="p"&&le.lastPawnDoubleMove&&le.lastPawnDoubleMove.row===K&&le.lastPawnDoubleMove.col===ee)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},q1=(G,K,ie,se,ee)=>G!==ie&&K!==se?!1:hs(G,K,ie,se,ee),Fb=(G,K,ie,se)=>{const ee=Math.abs(G-ie),be=Math.abs(K-se);return ee===2&&be===1||ee===1&&be===2},V1=(G,K,ie,se,ee)=>Math.abs(G-ie)!==Math.abs(K-se)?!1:hs(G,K,ie,se,ee),K1=(G,K,ie,se,ee)=>q1(G,K,ie,se,ee)||V1(G,K,ie,se,ee),bi=G=>G==="blue"?"red":"blue",Hf=(G,K,ie,se,ee,be=l)=>{const Oe=Math.abs(K-se),et=Math.abs(ie-ee);if(Oe<=1&&et<=1)return!0;if(Oe===0&&et===2){if(Qn(be,G))return!1;if(G==="blue"&&!le.blueKingMoved){if(ee===6&&!le.blueRooksMove.right&&be[K][5]===null&&be[K][6]===null){const at=bi(G);if(!fa(K,5,at,be)&&!fa(K,6,at,be))return!0}if(ee===2&&!le.blueRooksMove.left&&be[K][1]===null&&be[K][2]===null&&be[K][3]===null){const at=bi(G);if(!fa(K,2,at,be)&&!fa(K,3,at,be))return!0}}else if(G==="red"&&!le.redKingMoved){if(ee===6&&!le.redRooksMove.right&&be[K][5]===null&&be[K][6]===null){const at=bi(G);if(!fa(K,5,at,be)&&!fa(K,6,at,be))return!0}if(ee===2&&!le.redRooksMove.left&&be[K][1]===null&&be[K][2]===null&&be[K][3]===null){const at=bi(G);if(!fa(K,2,at,be)&&!fa(K,3,at,be))return!0}}}return!1},hs=(G,K,ie,se,ee)=>{const be=G===ie?0:(ie-G)/Math.abs(ie-G),Oe=K===se?0:(se-K)/Math.abs(se-K);let et=G+be,at=K+Oe;for(;et!==ie||at!==se;){if(ee[et][at]!==null)return!1;et+=be,at+=Oe}return!0},Gr=(G,K,ie,se,ee,be=!0,Oe=Yn(G),et=l,at=!1)=>{if(!Bb(se,ee))return at||console.log("[ILLEGAL MOVE] Out of board:",{piece:G,startRow:K,startCol:ie,endRow:se,endCol:ee}),!1;const An=et[se][ee];if(An&&Yn(An)===Oe)return at||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:G,startRow:K,startCol:ie,endRow:se,endCol:ee}),!1;const fr=G.toLowerCase();let vn=!1;switch(fr){case"p":vn=Om(Oe,K,ie,se,ee,et);break;case"r":vn=q1(K,ie,se,ee,et);break;case"n":vn=Fb(K,ie,se,ee);break;case"b":vn=V1(K,ie,se,ee,et);break;case"q":vn=K1(K,ie,se,ee,et);break;case"k":vn=Hf(Oe,K,ie,se,ee,et);break}return vn?vn&&be&&ds(K,ie,se,ee,Oe,et)?(at||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:G,startRow:K,startCol:ie,endRow:se,endCol:ee}),!1):vn:(at||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:G,startRow:K,startCol:ie,endRow:se,endCol:ee,playerColor:Oe,pieceType:fr,targetPiece:et[se][ee],targetPieceColor:et[se][ee]?Yn(et[se][ee]):null}),!1)},Po=(G,K=l,ie=d)=>{const se=[],ee=K[G.row][G.col];if(!ee||Yn(ee)!==ie)return se;const be=ee.toLowerCase();if(be==="p"){const Oe=ie==="blue"?-1:1,et=ie==="blue"?6:1,at=G.row+Oe;if(at>=0&&at<8&&Gr(ee,G.row,G.col,at,G.col,!0,ie,K,!0)&&se.push({row:at,col:G.col}),G.row===et){const An=G.row+2*Oe;An>=0&&An<8&&Gr(ee,G.row,G.col,An,G.col,!0,ie,K,!0)&&se.push({row:An,col:G.col})}for(const An of[-1,1]){const fr=G.col+An,vn=G.row+Oe;fr>=0&&fr<8&&vn>=0&&vn<8&&Gr(ee,G.row,G.col,vn,fr,!0,ie,K,!0)&&se.push({row:vn,col:fr})}}else if(be==="n"){const Oe=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[et,at]of Oe){const An=G.row+et,fr=G.col+at;An>=0&&An<8&&fr>=0&&fr<8&&Gr(ee,G.row,G.col,An,fr,!0,ie,K,!0)&&se.push({row:An,col:fr})}}else for(let Oe=0;Oe<8;Oe++)for(let et=0;et<8;et++)Gr(ee,G.row,G.col,Oe,et,!0,ie,K,!0)&&se.push({row:Oe,col:et});return se},Jn=(G,K=l)=>{if(!Qn(K,G))return!1;for(let ie=0;ie<8;ie++)for(let se=0;se<8;se++){const ee=K[ie][se];if(ee&&Yn(ee)===G&&Po({row:ie,col:se},K,G).length>0)return!1}return!0},oc=(G,K=l)=>{if(Qn(K,G))return!1;for(let ie=0;ie<8;ie++)for(let se=0;se<8;se++){const ee=K[ie][se];if(ee&&Yn(ee)===G&&Po({row:ie,col:se},K,G).length>0)return!1}return!0},km=(G,K)=>{if(g!=="active"||ue.current)return;const ie=l[G][K],se=ie?Yn(ie):null;if(f&&S.some(ee=>ee.row===G&&ee.col===K)){pa(f,{row:G,col:K});return}if(ie&&se===d){const ee=Po({row:G,col:K});p({row:G,col:K}),O(ee);return}p(null),O([])},pa=(G,K,ie=!1)=>{const se=l[G.row][G.col];if(console.log("[MOVE ATTEMPT]",{from:G,to:K,piece:se,isAIMove:ie,board:JSON.parse(JSON.stringify(l)),moveHistory:_}),!!se){if(se.toLowerCase()==="p"&&(Yn(se)==="blue"&&K.row===0||Yn(se)==="red"&&K.row===7)){k({from:G,to:K}),R(!0);return}zb(G,K,"q",ie)}};Ne.current=pa;const mR=D.useCallback((G,K,ie=!1)=>{Sr(!0);const se=l.map(Oe=>[...Oe]),ee=se[G.row][G.col];if(!ee)return;se[K.row][K.col]=ee,se[G.row][G.col]=null,Z1(se,G,K,ee);const be=UU(G,K);if(I(Oe=>{const et=[...Oe,be];return console.log("[MOVE HISTORY UPDATED]",et),et}),F({from:G,to:K}),p(null),O([]),_.length<10&&!ie){const Oe=HW(se,d==="blue"?"red":"blue");it(Oe).then(et=>{et&&et.moves&&et.moves.length>0&&(jt(et.moves.slice(0,3)),Tt(!0),setTimeout(()=>Tt(!1),5e3))})}vR(G,K,ee),h(Oe=>{const et=Oe==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",et),yR(se,et),et}),yR(se,d==="blue"?"red":"blue"),u(se),ue.current=!1,st.current=!1,Ot.current=!1,Sr(!1)},[l,d,_,it]);D.useEffect(()=>{if(!ue.current&&a==="ai"&&d==="red"&&!st.current&&!zn)if(ue.current=!0,y==="easy")setTimeout(()=>{const G=ti(l);G?pa(G.from,G.to,!0):ue.current=!1},600);else{A("AI is calculating...");const G=HW(l,d);if(Ot.current)return;Ot.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:G,difficulty:y,movetime:3e3})}).then(ie=>{if(ie.ok)return ie.json();throw new Error("API call failed")}).then(ie=>{console.log("[DEBUG] Stockfish API response:",ie);const se=ie.bestmove||ie.move;if(se&&se!=="(none)"&&se.length===4){const ee=se.charCodeAt(0)-97,be=parseInt(se[1]),Oe=se.charCodeAt(2)-97,et=parseInt(se[3]),at=8-be,An=8-et;if(console.log("[DEBUG] Parsed move:",{fromCol:ee,fromRowStockfish:be,toCol:Oe,toRowStockfish:et,fromRow:at,toRow:An}),ee>=0&&ee<8&&at>=0&&at<8&&Oe>=0&&Oe<8&&An>=0&&An<8){const fr={from:{row:at,col:ee},to:{row:An,col:Oe}},vn=l[at][ee];if(console.log("[DEBUG] Move validation:",{piece:vn,moveObj:fr,isValid:vn&&Yn(vn)==="red"&&Gr(vn,at,ee,An,Oe,!0,"red",l)}),vn&&Yn(vn)==="red"&&Gr(vn,at,ee,An,Oe,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",fr),pa(fr.from,fr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const au=ti(l);au&&pa(au.from,au.to,!0),ue.current=!1,Ot.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const fr=ti(l);fr&&pa(fr.from,fr.to,!0),ue.current=!1,Ot.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const ee=ti(l);ee&&pa(ee.from,ee.to,!0),ue.current=!1,Ot.current=!1}}).catch(ie=>{console.error("[DEBUG] Stockfish API error:",ie),A("AI error. Falling back to random moves.");const se=ti(l);se&&pa(se.from,se.to,!0),ue.current=!1,Ot.current=!1})}},[d,a,y,l,le,Xe]);const yR=(G,K)=>{console.log("Checking game end for player:",K);const ie=G.some(ee=>ee.some(be=>be==="k")),se=G.some(ee=>ee.some(be=>be==="K"));if(!ie)return console.log("[GAME END] KING CAPTURED - Red wins!"),w("checkmate"),A("King captured! Red wins!"),_n("loss"),Ee(!0),setTimeout(()=>Ee(!1),3e3),"checkmate";if(!se)return console.log("[GAME END] KING CAPTURED - Blue wins!"),w("checkmate"),A("King captured! You win!"),_n("win"),Ee(!0),setTimeout(()=>Ee(!1),3e3),"checkmate";if(console.log("Is king in check:",Qn(G,K)),Jn(K,G)){console.log("[GAME END] CHECKMATE",{winner:K==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(G)),moveHistory:_}),w("checkmate");const ee=K==="blue"?"red":"blue";return ee==="blue"?(A("Checkmate! You win!"),tl("victory"),X1(!0),G1(!0),Hb(),_n("win"),Ee(!0),setTimeout(()=>Ee(!1),3e3)):(A(`Checkmate! ${ee==="red"?"AI":"Opponent"} wins!`),tl("loser"),Gb(!0),_n("loss"),Ee(!0),setTimeout(()=>Ee(!1),3e3)),"checkmate"}if(oc(K,G)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(G)),moveHistory:_}),w("stalemate");const ee=K==="blue"?"red":"blue";return ee==="blue"?(A("Stalemate! You win!"),tl("victory"),X1(!0),G1(!0),Hb(),_n("win"),Ee(!0),setTimeout(()=>Ee(!1),3e3)):(A(`Stalemate! ${ee==="red"?"AI":"Opponent"} wins!`),tl("loser"),Gb(!0),_n("loss"),Ee(!0),setTimeout(()=>Ee(!1),3e3)),"stalemate"}return Qn(G,K)?(console.log("CHECK detected!"),tl("check"),A(`${K==="blue"?"Blue":"Red"} is in check!`)):A("Your turn"),null},ti=G=>{const K=[];for(let ee=0;ee<8;ee++)for(let be=0;be<8;be++){const Oe=G[ee][be];Oe&&Yn(Oe)==="red"&&K.push({row:ee,col:be})}for(let ee=K.length-1;ee>0;ee--){const be=Math.floor(Math.random()*(ee+1));[K[ee],K[be]]=[K[be],K[ee]]}const ie=[],se=[];for(const ee of K){const be=Po(ee,G,"red");for(const Oe of be){const et=G[Oe.row][Oe.col];if(et&&Yn(et)==="blue"){const An={p:100,n:320,b:330,r:500,q:900,k:2e4}[et.toLowerCase()]||0;ie.push({from:ee,to:Oe,value:An})}else se.push({from:ee,to:Oe})}}if(ie.length>0&&Math.random()<.3){ie.sort((ee,be)=>ee.value-be.value);for(const ee of ie){const be=G.map(et=>[...et]),Oe=be[ee.from.row][ee.from.col];if(be[ee.to.row][ee.to.col]=Oe,be[ee.from.row][ee.from.col]=null,!Qn(be,"red"))return{from:ee.from,to:ee.to}}}for(const ee of se){const be=G.map(et=>[...et]),Oe=be[ee.from.row][ee.from.col];if(be[ee.to.row][ee.to.col]=Oe,be[ee.from.row][ee.from.col]=null,!Qn(be,"red"))return ee}ie.sort((ee,be)=>ee.value-be.value);for(const ee of ie){const be=G.map(et=>[...et]),Oe=be[ee.from.row][ee.from.col];if(be[ee.to.row][ee.to.col]=Oe,be[ee.from.row][ee.from.col]=null,!Qn(be,"red"))return{from:ee.from,to:ee.to}}return null},wR=()=>{u(JSON.parse(JSON.stringify(zW))),h("blue"),p(null),w("active"),I([]),O([]),F(null),z(!1),A("Select match mode"),oe({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ue.current&&(ue.current=!1)},$r=()=>{if(Vb(),console.log("[DEBUG] startGame called, difficulty:",y,"gameMode:",a),a==="online"){z(!1),X(!1);return}z(!0),X(!1),A("Match started! Your turn");const G=dt();el(G),console.log("[DEBUG] Match started with chessboard:",G)},Y1=G=>`${G.slice(0,6)}...${G.slice(-4)}`,Q1=(G,K)=>{const ie=l[G][K],se=(f==null?void 0:f.row)===G&&(f==null?void 0:f.col)===K,ee=S.some(Oe=>Oe.row===G&&Oe.col===K),be=P&&(P.from.row===G&&P.from.col===K||P.to.row===G&&P.to.col===K);return m.jsxs("div",{className:`square ${se?"selected":""} ${ee?"legal-move":""} ${be?"last-move":""}`,onClick:()=>km(G,K),onTouchStart:Oe=>ga(G,K,Oe),onTouchMove:Nd,children:[ie&&m.jsx("div",{className:"piece",style:{backgroundImage:wS[ie]?`url(${wS[ie]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ee&&m.jsx("div",{className:"legal-move-indicator"})]},`${G}-${K}`)},jb=()=>{if(!T||!U)return null;const G=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:G.map(K=>m.jsx("div",{className:"promotion-piece",onClick:()=>{zb(U.from,U.to,K),R(!1),k(null)},style:{backgroundImage:wS[K]?`url(${wS[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},K))})]})})},[Wb,bR]=D.useState(null),J1=(G=!1,K="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${G?" piece-gallery-sm":""}`,children:[m.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:uHe.map(ie=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{bR(Wb===ie.key?null:ie.key)},children:[m.jsx("img",{src:ie.img,alt:ie.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:ie.name}),Wb===ie.key&&m.jsx("div",{className:"piece-gallery-desc",children:ie.desc})]},ie.key))}),m.jsx("div",{className:"piece-gallery-tip",children:K})]}),Id=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),m.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${y==="easy"?" selected":""}`,style:{background:y==="easy"?"#00ff00":"transparent",color:y==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${y==="hard"?" selected":""}`,style:{background:y==="hard"?"#00ff00":"transparent",color:y==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{$r()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Match"]})]})})}),Z1=(G,K,ie,se)=>{if(se.toLowerCase()==="p"&&(Yn(se)==="blue"&&ie.row===0||Yn(se)==="red"&&ie.row===7)){const ee=Yn(se)==="blue"?"q":"Q";G[ie.row][ie.col]=ee}if(se.toLowerCase()==="k"&&Math.abs(K.col-ie.col)===2){if(ie.col===6)G[K.row][7]=null,G[K.row][5]=Yn(se)==="blue"?"r":"R";else if(ie.col===2){const ee=G[K.row][3];ee&&ee.toLowerCase()==="q"&&(G[K.row][4]=ee),G[K.row][0]=null,G[K.row][3]=Yn(se)==="blue"?"r":"R"}}},UU=(G,K,ie,se)=>{const ee=en(G.row,G.col),be=en(K.row,K.col);return`${ee}-${be}`},vR=(G,K,ie)=>{const se={...le};ie.toLowerCase()==="k"?Yn(ie)==="blue"?se.blueKingMoved=!0:se.redKingMoved=!0:ie.toLowerCase()==="r"&&(Yn(ie)==="blue"?(G.col===0&&(se.blueRooksMove.left=!0),G.col===7&&(se.blueRooksMove.right=!0)):(G.col===0&&(se.redRooksMove.left=!0),G.col===7&&(se.redRooksMove.right=!0))),ie.toLowerCase()==="p"&&Math.abs(G.row-K.row)===2?se.lastPawnDoubleMove={row:K.row,col:K.col}:se.lastPawnDoubleMove=null,oe(se)},zb=(G,K,ie="q",se=!1)=>{l[G.row][G.col];const be=l[K.row][K.col]!==null;if(tl(be?"capture":"move"),be){j({row:K.row,col:K.col,show:!0}),setTimeout(()=>{mR(G,K,se),j(null)},500);return}mR(G,K,se)},tl=G=>{if(!zf)return;let K="";switch(G){case"move":K="/images/move.mp3";break;case"capture":K="/images/capture.mp3";break;case"check":K="/images/play.mp3";break;case"checkmate":K="/images/victory.mp3";break;case"victory":K="/images/victory.mp3";break;case"loser":K="/images/loser.mp3";break;case"upgrade":K="/images/upgrade.mp3";break;default:K="/images/move.mp3"}new Audio(K).play().catch(()=>{})},Hb=()=>{tl("victory");for(let G=0;G<50;G++)setTimeout(()=>{const K=document.createElement("div");K.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),3e3)},G*100);for(let G=0;G<15;G++)setTimeout(()=>{const K=document.createElement("div"),ie=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],se=ie[Math.floor(Math.random()*ie.length)];K.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${se};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),6e3)},G*200);setTimeout(()=>G1(!1),5e3)},[BU,X1]=D.useState(!1),[eA,Gb]=D.useState(!1),tA=()=>{X1(!1),Gb(!1)},Gf=()=>{tA(),wR()},qb=()=>{tA(),z(!1)},Vb=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},qf=a==="online",[ni,ac]=D.useState("leaderboard"),ga=(G,K,ie)=>{ie.preventDefault(),km(G,K)},Nd=G=>{G.preventDefault()};return qf?m.jsx(Lne,{onClose:t,onMinimize:e,fullscreen:n}):!q&&!Xt?m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[ni==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((G,K)=>{if(typeof G=="object"&&G!==null&&"username"in G&&"wins"in G&&"losses"in G&&"draws"in G&&"points"in G){const ie=G;return m.jsxs("tr",{children:[m.jsx("td",{children:K+1}),m.jsx("td",{children:Y1(ie.username)}),m.jsx("td",{children:ie.points})]},ie.username)}return null})})]})})]}),ni==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:J1(!0,"Click pieces to learn more")})]}),m.jsx("div",{className:"center-area",children:m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:m.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${qf?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===yS.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Match"}),qf&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with tDMT wagers"}),m.jsx("p",{children:"Create or join matches instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Match Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),m.jsx("p",{children:m.jsx("strong",{children:"Piece Movements:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Special Rules:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Match Modes:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Single Player:"})," Choose easy or Hard difficulty and practice against the computer."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Multiplayer:"})," wage $DMT, $LAWB, $GOLD or $MOSS and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Multiplayer Flow:"})}),m.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),m.jsx("li",{children:"Create a match and set your wager amount in $DMT, $LAWB, $GOLD or $MOSS"}),m.jsx("li",{children:"Share your invite code with an opponent"}),m.jsx("li",{children:"Opponent joins and matches your wager"}),m.jsx("li",{children:"Match begins automatically - Blue (Player 1) moves first"}),m.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Leaderboard:"})," All matches are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",m.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),m.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Chain ID:"})," 1996"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),m.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:m.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[m.jsx("button",{className:ni==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ac("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:ni==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ac("gallery"),children:"Gallery"})]})]})})]})]}):m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${q?" game-active":""}`,children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[ni==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((G,K)=>{if(typeof G=="object"&&G!==null&&"username"in G&&"wins"in G&&"losses"in G&&"draws"in G&&"points"in G){const ie=G;return m.jsxs("tr",{children:[m.jsx("td",{children:K+1}),m.jsx("td",{children:Y1(ie.username)}),m.jsx("td",{children:ie.points})]},ie.username)}return null})})]})})]}),ni==="moves"&&q&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:_.slice().reverse().map((G,K)=>m.jsx("li",{children:G},_.length-1-K))})]}),ni==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:J1(!0,"Click pieces to learn more")})]}),m.jsxs("div",{className:"center-area",children:[q&&m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===yS.AI&&m.jsxs("span",{className:"mode-play",children:[y==="easy"?"Easy":"Hard"," AI"]}),qf&&m.jsxs("span",{className:"wager-display",children:["Wager: ",ne," tDMT"]})]}),q?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${qi})`},children:[Array.from({length:8},(G,K)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(ie,se)=>Q1(K,se))},K)),M&&M.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${M.row*12.5}%`,left:`${M.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsxs("div",{className:"sidebar-toggle-group",children:[m.jsx("button",{className:ni==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ac("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:ni==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ac("moves"),children:"Moves"}),m.jsx("button",{className:ni==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ac("gallery"),children:"Gallery"})]}),m.jsx("button",{onClick:Gf,children:"New Match"}),m.jsx("button",{onClick:qb,children:"Menu"})]})]}):Xt?Id():m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:m.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${qf?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===yS.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Game"}),qf&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with tDMT wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),m.jsx("p",{children:m.jsx("strong",{children:"Piece Movements:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Special Rules:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Game Modes:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Multiplayer:"})," wage DMT and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Multiplayer Flow:"})}),m.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),m.jsx("li",{children:"Create a game and set your wager amount in DMT"}),m.jsx("li",{children:"Share your invite code with an opponent"}),m.jsx("li",{children:"Opponent joins and matches your wager"}),m.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),m.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",m.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),m.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Chain ID:"})," 1996"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),m.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:m.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[m.jsx("button",{className:ni==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ac("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:ni==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ac("gallery"),children:"Gallery"})]})]})]})]}),ce&&J1(!0),T&&jb(),me&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),BU&&m.jsxs("div",{className:"victory-overlay",children:[m.jsx("div",{className:"balloons-container"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Victory!"}),m.jsx("button",{onClick:Gf,children:"New Match"})]})})]}),eA&&m.jsxs("div",{className:"defeat-overlay",children:[m.jsx("div",{className:"blood-overlay"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Defeat!"}),m.jsx("button",{onClick:Gf,children:"Try Again"})]})})]})]})};function HW(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const GW=()=>{const[t,e]=D.useState("singleplayer"),n=()=>{window.location.href="/"};return m.jsx("div",{className:"chess-page",children:m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(fHe,{onClose:n}):m.jsx(Lne,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},pHe=Symbol(),qW=Object.getPrototypeOf,G5=new WeakMap,gHe=t=>t&&(G5.has(t)?G5.get(t):qW(t)===Object.prototype||qW(t)===Array.prototype),mHe=t=>gHe(t)&&t[pHe]||null,VW=(t,e=!0)=>{G5.set(t,e)},sN={},PU=t=>typeof t=="object"&&t!==null,yHe=t=>PU(t)&&!W1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),$ne=(t,e)=>{const n=q5.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return VW(r,!0),q5.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(W1.has(i))VW(i,!1);else if(Df.has(i)){const[c,l]=Df.get(i);a.value=$ne(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},wHe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(KW(l,o)||S_.has(o)&&KW(l,S_.get(o))))return!0;n(i),PU(o)&&(o=mHe(o)||o);const u=!Df.has(o)&&vHe(o)?hr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Df=new WeakMap,W1=new WeakSet,q5=new WeakMap,tE=[1,1],S_=new WeakMap;let KW=Object.is,bHe=(t,e)=>new Proxy(t,e),vHe=yHe,EHe=$ne,CHe=wHe;function hr(t={}){if(!PU(t))throw new Error("object required");const e=S_.get(t);if(e)return e;let n=tE[0];const r=new Set,s=(w,y=++tE[0])=>{n!==y&&(n=y,r.forEach(b=>b(w,y)))};let i=tE[1];const o=(w=++tE[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const b=y[1](w);b>n&&(n=b)})),n),a=w=>(y,b)=>{const v=[...y];v[1]=[w,...v[1]],s(v,b)},c=new Map,l=(w,y)=>{const b=!W1.has(y)&&Df.get(y);if(b){if((sN?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(w));c.set(w,[b,v])}else c.set(w,[b])}},u=w=>{var y;const b=c.get(w);b&&(c.delete(w),(y=b[1])==null||y.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,v],A)=>{if((sN?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const _=b[2](a(A));c.set(A,[b,_])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,v],A)=>{v&&(v(),c.set(A,[b]))})});let h=!0;const f=CHe(()=>h,l,u,s),p=bHe(t,f);S_.set(t,p);const g=[t,o,d];return Df.set(p,g),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function No(t,e,n){const r=Df.get(t);(sN?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function x_(t){const e=Df.get(t);(sN?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return EHe(n,r())}function rb(t){return W1.add(t),t}function _He(){return{proxyStateMap:Df,refSet:W1,snapCache:q5,versionHolder:tE,proxyCache:S_}}function Gi(t,e,n,r){let s=t[e];return No(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:AHe,snapCache:SHe}=_He(),bS=t=>AHe.has(t);function xHe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=SHe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return bS(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!bS(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!bS(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!bS(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=hr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var YW={};const fe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof YW<"u"?YW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},iN={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=fe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},IHe={bigNumber(t){return t?new Ll(t):new Ll(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ll(0);const n=new Ll(t),r=new Ll(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},NHe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],THe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],RHe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],PHe={getERC20Abi:t=>fe.USDT_CONTRACT_ADDRESSES.includes(t)?RHe:NHe,getSwapAbi:()=>THe},qh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Nt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function C2(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Et={setItem(t,e){nE()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(nE())return localStorage.getItem(t)||void 0},removeItem(t){nE()&&localStorage.removeItem(t)},clear(){nE()&&localStorage.clear()}};function nE(){return typeof window<"u"&&typeof localStorage<"u"}function oN(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Li={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[fe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},nt={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=nt.getActiveNamespace(),e=nt.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Et.setItem(Nt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Et.getItem(Nt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Et.removeItem(Nt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Et.setItem(Nt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Et.setItem(Nt.ACTIVE_CAIP_NETWORK_ID,t),nt.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Et.getItem(Nt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Et.removeItem(Nt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=C2(t);Et.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=nt.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Et.setItem(Nt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Et.getItem(Nt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=C2(t);Et.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Et.getItem(Nt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=C2(t);return Et.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Et.setItem(Nt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Et.getItem(Nt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Et.removeItem(Nt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Et.getItem(Nt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Et.getItem(Nt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Et.setItem(Nt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Et.getItem(Nt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Et.getItem(Nt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Et.setItem(Nt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=nt.getConnectedNamespaces();e.includes(t)||(e.push(t),nt.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=nt.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),nt.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Et.getItem(Nt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Et.setItem(Nt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Et.removeItem(Nt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Et.getItem(Nt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=nt.getBalanceCache();Et.setItem(Nt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=nt.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;nt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=nt.getBalanceCache();e[t.caipAddress]=t,Et.setItem(Nt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Et.getItem(Nt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=nt.getBalanceCache();Et.setItem(Nt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=nt.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),nt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=nt.getNativeBalanceCache();e[t.caipAddress]=t,Et.setItem(Nt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Et.getItem(Nt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=nt.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;nt.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=nt.getEnsCache();e[t.address]=t,Et.setItem(Nt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=nt.getEnsCache();Et.setItem(Nt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Et.getItem(Nt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=nt.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;nt.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=nt.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Et.setItem(Nt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=nt.getIdentityCache();Et.setItem(Nt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Et.removeItem(Nt.PORTFOLIO_CACHE),Et.removeItem(Nt.NATIVE_BALANCE_CACHE),Et.removeItem(Nt.ENS_CACHE),Et.removeItem(Nt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Et.setItem(Nt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Et.getItem(Nt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=nt.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===fe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Et.setItem(Nt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Et.getItem(Nt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=nt.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Et.setItem(Nt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Et.getItem(Nt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=nt.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Et.setItem(Nt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=nt.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Et.setItem(Nt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(nt.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},pt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return pt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Li.TEN_SEC_MS:!0},isAllowedRetry(t,e=Li.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(pt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Li.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(pt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!pt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?nt.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,pt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return fe.W3M_API_URL},getBlockchainApiUrl(){return fe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return fe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Li.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in fe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Rv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class z1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Rv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Rv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Rv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Rv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Rv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const OHe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Li.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(pt.isTelegram()){if(pt.isIos())return t.filter(e=>e!=="google");if(pt.isMac())return t.filter(e=>e!=="x");if(pt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},yt=hr({features:Li.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Li.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),kt={state:yt,subscribeKey(t,e){return Gi(yt,t,e)},setOptions(t){Object.assign(yt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...yt.remoteFeatures,...t};yt.remoteFeatures=e,(n=yt.remoteFeatures)!=null&&n.socials&&(yt.remoteFeatures.socials=OHe.filterSocialsByPlatform(yt.remoteFeatures.socials))},setFeatures(t){if(!t)return;yt.features||(yt.features=Li.DEFAULT_FEATURES);const e={...yt.features,...t};yt.features=e},setProjectId(t){yt.projectId=t},setCustomRpcUrls(t){yt.customRpcUrls=t},setAllWallets(t){yt.allWallets=t},setIncludeWalletIds(t){yt.includeWalletIds=t},setExcludeWalletIds(t){yt.excludeWalletIds=t},setFeaturedWalletIds(t){yt.featuredWalletIds=t},setTokens(t){yt.tokens=t},setTermsConditionsUrl(t){yt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){yt.privacyPolicyUrl=t},setCustomWallets(t){yt.customWallets=t},setIsSiweEnabled(t){yt.isSiweEnabled=t},setIsUniversalProvider(t){yt.isUniversalProvider=t},setSdkVersion(t){yt.sdkVersion=t},setMetadata(t){yt.metadata=t},setDisableAppend(t){yt.disableAppend=t},setEIP6963Enabled(t){yt.enableEIP6963=t},setDebug(t){yt.debug=t},setEnableWalletConnect(t){yt.enableWalletConnect=t},setEnableWalletGuide(t){yt.enableWalletGuide=t},setEnableAuthLogger(t){yt.enableAuthLogger=t},setEnableWallets(t){yt.enableWallets=t},setPreferUniversalLinks(t){yt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(Li.SIWX_DEFAULTS))t[e]??(t[e]=n);yt.siwx=t},setConnectMethodsOrder(t){yt.features={...yt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){yt.features={...yt.features,walletFeaturesOrder:t}},setSocialsOrder(t){yt.remoteFeatures={...yt.remoteFeatures,socials:t}},setCollapseWallets(t){yt.features={...yt.features,collapseWallets:t}},setEnableEmbedded(t){yt.enableEmbedded=t},setAllowUnsupportedChain(t){yt.allowUnsupportedChain=t},setManualWCControl(t){yt.manualWCControl=t},setEnableNetworkSwitch(t){yt.enableNetworkSwitch=t},setEnableReconnect(t){yt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(yt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){yt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return yt.universalProviderConfigOverride},getSnapshot(){return x_(yt)}},kHe=Object.freeze({enabled:!0,events:[]}),DHe=new z1({baseUrl:pt.getAnalyticsUrl(),clientId:null}),MHe=5,LHe=60*1e3,Vd=hr({...kHe}),$He={state:Vd,subscribeKey(t,e){return Gi(Vd,t,e)},async sendError(t,e){if(!Vd.enabled)return;const n=Date.now();if(Vd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<LHe}).length>=MHe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Vd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=kt.state;await DHe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:pt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Vd.enabled=!0},disable(){Vd.enabled=!1},clearEvents(){Vd.events=[]}};class sb extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,sb.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,sb):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function QW(t,e){const n=t instanceof sb?t:new sb(t instanceof Error?t.message:String(t),e,t);throw $He.sendError(n,n.category),n}function ic(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return QW(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return QW(a,e)}},n[r]=i}else n[r]=s}),n}var ib={};const UHe="https://secure.walletconnect.org/sdk",BHe=(typeof process<"u"&&typeof ib<"u"?ib.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||UHe,FHe=(typeof process<"u"&&typeof ib<"u"?ib.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",jHe=(typeof process<"u"&&typeof ib<"u"?ib.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Je={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ks={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Ol={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},WHe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Ol.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ol.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Ol.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ol.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===fe.CHAIN.SOLANA&&t===Ol.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ol.COINBASE.url}/dapp?cb_url=${r}`)}},Mo=hr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),zHe={state:Mo,subscribeNetworkImages(t){return No(Mo.networkImages,()=>t(Mo.networkImages))},subscribeKey(t,e){return Gi(Mo,t,e)},subscribe(t){return No(Mo,()=>t(Mo))},setWalletImage(t,e){Mo.walletImages[t]=e},setNetworkImage(t,e){Mo.networkImages[t]=e},setChainImage(t,e){Mo.chainImages[t]=e},setConnectorImage(t,e){Mo.connectorImages={...Mo.connectorImages,[t]:e}},setTokenImage(t,e){Mo.tokenImages[t]=e},setCurrencyImage(t,e){Mo.currencyImages[t]=e}},Oc=ic(zHe),HHe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},_2=hr({networkImagePromises:{}}),GHe={async fetchWalletImage(t){if(t)return await Ct._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(_2.networkImagePromises[t]||(_2.networkImagePromises[t]=Ct._fetchNetworkImage(t)),await _2.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Oc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Oc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Oc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Oc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Oc.state.connectorImages[t.imageId]},getChainImage(t){return Oc.state.networkImages[HHe[t]]}},Kd=hr({message:"",variant:"info",open:!1}),qHe={state:Kd,subscribeKey(t,e){return Gi(Kd,t,e)},open(t,e){const{debug:n}=kt.state,{shortMessage:r,longMessage:s}=t;n&&(Kd.message=r,Kd.variant=e,Kd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Kd.open=!1,Kd.message="",Kd.variant="info"}},pp=ic(qHe),VHe=pt.getAnalyticsUrl(),KHe=new z1({baseUrl:VHe,clientId:null}),YHe=["MODAL_CREATED"],Eu=hr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Er={state:Eu,subscribe(t){return No(Eu,()=>t(Eu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=kt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Cn.state.address;if(YHe.includes(t.data.event)||typeof window>"u")return;await KHe.post({path:"/e",params:Er.getSdkProperties(),body:{eventId:pt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Eu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===fe.HTTP_STATUS_CODES.FORBIDDEN&&!Eu.reportedErrors.FORBIDDEN&&(pp.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${nE()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Eu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Eu.timestamp=Date.now(),Eu.data=t,(e=kt.state.features)!=null&&e.analytics&&Er._sendAnalyticsEvent(Eu)}},QHe=pt.getApiUrl(),Xi=new z1({baseUrl:QHe,clientId:null}),JHe=40,JW=4,ZHe=20,$t=hr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ct={state:$t,subscribeKey(t,e){return Gi($t,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=kt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return kt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Xi.baseUrl}/getWalletImage/${t}`,n=await Xi.getBlob({path:e,params:Ct._getSdkProperties()});Oc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Xi.baseUrl}/public/getAssetImage/${t}`,n=await Xi.getBlob({path:e,params:Ct._getSdkProperties()});Oc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Xi.baseUrl}/public/getAssetImage/${t}`,n=await Xi.getBlob({path:e,params:Ct._getSdkProperties()});Oc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Xi.baseUrl}/public/getCurrencyImage/${t}`,n=await Xi.getBlob({path:e,params:Ct._getSdkProperties()});Oc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Xi.baseUrl}/public/getTokenImage/${t}`,n=await Xi.getBlob({path:e,params:Ct._getSdkProperties()});Oc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return pt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Ol.COINBASE.id?!0:J.state.activeChain==="solana"&&(n.id===Ol.SOLFLARE.id||n.id===Ol.PHANTOM.id)):t},async fetchProjectConfig(){return(await Xi.get({path:"/appkit/v1/config",params:Ct._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Xi.get({path:"/projects/v1/origins",params:Ct._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===fe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=fe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=J.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!GHe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Ct._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ct.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Ct._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Ct._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Ct._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Ct._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ol).map(o=>o.id));const r=await Xi.get({path:"/getWallets",params:{...Ct._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Ct._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=kt.state;if(t!=null&&t.length){const e={...Ct._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??JW,include:t},{data:n}=await Ct.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Ct._fetchWalletImage(i))),$t.featured=r,$t.allFeatured=r}},async fetchRecommendedWallets(){try{$t.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=kt.state,r=[...e??[],...n??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:JW,include:t,exclude:r,chains:s},{data:o,count:a}=await Ct.fetchWallets(i),c=nt.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Ct._fetchWalletImage(d))),$t.recommended=o,$t.allRecommended=o,$t.count=a??0}catch{}finally{$t.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=kt.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...$t.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:JHe,include:e,exclude:i,chains:s},{data:a,count:c}=await Ct.fetchWallets(o),l=a.slice(0,ZHe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Ct._fetchWalletImage(u))),$t.wallets=pt.uniqueBy([...$t.wallets,...Ct._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),$t.count=c>$t.count?c:$t.count,$t.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Ct.fetchWallets(e);n&&n.forEach(r=>{$t.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=kt.state,s=J.getRequestedCaipNetworkIds().join(",");$t.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Ct.fetchWallets(i);Er.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Ct._fetchWalletImage(c)),pt.wait(300)]),$t.search=Ct._filterOutExtensions(o)},initPromise(t,e){const n=$t.promises[t];return n||($t.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Ct.initPromise("connectorImages",Ct.fetchConnectorImages),e&&Ct.initPromise("featuredWallets",Ct.fetchFeaturedWallets),n&&Ct.initPromise("recommendedWallets",Ct.fetchRecommendedWallets),r&&Ct.initPromise("networkImages",Ct.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=kt.state.features)!=null&&t.analytics&&Ct.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Xi.get({path:"/getAnalyticsConfig",params:Ct._getSdkProperties()});kt.setFeatures({analytics:t})}catch{kt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){$t.featured=$t.allFeatured,$t.recommended=$t.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");$t.featured=$t.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),$t.recommended=$t.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),$t.filteredWallets=$t.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){$t.filteredWallets=[]},setFilterByNamespace(t){if(!t){$t.featured=$t.allFeatured,$t.recommended=$t.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");$t.featured=$t.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),$t.recommended=$t.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),$t.filteredWallets=$t.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Ln=hr({view:"Connect",history:["Connect"],transactionStack:[]}),XHe={state:Ln,subscribeKey(t,e){return Gi(Ln,t,e)},pushTransactionStack(t){Ln.transactionStack.push(t)},popTransactionStack(t){const e=Ln.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Pt.goBack();break;case"cancel":s==null||s(),Pt.goBack();break}},push(t,e){t!==Ln.view&&(Ln.view=t,Ln.history.push(t),Ln.data=e)},reset(t,e){Ln.view=t,Ln.history=[t],Ln.data=e},replace(t,e){Ln.history.at(-1)===t||(Ln.view=t,Ln.history[Ln.history.length-1]=t,Ln.data=e)},goBack(){var r;const t=J.state.activeCaipAddress,e=Pt.state.view==="ConnectingFarcaster",n=!t&&e;if(Ln.history.length>1){Ln.history.pop();const[s]=Ln.history.slice(-1);s&&(t&&s==="Connect"?Ln.view="Account":Ln.view=s)}else sr.close();(r=Ln.data)!=null&&r.wallet&&(Ln.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Cn.setFarcasterUrl(void 0,J.state.activeChain);const a=ct.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=x_(kt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Ln.history.length>1){Ln.history=Ln.history.slice(0,t+1);const[e]=Ln.history.slice(-1);e&&(Ln.view=e)}},goBackOrCloseModal(){Pt.state.history.length>1?Pt.goBack():sr.close()}},Pt=ic(XHe),Cu=hr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),V5={state:Cu,subscribe(t){return No(Cu,()=>t(Cu))},setThemeMode(t){Cu.themeMode=t;try{const e=ct.getAuthConnector();if(e){const n=V5.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:oN(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Cu.themeVariables={...Cu.themeVariables,...t};try{const e=ct.getAuthConnector();if(e){const n=V5.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:oN(Cu.themeVariables,Cu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return x_(Cu)}},vS=ic(V5),Une={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},mn=hr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Une},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),eGe={state:mn,subscribe(t){return No(mn,()=>{t(mn)})},subscribeKey(t,e){return Gi(mn,t,e)},initialize(t){t.forEach(e=>{const n=nt.getConnectedConnectorId(e);n&&ct.setConnectorId(n,e)})},setActiveConnector(t){t&&(mn.activeConnector=rb(t))},setConnectors(t){t.filter(s=>!mn.allConnectors.some(i=>i.id===s.id&&ct.getConnectorName(i.name)===ct.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&mn.allConnectors.push(rb(s))});const n=ct.getEnabledNamespaces(),r=ct.getEnabledConnectors(n);mn.connectors=ct.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(mn.filterByNamespaceMap).forEach(e=>{mn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{mn.filterByNamespaceMap[e]=!0}),ct.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){mn.filterByNamespaceMap[t]=e,ct.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ct.getEnabledNamespaces(),e=ct.getEnabledConnectors(t),n=ct.areAllNamespacesEnabled();mn.connectors=ct.mergeMultiChainConnectors(e),n?Ct.clearFilterByNamespaces():Ct.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(mn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return mn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(mn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ct.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===fe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=ct.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===fe.CONNECTOR_ID.AUTH){const s=t,i=x_(kt.state),o=vS.getSnapshot().themeMode,a=vS.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:oN(a,o)}),ct.setConnectors([t])}else ct.setConnectors([t])},getAuthConnector(t){var r;const e=t||J.state.activeChain,n=mn.connectors.find(s=>s.id===fe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return mn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return mn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return mn.allConnectors.filter(r=>r.chain===J.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=x_(kt.state),r=vS.getSnapshot().themeMode,s=vS.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:oN(s,r)})},getConnectorsByNamespace(t){const e=mn.allConnectors.filter(n=>n.chain===t);return ct.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&ru(t)===Ks.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=ct.getConnector(t.id,t.rdns);WHe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,J.state.activeChain),e?Pt.push("ConnectingExternal",{connector:e}):Pt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ct.getConnectorsByNamespace(t):ct.mergeMultiChainConnectors(mn.allConnectors)},setFilterByNamespace(t){mn.filterByNamespace=t,mn.connectors=ct.getConnectors(t),Ct.setFilterByNamespace(t)},setConnectorId(t,e){t&&(mn.activeConnectorIds={...mn.activeConnectorIds,[e]:t},nt.setConnectedConnectorId(e,t))},removeConnectorId(t){mn.activeConnectorIds={...mn.activeConnectorIds,[t]:void 0},nt.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return mn.activeConnectorIds[t]},isConnected(t){return t?!!mn.activeConnectorIds[t]:Object.values(mn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){mn.activeConnectorIds={...Une}}},ct=ic(eGe),tGe=1e3,Pv={checkNamespaceConnectorId(t,e){return ct.getConnectorId(t)===e},isSocialProvider(t){return Li.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&ct.setActiveConnector(e),s==null||s(pt.isMobile()&&t),r){const l=sr.subscribeKey("open",u=>{u||(Pt.state.view!==r&&Pt.replace(r),l(),a(new Error("Modal closed")))})}const c=J.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&sr.close(),c(),o(qh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=J.subscribeKey("activeCaipAddress",s=>{s&&(sr.close(),r(),e(qh.parseCaipAddress(s)))});ot.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Cn.state.socialWindow,i=Cn.state.socialProvider,o=!1,a=null;const c=J.subscribeKey("activeCaipAddress",l=>{l&&(e&&sr.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===fe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=ct.getAuthConnector();if(g&&!o){s&&(s.close(),Cn.setSocialWindow(void 0,J.state.activeChain),s=Cn.state.socialWindow),o=!0;const w=f.data.resultUri;i&&Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=J.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){nt.setConnectedSocialProvider(i),await ot.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=J.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(qh.parseCaipAddress(b)),Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Cn.setSocialProvider(t,J.state.activeChain),i=Cn.state.socialProvider,Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=sr.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=ct.getAuthConnector();if(p&&!Cn.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();Cn.setFarcasterUrl(g,J.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=ct.getAuthConnector();a=pt.returnOpenHref(`${fe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){Cn.setSocialWindow(a,J.state.activeChain),s=Cn.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=sr.subscribeKey("open",c=>{c||(Pt.state.view!==e&&Pt.replace(e),a(),i(new Error("Modal closed")))})}const o=J.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&sr.close(),o(),s(qh.parseCaipAddress(a)))})})},async updateEmail(){const t=nt.getConnectedConnectorId(J.state.activeChain),e=ct.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==fe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Pt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(sr.close(),clearInterval(i),o(),r({email:a}))},tGe),o=sr.subscribeKey("open",a=>{a||(Pt.state.view!=="Connect"&&Pt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&ru(t)===Ks.ACCOUNT_TYPES.EOA}};function Bne(){var r,s;const t=((r=J.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=J.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Li.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function ru(t){var n;return(n=J.getAccountData(t))==null?void 0:n.preferredAccountType}const Fne={getConnectionStatus(t,e){const n=ct.state.activeConnectorIds[e],r=ot.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=kt.state.remoteFeatures)!=null&&a.multiWallet),n=ct.state.activeConnectorIds[t],r=ot.getConnections(t),i=(ot.state.recentConnections.get(t)??[]).filter(c=>ct.getConnectorById(c.connectorId)),o=Fne.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},gp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Jr=hr({...gp}),nGe={state:Jr,subscribeKey(t,e){return Gi(Jr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=pt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Jr.message=gp.message,Jr.variant=gp.variant,Jr.svg=gp.svg,Jr.open=gp.open,Jr.autoClose=gp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=gp.autoClose}){Jr.open?(Jr.open=!1,setTimeout(()=>{Jr.message=t,Jr.variant=n,Jr.svg=e,Jr.open=!0,Jr.autoClose=r},150)):(Jr.message=t,Jr.variant=n,Jr.svg=e,Jr.open=!0,Jr.autoClose=r)}},Vh=nGe,er=hr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),rGe={state:er,subscribe(t){return No(er,()=>t(er))},setLastNetworkInView(t){er.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");er.loading=!0;try{const r=await xt.fetchTransactions({account:t,cursor:er.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=rE.filterSpamTransactions(r.data),i=rE.filterByConnectedChain(s),o=[...er.transactions,...i];er.loading=!1,e==="coinbase"?er.coinbaseTransactions=rE.groupTransactionsByYearAndMonth(er.coinbaseTransactions,r.data):(er.transactions=o,er.transactionsByYear=rE.groupTransactionsByYearAndMonth(er.transactionsByYear,i)),er.empty=o.length===0,er.next=r.next?r.next:void 0}catch{const s=J.state.activeChain;Er.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:kt.state.projectId,cursor:er.next,isSmartAccount:ru(s)===Ks.ACCOUNT_TYPES.SMART_ACCOUNT}}),Vh.showError("Failed to fetch transactions"),er.loading=!1,er.empty=!0,er.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){er.next=void 0},resetTransactions(){er.transactions=[],er.transactionsByYear={},er.lastNetworkInView=void 0,er.loading=!1,er.empty=!1,er.next=void 0}},rE=ic(rGe,"API_ERROR"),cn=hr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let ip;const sGe={state:cn,subscribe(t){return No(cn,()=>t(cn))},subscribeKey(t,e){return Gi(cn,t,e)},_getClient(){return cn._client},setClient(t){cn._client=rb(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);ot.syncStorageConnections(e)},syncStorageConnections(t){const e=nt.getConnections(),n=t??Array.from(J.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(cn.recentConnections);i.set(r,s),cn.recentConnections=i}},getConnections(t){return t?cn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=ot.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(pt.isTelegram()||pt.isSafari()&&pt.isIos()){if(ip){await ip,ip=void 0;return}if(!pt.isPairingExpired(cn==null?void 0:cn.wcPairingExpiry)){const s=cn.wcUri;cn.wcUri=s;return}ip=(e=(t=ot._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ot.state.status="connecting",await ip,ip=void 0,cn.wcPairingExpiry=void 0,ot.state.status="connected"}else await((r=(n=ot._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=ot._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&J.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=ot._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||J.state.activeChain;e&&ct.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;sr.setLoading(!0,J.state.activeChain);const n=ct.getAuthConnector();n&&(Cn.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),nt.setPreferredAccountTypes(Object.entries(J.state.chains).reduce((s,[i,o])=>{const a=i,c=ru(a);return c!==void 0&&(s[a]=c),s},{})),await ot.reconnectExternal(n),sr.setLoading(!1,J.state.activeChain),Er.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ot._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ot._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ot._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ot._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ot._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ot._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ot._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ot._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){cn.wcUri=void 0,cn.wcPairingExpiry=void 0,cn.wcLinking=void 0,cn.recentWallet=void 0,cn.status="disconnected",rE.resetTransactions(),nt.deleteWalletConnectDeepLink()},resetUri(){cn.wcUri=void 0,cn.wcPairingExpiry=void 0,ip=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ot.state;t&&nt.setWalletConnectDeepLink(t),e&&nt.setAppKitRecent(e),Er.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Pt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){cn.wcBasic=t},setUri(t){cn.wcUri=t,cn.wcPairingExpiry=pt.getPairingExpiry()},setWcLinking(t){cn.wcLinking=t},setWcError(t){cn.wcError=t,cn.buffering=!1},setRecentWallet(t){cn.recentWallet=t},setBuffering(t){cn.buffering=t},setStatus(t){cn.status=t},setIsSwitchingConnection(t){cn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=ot._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new sb("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(cn.connections);n.set(e,t),cn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=Cn.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Pv.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await ot.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=ct.getConnectorById(t.connectorId),s=t.connectorId===fe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await ot.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await ot.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=ct.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===fe.CONNECTOR_ID.AUTH,a=t.connectorId===fe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Pv.isSocialProvider(i)){const{address:d}=await Pv.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){sr.open({view:"ConnectingFarcaster"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else{const{address:d}=await Pv.connectEmail({closeModalOnConnect:r,onOpen(){sr.open({view:"EmailLogin"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Pv.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){sr.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else{const d=await ot.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await ot.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=Cn.getCaipAddress(n);if(o){const{address:c}=qh.parseCaipAddress(o);i=c}const a=Fne.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await ot.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ot.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},ot=ic(sGe),py=hr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),f0={state:py,subscribe(t){return No(py,()=>t(py))},subscribeOpen(t){return Gi(py,"open",t)},set(t){Object.assign(py,{...py,...t})}},iGe={async getTokenList(){var r;const t=J.state.activeCaipNetwork,e=await xt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=J.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(ot==null?void 0:ot.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await xt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await xt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=ot.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await OU.getMyTokensWithBalance(t);return Cn.setTokenBalance(e,J.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Bne(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Pn=hr({tokenBalances:[],loading:!1}),oGe={state:Pn,subscribe(t){return No(Pn,()=>t(Pn))},subscribeKey(t,e){return Gi(Pn,t,e)},setToken(t){t&&(Pn.token=rb(t))},setTokenAmount(t){Pn.sendTokenAmount=t},setReceiverAddress(t){Pn.receiverAddress=t},setReceiverProfileImageUrl(t){Pn.receiverProfileImageUrl=t},setReceiverProfileName(t){Pn.receiverProfileName=t},setNetworkBalanceInUsd(t){Pn.networkBalanceInUSD=t},setLoading(t){Pn.loading=t},async sendToken(){var t;try{switch(Sn.setLoading(!0),(t=J.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Sn.sendEvmToken();return;case"solana":await Sn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Sn.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=J.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=ru(t);if(!Sn.state.sendTokenAmount||!Sn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Sn.state.token)throw new Error("A token is required");(n=Sn.state.token)!=null&&n.address?(Er.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ks.ACCOUNT_TYPES.SMART_ACCOUNT,token:Sn.state.token.address,amount:Sn.state.sendTokenAmount,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Sn.sendERC20Token({receiverAddress:Sn.state.receiverAddress,tokenAddress:Sn.state.token.address,sendTokenAmount:Sn.state.sendTokenAmount,decimals:Sn.state.token.quantity.decimals})):(Er.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ks.ACCOUNT_TYPES.SMART_ACCOUNT,token:Sn.state.token.symbol||"",amount:Sn.state.sendTokenAmount,network:((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Sn.sendNativeToken({receiverAddress:Sn.state.receiverAddress,sendTokenAmount:Sn.state.sendTokenAmount,decimals:Sn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Pn.loading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?pt.getPlainAddress(r):void 0;if(Pn.lastRetry&&!pt.isAllowedRetry(Pn.lastRetry,30*Li.ONE_SEC_MS))return Pn.loading=!1,[];try{if(s&&e&&n){const a=await OU.getMyTokensWithBalance();return Pn.tokenBalances=a,Pn.lastRetry=void 0,a}}catch(a){Pn.lastRetry=Date.now(),t==null||t(a),Vh.showError("Token Balance Unavailable")}finally{Pn.loading=!1}return[]},fetchNetworkBalance(){if(Pn.tokenBalances.length===0)return;const t=iGe.mapBalancesToSwapTokens(Pn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Bne());e&&(Pn.networkBalanceInUSD=e?IHe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Pt.pushTransactionStack({});const e=t.receiverAddress,n=Cn.state.address,r=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ot.sendTransaction({chainNamespace:fe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Er.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:ru("eip155")===Ks.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Sn.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=ot._getClient())==null||a.updateBalance("eip155"),Sn.resetSend()},async sendERC20Token(t){Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}});const e=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Cn.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=pt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await ot.writeContract({fromAddress:Cn.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:PHe.getERC20Abi(n),chainNamespace:fe.CHAIN.EVM}),Sn.resetSend()}},async sendSolanaToken(){var t;if(!Sn.state.sendTokenAmount||!Sn.state.receiverAddress)throw new Error("An amount and receiver address are required");Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}}),await ot.sendTransaction({chainNamespace:"solana",to:Sn.state.receiverAddress,value:Sn.state.sendTokenAmount}),(t=ot._getClient())==null||t.updateBalance("solana"),Sn.resetSend()},resetSend(){Pn.token=void 0,Pn.sendTokenAmount=void 0,Pn.receiverAddress=void 0,Pn.receiverProfileImageUrl=void 0,Pn.receiverProfileName=void 0,Pn.loading=!1,Pn.tokenBalances=[]}},Sn=ic(oGe),A2={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},ES={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},De=hr({chains:xHe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),aGe={state:De,subscribe(t){return No(De,()=>{t(De)})},subscribeKey(t,e){return Gi(De,t,e)},subscribeChainProp(t,e,n){let r;return No(De.chains,()=>{var i;const s=n||De.activeChain;if(s){const o=(i=De.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=nt.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=kt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(De.noAdapters=!0),De.noAdapters||(De.activeChain=a==null?void 0:a.namespace,De.activeCaipNetwork=i,J.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),De.activeChain&&f0.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=nt.getPreferredAccountTypes()||{},f={...kt.state.defaultAccountTypes,...h};J.state.chains.set(u,{namespace:u,networkState:hr({...ES,caipNetwork:d==null?void 0:d[0]}),accountState:hr({...A2,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),J.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(De.activeChain===t){const r=Array.from(De.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&J.setActiveCaipNetwork(s)}}De.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");De.chains.set(t.namespace,{namespace:t.namespace,networkState:{...ES,caipNetwork:r[0]},accountState:A2,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),J.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=De.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),De.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),ct.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=De.chains.get(t);if(n){const o=((r=De.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&J.setActiveCaipNetwork(n.caipNetworks[0]),De.chains.set(t,{...n,caipNetworks:a}),J.setRequestedCaipNetworks(a||[],t),a.length===0&&ct.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=De.chains.get(t);n&&(n.networkState={...n.networkState||ES,...e},De.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=De.chains.get(t);if(r){const s={...r.accountState||A2,...e};De.chains.set(t,{...r,accountState:s}),(De.chains.size===1||De.activeChain===t)&&(e.caipAddress&&(De.activeCaipAddress=e.caipAddress),Cn.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=De.chains.get(t);if(n){const r={...n.networkState||ES,...e};De.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){J.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;De.activeChain=t;const e=t?De.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(De.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,De.activeCaipNetwork=n,J.setChainNetworkData(t,{caipNetwork:n}),nt.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),f0.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;De.activeChain!==t.chainNamespace&&J.setIsSwitchingNamespace(!0);const e=De.chains.get(t.chainNamespace);De.activeChain=t.chainNamespace,De.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?De.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:De.activeCaipAddress=void 0,J.setAccountProp("caipAddress",De.activeCaipAddress,t.chainNamespace),e&&Cn.replaceState(e.accountState),Sn.resetSend(),f0.set({activeChain:De.activeChain,selectedNetworkId:(i=De.activeCaipNetwork)==null?void 0:i.caipNetworkId}),nt.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&kt.state.enableNetworkSwitch&&!kt.state.allowUnsupportedChain&&!ot.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=De.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==J.state.activeChain,n=(s=J.getNetworkData(t))==null?void 0:s.caipNetwork,r=J.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await J.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=J.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=J.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=De.activeCaipNetwork)==null?void 0:a.id)})),s=J.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&sr.close()}catch{Pt.goBack()}Er.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||De.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=De.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||De.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=De.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=De.activeChain;if(e&&(n=e),!n)return;const r=(s=De.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=De.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=De.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return pt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return De.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=J.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));ct.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return De.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=J.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=De.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:De.activeCaipNetwork},getActiveCaipAddress(){return De.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=De.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=J.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());J.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||De.activeCaipNetwork,r=J.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!De.activeChain)return!0;const e=J.getRequestedCaipNetworks(De.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){J.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=iN.caipNetworkIdToNumber((r=De.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=De.activeChain;if(!e||!t)return!1;const n=J.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){sr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=De.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Li.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=J.getAccountProp("preferredAccountType",e);De.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),ct.removeConnectorId(e)},setIsSwitchingNamespace(t){De.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(De.chains.forEach(s=>{fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=De.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=J.state.chains.get(t))==null?void 0:e.accountState:Cn.state},getNetworkData(t){var n;const e=t||De.activeChain;if(e)return(n=J.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=J.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ct.state.filterByNamespace;return(t?[De.chains.get(t)]:Array.from(De.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){De.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return De.lastConnectedSIWECaipNetwork}},J=ic(aGe),cGe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},jne=pt.getBlockchainApiUrl(),eo=hr({clientId:null,api:new z1({baseUrl:jne,clientId:null}),supportedChains:{http:[],ws:[]}}),xt={state:eo,async get(t){const{st:e,sv:n}=xt.getSdkProperties(),r=kt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return eo.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=kt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{eo.supportedChains.http.length||await xt.getSupportedNetworks()}catch{return!1}return eo.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await xt.get({path:"v1/supported-chains"});return eo.supportedChains=t,t}catch{return eo.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await xt.isNetworkSupported(e))return{avatar:"",name:""};const r=nt.getIdentityFromCacheForAddress(t);if(r)return r;const s=await xt.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?pt.getPlainAddress(J.state.activeCaipAddress):void 0}});return nt.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await xt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?xt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await xt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?xt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?eo.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:kt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await xt.isNetworkSupported((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?xt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=xt.getSdkProperties();if(!await xt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return xt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await xt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return eo.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Li.CONVERT_SLIPPAGE_TOLERANCE},projectId:kt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=xt.getSdkProperties();if(!await xt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return xt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=xt.getSdkProperties();if(!await xt.isNetworkSupported((l=J.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Vh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=nt.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await xt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return nt.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Cn.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await xt.isNetworkSupported((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?eo.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await xt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await eo.api.post({path:"/v1/generators/onrampurl",params:{projectId:kt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await xt.isNetworkSupported((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await xt.get({path:"/v1/onramp/options"})}catch{return cGe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await xt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await eo.api.post({path:"/v1/onramp/quote",params:{projectId:kt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await xt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await xt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?eo.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:kt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){eo.clientId=t,eo.api=new z1({baseUrl:jne,clientId:t})}},S2={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return mm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},OU={async getMyTokensWithBalance(t){const e=Cn.state.address,n=J.state.activeCaipNetwork,r=ct.getConnectorId("eip155")===fe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=nt.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===fe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await xt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=S2.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ot.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ot.walletGetAssets({account:t,chainFilter:[s]});if(!S2.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>S2.createBalance(l,e.caipNetworkId));return nt.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},ul=hr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),lGe={state:ul,replaceState(t){t&&Object.assign(ul,rb(t))},subscribe(t){return J.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return J.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){J.setAccountProp("status",t,e)},getCaipAddress(t){return J.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?pt.getPlainAddress(t):void 0;e===J.state.activeChain&&(J.state.activeCaipAddress=t),J.setAccountProp("caipAddress",t,e),J.setAccountProp("address",n,e)},setBalance(t,e,n){J.setAccountProp("balance",t,n),J.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){J.setAccountProp("profileName",t,e)},setProfileImage(t,e){J.setAccountProp("profileImage",t,e)},setUser(t,e){J.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){J.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){J.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){J.setAccountProp("currentTab",t,J.state.activeChain)},setTokenBalance(t,e){t&&J.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){J.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=J.getAccountProp("addressLabels",n)||new Map;r.set(t,e),J.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=J.getAccountProp("addressLabels",e)||new Map;n.delete(t),J.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){J.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){J.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&J.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){J.setAccountProp("socialWindow",t?rb(t):void 0,e)},setFarcasterUrl(t,e){J.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ul.balanceLoading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?pt.getPlainAddress(r):void 0;if(ul.lastRetry&&!pt.isAllowedRetry(ul.lastRetry,30*Li.ONE_SEC_MS))return ul.balanceLoading=!1,[];try{if(s&&e&&n){const a=await OU.getMyTokensWithBalance();return Cn.setTokenBalance(a,n),ul.lastRetry=void 0,ul.balanceLoading=!1,a}}catch(a){ul.lastRetry=Date.now(),t==null||t(a),Vh.showError("Token Balance Unavailable")}finally{ul.balanceLoading=!1}return[]},resetAccount(t){J.resetAccount(t)}},Cn=ic(lGe),uGe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=J.state.activeCaipNetwork,r=Pt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Cn.getCaipAddress(J.state.activeChain),o=t.chainNamespace!==J.state.activeChain,a=Cn.getCaipAddress(t.chainNamespace),l=ct.getConnectorId(J.state.activeChain)===fe.CONNECTOR_ID.AUTH,u=fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Pt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Pt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Pt.push("SwitchNetwork",{...r,network:t})}},to=hr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),dGe={state:to,subscribe(t){return No(to,()=>t(to))},subscribeKey(t,e){return Gi(to,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=J.state.activeChain,r=e&&e!==n,s=(i=J.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(ot.state.wcBasic?Ct.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ct.prefetch(),ct.setFilterByNamespace(t==null?void 0:t.namespace),sr.setLoading(!0,e),e&&r){const a=((o=J.getNetworkData(e))==null?void 0:o.caipNetwork)||J.getRequestedCaipNetworks(e)[0];a&&uGe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=J.state.noAdapters;kt.state.manualWCControl||a&&!s?pt.isMobile()?Pt.reset("AllWallets"):Pt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Pt.reset(t.view,t.data):s?Pt.reset("Account"):Pt.reset("Connect")}to.open=!0,f0.set({open:!0}),Er.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=kt.state.enableEmbedded,e=!!J.state.activeCaipAddress;to.open&&Er.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),to.open=!1,Pt.reset("Connect"),sr.clearLoading(),t?e?Pt.replace("Account"):Pt.push("Connect"):f0.set({open:!1}),ot.resetUri()},setLoading(t,e){e&&to.loadingNamespaceMap.set(e,t),to.loading=t,f0.set({loading:t})},clearLoading(){to.loadingNamespaceMap.clear(),to.loading=!1},shake(){to.shake||(to.shake=!0,setTimeout(()=>{to.shake=!1},500))}},sr=ic(dGe),ZW=2147483648,hGe={convertEVMChainIdToCoinType(t){if(t>=ZW)throw new Error("Invalid chainId");return(ZW|t)>>>0}},Ca=hr({suggestions:[],loading:!1}),fGe={state:Ca,subscribe(t){return No(Ca,()=>t(Ca))},subscribeKey(t,e){return Gi(Ca,t,e)},async resolveName(t){var e,n;try{return await xt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await xt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ca.loading=!0,Ca.suggestions=[];const e=await xt.getEnsNameSuggestions(t);return Ca.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ca.suggestions}catch(e){const n=px.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ca.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const n=nt.getEnsFromCacheForAddress(t);if(n)return n;const r=await xt.reverseLookupEnsName({address:t});return nt.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=px.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=J.state.activeCaipNetwork,n=Cn.state.address,r=ct.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Ca.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Pt.pushTransactionStack({onCancel(){Pt.replace("RegisterAccountName")}});const i=await ot.signMessage(s);Ca.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=hGe.convertEVMChainIdToCoinType(Number(o));await xt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Cn.setProfileName(t,e.chainNamespace),Pt.replace("RegisterAccountNameSuccess")}catch(s){const i=px.parseEnsApiError(s,`Error registering name ${t}`);throw Pt.replace("RegisterAccountName"),new Error(i)}finally{Ca.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},px=ic(fGe);let op=null;const ih={getSIWX(){return kt.state.siwx},async initializeIfEnabled(){var i;const t=kt.state.siwx,e=J.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(J.checkIfSupportedNetwork(n))try{if(op&&await op,(await t.getSessions(`${n}:${r}`,s)).length)return;await sr.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Er.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ot._getClient())==null?void 0:i.disconnect().catch(console.error)),Pt.reset("Connect"),Vh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=kt.state.siwx,e=pt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork(),r=ot._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();ct.getConnectorId(n.chainNamespace)===fe.CONNECTOR_ID.AUTH&&Pt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),J.setLastConnectedSIWECaipNetwork(n),sr.close(),Er.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!sr.state.open||Pt.state.view==="ApproveTransaction")&&await sr.open({view:"SIWXSignMessage"}),Vh.showError("Error signing message"),Er.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=J.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,pt.getPlainAddress(J.getActiveCaipAddress())||""));s&&s.length>0?await J.switchActiveNetwork(r):await ot.disconnect()}else await ot.disconnect()}else sr.close();sr.close(),Er.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=J.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,pt.getPlainAddress(J.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=kt.state.siwx,e=pt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Pt.state.view==="ApproveTransaction",r=Pt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=ih.getSIWX();if(!i||!s.includes(fe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=J.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await ih.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(op)return op;const r=ih.getSIWX();return r?(op=r.addSession({data:t,message:e,signature:n}).finally(()=>{op=null}),op):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=ih.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Vh.showLoading("Authenticating...",{autoClose:!1}),Cn.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Er.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:ih.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Er.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:ih.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Vh.hide()}}return!0},getSIWXEventProperties(){var e;const t=J.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:ru(t)===Ks.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Bo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:fe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Ko={ConnectorExplorerIds:{[fe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[fe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[fe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Bo.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Bo.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Bo.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Bo.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Bo.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Bo.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Bo.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Bo.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Bo.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Bo.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Bo.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[fe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[fe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[fe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[fe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[fe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[fe.CONNECTOR_ID.COINBASE]:"Coinbase",[fe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[fe.CONNECTOR_ID.LEDGER]:"Ledger",[fe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[fe.CONNECTOR_ID.INJECTED]:"INJECTED",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[fe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[fe.CONNECTOR_ID.AUTH]:"AUTH",[Bo.CONNECTOR_TYPE_AUTH]:"AUTH"}},yo={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Bo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=J.state.activeChain;return fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ct.getConnectorId(e)===fe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},pGe=new AbortController,Yd={EmbeddedWalletAbortController:pGe,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},gGe="rpc.walletconnect.org";function XW(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const x2=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],sE={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===gGe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:fe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${fe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return x2.includes(e)?XW(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Ko.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>sE.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Wa(a.url,a.config))}),x2.includes(t.caipNetworkId)&&r.push(Wa(XW(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Wa(a))}),gI(r)},extendWagmiTransports(t,e,n){if(x2.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return gI([n,Wa(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:fe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=nt.getActiveCaipNetworkId(),n=J.getAllRequestedCaipNetworks(),r=Array.from(((c=J.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},ez={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},$s={set(t,e){kl.isClient&&localStorage.setItem(`${Je.STORAGE_KEY}${t}`,e)},get(t){return kl.isClient?localStorage.getItem(`${Je.STORAGE_KEY}${t}`):null},delete(t,e){kl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Je.STORAGE_KEY}${t}`))}},CS=30*1e3,kl={checkIfAllowedToTriggerEmail(){const t=$s.get(Je.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<CS){const n=Math.ceil((CS-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=$s.get(Je.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<CS)return Math.ceil((CS-e)/1e3)}return 0},checkIfRequestExists(t){return Ks.NOT_SAFE_RPC_METHODS.includes(t.method)||Ks.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(ez.transactionHash))||(t==null?void 0:t.match(ez.signedMessage)))?Je.RPC_RESPONSE_TYPE_TX:Je.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ks.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Ir=E.object({message:E.string()});function Be(t){return E.literal(Je[t])}const gR=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const mGe=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),yGe=E.object({email:E.string().email()}),wGe=E.object({otp:E.string()}),bGe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(gR),rpcUrl:E.optional(E.string())}),vGe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(gR),rpcUrl:E.optional(E.string())}),EGe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),CGe=E.object({email:E.string().email()}),_Ge=E.object({otp:E.string()}),AGe=E.object({otp:E.string()}),SGe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),xGe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),IGe=E.object({type:E.string()}),NGe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),TGe=E.object({url:E.string()}),RGe=E.object({userName:E.string()}),PGe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ks.ACCOUNT_TYPES.EOA,Ks.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(gR)}),OGe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),kGe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ks.ACCOUNT_TYPES.EOA,Ks.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(gR)}),DGe=E.object({uri:E.string()}),MGe=E.object({isConnected:E.boolean()}),LGe=E.object({chainId:E.string().or(E.number())}),$Ge=E.object({chainId:E.string().or(E.number())}),UGe=E.object({newEmail:E.string().email()}),BGe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const FGe=E.object({version:E.string().optional()}),jGe=E.object({type:E.string(),address:E.string()}),WGe=E.any(),zGe=E.object({method:E.literal("eth_accounts")}),HGe=E.object({method:E.literal("eth_blockNumber")}),GGe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),qGe=E.object({method:E.literal("eth_chainId")}),VGe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),KGe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),YGe=E.object({method:E.literal("eth_gasPrice")}),QGe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),JGe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),ZGe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),XGe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),eqe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),tqe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),nqe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),rqe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),sqe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),iqe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),oqe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),aqe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),cqe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),lqe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),uqe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),dqe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),hqe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),fqe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),pqe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),gqe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),mqe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),yqe=E.object({method:E.literal("eth_newBlockFilter")}),wqe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),bqe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),vqe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),Eqe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),Cqe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),tz=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),_qe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),Aqe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),Sqe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),xqe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),Iqe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),Nqe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),Tqe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),Rqe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),Pqe=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),Oqe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),kqe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),Dqe=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),nz=E.object({token:E.string()}),Fe=E.object({id:E.string().optional()}),Ov={appEvent:Fe.extend({type:Be("APP_SWITCH_NETWORK"),payload:mGe}).or(Fe.extend({type:Be("APP_CONNECT_EMAIL"),payload:yGe})).or(Fe.extend({type:Be("APP_CONNECT_DEVICE")})).or(Fe.extend({type:Be("APP_CONNECT_OTP"),payload:wGe})).or(Fe.extend({type:Be("APP_CONNECT_SOCIAL"),payload:bGe})).or(Fe.extend({type:Be("APP_GET_FARCASTER_URI")})).or(Fe.extend({type:Be("APP_CONNECT_FARCASTER")})).or(Fe.extend({type:Be("APP_GET_USER"),payload:E.optional(vGe)})).or(Fe.extend({type:Be("APP_GET_SOCIAL_REDIRECT_URI"),payload:EGe})).or(Fe.extend({type:Be("APP_SIGN_OUT")})).or(Fe.extend({type:Be("APP_IS_CONNECTED"),payload:E.optional(nz)})).or(Fe.extend({type:Be("APP_GET_CHAIN_ID")})).or(Fe.extend({type:Be("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Fe.extend({type:Be("APP_INIT_SMART_ACCOUNT")})).or(Fe.extend({type:Be("APP_SET_PREFERRED_ACCOUNT"),payload:IGe})).or(Fe.extend({type:Be("APP_RPC_REQUEST"),payload:tz.or(Dqe).or(zGe).or(HGe).or(GGe).or(qGe).or(VGe).or(KGe).or(YGe).or(QGe).or(JGe).or(ZGe).or(XGe).or(eqe).or(tqe).or(nqe).or(rqe).or(sqe).or(iqe).or(oqe).or(aqe).or(cqe).or(lqe).or(uqe).or(dqe).or(hqe).or(fqe).or(pqe).or(gqe).or(mqe).or(yqe).or(wqe).or(bqe).or(vqe).or(Eqe).or(Cqe).or(tz).or(_qe).or(Aqe).or(Sqe).or(xqe).or(Iqe).or(Nqe).or(Rqe).or(Tqe).or(Pqe).or(Oqe).or(kqe).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL"),payload:CGe})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:_Ge})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:AGe})).or(Fe.extend({type:Be("APP_SYNC_THEME"),payload:SGe})).or(Fe.extend({type:Be("APP_SYNC_DAPP_DATA"),payload:xGe})).or(Fe.extend({type:Be("APP_RELOAD")})).or(Fe.extend({type:Be("APP_RPC_ABORT")})),frameEvent:Fe.extend({type:Be("FRAME_SWITCH_NETWORK_ERROR"),payload:Ir}).or(Fe.extend({type:Be("FRAME_SWITCH_NETWORK_SUCCESS"),payload:$Ge})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_SUCCESS"),payload:NGe})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:TGe})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:RGe})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:PGe})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_GET_USER_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_GET_USER_SUCCESS"),payload:kGe})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:DGe})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_SUCCESS")})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_SUCCESS"),payload:MGe})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_SUCCESS"),payload:LGe})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_SUCCESS"),payload:WGe})).or(Fe.extend({type:Be("FRAME_SESSION_UPDATE"),payload:nz})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SUCCESS"),payload:OGe})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:UGe})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_SUCCESS")})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:BGe})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:jGe})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_READY"),payload:FGe})).or(Fe.extend({type:Be("FRAME_RELOAD_ERROR"),payload:Ir})).or(Fe.extend({type:Be("FRAME_RELOAD_SUCCESS")}))};function I2(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function Mqe({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=fe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(BHe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class Lqe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=fe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!I2(Je.FRAME_EVENT_KEY,u))return;const d=Ov.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}kl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{kl.isClient&&window.addEventListener("message",({data:a})=>{if(!I2(Je.FRAME_EVENT_KEY,a))return;const c=Ov.frameEvent.parse(a);o(c)})},onAppEvent:o=>{kl.isClient&&window.addEventListener("message",({data:a})=>{if(!I2(Je.APP_EVENT_KEY,a))return;const c=Ov.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(kl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");Ov.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(kl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Ov.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),kl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=Mqe({projectId:e,chainId:r,version:jHe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class $qe{constructor(e){var i;const n=xm({level:FHe}),{logger:r,chunkLoggerController:s}=PT({opts:n});this.logger=Js(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Uqe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new $qe(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new Lqe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!$s.get(Je.EMAIL_LOGIN_USED_KEY)}getEmail(){return $s.get(Je.EMAIL)}getUsername(){return $s.get(Je.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Je.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{kl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Je.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Je.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Je.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Je.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Je.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Je.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Je.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Je.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Je.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Je.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Je.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Je.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Je.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Je.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Je.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Je.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Je.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Je.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Je.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Je.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Ks.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Je.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Je.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Je.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ks.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Ks.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Je.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Je.APP_SYNC_DAPP_DATA,Je.APP_SYNC_THEME,Je.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Je.APP_CONNECT_EMAIL,Je.APP_CONNECT_DEVICE,Je.APP_CONNECT_OTP,Je.APP_CONNECT_SOCIAL,Je.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){$s.set(Je.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){$s.set(Je.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&$s.set(Je.EMAIL,e),$s.set(Je.EMAIL_LOGIN_USED_KEY,"true"),$s.delete(Je.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){$s.delete(Je.EMAIL_LOGIN_USED_KEY),$s.delete(Je.EMAIL),$s.delete(Je.LAST_USED_CHAIN_KEY),$s.delete(Je.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&$s.set(Je.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=$s.get(Je.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){$s.set(Je.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=qh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class p0{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return p0.instance||(p0.instance=new Uqe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),p0.instance}}const Bqe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},rz={filterOutDuplicatesByRDNS(t){const e=kt.state.enableEIP6963?ct.state.connectors:[],n=nt.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&pt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=ct.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=nt.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ct.state,{featuredWalletIds:n}=kt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=kt.state.features)==null?void 0:c.connectMethodsOrder),r=e||ct.state.connectors;if(n)return n;const{injected:s,announced:i}=gx.getConnectorsByType(r,Ct.state.recommended,Ct.state.featured),o=s.filter(gx.showConnector),a=i.filter(gx.showConnector);return o.length||a.length?["wallet","email","social"]:Bqe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Ct.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Ct.state.excludedWallets.some(r=>yo.isLowerCaseMatch(r.name,t.name));return e||n}},gx={getConnectorsByType(t,e,n){const{customWallets:r}=kt.state,s=nt.getRecentWallets(),i=rz.filterOutDuplicateWallets(e),o=rz.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Ct.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Ct.state.excludedWallets.some(i=>yo.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!pt.isMobile()||pt.isMobile()&&!e&&!ot.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(n=>ct.getConnectorId(n.namespace)===fe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=kt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:kt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!pt.isMobile())return{accounts:[],chainId:void 0};if(t.id===fe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};od`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;od`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;od`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const mx={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([mx.getAddresses(t),mx.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:mx.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Ko.NetworkImageIds[e.id]]}]})}},gy={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function H1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const sz=H1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),iz=H1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});H1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});H1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});H1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const Fqe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Ng={getMethodsByChainNamespace(t){return Fqe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case sz.caipNetworkId:u.chains.push(sz.deprecatedCaipNetworkId);break;case iz.caipNetworkId:u.chains.push(iz.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await px.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Ng.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Ng.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>pt.isCaipAddress(d)).map(d=>qh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>qh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class jqe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case fe.CHAIN.EVM:await this.syncEVMConnections(e);break;case fe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case fe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=Ng.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await gx.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==fe.CONNECTOR_ID.AUTH&&a.id!==fe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=Ng.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,y;if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const b=Ng.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>pt.createAccount(fe.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:fe.CHAIN.BITCOIN,publicKey:((h=u[gy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[gy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[gy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:fe.CHAIN.BITCOIN,publicKey:((g=u[gy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[gy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[gy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>yo.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>yo.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>yo.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>yo.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>yo.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class Wne{constructor({provider:e,namespace:n}){this.id=fe.CONNECTOR_ID.WALLET_CONNECT,this.name=Ko.ConnectorNamesMap[fe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Ko.ConnectorImageIds[fe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=kt.state.universalProviderConfigOverride,s=Ng.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return ih.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Wqe})}}const Wqe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],zqe=[fe.CONNECTOR_ID.AUTH,fe.CONNECTOR_ID.WALLET_CONNECT];class Hqe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>J.getCaipNetworks(n),this.getConnectorId=n=>ct.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new jqe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:fe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ko.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!yo.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Cn.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=ru(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Wne);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=pt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=pt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=pt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&yo.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=pt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),yo.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?mx.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),yo.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(zqe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function Gqe(t){let e=[],n,r;function s(a){return iN.parseEvmChainId(a)||1}function i(){var a;return n||(n=p0.getInstance({projectId:t.options.projectId,chainId:(a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?pp.open(Yd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?pp.open(Yd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&pp.open(Yd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Yd.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>J.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=iN.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=ru("eip155"),{address:d,chainId:h,accounts:f}=await ih.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:fe.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:fe.CONNECTOR_ID.AUTH,name:fe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:fe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=p0.getInstance({projectId:t.options.projectId,chainId:(c=J.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Yd.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?pp.open(Yd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?pp.open(Yd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&pp.open(Yd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>J.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=J.state.activeChain===fe.CHAIN.EVM;if(fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>ct.getConnectorId(h)===fe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Jl(new Error("chain not found on connector."));const d=await this.getProvider(),h=ru("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Jl(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Ju)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}kU.type="walletConnect";function kU(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:kU.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=J.getCaipNetworks(),w=await this.getProvider();if(!w)throw new nh;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=kt.state.universalProviderConfigOverride;if(!w.session||y){const S=Ng.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),A=await this.getChainId(),_=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,I=_==null?void 0:_.some(S=>Number(S.split(":")[1])===A);let x=1;I?x=A:_!=null&&_[0]&&(x=Number(_[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return w.setDefaultChain(N??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Xr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[fe.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=nt.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=nt.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],b=y==null?void 0:y.find(v=>v.id===w);b&&b.chainNamespace===fe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(fe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[fe.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=J.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new nh;const p=J.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Jl(new UC);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:rt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new Xr(A);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const I=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:_,chainId:rt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:I};await f.request({method:"wallet_addEthereumChain",params:[x]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(_){throw new Xr(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Ju(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(J.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[fe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const kv=hr({pendingTransactions:0}),oz={state:kv,subscribeKey(t,e){return Gi(kv,t,e)},increase(t){kv[t]+=1},decrease(t){kv[t]-=1},reset(t){kv[t]=0}};function qqe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function Vqe(t){if(pt.isSafeApp()){const{safe:e}=await hi(async()=>{const{safe:n}=await import("./index-D_XbkQ7s.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Kqe(t){try{const{coinbaseWallet:e}=await hi(async()=>{const{coinbaseWallet:n}=await import("./index-D_XbkQ7s.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Yqe={enable:!1,pollingInterval:3e4};class Qqe extends Hqe{constructor(e){const n=sE.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=fe.CHAIN.EVM,this.adapterType=fe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Yqe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===fe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>pt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=s0(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>pt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=s0(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===fe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=sE.getCaipNetworkId(s);i?n[s.id]=sE.extendWagmiTransports(s,e.projectId,i):n[s.id]=sE.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=nJ({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=T_e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),oz.increase("pendingTransactions")}});const e=oz.subscribeKey("pendingTransactions",n=>{var r;n>=fe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){YQ(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),QQ(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===fe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:nt.getConnectedSocialProvider(),username:nt.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Kqe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await Vqe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(kU(e,n)),e.enableEIP6963!==!1&&r.push(AT({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(Gqe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Ko.ConnectorNamesMap[r.id]??r.name,imageId:Ko.ConnectorImageIds[r.id],type:Ko.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await x_e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=s0(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await A_e(this.wagmiConfig,s);const i=await S_e(this.wagmiConfig,s);return await ZQ(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(iN.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await XQ(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await w_e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return JEe(e.value,e.decimals)}formatUnits(e){return mm(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===fe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===fe.CONNECTOR_ID.AUTH||e.id===fe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Ko.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Ko.ConnectorNamesMap[e.id]??e.name,imageId:Ko.ConnectorImageIds[e.id],type:Ko.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){JQ(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=bc(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(pt.isSafeApp()&&n===fe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await FS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await FS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await qD(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===fe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,v)=>yo.isLowerCaseMatch(b,r)?-1:yo.isLowerCaseMatch(v,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await FS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await GD(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=nt.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await KQ(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});nt.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=bc(this.wagmiConfig).find(i=>yo.isLowerCaseMatch(i.connector.id,e.id));return await zD(this.wagmiConfig,{connector:n}),kt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=bc(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await zD(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await qD(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=bc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=qqe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=bc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=bc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=bc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ko.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=bc(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(J.state.activeChain==="eip155")return;GD(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Wne({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const zne="7c65f27254d6ddd24cf7eedf2685c4fb",Jqe={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},Zqe=new Qqe({projectId:zne,networks:[Zo,wI,jI,Aee,WI,zI,HI],pendingTransactionsFilter:{enable:!0,pollingInterval:1e3}}),Xqe=rFe({projectId:zne,metadata:Jqe,adapters:[Zqe],networks:[Zo,wI,jI,Aee,WI,zI,HI],features:{analytics:!0}});xee(Xqe);const eVe=new I1e,tVe=typeof window<"u"&&window.location.hostname.startsWith("chess."),nVe=()=>Eje("(max-width: 768px)")?m.jsx(vje,{}):m.jsx(hje,{});Y2.createRoot(document.getElementById("root")).render(m.jsx(ea.StrictMode,{children:m.jsx(J_e,{config:Cje,children:m.jsx(Y1e,{client:eVe,children:m.jsx(uje,{children:m.jsx(aje,{children:tVe?m.jsx(rx,{path:"/*",element:m.jsx(GW,{})}):m.jsxs(m.Fragment,{children:[m.jsx(rx,{path:"/",element:m.jsx(nVe,{})}),m.jsx(rx,{path:"/chess",element:m.jsx(GW,{})})]})})})})})}));export{MKe as $,Ye as A,wt as B,je as C,ut as D,NE as E,f3 as F,Gv as G,Rc as H,FAe as I,$n as J,UKe as K,c5 as L,As as M,LAe as N,ve as O,Ld as P,XS as Q,Ht as R,Mc as S,uo as T,ySe as U,PE as V,qs as W,kKe as X,_s as Y,lm as Z,Nl as _,tx as a,yee as a0,l5 as a1,Vw as a2,hi as a3,RVe as a4,Ju as a5,Jl as a6,UC as a7,rt as a8,Xr as a9,bz as aA,EVe as aB,EC as aC,wwe as aD,F_e as aE,nc as aF,ec as aG,yQ as aH,FEe as aI,nh as aa,uQ as ab,AT as ac,pe as ad,XL as ae,as as af,Pbe as ag,wT as ah,u$ as ai,Lbe as aj,f1 as ak,Qa as al,Ff as am,CE as an,Ql as ao,FDe as ap,EKe as aq,Ej as ar,KZ as as,RDe as at,jDe as au,CKe as av,vKe as aw,jT as ax,SKe as ay,_Ke as az,Bn as b,We as c,lt as d,H as e,mr as f,Zu as g,$Ke as h,od as i,Qo as j,bt as k,ho as l,Ake as m,$l as n,T4e as o,Qe as p,Rl as q,LKe as r,En as s,SJ as t,dr as u,sF as v,ha as w,OKe as x,wi as y,mi as z};
