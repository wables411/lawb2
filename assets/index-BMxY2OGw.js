const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-CRTVNpDj.js","assets/hmac-CFhhC0ZH.js","assets/secp256k1-CYKgVjA5.js","assets/embedded-wallet-B47Qs0ew.js","assets/if-defined-KOZZpYal.js","assets/index-0xeYB15p.js","assets/index-BD5QiqBO.js","assets/ref-BaRPLC9I.js","assets/index-X9OLtEOn.js","assets/index-k4sv9D8m.js","assets/index-BJs4fZRd.js","assets/index-Cln9ts8X.js","assets/index-Dd9FfClo.js","assets/index-JUPvskVr.js","assets/index-xirThUbC.js","assets/email-DxZVxJkT.js","assets/index-B5eisjBG.js","assets/socials-CO21B68L.js","assets/index-DRdnNSTd.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-B3JZHSrN.js","assets/index-BLjSL93R.js","assets/index-CSCfTOjc.js","assets/index-CWHxiZnl.js","assets/swaps-D_pc71Ev.js","assets/index-DDxSaBv3.js","assets/index-DQcEKFmq.js","assets/index-BPKugRcp.js","assets/send-DWWxIbMc.js","assets/index-BvkygbIy.js","assets/index-Q2kRnlbi.js","assets/receive-Csts46wF.js","assets/index-BfdkAKmv.js","assets/onramp-sT-p_Nd6.js","assets/index-C0iLcwwi.js","assets/index-qkxK0e_r.js","assets/index-CYlRm4qr.js","assets/transactions-oYsT6EMr.js","assets/index-Ga_3--sZ.js","assets/index-D2UdZLjz.js","assets/index-B9u2oslk.js","assets/index-DiIeBLIA.js","assets/index-CRn_f6Dj.js","assets/w3m-modal-2kEW2A6F.js"])))=>i.map(i=>d[i]);
var jI=t=>{throw TypeError(t)};var nb=(t,e,n)=>e.has(t)||jI("Cannot "+n);var M=(t,e,n)=>(nb(t,e,"read from private field"),n?n.call(t):e.get(t)),Ae=(t,e,n)=>e.has(t)?jI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ge=(t,e,n,r)=>(nb(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),He=(t,e,n)=>(nb(t,e,"access private method"),n);var Am=(t,e,n,r)=>({set _(s){ge(t,e,s,n)},get _(){return M(t,e,r)}});function FL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ou(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function I0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var CR={exports:{}},T0={},xR={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=Symbol.for("react.element"),zL=Symbol.for("react.portal"),WL=Symbol.for("react.fragment"),qL=Symbol.for("react.strict_mode"),HL=Symbol.for("react.profiler"),VL=Symbol.for("react.provider"),GL=Symbol.for("react.context"),KL=Symbol.for("react.forward_ref"),YL=Symbol.for("react.suspense"),JL=Symbol.for("react.memo"),QL=Symbol.for("react.lazy"),UI=Symbol.iterator;function ZL(t){return t===null||typeof t!="object"?null:(t=UI&&t[UI]||t["@@iterator"],typeof t=="function"?t:null)}var SR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AR=Object.assign,IR={};function hh(t,e,n){this.props=t,this.context=e,this.refs=IR,this.updater=n||SR}hh.prototype.isReactComponent={};hh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function TR(){}TR.prototype=hh.prototype;function Ux(t,e,n){this.props=t,this.context=e,this.refs=IR,this.updater=n||SR}var Lx=Ux.prototype=new TR;Lx.constructor=Ux;AR(Lx,hh.prototype);Lx.isPureReactComponent=!0;var LI=Array.isArray,NR=Object.prototype.hasOwnProperty,Mx={current:null},PR={key:!0,ref:!0,__self:!0,__source:!0};function kR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)NR.call(e,r)&&!PR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Wg,type:t,key:i,ref:o,props:s,_owner:Mx.current}}function XL(t,e){return{$$typeof:Wg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wg}function eM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var MI=/\/+/g;function rb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eM(""+t.key):e.toString(36)}function Uy(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wg:case zL:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+rb(o,0):r,LI(s)?(n="",t!=null&&(n=t.replace(MI,"$&/")+"/"),Uy(s,e,n,"",function(l){return l})):s!=null&&(Bx(s)&&(s=XL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(MI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",LI(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+rb(i,a);o+=Uy(i,e,n,c,s)}else if(c=ZL(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+rb(i,a++),o+=Uy(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Im(t,e,n){if(t==null)return t;var r=[],s=0;return Uy(t,r,"","",function(i){return e.call(n,i,s++)}),r}function tM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ir={current:null},Ly={transition:null},nM={ReactCurrentDispatcher:Ir,ReactCurrentBatchConfig:Ly,ReactCurrentOwner:Mx};function OR(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:Im,forEach:function(t,e,n){Im(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Im(t,function(){e++}),e},toArray:function(t){return Im(t,function(e){return e})||[]},only:function(t){if(!Bx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Je.Component=hh;Je.Fragment=WL;Je.Profiler=HL;Je.PureComponent=Ux;Je.StrictMode=qL;Je.Suspense=YL;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nM;Je.act=OR;Je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=AR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Mx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)NR.call(e,c)&&!PR.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Wg,type:t.type,key:s,ref:i,props:r,_owner:o}};Je.createContext=function(t){return t={$$typeof:GL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VL,_context:t},t.Consumer=t};Je.createElement=kR;Je.createFactory=function(t){var e=kR.bind(null,t);return e.type=t,e};Je.createRef=function(){return{current:null}};Je.forwardRef=function(t){return{$$typeof:KL,render:t}};Je.isValidElement=Bx;Je.lazy=function(t){return{$$typeof:QL,_payload:{_status:-1,_result:t},_init:tM}};Je.memo=function(t,e){return{$$typeof:JL,type:t,compare:e===void 0?null:e}};Je.startTransition=function(t){var e=Ly.transition;Ly.transition={};try{t()}finally{Ly.transition=e}};Je.unstable_act=OR;Je.useCallback=function(t,e){return Ir.current.useCallback(t,e)};Je.useContext=function(t){return Ir.current.useContext(t)};Je.useDebugValue=function(){};Je.useDeferredValue=function(t){return Ir.current.useDeferredValue(t)};Je.useEffect=function(t,e){return Ir.current.useEffect(t,e)};Je.useId=function(){return Ir.current.useId()};Je.useImperativeHandle=function(t,e,n){return Ir.current.useImperativeHandle(t,e,n)};Je.useInsertionEffect=function(t,e){return Ir.current.useInsertionEffect(t,e)};Je.useLayoutEffect=function(t,e){return Ir.current.useLayoutEffect(t,e)};Je.useMemo=function(t,e){return Ir.current.useMemo(t,e)};Je.useReducer=function(t,e,n){return Ir.current.useReducer(t,e,n)};Je.useRef=function(t){return Ir.current.useRef(t)};Je.useState=function(t){return Ir.current.useState(t)};Je.useSyncExternalStore=function(t,e,n){return Ir.current.useSyncExternalStore(t,e,n)};Je.useTransition=function(){return Ir.current.useTransition()};Je.version="18.3.1";xR.exports=Je;var D=xR.exports;const ms=ou(D),rM=FL({__proto__:null,default:ms},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sM=D,iM=Symbol.for("react.element"),oM=Symbol.for("react.fragment"),aM=Object.prototype.hasOwnProperty,cM=sM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lM={key:!0,ref:!0,__self:!0,__source:!0};function RR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)aM.call(e,r)&&!lM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:iM,type:t,key:i,ref:o,props:s,_owner:cM.current}}T0.Fragment=oM;T0.jsx=RR;T0.jsxs=RR;CR.exports=T0;var m=CR.exports,xE={},$R={exports:{}},_s={},DR={exports:{}},jR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,k){var U=P.length;P.push(k);e:for(;0<U;){var z=U-1>>>1,G=P[z];if(0<s(G,k))P[z]=k,P[U]=G,U=z;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var k=P[0],U=P.pop();if(U!==k){P[0]=U;e:for(var z=0,G=P.length,Q=G>>>1;z<Q;){var Y=2*(z+1)-1,Z=P[Y],se=Y+1,Pe=P[se];if(0>s(Z,U))se<G&&0>s(Pe,Z)?(P[z]=Pe,P[se]=U,z=se):(P[z]=Z,P[Y]=U,z=Y);else if(se<G&&0>s(Pe,U))P[z]=Pe,P[se]=U,z=se;else break e}}return k}function s(P,k){var U=P.sortIndex-k.sortIndex;return U!==0?U:P.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var k=n(l);k!==null;){if(k.callback===null)r(l);else if(k.startTime<=P)r(l),k.sortIndex=k.expirationTime,e(c,k);else break;k=n(l)}}function _(P){if(g=!1,v(P),!p)if(n(c)!==null)p=!0,A(E);else{var k=n(l);k!==null&&j(_,k.startTime-P)}}function E(P,k){p=!1,g&&(g=!1,y(T),T=-1),f=!0;var U=h;try{for(v(k),d=n(c);d!==null&&(!(d.expirationTime>k)||P&&!R());){var z=d.callback;if(typeof z=="function"){d.callback=null,h=d.priorityLevel;var G=z(d.expirationTime<=k);k=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(c)&&r(c),v(k)}else r(c);d=n(c)}if(d!==null)var Q=!0;else{var Y=n(l);Y!==null&&j(_,Y.startTime-k),Q=!1}return Q}finally{d=null,h=U,f=!1}}var x=!1,S=null,T=-1,C=5,O=-1;function R(){return!(t.unstable_now()-O<C)}function F(){if(S!==null){var P=t.unstable_now();O=P;var k=!0;try{k=S(!0,P)}finally{k?q():(x=!1,S=null)}}else x=!1}var q;if(typeof b=="function")q=function(){b(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,I=B.port2;B.port1.onmessage=F,q=function(){I.postMessage(null)}}else q=function(){w(F,0)};function A(P){S=P,x||(x=!0,q())}function j(P,k){T=w(function(){P(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,A(E))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var U=h;h=k;try{return P()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,k){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=h;h=P;try{return k()}finally{h=U}},t.unstable_scheduleCallback=function(P,k,U){var z=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?z+U:z):U=z,P){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=U+G,P={id:u++,callback:k,priorityLevel:P,startTime:U,expirationTime:G,sortIndex:-1},U>z?(P.sortIndex=U,e(l,P),n(c)===null&&P===n(l)&&(g?(y(T),T=-1):g=!0,j(_,U-z))):(P.sortIndex=G,e(c,P),p||f||(p=!0,A(E))),P},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(P){var k=h;return function(){var U=h;h=k;try{return P.apply(this,arguments)}finally{h=U}}}})(jR);DR.exports=jR;var uM=DR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dM=D,bs=uM;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UR=new Set,vp={};function au(t,e){qd(t,e),qd(t+"Capture",e)}function qd(t,e){for(vp[t]=e,t=0;t<e.length;t++)UR.add(e[t])}var Fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),SE=Object.prototype.hasOwnProperty,hM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BI={},FI={};function fM(t){return SE.call(FI,t)?!0:SE.call(BI,t)?!1:hM.test(t)?FI[t]=!0:(BI[t]=!0,!1)}function pM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gM(t,e,n,r){if(e===null||typeof e>"u"||pM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hn[t]=new Tr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hn[e]=new Tr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hn[t]=new Tr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hn[t]=new Tr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hn[t]=new Tr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hn[t]=new Tr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hn[t]=new Tr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hn[t]=new Tr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hn[t]=new Tr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fx=/[\-:]([a-z])/g;function zx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fx,zx);Hn[e]=new Tr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fx,zx);Hn[e]=new Tr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fx,zx);Hn[e]=new Tr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hn[t]=new Tr(t,1,!1,t.toLowerCase(),null,!1,!1)});Hn.xlinkHref=new Tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hn[t]=new Tr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wx(t,e,n,r){var s=Hn.hasOwnProperty(e)?Hn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gM(e,n,s,r)&&(n=null),r||s===null?fM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qo=dM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tm=Symbol.for("react.element"),rd=Symbol.for("react.portal"),sd=Symbol.for("react.fragment"),qx=Symbol.for("react.strict_mode"),AE=Symbol.for("react.profiler"),LR=Symbol.for("react.provider"),MR=Symbol.for("react.context"),Hx=Symbol.for("react.forward_ref"),IE=Symbol.for("react.suspense"),TE=Symbol.for("react.suspense_list"),Vx=Symbol.for("react.memo"),Ta=Symbol.for("react.lazy"),BR=Symbol.for("react.offscreen"),zI=Symbol.iterator;function Fh(t){return t===null||typeof t!="object"?null:(t=zI&&t[zI]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,sb;function xf(t){if(sb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sb=e&&e[1]||""}return`
`+sb+t}var ib=!1;function ob(t,e){if(!t||ib)return"";ib=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{ib=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xf(t):""}function mM(t){switch(t.tag){case 5:return xf(t.type);case 16:return xf("Lazy");case 13:return xf("Suspense");case 19:return xf("SuspenseList");case 0:case 2:case 15:return t=ob(t.type,!1),t;case 11:return t=ob(t.type.render,!1),t;case 1:return t=ob(t.type,!0),t;default:return""}}function NE(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sd:return"Fragment";case rd:return"Portal";case AE:return"Profiler";case qx:return"StrictMode";case IE:return"Suspense";case TE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case MR:return(t.displayName||"Context")+".Consumer";case LR:return(t._context.displayName||"Context")+".Provider";case Hx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vx:return e=t.displayName||null,e!==null?e:NE(t.type)||"Memo";case Ta:e=t._payload,t=t._init;try{return NE(t(e))}catch{}}return null}function yM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return NE(e);case 8:return e===qx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wM(t){var e=FR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nm(t){t._valueTracker||(t._valueTracker=wM(t))}function zR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function PE(t,e){var n=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function WI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WR(t,e){e=e.checked,e!=null&&Wx(t,"checked",e,!1)}function kE(t,e){WR(t,e);var n=Sc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?OE(t,e.type,n):e.hasOwnProperty("defaultValue")&&OE(t,e.type,Sc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function OE(t,e,n){(e!=="number"||gw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sf=Array.isArray;function wd(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sc(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function RE(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function HI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(Sf(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sc(n)}}function qR(t,e){var n=Sc(e.value),r=Sc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function VI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $E(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pm,VR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pm=Pm||document.createElement("div"),Pm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ff={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vM=["Webkit","ms","Moz","O"];Object.keys(Ff).forEach(function(t){vM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ff[e]=Ff[t]})});function GR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ff.hasOwnProperty(t)&&Ff[t]?(""+e).trim():e+"px"}function KR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=GR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var bM=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function DE(t,e){if(e){if(bM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function jE(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UE=null;function Gx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var LE=null,vd=null,bd=null;function GI(t){if(t=Vg(t)){if(typeof LE!="function")throw Error(re(280));var e=t.stateNode;e&&(e=R0(e),LE(t.stateNode,t.type,e))}}function YR(t){vd?bd?bd.push(t):bd=[t]:vd=t}function JR(){if(vd){var t=vd,e=bd;if(bd=vd=null,GI(t),e)for(t=0;t<e.length;t++)GI(e[t])}}function QR(t,e){return t(e)}function ZR(){}var ab=!1;function XR(t,e,n){if(ab)return t(e,n);ab=!0;try{return QR(t,e,n)}finally{ab=!1,(vd!==null||bd!==null)&&(ZR(),JR())}}function Ep(t,e){var n=t.stateNode;if(n===null)return null;var r=R0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var ME=!1;if(Fo)try{var zh={};Object.defineProperty(zh,"passive",{get:function(){ME=!0}}),window.addEventListener("test",zh,zh),window.removeEventListener("test",zh,zh)}catch{ME=!1}function EM(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var zf=!1,mw=null,yw=!1,BE=null,_M={onError:function(t){zf=!0,mw=t}};function CM(t,e,n,r,s,i,o,a,c){zf=!1,mw=null,EM.apply(_M,arguments)}function xM(t,e,n,r,s,i,o,a,c){if(CM.apply(this,arguments),zf){if(zf){var l=mw;zf=!1,mw=null}else throw Error(re(198));yw||(yw=!0,BE=l)}}function cu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function e3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function KI(t){if(cu(t)!==t)throw Error(re(188))}function SM(t){var e=t.alternate;if(!e){if(e=cu(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return KI(s),t;if(i===r)return KI(s),e;i=i.sibling}throw Error(re(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function t3(t){return t=SM(t),t!==null?n3(t):null}function n3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=n3(t);if(e!==null)return e;t=t.sibling}return null}var r3=bs.unstable_scheduleCallback,YI=bs.unstable_cancelCallback,AM=bs.unstable_shouldYield,IM=bs.unstable_requestPaint,an=bs.unstable_now,TM=bs.unstable_getCurrentPriorityLevel,Kx=bs.unstable_ImmediatePriority,s3=bs.unstable_UserBlockingPriority,ww=bs.unstable_NormalPriority,NM=bs.unstable_LowPriority,i3=bs.unstable_IdlePriority,N0=null,Yi=null;function PM(t){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(N0,t,void 0,(t.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:RM,kM=Math.log,OM=Math.LN2;function RM(t){return t>>>=0,t===0?32:31-(kM(t)/OM|0)|0}var km=64,Om=4194304;function Af(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Af(a):(i&=o,i!==0&&(r=Af(i)))}else o=n&~s,o!==0?r=Af(o):i!==0&&(r=Af(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vi(e),s=1<<n,r|=t[n],e&=~s;return r}function $M(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vi(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=$M(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function FE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function o3(){var t=km;return km<<=1,!(km&4194240)&&(km=64),t}function cb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vi(e),t[e]=n}function jM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vi(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Yx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vi(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Et=0;function a3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var c3,Jx,l3,u3,d3,zE=!1,Rm=[],ac=null,cc=null,lc=null,_p=new Map,Cp=new Map,Ua=[],UM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JI(t,e){switch(t){case"focusin":case"focusout":ac=null;break;case"dragenter":case"dragleave":cc=null;break;case"mouseover":case"mouseout":lc=null;break;case"pointerover":case"pointerout":_p.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cp.delete(e.pointerId)}}function Wh(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Vg(e),e!==null&&Jx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function LM(t,e,n,r,s){switch(e){case"focusin":return ac=Wh(ac,t,e,n,r,s),!0;case"dragenter":return cc=Wh(cc,t,e,n,r,s),!0;case"mouseover":return lc=Wh(lc,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _p.set(i,Wh(_p.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Cp.set(i,Wh(Cp.get(i)||null,t,e,n,r,s)),!0}return!1}function h3(t){var e=ll(t.target);if(e!==null){var n=cu(e);if(n!==null){if(e=n.tag,e===13){if(e=e3(n),e!==null){t.blockedOn=e,d3(t.priority,function(){l3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function My(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=WE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);UE=r,n.target.dispatchEvent(r),UE=null}else return e=Vg(n),e!==null&&Jx(e),t.blockedOn=n,!1;e.shift()}return!0}function QI(t,e,n){My(t)&&n.delete(e)}function MM(){zE=!1,ac!==null&&My(ac)&&(ac=null),cc!==null&&My(cc)&&(cc=null),lc!==null&&My(lc)&&(lc=null),_p.forEach(QI),Cp.forEach(QI)}function qh(t,e){t.blockedOn===e&&(t.blockedOn=null,zE||(zE=!0,bs.unstable_scheduleCallback(bs.unstable_NormalPriority,MM)))}function xp(t){function e(s){return qh(s,t)}if(0<Rm.length){qh(Rm[0],t);for(var n=1;n<Rm.length;n++){var r=Rm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ac!==null&&qh(ac,t),cc!==null&&qh(cc,t),lc!==null&&qh(lc,t),_p.forEach(e),Cp.forEach(e),n=0;n<Ua.length;n++)r=Ua[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ua.length&&(n=Ua[0],n.blockedOn===null);)h3(n),n.blockedOn===null&&Ua.shift()}var Ed=Qo.ReactCurrentBatchConfig,bw=!0;function BM(t,e,n,r){var s=Et,i=Ed.transition;Ed.transition=null;try{Et=1,Qx(t,e,n,r)}finally{Et=s,Ed.transition=i}}function FM(t,e,n,r){var s=Et,i=Ed.transition;Ed.transition=null;try{Et=4,Qx(t,e,n,r)}finally{Et=s,Ed.transition=i}}function Qx(t,e,n,r){if(bw){var s=WE(t,e,n,r);if(s===null)wb(t,e,r,Ew,n),JI(t,r);else if(LM(s,t,e,n,r))r.stopPropagation();else if(JI(t,r),e&4&&-1<UM.indexOf(t)){for(;s!==null;){var i=Vg(s);if(i!==null&&c3(i),i=WE(t,e,n,r),i===null&&wb(t,e,r,Ew,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else wb(t,e,r,null,n)}}var Ew=null;function WE(t,e,n,r){if(Ew=null,t=Gx(r),t=ll(t),t!==null)if(e=cu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=e3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ew=t,null}function f3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TM()){case Kx:return 1;case s3:return 4;case ww:case NM:return 16;case i3:return 536870912;default:return 16}default:return 16}}var Xa=null,Zx=null,By=null;function p3(){if(By)return By;var t,e=Zx,n=e.length,r,s="value"in Xa?Xa.value:Xa.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return By=s.slice(t,1<r?1-r:void 0)}function Fy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $m(){return!0}function ZI(){return!1}function Cs(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$m:ZI,this.isPropagationStopped=ZI,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$m)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$m)},persist:function(){},isPersistent:$m}),e}var fh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xx=Cs(fh),Hg=Qt({},fh,{view:0,detail:0}),zM=Cs(Hg),lb,ub,Hh,P0=Qt({},Hg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hh&&(Hh&&t.type==="mousemove"?(lb=t.screenX-Hh.screenX,ub=t.screenY-Hh.screenY):ub=lb=0,Hh=t),lb)},movementY:function(t){return"movementY"in t?t.movementY:ub}}),XI=Cs(P0),WM=Qt({},P0,{dataTransfer:0}),qM=Cs(WM),HM=Qt({},Hg,{relatedTarget:0}),db=Cs(HM),VM=Qt({},fh,{animationName:0,elapsedTime:0,pseudoElement:0}),GM=Cs(VM),KM=Qt({},fh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YM=Cs(KM),JM=Qt({},fh,{data:0}),e2=Cs(JM),QM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XM[t])?!!e[t]:!1}function eS(){return eB}var tB=Qt({},Hg,{key:function(t){if(t.key){var e=QM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eS,charCode:function(t){return t.type==="keypress"?Fy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nB=Cs(tB),rB=Qt({},P0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t2=Cs(rB),sB=Qt({},Hg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eS}),iB=Cs(sB),oB=Qt({},fh,{propertyName:0,elapsedTime:0,pseudoElement:0}),aB=Cs(oB),cB=Qt({},P0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lB=Cs(cB),uB=[9,13,27,32],tS=Fo&&"CompositionEvent"in window,Wf=null;Fo&&"documentMode"in document&&(Wf=document.documentMode);var dB=Fo&&"TextEvent"in window&&!Wf,g3=Fo&&(!tS||Wf&&8<Wf&&11>=Wf),n2=" ",r2=!1;function m3(t,e){switch(t){case"keyup":return uB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var id=!1;function hB(t,e){switch(t){case"compositionend":return y3(e);case"keypress":return e.which!==32?null:(r2=!0,n2);case"textInput":return t=e.data,t===n2&&r2?null:t;default:return null}}function fB(t,e){if(id)return t==="compositionend"||!tS&&m3(t,e)?(t=p3(),By=Zx=Xa=null,id=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return g3&&e.locale!=="ko"?null:e.data;default:return null}}var pB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pB[t.type]:e==="textarea"}function w3(t,e,n,r){YR(r),e=_w(e,"onChange"),0<e.length&&(n=new Xx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qf=null,Sp=null;function gB(t){N3(t,0)}function k0(t){var e=cd(t);if(zR(e))return t}function mB(t,e){if(t==="change")return e}var v3=!1;if(Fo){var hb;if(Fo){var fb="oninput"in document;if(!fb){var i2=document.createElement("div");i2.setAttribute("oninput","return;"),fb=typeof i2.oninput=="function"}hb=fb}else hb=!1;v3=hb&&(!document.documentMode||9<document.documentMode)}function o2(){qf&&(qf.detachEvent("onpropertychange",b3),Sp=qf=null)}function b3(t){if(t.propertyName==="value"&&k0(Sp)){var e=[];w3(e,Sp,t,Gx(t)),XR(gB,e)}}function yB(t,e,n){t==="focusin"?(o2(),qf=e,Sp=n,qf.attachEvent("onpropertychange",b3)):t==="focusout"&&o2()}function wB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return k0(Sp)}function vB(t,e){if(t==="click")return k0(e)}function bB(t,e){if(t==="input"||t==="change")return k0(e)}function EB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xi=typeof Object.is=="function"?Object.is:EB;function Ap(t,e){if(xi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!SE.call(e,s)||!xi(t[s],e[s]))return!1}return!0}function a2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function c2(t,e){var n=a2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a2(n)}}function E3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _3(){for(var t=window,e=gw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gw(t.document)}return e}function nS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _B(t){var e=_3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&E3(n.ownerDocument.documentElement,n)){if(r!==null&&nS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=c2(n,i);var o=c2(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CB=Fo&&"documentMode"in document&&11>=document.documentMode,od=null,qE=null,Hf=null,HE=!1;function l2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;HE||od==null||od!==gw(r)||(r=od,"selectionStart"in r&&nS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hf&&Ap(Hf,r)||(Hf=r,r=_w(qE,"onSelect"),0<r.length&&(e=new Xx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=od)))}function Dm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ad={animationend:Dm("Animation","AnimationEnd"),animationiteration:Dm("Animation","AnimationIteration"),animationstart:Dm("Animation","AnimationStart"),transitionend:Dm("Transition","TransitionEnd")},pb={},C3={};Fo&&(C3=document.createElement("div").style,"AnimationEvent"in window||(delete ad.animationend.animation,delete ad.animationiteration.animation,delete ad.animationstart.animation),"TransitionEvent"in window||delete ad.transitionend.transition);function O0(t){if(pb[t])return pb[t];if(!ad[t])return t;var e=ad[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in C3)return pb[t]=e[n];return t}var x3=O0("animationend"),S3=O0("animationiteration"),A3=O0("animationstart"),I3=O0("transitionend"),T3=new Map,u2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jc(t,e){T3.set(t,e),au(e,[t])}for(var gb=0;gb<u2.length;gb++){var mb=u2[gb],xB=mb.toLowerCase(),SB=mb[0].toUpperCase()+mb.slice(1);jc(xB,"on"+SB)}jc(x3,"onAnimationEnd");jc(S3,"onAnimationIteration");jc(A3,"onAnimationStart");jc("dblclick","onDoubleClick");jc("focusin","onFocus");jc("focusout","onBlur");jc(I3,"onTransitionEnd");qd("onMouseEnter",["mouseout","mouseover"]);qd("onMouseLeave",["mouseout","mouseover"]);qd("onPointerEnter",["pointerout","pointerover"]);qd("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var If="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AB=new Set("cancel close invalid load scroll toggle".split(" ").concat(If));function d2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xM(r,e,void 0,t),t.currentTarget=null}function N3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;d2(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;d2(s,a,l),i=c}}}if(yw)throw t=BE,yw=!1,BE=null,t}function Mt(t,e){var n=e[JE];n===void 0&&(n=e[JE]=new Set);var r=t+"__bubble";n.has(r)||(P3(e,t,2,!1),n.add(r))}function yb(t,e,n){var r=0;e&&(r|=4),P3(n,t,r,e)}var jm="_reactListening"+Math.random().toString(36).slice(2);function Ip(t){if(!t[jm]){t[jm]=!0,UR.forEach(function(n){n!=="selectionchange"&&(AB.has(n)||yb(n,!1,t),yb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jm]||(e[jm]=!0,yb("selectionchange",!1,e))}}function P3(t,e,n,r){switch(f3(e)){case 1:var s=BM;break;case 4:s=FM;break;default:s=Qx}n=s.bind(null,e,n,t),s=void 0,!ME||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wb(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ll(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}XR(function(){var l=i,u=Gx(n),d=[];e:{var h=T3.get(t);if(h!==void 0){var f=Xx,p=t;switch(t){case"keypress":if(Fy(n)===0)break e;case"keydown":case"keyup":f=nB;break;case"focusin":p="focus",f=db;break;case"focusout":p="blur",f=db;break;case"beforeblur":case"afterblur":f=db;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=XI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=qM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=iB;break;case x3:case S3:case A3:f=GM;break;case I3:f=aB;break;case"scroll":f=zM;break;case"wheel":f=lB;break;case"copy":case"cut":case"paste":f=YM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=t2}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,y!==null&&(_=Ep(b,y),_!=null&&g.push(Tp(b,_,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==UE&&(p=n.relatedTarget||n.fromElement)&&(ll(p)||p[zo]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?ll(p):null,p!==null&&(w=cu(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=XI,_="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=t2,_="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:cd(f),v=p==null?h:cd(p),h=new g(_,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,_=null,ll(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,_=g),w=_,f&&p)t:{for(g=f,y=p,b=0,v=g;v;v=_u(v))b++;for(v=0,_=y;_;_=_u(_))v++;for(;0<b-v;)g=_u(g),b--;for(;0<v-b;)y=_u(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=_u(g),y=_u(y)}g=null}else g=null;f!==null&&h2(d,h,f,g,!1),p!==null&&w!==null&&h2(d,w,p,g,!0)}}e:{if(h=l?cd(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=mB;else if(s2(h))if(v3)E=bB;else{E=wB;var x=yB}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=vB);if(E&&(E=E(t,l))){w3(d,E,n,u);break e}x&&x(t,h,l),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&OE(h,"number",h.value)}switch(x=l?cd(l):window,t){case"focusin":(s2(x)||x.contentEditable==="true")&&(od=x,qE=l,Hf=null);break;case"focusout":Hf=qE=od=null;break;case"mousedown":HE=!0;break;case"contextmenu":case"mouseup":case"dragend":HE=!1,l2(d,n,u);break;case"selectionchange":if(CB)break;case"keydown":case"keyup":l2(d,n,u)}var S;if(tS)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else id?m3(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(g3&&n.locale!=="ko"&&(id||T!=="onCompositionStart"?T==="onCompositionEnd"&&id&&(S=p3()):(Xa=u,Zx="value"in Xa?Xa.value:Xa.textContent,id=!0)),x=_w(l,T),0<x.length&&(T=new e2(T,t,null,n,u),d.push({event:T,listeners:x}),S?T.data=S:(S=y3(n),S!==null&&(T.data=S)))),(S=dB?hB(t,n):fB(t,n))&&(l=_w(l,"onBeforeInput"),0<l.length&&(u=new e2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=S))}N3(d,e)})}function Tp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _w(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ep(t,n),i!=null&&r.unshift(Tp(t,i,s)),i=Ep(t,e),i!=null&&r.push(Tp(t,i,s))),t=t.return}return r}function _u(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function h2(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=Ep(n,i),c!=null&&o.unshift(Tp(n,c,a))):s||(c=Ep(n,i),c!=null&&o.push(Tp(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IB=/\r\n?/g,TB=/\u0000|\uFFFD/g;function f2(t){return(typeof t=="string"?t:""+t).replace(IB,`
`).replace(TB,"")}function Um(t,e,n){if(e=f2(e),f2(t)!==e&&n)throw Error(re(425))}function Cw(){}var VE=null,GE=null;function KE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var YE=typeof setTimeout=="function"?setTimeout:void 0,NB=typeof clearTimeout=="function"?clearTimeout:void 0,p2=typeof Promise=="function"?Promise:void 0,PB=typeof queueMicrotask=="function"?queueMicrotask:typeof p2<"u"?function(t){return p2.resolve(null).then(t).catch(kB)}:YE;function kB(t){setTimeout(function(){throw t})}function vb(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xp(e)}function uc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function g2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ph=Math.random().toString(36).slice(2),Vi="__reactFiber$"+ph,Np="__reactProps$"+ph,zo="__reactContainer$"+ph,JE="__reactEvents$"+ph,OB="__reactListeners$"+ph,RB="__reactHandles$"+ph;function ll(t){var e=t[Vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zo]||n[Vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=g2(t);t!==null;){if(n=t[Vi])return n;t=g2(t)}return e}t=n,n=t.parentNode}return null}function Vg(t){return t=t[Vi]||t[zo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function R0(t){return t[Np]||null}var QE=[],ld=-1;function Uc(t){return{current:t}}function zt(t){0>ld||(t.current=QE[ld],QE[ld]=null,ld--)}function Rt(t,e){ld++,QE[ld]=t.current,t.current=e}var Ac={},dr=Uc(Ac),Qr=Uc(!1),Ul=Ac;function Hd(t,e){var n=t.type.contextTypes;if(!n)return Ac;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zr(t){return t=t.childContextTypes,t!=null}function xw(){zt(Qr),zt(dr)}function m2(t,e,n){if(dr.current!==Ac)throw Error(re(168));Rt(dr,e),Rt(Qr,n)}function k3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(re(108,yM(t)||"Unknown",s));return Qt({},n,r)}function Sw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ac,Ul=dr.current,Rt(dr,t),Rt(Qr,Qr.current),!0}function y2(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=k3(t,e,Ul),r.__reactInternalMemoizedMergedChildContext=t,zt(Qr),zt(dr),Rt(dr,t)):zt(Qr),Rt(Qr,n)}var So=null,$0=!1,bb=!1;function O3(t){So===null?So=[t]:So.push(t)}function $B(t){$0=!0,O3(t)}function Lc(){if(!bb&&So!==null){bb=!0;var t=0,e=Et;try{var n=So;for(Et=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}So=null,$0=!1}catch(s){throw So!==null&&(So=So.slice(t+1)),r3(Kx,Lc),s}finally{Et=e,bb=!1}}return null}var ud=[],dd=0,Aw=null,Iw=0,Ls=[],Ms=0,Ll=null,Oo=1,Ro="";function Xc(t,e){ud[dd++]=Iw,ud[dd++]=Aw,Aw=t,Iw=e}function R3(t,e,n){Ls[Ms++]=Oo,Ls[Ms++]=Ro,Ls[Ms++]=Ll,Ll=t;var r=Oo;t=Ro;var s=32-vi(r)-1;r&=~(1<<s),n+=1;var i=32-vi(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Oo=1<<32-vi(e)+s|n<<s|r,Ro=i+t}else Oo=1<<i|n<<s|r,Ro=t}function rS(t){t.return!==null&&(Xc(t,1),R3(t,1,0))}function sS(t){for(;t===Aw;)Aw=ud[--dd],ud[dd]=null,Iw=ud[--dd],ud[dd]=null;for(;t===Ll;)Ll=Ls[--Ms],Ls[Ms]=null,Ro=Ls[--Ms],Ls[Ms]=null,Oo=Ls[--Ms],Ls[Ms]=null}var ys=null,ps=null,qt=!1,hi=null;function $3(t,e){var n=Bs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function w2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ys=t,ps=uc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ys=t,ps=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ll!==null?{id:Oo,overflow:Ro}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ys=t,ps=null,!0):!1;default:return!1}}function ZE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function XE(t){if(qt){var e=ps;if(e){var n=e;if(!w2(t,e)){if(ZE(t))throw Error(re(418));e=uc(n.nextSibling);var r=ys;e&&w2(t,e)?$3(r,n):(t.flags=t.flags&-4097|2,qt=!1,ys=t)}}else{if(ZE(t))throw Error(re(418));t.flags=t.flags&-4097|2,qt=!1,ys=t}}}function v2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ys=t}function Lm(t){if(t!==ys)return!1;if(!qt)return v2(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!KE(t.type,t.memoizedProps)),e&&(e=ps)){if(ZE(t))throw D3(),Error(re(418));for(;e;)$3(t,e),e=uc(e.nextSibling)}if(v2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ps=uc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ps=null}}else ps=ys?uc(t.stateNode.nextSibling):null;return!0}function D3(){for(var t=ps;t;)t=uc(t.nextSibling)}function Vd(){ps=ys=null,qt=!1}function iS(t){hi===null?hi=[t]:hi.push(t)}var DB=Qo.ReactCurrentBatchConfig;function Vh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function Mm(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function b2(t){var e=t._init;return e(t._payload)}function j3(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=pc(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,_){return b===null||b.tag!==6?(b=Ib(v,y.mode,_),b.return=y,b):(b=s(b,v),b.return=y,b)}function c(y,b,v,_){var E=v.type;return E===sd?u(y,b,v.props.children,_,v.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ta&&b2(E)===b.type)?(_=s(b,v.props),_.ref=Vh(y,b,v),_.return=y,_):(_=Ky(v.type,v.key,v.props,null,y.mode,_),_.ref=Vh(y,b,v),_.return=y,_)}function l(y,b,v,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=Tb(v,y.mode,_),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,_,E){return b===null||b.tag!==7?(b=kl(v,y.mode,_,E),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ib(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Tm:return v=Ky(b.type,b.key,b.props,null,y.mode,v),v.ref=Vh(y,null,b),v.return=y,v;case rd:return b=Tb(b,y.mode,v),b.return=y,b;case Ta:var _=b._init;return d(y,_(b._payload),v)}if(Sf(b)||Fh(b))return b=kl(b,y.mode,v,null),b.return=y,b;Mm(y,b)}return null}function h(y,b,v,_){var E=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(y,b,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Tm:return v.key===E?c(y,b,v,_):null;case rd:return v.key===E?l(y,b,v,_):null;case Ta:return E=v._init,h(y,b,E(v._payload),_)}if(Sf(v)||Fh(v))return E!==null?null:u(y,b,v,_,null);Mm(y,v)}return null}function f(y,b,v,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(v)||null,a(b,y,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tm:return y=y.get(_.key===null?v:_.key)||null,c(b,y,_,E);case rd:return y=y.get(_.key===null?v:_.key)||null,l(b,y,_,E);case Ta:var x=_._init;return f(y,b,v,x(_._payload),E)}if(Sf(_)||Fh(_))return y=y.get(v)||null,u(b,y,_,E,null);Mm(b,_)}return null}function p(y,b,v,_){for(var E=null,x=null,S=b,T=b=0,C=null;S!==null&&T<v.length;T++){S.index>T?(C=S,S=null):C=S.sibling;var O=h(y,S,v[T],_);if(O===null){S===null&&(S=C);break}t&&S&&O.alternate===null&&e(y,S),b=i(O,b,T),x===null?E=O:x.sibling=O,x=O,S=C}if(T===v.length)return n(y,S),qt&&Xc(y,T),E;if(S===null){for(;T<v.length;T++)S=d(y,v[T],_),S!==null&&(b=i(S,b,T),x===null?E=S:x.sibling=S,x=S);return qt&&Xc(y,T),E}for(S=r(y,S);T<v.length;T++)C=f(S,y,T,v[T],_),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),b=i(C,b,T),x===null?E=C:x.sibling=C,x=C);return t&&S.forEach(function(R){return e(y,R)}),qt&&Xc(y,T),E}function g(y,b,v,_){var E=Fh(v);if(typeof E!="function")throw Error(re(150));if(v=E.call(v),v==null)throw Error(re(151));for(var x=E=null,S=b,T=b=0,C=null,O=v.next();S!==null&&!O.done;T++,O=v.next()){S.index>T?(C=S,S=null):C=S.sibling;var R=h(y,S,O.value,_);if(R===null){S===null&&(S=C);break}t&&S&&R.alternate===null&&e(y,S),b=i(R,b,T),x===null?E=R:x.sibling=R,x=R,S=C}if(O.done)return n(y,S),qt&&Xc(y,T),E;if(S===null){for(;!O.done;T++,O=v.next())O=d(y,O.value,_),O!==null&&(b=i(O,b,T),x===null?E=O:x.sibling=O,x=O);return qt&&Xc(y,T),E}for(S=r(y,S);!O.done;T++,O=v.next())O=f(S,y,T,O.value,_),O!==null&&(t&&O.alternate!==null&&S.delete(O.key===null?T:O.key),b=i(O,b,T),x===null?E=O:x.sibling=O,x=O);return t&&S.forEach(function(F){return e(y,F)}),qt&&Xc(y,T),E}function w(y,b,v,_){if(typeof v=="object"&&v!==null&&v.type===sd&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Tm:e:{for(var E=v.key,x=b;x!==null;){if(x.key===E){if(E=v.type,E===sd){if(x.tag===7){n(y,x.sibling),b=s(x,v.props.children),b.return=y,y=b;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ta&&b2(E)===x.type){n(y,x.sibling),b=s(x,v.props),b.ref=Vh(y,x,v),b.return=y,y=b;break e}n(y,x);break}else e(y,x);x=x.sibling}v.type===sd?(b=kl(v.props.children,y.mode,_,v.key),b.return=y,y=b):(_=Ky(v.type,v.key,v.props,null,y.mode,_),_.ref=Vh(y,b,v),_.return=y,y=_)}return o(y);case rd:e:{for(x=v.key;b!==null;){if(b.key===x)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=Tb(v,y.mode,_),b.return=y,y=b}return o(y);case Ta:return x=v._init,w(y,b,x(v._payload),_)}if(Sf(v))return p(y,b,v,_);if(Fh(v))return g(y,b,v,_);Mm(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=Ib(v,y.mode,_),b.return=y,y=b),o(y)):n(y,b)}return w}var Gd=j3(!0),U3=j3(!1),Tw=Uc(null),Nw=null,hd=null,oS=null;function aS(){oS=hd=Nw=null}function cS(t){var e=Tw.current;zt(Tw),t._currentValue=e}function e_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _d(t,e){Nw=t,oS=hd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yr=!0),t.firstContext=null)}function Ws(t){var e=t._currentValue;if(oS!==t)if(t={context:t,memoizedValue:e,next:null},hd===null){if(Nw===null)throw Error(re(308));hd=t,Nw.dependencies={lanes:0,firstContext:t}}else hd=hd.next=t;return e}var ul=null;function lS(t){ul===null?ul=[t]:ul.push(t)}function L3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,lS(e)):(n.next=s.next,s.next=n),e.interleaved=n,Wo(t,r)}function Wo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Na=!1;function uS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Do(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wo(t,n)}return s=r.interleaved,s===null?(e.next=e,lS(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wo(t,n)}function zy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yx(t,n)}}function E2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pw(t,e,n,r){var s=t.updateQueue;Na=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Qt({},d,h);break e;case 2:Na=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Bl|=o,t.lanes=o,t.memoizedState=d}}function _2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(re(191,s));s.call(r)}}}var Gg={},Ji=Uc(Gg),Pp=Uc(Gg),kp=Uc(Gg);function dl(t){if(t===Gg)throw Error(re(174));return t}function dS(t,e){switch(Rt(kp,e),Rt(Pp,t),Rt(Ji,Gg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$E(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$E(e,t)}zt(Ji),Rt(Ji,e)}function Kd(){zt(Ji),zt(Pp),zt(kp)}function B3(t){dl(kp.current);var e=dl(Ji.current),n=$E(e,t.type);e!==n&&(Rt(Pp,t),Rt(Ji,n))}function hS(t){Pp.current===t&&(zt(Ji),zt(Pp))}var Kt=Uc(0);function kw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Eb=[];function fS(){for(var t=0;t<Eb.length;t++)Eb[t]._workInProgressVersionPrimary=null;Eb.length=0}var Wy=Qo.ReactCurrentDispatcher,_b=Qo.ReactCurrentBatchConfig,Ml=0,Jt=null,vn=null,Tn=null,Ow=!1,Vf=!1,Op=0,jB=0;function Xn(){throw Error(re(321))}function pS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xi(t[n],e[n]))return!1;return!0}function gS(t,e,n,r,s,i){if(Ml=i,Jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wy.current=t===null||t.memoizedState===null?BB:FB,t=n(r,s),Vf){i=0;do{if(Vf=!1,Op=0,25<=i)throw Error(re(301));i+=1,Tn=vn=null,e.updateQueue=null,Wy.current=zB,t=n(r,s)}while(Vf)}if(Wy.current=Rw,e=vn!==null&&vn.next!==null,Ml=0,Tn=vn=Jt=null,Ow=!1,e)throw Error(re(300));return t}function mS(){var t=Op!==0;return Op=0,t}function Ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Jt.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function qs(){if(vn===null){var t=Jt.alternate;t=t!==null?t.memoizedState:null}else t=vn.next;var e=Tn===null?Jt.memoizedState:Tn.next;if(e!==null)Tn=e,vn=t;else{if(t===null)throw Error(re(310));vn=t,t={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},Tn===null?Jt.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function Rp(t,e){return typeof e=="function"?e(t):e}function Cb(t){var e=qs(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=vn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Ml&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Jt.lanes|=u,Bl|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,xi(r,e.memoizedState)||(Yr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Jt.lanes|=i,Bl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xb(t){var e=qs(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);xi(i,e.memoizedState)||(Yr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function F3(){}function z3(t,e){var n=Jt,r=qs(),s=e(),i=!xi(r.memoizedState,s);if(i&&(r.memoizedState=s,Yr=!0),r=r.queue,yS(H3.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,$p(9,q3.bind(null,n,r,s,e),void 0,null),On===null)throw Error(re(349));Ml&30||W3(n,e,s)}return s}function W3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function q3(t,e,n,r){e.value=n,e.getSnapshot=r,V3(e)&&G3(t)}function H3(t,e,n){return n(function(){V3(e)&&G3(t)})}function V3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xi(t,n)}catch{return!0}}function G3(t){var e=Wo(t,1);e!==null&&bi(e,t,1,-1)}function C2(t){var e=Ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:t},e.queue=t,t=t.dispatch=MB.bind(null,Jt,t),[e.memoizedState,t]}function $p(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function K3(){return qs().memoizedState}function qy(t,e,n,r){var s=Ui();Jt.flags|=t,s.memoizedState=$p(1|e,n,void 0,r===void 0?null:r)}function D0(t,e,n,r){var s=qs();r=r===void 0?null:r;var i=void 0;if(vn!==null){var o=vn.memoizedState;if(i=o.destroy,r!==null&&pS(r,o.deps)){s.memoizedState=$p(e,n,i,r);return}}Jt.flags|=t,s.memoizedState=$p(1|e,n,i,r)}function x2(t,e){return qy(8390656,8,t,e)}function yS(t,e){return D0(2048,8,t,e)}function Y3(t,e){return D0(4,2,t,e)}function J3(t,e){return D0(4,4,t,e)}function Q3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Z3(t,e,n){return n=n!=null?n.concat([t]):null,D0(4,4,Q3.bind(null,e,t),n)}function wS(){}function X3(t,e){var n=qs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e$(t,e){var n=qs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t$(t,e,n){return Ml&21?(xi(n,e)||(n=o3(),Jt.lanes|=n,Bl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yr=!0),t.memoizedState=n)}function UB(t,e){var n=Et;Et=n!==0&&4>n?n:4,t(!0);var r=_b.transition;_b.transition={};try{t(!1),e()}finally{Et=n,_b.transition=r}}function n$(){return qs().memoizedState}function LB(t,e,n){var r=fc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r$(t))s$(e,n);else if(n=L3(t,e,n,r),n!==null){var s=Er();bi(n,t,r,s),i$(n,e,r)}}function MB(t,e,n){var r=fc(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r$(t))s$(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,xi(a,o)){var c=e.interleaved;c===null?(s.next=s,lS(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=L3(t,e,s,r),n!==null&&(s=Er(),bi(n,t,r,s),i$(n,e,r))}}function r$(t){var e=t.alternate;return t===Jt||e!==null&&e===Jt}function s$(t,e){Vf=Ow=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function i$(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yx(t,n)}}var Rw={readContext:Ws,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},BB={readContext:Ws,useCallback:function(t,e){return Ui().memoizedState=[t,e===void 0?null:e],t},useContext:Ws,useEffect:x2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qy(4194308,4,Q3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qy(4194308,4,t,e)},useInsertionEffect:function(t,e){return qy(4,2,t,e)},useMemo:function(t,e){var n=Ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ui();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=LB.bind(null,Jt,t),[r.memoizedState,t]},useRef:function(t){var e=Ui();return t={current:t},e.memoizedState=t},useState:C2,useDebugValue:wS,useDeferredValue:function(t){return Ui().memoizedState=t},useTransition:function(){var t=C2(!1),e=t[0];return t=UB.bind(null,t[1]),Ui().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jt,s=Ui();if(qt){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),On===null)throw Error(re(349));Ml&30||W3(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,x2(H3.bind(null,r,i,t),[t]),r.flags|=2048,$p(9,q3.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ui(),e=On.identifierPrefix;if(qt){var n=Ro,r=Oo;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Op++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FB={readContext:Ws,useCallback:X3,useContext:Ws,useEffect:yS,useImperativeHandle:Z3,useInsertionEffect:Y3,useLayoutEffect:J3,useMemo:e$,useReducer:Cb,useRef:K3,useState:function(){return Cb(Rp)},useDebugValue:wS,useDeferredValue:function(t){var e=qs();return t$(e,vn.memoizedState,t)},useTransition:function(){var t=Cb(Rp)[0],e=qs().memoizedState;return[t,e]},useMutableSource:F3,useSyncExternalStore:z3,useId:n$,unstable_isNewReconciler:!1},zB={readContext:Ws,useCallback:X3,useContext:Ws,useEffect:yS,useImperativeHandle:Z3,useInsertionEffect:Y3,useLayoutEffect:J3,useMemo:e$,useReducer:xb,useRef:K3,useState:function(){return xb(Rp)},useDebugValue:wS,useDeferredValue:function(t){var e=qs();return vn===null?e.memoizedState=t:t$(e,vn.memoizedState,t)},useTransition:function(){var t=xb(Rp)[0],e=qs().memoizedState;return[t,e]},useMutableSource:F3,useSyncExternalStore:z3,useId:n$,unstable_isNewReconciler:!1};function ai(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function t_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var j0={isMounted:function(t){return(t=t._reactInternals)?cu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Er(),s=fc(t),i=Do(r,s);i.payload=e,n!=null&&(i.callback=n),e=dc(t,i,s),e!==null&&(bi(e,t,s,r),zy(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Er(),s=fc(t),i=Do(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=dc(t,i,s),e!==null&&(bi(e,t,s,r),zy(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Er(),r=fc(t),s=Do(n,r);s.tag=2,e!=null&&(s.callback=e),e=dc(t,s,r),e!==null&&(bi(e,t,r,n),zy(e,t,r))}};function S2(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ap(n,r)||!Ap(s,i):!0}function o$(t,e,n){var r=!1,s=Ac,i=e.contextType;return typeof i=="object"&&i!==null?i=Ws(i):(s=Zr(e)?Ul:dr.current,r=e.contextTypes,i=(r=r!=null)?Hd(t,s):Ac),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=j0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function A2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&j0.enqueueReplaceState(e,e.state,null)}function n_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},uS(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ws(i):(i=Zr(e)?Ul:dr.current,s.context=Hd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(t_(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&j0.enqueueReplaceState(s,s.state,null),Pw(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Yd(t,e){try{var n="",r=e;do n+=mM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Sb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function r_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WB=typeof WeakMap=="function"?WeakMap:Map;function a$(t,e,n){n=Do(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dw||(Dw=!0,f_=r),r_(t,e)},n}function c$(t,e,n){n=Do(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){r_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){r_(t,e),typeof r!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function I2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WB;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=rF.bind(null,t,e,n),e.then(t,t))}function T2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function N2(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Do(-1,1),e.tag=2,dc(n,e,1))),n.lanes|=1),t)}var qB=Qo.ReactCurrentOwner,Yr=!1;function wr(t,e,n,r){e.child=t===null?U3(e,null,n,r):Gd(e,t.child,n,r)}function P2(t,e,n,r,s){n=n.render;var i=e.ref;return _d(e,s),r=gS(t,e,n,r,i,s),n=mS(),t!==null&&!Yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qo(t,e,s)):(qt&&n&&rS(e),e.flags|=1,wr(t,e,r,s),e.child)}function k2(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!AS(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,l$(t,e,i,r,s)):(t=Ky(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ap,n(o,r)&&t.ref===e.ref)return qo(t,e,s)}return e.flags|=1,t=pc(i,r),t.ref=e.ref,t.return=e,e.child=t}function l$(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ap(i,r)&&t.ref===e.ref)if(Yr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Yr=!0);else return e.lanes=t.lanes,qo(t,e,s)}return s_(t,e,n,r,s)}function u$(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(pd,us),us|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(pd,us),us|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Rt(pd,us),us|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Rt(pd,us),us|=r;return wr(t,e,s,n),e.child}function d$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function s_(t,e,n,r,s){var i=Zr(n)?Ul:dr.current;return i=Hd(e,i),_d(e,s),n=gS(t,e,n,r,i,s),r=mS(),t!==null&&!Yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qo(t,e,s)):(qt&&r&&rS(e),e.flags|=1,wr(t,e,n,s),e.child)}function O2(t,e,n,r,s){if(Zr(n)){var i=!0;Sw(e)}else i=!1;if(_d(e,s),e.stateNode===null)Hy(t,e),o$(e,n,r),n_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ws(l):(l=Zr(n)?Ul:dr.current,l=Hd(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&A2(e,o,r,l),Na=!1;var h=e.memoizedState;o.state=h,Pw(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Qr.current||Na?(typeof u=="function"&&(t_(e,n,u,r),c=e.memoizedState),(a=Na||S2(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,M3(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:ai(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ws(c):(c=Zr(n)?Ul:dr.current,c=Hd(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&A2(e,o,r,c),Na=!1,h=e.memoizedState,o.state=h,Pw(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Qr.current||Na?(typeof f=="function"&&(t_(e,n,f,r),p=e.memoizedState),(l=Na||S2(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return i_(t,e,n,r,i,s)}function i_(t,e,n,r,s,i){d$(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&y2(e,n,!1),qo(t,e,i);r=e.stateNode,qB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Gd(e,t.child,null,i),e.child=Gd(e,null,a,i)):wr(t,e,a,i),e.memoizedState=r.state,s&&y2(e,n,!0),e.child}function h$(t){var e=t.stateNode;e.pendingContext?m2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&m2(t,e.context,!1),dS(t,e.containerInfo)}function R2(t,e,n,r,s){return Vd(),iS(s),e.flags|=256,wr(t,e,n,r),e.child}var o_={dehydrated:null,treeContext:null,retryLane:0};function a_(t){return{baseLanes:t,cachePool:null,transitions:null}}function f$(t,e,n){var r=e.pendingProps,s=Kt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Rt(Kt,s&1),t===null)return XE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=M0(o,r,0,null),t=kl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=a_(n),e.memoizedState=o_,t):vS(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return HB(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=pc(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=pc(a,i):(i=kl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?a_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=o_,r}return i=t.child,t=i.sibling,r=pc(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vS(t,e){return e=M0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bm(t,e,n,r){return r!==null&&iS(r),Gd(e,t.child,null,n),t=vS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HB(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Sb(Error(re(422))),Bm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=M0({mode:"visible",children:r.children},s,0,null),i=kl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Gd(e,t.child,null,o),e.child.memoizedState=a_(o),e.memoizedState=o_,i);if(!(e.mode&1))return Bm(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(re(419)),r=Sb(i,r,void 0),Bm(t,e,o,r)}if(a=(o&t.childLanes)!==0,Yr||a){if(r=On,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wo(t,s),bi(r,t,s,-1))}return SS(),r=Sb(Error(re(421))),Bm(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=sF.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ps=uc(s.nextSibling),ys=e,qt=!0,hi=null,t!==null&&(Ls[Ms++]=Oo,Ls[Ms++]=Ro,Ls[Ms++]=Ll,Oo=t.id,Ro=t.overflow,Ll=e),e=vS(e,r.children),e.flags|=4096,e)}function $2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),e_(t.return,e,n)}function Ab(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function p$(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wr(t,e,r.children,n),r=Kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$2(t,n,e);else if(t.tag===19)$2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Rt(Kt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&kw(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ab(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kw(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ab(e,!0,n,null,i);break;case"together":Ab(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=pc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VB(t,e,n){switch(e.tag){case 3:h$(e),Vd();break;case 5:B3(e);break;case 1:Zr(e.type)&&Sw(e);break;case 4:dS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Rt(Tw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Rt(Kt,Kt.current&1),e.flags|=128,null):n&e.child.childLanes?f$(t,e,n):(Rt(Kt,Kt.current&1),t=qo(t,e,n),t!==null?t.sibling:null);Rt(Kt,Kt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return p$(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rt(Kt,Kt.current),r)break;return null;case 22:case 23:return e.lanes=0,u$(t,e,n)}return qo(t,e,n)}var g$,c_,m$,y$;g$=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};c_=function(){};m$=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,dl(Ji.current);var i=null;switch(n){case"input":s=PE(t,s),r=PE(t,r),i=[];break;case"select":s=Qt({},s,{value:void 0}),r=Qt({},r,{value:void 0}),i=[];break;case"textarea":s=RE(t,s),r=RE(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cw)}DE(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vp.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(vp.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Mt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};y$=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gh(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function er(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GB(t,e,n){var r=e.pendingProps;switch(sS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return er(e),null;case 1:return Zr(e.type)&&xw(),er(e),null;case 3:return r=e.stateNode,Kd(),zt(Qr),zt(dr),fS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Lm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hi!==null&&(m_(hi),hi=null))),c_(t,e),er(e),null;case 5:hS(e);var s=dl(kp.current);if(n=e.type,t!==null&&e.stateNode!=null)m$(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return er(e),null}if(t=dl(Ji.current),Lm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Vi]=e,r[Np]=i,t=(e.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(s=0;s<If.length;s++)Mt(If[s],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":WI(r,i),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Mt("invalid",r);break;case"textarea":HI(r,i),Mt("invalid",r)}DE(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Um(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Um(r.textContent,a,t),s=["children",""+a]):vp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Mt("scroll",r)}switch(n){case"input":Nm(r),qI(r,i,!0);break;case"textarea":Nm(r),VI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vi]=e,t[Np]=r,g$(t,e,!1,!1),e.stateNode=t;e:{switch(o=jE(n,r),n){case"dialog":Mt("cancel",t),Mt("close",t),s=r;break;case"iframe":case"object":case"embed":Mt("load",t),s=r;break;case"video":case"audio":for(s=0;s<If.length;s++)Mt(If[s],t);s=r;break;case"source":Mt("error",t),s=r;break;case"img":case"image":case"link":Mt("error",t),Mt("load",t),s=r;break;case"details":Mt("toggle",t),s=r;break;case"input":WI(t,r),s=PE(t,r),Mt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qt({},r,{value:void 0}),Mt("invalid",t);break;case"textarea":HI(t,r),s=RE(t,r),Mt("invalid",t);break;default:s=r}DE(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?KR(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&VR(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&bp(t,c):typeof c=="number"&&bp(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Mt("scroll",t):c!=null&&Wx(t,i,c,o))}switch(n){case"input":Nm(t),qI(t,r,!1);break;case"textarea":Nm(t),VI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sc(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?wd(t,!!r.multiple,i,!1):r.defaultValue!=null&&wd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Cw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return er(e),null;case 6:if(t&&e.stateNode!=null)y$(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=dl(kp.current),dl(Ji.current),Lm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vi]=e,(i=r.nodeValue!==n)&&(t=ys,t!==null))switch(t.tag){case 3:Um(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Um(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vi]=e,e.stateNode=r}return er(e),null;case 13:if(zt(Kt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&ps!==null&&e.mode&1&&!(e.flags&128))D3(),Vd(),e.flags|=98560,i=!1;else if(i=Lm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[Vi]=e}else Vd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;er(e),i=!1}else hi!==null&&(m_(hi),hi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kt.current&1?_n===0&&(_n=3):SS())),e.updateQueue!==null&&(e.flags|=4),er(e),null);case 4:return Kd(),c_(t,e),t===null&&Ip(e.stateNode.containerInfo),er(e),null;case 10:return cS(e.type._context),er(e),null;case 17:return Zr(e.type)&&xw(),er(e),null;case 19:if(zt(Kt),i=e.memoizedState,i===null)return er(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Gh(i,!1);else{if(_n!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kw(t),o!==null){for(e.flags|=128,Gh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Rt(Kt,Kt.current&1|2),e.child}t=t.sibling}i.tail!==null&&an()>Jd&&(e.flags|=128,r=!0,Gh(i,!1),e.lanes=4194304)}else{if(!r)if(t=kw(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qt)return er(e),null}else 2*an()-i.renderingStartTime>Jd&&n!==1073741824&&(e.flags|=128,r=!0,Gh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=an(),e.sibling=null,n=Kt.current,Rt(Kt,r?n&1|2:n&1),e):(er(e),null);case 22:case 23:return xS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?us&1073741824&&(er(e),e.subtreeFlags&6&&(e.flags|=8192)):er(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function KB(t,e){switch(sS(e),e.tag){case 1:return Zr(e.type)&&xw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kd(),zt(Qr),zt(dr),fS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hS(e),null;case 13:if(zt(Kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Vd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(Kt),null;case 4:return Kd(),null;case 10:return cS(e.type._context),null;case 22:case 23:return xS(),null;case 24:return null;default:return null}}var Fm=!1,ur=!1,YB=typeof WeakSet=="function"?WeakSet:Set,_e=null;function fd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nn(t,e,r)}else n.current=null}function l_(t,e,n){try{n()}catch(r){nn(t,e,r)}}var D2=!1;function JB(t,e){if(VE=bw,t=_3(),nS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(GE={focusedElem:t,selectionRange:n},bw=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:ai(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(_){nn(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return p=D2,D2=!1,p}function Gf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&l_(e,n,i)}s=s.next}while(s!==r)}}function U0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function u_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function w$(t){var e=t.alternate;e!==null&&(t.alternate=null,w$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vi],delete e[Np],delete e[JE],delete e[OB],delete e[RB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function v$(t){return t.tag===5||t.tag===3||t.tag===4}function j2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||v$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function d_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cw));else if(r!==4&&(t=t.child,t!==null))for(d_(t,e,n),t=t.sibling;t!==null;)d_(t,e,n),t=t.sibling}function h_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(h_(t,e,n),t=t.sibling;t!==null;)h_(t,e,n),t=t.sibling}var zn=null,ui=!1;function ia(t,e,n){for(n=n.child;n!==null;)b$(t,e,n),n=n.sibling}function b$(t,e,n){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(N0,n)}catch{}switch(n.tag){case 5:ur||fd(n,e);case 6:var r=zn,s=ui;zn=null,ia(t,e,n),zn=r,ui=s,zn!==null&&(ui?(t=zn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zn.removeChild(n.stateNode));break;case 18:zn!==null&&(ui?(t=zn,n=n.stateNode,t.nodeType===8?vb(t.parentNode,n):t.nodeType===1&&vb(t,n),xp(t)):vb(zn,n.stateNode));break;case 4:r=zn,s=ui,zn=n.stateNode.containerInfo,ui=!0,ia(t,e,n),zn=r,ui=s;break;case 0:case 11:case 14:case 15:if(!ur&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&l_(n,e,o),s=s.next}while(s!==r)}ia(t,e,n);break;case 1:if(!ur&&(fd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nn(n,e,a)}ia(t,e,n);break;case 21:ia(t,e,n);break;case 22:n.mode&1?(ur=(r=ur)||n.memoizedState!==null,ia(t,e,n),ur=r):ia(t,e,n);break;default:ia(t,e,n)}}function U2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YB),e.forEach(function(r){var s=iF.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zn=a.stateNode,ui=!1;break e;case 3:zn=a.stateNode.containerInfo,ui=!0;break e;case 4:zn=a.stateNode.containerInfo,ui=!0;break e}a=a.return}if(zn===null)throw Error(re(160));b$(i,o,s),zn=null,ui=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){nn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)E$(e,t),e=e.sibling}function E$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qs(e,t),Pi(t),r&4){try{Gf(3,t,t.return),U0(3,t)}catch(g){nn(t,t.return,g)}try{Gf(5,t,t.return)}catch(g){nn(t,t.return,g)}}break;case 1:Qs(e,t),Pi(t),r&512&&n!==null&&fd(n,n.return);break;case 5:if(Qs(e,t),Pi(t),r&512&&n!==null&&fd(n,n.return),t.flags&32){var s=t.stateNode;try{bp(s,"")}catch(g){nn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&WR(s,i),jE(a,o);var l=jE(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?KR(s,d):u==="dangerouslySetInnerHTML"?VR(s,d):u==="children"?bp(s,d):Wx(s,u,d,l)}switch(a){case"input":kE(s,i);break;case"textarea":qR(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?wd(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?wd(s,!!i.multiple,i.defaultValue,!0):wd(s,!!i.multiple,i.multiple?[]:"",!1))}s[Np]=i}catch(g){nn(t,t.return,g)}}break;case 6:if(Qs(e,t),Pi(t),r&4){if(t.stateNode===null)throw Error(re(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){nn(t,t.return,g)}}break;case 3:if(Qs(e,t),Pi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xp(e.containerInfo)}catch(g){nn(t,t.return,g)}break;case 4:Qs(e,t),Pi(t);break;case 13:Qs(e,t),Pi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_S=an())),r&4&&U2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ur=(l=ur)||u,Qs(e,t),ur=l):Qs(e,t),Pi(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(_e=t,u=t.child;u!==null;){for(d=_e=u;_e!==null;){switch(h=_e,f=h.child,h.tag){case 0:case 11:case 14:case 15:Gf(4,h,h.return);break;case 1:fd(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){nn(r,n,g)}}break;case 5:fd(h,h.return);break;case 22:if(h.memoizedState!==null){M2(d);continue}}f!==null?(f.return=h,_e=f):M2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=GR("display",o))}catch(g){nn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){nn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qs(e,t),Pi(t),r&4&&U2(t);break;case 21:break;default:Qs(e,t),Pi(t)}}function Pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(v$(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bp(s,""),r.flags&=-33);var i=j2(t);h_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=j2(t);d_(t,a,o);break;default:throw Error(re(161))}}catch(c){nn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QB(t,e,n){_e=t,_$(t)}function _$(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fm;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ur;a=Fm;var l=ur;if(Fm=o,(ur=c)&&!l)for(_e=s;_e!==null;)o=_e,c=o.child,o.tag===22&&o.memoizedState!==null?B2(s):c!==null?(c.return=o,_e=c):B2(s);for(;i!==null;)_e=i,_$(i),i=i.sibling;_e=s,Fm=a,ur=l}L2(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):L2(t)}}function L2(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ur||U0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ur)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ai(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&_2(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&xp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}ur||e.flags&512&&u_(e)}catch(h){nn(e,e.return,h)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function M2(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function B2(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{U0(4,e)}catch(c){nn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){nn(e,s,c)}}var i=e.return;try{u_(e)}catch(c){nn(e,i,c)}break;case 5:var o=e.return;try{u_(e)}catch(c){nn(e,o,c)}}}catch(c){nn(e,e.return,c)}if(e===t){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var ZB=Math.ceil,$w=Qo.ReactCurrentDispatcher,bS=Qo.ReactCurrentOwner,zs=Qo.ReactCurrentBatchConfig,st=0,On=null,pn=null,qn=0,us=0,pd=Uc(0),_n=0,Dp=null,Bl=0,L0=0,ES=0,Kf=null,Gr=null,_S=0,Jd=1/0,Co=null,Dw=!1,f_=null,hc=null,zm=!1,ec=null,jw=0,Yf=0,p_=null,Vy=-1,Gy=0;function Er(){return st&6?an():Vy!==-1?Vy:Vy=an()}function fc(t){return t.mode&1?st&2&&qn!==0?qn&-qn:DB.transition!==null?(Gy===0&&(Gy=o3()),Gy):(t=Et,t!==0||(t=window.event,t=t===void 0?16:f3(t.type)),t):1}function bi(t,e,n,r){if(50<Yf)throw Yf=0,p_=null,Error(re(185));qg(t,n,r),(!(st&2)||t!==On)&&(t===On&&(!(st&2)&&(L0|=n),_n===4&&La(t,qn)),Xr(t,r),n===1&&st===0&&!(e.mode&1)&&(Jd=an()+500,$0&&Lc()))}function Xr(t,e){var n=t.callbackNode;DM(t,e);var r=vw(t,t===On?qn:0);if(r===0)n!==null&&YI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&YI(n),e===1)t.tag===0?$B(F2.bind(null,t)):O3(F2.bind(null,t)),PB(function(){!(st&6)&&Lc()}),n=null;else{switch(a3(r)){case 1:n=Kx;break;case 4:n=s3;break;case 16:n=ww;break;case 536870912:n=i3;break;default:n=ww}n=P$(n,C$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C$(t,e){if(Vy=-1,Gy=0,st&6)throw Error(re(327));var n=t.callbackNode;if(Cd()&&t.callbackNode!==n)return null;var r=vw(t,t===On?qn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uw(t,r);else{e=r;var s=st;st|=2;var i=S$();(On!==t||qn!==e)&&(Co=null,Jd=an()+500,Pl(t,e));do try{tF();break}catch(a){x$(t,a)}while(!0);aS(),$w.current=i,st=s,pn!==null?e=0:(On=null,qn=0,e=_n)}if(e!==0){if(e===2&&(s=FE(t),s!==0&&(r=s,e=g_(t,s))),e===1)throw n=Dp,Pl(t,0),La(t,r),Xr(t,an()),n;if(e===6)La(t,r);else{if(s=t.current.alternate,!(r&30)&&!XB(s)&&(e=Uw(t,r),e===2&&(i=FE(t),i!==0&&(r=i,e=g_(t,i))),e===1))throw n=Dp,Pl(t,0),La(t,r),Xr(t,an()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:el(t,Gr,Co);break;case 3:if(La(t,r),(r&130023424)===r&&(e=_S+500-an(),10<e)){if(vw(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Er(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=YE(el.bind(null,t,Gr,Co),e);break}el(t,Gr,Co);break;case 4:if(La(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vi(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=an()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZB(r/1960))-r,10<r){t.timeoutHandle=YE(el.bind(null,t,Gr,Co),r);break}el(t,Gr,Co);break;case 5:el(t,Gr,Co);break;default:throw Error(re(329))}}}return Xr(t,an()),t.callbackNode===n?C$.bind(null,t):null}function g_(t,e){var n=Kf;return t.current.memoizedState.isDehydrated&&(Pl(t,e).flags|=256),t=Uw(t,e),t!==2&&(e=Gr,Gr=n,e!==null&&m_(e)),t}function m_(t){Gr===null?Gr=t:Gr.push.apply(Gr,t)}function XB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!xi(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function La(t,e){for(e&=~ES,e&=~L0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vi(e),r=1<<n;t[n]=-1,e&=~r}}function F2(t){if(st&6)throw Error(re(327));Cd();var e=vw(t,0);if(!(e&1))return Xr(t,an()),null;var n=Uw(t,e);if(t.tag!==0&&n===2){var r=FE(t);r!==0&&(e=r,n=g_(t,r))}if(n===1)throw n=Dp,Pl(t,0),La(t,e),Xr(t,an()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,el(t,Gr,Co),Xr(t,an()),null}function CS(t,e){var n=st;st|=1;try{return t(e)}finally{st=n,st===0&&(Jd=an()+500,$0&&Lc())}}function Fl(t){ec!==null&&ec.tag===0&&!(st&6)&&Cd();var e=st;st|=1;var n=zs.transition,r=Et;try{if(zs.transition=null,Et=1,t)return t()}finally{Et=r,zs.transition=n,st=e,!(st&6)&&Lc()}}function xS(){us=pd.current,zt(pd)}function Pl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NB(n)),pn!==null)for(n=pn.return;n!==null;){var r=n;switch(sS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xw();break;case 3:Kd(),zt(Qr),zt(dr),fS();break;case 5:hS(r);break;case 4:Kd();break;case 13:zt(Kt);break;case 19:zt(Kt);break;case 10:cS(r.type._context);break;case 22:case 23:xS()}n=n.return}if(On=t,pn=t=pc(t.current,null),qn=us=e,_n=0,Dp=null,ES=L0=Bl=0,Gr=Kf=null,ul!==null){for(e=0;e<ul.length;e++)if(n=ul[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ul=null}return t}function x$(t,e){do{var n=pn;try{if(aS(),Wy.current=Rw,Ow){for(var r=Jt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ow=!1}if(Ml=0,Tn=vn=Jt=null,Vf=!1,Op=0,bS.current=null,n===null||n.return===null){_n=1,Dp=e,pn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=qn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=T2(o);if(f!==null){f.flags&=-257,N2(f,o,a,i,e),f.mode&1&&I2(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){I2(i,l,e),SS();break e}c=Error(re(426))}}else if(qt&&a.mode&1){var w=T2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),N2(w,o,a,i,e),iS(Yd(c,a));break e}}i=c=Yd(c,a),_n!==4&&(_n=2),Kf===null?Kf=[i]:Kf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=a$(i,c,e);E2(i,y);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(hc===null||!hc.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=c$(i,a,e);E2(i,_);break e}}i=i.return}while(i!==null)}I$(n)}catch(E){e=E,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function S$(){var t=$w.current;return $w.current=Rw,t===null?Rw:t}function SS(){(_n===0||_n===3||_n===2)&&(_n=4),On===null||!(Bl&268435455)&&!(L0&268435455)||La(On,qn)}function Uw(t,e){var n=st;st|=2;var r=S$();(On!==t||qn!==e)&&(Co=null,Pl(t,e));do try{eF();break}catch(s){x$(t,s)}while(!0);if(aS(),st=n,$w.current=r,pn!==null)throw Error(re(261));return On=null,qn=0,_n}function eF(){for(;pn!==null;)A$(pn)}function tF(){for(;pn!==null&&!AM();)A$(pn)}function A$(t){var e=N$(t.alternate,t,us);t.memoizedProps=t.pendingProps,e===null?I$(t):pn=e,bS.current=null}function I$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KB(n,e),n!==null){n.flags&=32767,pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_n=6,pn=null;return}}else if(n=GB(n,e,us),n!==null){pn=n;return}if(e=e.sibling,e!==null){pn=e;return}pn=e=t}while(e!==null);_n===0&&(_n=5)}function el(t,e,n){var r=Et,s=zs.transition;try{zs.transition=null,Et=1,nF(t,e,n,r)}finally{zs.transition=s,Et=r}return null}function nF(t,e,n,r){do Cd();while(ec!==null);if(st&6)throw Error(re(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jM(t,i),t===On&&(pn=On=null,qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zm||(zm=!0,P$(ww,function(){return Cd(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=zs.transition,zs.transition=null;var o=Et;Et=1;var a=st;st|=4,bS.current=null,JB(t,n),E$(n,t),_B(GE),bw=!!VE,GE=VE=null,t.current=n,QB(n),IM(),st=a,Et=o,zs.transition=i}else t.current=n;if(zm&&(zm=!1,ec=t,jw=s),i=t.pendingLanes,i===0&&(hc=null),PM(n.stateNode),Xr(t,an()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Dw)throw Dw=!1,t=f_,f_=null,t;return jw&1&&t.tag!==0&&Cd(),i=t.pendingLanes,i&1?t===p_?Yf++:(Yf=0,p_=t):Yf=0,Lc(),null}function Cd(){if(ec!==null){var t=a3(jw),e=zs.transition,n=Et;try{if(zs.transition=null,Et=16>t?16:t,ec===null)var r=!1;else{if(t=ec,ec=null,jw=0,st&6)throw Error(re(331));var s=st;for(st|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(_e=l;_e!==null;){var u=_e;switch(u.tag){case 0:case 11:case 15:Gf(8,u,i)}var d=u.child;if(d!==null)d.return=u,_e=d;else for(;_e!==null;){u=_e;var h=u.sibling,f=u.return;if(w$(u),u===l){_e=null;break}if(h!==null){h.return=f,_e=h;break}_e=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Gf(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,_e=y;break e}_e=i.return}}var b=t.current;for(_e=b;_e!==null;){o=_e;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,_e=v;else e:for(o=b;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:U0(9,a)}}catch(E){nn(a,a.return,E)}if(a===o){_e=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,_e=_;break e}_e=a.return}}if(st=s,Lc(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(N0,t)}catch{}r=!0}return r}finally{Et=n,zs.transition=e}}return!1}function z2(t,e,n){e=Yd(n,e),e=a$(t,e,1),t=dc(t,e,1),e=Er(),t!==null&&(qg(t,1,e),Xr(t,e))}function nn(t,e,n){if(t.tag===3)z2(t,t,n);else for(;e!==null;){if(e.tag===3){z2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hc===null||!hc.has(r))){t=Yd(n,t),t=c$(e,t,1),e=dc(e,t,1),t=Er(),e!==null&&(qg(e,1,t),Xr(e,t));break}}e=e.return}}function rF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Er(),t.pingedLanes|=t.suspendedLanes&n,On===t&&(qn&n)===n&&(_n===4||_n===3&&(qn&130023424)===qn&&500>an()-_S?Pl(t,0):ES|=n),Xr(t,e)}function T$(t,e){e===0&&(t.mode&1?(e=Om,Om<<=1,!(Om&130023424)&&(Om=4194304)):e=1);var n=Er();t=Wo(t,e),t!==null&&(qg(t,e,n),Xr(t,n))}function sF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),T$(t,n)}function iF(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),T$(t,n)}var N$;N$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qr.current)Yr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yr=!1,VB(t,e,n);Yr=!!(t.flags&131072)}else Yr=!1,qt&&e.flags&1048576&&R3(e,Iw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hy(t,e),t=e.pendingProps;var s=Hd(e,dr.current);_d(e,n),s=gS(null,e,r,t,s,n);var i=mS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zr(r)?(i=!0,Sw(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,uS(e),s.updater=j0,e.stateNode=s,s._reactInternals=e,n_(e,r,t,n),e=i_(null,e,r,!0,i,n)):(e.tag=0,qt&&i&&rS(e),wr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hy(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=aF(r),t=ai(r,t),s){case 0:e=s_(null,e,r,t,n);break e;case 1:e=O2(null,e,r,t,n);break e;case 11:e=P2(null,e,r,t,n);break e;case 14:e=k2(null,e,r,ai(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ai(r,s),s_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ai(r,s),O2(t,e,r,s,n);case 3:e:{if(h$(e),t===null)throw Error(re(387));r=e.pendingProps,i=e.memoizedState,s=i.element,M3(t,e),Pw(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Yd(Error(re(423)),e),e=R2(t,e,r,n,s);break e}else if(r!==s){s=Yd(Error(re(424)),e),e=R2(t,e,r,n,s);break e}else for(ps=uc(e.stateNode.containerInfo.firstChild),ys=e,qt=!0,hi=null,n=U3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vd(),r===s){e=qo(t,e,n);break e}wr(t,e,r,n)}e=e.child}return e;case 5:return B3(e),t===null&&XE(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,KE(r,s)?o=null:i!==null&&KE(r,i)&&(e.flags|=32),d$(t,e),wr(t,e,o,n),e.child;case 6:return t===null&&XE(e),null;case 13:return f$(t,e,n);case 4:return dS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gd(e,null,r,n):wr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ai(r,s),P2(t,e,r,s,n);case 7:return wr(t,e,e.pendingProps,n),e.child;case 8:return wr(t,e,e.pendingProps.children,n),e.child;case 12:return wr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Rt(Tw,r._currentValue),r._currentValue=o,i!==null)if(xi(i.value,o)){if(i.children===s.children&&!Qr.current){e=qo(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Do(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),e_(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(re(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),e_(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_d(e,n),s=Ws(s),r=r(s),e.flags|=1,wr(t,e,r,n),e.child;case 14:return r=e.type,s=ai(r,e.pendingProps),s=ai(r.type,s),k2(t,e,r,s,n);case 15:return l$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ai(r,s),Hy(t,e),e.tag=1,Zr(r)?(t=!0,Sw(e)):t=!1,_d(e,n),o$(e,r,s),n_(e,r,s,n),i_(null,e,r,!0,t,n);case 19:return p$(t,e,n);case 22:return u$(t,e,n)}throw Error(re(156,e.tag))};function P$(t,e){return r3(t,e)}function oF(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bs(t,e,n,r){return new oF(t,e,n,r)}function AS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aF(t){if(typeof t=="function")return AS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hx)return 11;if(t===Vx)return 14}return 2}function pc(t,e){var n=t.alternate;return n===null?(n=Bs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ky(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")AS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case sd:return kl(n.children,s,i,e);case qx:o=8,s|=8;break;case AE:return t=Bs(12,n,e,s|2),t.elementType=AE,t.lanes=i,t;case IE:return t=Bs(13,n,e,s),t.elementType=IE,t.lanes=i,t;case TE:return t=Bs(19,n,e,s),t.elementType=TE,t.lanes=i,t;case BR:return M0(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LR:o=10;break e;case MR:o=9;break e;case Hx:o=11;break e;case Vx:o=14;break e;case Ta:o=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Bs(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function kl(t,e,n,r){return t=Bs(7,t,r,e),t.lanes=n,t}function M0(t,e,n,r){return t=Bs(22,t,r,e),t.elementType=BR,t.lanes=n,t.stateNode={isHidden:!1},t}function Ib(t,e,n){return t=Bs(6,t,null,e),t.lanes=n,t}function Tb(t,e,n){return e=Bs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cF(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cb(0),this.expirationTimes=cb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cb(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function IS(t,e,n,r,s,i,o,a,c){return t=new cF(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bs(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uS(i),t}function lF(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function k$(t){if(!t)return Ac;t=t._reactInternals;e:{if(cu(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(Zr(n))return k3(t,n,e)}return e}function O$(t,e,n,r,s,i,o,a,c){return t=IS(n,r,!0,t,s,i,o,a,c),t.context=k$(null),n=t.current,r=Er(),s=fc(n),i=Do(r,s),i.callback=e??null,dc(n,i,s),t.current.lanes=s,qg(t,s,r),Xr(t,r),t}function B0(t,e,n,r){var s=e.current,i=Er(),o=fc(s);return n=k$(n),e.context===null?e.context=n:e.pendingContext=n,e=Do(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dc(s,e,o),t!==null&&(bi(t,s,o,i),zy(t,s,o)),o}function Lw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function TS(t,e){W2(t,e),(t=t.alternate)&&W2(t,e)}function uF(){return null}var R$=typeof reportError=="function"?reportError:function(t){console.error(t)};function NS(t){this._internalRoot=t}F0.prototype.render=NS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));B0(t,e,null,null)};F0.prototype.unmount=NS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fl(function(){B0(null,t,null,null)}),e[zo]=null}};function F0(t){this._internalRoot=t}F0.prototype.unstable_scheduleHydration=function(t){if(t){var e=u3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ua.length&&e!==0&&e<Ua[n].priority;n++);Ua.splice(n,0,t),n===0&&h3(t)}};function PS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function z0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function q2(){}function dF(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Lw(o);i.call(l)}}var o=O$(e,r,t,0,null,!1,!1,"",q2);return t._reactRootContainer=o,t[zo]=o.current,Ip(t.nodeType===8?t.parentNode:t),Fl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Lw(c);a.call(l)}}var c=IS(t,0,!1,null,null,!1,!1,"",q2);return t._reactRootContainer=c,t[zo]=c.current,Ip(t.nodeType===8?t.parentNode:t),Fl(function(){B0(e,c,n,r)}),c}function W0(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Lw(o);a.call(c)}}B0(e,o,t,s)}else o=dF(n,e,t,s,r);return Lw(o)}c3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Af(e.pendingLanes);n!==0&&(Yx(e,n|1),Xr(e,an()),!(st&6)&&(Jd=an()+500,Lc()))}break;case 13:Fl(function(){var r=Wo(t,1);if(r!==null){var s=Er();bi(r,t,1,s)}}),TS(t,1)}};Jx=function(t){if(t.tag===13){var e=Wo(t,134217728);if(e!==null){var n=Er();bi(e,t,134217728,n)}TS(t,134217728)}};l3=function(t){if(t.tag===13){var e=fc(t),n=Wo(t,e);if(n!==null){var r=Er();bi(n,t,e,r)}TS(t,e)}};u3=function(){return Et};d3=function(t,e){var n=Et;try{return Et=t,e()}finally{Et=n}};LE=function(t,e,n){switch(e){case"input":if(kE(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=R0(r);if(!s)throw Error(re(90));zR(r),kE(r,s)}}}break;case"textarea":qR(t,n);break;case"select":e=n.value,e!=null&&wd(t,!!n.multiple,e,!1)}};QR=CS;ZR=Fl;var hF={usingClientEntryPoint:!1,Events:[Vg,cd,R0,YR,JR,CS]},Kh={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fF={bundleType:Kh.bundleType,version:Kh.version,rendererPackageName:Kh.rendererPackageName,rendererConfig:Kh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=t3(t),t===null?null:t.stateNode},findFiberByHostInstance:Kh.findFiberByHostInstance||uF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wm.isDisabled&&Wm.supportsFiber)try{N0=Wm.inject(fF),Yi=Wm}catch{}}_s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hF;_s.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PS(e))throw Error(re(200));return lF(t,e,null,n)};_s.createRoot=function(t,e){if(!PS(t))throw Error(re(299));var n=!1,r="",s=R$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=IS(t,1,!1,null,null,n,!1,r,s),t[zo]=e.current,Ip(t.nodeType===8?t.parentNode:t),new NS(e)};_s.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=t3(e),t=t===null?null:t.stateNode,t};_s.flushSync=function(t){return Fl(t)};_s.hydrate=function(t,e,n){if(!z0(e))throw Error(re(200));return W0(null,t,e,!0,n)};_s.hydrateRoot=function(t,e,n){if(!PS(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=R$;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=O$(e,null,t,1,n??null,s,!1,i,o),t[zo]=e.current,Ip(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new F0(e)};_s.render=function(t,e,n){if(!z0(e))throw Error(re(200));return W0(null,t,e,!1,n)};_s.unmountComponentAtNode=function(t){if(!z0(t))throw Error(re(40));return t._reactRootContainer?(Fl(function(){W0(null,null,t,!1,function(){t._reactRootContainer=null,t[zo]=null})}),!0):!1};_s.unstable_batchedUpdates=CS;_s.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!z0(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return W0(t,e,n,!1,r)};_s.version="18.3.1-next-f1338f8080-20240426";function $$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($$)}catch(t){console.error(t)}}$$(),$R.exports=_s;var kS=$R.exports,H2=kS;xE.createRoot=H2.createRoot,xE.hydrateRoot=H2.hydrateRoot;const D$="2.31.4";let Yh={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${D$}`},ee=class y_ extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof y_?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof y_&&n.cause.docsPath||n.docsPath,i=(a=Yh.getDocsUrl)==null?void 0:a.call(Yh,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Yh.version?[`Version: ${Yh.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=D$}walk(e){return j$(this,e)}};function j$(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?j$(t.cause,e):e?null:t}let U$=class extends ee{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class pF extends ee{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let gF=class extends ee{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class L$ extends ee{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let M$=class extends ee{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class V2 extends ee{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function gh(t,{dir:e,size:n=32}={}){return typeof t=="string"?gc(t,{dir:e,size:n}):mF(t,{dir:e,size:n})}function gc(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new M$({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function mF(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new M$({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Ho(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function ln(t){return Ho(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function mh(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const yF=new TextEncoder;function q0(t,e={}){return typeof t=="number"||typeof t=="bigint"?vF(t,e):typeof t=="boolean"?wF(t,e):Ho(t)?to(t,e):xd(t,e)}function wF(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ii(n,{size:e.size}),gh(n,{size:e.size})):n}const co={zero:48,nine:57,A:65,F:70,a:97,f:102};function G2(t){if(t>=co.zero&&t<=co.nine)return t-co.zero;if(t>=co.A&&t<=co.F)return t-(co.A-10);if(t>=co.a&&t<=co.f)return t-(co.a-10)}function to(t,e={}){let n=t;e.size&&(Ii(n,{size:e.size}),n=gh(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=G2(r.charCodeAt(a++)),l=G2(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ee(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function vF(t,e){const n=je(t,e);return to(n)}function xd(t,e={}){const n=yF.encode(t);return typeof e.size=="number"?(Ii(n,{size:e.size}),gh(n,{dir:"right",size:e.size})):n}function Ii(t,{size:e}){if(ln(t)>e)throw new gF({givenSize:ln(t),maxSize:e})}function Vo(t,e={}){const{signed:n}=e;e.size&&Ii(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Go(t,e={}){return Number(Vo(t,e))}function B$(t,e={}){let n=to(t);return e.size&&(Ii(n,{size:e.size}),n=mh(n,{dir:"right"})),new TextDecoder().decode(n)}const bF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function zl(t,e={}){return typeof t=="number"||typeof t=="bigint"?je(t,e):typeof t=="string"?H0(t,e):typeof t=="boolean"?F$(t,e):Sr(t,e)}function F$(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ii(n,{size:e.size}),gh(n,{size:e.size})):n}function Sr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=bF[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ii(r,{size:e.size}),gh(r,{dir:"right",size:e.size})):r}function je(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new U$({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?gh(a,{size:r}):a}const EF=new TextEncoder;function H0(t,e={}){const n=EF.encode(t);return Sr(n,e)}async function _F(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:je(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Ic(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new DF(t.type);return`${t.name}(${V0(t.inputs,{includeName:e})})`}function V0(t,{includeName:e=!1}={}){return t?t.map(n=>CF(n,{includeName:e})).join(e?", ":","):""}function CF(t,{includeName:e}){return t.type.startsWith("tuple")?`(${V0(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class xF extends ee{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class K2 extends ee{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class z$ extends ee{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${V0(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class G0 extends ee{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class SF extends ee{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class AF extends ee{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${ln(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class IF extends ee{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class xCe extends ee{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class SCe extends ee{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class W$ extends ee{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class TF extends ee{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class q$ extends ee{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Mw extends ee{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class NF extends ee{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class ACe extends ee{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class PF extends ee{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Ic(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Ic(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class kF extends ee{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class w_ extends ee{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${V0(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class H$ extends ee{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ic(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class OF extends ee{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class RF extends ee{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class $F extends ee{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class DF extends ee{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Tc(t){return typeof t[0]=="string"?K0(t):jF(t)}function jF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function K0(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class Nc extends ee{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let Y0=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const qm=BigInt(2**32-1),Y2=BigInt(32);function UF(t,e=!1){return e?{h:Number(t&qm),l:Number(t>>Y2&qm)}:{h:Number(t>>Y2&qm)|0,l:Number(t&qm)|0}}function LF(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=UF(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const MF=(t,e,n)=>t<<n|e>>>32-n,BF=(t,e,n)=>e<<n|t>>>32-n,FF=(t,e,n)=>e<<n-32|t>>>64-n,zF=(t,e,n)=>t<<n-32|e>>>64-n,Cu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function WF(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Bw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Wl(t,...e){if(!WF(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function TCe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Bw(t.outputLen),Bw(t.blockLen)}function Fw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function V$(t,e){Wl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function qF(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function jp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Nb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ki(t,e){return t<<32-e|t>>>e}const HF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function VF(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function GF(t){for(let e=0;e<t.length;e++)t[e]=VF(t[e]);return t}const J2=HF?t=>t:GF,G$=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",KF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function NCe(t){if(Wl(t),G$)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=KF[t[n]];return e}const lo={_0:48,_9:57,A:65,F:70,a:97,f:102};function Q2(t){if(t>=lo._0&&t<=lo._9)return t-lo._0;if(t>=lo.A&&t<=lo.F)return t-(lo.A-10);if(t>=lo.a&&t<=lo.f)return t-(lo.a-10)}function PCe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(G$)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Q2(t.charCodeAt(i)),a=Q2(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function YF(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function J0(t){return typeof t=="string"&&(t=YF(t)),Wl(t),t}function kCe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Wl(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class K${}function Y$(t){const e=r=>t().update(J0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function JF(t){const e=(r,s)=>t(s).update(J0(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function OCe(t=32){if(Cu&&typeof Cu.getRandomValues=="function")return Cu.getRandomValues(new Uint8Array(t));if(Cu&&typeof Cu.randomBytes=="function")return Uint8Array.from(Cu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const QF=BigInt(0),Jh=BigInt(1),ZF=BigInt(2),XF=BigInt(7),e9=BigInt(256),t9=BigInt(113),J$=[],Q$=[],Z$=[];for(let t=0,e=Jh,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],J$.push(2*(5*r+n)),Q$.push((t+1)*(t+2)/2%64);let s=QF;for(let i=0;i<7;i++)e=(e<<Jh^(e>>XF)*t9)%e9,e&ZF&&(s^=Jh<<(Jh<<BigInt(i))-Jh);Z$.push(s)}const X$=LF(Z$,!0),n9=X$[0],r9=X$[1],Z2=(t,e,n)=>n>32?FF(t,e,n):MF(t,e,n),X2=(t,e,n)=>n>32?zF(t,e,n):BF(t,e,n);function eD(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Z2(l,u,1)^n[a],h=X2(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Q$[o],c=Z2(s,i,a),l=X2(s,i,a),u=J$[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=n9[r],t[1]^=r9[r]}jp(n)}class Kg extends K${constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Bw(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=qF(this.state)}clone(){return this._cloneInto()}keccak(){J2(this.state32),eD(this.state32,this.rounds),J2(this.state32),this.posOut=0,this.pos=0}update(e){Fw(this),e=J0(e),Wl(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Fw(this,!1),Wl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(V$(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,jp(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Kg(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Mc=(t,e,n)=>Y$(()=>new Kg(e,t,n)),s9=Mc(6,144,224/8),i9=Mc(6,136,256/8),o9=Mc(6,104,384/8),a9=Mc(6,72,512/8),c9=Mc(1,144,224/8),OS=Mc(1,136,256/8),l9=Mc(1,104,384/8),u9=Mc(1,72,512/8),tD=(t,e,n)=>JF((r={})=>new Kg(e,t,r.dkLen===void 0?n:r.dkLen,!0)),d9=tD(31,168,128/8),h9=tD(31,136,256/8),RCe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Kg,keccakP:eD,keccak_224:c9,keccak_256:OS,keccak_384:l9,keccak_512:u9,sha3_224:s9,sha3_256:i9,sha3_384:o9,sha3_512:a9,shake128:d9,shake256:h9},Symbol.toStringTag,{value:"Module"}));function yh(t,e){const n=e||"hex",r=OS(Ho(t,{strict:!1})?q0(t):t);return n==="bytes"?r:zl(r)}const Pb=new Y0(8192);function Yg(t,e){if(Pb.has(`${t}.${e}`))return Pb.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=yh(xd(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Pb.set(`${t}.${e}`,i),i}function tc(t,e){if(!Si(t,{strict:!1}))throw new Nc({address:t});return Yg(t,e)}const f9=/^0x[a-fA-F0-9]{40}$/,kb=new Y0(8192);function Si(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(kb.has(r))return kb.get(r);const s=f9.test(t)?t.toLowerCase()===t?!0:n?Yg(t)===t:!0:!1;return kb.set(r,s),s}function zw(t,e,n,{strict:r}={}){return Ho(t,{strict:!1})?v_(t,e,n,{strict:r}):sD(t,e,n,{strict:r})}function nD(t,e){if(typeof e=="number"&&e>0&&e>ln(t)-1)throw new L$({offset:e,position:"start",size:ln(t)})}function rD(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ln(t)!==n-e)throw new L$({offset:n,position:"end",size:ln(t)})}function sD(t,e,n,{strict:r}={}){nD(t,e);const s=t.slice(e,n);return r&&rD(s,e,n),s}function v_(t,e,n,{strict:r}={}){nD(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&rD(s,e,n),s}const p9=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,iD=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function oD(t,e){if(t.length!==e.length)throw new IF({expectedLength:t.length,givenLength:e.length});const n=g9({params:t,values:e}),r=$S(n);return r.length===0?"0x":r}function g9({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(RS({param:t[r],value:e[r]}));return n}function RS({param:t,value:e}){const n=DS(t.type);if(n){const[r,s]=n;return y9(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return _9(e,{param:t});if(t.type==="address")return m9(e);if(t.type==="bool")return v9(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=iD.exec(t.type)??[];return b9(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return w9(e,{param:t});if(t.type==="string")return E9(e);throw new OF(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function $S(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=ln(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(je(e+s,{size:32})),r.push(a),s+=ln(a)):n.push(a)}return Tc([...n,...r])}function m9(t){if(!Si(t))throw new Nc({address:t});return{dynamic:!1,encoded:gc(t.toLowerCase())}}function y9(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new $F(t);if(!r&&t.length!==e)throw new SF({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=RS({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=$S(i);if(r){const a=je(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Tc([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Tc(i.map(({encoded:o})=>o))}}function w9(t,{param:e}){const[,n]=e.type.split("bytes"),r=ln(t);if(!n){let s=t;return r%32!==0&&(s=gc(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Tc([gc(je(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new AF({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:gc(t,{dir:"right"})}}function v9(t){if(typeof t!="boolean")throw new ee(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:gc(F$(t))}}function b9(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new U$({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:je(t,{size:32,signed:e})}}function E9(t){const e=H0(t),n=Math.ceil(ln(e)/32),r=[];for(let s=0;s<n;s++)r.push(gc(zw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Tc([gc(je(ln(e),{size:32})),...r])}}function _9(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=RS({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?$S(r):Tc(r.map(({encoded:s})=>s))}}function DS(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const Ob="/docs/contract/encodeDeployData";function jS(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new xF({docsPath:Ob});if(!("inputs"in s))throw new K2({docsPath:Ob});if(!s.inputs||s.inputs.length===0)throw new K2({docsPath:Ob});const i=oD(s.inputs,n);return K0([r,i])}function Vn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class lu extends ee{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Yy extends ee{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function C9(t){const e=yh(`0x${t.substring(4)}`).substring(26);return Yg(`0x${e}`)}const x9="modulepreload",S9=function(t){return"/"+t},eT={},on=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=S9(c),c in eT)return;eT[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":x9,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function A9({hash:t,signature:e}){const n=Ho(t)?t:zl(t),{secp256k1:r}=await on(async()=>{const{secp256k1:o}=await import("./secp256k1-CRTVNpDj.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=tT(f);return new r.Signature(Vo(l),Vo(u)).addRecoveryBit(p)}const o=Ho(e)?e:zl(e);if(ln(o)!==65)throw new Error("invalid signature length");const a=Go(`0x${o.slice(130)}`),c=tT(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function tT(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function I9({hash:t,signature:e}){return C9(await A9({hash:t,signature:e}))}class nT extends ee{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class aD extends ee{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class T9 extends ee{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const N9={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new T9({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new aD({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new nT({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new nT({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function US(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(N9);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function P9(t,e="hex"){const n=cD(t),r=US(new Uint8Array(n.length));return n.encode(r),e==="hex"?Sr(r.bytes):r.bytes}function cD(t){return Array.isArray(t)?k9(t.map(e=>cD(e))):O9(t)}function k9(t){const e=t.reduce((s,i)=>s+i.length,0),n=lD(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function O9(t){const e=typeof t=="string"?to(t):t,n=lD(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function lD(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ee("Length is too large.")}function R9(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=yh(K0(["0x05",P9([e?je(e):"0x",s,n?je(n):"0x"])]));return r==="bytes"?to(i):i}async function uD(t){const{authorization:e,signature:n}=t;return I9({hash:R9(e),signature:n??e})}class b_ extends ee{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class $9 extends ee{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class D9 extends ee{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class dD extends ee{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function hD({chain:t,currentChainId:e}){if(!t)throw new D9;if(e!==t.id)throw new $9({chain:t,currentChainId:e})}const j9={gwei:9,wei:18},U9={ether:-9,wei:9},L9={ether:-18,gwei:-9};function wh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function es(t,e="wei"){return wh(t,U9[e])}class hl extends ee{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(hl,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(hl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ww extends ee{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${es(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Ww,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class E_ extends ee{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${es(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(E_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class __ extends ee{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(__,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class C_ extends ee{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(C_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class x_ extends ee{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(x_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class S_ extends ee{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(S_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class A_ extends ee{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(A_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class I_ extends ee{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(I_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class T_ extends ee{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(T_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class qw extends ee{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${es(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${es(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(qw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Q0 extends ee{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function LS(t,e="wei"){return wh(t,j9[e])}function Jg(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class M9 extends ee{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class B9 extends ee{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Jg(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class F9 extends ee{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Jg({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${LS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${es(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${es(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${es(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class fD extends ee{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class pD extends ee{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class z9 extends ee{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const _r=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),W9=t=>t,MS=t=>t;class Jf extends ee{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${MS(o)}`,e&&`Request body: ${_r(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class BS extends ee{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${MS(r)}`,`Request body: ${_r(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class rT extends ee{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${MS(n)}`,`Request body: ${_r(e)}`],name:"TimeoutError"})}}const q9=-1;class ns extends ee{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof BS?e.code:n??q9}}class xs extends ns{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Up extends ns{constructor(e){super(e,{code:Up.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Up,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Lp extends ns{constructor(e){super(e,{code:Lp.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Lp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Mp extends ns{constructor(e,{method:n}={}){super(e,{code:Mp.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Mp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Bp extends ns{constructor(e){super(e,{code:Bp.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Bp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class ql extends ns{constructor(e){super(e,{code:ql.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(ql,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Fp extends ns{constructor(e){super(e,{code:Fp.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Fp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class zp extends ns{constructor(e){super(e,{code:zp.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class mc extends ns{constructor(e){super(e,{code:mc.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(mc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Qd extends ns{constructor(e){super(e,{code:Qd.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Qd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class fl extends ns{constructor(e,{method:n}={}){super(e,{code:fl.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(fl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Zd extends ns{constructor(e){super(e,{code:Zd.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Zd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Wp extends ns{constructor(e){super(e,{code:Wp.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class wn extends xs{constructor(e){super(e,{code:wn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class qp extends xs{constructor(e){super(e,{code:qp.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Hp extends xs{constructor(e,{method:n}={}){super(e,{code:Hp.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Vp extends xs{constructor(e){super(e,{code:Vp.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Gp extends xs{constructor(e){super(e,{code:Gp.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class no extends xs{constructor(e){super(e,{code:no.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(no,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Xd extends xs{constructor(e){super(e,{code:Xd.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Xd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Kp extends xs{constructor(e){super(e,{code:Kp.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Yp extends xs{constructor(e){super(e,{code:Yp.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Jp extends xs{constructor(e){super(e,{code:Jp.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Jp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Qp extends xs{constructor(e){super(e,{code:Qp.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Zp extends xs{constructor(e){super(e,{code:Zp.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class eh extends xs{constructor(e){super(e,{code:eh.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(eh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class H9 extends ns{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function FS(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ee?t.walk(s=>(s==null?void 0:s.code)===hl.code):t;return r instanceof ee?new hl({cause:t,message:r.details}):hl.nodeMessage.test(n)?new hl({cause:t,message:t.details}):Ww.nodeMessage.test(n)?new Ww({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):E_.nodeMessage.test(n)?new E_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):__.nodeMessage.test(n)?new __({cause:t,nonce:e==null?void 0:e.nonce}):C_.nodeMessage.test(n)?new C_({cause:t,nonce:e==null?void 0:e.nonce}):x_.nodeMessage.test(n)?new x_({cause:t,nonce:e==null?void 0:e.nonce}):S_.nodeMessage.test(n)?new S_({cause:t}):A_.nodeMessage.test(n)?new A_({cause:t,gas:e==null?void 0:e.gas}):I_.nodeMessage.test(n)?new I_({cause:t,gas:e==null?void 0:e.gas}):T_.nodeMessage.test(n)?new T_({cause:t}):qw.nodeMessage.test(n)?new qw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Q0({cause:t})}function gD(t,{docsPath:e,...n}){const r=(()=>{const s=FS(t,n);return s instanceof Q0?t:s})();return new F9(r,{docsPath:e,...n})}function zS(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const V9={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Z0(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=G9(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Sr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=je(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=je(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=je(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=je(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=je(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=je(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=V9[t.type]),typeof t.value<"u"&&(e.value=je(t.value)),e}function G9(t){return t.map(e=>({address:e.address,r:e.r?je(BigInt(e.r)):e.r,s:e.s?je(BigInt(e.s)):e.s,chainId:je(e.chainId),nonce:je(e.nonce),...typeof e.yParity<"u"?{yParity:je(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:je(e.v)}:{}}))}function At(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const K9=2n**256n-1n;function Qg(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Vn(e):void 0;if(o&&!Si(o.address))throw new Nc({address:o.address});if(i&&!Si(i))throw new Nc({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new M9;if(r&&r>K9)throw new Ww({maxFeePerGas:r});if(s&&r&&s>r)throw new qw({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Zg(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Go(e)}class Y9 extends ee{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class WS extends ee{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class J9 extends ee{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${es(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class mD extends ee{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const yD={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function wD(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Go(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Go(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?yD[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=Q9(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function Q9(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Z9(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:wD(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Xp(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?je(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new mD({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||Z9)(c)}async function vD(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function X9(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await At(t,Xp,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Vo(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):At(t,Xp,"getBlock")({}),At(t,vD,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new WS;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function sT(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new Y9;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await At(t,Xp,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new WS;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await X9(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await At(t,vD,"getGasPrice")({}))}}class e7 extends ee{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Jg({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${LS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${es(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${es(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${es(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function t7(t,{docsPath:e,...n}){const r=(()=>{const s=FS(t,n);return s instanceof Q0?t:s})();return new e7(r,{docsPath:e,...n})}class n7 extends ee{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class r7 extends ee{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function iT(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function s7(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=iT(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=iT(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function oT(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new V2({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new V2({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function i7(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=je(e)),n!==void 0&&(o.nonce=je(n)),r!==void 0&&(o.state=oT(r)),s!==void 0){if(o.state)throw new r7;o.stateDiff=oT(s)}return o}function bD(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Si(n,{strict:!1}))throw new Nc({address:n});if(e[n])throw new n7({address:n});e[n]=i7(r)}return e}async function ED(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?je(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function _D(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Vn(n):void 0;try{let B=function(A){const{block:j,request:P,rpcStateOverride:k}=A;return t.request({method:"eth_estimateGas",params:k?[P,j??"latest",k]:j?[P,j]:[P]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:_,stateOverride:E,...x}=await X0(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?je(d):void 0)||h,C=bD(E),O=await(async()=>{if(x.to)return x.to;if(c&&c.length>0)return await uD({authorization:c[0]}).catch(()=>{throw new ee("`to` is required. Could not infer from `authorizationList`")})})();Qg(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,q=(R||Z0)({...zS(x,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:O,value:_});let I=BigInt(await B({block:T,request:q,rpcStateOverride:C}));if(c){const A=await ED(t,{address:q.from}),j=await Promise.all(c.map(async P=>{const{address:k}=P,U=await B({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:k,value:je(A)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(U)}));I+=j.reduce((P,k)=>P+k,0n)}return I}catch(a){throw t7(a,{...e,account:r,chain:t.chain})}}async function CD(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?je(r):n]},{dedupe:!!r});return Go(s)}function xD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>to(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Sr(i))}function SD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>to(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>to(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Sr(o))}function o7(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function a7(t,e,n){return t&e^~t&n}function c7(t,e,n){return t&e^t&n^e&n}class l7 extends K${constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Nb(this.buffer)}update(e){Fw(this),e=J0(e),Wl(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Nb(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fw(this),V$(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,jp(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;o7(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Nb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const oa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u7=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),aa=new Uint32Array(64);class d7 extends l7{constructor(e=32){super(64,e,8,!1),this.A=oa[0]|0,this.B=oa[1]|0,this.C=oa[2]|0,this.D=oa[3]|0,this.E=oa[4]|0,this.F=oa[5]|0,this.G=oa[6]|0,this.H=oa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)aa[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=aa[d-15],f=aa[d-2],p=ki(h,7)^ki(h,18)^h>>>3,g=ki(f,17)^ki(f,19)^f>>>10;aa[d]=g+aa[d-7]+p+aa[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ki(a,6)^ki(a,11)^ki(a,25),f=u+h+a7(a,c,l)+u7[d]+aa[d]|0,g=(ki(r,2)^ki(r,13)^ki(r,22))+c7(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){jp(aa)}destroy(){this.set(0,0,0,0,0,0,0,0),jp(this.buffer)}}const h7=Y$(()=>new d7),f7=h7;function p7(t,e){return f7(Ho(t,{strict:!1})?q0(t):t)}function g7(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=p7(e);return s.set([n],0),r==="bytes"?s:Sr(s)}function m7(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(g7({commitment:i,to:r,version:n}));return s}const aT=6,AD=32,qS=4096,ID=AD*qS,cT=ID*aT-1-1*qS*aT;class y7 extends ee{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class w7 extends ee{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function v7(t){const e=typeof t.data=="string"?to(t.data):t.data,n=ln(e);if(!n)throw new w7;if(n>cT)throw new y7({maxSize:cT,size:n});const r=[];let s=!0,i=0;for(;s;){const o=US(new Uint8Array(ID));let a=0;for(;a<qS;){const c=e.slice(i,i+(AD-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Sr(o.bytes))}function b7(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??v7({data:e}),i=t.commitments??xD({blobs:s,kzg:n,to:r}),o=t.proofs??SD({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function E7(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new B9({transaction:t})}const TD=["blobVersionedHashes","chainId","fees","gas","nonce","type"],lT=new Map;async function X0(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=TD,type:u}=e,d=n&&Vn(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await At(t,Xp,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await At(t,Zg,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await At(t,CD,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=xD({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=m7({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=SD({blobs:r,commitments:y,kzg:o}),v=b7({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=E7(h)}catch{let y=lT.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",lT.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await sT(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new J9({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new WS;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await sT(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await At(t,_D,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Qg(h),delete h.parameters,h}async function ND(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Rb=new Y0(128);async function Xg(t,e){var b,v,_,E;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new lu({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Vn(n):null;try{Qg(e);const x=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await uD({authorization:i[0]}).catch(()=>{throw new ee("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let S;r!==null&&(S=await At(t,Zg,"getChainId")({}),hD({currentChainId:S,chain:r}));const T=(_=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:_.format,O=(T||Z0)({...zS(w,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:S,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:x,type:p,value:g}),R=Rb.get(t.uid),F=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:F,params:[O]},{retryCount:0})}catch(q){if(R===!1)throw q;const B=q;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(I=>(Rb.set(t.uid,!0),I)).catch(I=>{const A=I;throw A.name==="MethodNotFoundRpcError"||A.name==="MethodNotSupportedRpcError"?(Rb.set(t.uid,!1),B):A});throw B}}if((y==null?void 0:y.type)==="local"){const S=await At(t,X0,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...TD,"sidecars"],type:p,value:g,...w,to:x}),T=(E=r==null?void 0:r.serializers)==null?void 0:E.transaction,C=await y.signTransaction(S,{serializer:T});return await At(t,ND,"sendRawTransaction")({serializedTransaction:C})}throw(y==null?void 0:y.type)==="smart"?new Yy({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Yy({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(x){throw x instanceof Yy?x:gD(x,{...e,account:y,chain:e.chain||void 0})}}function _7(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=jS({abi:n,args:r,bytecode:s});return Xg(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const N_=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],$Ce=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],C7=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],x7=[...C7,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function S7(t,e={}){typeof e.size<"u"&&Ii(t,{size:e.size});const n=Sr(t,e);return Vo(n,e)}function A7(t,e={}){let n=t;if(typeof e.size<"u"&&(Ii(n,{size:e.size}),n=mh(n)),n.length>1||n[0]>1)throw new pF(n);return!!n[0]}function jo(t,e={}){typeof e.size<"u"&&Ii(t,{size:e.size});const n=Sr(t,e);return Go(n,e)}function I7(t,e={}){let n=t;return typeof e.size<"u"&&(Ii(n,{size:e.size}),n=mh(n,{dir:"right"})),new TextDecoder().decode(n)}function ev(t,e){const n=typeof e=="string"?to(e):e,r=US(n);if(ln(n)===0&&t.length>0)throw new G0;if(ln(e)&&ln(e)<32)throw new z$({data:typeof e=="string"?e:Sr(e),params:t,size:ln(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Sd(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Sd(t,e,{staticPosition:n}){const r=DS(e.type);if(r){const[s,i]=r;return N7(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return R7(t,e,{staticPosition:n});if(e.type==="address")return T7(t);if(e.type==="bool")return P7(t);if(e.type.startsWith("bytes"))return k7(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return O7(t,e);if(e.type==="string")return $7(t,{staticPosition:n});throw new RF(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const uT=32,P_=32;function T7(t){const e=t.readBytes(32);return[Yg(Sr(sD(e,-20))),32]}function N7(t,e,{length:n,staticPosition:r}){if(!n){const o=jo(t.readBytes(P_)),a=r+o,c=a+uT;t.setPosition(a);const l=jo(t.readBytes(uT)),u=eg(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Sd(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(eg(e)){const o=jo(t.readBytes(P_)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Sd(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Sd(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function P7(t){return[A7(t.readBytes(32),{size:32}),32]}function k7(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=jo(t.readBytes(32));t.setPosition(n+o);const a=jo(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Sr(c),32]}return[Sr(t.readBytes(Number.parseInt(s),32)),32]}function O7(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?S7(s,{signed:n}):jo(s,{signed:n}),32]}function R7(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(eg(e)){const o=jo(t.readBytes(P_)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Sd(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Sd(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function $7(t,{staticPosition:e}){const n=jo(t.readBytes(32)),r=e+n;t.setPosition(r);const s=jo(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=I7(mh(i));return t.setPosition(e+32),[o,32]}function eg(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(eg);const n=DS(t.type);return!!(n&&eg({...t,type:n[1]}))}const D7=t=>yh(q0(t));function j7(t){return D7(t)}const U7="1.0.8";let Gs=class k_ extends Error{constructor(e,n={}){var o;const r=n.cause instanceof k_?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof k_&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${U7}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Zo(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const PD=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,kD=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,OD=/^\(.+?\).*?$/,dT=/^tuple(?<array>(\[(\d*)\])*)$/;function O_(t){let e=t.type;if(dT.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=O_(i),s<n-1&&(e+=", ")}const r=Zo(dT,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,O_({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Qh(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=O_(s),r!==n-1&&(e+=", ")}return e}function L7(t){var e;return t.type==="function"?`function ${t.name}(${Qh(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Qh(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Qh(t.inputs)})`:t.type==="error"?`error ${t.name}(${Qh(t.inputs)})`:t.type==="constructor"?`constructor(${Qh(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const RD=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function M7(t){return RD.test(t)}function B7(t){return Zo(RD,t)}const $D=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function F7(t){return $D.test(t)}function z7(t){return Zo($D,t)}const DD=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function W7(t){return DD.test(t)}function q7(t){return Zo(DD,t)}const jD=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function UD(t){return jD.test(t)}function H7(t){return Zo(jD,t)}const LD=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function V7(t){return LD.test(t)}function G7(t){return Zo(LD,t)}const MD=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function K7(t){return MD.test(t)}function Y7(t){return Zo(MD,t)}const J7=/^receive\(\) external payable$/;function Q7(t){return J7.test(t)}const Z7=new Set(["indexed"]),R_=new Set(["calldata","memory","storage"]);class X7 extends Gs{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class ez extends Gs{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class tz extends Gs{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class nz extends Gs{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class rz extends Gs{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class sz extends Gs{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class iz extends Gs{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class vh extends Gs{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class oz extends Gs{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class az extends Gs{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class cz extends Gs{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class lz extends Gs{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function uz(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const $b=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function dz(t,e={}){if(W7(t))return hz(t,e);if(F7(t))return fz(t,e);if(M7(t))return pz(t,e);if(V7(t))return gz(t,e);if(K7(t))return mz(t);if(Q7(t))return{type:"receive",stateMutability:"payable"};throw new oz({signature:t})}function hz(t,e={}){const n=q7(t);if(!n)throw new vh({signature:t,type:"function"});const r=gi(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Hl(r[a],{modifiers:R_,structs:e,type:"function"}));const o=[];if(n.returns){const a=gi(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Hl(a[l],{modifiers:R_,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function fz(t,e={}){const n=z7(t);if(!n)throw new vh({signature:t,type:"event"});const r=gi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Hl(r[o],{modifiers:Z7,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function pz(t,e={}){const n=B7(t);if(!n)throw new vh({signature:t,type:"error"});const r=gi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Hl(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function gz(t,e={}){const n=G7(t);if(!n)throw new vh({signature:t,type:"constructor"});const r=gi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Hl(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function mz(t){const e=Y7(t);if(!e)throw new vh({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const yz=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,wz=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,vz=/^u?int$/;function Hl(t,e){var d,h;const n=uz(t,e==null?void 0:e.type,e==null?void 0:e.structs);if($b.has(n))return $b.get(n);const r=OD.test(t),s=Zo(r?wz:yz,t);if(!s)throw new tz({param:t});if(s.name&&Ez(s.name))throw new nz({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=gi(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Hl(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(vz.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!BD(c))throw new ez({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new rz({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(R_.has(s.modifier)&&!_z(c,!!s.array))throw new sz({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return $b.set(n,u),u}function gi(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?gi(a,[...e,n.trim()]):gi(a,e,`${n}${o}`,r);case"(":return gi(a,e,`${n}${o}`,r+1);case")":return gi(a,e,`${n}${o}`,r-1);default:return gi(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new lz({current:n,depth:r});return e.push(n.trim()),e}function BD(t){return t==="address"||t==="bool"||t==="function"||t==="string"||PD.test(t)||kD.test(t)}const bz=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Ez(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||PD.test(t)||kD.test(t)||bz.test(t)}function _z(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function Cz(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!UD(a))continue;const c=H7(a);if(!c)throw new vh({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Hl(p,{type:"struct"});u.push(g)}if(!u.length)throw new az({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=FD(c,e)}return r}const xz=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function FD(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(OD.test(o.type))r.push(o);else{const c=Zo(xz,o.type);if(!(c!=null&&c.type))throw new iz({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new cz({type:u});r.push({...o,type:`tuple${l??""}`,components:FD(e[u]??[],e,new Set([...n,u]))})}else if(BD(u))r.push(o);else throw new X7({type:u})}}return r}function zD(t){const e=Cz(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];UD(i)||n.push(dz(i,e))}return n}function Sz(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ee("Unable to normalize signature.");return s}const Az=t=>{const e=typeof t=="string"?t:L7(t);return Sz(e)};function WD(t){return j7(Az(t))}const HS=WD,VS=t=>zw(WD(t),0,4);function GS(t){const{abi:e,args:n=[],name:r}=t,s=Ho(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?VS(a)===r:a.type==="event"?HS(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?$_(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=qD(a.inputs,o.inputs,n);if(l)throw new PF({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function $_(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Si(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>$_(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>$_(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function qD(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return qD(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Si(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Si(n[r],{strict:!1}):!1)return o}}const Db="/docs/contract/decodeFunctionResult";function KS(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=GS({abi:e,args:n,name:r});if(!a)throw new Mw(r,{docsPath:Db});i=a}if(i.type!=="function")throw new Mw(void 0,{docsPath:Db});if(!i.outputs)throw new NF(i.name,{docsPath:Db});const o=ev(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const hT="/docs/contract/encodeFunctionData";function Iz(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=GS({abi:e,args:n,name:r});if(!i)throw new Mw(r,{docsPath:hT});s=i}if(s.type!=="function")throw new Mw(void 0,{docsPath:hT});return{abi:[s],functionName:VS(Ic(s))}}function em(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Iz(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?oD(s.inputs,e??[]):void 0;return K0([i,o??"0x"])}function YS({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new b_({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new b_({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const HD={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Tz={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Nz={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Pz(t){const{abi:e,data:n}=t,r=zw(n,0,4);if(r==="0x")throw new G0;const i=[...e||[],Tz,Nz].find(o=>o.type==="error"&&r===VS(Ic(o)));if(!i)throw new W$(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?ev(i.inputs,zw(n,4)):void 0,errorName:i.name}}function VD({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?_r(e[i]):e[i]}`).join(", ")})`}class kz extends ee{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Vn(n):void 0;let g=Jg({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${LS(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${es(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${es(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${es(l)} gwei`,nonce:u});f&&(g+=`
${s7(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class GD extends ee{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=GS({abi:n,args:r,name:o}),l=c?VD({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Ic(c,{includeName:!0}):void 0,d=Jg({address:s&&W9(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class D_ extends ee{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Pz({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=HD[f]}else{const f=u?Ic(u,{includeName:!0}):void 0,p=u&&h?VD({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof W$&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Oz extends ee{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Rz extends ee{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class JS extends ee{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function $z(t,e){var r,s,i,o,a,c;if(!(t instanceof ee))return!1;const n=t.walk(l=>l instanceof D_);return n instanceof D_?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===HD[50]):!1}function Dz(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ho(e)?e:null}function jz(t){return`[${t.slice(2)}]`}function Uz(t){const e=new Uint8Array(32).fill(0);return t?Dz(t)||yh(xd(t)):Sr(e)}function Lz(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(xd(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=xd(s[i]);o.byteLength>255&&(o=xd(jz(Uz(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Mz=3;function Hw(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof JS?t:t instanceof ee?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof G0?new Oz({functionName:i}):[Mz,ql.code].includes(c)&&(l||u||d||h)?new D_({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof BS?u:h??d}):t;return new GD(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const Bz="0.1.1";function Fz(){return Bz}let KD=class j_ extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof j_){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof j_&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Fz()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return YD(this,e)}};function YD(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?YD(t.cause,e):e?null:t}function zz(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Hz({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Ao(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new qz({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Wz(c,r):c}function Wz(t,e){return zz(t,{dir:"left",size:e})}let qz=class extends KD{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Hz=class extends KD{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Vz(t){return{address:t.address,amount:Ao(t.amount),index:Ao(t.index),validatorIndex:Ao(t.validatorIndex)}}function Gz(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Ao(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Ao(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Ao(t.gasLimit)},...typeof t.number=="bigint"&&{number:Ao(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Ao(t.prevRandao)},...typeof t.time=="bigint"&&{time:Ao(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Vz)}}}const Kz="0x82ad56cb",Yz="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Jz="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function Qz(t,{docsPath:e,...n}){const r=(()=>{const s=FS(t,n);return s instanceof Q0?t:s})();return new kz(r,{docsPath:e,...n})}function QS(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const jb=new Map;function JD({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>jb.delete(e),a=()=>c().map(({args:u})=>u),c=()=>jb.get(e)||[],l=u=>jb.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=QS();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function QD(t,e){var q,B,I,A;const{account:n=t.account,authorizationList:r,batch:s=!!((q=t.batch)!=null&&q.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:_,value:E,stateOverride:x,...S}=e,T=n?Vn(n):void 0;if(u&&(h||f))throw new ee("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&_)throw new ee("Cannot provide both `code` & `to` as parameters.");const C=u&&d,O=h&&f&&_&&d,R=C||O,F=C?eW({code:u,data:d}):O?tW({data:d,factory:h,factoryData:f,to:_}):d;try{Qg(e);const P=(typeof i=="bigint"?je(i):void 0)||o,k=l?Gz(l):void 0,U=bD(x),z=(A=(I=(B=t.chain)==null?void 0:B.formatters)==null?void 0:I.transactionRequest)==null?void 0:A.format,Q=(z||Z0)({...zS(S,{format:z}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:F,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:R?void 0:_,value:E});if(s&&Zz({request:Q})&&!U&&!k)try{return await Xz(t,{...Q,blockNumber:i,blockTag:o})}catch(se){if(!(se instanceof dD)&&!(se instanceof b_))throw se}const Y=(()=>{const se=[Q,P];return U&&k?[...se,U,k]:U?[...se,U]:k?[...se,{},k]:se})(),Z=await t.request({method:"eth_call",params:Y});return Z==="0x"?{data:void 0}:{data:Z}}catch(j){const P=nW(j),{offchainLookup:k,offchainLookupSignature:U}=await on(async()=>{const{offchainLookup:z,offchainLookupSignature:G}=await import("./ccip-DIZTHTZQ.js");return{offchainLookup:z,offchainLookupSignature:G}},[]);if(t.ccipRead!==!1&&(P==null?void 0:P.slice(0,10))===U&&_)return{data:await k(t,{data:P,to:_})};throw R&&(P==null?void 0:P.slice(0,10))==="0x101bb98d"?new Rz({factory:h}):Qz(j,{...e,account:T,chain:t.chain})}}function Zz({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Kz)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Xz(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new dD;l=YS({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?je(s):void 0)||i,{schedule:h}=JD({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const y=w.map(_=>({allowFailure:!0,callData:_.data,target:_.to})),b=em({abi:N_,args:[y],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return KS({abi:N_,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new JS({data:f});return f==="0x"?{data:void 0}:{data:f}}function eW(t){const{code:e,data:n}=t;return jS({abi:zD(["constructor(bytes, bytes)"]),bytecode:Yz,args:[e,n]})}function tW(t){const{data:e,factory:n,factoryData:r,to:s}=t;return jS({abi:zD(["constructor(address, bytes, address, bytes)"]),bytecode:Jz,args:[s,e,n,r]})}function nW(t){var n;if(!(t instanceof ee))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function ZS(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=em({abi:n,args:s,functionName:i});try{const{data:c}=await At(t,QD,"call")({...o,data:a,to:r});return KS({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Hw(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function rW(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=YS({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:x7,functionName:"reverse",args:[zl(Lz(c))],blockNumber:n,blockTag:r},u=At(t,ZS,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if($z(l))return null;throw l}}function sW(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function iW(t){const e=sW(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const oW=new Map,aW=new Map;function cW(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,oW),r=e(t,aW);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function lW(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=cW(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const uW=t=>`blockNumber.${t}`;async function dW(t,{cacheTime:e=t.cacheTime}={}){const n=await lW(()=>t.request({method:"eth_blockNumber"}),{cacheKey:uW(t.uid),cacheTime:e});return BigInt(n)}function ZD(t,e){if(!Si(t,{strict:!1}))throw new Nc({address:t});if(!Si(e,{strict:!1}))throw new Nc({address:e});return t.toLowerCase()===e.toLowerCase()}const fT="/docs/contract/decodeEventLog";function hW(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new TF({docsPath:fT});const c=e.find(g=>g.type==="event"&&o===HS(Ic(g)));if(!(c&&"name"in c)||c.type!=="event")throw new q$(o,{docsPath:fT});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new H$({abiItem:c,param:w});h[d?y:w.name||y]=fW({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=ev(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof z$||g instanceof aD?new w_({abiItem:c,data:n,params:p,size:ln(n)}):g}else if(i)throw new w_({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function fW({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(ev([t],e)||[])[0]}function pW(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===HS(u));if(!c)return null;const l=hW({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!gW({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof q$)return null;if(c instanceof w_||c instanceof H$){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function gW(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?ZD(o,a):i.type==="string"||i.type==="bytes"?yh(q0(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function XD(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function mW(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>XD(i));return!("abi"in e)||!e.abi?s:pW({abi:e.abi,logs:s,strict:n})}async function e5(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?je(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,je(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,je(i)]},{dedupe:!!a}),!c)throw new fD({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||wD)(c)}const t5={"0x0":"reverted","0x1":"success"};function yW(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>XD(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Go(t.transactionIndex):null,status:t.status?t5[t.status]:null,type:t.type?yD[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function pT(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new pD({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||yW)(n)}async function wW(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=YS({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:_,args:E,functionName:x}=l[b];try{const S=em({abi:v,args:E,functionName:x});p+=(S.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(S.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:S,target:_}]}catch(S){const T=Hw(S,{abi:v,address:_,args:E,docsPath:"/docs/contract/multicall",functionName:x,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:_}]}}const g=await Promise.allSettled(h.map(b=>At(t,ZS,"readContract")({abi:N_,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let E=0;E<h[b].length;E++)w.push({status:"failure",error:v.reason,result:void 0});continue}const _=v.value;for(let E=0;E<_.length;E++){const{returnData:x,success:S}=_[E],{callData:T}=h[b][E],{abi:C,address:O,functionName:R,args:F}=l[w.length];try{if(T==="0x")throw new G0;if(!S)throw new JS({data:x});const q=KS({abi:C,args:F,data:x,functionName:R});w.push(r?{result:q,status:"success"}:q)}catch(q){const B=Hw(q,{abi:C,address:O,args:F,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw B;w.push({error:B,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new ee("multicall results mismatch");return w}const Hm=new Y0(8192);function vW(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Hm.get(n))return Hm.get(n);const r=t().finally(()=>Hm.delete(n));return Hm.set(n,r),r}async function Vw(t){return new Promise(e=>setTimeout(e,t))}function Gw(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await Vw(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function bW(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new fl(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new fl(new Error("method not supported"),{method:l});const u=s?H0(`${c}.${_r(n)}`):void 0;return vW(()=>Gw(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case Up.code:throw new Up(f);case Lp.code:throw new Lp(f);case Mp.code:throw new Mp(f,{method:n.method});case Bp.code:throw new Bp(f);case ql.code:throw new ql(f);case Fp.code:throw new Fp(f);case zp.code:throw new zp(f);case mc.code:throw new mc(f);case Qd.code:throw new Qd(f);case fl.code:throw new fl(f,{method:n.method});case Zd.code:throw new Zd(f);case Wp.code:throw new Wp(f);case wn.code:throw new wn(f);case qp.code:throw new qp(f);case Hp.code:throw new Hp(f);case Vp.code:throw new Vp(f);case Gp.code:throw new Gp(f);case no.code:throw new no(f);case Xd.code:throw new Xd(f);case Kp.code:throw new Kp(f);case Yp.code:throw new Yp(f);case Jp.code:throw new Jp(f);case Qp.code:throw new Qp(f);case Zp.code:throw new Zp(f);case eh.code:throw new eh(f);case 5e3:throw new wn(f);default:throw h instanceof ee?h:new H9(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Jf){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>EW(h)}),{enabled:s,id:u})}}function EW(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Zd.code||t.code===ql.code:t instanceof Jf&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function _W(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function n5(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function CW(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const gT=CW();function xW(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await n5(async({signal:p})=>{const g={...a,body:Array.isArray(r)?_r(r.map(v=>({jsonrpc:"2.0",id:v.id??gT.take(),...v}))):_r({jsonrpc:"2.0",id:r.id??gT.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new rT({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new Jf({body:r,details:_r(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof Jf||h instanceof rT?h:new Jf({body:r,cause:h,url:t})}}}}class SW extends ee{constructor({domain:e}){super(`Invalid domain "${_r(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class AW extends ee{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class IW extends ee{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function TW(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return _r({domain:o,message:a,primaryType:r,types:s})}function NW(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(iD);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;je(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!Si(d))throw new Nc({address:d});const f=u.match(p9);if(f){const[g,w]=f;if(w&&ln(d)!==Number.parseInt(w))throw new kF({expectedSize:Number.parseInt(w),givenSize:ln(d)})}const p=s[u];p&&(kW(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new SW({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new AW({primaryType:r,types:s})}function PW({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function kW(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new IW({type:t})}class OW extends ee{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function RW(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new OW({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const Ub=new Map,mT=new Map;let $W=0;function tg(t,e,n){const r=++$W,s=()=>Ub.get(t)||[],i=()=>{const u=s();Ub.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=mT.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(Ub.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&mT.set(t,l),o}function XS(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Vw(c);const l=async()=>{s&&(await t({unpoll:i}),await Vw(r),l())};l()})(),i}function DW(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=_r(["watchBlockNumber",t.uid,e,n,o]);return tg(d,{onBlockNumber:r,onError:s},h=>XS(async()=>{var f;try{const p=await At(t,dW,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=_r(["watchBlockNumber",t.uid,e,n]);return tg(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var v;if(!f)return;const b=Vo((v=y.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function jW(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function UW(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=_r(["watchPendingTransactions",t.uid,e,i]);return tg(l,{onTransactions:r,onError:n},u=>{let d;const h=XS(async()=>{var f;try{if(!d)try{d=await At(t,iW,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await At(t,mW,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await At(t,jW,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function LW(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Yg(r))}async function MW(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function BW(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Vn(n):void 0,i=r?[s==null?void 0:s.address,[je(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const r5="0x5792579257925792579257925792579257925792579257925792579257925792",s5=je(0,{size:32});async function FW(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Vn(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?em({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Tc([p,f.dataSuffix]):p,to:f.to,value:f.value?je(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:je(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Xd(new ee(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new eh(new ee(y,{details:y}))}const p=[];for(const y of d){const b=Xg(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Vo(y.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:s5);return{id:Tc([...w,je(s.id,{size:32}),r5])}}throw gD(h,{...e,account:u,chain:e.chain})}}async function i5(t,e){async function n(u){if(u.endsWith(r5.slice(2))){const h=mh(v_(u,-64,-32)),f=v_(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>s5.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:Go(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Go(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Vo(u.blockNumber),gasUsed:Vo(u.gasUsed),status:t5[u.status]})))??[],statusCode:l,status:c,version:o}}async function zW(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function WW(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=_r(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=QS();let u;const d=tg(o,{resolve:c,reject:l},h=>{const f=XS(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await i5(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new qW({id:n}))},i):void 0,await a}class qW extends ee{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function HW(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=_r(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=QS(),b=a?setTimeout(()=>{p(),f(),y(new z9({hash:n}))},a):void 0;return f=tg(c,{onReplaced:r,resolve:w,reject:y},v=>{p=At(t,DW,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(_){const E=S=>{clearTimeout(b),p(),S(),f()};let x=_;if(!h)try{if(d){if(e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;E(()=>v.resolve(d));return}if(l||(h=!0,await Gw(async()=>{l=await At(t,e5,"getTransaction")({hash:n}),l.blockNumber&&(x=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await At(t,pT,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;E(()=>v.resolve(d))}catch(S){if(S instanceof fD||S instanceof pD){if(!l){h=!1;return}try{u=l,h=!0;const T=await Gw(()=>At(t,Xp,"getBlock")({blockNumber:x,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof mD});h=!1;const C=T.transactions.find(({from:R,nonce:F})=>R===u.from&&F===u.nonce);if(!C||(d=await At(t,pT,"getTransactionReceipt")({hash:C.hash}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e)))return;let O="replaced";C.to===u.to&&C.value===u.value&&C.input===u.input?O="repriced":C.from===C.to&&C.value===0n&&(O="cancelled"),E(()=>{var R;(R=v.onReplaced)==null||R.call(v,{reason:O,replacedTransaction:u,transaction:C,transactionReceipt:d}),v.resolve(d)})}catch(T){E(()=>v.reject(T))}}else E(()=>v.reject(S))}}})}),g}async function VW(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>tc(n))}async function GW(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function o5(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new lu({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Vn(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Vn(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await At(t,Zg,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await At(t,CD,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&ZD(o.address,i.address))&&(a.nonce+=1)),a}async function KW(t,e){const{account:n=t.account}=e;if(!n)throw new lu({docsPath:"/docs/eip7702/signAuthorization"});const r=Vn(n);if(!r.signAuthorization)throw new Yy({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await o5(t,e);return r.signAuthorization(s)}async function YW(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new lu({docsPath:"/docs/actions/wallet/signTransaction"});const i=Vn(n);Qg({account:i,...e});const o=await At(t,Zg,"getChainId")({});r!==null&&hD({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Z0;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:je(o),from:i.address}]},{retryCount:0})}async function a5(t,{account:e=t.account,message:n}){if(!e)throw new lu({docsPath:"/docs/actions/wallet/signMessage"});const r=Vn(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?H0(n):n.raw instanceof Uint8Array?zl(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function JW(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new lu({docsPath:"/docs/actions/wallet/signTypedData"});const o=Vn(n),a={EIP712Domain:PW({domain:r}),...e.types};if(NW({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=TW({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function QW(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:je(e)}]},{retryCount:0})}async function ZW(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function c5(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new lu({docsPath:"/docs/contract/writeContract"});const l=r?Vn(r):null,u=em({abi:n,args:i,functionName:a});try{return await At(t,Xg,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Hw(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function ws(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const Jy="2.17.3",XW=()=>`@wagmi/core@${Jy}`;var l5=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Kw,u5;let Xo=class U_ extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return XW()}constructor(e,n={}){var i;super(),Kw.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof U_?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof U_&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return l5(this,Kw,"m",u5).call(this,this,e)}};Kw=new WeakSet,u5=function t(e,n){return n!=null&&n(e)?e:e.cause?l5(this,Kw,"m",t).call(this,e.cause,n):e};class ng extends Xo{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class eq extends Xo{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class tq extends Xo{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class nq extends Xo{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class rq extends Xo{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class sq extends Xo{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Qy(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new eq;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const L_=256;let Vm=L_,Gm;function d5(t=11){if(!Gm||Vm+t>L_*2){Gm="",Vm=0;for(let e=0;e<L_;e++)Gm+=(256+Math.random()*256|0).toString(16).substring(1)}return Gm.substring(Vm,Vm+++t)}function h5(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Vn(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:d5()};function y(b){return v=>{const _=v(b);for(const x in w)delete _[x];const E={...b,..._};return Object.assign(E,{extend:y(E)})}}return Object.assign(w,{extend:y(w)})}function eA({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=d5();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:bW(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function iq(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>eA({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function yT(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=oq,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=eA({key:n,name:r,async request({method:g,params:w}){let y;const b=async(v=0)=>{const _=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const E=await _.request({method:g,params:w});return f({method:g,params:w,response:E,transport:_,status:"success"}),E}catch(E){if(f({error:E,method:g,params:w,transport:_,status:"error"}),i(E)||v===h.length-1||(y??(y=h.slice(v+1).some(x=>{const{include:S,exclude:T}=x({chain:c}).config.methods||{};return S?S.includes(g):T?!T.includes(g):!0})),!y))throw E;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};aq({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function oq(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Qd.code||t.code===wn.code||hl.nodeMessage.test(t.message)||t.code===5e3))}function aq({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-y,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(x=>x[w].latency),v=1-y.reduce((x,S)=>x+S,0)/y.length/f,_=u.map(x=>x[w].success),E=_.reduce((x,S)=>x+S,0)/_.length;return E===0?[0,w]:[l*v+c*E,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await Vw(e),d()};d()}class cq extends ee{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Km(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new cq;const v=xW(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return eA({key:s,methods:i,name:o,async request({method:_,params:E}){const x={method:_,params:E},{schedule:S}=JD({id:b,wait:g,shouldSplitBatch(R){return R.length>p},fn:R=>v.request({body:R}),sort:(R,F)=>R.id-F.id}),T=async R=>n?S(R):[await v.request({body:R})],[{error:C,result:O}]=await T(x);if(u)return{error:C,result:O};if(C)throw new BS({body:x,error:C,url:b});return O},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function lq(t){return{addChain:e=>_F(t,e),deployContract:e=>_7(t,e),getAddresses:()=>LW(t),getCallsStatus:e=>i5(t,e),getCapabilities:e=>BW(t,e),getChainId:()=>Zg(t),getPermissions:()=>MW(t),prepareAuthorization:e=>o5(t,e),prepareTransactionRequest:e=>X0(t,e),requestAddresses:()=>VW(t),requestPermissions:e=>GW(t,e),sendCalls:e=>FW(t,e),sendRawTransaction:e=>ND(t,e),sendTransaction:e=>Xg(t,e),showCallsStatus:e=>zW(t,e),signAuthorization:e=>KW(t,e),signMessage:e=>a5(t,e),signTransaction:e=>YW(t,e),signTypedData:e=>JW(t,e),switchChain:e=>QW(t,e),waitForCallsStatus:e=>WW(t,e),watchAsset:e=>ZW(t,e),writeContract:e=>c5(t,e)}}async function tm(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new sq({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new tq;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new rq({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Vn(e.account??n.accounts[0]);if(o&&(o.address=tc(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new nq({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return h5({account:o,chain:a,name:"Connector Client",transport:l=>iq(c)({...l,retryCount:0})})}async function f5(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function uq(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await tm(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return ws(o,_D,"estimateGas")({...s,account:i})}function p5(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(L9[t])}function Ad(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function dq(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return ws(o,wW,"multicall")({allowFailure:n,contracts:s,...i})}function hq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ws(s,ZS,"readContract")(r)}async function fq(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>dq(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof GD)throw c;const l=()=>o.map(u=>hq(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function pq(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await wT(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await wT(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=B$(mh(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await ws(c,ED,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:wh(u,p5(a)),symbol:d.nativeCurrency.symbol,value:u}}async function wT(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await fq(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=wh(c??"0",p5(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function vT(t){return t.state.chainId}function Vl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Vl(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Vl(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Ym=[];function Bi(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Vl(Ym,e)?Ym:(Ym=e,e)}let Lb=[];function bT(t){const e=t.connectors;return Vl(Lb,e)?Lb:(Lb=e,e)}function gq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ws(s,rW,"getEnsName")(r)}async function mq(t,e={}){return(await tm(t,e)).extend(lq)}async function yq(t,e){const{account:n,chainId:r,...s}=e,i=n??Ad(t).address,o=t.getClient({chainId:r});return ws(o,X0,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Mb=!1;async function M_(t,e={}){var l,u;if(Mb)return[];Mb=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Mb=!1,a}async function wq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await tm(t,{account:n??void 0,chainId:r,connector:s}),await ws(o,Xg,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function vq(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await tm(t,{account:n,connector:r}),ws(i,a5,"signMessage")({...s,...n?{account:n}:{}})}class Pa extends Xo{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class bq extends Xo{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function ET(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new bq({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new ng;return t.setState(a=>({...a,chainId:r})),i}function g5(t,e){const{onChange:n}=e;return t.subscribe(()=>Ad(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Vl(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Eq(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function _q(t,e){const{onChange:n}=e;return t.subscribe(()=>Bi(t),n,{equalityFn:Vl})}function m5(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Cq(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=ws(l,UW,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function xq(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await ws(i,HW,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await ws(i,e5,"getTransaction")({hash:a.transactionHash}),d=await ws(i,QD,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?B$(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function Sq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await tm(t,{account:n??void 0,chainId:r,connector:s}),await ws(o,c5,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function UCe(t){return t}tv.type="injected";function tv(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Aq[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:tv.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new Pa;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(_=>tc(_)),h.length>0&&(h=await this.getAccounts())}catch(v){const _=v;if(_.code===wn.code)throw new wn(_);if(_.code===mc.code)throw _}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(E=>tc(E))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const _=await this.switchChain({chainId:l}).catch(E=>{if(E.code===wn.code)throw E;return{id:v}});v=(_==null?void 0:_.id)??v}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const _=v;throw _.code===wn.code?new wn(_):_.code===mc.code?new mc(_):_}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Pa;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await n5(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Pa;return(await l.request({method:"eth_accounts"})).map(d=>tc(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Pa;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=Zy(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new Pa}return!!(await Gw(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new Pa;const h=c.chains.find(b=>b.id===u);if(!h)throw new no(new ng);const f=new Promise(b=>{const v=_=>{"chainId"in _&&_.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:je(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:_,...E}=h.blockExplorers??{};let x;l!=null&&l.blockExplorerUrls?x=l.blockExplorerUrls:_&&(x=[_.url,...Object.values(E).map(C=>C.url)]);let S;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?S=l.rpcUrls:S=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const T={blockExplorerUrls:x,chainId:je(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:S};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new wn(new Error("User rejected switch after adding network."))}),f]),h}catch(_){throw new wn(_)}throw v.code===wn.code?new wn(v):new no(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>tc(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Aq={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Zy(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Zy(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Zy(t,"isPhantom")}}};function Zy(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Iq(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Tq(){const t=new Set;let e=[];const n=()=>Iq(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Nq=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Pq=Nq;function kq(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const B_=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return B_(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return B_(r)(n)}}}},Oq=(t,e)=>(n,r,s)=>{let i={storage:kq(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return B_(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[_,E]=b;if(f=i.merge(E,(v=r())!=null?v:h),n(f,!0),_)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Rq=Oq,_T=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},Bb=t=>t?_T(t):_T;var y5={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var _=w.length,E;for(v=0;v<_;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),y){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(y5);var $q=y5.exports;const Dq=ou($q);class jq{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Dq})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Uq(t){return new jq(t)}function Lq(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function CT(t,e){return t.slice(0,e).join(".")||"."}function xT(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Mq(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=xT(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=xT(s,c);if(u!==0)return r?e.call(this,a,c,CT(i,u)):`[ref=${CT(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Bq(t,e,n,r){return JSON.stringify(t,Mq((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Fq(t){const{deserialize:e=Lq,key:n="wagmi",serialize:r=Bq,storage:s=w5}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const w5={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function zq(){const t=typeof window<"u"&&window.localStorage?window.localStorage:w5;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const F_=256;let Jm=F_,Qm;function Wq(t=11){if(!Qm||Jm+t>F_*2){Qm="",Jm=0;for(let e=0;e<F_;e++)Qm+=(256+Math.random()*256|0).toString(16).substring(1)}return Qm.substring(Jm,Jm+++t)}function qq(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Fq({storage:zq()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Tq():void 0,a=Bb(()=>i.chains),c=Bb(()=>{const E=[],x=new Set;for(const S of i.connectors??[]){const T=l(S);if(E.push(T),!s&&T.rdns){const C=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const O of C)x.add(O)}}if(!s&&o){const S=o.getProviders();for(const T of S)x.has(T.info.rdns)||E.push(l(u(T)))}return E});function l(E){var T;const x=Uq(Wq()),S={...E({emitter:x,chains:a.getState(),storage:n,transports:i.transports}),emitter:x,uid:x.uid};return x.on("connect",v),(T=S.setup)==null||T.call(S),S}function u(E){const{info:x}=E,S=E.provider;return tv({target:{...x,id:x.rdns,provider:S}})}const d=new Map;function h(E={}){const x=E.chainId??w.getState().chainId,S=a.getState().find(C=>C.id===x);if(E.chainId&&!S)throw new ng;{const C=d.get(w.getState().chainId);if(C&&!S)return C;if(!S)throw new ng}{const C=d.get(x);if(C)return C}let T;if(i.client)T=i.client({chain:S});else{const C=S.id,O=a.getState().map(q=>q.id),R={},F=Object.entries(i);for(const[q,B]of F)if(!(q==="chains"||q==="client"||q==="connectors"||q==="transports"))if(typeof B=="object")if(C in B)R[q]=B[C];else{if(O.some(A=>A in B))continue;R[q]=B}else R[q]=B;T=h5({...R,chain:S,batch:R.batch??{multicall:!0},transport:q=>i.transports[C]({...q,connectors:c})})}return d.set(x,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";Jy.startsWith(g)?p=Number.parseInt(Jy.replace(g,"")):p=Number.parseInt(Jy.split(".")[0]??"0");const w=Bb(Pq(n?Rq(f,{migrate(E,x){if(x===p)return E;const S=f(),T=y(E,S.chainId);return{...S,chainId:T}},name:"store",partialize(E){return{connections:{__type:"Map",value:Array.from(E.connections.entries()).map(([x,S])=>{const{id:T,name:C,type:O,uid:R}=S.connector;return[x,{...S,connector:{id:T,name:C,type:O,uid:R}}]})},chainId:E.chainId,current:E.current}},merge(E,x){typeof E=="object"&&E&&"status"in E&&delete E.status;const S=y(E,x.chainId);return{...x,...E,chainId:S}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(E,x){return E&&typeof E=="object"&&"chainId"in E&&typeof E.chainId=="number"&&a.getState().some(S=>S.id===E.chainId)?E.chainId:x}r&&w.subscribe(({connections:E,current:x})=>{var S;return x?(S=E.get(x))==null?void 0:S.chainId:void 0},E=>{if(a.getState().some(S=>S.id===E))return w.setState(S=>({...S,chainId:E??S.chainId}))}),o==null||o.subscribe(E=>{const x=new Set,S=new Set;for(const C of c.getState())if(x.add(C.id),C.rdns){const O=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const R of O)S.add(R)}const T=[];for(const C of E){if(S.has(C.info.rdns))continue;const O=l(u(C));x.has(O.id)||T.push(O)}n&&!w.persist.hasHydrated()||c.setState(C=>[...C,...T],!0)});function b(E){w.setState(x=>{const S=x.connections.get(E.uid);return S?{...x,connections:new Map(x.connections).set(E.uid,{accounts:E.accounts??S.accounts,chainId:E.chainId??S.chainId,connector:S.connector})}:x})}function v(E){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(x=>{const S=c.getState().find(T=>T.uid===E.uid);return S?(S.emitter.listenerCount("connect")&&S.emitter.off("connect",b),S.emitter.listenerCount("change")||S.emitter.on("change",b),S.emitter.listenerCount("disconnect")||S.emitter.on("disconnect",_),{...x,connections:new Map(x.connections).set(E.uid,{accounts:E.accounts,chainId:E.chainId,connector:S}),current:E.uid,status:"connected"}):x})}function _(E){w.setState(x=>{const S=x.connections.get(E.uid);if(S){const C=S.connector;C.emitter.listenerCount("change")&&S.connector.emitter.off("change",b),C.emitter.listenerCount("disconnect")&&S.connector.emitter.off("disconnect",_),C.emitter.listenerCount("connect")||S.connector.emitter.on("connect",v)}if(x.connections.delete(E.uid),x.connections.size===0)return{...x,connections:new Map,current:null,status:"disconnected"};const T=x.connections.values().next().value;return{...x,connections:new Map(x.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(E){let x;typeof E=="function"?x=E(w.getState()):x=E;const S=f();typeof x!="object"&&(x=S),Object.keys(S).some(C=>!(C in x))&&(x=S),w.setState(x,!0)},subscribe(E,x,S){return w.subscribe(E,x,S?{...S,fireImmediately:S.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(E){const x=typeof E=="function"?E(a.getState()):E;if(x.length!==0)return a.setState(x,!0)},subscribe(E){return a.subscribe(E)}},connectors:{providerDetailToConnector:u,setup:l,setState(E){return c.setState(typeof E=="function"?E(c.getState()):E,!0)},subscribe(E){return c.subscribe(E)}},events:{change:b,connect:v,disconnect:_}}}}function Hq(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?M_(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Vq(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Hq(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const v5=D.createContext(void 0);function Gq(t){const{children:e,config:n}=t,r={value:n};return D.createElement(Vq,t,D.createElement(v5.Provider,r,e))}const Kq="2.15.6",Yq=()=>`wagmi@${Kq}`;let Jq=class extends Xo{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Yq()}};class Qq extends Jq{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Bc(t={}){const e=t.config??D.useContext(v5);if(!e)throw new Qq;return e}var b5={exports:{}},E5={},_5={exports:{}},C5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var th=D;function Zq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xq=typeof Object.is=="function"?Object.is:Zq,eH=th.useState,tH=th.useEffect,nH=th.useLayoutEffect,rH=th.useDebugValue;function sH(t,e){var n=e(),r=eH({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return nH(function(){s.value=n,s.getSnapshot=e,Fb(s)&&i({inst:s})},[t,n,e]),tH(function(){return Fb(s)&&i({inst:s}),t(function(){Fb(s)&&i({inst:s})})},[t]),rH(n),n}function Fb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xq(t,n)}catch{return!0}}function iH(t,e){return e()}var oH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?iH:sH;C5.useSyncExternalStore=th.useSyncExternalStore!==void 0?th.useSyncExternalStore:oH;_5.exports=C5;var aH=_5.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv=D,cH=aH;function lH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uH=typeof Object.is=="function"?Object.is:lH,dH=cH.useSyncExternalStore,hH=nv.useRef,fH=nv.useEffect,pH=nv.useMemo,gH=nv.useDebugValue;E5.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=hH(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=pH(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,uH(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=dH(t,i[0],i[1]);return fH(function(){o.hasValue=!0,o.value=a},[a]),gH(a),a};b5.exports=E5;var mH=b5.exports;const zb=t=>typeof t=="object"&&!Array.isArray(t);function yH(t,e,n=e,r=Vl){const s=D.useRef([]),i=mH.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(zb(o)&&zb(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(zb(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function nm(t={}){const e=Bc(t);return yH(n=>g5(e,{onChange:n}),()=>Ad(e))}var bh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Gl=typeof window>"u"||"Deno"in globalThis;function vr(){}function wH(t,e){return typeof t=="function"?t(e):t}function z_(t){return typeof t=="number"&&t>=0&&t!==1/0}function x5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function yc(t,e){return typeof t=="function"?t(e):t}function fi(t,e){return typeof t=="function"?t(e):t}function ST(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==tA(o,e.options))return!1}else if(!rg(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function AT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Kl(e.options.mutationKey)!==Kl(i))return!1}else if(!rg(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function tA(t,e){return((e==null?void 0:e.queryKeyHashFn)||Kl)(t)}function Kl(t){return JSON.stringify(t,(e,n)=>W_(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function rg(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>rg(t[n],e[n])):!1}function S5(t,e){if(t===e)return t;const n=IT(t)&&IT(e);if(n||W_(t)&&W_(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=S5(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function Yw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function IT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function W_(t){if(!TT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!TT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function TT(t){return Object.prototype.toString.call(t)==="[object Object]"}function vH(t){return new Promise(e=>{setTimeout(e,t)})}function q_(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?S5(t,e):e}function bH(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function EH(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var nA=Symbol();function A5(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===nA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function I5(t,e){return typeof t=="function"?t(...e):!!t}var El,Wa,Od,hR,_H=(hR=class extends bh{constructor(){super();Ae(this,El);Ae(this,Wa);Ae(this,Od);ge(this,Od,e=>{if(!Gl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){M(this,Wa)||this.setEventListener(M(this,Od))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,Wa))==null||e.call(this),ge(this,Wa,void 0))}setEventListener(e){var n;ge(this,Od,e),(n=M(this,Wa))==null||n.call(this),ge(this,Wa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){M(this,El)!==e&&(ge(this,El,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof M(this,El)=="boolean"?M(this,El):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},El=new WeakMap,Wa=new WeakMap,Od=new WeakMap,hR),rA=new _H,Rd,qa,$d,fR,CH=(fR=class extends bh{constructor(){super();Ae(this,Rd,!0);Ae(this,qa);Ae(this,$d);ge(this,$d,e=>{if(!Gl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){M(this,qa)||this.setEventListener(M(this,$d))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,qa))==null||e.call(this),ge(this,qa,void 0))}setEventListener(e){var n;ge(this,$d,e),(n=M(this,qa))==null||n.call(this),ge(this,qa,e(this.setOnline.bind(this)))}setOnline(e){M(this,Rd)!==e&&(ge(this,Rd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return M(this,Rd)}},Rd=new WeakMap,qa=new WeakMap,$d=new WeakMap,fR),Jw=new CH;function H_(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function xH(t){return Math.min(1e3*2**t,3e4)}function T5(t){return(t??"online")==="online"?Jw.isOnline():!0}var N5=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Wb(t){return t instanceof N5}function P5(t){let e=!1,n=0,r=!1,s;const i=H_(),o=g=>{var w;r||(h(new N5(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>rA.isFocused()&&(t.networkMode==="always"||Jw.isOnline())&&t.canRun(),u=()=>T5(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var x;if(r)return;const b=t.retry??(Gl?0:3),v=t.retryDelay??xH,_=typeof v=="function"?v(n,y):v,E=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!E){h(y);return}n++,(x=t.onFail)==null||x.call(t,n,y),vH(_).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var SH=t=>setTimeout(t,0);function AH(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=SH;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var En=AH(),_l,pR,k5=(pR=class{constructor(){Ae(this,_l)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),z_(this.gcTime)&&ge(this,_l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Gl?1/0:5*60*1e3))}clearGcTimeout(){M(this,_l)&&(clearTimeout(M(this,_l)),ge(this,_l,void 0))}},_l=new WeakMap,pR),Dd,Cl,Ds,xl,lr,Mg,Sl,ci,vo,gR,IH=(gR=class extends k5{constructor(e){super();Ae(this,ci);Ae(this,Dd);Ae(this,Cl);Ae(this,Ds);Ae(this,xl);Ae(this,lr);Ae(this,Mg);Ae(this,Sl);ge(this,Sl,!1),ge(this,Mg,e.defaultOptions),this.setOptions(e.options),this.observers=[],ge(this,xl,e.client),ge(this,Ds,M(this,xl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ge(this,Dd,TH(this.options)),this.state=e.state??M(this,Dd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=M(this,lr))==null?void 0:e.promise}setOptions(e){this.options={...M(this,Mg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,Ds).remove(this)}setData(e,n){const r=q_(this.state.data,e,this.options);return He(this,ci,vo).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){He(this,ci,vo).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=M(this,lr))==null?void 0:r.promise;return(s=M(this,lr))==null||s.cancel(e),n?n.then(vr).catch(vr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Dd))}isActive(){return this.observers.some(e=>fi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===nA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>yc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!x5(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=M(this,lr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=M(this,lr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),M(this,Ds).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(M(this,lr)&&(M(this,Sl)?M(this,lr).cancel({revert:!0}):M(this,lr).cancelRetry()),this.scheduleGc()),M(this,Ds).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||He(this,ci,vo).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(M(this,lr))return M(this,lr).continueRetry(),M(this,lr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ge(this,Sl,!0),r.signal)})},i=()=>{const h=A5(this.options,n),p=(()=>{const g={client:M(this,xl),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return ge(this,Sl,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:M(this,xl),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),ge(this,Cl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&He(this,ci,vo).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;Wb(h)&&h.silent||He(this,ci,vo).call(this,{type:"error",error:h}),Wb(h)||((p=(f=M(this,Ds).config).onError)==null||p.call(f,h,this),(w=(g=M(this,Ds).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return ge(this,lr,P5({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=M(this,Ds).config).onSuccess)==null||p.call(f,h,this),(w=(g=M(this,Ds).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{He(this,ci,vo).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{He(this,ci,vo).call(this,{type:"pause"})},onContinue:()=>{He(this,ci,vo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),M(this,lr).start()}},Dd=new WeakMap,Cl=new WeakMap,Ds=new WeakMap,xl=new WeakMap,lr=new WeakMap,Mg=new WeakMap,Sl=new WeakMap,ci=new WeakSet,vo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...O5(r.data,this.options),fetchMeta:e.meta??null};case"success":return ge(this,Cl,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Wb(s)&&s.revert&&M(this,Cl)?{...M(this,Cl),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),En.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),M(this,Ds).notify({query:this,type:"updated",action:e})})},gR);function O5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:T5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function TH(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fi,mR,NH=(mR=class extends bh{constructor(e={}){super();Ae(this,Fi);this.config=e,ge(this,Fi,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??tA(s,n);let o=this.get(i);return o||(o=new IH({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){M(this,Fi).has(e.queryHash)||(M(this,Fi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=M(this,Fi).get(e.queryHash);n&&(e.destroy(),n===e&&M(this,Fi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){En.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,Fi).get(e)}getAll(){return[...M(this,Fi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ST(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>ST(e,r)):n}notify(e){En.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){En.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){En.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fi=new WeakMap,mR),zi,mr,Al,Wi,xa,yR,PH=(yR=class extends k5{constructor(e){super();Ae(this,Wi);Ae(this,zi);Ae(this,mr);Ae(this,Al);this.mutationId=e.mutationId,ge(this,mr,e.mutationCache),ge(this,zi,[]),this.state=e.state||R5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){M(this,zi).includes(e)||(M(this,zi).push(e),this.clearGcTimeout(),M(this,mr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ge(this,zi,M(this,zi).filter(n=>n!==e)),this.scheduleGc(),M(this,mr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){M(this,zi).length||(this.state.status==="pending"?this.scheduleGc():M(this,mr).remove(this))}continue(){var e;return((e=M(this,Al))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,v,_,E,x,S,T;const n=()=>{He(this,Wi,xa).call(this,{type:"continue"})};ge(this,Al,P5({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{He(this,Wi,xa).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{He(this,Wi,xa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,mr).canRun(this)}));const r=this.state.status==="pending",s=!M(this,Al).canStart();try{if(r)n();else{He(this,Wi,xa).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=M(this,mr).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&He(this,Wi,xa).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await M(this,Al).start();return await((u=(l=M(this,mr).config).onSuccess)==null?void 0:u.call(l,C,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,C,e,this.state.context)),await((p=(f=M(this,mr).config).onSettled)==null?void 0:p.call(f,C,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,C,null,e,this.state.context)),He(this,Wi,xa).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(y=M(this,mr).config).onError)==null?void 0:b.call(y,C,e,this.state.context,this)),await((_=(v=this.options).onError)==null?void 0:_.call(v,C,e,this.state.context)),await((x=(E=M(this,mr).config).onSettled)==null?void 0:x.call(E,void 0,C,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,C,e,this.state.context)),C}finally{He(this,Wi,xa).call(this,{type:"error",error:C})}}finally{M(this,mr).runNext(this)}}},zi=new WeakMap,mr=new WeakMap,Al=new WeakMap,Wi=new WeakSet,xa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),En.batch(()=>{M(this,zi).forEach(r=>{r.onMutationUpdate(e)}),M(this,mr).notify({mutation:this,type:"updated",action:e})})},yR);function R5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var To,li,Bg,wR,kH=(wR=class extends bh{constructor(e={}){super();Ae(this,To);Ae(this,li);Ae(this,Bg);this.config=e,ge(this,To,new Set),ge(this,li,new Map),ge(this,Bg,0)}build(e,n,r){const s=new PH({mutationCache:this,mutationId:++Am(this,Bg)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){M(this,To).add(e);const n=Zm(e);if(typeof n=="string"){const r=M(this,li).get(n);r?r.push(e):M(this,li).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(M(this,To).delete(e)){const n=Zm(e);if(typeof n=="string"){const r=M(this,li).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&M(this,li).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Zm(e);if(typeof n=="string"){const r=M(this,li).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Zm(e);if(typeof n=="string"){const s=(r=M(this,li).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){En.batch(()=>{M(this,To).forEach(e=>{this.notify({type:"removed",mutation:e})}),M(this,To).clear(),M(this,li).clear()})}getAll(){return Array.from(M(this,To))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>AT(n,r))}findAll(e={}){return this.getAll().filter(n=>AT(e,n))}notify(e){En.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return En.batch(()=>Promise.all(e.map(n=>n.continue().catch(vr))))}},To=new WeakMap,li=new WeakMap,Bg=new WeakMap,wR);function Zm(t){var e;return(e=t.options.scope)==null?void 0:e.id}function NT(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=A5(e.options,e.fetchOptions),b=async(v,_,E)=>{if(g)return Promise.reject();if(_==null&&v.pages.length)return Promise.resolve(v);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:_,direction:E?"backward":"forward",meta:e.options.meta};return w(R),R})(),T=await y(S),{maxPages:C}=e.options,O=E?EH:bH;return{pages:O(v.pages,T,C),pageParams:O(v.pageParams,_,C)}};if(s&&i.length){const v=s==="backward",_=v?OH:PT,E={pages:i,pageParams:o},x=_(r,E);a=await b(E,x,v)}else{const v=t??i.length;do{const _=c===0?o[0]??r.initialPageParam:PT(r,a);if(c>0&&_==null)break;a=await b(a,_),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function PT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function OH(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var tn,Ha,Va,jd,Ud,Ga,Ld,Md,vR,RH=(vR=class{constructor(t={}){Ae(this,tn);Ae(this,Ha);Ae(this,Va);Ae(this,jd);Ae(this,Ud);Ae(this,Ga);Ae(this,Ld);Ae(this,Md);ge(this,tn,t.queryCache||new NH),ge(this,Ha,t.mutationCache||new kH),ge(this,Va,t.defaultOptions||{}),ge(this,jd,new Map),ge(this,Ud,new Map),ge(this,Ga,0)}mount(){Am(this,Ga)._++,M(this,Ga)===1&&(ge(this,Ld,rA.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,tn).onFocus())})),ge(this,Md,Jw.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,tn).onOnline())})))}unmount(){var t,e;Am(this,Ga)._--,M(this,Ga)===0&&((t=M(this,Ld))==null||t.call(this),ge(this,Ld,void 0),(e=M(this,Md))==null||e.call(this),ge(this,Md,void 0))}isFetching(t){return M(this,tn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return M(this,Ha).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,tn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=M(this,tn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(yc(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return M(this,tn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=M(this,tn).get(r.queryHash),i=s==null?void 0:s.state.data,o=wH(e,i);if(o!==void 0)return M(this,tn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return En.batch(()=>M(this,tn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,tn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=M(this,tn);En.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=M(this,tn);return En.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=En.batch(()=>M(this,tn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(vr).catch(vr)}invalidateQueries(t,e={}){return En.batch(()=>(M(this,tn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=En.batch(()=>M(this,tn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(vr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(vr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=M(this,tn).build(this,e);return n.isStaleByTime(yc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(vr).catch(vr)}fetchInfiniteQuery(t){return t.behavior=NT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(vr).catch(vr)}ensureInfiniteQueryData(t){return t.behavior=NT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Jw.isOnline()?M(this,Ha).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,tn)}getMutationCache(){return M(this,Ha)}getDefaultOptions(){return M(this,Va)}setDefaultOptions(t){ge(this,Va,t)}setQueryDefaults(t,e){M(this,jd).set(Kl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...M(this,jd).values()],n={};return e.forEach(r=>{rg(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){M(this,Ud).set(Kl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...M(this,Ud).values()],n={};return e.forEach(r=>{rg(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...M(this,Va).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=tA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===nA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...M(this,Va).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){M(this,tn).clear(),M(this,Ha).clear()}},tn=new WeakMap,Ha=new WeakMap,Va=new WeakMap,jd=new WeakMap,Ud=new WeakMap,Ga=new WeakMap,Ld=new WeakMap,Md=new WeakMap,vR),Fr,Xe,Fg,yr,Il,Bd,Ka,Ya,zg,Fd,zd,Tl,Nl,Ja,Wd,mt,Tf,V_,G_,K_,Y_,J_,Q_,Z_,$5,bR,$H=(bR=class extends bh{constructor(e,n){super();Ae(this,mt);Ae(this,Fr);Ae(this,Xe);Ae(this,Fg);Ae(this,yr);Ae(this,Il);Ae(this,Bd);Ae(this,Ka);Ae(this,Ya);Ae(this,zg);Ae(this,Fd);Ae(this,zd);Ae(this,Tl);Ae(this,Nl);Ae(this,Ja);Ae(this,Wd,new Set);this.options=n,ge(this,Fr,e),ge(this,Ya,null),ge(this,Ka,H_()),this.options.experimental_prefetchInRender||M(this,Ka).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,Xe).addObserver(this),kT(M(this,Xe),this.options)?He(this,mt,Tf).call(this):this.updateResult(),He(this,mt,Y_).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return X_(M(this,Xe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return X_(M(this,Xe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,He(this,mt,J_).call(this),He(this,mt,Q_).call(this),M(this,Xe).removeObserver(this)}setOptions(e){const n=this.options,r=M(this,Xe);if(this.options=M(this,Fr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fi(this.options.enabled,M(this,Xe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");He(this,mt,Z_).call(this),M(this,Xe).setOptions(this.options),n._defaulted&&!Yw(this.options,n)&&M(this,Fr).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,Xe),observer:this});const s=this.hasListeners();s&&OT(M(this,Xe),r,this.options,n)&&He(this,mt,Tf).call(this),this.updateResult(),s&&(M(this,Xe)!==r||fi(this.options.enabled,M(this,Xe))!==fi(n.enabled,M(this,Xe))||yc(this.options.staleTime,M(this,Xe))!==yc(n.staleTime,M(this,Xe)))&&He(this,mt,V_).call(this);const i=He(this,mt,G_).call(this);s&&(M(this,Xe)!==r||fi(this.options.enabled,M(this,Xe))!==fi(n.enabled,M(this,Xe))||i!==M(this,Ja))&&He(this,mt,K_).call(this,i)}getOptimisticResult(e){const n=M(this,Fr).getQueryCache().build(M(this,Fr),e),r=this.createResult(n,e);return jH(this,r)&&(ge(this,yr,r),ge(this,Bd,this.options),ge(this,Il,M(this,Xe).state)),r}getCurrentResult(){return M(this,yr)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){M(this,Wd).add(e)}getCurrentQuery(){return M(this,Xe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=M(this,Fr).defaultQueryOptions(e),r=M(this,Fr).getQueryCache().build(M(this,Fr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return He(this,mt,Tf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,yr)))}createResult(e,n){var C;const r=M(this,Xe),s=this.options,i=M(this,yr),o=M(this,Il),a=M(this,Bd),l=e!==r?e.state:M(this,Fg),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),R=!O&&kT(e,n),F=O&&OT(e,r,n,s);(R||F)&&(d={...d,...O5(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,y=!0):O=typeof n.placeholderData=="function"?n.placeholderData((C=M(this,zd))==null?void 0:C.state.data,M(this,zd)):n.placeholderData,O!==void 0&&(w="success",f=q_(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===M(this,zg))f=M(this,Fd);else try{ge(this,zg,n.select),f=n.select(f),f=q_(i==null?void 0:i.data,f,n),ge(this,Fd,f),ge(this,Ya,null)}catch(O){ge(this,Ya,O)}M(this,Ya)&&(p=M(this,Ya),f=M(this,Fd),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",_=w==="error",E=v&&b,x=f!==void 0,T={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:_,isInitialLoading:E,isLoading:E,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:_&&!x,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&x,isStale:sA(e,n),refetch:this.refetch,promise:M(this,Ka)};if(this.options.experimental_prefetchInRender){const O=q=>{T.status==="error"?q.reject(T.error):T.data!==void 0&&q.resolve(T.data)},R=()=>{const q=ge(this,Ka,T.promise=H_());O(q)},F=M(this,Ka);switch(F.status){case"pending":e.queryHash===r.queryHash&&O(F);break;case"fulfilled":(T.status==="error"||T.data!==F.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==F.reason)&&R();break}}return T}updateResult(){const e=M(this,yr),n=this.createResult(M(this,Xe),this.options);if(ge(this,Il,M(this,Xe).state),ge(this,Bd,this.options),M(this,Il).data!==void 0&&ge(this,zd,M(this,Xe)),Yw(n,e))return;ge(this,yr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!M(this,Wd).size)return!0;const o=new Set(i??M(this,Wd));return this.options.throwOnError&&o.add("error"),Object.keys(M(this,yr)).some(a=>{const c=a;return M(this,yr)[c]!==e[c]&&o.has(c)})};He(this,mt,$5).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&He(this,mt,Y_).call(this)}},Fr=new WeakMap,Xe=new WeakMap,Fg=new WeakMap,yr=new WeakMap,Il=new WeakMap,Bd=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,zg=new WeakMap,Fd=new WeakMap,zd=new WeakMap,Tl=new WeakMap,Nl=new WeakMap,Ja=new WeakMap,Wd=new WeakMap,mt=new WeakSet,Tf=function(e){He(this,mt,Z_).call(this);let n=M(this,Xe).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(vr)),n},V_=function(){He(this,mt,J_).call(this);const e=yc(this.options.staleTime,M(this,Xe));if(Gl||M(this,yr).isStale||!z_(e))return;const r=x5(M(this,yr).dataUpdatedAt,e)+1;ge(this,Tl,setTimeout(()=>{M(this,yr).isStale||this.updateResult()},r))},G_=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,Xe)):this.options.refetchInterval)??!1},K_=function(e){He(this,mt,Q_).call(this),ge(this,Ja,e),!(Gl||fi(this.options.enabled,M(this,Xe))===!1||!z_(M(this,Ja))||M(this,Ja)===0)&&ge(this,Nl,setInterval(()=>{(this.options.refetchIntervalInBackground||rA.isFocused())&&He(this,mt,Tf).call(this)},M(this,Ja)))},Y_=function(){He(this,mt,V_).call(this),He(this,mt,K_).call(this,He(this,mt,G_).call(this))},J_=function(){M(this,Tl)&&(clearTimeout(M(this,Tl)),ge(this,Tl,void 0))},Q_=function(){M(this,Nl)&&(clearInterval(M(this,Nl)),ge(this,Nl,void 0))},Z_=function(){const e=M(this,Fr).getQueryCache().build(M(this,Fr),this.options);if(e===M(this,Xe))return;const n=M(this,Xe);ge(this,Xe,e),ge(this,Fg,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},$5=function(e){En.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(M(this,yr))}),M(this,Fr).getQueryCache().notify({query:M(this,Xe),type:"observerResultsUpdated"})})},bR);function DH(t,e){return fi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function kT(t,e){return DH(t,e)||t.state.data!==void 0&&X_(t,e,e.refetchOnMount)}function X_(t,e,n){if(fi(e.enabled,t)!==!1&&yc(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&sA(t,e)}return!1}function OT(t,e,n,r){return(t!==e||fi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&sA(t,n)}function sA(t,e){return fi(e.enabled,t)!==!1&&t.isStaleByTime(yc(e.staleTime,t))}function jH(t,e){return!Yw(t.getCurrentResult(),e)}var Qa,Za,zr,No,Bo,Xy,eC,ER,UH=(ER=class extends bh{constructor(n,r){super();Ae(this,Bo);Ae(this,Qa);Ae(this,Za);Ae(this,zr);Ae(this,No);ge(this,Qa,n),this.setOptions(r),this.bindMethods(),He(this,Bo,Xy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=M(this,Qa).defaultMutationOptions(n),Yw(this.options,r)||M(this,Qa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,zr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Kl(r.mutationKey)!==Kl(this.options.mutationKey)?this.reset():((s=M(this,zr))==null?void 0:s.state.status)==="pending"&&M(this,zr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=M(this,zr))==null||n.removeObserver(this)}onMutationUpdate(n){He(this,Bo,Xy).call(this),He(this,Bo,eC).call(this,n)}getCurrentResult(){return M(this,Za)}reset(){var n;(n=M(this,zr))==null||n.removeObserver(this),ge(this,zr,void 0),He(this,Bo,Xy).call(this),He(this,Bo,eC).call(this)}mutate(n,r){var s;return ge(this,No,r),(s=M(this,zr))==null||s.removeObserver(this),ge(this,zr,M(this,Qa).getMutationCache().build(M(this,Qa),this.options)),M(this,zr).addObserver(this),M(this,zr).execute(n)}},Qa=new WeakMap,Za=new WeakMap,zr=new WeakMap,No=new WeakMap,Bo=new WeakSet,Xy=function(){var r;const n=((r=M(this,zr))==null?void 0:r.state)??R5();ge(this,Za,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},eC=function(n){En.batch(()=>{var r,s,i,o,a,c,l,u;if(M(this,No)&&this.hasListeners()){const d=M(this,Za).variables,h=M(this,Za).context;(n==null?void 0:n.type)==="success"?((s=(r=M(this,No)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=M(this,No)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=M(this,No)).onError)==null||c.call(a,n.error,d,h),(u=(l=M(this,No)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(M(this,Za))})})},ER);function LH(t){return JSON.stringify(t,(e,n)=>MH(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function MH(t){if(!RT(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!RT(n)||!n.hasOwnProperty("isPrototypeOf"))}function RT(t){return Object.prototype.toString.call(t)==="[object Object]"}function D5(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:v,enabled:_,notifyOnChangeProps:E,placeholderData:x,refetchInterval:S,refetchIntervalInBackground:T,refetchOnMount:C,refetchOnReconnect:O,refetchOnWindowFocus:R,retryOnMount:F,select:q,staleTime:B,suspense:I,throwOnError:A,config:j,connector:P,query:k,...U}=t;return U}function BH(t){return{mutationFn(e){return Qy(t,e)},mutationKey:["connect"]}}function FH(t){return{mutationFn(e){return f5(t,e)},mutationKey:["disconnect"]}}function zH(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return gq(t,{...i,address:r})},queryKey:WH(e)}}function WH(t={}){return["ensName",D5(t)]}function qH(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return mq(t,{...o,connector:r})},queryKey:HH(e)}}function HH(t={}){const{connector:e,...n}=t;return["walletClient",{...D5(n),connectorUid:e==null?void 0:e.uid}]}var j5=D.createContext(void 0),iA=t=>{const e=D.useContext(j5);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},VH=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(j5.Provider,{value:t,children:e})),U5=D.createContext(!1),GH=()=>D.useContext(U5);U5.Provider;function KH(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var YH=D.createContext(KH()),JH=()=>D.useContext(YH),QH=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},ZH=t=>{D.useEffect(()=>{t.clearReset()},[t])},XH=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||I5(n,[t.error,r])),eV=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},tV=(t,e)=>t.isLoading&&t.isFetching&&!e,nV=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,$T=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function rV(t,e,n){var d,h,f,p,g;const r=GH(),s=JH(),i=iA(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",eV(o),QH(o,s),ZH(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(w=>{const y=u?c.subscribe(En.batchCalls(w)):vr;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),nV(o,l))throw $T(o,c,s);if(XH({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Gl&&tV(l,r)){const w=a?$T(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(vr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function sV(t,e){return rV(t,$H)}function L5(t,e){const n=iA(),[r]=D.useState(()=>new UH(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(En.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(vr)},[r]);if(s.error&&I5(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function M5(t){const e=sV({...t,queryKeyHashFn:LH});return e.queryKey=t.queryKey,e}function B5(t={}){const e=Bc(t);return D.useSyncExternalStore(n=>Eq(e,{onChange:n}),()=>vT(e),()=>vT(e))}function iV(t={}){const e=Bc(t);return D.useSyncExternalStore(n=>m5(e,{onChange:n}),()=>bT(e),()=>bT(e))}function F5(t={}){const{mutation:e}=t,n=Bc(t),r=BH(n),{mutate:s,mutateAsync:i,...o}=L5({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:iV({config:n})}}function oV(t={}){const e=Bc(t);return D.useSyncExternalStore(n=>_q(e,{onChange:n}),()=>Bi(e),()=>Bi(e))}function z5(t={}){const{mutation:e}=t,n=Bc(t),r=FH(n),{mutate:s,mutateAsync:i,...o}=L5({...e,...r});return{...o,connectors:oV({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function W5(t={}){const{address:e,query:n={}}=t,r=Bc(t),s=B5({config:r}),i=zH(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return M5({...n,...i,enabled:o})}function q5(t={}){const{query:e={},...n}=t,r=Bc(n),s=iA(),{address:i,connector:o,status:a}=nm({config:r}),c=B5({config:r}),l=t.connector??o,{queryKey:u,...d}=qH(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),M5({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}const aV="_verified_lvyh0_1",oA={verified:aV},cV=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:oA.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),lV=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:oA.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),uV=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:oA.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function H5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=H5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function wc(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=H5(t))&&(r&&(r+=" "),r+=e);return r}const dV="_root_98iqw_1",hV="_article_98iqw_21",DT={root:dV,article:hV},aA=({className:t,children:e})=>m.jsx("div",{className:wc("react-tweet-theme",DT.root,t),children:m.jsx("article",{className:DT.article,children:e})}),V5=t=>m.jsx("img",{...t}),fV="_header_nqq4j_1",pV="_avatar_nqq4j_11",gV="_avatarOverflow_nqq4j_16",mV="_avatarSquare_nqq4j_23",yV="_avatarShadow_nqq4j_26",wV="_author_nqq4j_37",vV="_authorLink_nqq4j_44",bV="_authorVerified_nqq4j_53",EV="_authorLinkText_nqq4j_56",_V="_authorMeta_nqq4j_63",CV="_authorFollow_nqq4j_66",xV="_username_nqq4j_69",SV="_follow_nqq4j_74",AV="_separator_nqq4j_82",IV="_brand_nqq4j_86",TV="_twitterIcon_nqq4j_90",jn={header:fV,avatar:pV,avatarOverflow:gV,avatarSquare:mV,avatarShadow:yV,author:wV,authorLink:vV,authorVerified:bV,authorLinkText:EV,authorMeta:_V,authorFollow:CV,username:xV,follow:SV,separator:AV,brand:IV,twitterIcon:TV},NV="_verifiedOld_lcna5_1",PV="_verifiedBlue_lcna5_4",kV="_verifiedGovernment_lcna5_7",qb={verifiedOld:NV,verifiedBlue:PV,verifiedGovernment:kV},G5=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(cV,{}),s=qb.verifiedBlue;if(n)switch(t.is_blue_verified||(s=qb.verifiedOld),t.verified_type){case"Government":r=m.jsx(uV,{}),s=qb.verifiedGovernment;break;case"Business":r=m.jsx(lV,{}),s=null;break}return n?m.jsx("div",{className:wc(e,s),children:r}):null},OV=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:V5,{user:s}=t;return m.jsxs("div",{className:jn.header,children:[m.jsxs("a",{href:t.url,className:jn.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:wc(jn.avatarOverflow,s.profile_image_shape==="Square"&&jn.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:jn.avatarOverflow,children:m.jsx("div",{className:jn.avatarShadow})})]}),m.jsxs("div",{className:jn.author,children:[m.jsxs("a",{href:t.url,className:jn.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:jn.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(G5,{user:s,className:jn.authorVerified})]}),m.jsxs("div",{className:jn.authorMeta,children:[m.jsx("a",{href:t.url,className:jn.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:jn.authorFollow,children:[m.jsx("span",{className:jn.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:jn.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:jn.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:jn.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},RV="_root_1ec15_1",$V={root:RV},DV=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:$V.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),jV="_root_eihfa_1",UV={root:jV},LV=({href:t,children:e})=>m.jsx("a",{href:t,className:UV.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),MV="_root_1xq52_1",BV={root:MV},FV=({tweet:t})=>m.jsx("p",{className:BV.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(LV,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),jT=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,K5=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,zV=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,WV=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,qV=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,HV=t=>`https://x.com/hashtag/${t.text}`,VV=t=>`https://x.com/search?q=%24${t.text}`,GV=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,Y5=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},KV=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},YV=t=>{const e=KV(t);return e.length>1?e[1]:e[0]},tC=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function UT(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Zh(n,"hashtag",t.entities.hashtags),Zh(n,"mention",t.entities.user_mentions),Zh(n,"url",t.entities.urls),Zh(n,"symbol",t.entities.symbols),t.entities.media&&Zh(n,"media",t.entities.media),JV(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:HV(r),text:s});case"mention":return Object.assign(r,{href:K5(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:VV(r),text:s});default:return Object.assign(r,{text:s})}})}function Zh(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function JV(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const QV=t=>({...t,url:jT(t),user:{...t.user,url:K5(t),follow_url:qV(t)},like_url:zV(t),reply_url:WV(t),in_reply_to_url:t.in_reply_to_screen_name?GV(t):void 0,entities:UT(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:jT(t.quoted_tweet),entities:UT(t.quoted_tweet)}:void 0}),ZV="_root_g9tkv_1",XV="_rounded_g9tkv_6",eG="_mediaWrapper_g9tkv_10",tG="_grid2Columns_g9tkv_17",nG="_grid3_g9tkv_20",rG="_grid2x2_g9tkv_23",sG="_mediaContainer_g9tkv_26",iG="_mediaLink_g9tkv_34",oG="_skeleton_g9tkv_38",aG="_image_g9tkv_43",as={root:ZV,rounded:XV,mediaWrapper:eG,grid2Columns:tG,grid3:nG,grid2x2:rG,mediaContainer:sG,mediaLink:iG,skeleton:oG,image:aG},cG="_anchor_fp31d_1",lG="_videoButton_fp31d_17",uG="_videoButtonIcon_fp31d_35",dG="_watchOnTwitter_fp31d_44",hG="_viewReplies_fp31d_60",xu={anchor:cG,videoButton:lG,videoButtonIcon:uG,watchOnTwitter:dG,viewReplies:hG},fG=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=YV(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:as.image,poster:Y5(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:xu.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:xu.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:xu.watchOnTwitter,children:m.jsx("a",{href:t.url,className:xu.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:wc(xu.anchor,xu.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},pG=t=>m.jsx("img",{...t}),LT=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},J5=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:pG;return m.jsx("div",{className:wc(as.root,!n&&as.rounded),children:m.jsx("div",{className:wc(as.mediaWrapper,o>1&&as.grid2Columns,o===3&&as.grid3,o>4&&as.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:wc(as.mediaContainer,as.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:as.skeleton,style:LT(l,o)}),m.jsx(c,{src:Y5(l,"small"),alt:l.ext_alt_text||"Image",className:as.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:as.mediaContainer,children:[m.jsx("div",{className:as.skeleton,style:LT(l,o)}),m.jsx(fG,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},gG={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},mG=new Intl.DateTimeFormat("en-US",gG),yG=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},wG=t=>{const e=yG(mG.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},vG="_root_i24yn_1",bG={root:vG},EG=({tweet:t})=>{const e=new Date(t.created_at),n=wG(e);return m.jsx("a",{className:bG.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},_G="_info_19qcj_1",CG="_infoLink_19qcj_10",xG="_infoIcon_19qcj_30",Hb={info:_G,infoLink:CG,infoIcon:xG},SG=({tweet:t})=>m.jsxs("div",{className:Hb.info,children:[m.jsx(EG,{tweet:t}),m.jsx("a",{className:Hb.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Hb.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),AG="_actions_n2anf_1",IG="_like_n2anf_13",TG="_reply_n2anf_14",NG="_copy_n2anf_15",PG="_likeIconWrapper_n2anf_27",kG="_likeCount_n2anf_30",OG="_replyIconWrapper_n2anf_35",RG="_copyIconWrapper_n2anf_36",$G="_likeIcon_n2anf_27",DG="_replyIcon_n2anf_35",jG="_copyIcon_n2anf_36",UG="_replyText_n2anf_56",LG="_copyText_n2anf_57",Wr={actions:AG,like:IG,reply:TG,copy:NG,likeIconWrapper:PG,likeCount:kG,replyIconWrapper:OG,copyIconWrapper:RG,likeIcon:$G,replyIcon:DG,copyIcon:jG,replyText:UG,copyText:LG},MG=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:Wr.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:Wr.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:Wr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:Wr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:Wr.copyText,children:e?"Copied!":"Copy link"})]})},BG=({tweet:t})=>{const e=tC(t.favorite_count);return m.jsxs("div",{className:Wr.actions,children:[m.jsxs("a",{className:Wr.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:Wr.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Wr.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:Wr.likeCount,children:e})]}),m.jsxs("a",{className:Wr.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:Wr.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Wr.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:Wr.replyText,children:"Reply"})]}),m.jsx(MG,{tweet:t})]})},FG="_replies_1cutb_1",zG="_link_1cutb_4",WG="_text_1cutb_23",Vb={replies:FG,link:zG,text:WG},qG=({tweet:t})=>m.jsx("div",{className:Vb.replies,children:m.jsx("a",{className:Vb.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:Vb.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${tC(t.conversation_count)} reply`:`Read ${tC(t.conversation_count)} replies`})})}),HG="_root_q5799_1",VG="_article_q5799_16",MT={root:HG,article:VG},GG=({tweet:t,children:e})=>m.jsx("div",{className:MT.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:MT.article,children:e})}),KG="_header_r31i5_1",YG="_avatar_r31i5_11",JG="_avatarSquare_r31i5_17",QG="_author_r31i5_21",ZG="_authorText_r31i5_26",XG="_username_r31i5_33",Hc={header:KG,avatar:YG,avatarSquare:JG,author:QG,authorText:ZG,username:XG},eK=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Hc.header,children:[m.jsx("a",{href:t.url,className:Hc.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:wc(Hc.avatarOverflow,e.profile_image_shape==="Square"&&Hc.avatarSquare),children:m.jsx(V5,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Hc.author,children:[m.jsx("div",{className:Hc.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(G5,{user:e}),m.jsx("div",{className:Hc.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},tK="_root_175ot_1",nK={root:tK},rK=({tweet:t})=>m.jsx("p",{className:nK.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),sK=({tweet:t})=>{var e;return m.jsxs(GG,{tweet:t,children:[m.jsx(eK,{tweet:t}),m.jsx(rK,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(J5,{quoted:!0,tweet:t}):null]})},iK=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>QV(t),[t]);return m.jsxs(aA,{children:[m.jsx(OV,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(DV,{tweet:r}),m.jsx(FV,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(J5,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(sK,{tweet:r.quoted_tweet}),m.jsx(SG,{tweet:r}),m.jsx(BG,{tweet:r}),m.jsx(qG,{tweet:r})]})},oK="_root_16yxa_1",aK={root:oK},cK=t=>m.jsx(aA,{children:m.jsxs("div",{className:aK.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),lK="_skeleton_oi7hr_1",uK={skeleton:lK},Xm=({style:t})=>m.jsx("span",{className:uK.skeleton,style:t}),dK="_root_17qqv_1",hK={root:dK},fK=()=>m.jsxs(aA,{className:hK.root,children:[m.jsx(Xm,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(Xm,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(Xm,{style:{height:"2rem"}}),m.jsx(Xm,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var Q5={exports:{}},Z5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh=D;function pK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gK=typeof Object.is=="function"?Object.is:pK,mK=nh.useState,yK=nh.useEffect,wK=nh.useLayoutEffect,vK=nh.useDebugValue;function bK(t,e){var n=e(),r=mK({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return wK(function(){s.value=n,s.getSnapshot=e,Gb(s)&&i({inst:s})},[t,n,e]),yK(function(){return Gb(s)&&i({inst:s}),t(function(){Gb(s)&&i({inst:s})})},[t]),vK(n),n}function Gb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gK(t,n)}catch{return!0}}function EK(t,e){return e()}var _K=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?EK:bK;Z5.useSyncExternalStore=nh.useSyncExternalStore!==void 0?nh.useSyncExternalStore:_K;Q5.exports=Z5;var CK=Q5.exports;const X5=0,e8=1,t8=2,BT=3;var FT=Object.prototype.hasOwnProperty;function nC(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&nC(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(FT.call(t,n)&&++r&&!FT.call(e,n)||!(n in e)||!nC(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Po=new WeakMap,nc=()=>{},br=nc(),rC=Object,rt=t=>t===br,Gi=t=>typeof t=="function",Pc=(t,e)=>({...t,...e}),n8=t=>Gi(t.then),Kb={},ey={},cA="undefined",rm=typeof window!=cA,sC=typeof document!=cA,xK=rm&&"Deno"in window,SK=()=>rm&&typeof window.requestAnimationFrame!=cA,r8=(t,e)=>{const n=Po.get(t);return[()=>!rt(e)&&t.get(e)||Kb,r=>{if(!rt(e)){const s=t.get(e);e in ey||(ey[e]=s),n[5](e,Pc(s,r),s||Kb)}},n[6],()=>!rt(e)&&e in ey?ey[e]:!rt(e)&&t.get(e)||Kb]};let iC=!0;const AK=()=>iC,[oC,aC]=rm&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[nc,nc],IK=()=>{const t=sC&&document.visibilityState;return rt(t)||t!=="hidden"},TK=t=>(sC&&document.addEventListener("visibilitychange",t),oC("focus",t),()=>{sC&&document.removeEventListener("visibilitychange",t),aC("focus",t)}),NK=t=>{const e=()=>{iC=!0,t()},n=()=>{iC=!1};return oC("online",e),oC("offline",n),()=>{aC("online",e),aC("offline",n)}},PK={isOnline:AK,isVisible:IK},kK={initFocus:TK,initReconnect:NK},zT=!ms.useId,sg=!rm||xK,OK=t=>SK()?window.requestAnimationFrame(t):setTimeout(t,1),Yb=sg?D.useEffect:D.useLayoutEffect,Jb=typeof navigator<"u"&&navigator.connection,WT=!sg&&Jb&&(["slow-2g","2g"].includes(Jb.effectiveType)||Jb.saveData),ty=new WeakMap,Qb=(t,e)=>rC.prototype.toString.call(t)===`[object ${e}]`;let RK=0;const cC=t=>{const e=typeof t,n=Qb(t,"Date"),r=Qb(t,"RegExp"),s=Qb(t,"Object");let i,o;if(rC(t)===t&&!n&&!r){if(i=ty.get(t),i)return i;if(i=++RK+"~",ty.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=cC(t[o])+",";ty.set(t,i)}if(s){i="#";const a=rC.keys(t).sort();for(;!rt(o=a.pop());)rt(t[o])||(i+=o+":"+cC(t[o])+",");ty.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},lA=t=>{if(Gi(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?cC(t):"",[t,e]};let $K=0;const lC=()=>++$K;async function s8(...t){const[e,n,r,s]=t,i=Pc({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Gi(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=lA(h);if(!f)return;const[p,g]=r8(e,f),[w,y,b,v]=Po.get(e),_=()=>{const q=w[f];return(Gi(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],q&&q[0])?q[0](t8).then(()=>p().data):p().data};if(t.length<3)return _();let E=r,x;const S=lC();y[f]=[S,0];const T=!rt(c),C=p(),O=C.data,R=C._c,F=rt(R)?O:R;if(T&&(c=Gi(c)?c(F,O):c,g({data:c,_c:F})),Gi(E))try{E=E(F)}catch(q){x=q}if(E&&n8(E))if(E=await E.catch(q=>{x=q}),S!==y[f][0]){if(x)throw x;return E}else x&&T&&l(x)&&(o=!0,g({data:F,_c:br}));if(o&&!x)if(Gi(o)){const q=o(E,F);g({data:q,error:br,_c:br})}else g({data:E,error:br,_c:br});if(y[f][1]=lC(),Promise.resolve(_()).then(()=>{g({_c:br})}),x){if(u)throw x;return}return E}}const qT=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},DK=(t,e)=>{if(!Po.has(t)){const n=Pc(kK,e),r=Object.create(null),s=s8.bind(br,t);let i=nc;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Po.has(t)&&(Po.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!sg)){const u=n.initFocus(setTimeout.bind(br,qT.bind(br,r,X5))),d=n.initReconnect(setTimeout.bind(br,qT.bind(br,r,e8)));i=()=>{u&&u(),d&&d(),Po.delete(t)}}};return l(),[t,s,l,i]}return[t,Po.get(t)[4]]},jK=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!rt(i)&&o>i||setTimeout(r,a,s)},UK=nC,[i8,LK]=DK(new Map),MK=Pc({onLoadingSlow:nc,onSuccess:nc,onError:nc,onErrorRetry:jK,onDiscarded:nc,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:WT?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:WT?5e3:3e3,compare:UK,isPaused:()=>!1,cache:i8,mutate:LK,fallback:{}},PK),BK=(t,e)=>{const n=Pc(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Pc(s,o))}return n},FK=D.createContext({}),zK="$inf$",o8=rm&&window.__SWR_DEVTOOLS_USE__,WK=o8?window.__SWR_DEVTOOLS_USE__:[],qK=()=>{o8&&(window.__SWR_DEVTOOLS_REACT__=ms)},HK=t=>Gi(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],VK=()=>Pc(MK,D.useContext(FK)),GK=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=lA(e),[,,,a]=Po.get(i8);if(o.startsWith(zK))return n(...i);const c=a[o];return rt(c)?n(...i):(delete a[o],c)}),r),KK=WK.concat(GK),YK=t=>function(...n){const r=VK(),[s,i,o]=HK(n),a=BK(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(KK);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},JK=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};qK();const Zb=ms.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),Xb={dedupe:!0},QK=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=Po.get(r),[y,b]=lA(t),v=D.useRef(!1),_=D.useRef(!1),E=D.useRef(y),x=D.useRef(e),S=D.useRef(n),T=()=>S.current,C=()=>T().isVisible()&&T().isOnline(),[O,R,F,q]=r8(r,y),B=D.useRef({}).current,I=rt(o)?rt(n.fallback)?br:n.fallback[y]:o,A=(it,Le)=>{for(const Dt in B){const jt=Dt;if(jt==="data"){if(!s(it[jt],Le[jt])&&(!rt(it[jt])||!s(Z,Le[jt])))return!1}else if(Le[jt]!==it[jt])return!1}return!0},j=D.useMemo(()=>{const it=!y||!e?!1:rt(a)?T().isPaused()||i?!1:c!==!1:a,Le=Ut=>{const Zn=Pc(Ut);return delete Zn._k,it?{isValidating:!0,isLoading:!0,...Zn}:Zn},Dt=O(),jt=q(),pr=Le(Dt),ss=Dt===jt?pr:Le(jt);let Ht=pr;return[()=>{const Ut=Le(O());return A(Ut,Ht)?(Ht.data=Ut.data,Ht.isLoading=Ut.isLoading,Ht.isValidating=Ut.isValidating,Ht.error=Ut.error,Ht):(Ht=Ut,Ut)},()=>ss]},[r,y]),P=CK.useSyncExternalStore(D.useCallback(it=>F(y,(Le,Dt)=>{A(Dt,Le)||it()}),[r,y]),j[0],j[1]),k=!v.current,U=f[y]&&f[y].length>0,z=P.data,G=rt(z)?I&&n8(I)?Zb(I):I:z,Q=P.error,Y=D.useRef(G),Z=h?rt(z)?rt(Y.current)?G:Y.current:z:G,se=U&&!rt(Q)?!1:k&&!rt(a)?a:T().isPaused()?!1:i?rt(G)?!1:c:rt(G)||c,Pe=!!(y&&e&&k&&se),Oe=rt(P.isValidating)?Pe:P.isValidating,De=rt(P.isLoading)?Pe:P.isLoading,Ke=D.useCallback(async it=>{const Le=x.current;if(!y||!Le||_.current||T().isPaused())return!1;let Dt,jt,pr=!0;const ss=it||{},Ht=!g[y]||!ss.dedupe,Ut=()=>zT?!_.current&&y===E.current&&v.current:y===E.current,Zn={isValidating:!1,isLoading:!1},Wc=()=>{R(Zn)},ea=()=>{const Dn=g[y];Dn&&Dn[1]===jt&&delete g[y]},ta={isValidating:!0};rt(O().data)&&(ta.isLoading=!0);try{if(Ht&&(R(ta),n.loadingTimeout&&rt(O().data)&&setTimeout(()=>{pr&&Ut()&&T().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[Le(b),lC()]),[Dt,jt]=g[y],Dt=await Dt,Ht&&setTimeout(ea,n.dedupingInterval),!g[y]||g[y][1]!==jt)return Ht&&Ut()&&T().onDiscarded(y),!1;Zn.error=br;const Dn=p[y];if(!rt(Dn)&&(jt<=Dn[0]||jt<=Dn[1]||Dn[1]===0))return Wc(),Ht&&Ut()&&T().onDiscarded(y),!1;const Nr=O().data;Zn.data=s(Nr,Dt)?Nr:Dt,Ht&&Ut()&&T().onSuccess(Dt,y,n)}catch(Dn){ea();const Nr=T(),{shouldRetryOnError:na}=Nr;Nr.isPaused()||(Zn.error=Dn,Ht&&Ut()&&(Nr.onError(Dn,y,Nr),(na===!0||Gi(na)&&na(Dn))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||C())&&Nr.onErrorRetry(Dn,y,Nr,Uh=>{const ra=f[y];ra&&ra[0]&&ra[0](BT,Uh)},{retryCount:(ss.retryCount||0)+1,dedupe:!0})))}return pr=!1,Wc(),!0},[y,r]),Zt=D.useCallback((...it)=>s8(r,E.current,...it),[]);if(Yb(()=>{x.current=e,S.current=n,rt(z)||(Y.current=z)}),Yb(()=>{if(!y)return;const it=Ke.bind(br,Xb);let Le=0;T().revalidateOnFocus&&(Le=Date.now()+T().focusThrottleInterval);const jt=JK(y,f,(pr,ss={})=>{if(pr==X5){const Ht=Date.now();T().revalidateOnFocus&&Ht>Le&&C()&&(Le=Ht+T().focusThrottleInterval,it())}else if(pr==e8)T().revalidateOnReconnect&&C()&&it();else{if(pr==t8)return Ke();if(pr==BT)return Ke(ss)}});return _.current=!1,E.current=y,v.current=!0,R({_k:b}),se&&(rt(G)||sg?it():OK(it)),()=>{_.current=!0,jt()}},[y]),Yb(()=>{let it;function Le(){const jt=Gi(l)?l(O().data):l;jt&&it!==-1&&(it=setTimeout(Dt,jt))}function Dt(){!O().error&&(u||T().isVisible())&&(d||T().isOnline())?Ke(Xb).then(Le):Le()}return Le(),()=>{it&&(clearTimeout(it),it=-1)}},[l,u,d,y]),D.useDebugValue(Z),i&&rt(G)&&y){if(!zT&&sg)throw new Error("Fallback data is required when using Suspense in SSR.");x.current=e,S.current=n,_.current=!1;const it=w[y];if(!rt(it)){const Le=Zt(it);Zb(Le)}if(rt(Q)){const Le=Ke(Xb);rt(Z)||(Le.status="fulfilled",Le.value=!0),Zb(Le)}else throw Q}return{mutate:Zt,get data(){return B.data=!0,Z},get error(){return B.error=!0,Q},get isValidating(){return B.isValidating=!0,Oe},get isLoading(){return B.isLoading=!0,De}}},HT=YK(QK);class ZK extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const XK=HT.default||HT,eY="https://react-tweet.vercel.app";async function tY([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new ZK({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const nY=(t,e,n)=>{const{isLoading:r,data:s,error:i}=XK(()=>e||t?[e||t&&`${eY}/api/tweet/${t}`,n]:null,tY,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},rY=({id:t,apiUrl:e,fallback:n=m.jsx(fK,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=nY(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||cK;return m.jsx(l,{error:i?i(a):a})}return m.jsx(iK,{tweet:o,components:r})};var rv={exports:{}},a8={},c8={exports:{}},sY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",iY=sY,oY=iY;function l8(){}function u8(){}u8.resetWarningCache=l8;var aY=function(){function t(r,s,i,o,a,c){if(c!==oY){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:u8,resetWarningCache:l8};return n.PropTypes=n,n};c8.exports=aY();var d8=c8.exports;function h8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=h8(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function VT(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=h8(t))&&(r&&(r+=" "),r+=e);return r}const cY=Object.freeze(Object.defineProperty({__proto__:null,clsx:VT,default:VT},Symbol.toStringTag,{value:"Module"})),lY=I0(cY);var sn={},oo={};Object.defineProperty(oo,"__esModule",{value:!0});oo.dontSetMe=pY;oo.findInArray=uY;oo.int=fY;oo.isFunction=dY;oo.isNum=hY;function uY(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function dY(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function hY(t){return typeof t=="number"&&!isNaN(t)}function fY(t){return parseInt(t,10)}function pY(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.browserPrefixToKey=p8;uu.browserPrefixToStyle=gY;uu.default=void 0;uu.getPrefix=f8;const e1=["Moz","Webkit","O","ms"];function f8(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<e1.length;r++)if(p8(e,e1[r])in n)return e1[r];return""}function p8(t,e){return e?"".concat(e).concat(mY(t)):t}function gY(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function mY(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}uu.default=f8();Object.defineProperty(sn,"__esModule",{value:!0});sn.addClassName=y8;sn.addEvent=vY;sn.addUserSelectStyles=PY;sn.createCSSTransform=AY;sn.createSVGTransform=IY;sn.getTouch=TY;sn.getTouchIdentifier=NY;sn.getTranslation=uA;sn.innerHeight=CY;sn.innerWidth=xY;sn.matchesSelector=m8;sn.matchesSelectorAndParentsTo=wY;sn.offsetXYFromParent=SY;sn.outerHeight=EY;sn.outerWidth=_Y;sn.removeClassName=w8;sn.removeEvent=bY;sn.removeUserSelectStyles=kY;var vs=oo,GT=yY(uu);function g8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(g8=function(r){return r?n:e})(t)}function yY(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=g8(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let ny="";function m8(t,e){return ny||(ny=(0,vs.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,vs.isFunction)(t[n])})),(0,vs.isFunction)(t[ny])?t[ny](e):!1}function wY(t,e,n){let r=t;do{if(m8(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function vY(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function bY(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function EY(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,vs.int)(n.borderTopWidth),e+=(0,vs.int)(n.borderBottomWidth),e}function _Y(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,vs.int)(n.borderLeftWidth),e+=(0,vs.int)(n.borderRightWidth),e}function CY(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,vs.int)(n.paddingTop),e-=(0,vs.int)(n.paddingBottom),e}function xY(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,vs.int)(n.paddingLeft),e-=(0,vs.int)(n.paddingRight),e}function SY(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function AY(t,e){const n=uA(t,e,"px");return{[(0,GT.browserPrefixToKey)("transform",GT.default)]:n}}function IY(t,e){return uA(t,e,"")}function uA(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function TY(t,e){return t.targetTouches&&(0,vs.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,vs.findInArray)(t.changedTouches,n=>e===n.identifier)}function NY(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function PY(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&y8(t.body,"react-draggable-transparent-selection")}function kY(t){if(t)try{if(t.body&&w8(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function y8(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function w8(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.canDragX=$Y;ao.canDragY=DY;ao.createCoreData=UY;ao.createDraggableData=LY;ao.getBoundPosition=OY;ao.getControlPosition=jY;ao.snapToGrid=RY;var cs=oo,gd=sn;function OY(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:MY(r);const s=dA(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,cs.int)(u.paddingLeft)+(0,cs.int)(l.marginLeft),top:-s.offsetTop+(0,cs.int)(u.paddingTop)+(0,cs.int)(l.marginTop),right:(0,gd.innerWidth)(c)-(0,gd.outerWidth)(s)-s.offsetLeft+(0,cs.int)(u.paddingRight)-(0,cs.int)(l.marginRight),bottom:(0,gd.innerHeight)(c)-(0,gd.outerHeight)(s)-s.offsetTop+(0,cs.int)(u.paddingBottom)-(0,cs.int)(l.marginBottom)}}return(0,cs.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,cs.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,cs.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,cs.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function RY(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function $Y(t){return t.props.axis==="both"||t.props.axis==="x"}function DY(t){return t.props.axis==="both"||t.props.axis==="y"}function jY(t,e,n){const r=typeof e=="number"?(0,gd.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=dA(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,gd.offsetXYFromParent)(r||t,i,n.props.scale)}function UY(t,e,n){const r=!(0,cs.isNum)(t.lastX),s=dA(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function LY(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function MY(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function dA(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var sv={},iv={};Object.defineProperty(iv,"__esModule",{value:!0});iv.default=BY;function BY(){}Object.defineProperty(sv,"__esModule",{value:!0});sv.default=void 0;var t1=zY(D),Pr=hA(d8),FY=hA(kS),tr=sn,ca=ao,n1=oo,Xh=hA(iv);function hA(t){return t&&t.__esModule?t:{default:t}}function v8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(v8=function(r){return r?n:e})(t)}function zY(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=v8(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function gr(t,e,n){return e=WY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WY(t){var e=qY(t,"string");return typeof e=="symbol"?e:String(e)}function qY(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ni={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let la=ni.mouse,ov=class extends t1.Component{constructor(){super(...arguments),gr(this,"dragging",!1),gr(this,"lastX",NaN),gr(this,"lastY",NaN),gr(this,"touchIdentifier",null),gr(this,"mounted",!1),gr(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,tr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,tr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,tr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,ca.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,ca.createCoreData)(this,o,a);(0,Xh.default)("DraggableCore: handleDragStart: %j",c),(0,Xh.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,tr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,tr.addEvent)(r,la.move,this.handleDrag),(0,tr.addEvent)(r,la.stop,this.handleDragStop))}),gr(this,"handleDrag",e=>{const n=(0,ca.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,ca.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,ca.createCoreData)(this,r,s);if((0,Xh.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),gr(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,ca.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,ca.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,ca.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,tr.removeUserSelectStyles)(a.ownerDocument),(0,Xh.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Xh.default)("DraggableCore: Removing handlers"),(0,tr.removeEvent)(a.ownerDocument,la.move,this.handleDrag),(0,tr.removeEvent)(a.ownerDocument,la.stop,this.handleDragStop))}),gr(this,"onMouseDown",e=>(la=ni.mouse,this.handleDragStart(e))),gr(this,"onMouseUp",e=>(la=ni.mouse,this.handleDragStop(e))),gr(this,"onTouchStart",e=>(la=ni.touch,this.handleDragStart(e))),gr(this,"onTouchEnd",e=>(la=ni.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,tr.addEvent)(e,ni.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,tr.removeEvent)(n,ni.mouse.move,this.handleDrag),(0,tr.removeEvent)(n,ni.touch.move,this.handleDrag),(0,tr.removeEvent)(n,ni.mouse.stop,this.handleDragStop),(0,tr.removeEvent)(n,ni.touch.stop,this.handleDragStop),(0,tr.removeEvent)(e,ni.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,tr.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:FY.default.findDOMNode(this)}render(){return t1.cloneElement(t1.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};sv.default=ov;gr(ov,"displayName","DraggableCore");gr(ov,"propTypes",{allowAnyClick:Pr.default.bool,children:Pr.default.node.isRequired,disabled:Pr.default.bool,enableUserSelectHack:Pr.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Pr.default.arrayOf(Pr.default.number),handle:Pr.default.string,cancel:Pr.default.string,nodeRef:Pr.default.object,onStart:Pr.default.func,onDrag:Pr.default.func,onStop:Pr.default.func,onMouseDown:Pr.default.func,scale:Pr.default.number,className:n1.dontSetMe,style:n1.dontSetMe,transform:n1.dontSetMe});gr(ov,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(D),n=u(d8),r=u(kS),s=u(lY),i=sn,o=ao,a=oo,c=u(sv),l=u(iv);function u(b){return b&&b.__esModule?b:{default:b}}function d(b){if(typeof WeakMap!="function")return null;var v=new WeakMap,_=new WeakMap;return(d=function(E){return E?_:v})(b)}function h(b,v){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var _=d(v);if(_&&_.has(b))return _.get(b);var E={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in b)if(S!=="default"&&Object.prototype.hasOwnProperty.call(b,S)){var T=x?Object.getOwnPropertyDescriptor(b,S):null;T&&(T.get||T.set)?Object.defineProperty(E,S,T):E[S]=b[S]}return E.default=b,_&&_.set(b,E),E}function f(){return f=Object.assign?Object.assign.bind():function(b){for(var v=1;v<arguments.length;v++){var _=arguments[v];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(b[E]=_[E])}return b},f.apply(this,arguments)}function p(b,v,_){return v=g(v),v in b?Object.defineProperty(b,v,{value:_,enumerable:!0,configurable:!0,writable:!0}):b[v]=_,b}function g(b){var v=w(b,"string");return typeof v=="symbol"?v:String(v)}function w(b,v){if(typeof b!="object"||b===null)return b;var _=b[Symbol.toPrimitive];if(_!==void 0){var E=_.call(b,v);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(b)}class y extends e.Component{static getDerivedStateFromProps(v,_){let{position:E}=v,{prevPropsPosition:x}=_;return E&&(!x||E.x!==x.x||E.y!==x.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:E,prevPropsPosition:x}),{x:E.x,y:E.y,prevPropsPosition:{...E}}):null}constructor(v){super(v),p(this,"onDragStart",(_,E)=>{if((0,l.default)("Draggable: onDragStart: %j",E),this.props.onStart(_,(0,o.createDraggableData)(this,E))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(_,E)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",E);const x=(0,o.createDraggableData)(this,E),S={x:x.x,y:x.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:O}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[R,F]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=R,S.y=F,S.slackX=this.state.slackX+(C-S.x),S.slackY=this.state.slackY+(O-S.y),x.x=S.x,x.y=S.y,x.deltaX=S.x-this.state.x,x.deltaY=S.y-this.state.y}if(this.props.onDrag(_,x)===!1)return!1;this.setState(S)}),p(this,"onDragStop",(_,E)=>{if(!this.state.dragging||this.props.onStop(_,(0,o.createDraggableData)(this,E))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",E);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:O}=this.props.position;S.x=C,S.y=O}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var v,_;return(v=(_=this.props)===null||_===void 0||(_=_.nodeRef)===null||_===void 0?void 0:_.current)!==null&&v!==void 0?v:r.default.findDOMNode(this)}render(){const{axis:v,bounds:_,children:E,defaultPosition:x,defaultClassName:S,defaultClassNameDragging:T,defaultClassNameDragged:C,position:O,positionOffset:R,scale:F,...q}=this.props;let B={},I=null;const j=!!!O||this.state.dragging,P=O||x,k={x:(0,o.canDragX)(this)&&j?this.state.x:P.x,y:(0,o.canDragY)(this)&&j?this.state.y:P.y};this.state.isElementSVG?I=(0,i.createSVGTransform)(k,R):B=(0,i.createCSSTransform)(k,R);const U=(0,s.default)(E.props.className||"",S,{[T]:this.state.dragging,[C]:this.state.dragged});return e.createElement(c.default,f({},q,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(E),{className:U,style:{...E.props.style,...B},transform:I}))}}t.default=y,p(y,"displayName","Draggable"),p(y,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(a8);const{default:b8,DraggableCore:HY}=a8;rv.exports=b8;rv.exports.default=b8;rv.exports.DraggableCore=HY;var VY=rv.exports;const sm=ou(VY);function Yt(){return Yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yt.apply(null,arguments)}function E8(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _8={exports:{}},Ct={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $n=typeof Symbol=="function"&&Symbol.for,fA=$n?Symbol.for("react.element"):60103,pA=$n?Symbol.for("react.portal"):60106,av=$n?Symbol.for("react.fragment"):60107,cv=$n?Symbol.for("react.strict_mode"):60108,lv=$n?Symbol.for("react.profiler"):60114,uv=$n?Symbol.for("react.provider"):60109,dv=$n?Symbol.for("react.context"):60110,gA=$n?Symbol.for("react.async_mode"):60111,hv=$n?Symbol.for("react.concurrent_mode"):60111,fv=$n?Symbol.for("react.forward_ref"):60112,pv=$n?Symbol.for("react.suspense"):60113,GY=$n?Symbol.for("react.suspense_list"):60120,gv=$n?Symbol.for("react.memo"):60115,mv=$n?Symbol.for("react.lazy"):60116,KY=$n?Symbol.for("react.block"):60121,YY=$n?Symbol.for("react.fundamental"):60117,JY=$n?Symbol.for("react.responder"):60118,QY=$n?Symbol.for("react.scope"):60119;function Ss(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case fA:switch(t=t.type,t){case gA:case hv:case av:case lv:case cv:case pv:return t;default:switch(t=t&&t.$$typeof,t){case dv:case fv:case mv:case gv:case uv:return t;default:return e}}case pA:return e}}}function C8(t){return Ss(t)===hv}Ct.AsyncMode=gA;Ct.ConcurrentMode=hv;Ct.ContextConsumer=dv;Ct.ContextProvider=uv;Ct.Element=fA;Ct.ForwardRef=fv;Ct.Fragment=av;Ct.Lazy=mv;Ct.Memo=gv;Ct.Portal=pA;Ct.Profiler=lv;Ct.StrictMode=cv;Ct.Suspense=pv;Ct.isAsyncMode=function(t){return C8(t)||Ss(t)===gA};Ct.isConcurrentMode=C8;Ct.isContextConsumer=function(t){return Ss(t)===dv};Ct.isContextProvider=function(t){return Ss(t)===uv};Ct.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===fA};Ct.isForwardRef=function(t){return Ss(t)===fv};Ct.isFragment=function(t){return Ss(t)===av};Ct.isLazy=function(t){return Ss(t)===mv};Ct.isMemo=function(t){return Ss(t)===gv};Ct.isPortal=function(t){return Ss(t)===pA};Ct.isProfiler=function(t){return Ss(t)===lv};Ct.isStrictMode=function(t){return Ss(t)===cv};Ct.isSuspense=function(t){return Ss(t)===pv};Ct.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===av||t===hv||t===lv||t===cv||t===pv||t===GY||typeof t=="object"&&t!==null&&(t.$$typeof===mv||t.$$typeof===gv||t.$$typeof===uv||t.$$typeof===dv||t.$$typeof===fv||t.$$typeof===YY||t.$$typeof===JY||t.$$typeof===QY||t.$$typeof===KY)};Ct.typeOf=Ss;_8.exports=Ct;var ZY=_8.exports,mA=ZY,XY={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},eJ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},tJ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},x8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},yA={};yA[mA.ForwardRef]=tJ;yA[mA.Memo]=x8;function KT(t){return mA.isMemo(t)?x8:yA[t.$$typeof]||XY}var nJ=Object.defineProperty,rJ=Object.getOwnPropertyNames,YT=Object.getOwnPropertySymbols,sJ=Object.getOwnPropertyDescriptor,iJ=Object.getPrototypeOf,JT=Object.prototype;function S8(t,e,n){if(typeof e!="string"){if(JT){var r=iJ(e);r&&r!==JT&&S8(t,r,n)}var s=rJ(e);YT&&(s=s.concat(YT(e)));for(var i=KT(t),o=KT(e),a=0;a<s.length;++a){var c=s[a];if(!eJ[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=sJ(e,c);try{nJ(t,c,l)}catch{}}}}return t}var oJ=S8;const aJ=ou(oJ);var A8={};Object.defineProperty(A8,"__esModule",{value:!0});A8.default=cJ;function cJ(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function ry(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qw(){return Qw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qw.apply(this,arguments)}function lJ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ua(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uJ(t){var e=function(n){lJ(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,ry(ua(ua(i)),"cachedTheme",void 0),ry(ua(ua(i)),"lastOuterTheme",void 0),ry(ua(ua(i)),"lastTheme",void 0),ry(ua(ua(i)),"renderProvider",function(l){var u=i.props.children;return ms.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?Qw({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?ms.createElement(t.Consumer,null,this.renderProvider):null},r}(ms.Component);return e}function dJ(t){return function(n){var r=ms.forwardRef(function(s,i){return ms.createElement(t.Consumer,null,function(o){return ms.createElement(n,Qw({theme:o,ref:i},s))})});return aJ(r,n),r}}function hJ(t){var e=function(){var r=ms.useContext(t);return r};return e}function fJ(t){return{context:t,withTheme:dJ(t),useTheme:hJ(t),ThemeProvider:uJ(t)}}var I8=D.createContext();fJ(I8);var QT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eh=(typeof window>"u"?"undefined":QT(window))==="object"&&(typeof document>"u"?"undefined":QT(document))==="object"&&document.nodeType===9;function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function pJ(t,e){if(ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function gJ(t){var e=pJ(t,"string");return ig(e)=="symbol"?e:e+""}function mJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gJ(r.key),r)}}function wA(t,e,n){return e&&mJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uC(t,e){return uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},uC(t,e)}function T8(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,uC(t,e)}function ZT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var yJ={}.constructor;function dC(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(dC);if(t.constructor!==yJ)return t;var e={};for(var n in t)e[n]=dC(t[n]);return e}function yv(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=dC(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var XT=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},Ol=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=XT(e[r]," ");else n=XT(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function _h(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function ef(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function og(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=_h(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=ef(f+":"+u+Ol(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=ef(g+":"+u+Ol(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=ef(y+":"+u+Ol(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),ef(""+t+u+"{"+r,o)+ef("}",o))}var wJ=/([[\].#*$><+~=|^:(),"'`\s])/g,eN=typeof CSS<"u"&&CSS.escape,vA=function(t){return eN?eN(t):t.replace(wJ,"\\$1")},N8=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),hC=function(t){T8(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(ZT(ZT(o)),l),o.selectorText="."+vA(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=Ol(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Yt({},s,{allowEmpty:!0}):s;return og(this.selectorText,this.style,a)},wA(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(N8),vJ={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new hC(e,n,r)}},r1={indent:1,children:!0},bJ=/@([\w-]+)/,EJ=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(bJ);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new wv(Yt({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=r1);var s=_h(r),i=s.linebreak;if(r.indent==null&&(r.indent=r1.indent),r.children==null&&(r.children=r1.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),_J=/@container|@media|@supports\s+/,CJ={onCreateRule:function(e,n,r){return _J.test(e)?new EJ(e,n,r):null}},s1={indent:1,children:!0},xJ=/@keyframes\s+([\w-]+)/,fC=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(xJ);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:vA(c(this,a)),this.rules=new wv(Yt({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Yt({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=s1);var s=_h(r),i=s.linebreak;if(r.indent==null&&(r.indent=s1.indent),r.children==null&&(r.children=s1.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),SJ=/@keyframes\s+/,AJ=/\$([\w-]+)/g,pC=function(e,n){return typeof e=="string"?e.replace(AJ,function(r,s){return s in n?n[s]:r}):e},tN=function(e,n,r){var s=e[n],i=pC(s,r);i!==s&&(e[n]=i)},IJ={onCreateRule:function(e,n,r){return typeof e=="string"&&SJ.test(e)?new fC(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&tN(e,"animation-name",r.keyframes),"animation"in e&&tN(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return pC(e,s.keyframes);case"animation-name":return pC(e,s.keyframes);default:return e}}},TJ=function(t){T8(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Yt({},s,{allowEmpty:!0}):s;return og(this.key,this.style,a)},e}(N8),NJ={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new TJ(e,n,r):null}},PJ=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=_h(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=og(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return og(this.at,this.style,r)},t}(),kJ=/@font-face/,OJ={onCreateRule:function(e,n,r){return kJ.test(e)?new PJ(e,n,r):null}},RJ=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return og(this.key,this.style,r)},t}(),$J={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new RJ(e,n,r):null}},DJ=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),jJ={"@charset":!0,"@import":!0,"@namespace":!0},UJ={onCreateRule:function(e,n,r){return e in jJ?new DJ(e,n,r):null}},nN=[vJ,CJ,IJ,NJ,OJ,$J,UJ],LJ={process:!0},rN={force:!0,process:!0},wv=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Yt({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+vA(this.classes[p]));var g=yv(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Yt({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof hC?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof fC&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof hC?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof fC&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=LJ);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,rN)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,rN)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=_h(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),P8=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Yt({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new wv(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),MJ=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),BJ=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=E8(s,["attached"]),a=_h(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},wA(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),Qf=new BJ,gC=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),mC="2f1acc6c3a606b082e5eef5e54414ffb";gC[mC]==null&&(gC[mC]=0);var sN=gC[mC]++,iN=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+sN+a+n:c+i.key+"-"+sN+(a?"-"+a:"")+"-"+n};return r},k8=function(e){var n;return function(){return n||(n=e()),n}},FJ=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},zJ=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=Ol(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},WJ=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},qJ=function(e,n){return e.selectorText=n,e.selectorText===n},O8=k8(function(){return document.querySelector("head")});function HJ(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function VJ(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function GJ(t){for(var e=O8(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function KJ(t){var e=Qf.registry;if(e.length>0){var n=HJ(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=VJ(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=GJ(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function YJ(t,e){var n=e.insertionPoint,r=KJ(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}O8().appendChild(t)}var JJ=k8(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),oN=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},aN=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},QJ=function(){var e=document.createElement("style");return e.textContent=`
`,e},ZJ=function(){function t(n){this.getPropertyValue=FJ,this.setProperty=zJ,this.removeProperty=WJ,this.setSelector=qJ,this.hasInsertedRules=!1,this.cssRules=[],n&&Qf.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||QJ(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=JJ();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){YJ(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=aN(i,s);if(a=oN(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=aN(i,s),d=oN(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof P8&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),XJ=0,eQ=function(){function t(n){this.id=XJ++,this.version="10.10.0",this.plugins=new MJ,this.options={id:{minify:!1},createGenerateId:iN,Renderer:Eh?ZJ:null,plugins:[]},this.generateId=iN({minify:!1});for(var r=0;r<nN.length;r++)this.plugins.use(nN[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Yt({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=Qf.index===0?0:Qf.index+1);var a=new P8(r,Yt({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),Qf.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Yt({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=yv(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),R8=function(e){return new eQ(e)},cN=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},wA(t,[{key:"size",get:function(){return this.length}}]),t}(),bA=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function $8(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=$8(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */R8();var D8=Date.now(),i1="fnValues"+D8,o1="fnStyle"+ ++D8,tQ=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=yv(n,{},s);return i[o1]=r,i},onProcessStyle:function(n,r){if(i1 in r||o1 in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[i1]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[o1];a&&(o.style=a(n)||{});var c=o[i1];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function nQ(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Qu;typeof self<"u"?Qu=self:typeof window<"u"?Qu=window:typeof global<"u"?Qu=global:typeof module<"u"?Qu=module:Qu=Function("return this")();var lN=nQ(Qu),uN=function(e){return e&&e[lN]&&e===e[lN]()},rQ=function(e){return{onCreateRule:function(r,s,i){if(!uN(s))return null;var o=s,a=yv(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!uN(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},sQ=/;\n/,iQ=function(e){for(var n={},r=e.split(sQ),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},oQ=function(e){typeof e.style=="string"&&(e.style=iQ(e.style))};function aQ(){return{onProcessRule:oQ}}var vc="@global",yC="@global ",cQ=function(){function t(n,r,s){this.type="global",this.at=vc,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new wv(Yt({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),lQ=function(){function t(n,r,s){this.type="global",this.at=vc,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(yC.length);this.rule=s.jss.createRule(i,r,Yt({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),uQ=/\s*,\s*/g;function j8(t,e){for(var n=t.split(uQ),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function dQ(t,e){var n=t.options,r=t.style,s=r?r[vc]:null;if(s){for(var i in s)e.addRule(i,s[i],Yt({},n,{selector:j8(i,t.selector)}));delete r[vc]}}function hQ(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,vc.length)!==vc)){var i=j8(s.substr(vc.length),t.selector);e.addRule(i,r[s],Yt({},n,{selector:i})),delete r[s]}}function fQ(){function t(n,r,s){if(!n)return null;if(n===vc)return new cQ(n,r,s);if(n[0]==="@"&&n.substr(0,yC.length)===yC)return new lQ(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(dQ(n,r),hQ(n,r))}return{onCreateRule:t,onProcessRule:e}}var ew=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},a1="extendCurrValue"+Date.now();function pQ(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];pl(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Yt({},t,{extend:l}):t.extend[c];pl(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){pl(t.extend.extend,e,n,r);continue}if(ew(t.extend[d])){d in r||(r[d]={}),pl(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function gQ(t,e,n,r){for(var s in t)if(s!=="extend"){if(ew(r[s])&&ew(t[s])){pl(t[s],e,n,r[s]);continue}if(ew(t[s])){r[s]=pl(t[s],e,n);continue}r[s]=t[s]}}function pl(t,e,n,r){return r===void 0&&(r={}),pQ(t,e,n,r),gQ(t,e,n,r),r}function mQ(){function t(n,r,s){return"extend"in n?pl(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[a1])s.prop(i,null);return s[a1]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[a1]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var dN=/\s*,\s*/g,yQ=/&/g,wQ=/\$([\w-]+)/g;function vQ(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(dN),a=s.split(dN),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(yQ,u):u+" "+h}return c}function n(s,i,o){if(o)return Yt({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Yt({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(wQ,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Yt({},l,{selector:p})):c.addRule(g,s[d],Yt({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function wC(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=wC(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return wC(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function bQ(){function t(e,n){return"composes"in e&&(wC(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var EQ=/[A-Z]/g,_Q=/^ms-/,c1={};function CQ(t){return"-"+t.toLowerCase()}function U8(t){if(c1.hasOwnProperty(t))return c1[t];var e=t.replace(EQ,CQ);return c1[t]=_Q.test(e)?"-"+e:e}function Zw(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:U8(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Zw):e.fallbacks=Zw(t.fallbacks)),e}function xQ(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=Zw(n[r]);return n}return Zw(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=U8(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var J=bA&&CSS?CSS.px:"px",sy=bA&&CSS?CSS.ms:"ms",Su=bA&&CSS?CSS.percent:"%",SQ={"animation-delay":sy,"animation-duration":sy,"background-position":J,"background-position-x":J,"background-position-y":J,"background-size":J,border:J,"border-bottom":J,"border-bottom-left-radius":J,"border-bottom-right-radius":J,"border-bottom-width":J,"border-left":J,"border-left-width":J,"border-radius":J,"border-right":J,"border-right-width":J,"border-top":J,"border-top-left-radius":J,"border-top-right-radius":J,"border-top-width":J,"border-width":J,"border-block":J,"border-block-end":J,"border-block-end-width":J,"border-block-start":J,"border-block-start-width":J,"border-block-width":J,"border-inline":J,"border-inline-end":J,"border-inline-end-width":J,"border-inline-start":J,"border-inline-start-width":J,"border-inline-width":J,"border-start-start-radius":J,"border-start-end-radius":J,"border-end-start-radius":J,"border-end-end-radius":J,margin:J,"margin-bottom":J,"margin-left":J,"margin-right":J,"margin-top":J,"margin-block":J,"margin-block-end":J,"margin-block-start":J,"margin-inline":J,"margin-inline-end":J,"margin-inline-start":J,padding:J,"padding-bottom":J,"padding-left":J,"padding-right":J,"padding-top":J,"padding-block":J,"padding-block-end":J,"padding-block-start":J,"padding-inline":J,"padding-inline-end":J,"padding-inline-start":J,"mask-position-x":J,"mask-position-y":J,"mask-size":J,height:J,width:J,"min-height":J,"max-height":J,"min-width":J,"max-width":J,bottom:J,left:J,top:J,right:J,inset:J,"inset-block":J,"inset-block-end":J,"inset-block-start":J,"inset-inline":J,"inset-inline-end":J,"inset-inline-start":J,"box-shadow":J,"text-shadow":J,"column-gap":J,"column-rule":J,"column-rule-width":J,"column-width":J,"font-size":J,"font-size-delta":J,"letter-spacing":J,"text-decoration-thickness":J,"text-indent":J,"text-stroke":J,"text-stroke-width":J,"word-spacing":J,motion:J,"motion-offset":J,outline:J,"outline-offset":J,"outline-width":J,perspective:J,"perspective-origin-x":Su,"perspective-origin-y":Su,"transform-origin":Su,"transform-origin-x":Su,"transform-origin-y":Su,"transform-origin-z":Su,"transition-delay":sy,"transition-duration":sy,"vertical-align":J,"flex-basis":J,"shape-margin":J,size:J,gap:J,grid:J,"grid-gap":J,"row-gap":J,"grid-row-gap":J,"grid-column-gap":J,"grid-template-rows":J,"grid-template-columns":J,"grid-auto-rows":J,"grid-auto-columns":J,"box-shadow-x":J,"box-shadow-y":J,"box-shadow-blur":J,"box-shadow-spread":J,"font-line-height":J,"text-shadow-x":J,"text-shadow-y":J,"text-shadow-blur":J};function L8(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var AQ=L8(SQ);function Zf(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Zf(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=Zf(s,e[s],n);else for(var i in e)e[i]=Zf(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||AQ[t];return o&&!(e===0&&o===J)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function IQ(t){t===void 0&&(t={});var e=L8(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=Zf(o,s[o],e);return s}function r(s,i){return Zf(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var TQ={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},NQ={position:!0,size:!0},iy={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},l1={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function PQ(t,e,n){return t.map(function(r){return B8(r,e,n,!1,!0)})}function M8(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?M8(t[0],e,n,r):typeof t[0]=="object"?PQ(t,e,r):[t]}function B8(t,e,n,r,s){if(!(iy[e]||l1[e]))return[];var i=[];if(l1[e]&&(t=kQ(t,n,l1[e],r)),Object.keys(t).length)for(var o in iy[e]){if(t[o]){Array.isArray(t[o])?i.push(NQ[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}iy[e][o]!=null&&i.push(iy[e][o])}return!i.length||s?i:[i]}function kQ(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=ag((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function ag(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=ag(t.fallbacks[i],e,!0);continue}t[r]=M8(s,r,TQ,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=ag(t.fallbacks,e,!0);continue}t[r]=B8(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function OQ(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=ag(e[r],n);return e}return ag(e,n)}return{onProcessStyle:t}}function vC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function RQ(t){if(Array.isArray(t))return vC(t)}function $Q(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DQ(t,e){if(t){if(typeof t=="string")return vC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vC(t,e):void 0}}function jQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UQ(t){return RQ(t)||$Q(t)||DQ(t)||jQ()}var Nf="",bC="",F8="",z8="",LQ=Eh&&"ontouchstart"in document.documentElement;if(Eh){var u1={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},MQ=document.createElement("p"),d1=MQ.style,BQ="Transform";for(var h1 in u1)if(h1+BQ in d1){Nf=h1,bC=u1[h1];break}Nf==="Webkit"&&"msHyphens"in d1&&(Nf="ms",bC=u1.ms,z8="edge"),Nf==="Webkit"&&"-apple-trailing-word"in d1&&(F8="apple")}var We={js:Nf,css:bC,vendor:F8,browser:z8,isTouch:LQ};function FQ(t){return t[1]==="-"||We.js==="ms"?t:"@"+We.css+"keyframes"+t.substr(10)}var zQ={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:We.js==="ms"?"-webkit-"+e:We.css+e}},WQ={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:We.js==="Webkit"?We.css+"print-"+e:e}},qQ=/[-\s]+(.)?/g;function HQ(t,e){return e?e.toUpperCase():""}function EA(t){return t.replace(qQ,HQ)}function kc(t){return EA("-"+t)}var VQ={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(We.js==="Webkit"){var r="mask-image";if(EA(r)in n)return e;if(We.js+kc(r)in n)return We.css+e}return e}},GQ={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:We.vendor==="apple"&&!We.isTouch?We.css+e:e}},KQ={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:We.css+e}},YQ={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:We.css+e}},JQ={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:We.js==="Webkit"||We.js==="ms"&&We.browser!=="edge"?We.css+e:e}},QQ={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:We.js==="Moz"||We.js==="ms"||We.vendor==="apple"?We.css+e:e}},ZQ={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(We.js==="Webkit"){var r="WebkitColumn"+kc(e);return r in n?We.css+"column-"+e:!1}if(We.js==="Moz"){var s="page"+kc(e);return s in n?"page-"+e:!1}return!1}},XQ={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(We.js==="Moz")return e;var r=e.replace("-inline","");return We.js+kc(r)in n?We.css+r:!1}},eZ={supportedProperty:function(e,n){return EA(e)in n?e:!1}},tZ={supportedProperty:function(e,n){var r=kc(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:We.js+r in n?We.css+e:We.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},nZ={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:We.js==="ms"?""+We.css+e:e}},rZ={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:We.js==="ms"?We.css+"scroll-chaining":e}},sZ={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},iZ={supportedProperty:function(e,n){var r=sZ[e];return r&&We.js+kc(r)in n?We.css+r:!1}},W8={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},oZ=Object.keys(W8),aZ=function(e){return We.css+e},cZ={supportedProperty:function(e,n,r){var s=r.multiple;if(oZ.indexOf(e)>-1){var i=W8[e];if(!Array.isArray(i))return We.js+kc(i)in n?We.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(We.js+kc(i[0])in n))return!1;return i.map(aZ)}return!1}},q8=[zQ,WQ,VQ,GQ,KQ,YQ,JQ,QQ,ZQ,XQ,eZ,tZ,nZ,rZ,iZ,cZ],hN=q8.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),lZ=q8.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,UQ(e.noPrefill)),t},[]),Pf,sl={};if(Eh){Pf=document.createElement("p");var f1=window.getComputedStyle(document.documentElement,"");for(var p1 in f1)isNaN(p1)||(sl[f1[p1]]=f1[p1]);lZ.forEach(function(t){return delete sl[t]})}function EC(t,e){if(e===void 0&&(e={}),!Pf)return t;if(sl[t]!=null)return sl[t];(t==="transition"||t==="transform")&&(e[t]=t in Pf.style);for(var n=0;n<hN.length&&(sl[t]=hN[n](t,Pf.style,e),!sl[t]);n++);try{Pf.style[t]=""}catch{return!1}return sl[t]}var Au={},uZ={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},dZ=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Sa;function hZ(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?EC(e):", "+EC(n);return r||e||n}Eh&&(Sa=document.createElement("p"));function fN(t,e){var n=e;if(!Sa||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Au[r]!=null)return Au[r];try{Sa.style[t]=n}catch{return Au[r]=!1,!1}if(uZ[t])n=n.replace(dZ,hZ);else if(Sa.style[t]===""&&(n=We.css+n,n==="-ms-flex"&&(Sa.style[t]="-ms-flexbox"),Sa.style[t]=n,Sa.style[t]===""))return Au[r]=!1,!1;return Sa.style[t]="",Au[r]=n,Au[r]}function fZ(){function t(s){if(s.type==="keyframes"){var i=s;i.at=FQ(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=EC(i);c&&c!==i&&(a=!0);var l=!1,u=fN(c,Ol(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return fN(i,Ol(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function pZ(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var gZ=function(e){return e===void 0&&(e={}),{plugins:[tQ(),rQ(e.observable),aQ(),fQ(),mQ(),vQ(),bQ(),xQ(),IQ(e.defaultUnit),OQ(),fZ(),pZ()]}},mZ=Number.MIN_SAFE_INTEGER||-1e9,yZ=function(){return mZ++},wZ=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Eh}),pN=new Map,_A=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new cN),r[n];var s=pN.get(n);return s||(s=new cN,pN.set(n,s)),s},gN=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=_A(r,s);o.manage(i),r.registry&&r.registry.add(n)}},vZ=function(e){if(e.sheet){var n=_A(e.context,e.index);n.unmanage(e.theme)}},bZ=R8(gZ()),H8=new WeakMap,V8=function(e){return H8.get(e)},EZ=function(e,n){H8.set(e,n)},_Z=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function CZ(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Yt({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var xZ=function(e){if(!e.context.disableStylesGeneration){var n=_A(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||bZ,i=_Z(e),o=$8(i),a=s.createStyleSheet(i,CZ(e,o!==null));return EZ(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},SZ=function(e,n){for(var r in n)e.deleteRule(n[r])},AZ=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},IZ=function(e,n){var r=V8(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},TZ=function(e,n){if(!n)return e.classes;var r=V8(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function mN(t){return t?D.useEffect:ms.useInsertionEffect||D.useLayoutEffect}var g1={},Ti=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?yZ():s,o=r.theming,a=r.name,c=E8(r,["index","theming","name"]),l=o&&o.context||I8,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||g1},d={};return function(f){var p=D.useRef(!0),g=D.useContext(wZ),w=u(f&&f.theme),y=D.useMemo(function(){var E=xZ({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return E&&g.isSSR&&gN({index:i,context:g,sheet:E,theme:w}),[E,E?IZ(E,f):null]},[g,w]),b=y[0],v=y[1];mN(g.isSSR)(function(){b&&v&&!p.current&&AZ(f,b,v)},[f]),mN(g.isSSR)(function(){return b&&gN({index:i,context:g,sheet:b,theme:w}),function(){b&&(vZ({index:i,context:g,sheet:b,theme:w}),v&&SZ(b,v))}},[b]);var _=D.useMemo(function(){return b&&v?TZ(b,v):d},[b,v]);return D.useDebugValue(_),D.useDebugValue(w===g1?"No theme":w),D.useEffect(function(){p.current=!1}),_}};const NZ=Ti({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function m1({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=NZ(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(sm,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const PZ=Ti({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Rs({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=PZ({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(sm,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const y1=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],kZ=80,OZ=80,RZ=10,$Z=10,DZ=10,jZ=10,UZ=({onIconClick:t})=>{const e=y1.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:DZ+d*(kZ+RZ),y:jZ+u*(OZ+$Z)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(m1,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(Rs,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:y1.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(m1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(Rs,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:y1.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(m1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},LZ=Ti({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),MZ=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=LZ({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function G8(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function CA(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function K8(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function xA(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function Y8(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function J8(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function BZ(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const FZ=Ti({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),zZ=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=FZ({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),{data:w}=q5();D.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const x=await G8(r);a(x);const S={};x.forEach(T=>{S[T.id]=0}),f(S)}catch(x){g(x.message)}finally{l(!1)}},b=(x,S)=>{f(T=>({...T,[x]:Math.max(0,S)}))},v=async()=>{const x=Object.entries(h).filter(([,S])=>S>0).map(([S,T])=>({id:S,quantity:T}));if(x.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const S=await K8(r,x);if(console.log("Mint API result:",S),S.success&&S.mintTransaction){console.log("Got mint transaction:",S.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await w.sendTransaction({to:S.mintTransaction.to,value:BigInt(S.mintTransaction.value),data:S.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(S.message||"Could not retrieve minting transaction.")}catch(S){console.error("Minting failed:",S),g("Minting failed: "+S.message)}finally{d(!1)}},_=(x,S)=>`${parseFloat(x)} ${S}`,E=()=>{n&&n()};return t?m.jsx(sm,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:E,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(x=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",_(x.token_price,x.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:x.wallet_limit===4294967295?999:x.wallet_limit,value:h[x.id]||0,onChange:S=>b(x.id,parseInt(S.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},x.id))]}),m.jsx("button",{onClick:v,disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},WZ=Ti({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),qZ=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},HZ=({nft:t,onClose:e})=>{const n=WZ(),r=D.useRef(null),s=qZ(t.attributes);return m.jsx(sm,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},VZ=Symbol(),yN=Object.getPrototypeOf,_C=new WeakMap,GZ=t=>t&&(_C.has(t)?_C.get(t):yN(t)===Object.prototype||yN(t)===Array.prototype),KZ=t=>GZ(t)&&t[VZ]||null,wN=(t,e=!0)=>{_C.set(t,e)},Xw={},w1=t=>typeof t=="object"&&t!==null,ka=new WeakMap,kf=new WeakSet,YZ=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>w1(l)&&!kf.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return wN(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(kf.has(g))wN(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(ka.has(g)){const[b,v]=ka.get(g);y.value=i(b,v(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!w1(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(C,O=++a[0])=>{d!==O&&(d=O,h.forEach(R=>R(C,O)))};let p=a[1];const g=(C=++a[1])=>(p!==C&&!h.size&&(p=C,y.forEach(([O])=>{const R=O[1](C);R>d&&(d=R)})),d),w=C=>(O,R)=>{const F=[...O];F[1]=[C,...F[1]],f(F,R)},y=new Map,b=(C,O)=>{if((Xw?"production":void 0)!=="production"&&y.has(C))throw new Error("prop listener already exists");if(h.size){const R=O[3](w(C));y.set(C,[O,R])}else y.set(C,[O])},v=C=>{var O;const R=y.get(C);R&&(y.delete(C),(O=R[1])==null||O.call(R))},_=C=>(h.add(C),h.size===1&&y.forEach(([R,F],q)=>{if((Xw?"production":void 0)!=="production"&&F)throw new Error("remove already exists");const B=R[3](w(q));y.set(q,[R,B])}),()=>{h.delete(C),h.size===0&&y.forEach(([R,F],q)=>{F&&(F(),y.set(q,[R]))})}),E=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),S=e(E,{deleteProperty(C,O){const R=Reflect.get(C,O);v(O);const F=Reflect.deleteProperty(C,O);return F&&f(["delete",[O],R]),F},set(C,O,R,F){const q=Reflect.has(C,O),B=Reflect.get(C,O,F);if(q&&(t(B,R)||o.has(R)&&t(B,o.get(R))))return!0;v(O),w1(R)&&(R=KZ(R)||R);let I=R;if(R instanceof Promise)R.then(A=>{R.status="fulfilled",R.value=A,f(["resolve",[O],A])}).catch(A=>{R.status="rejected",R.reason=A,f(["reject",[O],A])});else{!ka.has(R)&&n(R)&&(I=c(R));const A=!kf.has(I)&&ka.get(I);A&&b(O,A)}return Reflect.set(C,O,I,F),f(["set",[O],R,B]),!0}});o.set(l,S);const T=[E,g,i,_];return ka.set(S,T),Reflect.ownKeys(l).forEach(C=>{const O=Object.getOwnPropertyDescriptor(l,C);"value"in O&&(S[C]=l[C],delete O.value,delete O.writable),Object.defineProperty(E,C,O)}),S})=>[c,ka,kf,t,e,n,r,s,i,o,a],[JZ]=YZ();function $t(t={}){return JZ(t)}function Gn(t,e,n){const r=ka.get(t);(Xw?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function cg(t,e){const n=ka.get(t);(Xw?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Yl(t){return kf.add(t),t}function Kn(t,e,n,r){let s=t[e];return Gn(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function QZ(t){const e=$t({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var vN={};const X={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof vN<"u"?vN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},lg={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=X.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var ZZ=20,XZ=1,Jl=1e6,bN=1e6,eX=-7,tX=21,nX=!1,im="[big.js] ",du=im+"Invalid ",vv=du+"decimal places",rX=du+"rounding mode",Q8=im+"Division by zero",_t={},Qi=void 0,sX=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Z8(){function t(e){var n=this;if(!(n instanceof t))return e===Qi?Z8():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(du+"value");e=e===0&&1/e<0?"-0":String(e)}iX(n,e)}n.constructor=t}return t.prototype=_t,t.DP=ZZ,t.RM=XZ,t.NE=eX,t.PE=tX,t.strict=nX,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function iX(t,e){var n,r,s;if(!sX.test(e))throw Error(du+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function hu(t,e,n,r){var s=t.c;if(n===Qi&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(rX);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Qi))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Qi||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function fu(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}_t.abs=function(){var t=new this.constructor(this);return t.s=1,t};_t.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};_t.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Jl)throw Error(vv);if(!s[0])throw Error(Q8);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],v=0,_=o+(y.e=e.e-t.e)+1;for(y.s=i,i=_<0?0:_,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Qi)&&i--);return!b[0]&&v!=1&&(b.shift(),y.e--,_--),v>_&&hu(y,_,n.RM,g[0]!==Qi),y};_t.eq=function(t){return this.cmp(t)===0};_t.gt=function(t){return this.cmp(t)>0};_t.gte=function(t){return this.cmp(t)>-1};_t.lt=function(t){return this.cmp(t)<0};_t.lte=function(t){return this.cmp(t)<1};_t.minus=_t.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};_t.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(Q8);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};_t.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};_t.plus=_t.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};_t.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-bN||t>bN)throw Error(du+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};_t.prec=function(t,e){if(t!==~~t||t<1||t>Jl)throw Error(du+"precision");return hu(new this.constructor(this),t,e)};_t.round=function(t,e){if(t===Qi)t=0;else if(t!==~~t||t<-Jl||t>Jl)throw Error(vv);return hu(new this.constructor(this),t+this.e+1,e)};_t.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(im+"No square root");i=Math.sqrt(+fu(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return hu(t,(s.DP-=4)+t.e+1,s.RM)};_t.times=_t.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};_t.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Qi){if(t!==~~t||t<0||t>Jl)throw Error(vv);for(n=hu(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return fu(n,!0,!!r)};_t.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Qi){if(t!==~~t||t<0||t>Jl)throw Error(vv);for(n=hu(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return fu(n,!1,!!r)};_t[Symbol.for("nodejs.util.inspect.custom")]=_t.toJSON=_t.toString=function(){var t=this,e=t.constructor;return fu(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};_t.toNumber=function(){var t=+fu(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(im+"Imprecise conversion");return t};_t.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Qi){if(t!==~~t||t<1||t>Jl)throw Error(du+"precision");for(n=hu(new r(n),t,e);n.c.length<t;)n.c.push(0)}return fu(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};_t.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(im+"valueOf disallowed");return fu(t,t.e<=e.NE||t.e>=e.PE,!0)};var tf=Z8();const oX={bigNumber(t){return t?new tf(t):new tf(0)},multiply(t,e){if(t===void 0||e===void 0)return new tf(0);const n=new tf(t),r=new tf(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},aX=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],cX=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],lX=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],uX={getERC20Abi:t=>X.USDT_CONTRACT_ADDRESSES.includes(t)?lX:aX,getSwapAbi:()=>cX},ds={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ue={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function v1(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Re={setItem(t,e){Of()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Of())return localStorage.getItem(t)||void 0},removeItem(t){Of()&&localStorage.removeItem(t)},clear(){Of()&&localStorage.clear()}};function Of(){return typeof window<"u"&&typeof localStorage<"u"}function $o(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var EN={};const b1=(typeof process<"u"&&typeof EN<"u"?EN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",X8=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],dX="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",vt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:b1,SECURE_SITE_DASHBOARD:`${b1}/dashboard`,SECURE_SITE_FAVICON:`${b1}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},le={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=le.getActiveNamespace(),e=le.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Re.setItem(Ue.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Re.getItem(Ue.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Re.removeItem(Ue.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Re.setItem(Ue.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Re.setItem(Ue.ACTIVE_CAIP_NETWORK_ID,t),le.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Re.getItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Re.removeItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=v1(t);Re.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=le.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Re.setItem(Ue.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Re.getItem(Ue.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=v1(t);Re.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Re.getItem(Ue.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=v1(t);return Re.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Re.setItem(Ue.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Re.getItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Re.removeItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Re.getItem(Ue.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Re.getItem(Ue.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Re.setItem(Ue.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Re.getItem(Ue.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Re.getItem(Ue.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Re.setItem(Ue.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=le.getConnectedNamespaces();e.includes(t)||(e.push(t),le.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=le.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),le.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Re.getItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Re.setItem(Ue.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Re.removeItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Re.getItem(Ue.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=le.getBalanceCache();Re.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=le.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=le.getBalanceCache();e[t.caipAddress]=t,Re.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Re.getItem(Ue.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=le.getBalanceCache();Re.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=le.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=le.getNativeBalanceCache();e[t.caipAddress]=t,Re.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Re.getItem(Ue.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=le.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;le.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=le.getEnsCache();e[t.address]=t,Re.setItem(Ue.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=le.getEnsCache();Re.setItem(Ue.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Re.getItem(Ue.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=le.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;le.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=le.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Re.setItem(Ue.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=le.getIdentityCache();Re.setItem(Ue.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Re.removeItem(Ue.PORTFOLIO_CACHE),Re.removeItem(Ue.NATIVE_BALANCE_CACHE),Re.removeItem(Ue.ENS_CACHE),Re.removeItem(Ue.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Re.setItem(Ue.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Re.getItem(Ue.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=le.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===X.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Re.setItem(Ue.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Re.getItem(Ue.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=le.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Re.setItem(Ue.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Re.getItem(Ue.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=le.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Re.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=le.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Re.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(le.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Ce={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ce.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=vt.TEN_SEC_MS:!0},isAllowedRetry(t,e=vt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ce.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+vt.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ce.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ce.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?le.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ce.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return X.W3M_API_URL},getBlockchainApiUrl(){return X.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return X.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?vt.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in X.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function nf(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class om{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await nf(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await nf(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await nf(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await nf(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await nf(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const hX={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?vt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ce.isTelegram()){if(Ce.isIos())return t.filter(e=>e!=="google");if(Ce.isMac())return t.filter(e=>e!=="x");if(Ce.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Te=$t({features:vt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:vt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ne={state:Te,subscribeKey(t,e){return Kn(Te,t,e)},setOptions(t){Object.assign(Te,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Te.remoteFeatures,...t};Te.remoteFeatures=e,(n=Te.remoteFeatures)!=null&&n.socials&&(Te.remoteFeatures.socials=hX.filterSocialsByPlatform(Te.remoteFeatures.socials))},setFeatures(t){if(!t)return;Te.features||(Te.features=vt.DEFAULT_FEATURES);const e={...Te.features,...t};Te.features=e},setProjectId(t){Te.projectId=t},setCustomRpcUrls(t){Te.customRpcUrls=t},setAllWallets(t){Te.allWallets=t},setIncludeWalletIds(t){Te.includeWalletIds=t},setExcludeWalletIds(t){Te.excludeWalletIds=t},setFeaturedWalletIds(t){Te.featuredWalletIds=t},setTokens(t){Te.tokens=t},setTermsConditionsUrl(t){Te.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Te.privacyPolicyUrl=t},setCustomWallets(t){Te.customWallets=t},setIsSiweEnabled(t){Te.isSiweEnabled=t},setIsUniversalProvider(t){Te.isUniversalProvider=t},setSdkVersion(t){Te.sdkVersion=t},setMetadata(t){Te.metadata=t},setDisableAppend(t){Te.disableAppend=t},setEIP6963Enabled(t){Te.enableEIP6963=t},setDebug(t){Te.debug=t},setEnableWalletConnect(t){Te.enableWalletConnect=t},setEnableWalletGuide(t){Te.enableWalletGuide=t},setEnableAuthLogger(t){Te.enableAuthLogger=t},setEnableWallets(t){Te.enableWallets=t},setPreferUniversalLinks(t){Te.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Te.hasMultipleAddresses=t},setSIWX(t){Te.siwx=t},setConnectMethodsOrder(t){Te.features={...Te.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Te.features={...Te.features,walletFeaturesOrder:t}},setSocialsOrder(t){Te.remoteFeatures={...Te.remoteFeatures,socials:t}},setCollapseWallets(t){Te.features={...Te.features,collapseWallets:t}},setEnableEmbedded(t){Te.enableEmbedded=t},setAllowUnsupportedChain(t){Te.allowUnsupportedChain=t},setManualWCControl(t){Te.manualWCControl=t},setEnableNetworkSwitch(t){Te.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Te.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Te.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Te.universalProviderConfigOverride},getSnapshot(){return cg(Te)}},fX=Object.freeze({enabled:!0,events:[]}),pX=new om({baseUrl:Ce.getAnalyticsUrl(),clientId:null}),gX=5,mX=60*1e3,da=$t({...fX}),yX={state:da,subscribeKey(t,e){return Kn(da,t,e)},async sendError(t,e){if(!da.enabled)return;const n=Date.now();if(da.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<mX}).length>=gX)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};da.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ne.state;await pX.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ce.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){da.enabled=!0},disable(){da.enabled=!1},clearEvents(){da.events=[]}};class rh extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,rh.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,rh):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function _N(t,e){const n=t instanceof rh?t:new rh(t instanceof Error?t.message:String(t),e,t);throw yX.sendError(n,n.category),n}function As(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return _N(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return _N(a,e)}},n[r]=i}else n[r]=s}),n}const qi={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},wX={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===qi.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${qi.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===qi.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${qi.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===X.CHAIN.SOLANA&&t===qi.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${qi.COINBASE.url}/dapp?cb_url=${r}`)}},is=$t({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),vX={state:is,subscribeNetworkImages(t){return Gn(is.networkImages,()=>t(is.networkImages))},subscribeKey(t,e){return Kn(is,t,e)},subscribe(t){return Gn(is,()=>t(is))},setWalletImage(t,e){is.walletImages[t]=e},setNetworkImage(t,e){is.networkImages[t]=e},setChainImage(t,e){is.chainImages[t]=e},setConnectorImage(t,e){is.connectorImages={...is.connectorImages,[t]:e}},setTokenImage(t,e){is.tokenImages[t]=e},setCurrencyImage(t,e){is.currencyImages[t]=e}},pi=As(vX),bX={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},E1=$t({networkImagePromises:{}}),e6={async fetchWalletImage(t){if(t)return await Se._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(E1.networkImagePromises[t]||(E1.networkImagePromises[t]=Se._fetchNetworkImage(t)),await E1.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return pi.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return pi.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return pi.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return pi.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return pi.state.connectorImages[t.imageId]},getChainImage(t){return pi.state.networkImages[bX[t]]}},ha=$t({message:"",variant:"info",open:!1}),EX={state:ha,subscribeKey(t,e){return Kn(ha,t,e)},open(t,e){const{debug:n}=ne.state,{shortMessage:r,longMessage:s}=t;n&&(ha.message=r,ha.variant=e,ha.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){ha.open=!1,ha.message="",ha.variant="info"}},hn=As(EX),_X=Ce.getAnalyticsUrl(),CX=new om({baseUrl:_X,clientId:null}),xX=["MODAL_CREATED"],uo=$t({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),bt={state:uo,subscribe(t){return Gn(uo,()=>t(uo))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ne.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=ce.state.address;if(xX.includes(t.data.event)||typeof window>"u")return;await CX.post({path:"/e",params:bt.getSdkProperties(),body:{eventId:Ce.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),uo.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===X.HTTP_STATUS_CODES.FORBIDDEN&&!uo.reportedErrors.FORBIDDEN&&(hn.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Of()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),uo.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;uo.timestamp=Date.now(),uo.data=t,(e=ne.state.features)!=null&&e.analytics&&bt._sendAnalyticsEvent(uo)}},SX=Ce.getApiUrl(),kr=new om({baseUrl:SX,clientId:null}),AX=40,CN=4,IX=20,Be=$t({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Se={state:Be,subscribeKey(t,e){return Kn(Be,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ne.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ne.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${kr.baseUrl}/getWalletImage/${t}`,n=await kr.getBlob({path:e,params:Se._getSdkProperties()});pi.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${kr.baseUrl}/public/getAssetImage/${t}`,n=await kr.getBlob({path:e,params:Se._getSdkProperties()});pi.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${kr.baseUrl}/public/getAssetImage/${t}`,n=await kr.getBlob({path:e,params:Se._getSdkProperties()});pi.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${kr.baseUrl}/public/getCurrencyImage/${t}`,n=await kr.getBlob({path:e,params:Se._getSdkProperties()});pi.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${kr.baseUrl}/public/getTokenImage/${t}`,n=await kr.getBlob({path:e,params:Se._getSdkProperties()});pi.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ce.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===qi.COINBASE.id?!0:$.state.activeChain==="solana"&&(n.id===qi.SOLFLARE.id||n.id===qi.PHANTOM.id)):t},async fetchProjectConfig(){return(await kr.get({path:"/appkit/v1/config",params:Se._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await kr.get({path:"/projects/v1/origins",params:Se._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===X.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=X.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=$.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!e6.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Se._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=de.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Se._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Se._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Se._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Se._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(qi).map(o=>o.id));const r=await kr.get({path:"/getWallets",params:{...Se._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Se._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ne.state;if(t!=null&&t.length){const e={...Se._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??CN,include:t},{data:n}=await Se.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Se._fetchWalletImage(i))),Be.featured=r,Be.allFeatured=r}},async fetchRecommendedWallets(){try{Be.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ne.state,r=[...e??[],...n??[]].filter(Boolean),s=$.getRequestedCaipNetworkIds().join(","),i={page:1,entries:CN,include:t,exclude:r,chains:s},{data:o,count:a}=await Se.fetchWallets(i),c=le.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Se._fetchWalletImage(d))),Be.recommended=o,Be.allRecommended=o,Be.count=a??0}catch{}finally{Be.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ne.state,s=$.getRequestedCaipNetworkIds().join(","),i=[...Be.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:AX,include:e,exclude:i,chains:s},{data:a,count:c}=await Se.fetchWallets(o),l=a.slice(0,IX).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Se._fetchWalletImage(u))),Be.wallets=Ce.uniqueBy([...Be.wallets,...Se._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Be.count=c>Be.count?c:Be.count,Be.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Se.fetchWallets(e);n&&n.forEach(r=>{Be.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ne.state,s=$.getRequestedCaipNetworkIds().join(",");Be.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Se.fetchWallets(i);bt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Se._fetchWalletImage(c)),Ce.wait(300)]),Be.search=Se._filterOutExtensions(o)},initPromise(t,e){const n=Be.promises[t];return n||(Be.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Se.initPromise("connectorImages",Se.fetchConnectorImages),e&&Se.initPromise("featuredWallets",Se.fetchFeaturedWallets),n&&Se.initPromise("recommendedWallets",Se.fetchRecommendedWallets),r&&Se.initPromise("networkImages",Se.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ne.state.features)!=null&&t.analytics&&Se.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await kr.get({path:"/getAnalyticsConfig",params:Se._getSdkProperties()});ne.setFeatures({analytics:t})}catch{ne.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=$.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.recommended=Be.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.filteredWallets=Be.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Be.filteredWallets=[]},setFilterByNamespace(t){if(!t){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=$.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.recommended=Be.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.filteredWallets=Be.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},xt=$t({view:"Connect",history:["Connect"],transactionStack:[]}),TX={state:xt,subscribeKey(t,e){return Kn(xt,t,e)},pushTransactionStack(t){xt.transactionStack.push(t)},popTransactionStack(t){const e=xt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),ke.goBack();break;case"cancel":s==null||s(),ke.goBack();break}},push(t,e){t!==xt.view&&(xt.view=t,xt.history.push(t),xt.data=e)},reset(t,e){xt.view=t,xt.history=[t],xt.data=e},replace(t,e){xt.history.at(-1)===t||(xt.view=t,xt.history[xt.history.length-1]=t,xt.data=e)},goBack(){var r;const t=$.state.activeCaipAddress,e=ke.state.view==="ConnectingFarcaster",n=!t&&e;if(xt.history.length>1){xt.history.pop();const[s]=xt.history.slice(-1);s&&(t&&s==="Connect"?xt.view="Account":xt.view=s)}else gt.close();(r=xt.data)!=null&&r.wallet&&(xt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){ce.setFarcasterUrl(void 0,$.state.activeChain);const a=de.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=cg(ne.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(xt.history.length>1){xt.history=xt.history.slice(0,t+1);const[e]=xt.history.slice(-1);e&&(xt.view=e)}},goBackOrCloseModal(){ke.state.history.length>1?ke.goBack():gt.close()}},ke=As(TX),ho=$t({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),CC={state:ho,subscribe(t){return Gn(ho,()=>t(ho))},setThemeMode(t){ho.themeMode=t;try{const e=de.getAuthConnector();if(e){const n=CC.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:$o(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){ho.themeVariables={...ho.themeVariables,...t};try{const e=de.getAuthConnector();if(e){const n=CC.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:$o(ho.themeVariables,ho.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return cg(ho)}},qr=As(CC),t6={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},ot=$t({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...t6},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),NX={state:ot,subscribe(t){return Gn(ot,()=>{t(ot)})},subscribeKey(t,e){return Kn(ot,t,e)},initialize(t){t.forEach(e=>{const n=le.getConnectedConnectorId(e);n&&de.setConnectorId(n,e)})},setActiveConnector(t){t&&(ot.activeConnector=Yl(t))},setConnectors(t){t.filter(s=>!ot.allConnectors.some(i=>i.id===s.id&&de.getConnectorName(i.name)===de.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&ot.allConnectors.push(Yl(s))});const n=de.getEnabledNamespaces(),r=de.getEnabledConnectors(n);ot.connectors=de.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(ot.filterByNamespaceMap).forEach(e=>{ot.filterByNamespaceMap[e]=!1}),t.forEach(e=>{ot.filterByNamespaceMap[e]=!0}),de.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){ot.filterByNamespaceMap[t]=e,de.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=de.getEnabledNamespaces(),e=de.getEnabledConnectors(t),n=de.areAllNamespacesEnabled();ot.connectors=de.mergeMultiChainConnectors(e),n?Se.clearFilterByNamespaces():Se.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(ot.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return ot.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(ot.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=de.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===X.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=de.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===X.CONNECTOR_ID.AUTH){const s=t,i=cg(ne.state),o=qr.getSnapshot().themeMode,a=qr.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:$o(a,o)}),de.setConnectors([t])}else de.setConnectors([t])},getAuthConnector(t){var r;const e=t||$.state.activeChain,n=ot.connectors.find(s=>s.id===X.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return ot.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ot.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ot.allConnectors.filter(r=>r.chain===$.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=cg(ne.state),r=qr.getSnapshot().themeMode,s=qr.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:$o(s,r)})},getConnectorsByNamespace(t){const e=ot.allConnectors.filter(n=>n.chain===t);return de.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=de.getConnector(t.id,t.rdns),n=$.state.activeChain;wX.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?ke.push("ConnectingExternal",{connector:e}):ke.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?de.getConnectorsByNamespace(t):de.mergeMultiChainConnectors(ot.allConnectors)},setFilterByNamespace(t){ot.filterByNamespace=t,ot.connectors=de.getConnectors(t),Se.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ot.activeConnectorIds={...ot.activeConnectorIds,[e]:t},le.setConnectedConnectorId(e,t))},removeConnectorId(t){ot.activeConnectorIds={...ot.activeConnectorIds,[t]:void 0},le.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ot.activeConnectorIds[t]},isConnected(t){return t?!!ot.activeConnectorIds[t]:Object.values(ot.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ot.activeConnectorIds={...t6}}},de=As(NX),ug={getConnectionStatus(t,e){const n=de.state.activeConnectorIds[e],r=ve.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===X.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=ve.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=de.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>de.getConnectorById(a.connectorId)),o=ug.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var sh={};const PX="https://secure.walletconnect.org/sdk",kX=(typeof process<"u"&&typeof sh<"u"?sh.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||PX,OX=(typeof process<"u"&&typeof sh<"u"?sh.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",RX=(typeof process<"u"&&typeof sh<"u"?sh.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ee={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Rn={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},$X=1e3,ko={checkNamespaceConnectorId(t,e){return de.getConnectorId(t)===e},isSocialProvider(t){return vt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&de.setActiveConnector(e),s==null||s(Ce.isMobile()&&t),r){const l=gt.subscribeKey("open",u=>{u||(ke.state.view!==r&&ke.replace(r),l(),a(new Error("Modal closed")))})}const c=$.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&gt.close(),c(),o(ds.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=$.subscribeKey("activeCaipAddress",s=>{s&&(gt.close(),r(),e(ds.parseCaipAddress(s)))});ve.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=ce.state.socialWindow,i=ce.state.socialProvider,o=!1,a=null;const c=$.subscribeKey("activeCaipAddress",l=>{l&&(e&&gt.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===X.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=de.getAuthConnector();if(g&&!o){s&&(s.close(),ce.setSocialWindow(void 0,$.state.activeChain),s=ce.state.socialWindow),o=!0;const w=f.data.resultUri;if(i&&bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await g.provider.connectSocial(w),i){le.setConnectedSocialProvider(i),await ve.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const y=$.state.activeCaipAddress;if(!y){u(new Error("Failed to connect"));return}l(ds.parseCaipAddress(y)),bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(ce.setSocialProvider(t,$.state.activeChain),i=ce.state.socialProvider,bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=gt.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=de.getAuthConnector();if(p&&!ce.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();ce.setFarcasterUrl(g,$.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=de.getAuthConnector();a=Ce.returnOpenHref(`${X.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){ce.setSocialWindow(a,$.state.activeChain),s=ce.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=gt.subscribeKey("open",c=>{c||(ke.state.view!==e&&ke.replace(e),a(),i(new Error("Modal closed")))})}const o=$.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&gt.close(),o(),s(ds.parseCaipAddress(a)))})})},async updateEmail(){const t=le.getConnectedConnectorId($.state.activeChain),e=de.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==X.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return ke.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(gt.close(),clearInterval(i),o(),r({email:a}))},$X),o=gt.subscribeKey("open",a=>{a||(ke.state.view!=="Connect"&&ke.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return $.checkIfSmartAccountEnabled()&&((n=ce.state.preferredAccountTypes)==null?void 0:n[t])===Rn.ACCOUNT_TYPES.EOA}},tl=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),gn=$t({...tl}),DX={state:gn,subscribeKey(t,e){return Kn(gn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ce.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){gn.message=tl.message,gn.variant=tl.variant,gn.svg=tl.svg,gn.open=tl.open,gn.autoClose=tl.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=tl.autoClose}){gn.open?(gn.open=!1,setTimeout(()=>{gn.message=t,gn.variant=n,gn.svg=e,gn.open=!0,gn.autoClose=r},150)):(gn.message=t,gn.variant=n,gn.svg=e,gn.open=!0,gn.autoClose=r)}},mi=DX,Nt=$t({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),jX={state:Nt,subscribe(t){return Gn(Nt,()=>t(Nt))},setLastNetworkInView(t){Nt.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Nt.loading=!0;try{const s=await Ne.fetchTransactions({account:t,cursor:Nt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Rf.filterSpamTransactions(s.data),o=Rf.filterByConnectedChain(i),a=[...Nt.transactions,...o];Nt.loading=!1,e==="coinbase"?Nt.coinbaseTransactions=Rf.groupTransactionsByYearAndMonth(Nt.coinbaseTransactions,s.data):(Nt.transactions=a,Nt.transactionsByYear=Rf.groupTransactionsByYearAndMonth(Nt.transactionsByYear,o)),Nt.empty=a.length===0,Nt.next=s.next?s.next:void 0}catch{const i=$.state.activeChain;bt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ne.state.projectId,cursor:Nt.next,isSmartAccount:((r=ce.state.preferredAccountTypes)==null?void 0:r[i])===Rn.ACCOUNT_TYPES.SMART_ACCOUNT}}),mi.showError("Failed to fetch transactions"),Nt.loading=!1,Nt.empty=!0,Nt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Nt.next=void 0},resetTransactions(){Nt.transactions=[],Nt.transactionsByYear={},Nt.lastNetworkInView=void 0,Nt.loading=!1,Nt.empty=!1,Nt.next=void 0}},Rf=As(jX,"API_ERROR"),tt=$t({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Vc;const UX={state:tt,subscribe(t){return Gn(tt,()=>t(tt))},subscribeKey(t,e){return Kn(tt,t,e)},_getClient(){return tt._client},setClient(t){tt._client=Yl(t)},initialize(t){const e=le.getConnections();for(const n of t){const r=n.namespace;if(r){const s=tt.connections.get(r)??[],i=e[r]??[],o=[...s,...i];tt.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(Ce.isTelegram()||Ce.isSafari()&&Ce.isIos()){if(Vc){await Vc,Vc=void 0;return}if(!Ce.isPairingExpired(tt==null?void 0:tt.wcPairingExpiry)){const s=tt.wcUri;tt.wcUri=s;return}Vc=(e=(t=ve._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ve.state.status="connecting",await Vc,Vc=void 0,tt.wcPairingExpiry=void 0,ve.state.status="connected"}else await((r=(n=ve._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=ve._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&$.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=ve._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||$.state.activeChain;e&&de.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;gt.setLoading(!0,$.state.activeChain);const n=de.getAuthConnector();n&&(ce.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),le.setPreferredAccountTypes(ce.state.preferredAccountTypes??{[e]:t}),await ve.reconnectExternal(n),gt.setLoading(!1,$.state.activeChain),bt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ve._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ve._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ve._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ve._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ve._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ve._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ve._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ve._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ve._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ve._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ve._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ve._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){tt.wcUri=void 0,tt.wcPairingExpiry=void 0,tt.wcLinking=void 0,tt.recentWallet=void 0,tt.status="disconnected",Rf.resetTransactions(),le.deleteWalletConnectDeepLink()},resetUri(){tt.wcUri=void 0,tt.wcPairingExpiry=void 0,Vc=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ve.state;t&&le.setWalletConnectDeepLink(t),e&&le.setAppKitRecent(e),bt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=ke.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){tt.wcBasic=t},setUri(t){tt.wcUri=t,tt.wcPairingExpiry=Ce.getPairingExpiry()},setWcLinking(t){tt.wcLinking=t},setWcError(t){tt.wcError=t,tt.buffering=!1},setRecentWallet(t){tt.recentWallet=t},setBuffering(t){tt.buffering=t},setStatus(t){tt.status=t},setIsSwitchingConnection(t){tt.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=ve._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new rh("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){tt.connections=new Map(tt.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&ko.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await ve.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=de.getConnectorById(t.connectorId),s=t.connectorId===X.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await ve.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await ve.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=de.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===X.CONNECTOR_ID.AUTH,a=t.connectorId===X.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&ko.isSocialProvider(i)){const{address:d}=await ko.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){gt.open({view:"ConnectingFarcaster"})},onConnect(){ke.replace("ProfileWallets")}});c=d}else{const{address:d}=await ko.connectEmail({closeModalOnConnect:r,onOpen(){gt.open({view:"EmailLogin"})},onConnect(){ke.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await ko.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){gt.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){ke.replace("ProfileWallets")}});c=d}else{const d=await ve.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await ve.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){ug.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=ce.getCaipAddress(n);if(o){const{address:c}=ds.parseCaipAddress(o);i=c}const a=ug.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await ve.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ve.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},ve=As(UX),Iu=$t({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Zi={state:Iu,subscribe(t){return Gn(Iu,()=>t(Iu))},subscribeOpen(t){return Kn(Iu,"open",t)},set(t){Object.assign(Iu,{...Iu,...t})}};function LX(t){const e=Array.from($.state.chains.keys());let n=[];return t?(n.push([t,$.state.chains.get(t)]),ko.checkNamespaceConnectorId(t,X.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&ko.checkNamespaceConnectorId(r,X.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,$.state.chains.get(r)])}):ko.checkNamespaceConnectorId(t,X.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&ko.checkNamespaceConnectorId(r,X.CONNECTOR_ID.AUTH)&&n.push([r,$.state.chains.get(r)])})):n=Array.from($.state.chains.entries()),n}function n6(){var r,s;const t=((r=$.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=$.state.activeCaipNetwork)==null?void 0:s.id)||1,n=vt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const MX={async getTokenList(){var r;const t=$.state.activeCaipNetwork,e=await Ne.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=$.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(ve==null?void 0:ve.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Ne.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Ne.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=ve.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await SA.getMyTokensWithBalance(t);return ce.setTokenBalance(e,$.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:n6(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},wt=$t({tokenBalances:[],loading:!1}),BX={state:wt,subscribe(t){return Gn(wt,()=>t(wt))},subscribeKey(t,e){return Kn(wt,t,e)},setToken(t){t&&(wt.token=Yl(t))},setTokenAmount(t){wt.sendTokenAmount=t},setReceiverAddress(t){wt.receiverAddress=t},setReceiverProfileImageUrl(t){wt.receiverProfileImageUrl=t},setReceiverProfileName(t){wt.receiverProfileName=t},setNetworkBalanceInUsd(t){wt.networkBalanceInUSD=t},setLoading(t){wt.loading=t},async sendToken(){var t;try{switch(ht.setLoading(!0),(t=$.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await ht.sendEvmToken();return;case"solana":await ht.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{ht.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=$.state.activeChain,e=(n=ce.state.preferredAccountTypes)==null?void 0:n[t];if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!ht.state.token)throw new Error("A token is required");(r=ht.state.token)!=null&&r.address?(bt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Rn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.address,amount:ht.state.sendTokenAmount,network:((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await ht.sendERC20Token({receiverAddress:ht.state.receiverAddress,tokenAddress:ht.state.token.address,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals})):(bt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Rn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.symbol||"",amount:ht.state.sendTokenAmount,network:((i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await ht.sendNativeToken({receiverAddress:ht.state.receiverAddress,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;wt.loading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=$.state.activeCaipAddress,s=r?Ce.getPlainAddress(r):void 0;if(wt.lastRetry&&!Ce.isAllowedRetry(wt.lastRetry,30*vt.ONE_SEC_MS))return wt.loading=!1,[];try{if(s&&e&&n){const a=await SA.getMyTokensWithBalance();return wt.tokenBalances=a,wt.lastRetry=void 0,a}}catch(a){wt.lastRetry=Date.now(),t==null||t(a),mi.showError("Token Balance Unavailable")}finally{wt.loading=!1}return[]},fetchNetworkBalance(){if(wt.tokenBalances.length===0)return;const t=MX.mapBalancesToSwapTokens(wt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===n6());e&&(wt.networkBalanceInUSD=e?oX.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;ke.pushTransactionStack({});const e=t.receiverAddress,n=ce.state.address,r=ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ve.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),bt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=ce.state.preferredAccountTypes)==null?void 0:i.eip155)===Rn.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=ht.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=ve._getClient())==null||c.updateBalance("eip155"),ht.resetSend()},async sendERC20Token(t){ke.pushTransactionStack({onSuccess(){ke.replace("Account")}});const e=ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(ce.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ce.getPlainAddress(t.tokenAddress);await ve.writeContract({fromAddress:ce.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:uX.getERC20Abi(n),chainNamespace:"eip155"}),ht.resetSend()}},async sendSolanaToken(){var t;if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");ke.pushTransactionStack({onSuccess(){ke.replace("Account")}}),await ve.sendTransaction({chainNamespace:"solana",to:ht.state.receiverAddress,value:ht.state.sendTokenAmount}),(t=ve._getClient())==null||t.updateBalance("solana"),ht.resetSend()},resetSend(){wt.token=void 0,wt.sendTokenAmount=void 0,wt.receiverAddress=void 0,wt.receiverProfileImageUrl=void 0,wt.receiverProfileName=void 0,wt.loading=!1,wt.tokenBalances=[]}},ht=As(BX),_1={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},oy={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},fe=$t({chains:QZ(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),FX={state:fe,subscribe(t){return Gn(fe,()=>{t(fe)})},subscribeKey(t,e){return Kn(fe,t,e)},subscribeChainProp(t,e,n){let r;return Gn(fe.chains,()=>{var i;const s=n||fe.activeChain;if(s){const o=(i=fe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=le.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ne.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(fe.noAdapters=!0),fe.noAdapters||(fe.activeChain=a==null?void 0:a.namespace,fe.activeCaipNetwork=i,$.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),fe.activeChain&&Zi.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);$.state.chains.set(u,{namespace:u,networkState:$t({...oy,caipNetwork:d==null?void 0:d[0]}),accountState:$t(_1),caipNetworks:d??[],...n}),$.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(fe.activeChain===t){const r=Array.from(fe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&$.setActiveCaipNetwork(s)}}fe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){fe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...oy,caipNetwork:r[0]},accountState:_1,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),$.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=fe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),fe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),$.setRequestedCaipNetworks(r,t.chainNamespace),de.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=fe.chains.get(t);if(n){const o=((r=fe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&$.setActiveCaipNetwork(n.caipNetworks[0]),fe.chains.set(t,{...n,caipNetworks:a}),$.setRequestedCaipNetworks(a||[],t),a.length===0&&de.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=fe.chains.get(t);n&&(n.networkState={...n.networkState||oy,...e},fe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=fe.chains.get(t);if(r){const s={...r.accountState||_1,...e};fe.chains.set(t,{...r,accountState:s}),(fe.chains.size===1||fe.activeChain===t)&&(e.caipAddress&&(fe.activeCaipAddress=e.caipAddress),ce.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=fe.chains.get(t);if(n){const r={...n.networkState||oy,...e};fe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){$.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&de.removeConnectorId(n)},setActiveNamespace(t){var r,s;fe.activeChain=t;const e=t?fe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(fe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,fe.activeCaipNetwork=n,$.setChainNetworkData(t,{caipNetwork:n}),le.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Zi.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;fe.activeChain!==t.chainNamespace&&$.setIsSwitchingNamespace(!0);const e=fe.chains.get(t.chainNamespace);fe.activeChain=t.chainNamespace,fe.activeCaipNetwork=t,$.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?fe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:fe.activeCaipAddress=void 0,$.setAccountProp("caipAddress",fe.activeCaipAddress,t.chainNamespace),e&&ce.replaceState(e.accountState),ht.resetSend(),Zi.set({activeChain:fe.activeChain,selectedNetworkId:(i=fe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),le.setActiveCaipNetworkId(t.caipNetworkId),!$.checkIfSupportedNetwork(t.chainNamespace)&&ne.state.enableNetworkSwitch&&!ne.state.allowUnsupportedChain&&!ve.state.wcBasic&&$.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=fe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==$.state.activeChain,n=(s=$.getNetworkData(t))==null?void 0:s.caipNetwork,r=$.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await $.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=$.state.chains.get($.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=fe.activeCaipNetwork)==null?void 0:o.id)})),r=$.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&gt.close()}catch{ke.goBack()}bt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||fe.activeChain,n=fe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||fe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=fe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=fe.activeChain;if(e&&(n=e),!n)return;const r=(s=fe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=fe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=fe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ce.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return fe.chains.forEach(e=>{const n=$.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){$.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=$.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));de.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return fe.chains.forEach(e=>{const n=$.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return fe.activeCaipNetwork},getActiveCaipAddress(){return fe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=fe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=$.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());$.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||fe.activeCaipNetwork,r=$.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!fe.activeChain)return!0;const e=$.getRequestedCaipNetworks(fe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){$.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=lg.caipNetworkIdToNumber((r=fe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=fe.activeChain;if(!e||!t)return!1;const n=$.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){gt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=fe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&vt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){$.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");fe.activeCaipAddress=void 0,$.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),de.removeConnectorId(e)},setIsSwitchingNamespace(t){fe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(fe.chains.forEach(s=>{X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=fe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=$.state.chains.get(t))==null?void 0:e.accountState:ce.state},getNetworkData(t){var n;const e=t||fe.activeChain;if(e)return(n=$.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=$.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=de.state.filterByNamespace;return(t?[fe.chains.get(t)]:Array.from(fe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?$.getRequestedCaipNetworks(t):$.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){fe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return fe.lastConnectedSIWECaipNetwork}},$=As(FX),zX={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},r6=Ce.getBlockchainApiUrl(),Or=$t({clientId:null,api:new om({baseUrl:r6,clientId:null}),supportedChains:{http:[],ws:[]}}),Ne={state:Or,async get(t){const{st:e,sv:n}=Ne.getSdkProperties(),r=ne.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Or.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ne.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Or.supportedChains.http.length||await Ne.getSupportedNetworks()}catch{return!1}return Or.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Ne.get({path:"v1/supported-chains"});return Or.supportedChains=t,t}catch{return Or.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Ne.isNetworkSupported(e))return{avatar:"",name:""};const r=le.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Ne.get({path:`/v1/identity/${t}`,params:{sender:$.state.activeCaipAddress?Ce.getPlainAddress($.state.activeCaipAddress):void 0}});return le.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Ne.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Ne.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Ne.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ne.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Or.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ne.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Ne.isNetworkSupported((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ne.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Ne.getSdkProperties();if(!await Ne.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ne.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Ne.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Or.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:vt.CONVERT_SLIPPAGE_TOLERANCE},projectId:ne.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Ne.getSdkProperties();if(!await Ne.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ne.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Ne.getSdkProperties();if(!await Ne.isNetworkSupported((l=$.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return mi.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=le.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ne.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return le.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/profile/reverse/${t}`,params:{sender:ce.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Ne.isNetworkSupported((i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Or.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Ne.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Or.api.post({path:"/v1/generators/onrampurl",params:{projectId:ne.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Ne.isNetworkSupported((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ne.get({path:"/v1/onramp/options"})}catch{return zX}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Ne.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Or.api.post({path:"/v1/onramp/quote",params:{projectId:ne.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Ne.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Or.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ne.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Or.clientId=t,Or.api=new om({baseUrl:r6,clientId:t})}},C1={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return wh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},SA={async getMyTokensWithBalance(t){const e=ce.state.address,n=$.state.activeCaipNetwork,r=de.getConnectorId("eip155")===X.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=le.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Ne.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=C1.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ve.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ve.walletGetAssets({account:t,chainFilter:[s]});if(!C1.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>C1.createBalance(l,e.caipNetworkId));return le.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Ts=$t({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),WX={state:Ts,replaceState(t){t&&Object.assign(Ts,Yl(t))},subscribe(t){return $.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return $.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){$.setAccountProp("status",t,e)},getCaipAddress(t){return $.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ce.getPlainAddress(t):void 0;e===$.state.activeChain&&($.state.activeCaipAddress=t),$.setAccountProp("caipAddress",t,e),$.setAccountProp("address",n,e)},setBalance(t,e,n){$.setAccountProp("balance",t,n),$.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){$.setAccountProp("profileName",t,e)},setProfileImage(t,e){$.setAccountProp("profileImage",t,e)},setUser(t,e){$.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){$.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){$.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){$.setAccountProp("currentTab",t,$.state.activeChain)},setTokenBalance(t,e){t&&$.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){$.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){$.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=$.getAccountProp("addressLabels",n)||new Map;r.set(t,e),$.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=$.getAccountProp("addressLabels",e)||new Map;n.delete(t),$.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){$.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){$.setAccountProp("preferredAccountTypes",{...Ts.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Ts.preferredAccountTypes=t},setSocialProvider(t,e){t&&$.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){$.setAccountProp("socialWindow",t?Yl(t):void 0,e)},setFarcasterUrl(t,e){$.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Ts.balanceLoading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=$.state.activeCaipAddress,s=r?Ce.getPlainAddress(r):void 0;if(Ts.lastRetry&&!Ce.isAllowedRetry(Ts.lastRetry,30*vt.ONE_SEC_MS))return Ts.balanceLoading=!1,[];try{if(s&&e&&n){const a=await SA.getMyTokensWithBalance();return ce.setTokenBalance(a,n),Ts.lastRetry=void 0,Ts.balanceLoading=!1,a}}catch(a){Ts.lastRetry=Date.now(),t==null||t(a),mi.showError("Token Balance Unavailable")}finally{Ts.balanceLoading=!1}return[]},resetAccount(t){$.resetAccount(t)}},ce=As(WX),qX={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=$.state.activeCaipNetwork,r=ke.state.data;if(t.id===(n==null?void 0:n.id))return;const i=ce.getCaipAddress($.state.activeChain),o=t.chainNamespace!==$.state.activeChain,a=ce.getCaipAddress(t.chainNamespace),l=de.getConnectorId($.state.activeChain)===X.CONNECTOR_ID.AUTH,u=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?ke.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?ke.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):ke.push("SwitchNetwork",{...r,network:t})}},Rr=$t({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),HX={state:Rr,subscribe(t){return Gn(Rr,()=>t(Rr))},subscribeKey(t,e){return Kn(Rr,t,e)},async open(t){var o,a;const e=ce.state.status==="connected",n=t==null?void 0:t.namespace,r=$.state.activeChain,s=n&&n!==r,i=(o=$.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(ve.state.wcBasic?Se.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Se.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),de.setFilterByNamespace(t==null?void 0:t.namespace),gt.setLoading(!0,n),n&&s){const c=((a=$.getNetworkData(n))==null?void 0:a.caipNetwork)||$.getRequestedCaipNetworks(n)[0];c&&qX.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=$.state.noAdapters;ne.state.manualWCControl||c&&!i?Ce.isMobile()?ke.reset("AllWallets"):ke.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?ke.reset(t.view,t.data):i?ke.reset("Account"):ke.reset("Connect")}Rr.open=!0,Zi.set({open:!0}),bt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ne.state.enableEmbedded,e=!!$.state.activeCaipAddress;Rr.open&&bt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Rr.open=!1,ke.reset("Connect"),gt.clearLoading(),t?e?ke.replace("Account"):ke.push("Connect"):Zi.set({open:!1}),ve.resetUri()},setLoading(t,e){e&&Rr.loadingNamespaceMap.set(e,t),Rr.loading=t,Zi.set({loading:t})},clearLoading(){Rr.loadingNamespaceMap.clear(),Rr.loading=!1},shake(){Rr.shake||(Rr.shake=!0,setTimeout(()=>{Rr.shake=!1},500))}},gt=As(HX),Xf={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},xC={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},VX={providers:X8,selectedProvider:null,error:null,purchaseCurrency:Xf,paymentCurrency:xC,purchaseCurrencies:[Xf],paymentCurrencies:[],quotesLoading:!1},nt=$t(VX),GX={state:nt,subscribe(t){return Gn(nt,()=>t(nt))},subscribeKey(t,e){return Kn(nt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=$.state.activeChain===X.CHAIN.SOLANA?"SOL":"USDC",n=ce.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",dX),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ne.state.projectId),nt.selectedProvider={...t,url:r.toString()}}else nt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=X8.filter(r=>e.includes(r.name));nt.providers=n}else nt.providers=[]},setPurchaseCurrency(t){nt.purchaseCurrency=t},setPaymentCurrency(t){nt.paymentCurrency=t},setPurchaseAmount(t){SC.state.purchaseAmount=t},setPaymentAmount(t){SC.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Ne.getOnrampOptions();nt.purchaseCurrencies=t.purchaseCurrencies,nt.paymentCurrencies=t.paymentCurrencies,nt.paymentCurrency=t.paymentCurrencies[0]||xC,nt.purchaseCurrency=t.purchaseCurrencies[0]||Xf,await Se.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Se.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;nt.quotesLoading=!0;try{const n=await Ne.getOnrampQuote({purchaseCurrency:nt.purchaseCurrency,paymentCurrency:nt.paymentCurrency,amount:((t=nt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=nt.purchaseCurrency)==null?void 0:e.symbol});return nt.quotesLoading=!1,nt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return nt.error=n.message,nt.quotesLoading=!1,null}finally{nt.quotesLoading=!1}},resetState(){nt.selectedProvider=null,nt.error=null,nt.purchaseCurrency=Xf,nt.paymentCurrency=xC,nt.purchaseCurrencies=[Xf],nt.paymentCurrencies=[],nt.paymentAmount=void 0,nt.purchaseAmount=void 0,nt.quotesLoading=!1}},SC=As(GX),xN=2147483648,KX={convertEVMChainIdToCoinType(t){if(t>=xN)throw new Error("Invalid chainId");return(xN|t)>>>0}},Ns=$t({suggestions:[],loading:!1}),YX={state:Ns,subscribe(t){return Gn(Ns,()=>t(Ns))},subscribeKey(t,e){return Kn(Ns,t,e)},async resolveName(t){var e,n;try{return await Ne.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Ne.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ns.loading=!0,Ns.suggestions=[];const e=await Ne.getEnsNameSuggestions(t);return Ns.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ns.suggestions}catch(e){const n=ep.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ns.loading=!1}},async getNamesForAddress(t){try{if(!$.state.activeCaipNetwork)return[];const n=le.getEnsFromCacheForAddress(t);if(n)return n;const r=await Ne.reverseLookupEnsName({address:t});return le.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=ep.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=$.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=ce.state.address,r=de.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Ns.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ke.pushTransactionStack({onCancel(){ke.replace("RegisterAccountName")}});const i=await ve.signMessage(s);Ns.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=KX.convertEVMChainIdToCoinType(Number(o));await Ne.registerEnsName({coinType:a,address:n,signature:i,message:s}),ce.setProfileName(t,e.chainNamespace),ke.replace("RegisterAccountNameSuccess")}catch(s){const i=ep.parseEnsApiError(s,`Error registering name ${t}`);throw ke.replace("RegisterAccountName"),new Error(i)}finally{Ns.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},ep=As(YX);var AA={exports:{}},Id=typeof Reflect=="object"?Reflect:null,SN=Id&&typeof Id.apply=="function"?Id.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},tw;Id&&typeof Id.ownKeys=="function"?tw=Id.ownKeys:Object.getOwnPropertySymbols?tw=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:tw=function(e){return Object.getOwnPropertyNames(e)};function JX(t){console&&console.warn&&console.warn(t)}var s6=Number.isNaN||function(e){return e!==e};function It(){It.init.call(this)}AA.exports=It;AA.exports.once=eee;It.EventEmitter=It;It.prototype._events=void 0;It.prototype._eventsCount=0;It.prototype._maxListeners=void 0;var AN=10;function bv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(It,"defaultMaxListeners",{enumerable:!0,get:function(){return AN},set:function(t){if(typeof t!="number"||t<0||s6(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");AN=t}});It.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};It.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||s6(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function i6(t){return t._maxListeners===void 0?It.defaultMaxListeners:t._maxListeners}It.prototype.getMaxListeners=function(){return i6(this)};It.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")SN(c,this,n);else for(var l=c.length,u=u6(c,l),r=0;r<l;++r)SN(u[r],this,n);return!0};function o6(t,e,n,r){var s,i,o;if(bv(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=i6(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,JX(a)}return t}It.prototype.addListener=function(e,n){return o6(this,e,n,!1)};It.prototype.on=It.prototype.addListener;It.prototype.prependListener=function(e,n){return o6(this,e,n,!0)};function QX(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a6(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=QX.bind(r);return s.listener=n,r.wrapFn=s,s}It.prototype.once=function(e,n){return bv(n),this.on(e,a6(this,e,n)),this};It.prototype.prependOnceListener=function(e,n){return bv(n),this.prependListener(e,a6(this,e,n)),this};It.prototype.removeListener=function(e,n){var r,s,i,o,a;if(bv(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():ZX(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};It.prototype.off=It.prototype.removeListener;It.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function c6(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?XX(s):u6(s,s.length)}It.prototype.listeners=function(e){return c6(this,e,!0)};It.prototype.rawListeners=function(e){return c6(this,e,!1)};It.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):l6.call(t,e)};It.prototype.listenerCount=l6;function l6(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}It.prototype.eventNames=function(){return this._eventsCount>0?tw(this._events):[]};function u6(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ZX(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function XX(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function eee(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}d6(t,e,i,{once:!0}),e!=="error"&&tee(t,s,{once:!0})})}function tee(t,e,n){typeof t.on=="function"&&d6(t,"error",e,n)}function d6(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ks=AA.exports;const IA=ou(Ks);var oe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var AC=function(t,e){return AC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},AC(t,e)};function nee(t,e){AC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var IC=function(){return IC=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},IC.apply(this,arguments)};function ree(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function see(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function iee(t,e){return function(n,r){e(n,r,t)}}function oee(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function aee(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function cee(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function lee(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function uee(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function TC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h6(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function dee(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h6(arguments[e]));return t}function hee(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function dg(t){return this instanceof dg?(this.v=t,this):new dg(t)}function fee(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof dg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function pee(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:dg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function gee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof TC=="function"?TC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function mee(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function yee(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function wee(t){return t&&t.__esModule?t:{default:t}}function vee(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function bee(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Eee=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return IC},__asyncDelegator:pee,__asyncGenerator:fee,__asyncValues:gee,__await:dg,__awaiter:aee,__classPrivateFieldGet:vee,__classPrivateFieldSet:bee,__createBinding:lee,__decorate:see,__exportStar:uee,__extends:nee,__generator:cee,__importDefault:wee,__importStar:yee,__makeTemplateObject:mee,__metadata:oee,__param:iee,__read:h6,__rest:ree,__spread:dee,__spreadArrays:hee,__values:TC},Symbol.toStringTag,{value:"Module"})),Ev=I0(Eee);var x1={},rf={},IN;function _ee(){if(IN)return rf;IN=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return rf.delay=t,rf}var Gc={},S1={},Kc={},TN;function Cee(){return TN||(TN=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.ONE_THOUSAND=Kc.ONE_HUNDRED=void 0,Kc.ONE_HUNDRED=100,Kc.ONE_THOUSAND=1e3),Kc}var A1={},NN;function xee(){return NN||(NN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(A1)),A1}var PN;function f6(){return PN||(PN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ev;e.__exportStar(Cee(),t),e.__exportStar(xee(),t)}(S1)),S1}var kN;function See(){if(kN)return Gc;kN=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.fromMiliseconds=Gc.toMiliseconds=void 0;const t=f6();function e(r){return r*t.ONE_THOUSAND}Gc.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Gc.fromMiliseconds=n,Gc}var ON;function Aee(){return ON||(ON=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ev;e.__exportStar(_ee(),t),e.__exportStar(See(),t)}(x1)),x1}var Tu={},RN;function Iee(){if(RN)return Tu;RN=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Tu.Watch=t,Tu.default=t,Tu}var I1={},sf={},$N;function Tee(){if($N)return sf;$N=1,Object.defineProperty(sf,"__esModule",{value:!0}),sf.IWatch=void 0;class t{}return sf.IWatch=t,sf}var DN;function Nee(){return DN||(DN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ev.__exportStar(Tee(),t)}(I1)),I1}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ev;e.__exportStar(Aee(),t),e.__exportStar(Iee(),t),e.__exportStar(Nee(),t),e.__exportStar(f6(),t)})(oe);class pu{}let Pee=class extends pu{constructor(e){super()}};const jN=oe.FIVE_SECONDS,gu={pulse:"heartbeat_pulse"};let kee=class p6 extends Pee{constructor(e){super(e),this.events=new Ks.EventEmitter,this.interval=jN,this.interval=(e==null?void 0:e.interval)||jN}static async init(e){const n=new p6(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),oe.toMiliseconds(this.interval))}pulse(){this.events.emit(gu.pulse)}};const Oee=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Ree=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,$ee=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Dee(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){jee(t);return}return e}function jee(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function ay(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!$ee.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Oee.test(t)||Ree.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Dee)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Uee(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function An(t,...e){try{return Uee(t(...e))}catch(n){return Promise.reject(n)}}function Lee(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Mee(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function nw(t){if(Lee(t))return String(t);if(Mee(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return nw(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const NC="base64:";function Bee(t){return typeof t=="string"?t:NC+Wee(t)}function Fee(t){return typeof t!="string"||!t.startsWith(NC)?t:zee(t.slice(NC.length))}function zee(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Wee(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Mr(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function qee(...t){return Mr(t.join(":"))}function cy(t){return t=Mr(t),t?t+":":""}function Hee(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Vee(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const Gee="memory",Kee=()=>{const t=new Map;return{name:Gee,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Yee(t={}){const e={mounts:{"":t.driver||Kee()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Mr(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await UN(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=Mr(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:y,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Mr(l);const{relativeKey:d,driver:h}=n(l);return An(h.hasItem,d,u)},getItem(l,u={}){l=Mr(l);const{relativeKey:d,driver:h}=n(l);return An(h.getItem,d,u).then(f=>ay(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?An(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:qee(d.base,f.key),value:ay(f.value)}))):Promise.all(d.items.map(h=>An(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:ay(f)})))))},getItemRaw(l,u={}){l=Mr(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?An(h.getItemRaw,d,u):An(h.getItem,d,u).then(f=>Fee(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Mr(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await An(f.setItem,h,nw(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return An(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:nw(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>An(d.driver.setItem,h.relativeKey,nw(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Mr(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await An(f.setItemRaw,h,u,d);else if(f.setItem)await An(f.setItem,h,Bee(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Mr(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await An(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await An(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Mr(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await An(h.getMeta,d,u)),!u.nativeOnly){const p=await An(h.getItem,d+"$",u).then(g=>ay(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=cy(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await An(y.driver.getKeys,y.relativeBase,u);for(const v of b){const _=y.mountpoint+Mr(v);h.some(E=>_.startsWith(E))||f.push(_)}h=[y.mountpoint,...h.filter(v=>!v.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||Hee(y,u.maxDepth))&&Vee(y,l))},async clear(l,u={}){l=cy(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return An(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>LN(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=cy(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(UN(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=cy(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await LN(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Mr(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Mr(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function UN(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function LN(t){typeof t.dispose=="function"&&await An(t.dispose)}function mu(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function g6(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=mu(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let T1;function am(){return T1||(T1=g6("keyval-store","keyval")),T1}function MN(t,e=am()){return e("readonly",n=>mu(n.get(t)))}function Jee(t,e,n=am()){return n("readwrite",r=>(r.put(e,t),mu(r.transaction)))}function Qee(t,e=am()){return e("readwrite",n=>(n.delete(t),mu(n.transaction)))}function Zee(t=am()){return t("readwrite",e=>(e.clear(),mu(e.transaction)))}function Xee(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},mu(t.transaction)}function ete(t=am()){return t("readonly",e=>{if(e.getAllKeys)return mu(e.getAllKeys());const n=[];return Xee(e,r=>n.push(r.key)).then(()=>n)})}const tte=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),nte=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Ql(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return nte(t)}catch{return t}}function Ko(t){return typeof t=="string"?t:tte(t)||""}const rte="idb-keyval";var ste=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=g6(t.dbName,t.storeName)),{name:rte,options:t,async hasItem(s){return!(typeof await MN(n(s),r)>"u")},async getItem(s){return await MN(n(s),r)??null},setItem(s,i){return Jee(n(s),i,r)},removeItem(s){return Qee(n(s),r)},getKeys(){return ete(r)},clear(){return Zee(r)}}};const ite="WALLET_CONNECT_V2_INDEXED_DB",ote="keyvaluestorage";let ate=class{constructor(){this.indexedDb=Yee({driver:ste({dbName:ite,storeName:ote})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Ko(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var N1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rw={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof N1<"u"&&N1.localStorage?rw.exports=N1.localStorage:typeof window<"u"&&window.localStorage?rw.exports=window.localStorage:rw.exports=new e})();function cte(t){var e;return[t[0],Ql((e=t[1])!=null?e:"")]}let lte=class{constructor(){this.localStorage=rw.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(cte)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Ql(n)}async setItem(e,n){this.localStorage.setItem(e,Ko(n))}async removeItem(e){this.localStorage.removeItem(e)}};const ute="wc_storage_version",BN=1,dte=async(t,e,n)=>{const r=ute,s=await e.getItem(r);if(s&&s>=BN){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,BN),n(e),hte(t,o)},hte=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let fte=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new lte;this.storage=e;try{const n=new ate;dte(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function pte(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var gte=mte;function mte(t,e,n){var r=n&&n.stringify||pte,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const FN=gte;var Zu=Xi;const hg=Ate().console||{},yte={mapHttpRequest:ly,mapHttpResponse:ly,wrapRequestSerializer:P1,wrapResponseSerializer:P1,wrapErrorSerializer:P1,req:ly,res:ly,err:_te};function wte(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Xi(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||hg;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=wte(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=fg),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:Cte(t)};c.levels=Xi.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=fg,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=PC());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Nu(l,c,"error","log"),Nu(l,c,"fatal","error"),Nu(l,c,"warn","error"),Nu(l,c,"info","log"),Nu(l,c,"debug","log"),Nu(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,_v([p],b,y,this._stdErrSerialize)}function v(_){this._childLevel=(_._childLevel|0)+1,this.error=Pu(_,p,"error"),this.fatal=Pu(_,p,"fatal"),this.warn=Pu(_,p,"warn"),this.info=Pu(_,p,"info"),this.debug=Pu(_,p,"debug"),this.trace=Pu(_,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=PC([].concat(_._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Xi.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Xi.stdSerializers=yte;Xi.stdTimeFunctions=Object.assign({},{nullTime:m6,epochTime:y6,unixTime:xte,isoTime:Ste});function Nu(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?fg:s[n]?s[n]:hg[n]||hg[r]||fg,vte(t,e,n)}function vte(t,e,n){!t.transmit&&e[n]===fg||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===hg?hg:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&_v(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,bte(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Xi.levels.values[l],d=Xi.levels.values[n];if(d<u)return;Ete(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Xi.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function bte(t,e,n,r){t._serialize&&_v(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Xi.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?FN(s.shift(),s):void 0}else typeof i=="string"&&(i=FN(s.shift(),s));return i!==void 0&&(o.msg=i),o}function _v(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Xi.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Pu(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Ete(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;_v(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=PC(c)}function PC(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function _te(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Cte(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?m6:y6}function ly(){return{}}function P1(t){return t}function fg(){}function m6(){return!1}function y6(){return Date.now()}function xte(){return Math.round(Date.now()/1e3)}function Ste(){return new Date(Date.now()).toISOString()}function Ate(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const cm=ou(Zu),Ite={level:"info"},lm="custom_context",TA=1e3*1024;let Tte=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},zN=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Tte(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},w6=class{constructor(e,n=TA){this.level=e??"error",this.levelValue=Zu.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new zN(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Zu.levels.values.error?console.error(e):n===Zu.levels.values.warn?console.warn(e):n===Zu.levels.values.debug?console.debug(e):n===Zu.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ko({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new zN(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Ko({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Nte=class{constructor(e,n=TA){this.baseChunkLogger=new w6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},Pte=class{constructor(e,n=TA){this.baseChunkLogger=new w6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var kte=Object.defineProperty,Ote=Object.defineProperties,Rte=Object.getOwnPropertyDescriptors,WN=Object.getOwnPropertySymbols,$te=Object.prototype.hasOwnProperty,Dte=Object.prototype.propertyIsEnumerable,qN=(t,e,n)=>e in t?kte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,e0=(t,e)=>{for(var n in e||(e={}))$te.call(e,n)&&qN(t,n,e[n]);if(WN)for(var n of WN(e))Dte.call(e,n)&&qN(t,n,e[n]);return t},t0=(t,e)=>Ote(t,Rte(e));function Ch(t){return t0(e0({},t),{level:(t==null?void 0:t.level)||Ite.level})}function jte(t,e=lm){return t[e]||""}function Ute(t,e,n=lm){return t[n]=e,t}function rs(t,e=lm){let n="";return typeof t.bindings>"u"?n=jte(t,e):n=t.bindings().context||"",n}function Lte(t,e,n=lm){const r=rs(t,n);return r.trim()?`${r}/${e}`:e}function fr(t,e,n=lm){const r=Lte(t,e,n),s=t.child({context:r});return Ute(s,r,n)}function Mte(t){var e,n;const r=new Nte((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:cm(t0(e0({},t.opts),{level:"trace",browser:t0(e0({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Bte(t){var e;const n=new Pte((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:cm(t0(e0({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function NA(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Mte(t):Bte(t)}var Fte=Object.defineProperty,zte=(t,e,n)=>e in t?Fte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HN=(t,e,n)=>zte(t,typeof e!="symbol"?e+"":e,n);let Wte=class extends pu{constructor(e){super(),this.opts=e,HN(this,"protocol","wc"),HN(this,"version",2)}};var qte=Object.defineProperty,Hte=(t,e,n)=>e in t?qte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vte=(t,e,n)=>Hte(t,e+"",n);let Gte=class extends pu{constructor(e,n){super(),this.core=e,this.logger=n,Vte(this,"records",new Map)}},Kte=class{constructor(e,n){this.logger=e,this.core=n}},Yte=class extends pu{constructor(e,n){super(),this.relayer=e,this.logger=n}},Jte=class extends pu{constructor(e){super()}},Qte=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},Zte=class extends pu{constructor(e,n){super(),this.relayer=e,this.logger=n}},Xte=class extends pu{constructor(e,n){super(),this.core=e,this.logger=n}},ene=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},tne=class{constructor(e,n){this.projectId=e,this.logger=n}},nne=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var rne=Object.defineProperty,sne=(t,e,n)=>e in t?rne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,VN=(t,e,n)=>sne(t,typeof e!="symbol"?e+"":e,n);let ine=class{constructor(e){this.opts=e,VN(this,"protocol","wc"),VN(this,"version",2)}},one=class{constructor(e){this.client=e}};function ane(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function v6(t,...e){if(!ane(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function GN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function cne(t,e){v6(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ku=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function lne(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function b6(t){return typeof t=="string"&&(t=lne(t)),v6(t),t}let une=class{clone(){return this._cloneInto()}};function dne(t){const e=r=>t().update(b6(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function E6(t=32){if(ku&&typeof ku.getRandomValues=="function")return ku.getRandomValues(new Uint8Array(t));if(ku&&typeof ku.randomBytes=="function")return ku.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function hne(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let fne=class extends une{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=k1(this.buffer)}update(e){GN(this);const{view:n,buffer:r,blockLen:s}=this;e=b6(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=k1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){GN(this),cne(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;hne(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=k1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const uy=BigInt(2**32-1),kC=BigInt(32);function _6(t,e=!1){return e?{h:Number(t&uy),l:Number(t>>kC&uy)}:{h:Number(t>>kC&uy)|0,l:Number(t&uy)|0}}function pne(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=_6(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const gne=(t,e)=>BigInt(t>>>0)<<kC|BigInt(e>>>0),mne=(t,e,n)=>t>>>n,yne=(t,e,n)=>t<<32-n|e>>>n,wne=(t,e,n)=>t>>>n|e<<32-n,vne=(t,e,n)=>t<<32-n|e>>>n,bne=(t,e,n)=>t<<64-n|e>>>n-32,Ene=(t,e,n)=>t>>>n-32|e<<64-n,_ne=(t,e)=>e,Cne=(t,e)=>t,xne=(t,e,n)=>t<<n|e>>>32-n,Sne=(t,e,n)=>e<<n|t>>>32-n,Ane=(t,e,n)=>e<<n-32|t>>>64-n,Ine=(t,e,n)=>t<<n-32|e>>>64-n;function Tne(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Nne=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Pne=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,kne=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),One=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Rne=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),$ne=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ve={fromBig:_6,split:pne,toBig:gne,shrSH:mne,shrSL:yne,rotrSH:wne,rotrSL:vne,rotrBH:bne,rotrBL:Ene,rotr32H:_ne,rotr32L:Cne,rotlSH:xne,rotlSL:Sne,rotlBH:Ane,rotlBL:Ine,add:Tne,add3L:Nne,add3H:Pne,add4L:kne,add4H:One,add5H:$ne,add5L:Rne},[Dne,jne]=Ve.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),fa=new Uint32Array(80),pa=new Uint32Array(80);let Une=class extends fne{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)fa[v]=e.getUint32(n),pa[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const _=fa[v-15]|0,E=pa[v-15]|0,x=Ve.rotrSH(_,E,1)^Ve.rotrSH(_,E,8)^Ve.shrSH(_,E,7),S=Ve.rotrSL(_,E,1)^Ve.rotrSL(_,E,8)^Ve.shrSL(_,E,7),T=fa[v-2]|0,C=pa[v-2]|0,O=Ve.rotrSH(T,C,19)^Ve.rotrBH(T,C,61)^Ve.shrSH(T,C,6),R=Ve.rotrSL(T,C,19)^Ve.rotrBL(T,C,61)^Ve.shrSL(T,C,6),F=Ve.add4L(S,R,pa[v-7],pa[v-16]),q=Ve.add4H(F,x,O,fa[v-7],fa[v-16]);fa[v]=q|0,pa[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const _=Ve.rotrSH(d,h,14)^Ve.rotrSH(d,h,18)^Ve.rotrBH(d,h,41),E=Ve.rotrSL(d,h,14)^Ve.rotrSL(d,h,18)^Ve.rotrBL(d,h,41),x=d&f^~d&g,S=h&p^~h&w,T=Ve.add5L(b,E,S,jne[v],pa[v]),C=Ve.add5H(T,y,_,x,Dne[v],fa[v]),O=T|0,R=Ve.rotrSH(r,s,28)^Ve.rotrBH(r,s,34)^Ve.rotrBH(r,s,39),F=Ve.rotrSL(r,s,28)^Ve.rotrBL(r,s,34)^Ve.rotrBL(r,s,39),q=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ve.add(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=Ve.add3L(O,F,B);r=Ve.add3H(I,C,R,q),s=I|0}({h:r,l:s}=Ve.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ve.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ve.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ve.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ve.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ve.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ve.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Ve.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){fa.fill(0),pa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Lne=dne(()=>new Une);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const PA=BigInt(0),C6=BigInt(1),Mne=BigInt(2);function kA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function OA(t){if(!kA(t))throw new Error("Uint8Array expected")}function O1(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Bne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function RA(t){OA(t);let e="";for(let n=0;n<t.length;n++)e+=Bne[t[n]];return e}function x6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?PA:BigInt("0x"+t)}const fo={_0:48,_9:57,A:65,F:70,a:97,f:102};function KN(t){if(t>=fo._0&&t<=fo._9)return t-fo._0;if(t>=fo.A&&t<=fo.F)return t-(fo.A-10);if(t>=fo.a&&t<=fo.f)return t-(fo.a-10)}function S6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=KN(t.charCodeAt(i)),a=KN(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Fne(t){return x6(RA(t))}function sw(t){return OA(t),x6(RA(Uint8Array.from(t).reverse()))}function A6(t,e){return S6(t.toString(16).padStart(e*2,"0"))}function OC(t,e){return A6(t,e).reverse()}function po(t,e,n){let r;if(typeof e=="string")try{r=S6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(kA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function YN(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];OA(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const R1=t=>typeof t=="bigint"&&PA<=t;function zne(t,e,n){return R1(t)&&R1(e)&&R1(n)&&e<=t&&t<n}function of(t,e,n,r){if(!zne(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Wne(t){let e;for(e=0;t>PA;t>>=C6,e+=1);return e}const qne=t=>(Mne<<BigInt(t-1))-C6,Hne={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||kA(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function $A(t,e,n={}){const r=(s,i,o)=>{const a=Hne[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function JN(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const kn=BigInt(0),cn=BigInt(1),il=BigInt(2),Vne=BigInt(3),RC=BigInt(4),QN=BigInt(5),ZN=BigInt(8);function bn(t,e){const n=t%e;return n>=kn?n:e+n}function Gne(t,e,n){if(e<kn)throw new Error("invalid exponent, negatives unsupported");if(n<=kn)throw new Error("invalid modulus");if(n===cn)return kn;let r=cn;for(;e>kn;)e&cn&&(r=r*t%n),t=t*t%n,e>>=cn;return r}function Oi(t,e,n){let r=t;for(;e-- >kn;)r*=r,r%=n;return r}function XN(t,e){if(t===kn)throw new Error("invert: expected non-zero number");if(e<=kn)throw new Error("invert: expected positive modulus, got "+e);let n=bn(t,e),r=e,s=kn,i=cn;for(;n!==kn;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==cn)throw new Error("invert: does not exist");return bn(s,e)}function Kne(t){const e=(t-cn)/il;let n,r,s;for(n=t-cn,r=0;n%il===kn;n/=il,r++);for(s=il;s<t&&Gne(s,e,t)!==t-cn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+cn)/RC;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+cn)/il;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,cn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Yne(t){if(t%RC===Vne){const e=(t+cn)/RC;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%ZN===QN){const e=(t-QN)/ZN;return function(n,r){const s=n.mul(r,il),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,il),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Kne(t)}const Jne=(t,e)=>(bn(t,e)&cn)===cn,Qne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zne(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Qne.reduce((r,s)=>(r[s]="function",r),e);return $A(t,n)}function Xne(t,e,n){if(n<kn)throw new Error("invalid exponent, negatives unsupported");if(n===kn)return t.ONE;if(n===cn)return e;let r=t.ONE,s=e;for(;n>kn;)n&cn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=cn;return r}function ere(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function I6(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function T6(t,e,n=!1,r={}){if(t<=kn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=I6(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:qne(s),ZERO:kn,ONE:cn,create:c=>bn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return kn<=c&&c<t},is0:c=>c===kn,isOdd:c=>(c&cn)===cn,neg:c=>bn(-c,t),eql:(c,l)=>c===l,sqr:c=>bn(c*c,t),add:(c,l)=>bn(c+l,t),sub:(c,l)=>bn(c-l,t),mul:(c,l)=>bn(c*l,t),pow:(c,l)=>Xne(a,c,l),div:(c,l)=>bn(c*XN(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>XN(c,t),sqrt:r.sqrt||(c=>(o||(o=Yne(t)),o(a,c))),invertBatch:c=>ere(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?OC(c,i):A6(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?sw(c):Fne(c)}});return Object.freeze(a)}const eP=BigInt(0),dy=BigInt(1);function $1(t,e){const n=e.negate();return t?n:e}function N6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function D1(t,e){N6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function tre(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function nre(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const j1=new WeakMap,P6=new WeakMap;function U1(t){return P6.get(t)||1}function rre(t,e){return{constTimeNegate:$1,hasPrecomputes(n){return U1(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>eP;)r&dy&&(s=s.add(i)),i=i.double(),r>>=dy;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=D1(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=D1(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=dy);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add($1(y,r[g])):a=a.add($1(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=D1(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===eP)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=dy),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=j1.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&j1.set(r,s(i))),i},wNAFCached(n,r,s){const i=U1(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=U1(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){N6(r,e),P6.set(n,r),j1.delete(n)}}}function sre(t,e,n,r){if(tre(n,t),nre(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Wne(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function ire(t){return Zne(t.Fp),$A(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...I6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Zs=BigInt(0),$r=BigInt(1),hy=BigInt(2),ore=BigInt(8),are={zip215:!0};function cre(t){const e=ire(t);return $A(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function lre(t){const e=cre(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=hy<<BigInt(a*8)-$r,u=n.create,d=T6(e.n,e.nBitLength),h=e.uvRatio||((I,A)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(A))}}catch{return{isValid:!1,value:Zs}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,A,j)=>{if(O1("phflag",j),A.length||j)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,A){of("coordinate "+I,A,Zs,l)}function w(I){if(!(I instanceof v))throw new Error("ExtendedPoint expected")}const y=JN((I,A)=>{const{ex:j,ey:P,ez:k}=I,U=I.is0();A==null&&(A=U?ore:n.inv(k));const z=u(j*A),G=u(P*A),Q=u(k*A);if(U)return{x:Zs,y:$r};if(Q!==$r)throw new Error("invZ was invalid");return{x:z,y:G}}),b=JN(I=>{const{a:A,d:j}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:P,ey:k,ez:U,et:z}=I,G=u(P*P),Q=u(k*k),Y=u(U*U),Z=u(Y*Y),se=u(G*A),Pe=u(Y*u(se+Q)),Oe=u(Z+u(j*u(G*Q)));if(Pe!==Oe)throw new Error("bad point: equation left != right (1)");const De=u(P*k),Ke=u(U*z);if(De!==Ke)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(A,j,P,k){this.ex=A,this.ey=j,this.ez=P,this.et=k,g("x",A),g("y",j),g("z",P),g("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof v)throw new Error("extended point not allowed");const{x:j,y:P}=A||{};return g("x",j),g("y",P),new v(j,P,$r,u(j*P))}static normalizeZ(A){const j=n.invertBatch(A.map(P=>P.ez));return A.map((P,k)=>P.toAffine(j[k])).map(v.fromAffine)}static msm(A,j){return sre(v,d,A,j)}_setWindowSize(A){x.setWindowSize(this,A)}assertValidity(){b(this)}equals(A){w(A);const{ex:j,ey:P,ez:k}=this,{ex:U,ey:z,ez:G}=A,Q=u(j*G),Y=u(U*k),Z=u(P*G),se=u(z*k);return Q===Y&&Z===se}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:A}=e,{ex:j,ey:P,ez:k}=this,U=u(j*j),z=u(P*P),G=u(hy*u(k*k)),Q=u(A*U),Y=j+P,Z=u(u(Y*Y)-U-z),se=Q+z,Pe=se-G,Oe=Q-z,De=u(Z*Pe),Ke=u(se*Oe),Zt=u(Z*Oe),Is=u(Pe*se);return new v(De,Ke,Is,Zt)}add(A){w(A);const{a:j,d:P}=e,{ex:k,ey:U,ez:z,et:G}=this,{ex:Q,ey:Y,ez:Z,et:se}=A;if(j===BigInt(-1)){const Ht=u((U-k)*(Y+Q)),Ut=u((U+k)*(Y-Q)),Zn=u(Ut-Ht);if(Zn===Zs)return this.double();const Wc=u(z*hy*se),ea=u(G*hy*Z),ta=ea+Wc,Dn=Ut+Ht,Nr=ea-Wc,na=u(ta*Zn),Uh=u(Dn*Nr),ra=u(ta*Nr),Cm=u(Zn*Dn);return new v(na,Uh,Cm,ra)}const Pe=u(k*Q),Oe=u(U*Y),De=u(G*P*se),Ke=u(z*Z),Zt=u((k+U)*(Q+Y)-Pe-Oe),Is=Ke-De,it=Ke+De,Le=u(Oe-j*Pe),Dt=u(Zt*Is),jt=u(it*Le),pr=u(Zt*Le),ss=u(Is*it);return new v(Dt,jt,ss,pr)}subtract(A){return this.add(A.negate())}wNAF(A){return x.wNAFCached(this,A,v.normalizeZ)}multiply(A){const j=A;of("scalar",j,$r,r);const{p:P,f:k}=this.wNAF(j);return v.normalizeZ([P,k])[0]}multiplyUnsafe(A,j=v.ZERO){const P=A;return of("scalar",P,Zs,r),P===Zs?E:this.is0()||P===$r?this:x.wNAFCachedUnsafe(this,P,v.normalizeZ,j)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return x.unsafeLadder(this,r).is0()}toAffine(A){return y(this,A)}clearCofactor(){const{h:A}=e;return A===$r?this:this.multiplyUnsafe(A)}static fromHex(A,j=!1){const{d:P,a:k}=e,U=n.BYTES;A=po("pointHex",A,U),O1("zip215",j);const z=A.slice(),G=A[U-1];z[U-1]=G&-129;const Q=sw(z),Y=j?l:n.ORDER;of("pointHex.y",Q,Zs,Y);const Z=u(Q*Q),se=u(Z-$r),Pe=u(P*Z-k);let{isValid:Oe,value:De}=h(se,Pe);if(!Oe)throw new Error("Point.fromHex: invalid y coordinate");const Ke=(De&$r)===$r,Zt=(G&128)!==0;if(!j&&De===Zs&&Zt)throw new Error("Point.fromHex: x=0 and x_0=1");return Zt!==Ke&&(De=u(-De)),v.fromAffine({x:De,y:Q})}static fromPrivateKey(A){return C(A).point}toRawBytes(){const{x:A,y:j}=this.toAffine(),P=OC(j,n.BYTES);return P[P.length-1]|=A&$r?128:0,P}toHex(){return RA(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,$r,u(e.Gx*e.Gy)),v.ZERO=new v(Zs,$r,$r,Zs);const{BASE:_,ZERO:E}=v,x=rre(v,a*8);function S(I){return bn(I,r)}function T(I){return S(sw(I))}function C(I){const A=n.BYTES;I=po("private key",I,A);const j=po("hashed private key",i(I),2*A),P=f(j.slice(0,A)),k=j.slice(A,2*A),U=T(P),z=_.multiply(U),G=z.toRawBytes();return{head:P,prefix:k,scalar:U,point:z,pointBytes:G}}function O(I){return C(I).pointBytes}function R(I=new Uint8Array,...A){const j=YN(...A);return T(i(p(j,po("context",I),!!s)))}function F(I,A,j={}){I=po("message",I),s&&(I=s(I));const{prefix:P,scalar:k,pointBytes:U}=C(A),z=R(j.context,P,I),G=_.multiply(z).toRawBytes(),Q=R(j.context,G,U,I),Y=S(z+Q*k);of("signature.s",Y,Zs,r);const Z=YN(G,OC(Y,n.BYTES));return po("result",Z,n.BYTES*2)}const q=are;function B(I,A,j,P=q){const{context:k,zip215:U}=P,z=n.BYTES;I=po("signature",I,2*z),A=po("message",A),j=po("publicKey",j,z),U!==void 0&&O1("zip215",U),s&&(A=s(A));const G=sw(I.slice(z,2*z));let Q,Y,Z;try{Q=v.fromHex(j,U),Y=v.fromHex(I.slice(0,z),U),Z=_.multiplyUnsafe(G)}catch{return!1}if(!U&&Q.isSmallOrder())return!1;const se=R(k,Y.toRawBytes(),Q.toRawBytes(),A);return Y.add(Q.multiplyUnsafe(se)).subtract(Z).clearCofactor().equals(v.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:F,verify:B,ExtendedPoint:v,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,A=v.BASE){return A._setWindowSize(I),A.multiply(BigInt(3)),A}}}}BigInt(0),BigInt(1);const DA=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),tP=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ure=BigInt(1),nP=BigInt(2);BigInt(3);const dre=BigInt(5),hre=BigInt(8);function fre(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=DA,o=t*t%i*t%i,a=Oi(o,nP,i)*o%i,c=Oi(a,ure,i)*t%i,l=Oi(c,dre,i)*c%i,u=Oi(l,e,i)*l%i,d=Oi(u,n,i)*u%i,h=Oi(d,r,i)*d%i,f=Oi(h,s,i)*h%i,p=Oi(f,s,i)*h%i,g=Oi(p,e,i)*l%i;return{pow_p_5_8:Oi(g,nP,i)*t%i,b2:o}}function pre(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function gre(t,e){const n=DA,r=bn(e*e*e,n),s=bn(r*r*e,n),i=fre(t*s).pow_p_5_8;let o=bn(t*r*i,n);const a=bn(e*o*o,n),c=o,l=bn(o*tP,n),u=a===t,d=a===bn(-t,n),h=a===bn(-t*tP,n);return u&&(o=c),(d||h)&&(o=l),Jne(o,n)&&(o=bn(-o,n)),{isValid:u||d,value:o}}const mre=T6(DA,void 0,!0),yre={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:mre,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:hre,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Lne,randomBytes:E6,adjustScalarBytes:pre,uvRatio:gre},k6=lre(yre),wre="EdDSA",vre="JWT",n0=".",Cv="base64url",O6="utf8",R6="utf8",bre=":",Ere="did",_re="key",rP="base58btc",Cre="z",xre="K36",Sre=32;function jA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function $6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?jA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function D6(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=$6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return jA(n)}function Are(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,_=new Uint8Array(v);y!==b;){for(var E=p[y],x=0,S=v-1;(E!==0||x<w)&&S!==-1;S--,x++)E+=256*_[S]>>>0,_[S]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=x,y++}for(var T=v-w;T!==v&&_[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(_[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var E=0,x=b-1;(_!==0||E<y)&&x!==-1;x--,E++)_+=a*v[x]>>>0,v[x]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var S=b-y;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(w+(b-S)),C=w;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Ire=Are,Tre=Ire;const j6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Nre=t=>new TextEncoder().encode(t),Pre=t=>new TextDecoder().decode(t);let kre=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ore=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return U6(this,e)}},Rre=class{constructor(e){this.decoders=e}or(e){return U6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const U6=(t,e)=>new Rre({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let $re=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new kre(e,n,r),this.decoder=new Ore(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const xv=({name:t,prefix:e,encode:n,decode:r})=>new $re(t,e,n,r),um=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Tre(n,e);return xv({prefix:t,name:e,encode:r,decode:i=>j6(s(i))})},Dre=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},jre=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Yn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>xv({prefix:e,name:t,encode(s){return jre(s,r,n)},decode(s){return Dre(s,r,n,t)}}),Ure=xv({prefix:"\0",name:"identity",encode:t=>Pre(t),decode:t=>Nre(t)});var Lre=Object.freeze({__proto__:null,identity:Ure});const Mre=Yn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Bre=Object.freeze({__proto__:null,base2:Mre});const Fre=Yn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var zre=Object.freeze({__proto__:null,base8:Fre});const Wre=um({prefix:"9",name:"base10",alphabet:"0123456789"});var qre=Object.freeze({__proto__:null,base10:Wre});const Hre=Yn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Vre=Yn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Gre=Object.freeze({__proto__:null,base16:Hre,base16upper:Vre});const Kre=Yn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Yre=Yn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Jre=Yn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qre=Yn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Zre=Yn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xre=Yn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ese=Yn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tse=Yn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),nse=Yn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var rse=Object.freeze({__proto__:null,base32:Kre,base32upper:Yre,base32pad:Jre,base32padupper:Qre,base32hex:Zre,base32hexupper:Xre,base32hexpad:ese,base32hexpadupper:tse,base32z:nse});const sse=um({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ise=um({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ose=Object.freeze({__proto__:null,base36:sse,base36upper:ise});const ase=um({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),cse=um({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var lse=Object.freeze({__proto__:null,base58btc:ase,base58flickr:cse});const use=Yn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dse=Yn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),hse=Yn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),fse=Yn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var pse=Object.freeze({__proto__:null,base64:use,base64pad:dse,base64url:hse,base64urlpad:fse});const L6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),gse=L6.reduce((t,e,n)=>(t[n]=e,t),[]),mse=L6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function yse(t){return t.reduce((e,n)=>(e+=gse[n],e),"")}function wse(t){const e=[];for(const n of t){const r=mse[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const vse=xv({prefix:"🚀",name:"base256emoji",encode:yse,decode:wse});var bse=Object.freeze({__proto__:null,base256emoji:vse}),Ese=M6,sP=128,_se=-128,Cse=Math.pow(2,31);function M6(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Cse;)e[n++]=t&255|sP,t/=128;for(;t&_se;)e[n++]=t&255|sP,t>>>=7;return e[n]=t|0,M6.bytes=n-r+1,e}var xse=$C,Sse=128,iP=127;function $C(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw $C.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&iP)<<s:(o&iP)*Math.pow(2,s),s+=7}while(o>=Sse);return $C.bytes=i-r,n}var Ase=Math.pow(2,7),Ise=Math.pow(2,14),Tse=Math.pow(2,21),Nse=Math.pow(2,28),Pse=Math.pow(2,35),kse=Math.pow(2,42),Ose=Math.pow(2,49),Rse=Math.pow(2,56),$se=Math.pow(2,63),Dse=function(t){return t<Ase?1:t<Ise?2:t<Tse?3:t<Nse?4:t<Pse?5:t<kse?6:t<Ose?7:t<Rse?8:t<$se?9:10},jse={encode:Ese,decode:xse,encodingLength:Dse},B6=jse;const oP=(t,e,n=0)=>(B6.encode(t,e,n),e),aP=t=>B6.encodingLength(t),DC=(t,e)=>{const n=e.byteLength,r=aP(t),s=r+aP(n),i=new Uint8Array(s+n);return oP(t,i,0),oP(n,i,r),i.set(e,s),new Use(t,n,e,i)};let Use=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const F6=({name:t,code:e,encode:n})=>new Lse(t,e,n);let Lse=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?DC(this.code,n):n.then(r=>DC(this.code,r))}else throw Error("Unknown type, must be binary type")}};const z6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Mse=F6({name:"sha2-256",code:18,encode:z6("SHA-256")}),Bse=F6({name:"sha2-512",code:19,encode:z6("SHA-512")});var Fse=Object.freeze({__proto__:null,sha256:Mse,sha512:Bse});const W6=0,zse="identity",q6=j6,Wse=t=>DC(W6,q6(t)),qse={code:W6,name:zse,encode:q6,digest:Wse};var Hse=Object.freeze({__proto__:null,identity:qse});new TextEncoder,new TextDecoder;const cP={...Lre,...Bre,...zre,...qre,...Gre,...rse,...ose,...lse,...pse,...bse};({...Fse,...Hse});function H6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const lP=H6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),L1=H6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=$6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),V6={utf8:lP,"utf-8":lP,hex:cP.base16,latin1:L1,ascii:L1,binary:L1,...cP};function Sv(t,e="utf8"){const n=V6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function xh(t,e="utf8"){const n=V6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?jA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function uP(t){return Ql(Sv(xh(t,Cv),O6))}function r0(t){return Sv(xh(Ko(t),O6),Cv)}function G6(t){const e=xh(xre,rP),n=Cre+Sv(D6([e,t]),rP);return[Ere,_re,n].join(bre)}function Vse(t){return Sv(t,Cv)}function Gse(t){return xh(t,Cv)}function Kse(t){return xh([r0(t.header),r0(t.payload)].join(n0),R6)}function Yse(t){return[r0(t.header),r0(t.payload),Vse(t.signature)].join(n0)}function jC(t){const e=t.split(n0),n=uP(e[0]),r=uP(e[1]),s=Gse(e[2]),i=xh(e.slice(0,2).join(n0),R6);return{header:n,payload:r,signature:s,data:i}}function dP(t=E6(Sre)){const e=k6.getPublicKey(t);return{secretKey:D6([t,e]),publicKey:e}}async function Jse(t,e,n,r,s=oe.fromMiliseconds(Date.now())){const i={alg:wre,typ:vre},o=G6(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=Kse({header:i,payload:c}),u=k6.sign(l,r.secretKey.slice(0,32));return Yse({header:i,payload:c,signature:u})}var hP=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Qse=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Zse=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Xse=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),eie=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),tie=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),nie=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,rie=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,fP=3,sie=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",nie]],pP=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function iie(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new tie:typeof navigator<"u"?aie(navigator.userAgent):lie()}function oie(t){return t!==""&&sie.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function aie(t){var e=oie(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new eie;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<fP&&(s=hP(hP([],s,!0),uie(fP-s.length),!0)):s=[];var i=s.join("."),o=cie(t),a=rie.exec(t);return a&&a[1]?new Xse(n,i,o,a[1]):new Qse(n,i,o)}function cie(t){for(var e=0,n=pP.length;e<n;e++){var r=pP[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function lie(){var t=typeof process<"u"&&process.version;return t?new Zse(process.version.slice(1)):null}function uie(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.getLocalStorage=Ot.getLocalStorageOrThrow=Ot.getCrypto=Ot.getCryptoOrThrow=K6=Ot.getLocation=Ot.getLocationOrThrow=UA=Ot.getNavigator=Ot.getNavigatorOrThrow=Zl=Ot.getDocument=Ot.getDocumentOrThrow=Ot.getFromWindowOrThrow=Ot.getFromWindow=void 0;function yu(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ot.getFromWindow=yu;function Sh(t){const e=yu(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ot.getFromWindowOrThrow=Sh;function die(){return Sh("document")}Ot.getDocumentOrThrow=die;function hie(){return yu("document")}var Zl=Ot.getDocument=hie;function fie(){return Sh("navigator")}Ot.getNavigatorOrThrow=fie;function pie(){return yu("navigator")}var UA=Ot.getNavigator=pie;function gie(){return Sh("location")}Ot.getLocationOrThrow=gie;function mie(){return yu("location")}var K6=Ot.getLocation=mie;function yie(){return Sh("crypto")}Ot.getCryptoOrThrow=yie;function wie(){return yu("crypto")}Ot.getCrypto=wie;function vie(){return Sh("localStorage")}Ot.getLocalStorageOrThrow=vie;function bie(){return yu("localStorage")}Ot.getLocalStorage=bie;var LA={};Object.defineProperty(LA,"__esModule",{value:!0});var Y6=LA.getWindowMetadata=void 0;const gP=Ot;function Eie(){let t,e;try{t=gP.getDocumentOrThrow(),e=gP.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");y+=v+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}Y6=LA.getWindowMetadata=Eie;function pg(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function UC(t){return pg(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const J6="2.31.0";let af={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${J6}`};class Xl extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Xl?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Xl&&n.cause.docsPath||n.docsPath,i=(a=af.getDocsUrl)==null?void 0:a.call(af,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...af.version?[`Version: ${af.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=J6}walk(e){return Q6(this,e)}}function Q6(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Q6(t.cause,e):e?null:t}class Z6 extends Xl{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Ah(t,{dir:e,size:n=32}={}){return typeof t=="string"?_ie(t,{dir:e,size:n}):Cie(t,{dir:e,size:n})}function _ie(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Z6({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Cie(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Z6({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class xie extends Xl{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Sie extends Xl{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Ih(t,{size:e}){if(UC(t)>e)throw new Sie({givenSize:UC(t),maxSize:e})}function LC(t,e={}){const{signed:n}=e;e.size&&Ih(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Aie(t,e={}){return Number(LC(t,e))}const Iie=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function MC(t,e={}){return typeof t=="number"||typeof t=="bigint"?e4(t,e):typeof t=="string"?Pie(t,e):typeof t=="boolean"?Tie(t,e):X6(t,e)}function Tie(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ih(n,{size:e.size}),Ah(n,{size:e.size})):n}function X6(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Iie[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ih(r,{size:e.size}),Ah(r,{dir:"right",size:e.size})):r}function e4(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new xie({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ah(a,{size:r}):a}const Nie=new TextEncoder;function Pie(t,e={}){const n=Nie.encode(t);return X6(n,e)}const kie=new TextEncoder;function Oie(t,e={}){return typeof t=="number"||typeof t=="bigint"?$ie(t,e):typeof t=="boolean"?Rie(t,e):pg(t)?t4(t,e):n4(t,e)}function Rie(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ih(n,{size:e.size}),Ah(n,{size:e.size})):n}const go={zero:48,nine:57,A:65,F:70,a:97,f:102};function mP(t){if(t>=go.zero&&t<=go.nine)return t-go.zero;if(t>=go.A&&t<=go.F)return t-(go.A-10);if(t>=go.a&&t<=go.f)return t-(go.a-10)}function t4(t,e={}){let n=t;e.size&&(Ih(n,{size:e.size}),n=Ah(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=mP(r.charCodeAt(a++)),l=mP(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Xl(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function $ie(t,e){const n=e4(t,e);return t4(n)}function n4(t,e={}){const n=kie.encode(t);return typeof e.size=="number"?(Ih(n,{size:e.size}),Ah(n,{dir:"right",size:e.size})):n}function r4(t,e){const n=e||"hex",r=OS(pg(t,{strict:!1})?Oie(t):t);return n==="bytes"?r:MC(r)}class Die extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const M1=new Die(8192);function jie(t,e){if(M1.has(`${t}.${e}`))return M1.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=r4(n4(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return M1.set(`${t}.${e}`,i),i}function Uie(t){const e=r4(`0x${t.substring(4)}`).substring(26);return jie(`0x${e}`)}async function Lie({hash:t,signature:e}){const n=pg(t)?t:MC(t),{secp256k1:r}=await on(async()=>{const{secp256k1:o}=await import("./secp256k1-CYKgVjA5.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=yP(f);return new r.Signature(LC(l),LC(u)).addRecoveryBit(p)}const o=pg(e)?e:MC(e);if(UC(o)!==65)throw new Error("invalid signature length");const a=Aie(`0x${o.slice(130)}`),c=yP(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function yP(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Mie({hash:t,signature:e}){return Uie(await Lie({hash:t,signature:e}))}function Bie(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let _=p-1;(b!==0||v<d)&&_!==-1;_--,v++)b+=256*g[_]>>>0,g[_]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let _=0;for(let E=f-1;(v!==0||_<h)&&E!==-1;E--,_++)v+=n*p[E]>>>0,p[E]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=_,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Fie="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Th=Bie(Fie);function zie(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function Wie(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const qie=new TextEncoder,Hie=50;function Vie(t,e,n){qie.encodeInto(t,e.subarray(n))}function Gie(t,e,n){t.length>Hie?Vie(t,e,n):Wie(t,e,n)}const Kie=4096;function s4(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=Kie&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const Yie=new TextDecoder,Jie=200;function Qie(t,e,n){const r=t.subarray(e,e+n);return Yie.decode(r)}function Zie(t,e,n){return n>Jie?Qie(t,e,n):s4(t,e,n)}class fy{constructor(e,n){this.type=e,this.data=n}}class hs extends Error{constructor(e){super(e);const n=Object.create(hs.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:hs.name})}}const cf=4294967295;function Xie(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function i4(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function o4(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function eoe(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const toe=-1,noe=4294967296-1,roe=17179869184-1;function soe({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=roe)if(e===0&&t<=noe){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),i4(r,4,t),n}}function ioe(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function ooe(t){if(t instanceof Date){const e=ioe(t);return soe(e)}else return null}function aoe(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=o4(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new hs(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function coe(t){const e=aoe(t);return new Date(e.sec*1e3+e.nsec/1e6)}const loe={type:toe,encode:ooe,decode:coe};class s0{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(loe)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new fy(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new fy(o,i)}}}return e instanceof fy?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new fy(n,e)}}s0.defaultCodec=new s0;function uoe(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function BC(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):uoe(t)?new Uint8Array(t):Uint8Array.from(t)}const doe=100,hoe=2048;let foe=class a4{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??s0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??doe,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??hoe,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new a4({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=zie(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Gie(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=BC(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),Xie(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),i4(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function poe(t,e){return new foe(e).encodeSharedRef(t)}function B1(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const goe=16,moe=16;class yoe{constructor(e=goe,n=moe){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=s4(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const FC="array",tp="map_key",c4="map_value",woe=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new hs("The type of key must be string or number but "+typeof t)};class voe{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=FC,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=tp,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===FC){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===tp||e.type===c4){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const lf=-1,MA=new DataView(new ArrayBuffer(0)),boe=new Uint8Array(MA.buffer);try{MA.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const wP=new RangeError("Insufficient data"),Eoe=new yoe;let _oe=class l4{constructor(e){this.totalPos=0,this.pos=0,this.view=MA,this.bytes=boe,this.headByte=lf,this.stack=new voe,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??s0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??cf,this.maxBinLength=(e==null?void 0:e.maxBinLength)??cf,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??cf,this.maxMapLength=(e==null?void 0:e.maxMapLength)??cf,this.maxExtLength=(e==null?void 0:e.maxExtLength)??cf,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:Eoe,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??woe}clone(){return new l4({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=lf,this.stack.reset()}setBuffer(e){const n=BC(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===lf&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=BC(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${B1(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new hs(`Unrecognized type byte: ${B1(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===FC)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===tp){if(n==="__proto__")throw new hs("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=c4;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=tp;continue e}}return n}}readHeadByte(){return this.headByte===lf&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=lf}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new hs(`Unrecognized array type byte: ${B1(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new hs(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new hs(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new hs(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw wP;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=Zie(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===tp:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new hs(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw wP;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new hs(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=eoe(this.view,this.pos);return this.pos+=8,e}readI64(){const e=o4(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function Coe(t,e){return new _oe(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xoe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function u4(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function i0(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function BA(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function zC(t){if(!Array.isArray(t))throw new Error("array expected")}function o0(t,e){if(!u4(!0,e))throw new Error(`${t}: array of strings expected`)}function Soe(t,e){if(!u4(!1,e))throw new Error(`${t}: array of numbers expected`)}function Aoe(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function Ioe(t){const e=typeof t=="string"?t.split(""):t,n=e.length;o0("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(zC(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(zC(s),s.map(i=>{i0("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function Toe(t=""){return i0("join",t),{encode:e=>(o0("join.decode",e),e.join(t)),decode:e=>(i0("join.decode",e),e.split(t))}}function Noe(t,e="="){return BA(t),i0("padding",e),{encode(n){for(o0("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){o0("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const d4=(t,e)=>e===0?t:d4(e,t%e),a0=(t,e)=>t+(e-d4(t,e)),F1=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function vP(t,e,n,r){if(zC(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(a0(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${a0(e,n)}`);let s=0,i=0;const o=F1[e],a=F1[n]-1,c=[];for(const l of t){if(BA(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=F1[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function Poe(t,e=!1){if(BA(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(a0(8,t)>32||a0(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!xoe(n))throw new Error("radix2.encode input should be Uint8Array");return vP(Array.from(n),8,t,!e)},decode:n=>(Soe("radix2.decode",n),Uint8Array.from(vP(n,t,8,e)))}}const koe=Aoe(Poe(5),Ioe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Noe(5),Toe(""));function FA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function h4(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?FA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function np(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=h4(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return FA(n)}function Ooe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,_=new Uint8Array(v);y!==b;){for(var E=p[y],x=0,S=v-1;(E!==0||x<w)&&S!==-1;S--,x++)E+=256*_[S]>>>0,_[S]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=x,y++}for(var T=v-w;T!==v&&_[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(_[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var E=0,x=b-1;(_!==0||E<y)&&x!==-1;x--,E++)_+=a*v[x]>>>0,v[x]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var S=b-y;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(w+(b-S)),C=w;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Roe=Ooe,$oe=Roe;const Doe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},joe=t=>new TextEncoder().encode(t),Uoe=t=>new TextDecoder().decode(t);class Loe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Moe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return f4(this,e)}}class Boe{constructor(e){this.decoders=e}or(e){return f4(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const f4=(t,e)=>new Boe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Foe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Loe(e,n,r),this.decoder=new Moe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Av=({name:t,prefix:e,encode:n,decode:r})=>new Foe(t,e,n,r),dm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=$oe(n,e);return Av({prefix:t,name:e,encode:r,decode:i=>Doe(s(i))})},zoe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Woe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Jn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Av({prefix:e,name:t,encode(s){return Woe(s,r,n)},decode(s){return zoe(s,r,n,t)}}),qoe=Av({prefix:"\0",name:"identity",encode:t=>Uoe(t),decode:t=>joe(t)}),Hoe=Object.freeze(Object.defineProperty({__proto__:null,identity:qoe},Symbol.toStringTag,{value:"Module"})),Voe=Jn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Goe=Object.freeze(Object.defineProperty({__proto__:null,base2:Voe},Symbol.toStringTag,{value:"Module"})),Koe=Jn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Yoe=Object.freeze(Object.defineProperty({__proto__:null,base8:Koe},Symbol.toStringTag,{value:"Module"})),Joe=dm({prefix:"9",name:"base10",alphabet:"0123456789"}),Qoe=Object.freeze(Object.defineProperty({__proto__:null,base10:Joe},Symbol.toStringTag,{value:"Module"})),Zoe=Jn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Xoe=Jn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),eae=Object.freeze(Object.defineProperty({__proto__:null,base16:Zoe,base16upper:Xoe},Symbol.toStringTag,{value:"Module"})),tae=Jn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nae=Jn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rae=Jn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sae=Jn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),iae=Jn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),oae=Jn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),aae=Jn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cae=Jn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lae=Jn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),uae=Object.freeze(Object.defineProperty({__proto__:null,base32:tae,base32hex:iae,base32hexpad:aae,base32hexpadupper:cae,base32hexupper:oae,base32pad:rae,base32padupper:sae,base32upper:nae,base32z:lae},Symbol.toStringTag,{value:"Module"})),dae=dm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),hae=dm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),fae=Object.freeze(Object.defineProperty({__proto__:null,base36:dae,base36upper:hae},Symbol.toStringTag,{value:"Module"})),pae=dm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gae=dm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),mae=Object.freeze(Object.defineProperty({__proto__:null,base58btc:pae,base58flickr:gae},Symbol.toStringTag,{value:"Module"})),yae=Jn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wae=Jn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vae=Jn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bae=Jn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Eae=Object.freeze(Object.defineProperty({__proto__:null,base64:yae,base64pad:wae,base64url:vae,base64urlpad:bae},Symbol.toStringTag,{value:"Module"})),p4=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),_ae=p4.reduce((t,e,n)=>(t[n]=e,t),[]),Cae=p4.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function xae(t){return t.reduce((e,n)=>(e+=_ae[n],e),"")}function Sae(t){const e=[];for(const n of t){const r=Cae[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Aae=Av({prefix:"🚀",name:"base256emoji",encode:xae,decode:Sae}),Iae=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Aae},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bP={...Hoe,...Goe,...Yoe,...Qoe,...eae,...uae,...fae,...mae,...Eae,...Iae};function g4(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const EP=g4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),z1=g4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=h4(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),m4={utf8:EP,"utf-8":EP,hex:bP.base16,latin1:z1,ascii:z1,binary:z1,...bP};function Fs(t,e="utf8"){const n=m4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?FA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ts(t,e="utf8"){const n=m4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const Tae={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Nae="Input must be an string, Buffer or Uint8Array";function Pae(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(Nae);return e}function kae(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function py(t){return(4294967296+t).toString(16).substring(1)}function Oae(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=py(e[s]).toUpperCase(),r+=" ",r+=py(e[s+1]).toUpperCase();else if(n===64)r+=py(e[s+1]).toUpperCase(),r+=py(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function Rae(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var y4={normalizeInput:Pae,toHex:kae,debugPrint:Oae,testSpeed:Rae};const iw=y4;function gy(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function _P(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function w4(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function ga(t,e,n,r,s,i){const o=$f[s],a=$f[s+1],c=$f[i],l=$f[i+1];gy(Fe,t,e),_P(Fe,t,o,a);let u=Fe[r]^Fe[t],d=Fe[r+1]^Fe[t+1];Fe[r]=d,Fe[r+1]=u,gy(Fe,n,r),u=Fe[e]^Fe[n],d=Fe[e+1]^Fe[n+1],Fe[e]=u>>>24^d<<8,Fe[e+1]=d>>>24^u<<8,gy(Fe,t,e),_P(Fe,t,c,l),u=Fe[r]^Fe[t],d=Fe[r+1]^Fe[t+1],Fe[r]=u>>>16^d<<16,Fe[r+1]=d>>>16^u<<16,gy(Fe,n,r),u=Fe[e]^Fe[n],d=Fe[e+1]^Fe[n+1],Fe[e]=d>>>31^u<<1,Fe[e+1]=u>>>31^d<<1}const v4=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),$ae=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],nr=new Uint8Array($ae.map(function(t){return t*2})),Fe=new Uint32Array(32),$f=new Uint32Array(32);function b4(t,e){let n=0;for(n=0;n<16;n++)Fe[n]=t.h[n],Fe[n+16]=v4[n];for(Fe[24]=Fe[24]^t.t,Fe[25]=Fe[25]^t.t/4294967296,e&&(Fe[28]=~Fe[28],Fe[29]=~Fe[29]),n=0;n<32;n++)$f[n]=w4(t.b,4*n);for(n=0;n<12;n++)ga(0,8,16,24,nr[n*16+0],nr[n*16+1]),ga(2,10,18,26,nr[n*16+2],nr[n*16+3]),ga(4,12,20,28,nr[n*16+4],nr[n*16+5]),ga(6,14,22,30,nr[n*16+6],nr[n*16+7]),ga(0,10,20,30,nr[n*16+8],nr[n*16+9]),ga(2,12,22,24,nr[n*16+10],nr[n*16+11]),ga(4,14,16,26,nr[n*16+12],nr[n*16+13]),ga(6,8,18,28,nr[n*16+14],nr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^Fe[n]^Fe[n+16]}const ma=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function E4(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};ma.fill(0),ma[0]=t,e&&(ma[1]=e.length),ma[2]=1,ma[3]=1,n&&ma.set(n,32),r&&ma.set(r,48);for(let i=0;i<16;i++)s.h[i]=v4[i]^w4(ma,i*4);return e&&(zA(s,e),s.c=128),s}function zA(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,b4(t,!1),t.c=0),t.b[t.c++]=e[n]}function _4(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;b4(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function C4(t,e,n,r,s){n=n||64,t=iw.normalizeInput(t),r&&(r=iw.normalizeInput(r)),s&&(s=iw.normalizeInput(s));const i=E4(n,e,r,s);return zA(i,t),_4(i)}function Dae(t,e,n,r,s){const i=C4(t,e,n,r,s);return iw.toHex(i)}var jae={blake2b:C4,blake2bHex:Dae,blake2bInit:E4,blake2bUpdate:zA,blake2bFinal:_4};const x4=y4;function Uae(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function ya(t,e,n,r,s,i){lt[t]=lt[t]+lt[e]+s,lt[r]=my(lt[r]^lt[t],16),lt[n]=lt[n]+lt[r],lt[e]=my(lt[e]^lt[n],12),lt[t]=lt[t]+lt[e]+i,lt[r]=my(lt[r]^lt[t],8),lt[n]=lt[n]+lt[r],lt[e]=my(lt[e]^lt[n],7)}function my(t,e){return t>>>e^t<<32-e}const S4=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),lt=new Uint32Array(16),Un=new Uint32Array(16);function A4(t,e){let n=0;for(n=0;n<8;n++)lt[n]=t.h[n],lt[n+8]=S4[n];for(lt[12]^=t.t,lt[13]^=t.t/4294967296,e&&(lt[14]=~lt[14]),n=0;n<16;n++)Un[n]=Uae(t.b,4*n);for(n=0;n<10;n++)ya(0,4,8,12,Un[rr[n*16+0]],Un[rr[n*16+1]]),ya(1,5,9,13,Un[rr[n*16+2]],Un[rr[n*16+3]]),ya(2,6,10,14,Un[rr[n*16+4]],Un[rr[n*16+5]]),ya(3,7,11,15,Un[rr[n*16+6]],Un[rr[n*16+7]]),ya(0,5,10,15,Un[rr[n*16+8]],Un[rr[n*16+9]]),ya(1,6,11,12,Un[rr[n*16+10]],Un[rr[n*16+11]]),ya(2,7,8,13,Un[rr[n*16+12]],Un[rr[n*16+13]]),ya(3,4,9,14,Un[rr[n*16+14]],Un[rr[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=lt[n]^lt[n+8]}function I4(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(S4),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(WA(r,e),r.c=64),r}function WA(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,A4(t,!1),t.c=0),t.b[t.c++]=e[n]}function T4(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;A4(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function N4(t,e,n){n=n||32,t=x4.normalizeInput(t);const r=I4(n,e);return WA(r,t),T4(r)}function Lae(t,e,n){const r=N4(t,e,n);return x4.toHex(r)}var Mae={blake2s:N4,blake2sHex:Lae,blake2sInit:I4,blake2sUpdate:WA,blake2sFinal:T4};const uf=jae,df=Mae;var Bae={blake2b:uf.blake2b,blake2bHex:uf.blake2bHex,blake2bInit:uf.blake2bInit,blake2bUpdate:uf.blake2bUpdate,blake2bFinal:uf.blake2bFinal,blake2s:df.blake2s,blake2sHex:df.blake2sHex,blake2sInit:df.blake2sInit,blake2sUpdate:df.blake2sUpdate,blake2sFinal:df.blake2sFinal},Fae={};const zae=":";function Td(t){const[e,n]=t.split(zae);return{namespace:e,reference:n}}function P4(t,e){return t.includes(":")?[t]:e.chains||[]}var Wae=Object.defineProperty,qae=Object.defineProperties,Hae=Object.getOwnPropertyDescriptors,CP=Object.getOwnPropertySymbols,Vae=Object.prototype.hasOwnProperty,Gae=Object.prototype.propertyIsEnumerable,xP=(t,e,n)=>e in t?Wae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SP=(t,e)=>{for(var n in e||(e={}))Vae.call(e,n)&&xP(t,n,e[n]);if(CP)for(var n of CP(e))Gae.call(e,n)&&xP(t,n,e[n]);return t},Kae=(t,e)=>qae(t,Hae(e));const Yae="ReactNative",gs={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Jae="js";function c0(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Fc(){return!Zl()&&!!UA()&&navigator.product===Yae}function Qae(){return Fc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Zae(){return Fc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Nh(){return!c0()&&!!UA()&&!!Zl()}function hm(){return Fc()?gs.reactNative:c0()?gs.node:Nh()?gs.browser:gs.unknown}function AP(){var t;try{return Fc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Xae(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function ece(t){var e,n;const r=k4();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Kae(SP(SP({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function k4(){return Y6()||{name:"",description:"",url:"",icons:[""]}}function tce(){if(hm()===gs.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=iie();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function nce(){var t;const e=hm();return e===gs.browser?[e,((t=K6())==null?void 0:t.host)||"unknown"].join(":"):e}function O4(t,e,n){const r=tce(),s=nce();return[[t,e].join("-"),[Jae,n].join("-"),r,s].join("/")}function rce({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=O4(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=Xae(l[1]||"",d);return l[0]+"?"+h}function gl(t,e){return t.filter(n=>e.includes(n)).length===t.length}function WC(t){return Object.fromEntries(t.entries())}function qC(t){return new Map(Object.entries(t))}function nl(t=oe.FIVE_MINUTES,e){const n=oe.toMiliseconds(t||oe.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function rc(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function R4(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function sce(t){return R4("topic",t)}function ice(t){return R4("id",t)}function $4(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function yn(t,e){return oe.fromMiliseconds(Date.now()+oe.toMiliseconds(t))}function Oa(t){return Date.now()>=oe.toMiliseconds(t)}function pt(t,e){return`${t}${e?`:${e}`:""}`}function eo(t=[],e=[]){return[...new Set([...t,...e])]}async function oce({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=ace(i,t,e),a=hm();if(a===gs.browser){if(!((r=Zl())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}cce(o)}else a===gs.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function ace(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${hce(r,!0)}`}else s=`${s}/wc?${r}`;return s}function cce(t){let e="_self";dce()?e="_top":(uce()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function lce(t,e){let n="";try{if(Nh()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function IP(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function TP(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function qA(){return typeof process<"u"&&Fae.IS_VITEST==="true"}function uce(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function dce(){try{return window.self!==window.top}catch{return!1}}function hce(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function D4(t){return Buffer.from(t,"base64").toString("utf-8")}function fce(t){return new Promise(e=>setTimeout(e,t))}const yy=BigInt(2**32-1),NP=BigInt(32);function j4(t,e=!1){return e?{h:Number(t&yy),l:Number(t>>NP&yy)}:{h:Number(t>>NP&yy)|0,l:Number(t&yy)|0}}function U4(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=j4(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const PP=(t,e,n)=>t>>>n,kP=(t,e,n)=>t<<32-n|e>>>n,Ra=(t,e,n)=>t>>>n|e<<32-n,$a=(t,e,n)=>t<<32-n|e>>>n,Df=(t,e,n)=>t<<64-n|e>>>n-32,jf=(t,e,n)=>t>>>n-32|e<<64-n,pce=(t,e)=>e,gce=(t,e)=>t,mce=(t,e,n)=>t<<n|e>>>32-n,yce=(t,e,n)=>e<<n|t>>>32-n,wce=(t,e,n)=>e<<n-32|t>>>64-n,vce=(t,e,n)=>t<<n-32|e>>>64-n;function oi(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const HA=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),VA=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,bce=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ece=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,_ce=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Cce=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ou=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function GA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Yo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Hs(t,...e){if(!GA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function KA(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Yo(t.outputLen),Yo(t.blockLen)}function Oc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function YA(t,e){Hs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function gg(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Vs(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function W1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ri(t,e){return t<<32-e|t>>>e}const L4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function M4(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const bo=L4?t=>t:t=>M4(t);function xce(t){for(let e=0;e<t.length;e++)t[e]=M4(t[e]);return t}const Da=L4?t=>t:xce,B4=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Sce=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mg(t){if(Hs(t),B4)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Sce[t[n]];return e}const mo={_0:48,_9:57,A:65,F:70,a:97,f:102};function OP(t){if(t>=mo._0&&t<=mo._9)return t-mo._0;if(t>=mo.A&&t<=mo.F)return t-(mo.A-10);if(t>=mo.a&&t<=mo.f)return t-(mo.a-10)}function JA(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(B4)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=OP(t.charCodeAt(i)),a=OP(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Ace(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ei(t){return typeof t=="string"&&(t=Ace(t)),Hs(t),t}function ml(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Hs(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Iv=class{};function fm(t){const e=r=>t().update(Ei(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ice(t){const e=(r,s)=>t(s).update(Ei(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Ph(t=32){if(Ou&&typeof Ou.getRandomValues=="function")return Ou.getRandomValues(new Uint8Array(t));if(Ou&&typeof Ou.randomBytes=="function")return Uint8Array.from(Ou.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Tce=BigInt(0),hf=BigInt(1),Nce=BigInt(2),Pce=BigInt(7),kce=BigInt(256),Oce=BigInt(113),F4=[],z4=[],W4=[];for(let t=0,e=hf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],F4.push(2*(5*r+n)),z4.push((t+1)*(t+2)/2%64);let s=Tce;for(let i=0;i<7;i++)e=(e<<hf^(e>>Pce)*Oce)%kce,e&Nce&&(s^=hf<<(hf<<BigInt(i))-hf);W4.push(s)}const q4=U4(W4,!0),Rce=q4[0],$ce=q4[1],RP=(t,e,n)=>n>32?wce(t,e,n):mce(t,e,n),$P=(t,e,n)=>n>32?vce(t,e,n):yce(t,e,n);function Dce(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=RP(l,u,1)^n[a],h=$P(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=z4[o],c=RP(s,i,a),l=$P(s,i,a),u=F4[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Rce[r],t[1]^=$ce[r]}Vs(n)}let jce=class H4 extends Iv{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Yo(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=gg(this.state)}clone(){return this._cloneInto()}keccak(){Da(this.state32),Dce(this.state32,this.rounds),Da(this.state32),this.posOut=0,this.pos=0}update(e){Oc(this),e=Ei(e),Hs(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Oc(this,!1),Hs(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Yo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(YA(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Vs(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new H4(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Uce=(t,e,n)=>fm(()=>new jce(e,t,n)),Lce=Uce(1,136,256/8);function Mce(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Bce(t,e,n){return t&e^~t&n}function Fce(t,e,n){return t&e^t&n^e&n}let V4=class extends Iv{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=W1(this.buffer)}update(e){Oc(this),e=Ei(e),Hs(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=W1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Oc(this),YA(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Vs(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Mce(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=W1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const wa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ir=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),zce=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),va=new Uint32Array(64);let Wce=class extends V4{constructor(e=32){super(64,e,8,!1),this.A=wa[0]|0,this.B=wa[1]|0,this.C=wa[2]|0,this.D=wa[3]|0,this.E=wa[4]|0,this.F=wa[5]|0,this.G=wa[6]|0,this.H=wa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)va[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=va[d-15],f=va[d-2],p=Ri(h,7)^Ri(h,18)^h>>>3,g=Ri(f,17)^Ri(f,19)^f>>>10;va[d]=g+va[d-7]+p+va[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ri(a,6)^Ri(a,11)^Ri(a,25),f=u+h+Bce(a,c,l)+zce[d]+va[d]|0,p=(Ri(r,2)^Ri(r,13)^Ri(r,22))+Fce(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Vs(va)}destroy(){this.set(0,0,0,0,0,0,0,0),Vs(this.buffer)}};const G4=U4(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),qce=G4[0],Hce=G4[1],ba=new Uint32Array(80),Ea=new Uint32Array(80);let QA=class extends V4{constructor(e=64){super(128,e,16,!1),this.Ah=ir[0]|0,this.Al=ir[1]|0,this.Bh=ir[2]|0,this.Bl=ir[3]|0,this.Ch=ir[4]|0,this.Cl=ir[5]|0,this.Dh=ir[6]|0,this.Dl=ir[7]|0,this.Eh=ir[8]|0,this.El=ir[9]|0,this.Fh=ir[10]|0,this.Fl=ir[11]|0,this.Gh=ir[12]|0,this.Gl=ir[13]|0,this.Hh=ir[14]|0,this.Hl=ir[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)ba[v]=e.getUint32(n),Ea[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const _=ba[v-15]|0,E=Ea[v-15]|0,x=Ra(_,E,1)^Ra(_,E,8)^PP(_,E,7),S=$a(_,E,1)^$a(_,E,8)^kP(_,E,7),T=ba[v-2]|0,C=Ea[v-2]|0,O=Ra(T,C,19)^Df(T,C,61)^PP(T,C,6),R=$a(T,C,19)^jf(T,C,61)^kP(T,C,6),F=bce(S,R,Ea[v-7],Ea[v-16]),q=Ece(F,x,O,ba[v-7],ba[v-16]);ba[v]=q|0,Ea[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const _=Ra(d,h,14)^Ra(d,h,18)^Df(d,h,41),E=$a(d,h,14)^$a(d,h,18)^jf(d,h,41),x=d&f^~d&g,S=h&p^~h&w,T=_ce(b,E,S,Hce[v],Ea[v]),C=Cce(T,y,_,x,qce[v],ba[v]),O=T|0,R=Ra(r,s,28)^Df(r,s,34)^Df(r,s,39),F=$a(r,s,28)^jf(r,s,34)^jf(r,s,39),q=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=oi(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=HA(O,F,B);r=VA(I,C,R,q),s=I|0}({h:r,l:s}=oi(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=oi(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=oi(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=oi(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=oi(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=oi(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=oi(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=oi(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Vs(ba,Ea)}destroy(){Vs(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Vce=class extends QA{constructor(){super(48),this.Ah=sr[0]|0,this.Al=sr[1]|0,this.Bh=sr[2]|0,this.Bl=sr[3]|0,this.Ch=sr[4]|0,this.Cl=sr[5]|0,this.Dh=sr[6]|0,this.Dl=sr[7]|0,this.Eh=sr[8]|0,this.El=sr[9]|0,this.Fh=sr[10]|0,this.Fl=sr[11]|0,this.Gh=sr[12]|0,this.Gl=sr[13]|0,this.Hh=sr[14]|0,this.Hl=sr[15]|0}};const or=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let Gce=class extends QA{constructor(){super(32),this.Ah=or[0]|0,this.Al=or[1]|0,this.Bh=or[2]|0,this.Bl=or[3]|0,this.Ch=or[4]|0,this.Cl=or[5]|0,this.Dh=or[6]|0,this.Dl=or[7]|0,this.Eh=or[8]|0,this.El=or[9]|0,this.Fh=or[10]|0,this.Fl=or[11]|0,this.Gh=or[12]|0,this.Gl=or[13]|0,this.Hh=or[14]|0,this.Hl=or[15]|0}};const Tv=fm(()=>new Wce),Kce=fm(()=>new QA),Yce=fm(()=>new Vce),Jce=fm(()=>new Gce),Qce=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),mn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),pe=new Uint32Array(32);function _a(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=pe[2*t],l=pe[2*t+1],u=pe[2*e],d=pe[2*e+1],h=pe[2*n],f=pe[2*n+1],p=pe[2*r],g=pe[2*r+1],w=HA(c,u,o);l=VA(w,l,d,a),c=w|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:pce(g,p),Dl:gce(g)},{h:f,l:h}=oi(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Ra(d,u,24),Bl:$a(d,u,24)},pe[2*t]=c,pe[2*t+1]=l,pe[2*e]=u,pe[2*e+1]=d,pe[2*n]=h,pe[2*n+1]=f,pe[2*r]=p,pe[2*r+1]=g}function Ca(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=pe[2*t],l=pe[2*t+1],u=pe[2*e],d=pe[2*e+1],h=pe[2*n],f=pe[2*n+1],p=pe[2*r],g=pe[2*r+1],w=HA(c,u,o);l=VA(w,l,d,a),c=w|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Ra(g,p,16),Dl:$a(g,p,16)},{h:f,l:h}=oi(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Df(d,u,63),Bl:jf(d,u,63)},pe[2*t]=c,pe[2*t+1]=l,pe[2*e]=u,pe[2*e+1]=d,pe[2*n]=h,pe[2*n+1]=f,pe[2*r]=p,pe[2*r+1]=g}function Zce(t,e={},n,r,s){if(Yo(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class Xce extends Iv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Yo(e),Yo(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=gg(this.buffer)}update(e){Oc(this),e=Ei(e),Hs(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Da(s),this.compress(s,0,!1),Da(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));Da(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);Da(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Oc(this),YA(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Vs(this.buffer.subarray(n)),Da(r),this.compress(r,0,!0),Da(r);const s=gg(e);this.get().forEach((i,o)=>s[o]=bo(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class ele extends Xce{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=mn[0]|0,this.v0h=mn[1]|0,this.v1l=mn[2]|0,this.v1h=mn[3]|0,this.v2l=mn[4]|0,this.v2h=mn[5]|0,this.v3l=mn[6]|0,this.v3h=mn[7]|0,this.v4l=mn[8]|0,this.v4h=mn[9]|0,this.v5l=mn[10]|0,this.v5h=mn[11]|0,this.v6l=mn[12]|0,this.v6h=mn[13]|0,this.v7l=mn[14]|0,this.v7h=mn[15]|0,Zce(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Ei(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Ei(i);const a=gg(i);this.v4l^=bo(a[0]),this.v4h^=bo(a[1]),this.v5l^=bo(a[2]),this.v5h^=bo(a[3])}if(s!==void 0){s=Ei(s);const a=gg(s);this.v6l^=bo(a[0]),this.v6h^=bo(a[1]),this.v7l^=bo(a[2]),this.v7h^=bo(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=w|0}compress(e,n,r){this.get().forEach((c,l)=>pe[l]=c),pe.set(mn,16);let{h:s,l:i}=j4(BigInt(this.length));pe[24]=mn[8]^i,pe[25]=mn[9]^s,r&&(pe[28]=~pe[28],pe[29]=~pe[29]);let o=0;const a=Qce;for(let c=0;c<12;c++)_a(0,4,8,12,e,n+2*a[o++]),Ca(0,4,8,12,e,n+2*a[o++]),_a(1,5,9,13,e,n+2*a[o++]),Ca(1,5,9,13,e,n+2*a[o++]),_a(2,6,10,14,e,n+2*a[o++]),Ca(2,6,10,14,e,n+2*a[o++]),_a(3,7,11,15,e,n+2*a[o++]),Ca(3,7,11,15,e,n+2*a[o++]),_a(0,5,10,15,e,n+2*a[o++]),Ca(0,5,10,15,e,n+2*a[o++]),_a(1,6,11,12,e,n+2*a[o++]),Ca(1,6,11,12,e,n+2*a[o++]),_a(2,7,8,13,e,n+2*a[o++]),Ca(2,7,8,13,e,n+2*a[o++]),_a(3,4,9,14,e,n+2*a[o++]),Ca(3,4,9,14,e,n+2*a[o++]);this.v0l^=pe[0]^pe[16],this.v0h^=pe[1]^pe[17],this.v1l^=pe[2]^pe[18],this.v1h^=pe[3]^pe[19],this.v2l^=pe[4]^pe[20],this.v2h^=pe[5]^pe[21],this.v3l^=pe[6]^pe[22],this.v3h^=pe[7]^pe[23],this.v4l^=pe[8]^pe[24],this.v4h^=pe[9]^pe[25],this.v5l^=pe[10]^pe[26],this.v5h^=pe[11]^pe[27],this.v6l^=pe[12]^pe[28],this.v6h^=pe[13]^pe[29],this.v7l^=pe[14]^pe[30],this.v7h^=pe[15]^pe[31],Vs(pe)}destroy(){this.destroyed=!0,Vs(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const tle=Ice(t=>new ele(t)),nle="https://rpc.walletconnect.org/v1";function K4(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Lce(n)).toString("hex")}async function rle(t,e,n,r,s,i){switch(n.t){case"eip191":return await sle(t,e,n.s);case"eip1271":return await ile(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function sle(t,e,n){return(await Mie({hash:K4(e),signature:n})).toLowerCase()===t.toLowerCase()}async function ile(t,e,n,r,s,i){const o=Td(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:K4(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||nle}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:ole(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function ole(){return Date.now()+Math.floor(Math.random()*1e3)}function ale(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Th.encode(i)}function cle(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=tle(r,{dkLen:32});return Th.encode(s)}function DP(t){const e=new Uint8Array(Tv(lle(t)));return Th.encode(e)}function lle(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function jP(t){const e=Buffer.from(t,"base64"),n=Coe(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=poe(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=Jce(i);return koe.encode(o).replace(/=+$/,"")}function q1(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function ule(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(q1(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(q1(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(q1(r.length)),s.push(r);const i=Buffer.concat(s),o=Tv(i);return Buffer.from(o).toString("hex").toUpperCase()}var dle=Object.defineProperty,hle=Object.defineProperties,fle=Object.getOwnPropertyDescriptors,UP=Object.getOwnPropertySymbols,ple=Object.prototype.hasOwnProperty,gle=Object.prototype.propertyIsEnumerable,LP=(t,e,n)=>e in t?dle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mle=(t,e)=>{for(var n in e||(e={}))ple.call(e,n)&&LP(t,n,e[n]);if(UP)for(var n of UP(e))gle.call(e,n)&&LP(t,n,e[n]);return t},yle=(t,e)=>hle(t,fle(e));const wle="did:pkh:",ZA=t=>t==null?void 0:t.split(":"),vle=t=>{const e=t&&ZA(t);if(e)return t.includes(wle)?e[3]:e[1]},HC=t=>{const e=t&&ZA(t);if(e)return e[2]+":"+e[3]},l0=t=>{const e=t&&ZA(t);if(e)return e.pop()};async function MP(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=Y4(s,s.iss),o=l0(s.iss);return await rle(o,i,r,HC(s.iss),n)}const Y4=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=l0(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${vle(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=ow(t.resources);if(p){const g=yg(p);s=Tle(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function ble(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Ele(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function eu(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function _le(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Cle(e,n,r)}}}function Cle(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function J4(t){return eu(t),`urn:recap:${ble(t).replace(/=/g,"")}`}function yg(t){const e=Ele(t.replace("urn:recap:",""));return eu(e),e}function xle(t,e,n){const r=_le(t,e,n);return J4(r)}function Sle(t){return t&&t.includes("urn:recap:")}function Ale(t,e){const n=yg(t),r=yg(e),s=Ile(n,r);return J4(s)}function Ile(t,e){eu(t),eu(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=yle(mle({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Tle(t="",e){eu(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function BP(t){var e;const n=yg(t);eu(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function FP(t){const e=yg(t);eu(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function ow(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Sle(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function Q4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function VC(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function H1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Vr(t,...e){if(!Q4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function zP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Nle(t,e){Vr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function bc(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ih(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ple(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const kle=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ole(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function GC(t){if(typeof t=="string")t=Ole(t);else if(Q4(t))t=KC(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Rle(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function $le(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Dle=(t,e)=>{function n(r,...s){if(Vr(r),!kle)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Vr(l):Vr(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Vr(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Vr(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Vr(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Vr(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function WP(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Ule(e))throw new Error("invalid output, must be aligned");return e}function qP(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function jle(t,e,n){VC(n);const r=new Uint8Array(16),s=Ple(r);return qP(s,0,BigInt(e),n),qP(s,8,BigInt(t),n),r}function Ule(t){return t.byteOffset%4===0}function KC(t){return Uint8Array.from(t)}const Z4=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Lle=Z4("expand 16-byte k"),Mle=Z4("expand 32-byte k"),Ble=bc(Lle),Fle=bc(Mle);function at(t,e){return t<<e|t>>>32-e}function YC(t){return t.byteOffset%4===0}const wy=64,zle=16,X4=2**32-1,HP=new Uint32Array;function Wle(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(wy),u=bc(l),d=YC(s)&&YC(i),h=d?bc(s):HP,f=d?bc(i):HP;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=X4)throw new Error("arx: counter overflow");const g=Math.min(wy,c-p);if(d&&g===wy){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<zle;y++)b=w+y,f[b]=h[b]^u[y];p+=wy;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function qle(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Rle({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return H1(s),H1(o),VC(i),VC(n),(a,c,l,u,d=0)=>{Vr(a),Vr(c),Vr(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Vr(u),H1(d),d<0||d>=X4)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=KC(a)),w=Fle;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=Ble,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);YC(c)||f.push(c=KC(c));const y=bc(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,bc(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,f.push(c)}const v=bc(c);return Wle(t,w,y,v,l,u,d,o),ih(...f),u}}const Ln=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Hle{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=GC(e),Vr(e,32);const n=Ln(e,0),r=Ln(e,2),s=Ln(e,4),i=Ln(e,6),o=Ln(e,8),a=Ln(e,10),c=Ln(e,12),l=Ln(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ln(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Ln(e,n+0),b=Ln(e,n+2),v=Ln(e,n+4),_=Ln(e,n+6),E=Ln(e,n+8),x=Ln(e,n+10),S=Ln(e,n+12),T=Ln(e,n+14);let C=i[0]+(y&8191),O=i[1]+((y>>>13|b<<3)&8191),R=i[2]+((b>>>10|v<<6)&8191),F=i[3]+((v>>>7|_<<9)&8191),q=i[4]+((_>>>4|E<<12)&8191),B=i[5]+(E>>>1&8191),I=i[6]+((E>>>14|x<<2)&8191),A=i[7]+((x>>>11|S<<5)&8191),j=i[8]+((S>>>8|T<<8)&8191),P=i[9]+(T>>>5|s),k=0,U=k+C*a+O*(5*w)+R*(5*g)+F*(5*p)+q*(5*f);k=U>>>13,U&=8191,U+=B*(5*h)+I*(5*d)+A*(5*u)+j*(5*l)+P*(5*c),k+=U>>>13,U&=8191;let z=k+C*c+O*a+R*(5*w)+F*(5*g)+q*(5*p);k=z>>>13,z&=8191,z+=B*(5*f)+I*(5*h)+A*(5*d)+j*(5*u)+P*(5*l),k+=z>>>13,z&=8191;let G=k+C*l+O*c+R*a+F*(5*w)+q*(5*g);k=G>>>13,G&=8191,G+=B*(5*p)+I*(5*f)+A*(5*h)+j*(5*d)+P*(5*u),k+=G>>>13,G&=8191;let Q=k+C*u+O*l+R*c+F*a+q*(5*w);k=Q>>>13,Q&=8191,Q+=B*(5*g)+I*(5*p)+A*(5*f)+j*(5*h)+P*(5*d),k+=Q>>>13,Q&=8191;let Y=k+C*d+O*u+R*l+F*c+q*a;k=Y>>>13,Y&=8191,Y+=B*(5*w)+I*(5*g)+A*(5*p)+j*(5*f)+P*(5*h),k+=Y>>>13,Y&=8191;let Z=k+C*h+O*d+R*u+F*l+q*c;k=Z>>>13,Z&=8191,Z+=B*a+I*(5*w)+A*(5*g)+j*(5*p)+P*(5*f),k+=Z>>>13,Z&=8191;let se=k+C*f+O*h+R*d+F*u+q*l;k=se>>>13,se&=8191,se+=B*c+I*a+A*(5*w)+j*(5*g)+P*(5*p),k+=se>>>13,se&=8191;let Pe=k+C*p+O*f+R*h+F*d+q*u;k=Pe>>>13,Pe&=8191,Pe+=B*l+I*c+A*a+j*(5*w)+P*(5*g),k+=Pe>>>13,Pe&=8191;let Oe=k+C*g+O*p+R*f+F*h+q*d;k=Oe>>>13,Oe&=8191,Oe+=B*u+I*l+A*c+j*a+P*(5*w),k+=Oe>>>13,Oe&=8191;let De=k+C*w+O*g+R*p+F*f+q*h;k=De>>>13,De&=8191,De+=B*d+I*u+A*l+j*c+P*a,k+=De>>>13,De&=8191,k=(k<<2)+k|0,k=k+U|0,U=k&8191,k=k>>>13,z+=k,i[0]=U,i[1]=z,i[2]=G,i[3]=Q,i[4]=Y,i[5]=Z,i[6]=se,i[7]=Pe,i[8]=Oe,i[9]=De}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;ih(r)}update(e){zP(this),e=GC(e),Vr(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){ih(this.h,this.r,this.buffer,this.pad)}digestInto(e){zP(this),Nle(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Vle(t){const e=(r,s)=>t(s).update(GC(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Gle=Vle(t=>new Hle(t));function Kle(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,v=n[0],_=n[1],E=n[2],x=o,S=a,T=c,C=l,O=u,R=d,F=h,q=f,B=p,I=g,A=w,j=y,P=b,k=v,U=_,z=E;for(let Q=0;Q<i;Q+=2)x=x+O|0,P=at(P^x,16),B=B+P|0,O=at(O^B,12),x=x+O|0,P=at(P^x,8),B=B+P|0,O=at(O^B,7),S=S+R|0,k=at(k^S,16),I=I+k|0,R=at(R^I,12),S=S+R|0,k=at(k^S,8),I=I+k|0,R=at(R^I,7),T=T+F|0,U=at(U^T,16),A=A+U|0,F=at(F^A,12),T=T+F|0,U=at(U^T,8),A=A+U|0,F=at(F^A,7),C=C+q|0,z=at(z^C,16),j=j+z|0,q=at(q^j,12),C=C+q|0,z=at(z^C,8),j=j+z|0,q=at(q^j,7),x=x+R|0,z=at(z^x,16),A=A+z|0,R=at(R^A,12),x=x+R|0,z=at(z^x,8),A=A+z|0,R=at(R^A,7),S=S+F|0,P=at(P^S,16),j=j+P|0,F=at(F^j,12),S=S+F|0,P=at(P^S,8),j=j+P|0,F=at(F^j,7),T=T+q|0,k=at(k^T,16),B=B+k|0,q=at(q^B,12),T=T+q|0,k=at(k^T,8),B=B+k|0,q=at(q^B,7),C=C+O|0,U=at(U^C,16),I=I+U|0,O=at(O^I,12),C=C+O|0,U=at(U^C,8),I=I+U|0,O=at(O^I,7);let G=0;r[G++]=o+x|0,r[G++]=a+S|0,r[G++]=c+T|0,r[G++]=l+C|0,r[G++]=u+O|0,r[G++]=d+R|0,r[G++]=h+F|0,r[G++]=f+q|0,r[G++]=p+B|0,r[G++]=g+I|0,r[G++]=w+A|0,r[G++]=y+j|0,r[G++]=b+P|0,r[G++]=v+k|0,r[G++]=_+U|0,r[G++]=E+z|0}const Yle=qle(Kle,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Jle=new Uint8Array(16),VP=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Jle.subarray(n))},Qle=new Uint8Array(32);function GP(t,e,n,r,s){const i=t(e,n,Qle),o=Gle.create(i);s&&VP(o,s),VP(o,r);const a=jle(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return ih(i,a),c}const Zle=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=WP(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=GP(t,e,n,a,r);return i.set(c,o),ih(c),i},decrypt(s,i){i=WP(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=GP(t,e,n,o,r);if(!$le(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),ih(c),i}}),ej=Dle({blockSize:64,nonceLength:12,tagLength:16},Zle(Yle));let tj=class extends Iv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,KA(e);const r=Ei(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Vs(i)}update(e){return Oc(this),this.iHash.update(e),this}digestInto(e){Oc(this),Hs(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Nv=(t,e,n)=>new tj(t,e).update(n).digest();Nv.create=(t,e)=>new tj(t,e);function Xle(t,e,n){return KA(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Nv(t,Ei(n),Ei(e))}const V1=Uint8Array.from([0]),KP=Uint8Array.of();function eue(t,e,n,r=32){KA(t),Yo(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=KP);const o=new Uint8Array(i*s),a=Nv.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)V1[0]=u+1,c.update(u===0?KP:l).update(n).update(V1).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Vs(l,V1),o.slice(0,r)}const tue=(t,e,n,r,s)=>eue(t,Xle(t,e,n),r,s),Pv=Tv,XA=BigInt(0),JC=BigInt(1);function u0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function vy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function nj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?XA:BigInt("0x"+t)}function kv(t){return nj(mg(t))}function d0(t){return Hs(t),nj(mg(Uint8Array.from(t).reverse()))}function eI(t,e){return JA(t.toString(16).padStart(e*2,"0"))}function tI(t,e){return eI(t,e).reverse()}function Hr(t,e,n){let r;if(typeof e=="string")try{r=JA(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(GA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const G1=t=>typeof t=="bigint"&&XA<=t;function nue(t,e,n){return G1(t)&&G1(e)&&G1(n)&&e<=t&&t<n}function QC(t,e,n,r){if(!nue(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function rue(t){let e;for(e=0;t>XA;t>>=JC,e+=1);return e}const Ov=t=>(JC<<BigInt(t))-JC;function sue(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return ml(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function Rv(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function YP(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Jr=BigInt(0),Cr=BigInt(1),yl=BigInt(2),iue=BigInt(3),rj=BigInt(4),sj=BigInt(5),ij=BigInt(8);function Us(t,e){const n=t%e;return n>=Jr?n:e+n}function ri(t,e,n){let r=t;for(;e-- >Jr;)r*=r,r%=n;return r}function JP(t,e){if(t===Jr)throw new Error("invert: expected non-zero number");if(e<=Jr)throw new Error("invert: expected positive modulus, got "+e);let n=Us(t,e),r=e,s=Jr,i=Cr;for(;n!==Jr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Cr)throw new Error("invert: does not exist");return Us(s,e)}function oj(t,e){const n=(t.ORDER+Cr)/rj,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function oue(t,e){const n=(t.ORDER-sj)/ij,r=t.mul(e,yl),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,yl),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function aue(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Cr,n=0;for(;e%yl===Jr;)e/=yl,n++;let r=yl;const s=kh(t);for(;QP(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return oj;let i=s.pow(r,e);const o=(e+Cr)/yl;return function(a,c){if(a.is0(c))return c;if(QP(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=Cr<<BigInt(l-f-1),w=a.pow(u,g);l=f,u=a.sqr(w),d=a.mul(d,u),h=a.mul(h,w)}return h}}function cue(t){return t%rj===iue?oj:t%ij===sj?oue:aue(t)}const lue=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uue(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=lue.reduce((r,s)=>(r[s]="function",r),e);return Rv(t,n),t}function due(t,e,n){if(n<Jr)throw new Error("invalid exponent, negatives unsupported");if(n===Jr)return t.ONE;if(n===Cr)return e;let r=t.ONE,s=e;for(;n>Jr;)n&Cr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Cr;return r}function aj(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function QP(t,e){const n=(t.ORDER-Cr)/yl,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function hue(t,e){e!==void 0&&Yo(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function kh(t,e,n=!1,r={}){if(t<=Jr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=hue(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:Ov(o),ZERO:Jr,ONE:Cr,create:u=>Us(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Jr<=u&&u<t},is0:u=>u===Jr,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Cr)===Cr,neg:u=>Us(-u,t),eql:(u,d)=>u===d,sqr:u=>Us(u*u,t),add:(u,d)=>Us(u+d,t),sub:(u,d)=>Us(u-d,t),mul:(u,d)=>Us(u*d,t),pow:(u,d)=>due(l,u,d),div:(u,d)=>Us(u*JP(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>JP(u,t),sqrt:i||(u=>(c||(c=cue(t)),c(l,u))),toBytes:u=>n?tI(u,a):eI(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?d0(u):kv(u)},invertBatch:u=>aj(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function cj(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function lj(t){const e=cj(t);return e+Math.ceil(e/2)}function fue(t,e,n=!1){const r=t.length,s=cj(e),i=lj(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?d0(t):kv(t),a=Us(o,e-Cr)+Cr;return n?tI(a,s):eI(a,s)}const oh=BigInt(0),wl=BigInt(1);function rp(t,e){const n=e.negate();return t?n:e}function pue(t,e,n){const r=i=>i.pz,s=aj(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function uj(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function K1(t,e){uj(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Ov(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function ZP(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=wl);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function gue(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function mue(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Y1=new WeakMap,dj=new WeakMap;function J1(t){return dj.get(t)||1}function XP(t){if(t!==oh)throw new Error("invalid wNAF")}function yue(t,e){return{constTimeNegate:rp,hasPrecomputes(n){return J1(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>oh;)r&wl&&(s=s.add(i)),i=i.double(),r>>=wl;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=K1(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=K1(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=ZP(s,c,a);s=l,d?o=o.add(rp(f,r[p])):i=i.add(rp(h,r[u]))}return XP(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=K1(n,e);for(let a=0;a<o.windows&&s!==oh;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=ZP(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return XP(s),i},getPrecomputes(n,r,s){let i=Y1.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),Y1.set(r,i))),i},wNAFCached(n,r,s){const i=J1(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=J1(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){uj(r,e),dj.set(n,r),Y1.delete(n)}}}function wue(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>oh||r>oh;)n&wl&&(i=i.add(s)),r&wl&&(o=o.add(s)),s=s.double(),n>>=wl,r>>=wl;return{p1:i,p2:o}}function vue(t,e,n,r){gue(n,t),mue(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=rue(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Ov(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function ek(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return uue(e),e}else return kh(t)}function bue(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>oh))throw new Error(`CURVE.${o} must be positive bigint`)}const r=ek(e.p,n.Fp),s=ek(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const ff=BigInt(0),Ru=BigInt(1),by=BigInt(2);function Eue(t){return Rv(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function _ue(t){const e=Eue(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Ph,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?by**BigInt(254):by**BigInt(447),p=a?BigInt(8)*by**BigInt(251)-Ru:BigInt(4)*by**BigInt(445)-Ru,g=f+p+Ru,w=C=>Us(C,n),y=b(d);function b(C){return tI(w(C),u)}function v(C){const O=Hr("u coordinate",C,u);return a&&(O[31]&=127),w(d0(O))}function _(C){return d0(s(Hr("scalar",C,u)))}function E(C,O){const R=T(v(O),_(C));if(R===ff)throw new Error("invalid private or public key received");return b(R)}function x(C){return E(C,y)}function S(C,O,R){const F=w(C*(O-R));return O=w(O-F),R=w(R+F),{x_2:O,x_3:R}}function T(C,O){QC("u",C,ff,n),QC("scalar",O,f,g);const R=O,F=C;let q=Ru,B=ff,I=C,A=Ru,j=ff;for(let k=BigInt(l-1);k>=ff;k--){const U=R>>k&Ru;j^=U,{x_2:q,x_3:I}=S(j,q,I),{x_2:B,x_3:A}=S(j,B,A),j=U;const z=q+B,G=w(z*z),Q=q-B,Y=w(Q*Q),Z=G-Y,se=I+A,Pe=I-A,Oe=w(Pe*z),De=w(se*Q),Ke=Oe+De,Zt=Oe-De;I=w(Ke*Ke),A=w(F*w(Zt*Zt)),q=w(G*Y),B=w(Z*(G+w(h*Z)))}({x_2:q,x_3:I}=S(j,q,I)),{x_2:B,x_3:A}=S(j,B,A);const P=i(B);return w(q*P)}return{scalarMult:E,scalarMultBase:x,getSharedSecret:(C,O)=>E(C,O),getPublicKey:C=>x(C),utils:{randomPrivateKey:()=>c(u)},GuBytes:y.slice()}}BigInt(0);const Cue=BigInt(1),tk=BigInt(2),xue=BigInt(3),Sue=BigInt(5);BigInt(8);const hj={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Aue(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=hj.p,o=t*t%i*t%i,a=ri(o,tk,i)*o%i,c=ri(a,Cue,i)*t%i,l=ri(c,Sue,i)*c%i,u=ri(l,e,i)*l%i,d=ri(u,n,i)*u%i,h=ri(d,r,i)*d%i,f=ri(h,s,i)*h%i,p=ri(f,s,i)*h%i,g=ri(p,e,i)*l%i;return{pow_p_5_8:ri(g,tk,i)*t%i,b2:o}}function Iue(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ZC=(()=>{const t=hj.p;return _ue({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=Aue(e);return Us(ri(n,xue,t)*r,t)},adjustScalarBytes:Iue})})();function nk(t){t.lowS!==void 0&&u0("lowS",t.lowS),t.prehash!==void 0&&u0("prehash",t.prehash)}class Tue extends Error{constructor(e=""){super(e)}}const Io={Err:Tue,_tlv:{encode:(t,e)=>{const{Err:n}=Io;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=vy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?vy(s.length/2|128):"";return vy(t)+i+s+e},decode(t,e){const{Err:n}=Io;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Io;if(t<sp)throw new e("integer: negative integers are not allowed");let n=vy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Io;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return kv(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Io,s=Hr("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Io,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},sp=BigInt(0),ip=BigInt(1),Nue=BigInt(2),Ey=BigInt(3),Pue=BigInt(4);function kue(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function fj(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Hr("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Oue(t,e={}){const{Fp:n,Fn:r}=bue("weierstrass",t,e),{h:s,n:i}=t;Rv(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,C,O){const{x:R,y:F}=C.toAffine(),q=n.toBytes(R);if(u0("isCompressed",O),O){a();const B=!n.isOdd(F);return ml(pj(B),q)}else return ml(Uint8Array.of(4),q,n.toBytes(F))}function l(T){Hs(T);const C=n.BYTES,O=C+1,R=2*C+1,F=T.length,q=T[0],B=T.subarray(1);if(F===O&&(q===2||q===3)){const I=n.fromBytes(B);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const A=h(I);let j;try{j=n.sqrt(A)}catch(k){const U=k instanceof Error?": "+k.message:"";throw new Error("bad point: is not on curve, sqrt error"+U)}a();const P=n.isOdd(j);return(q&1)===1!==P&&(j=n.neg(j)),{x:I,y:j}}else if(F===R&&q===4){const I=n.fromBytes(B.subarray(C*0,C*1)),A=n.fromBytes(B.subarray(C*1,C*2));if(!f(I,A))throw new Error("bad point: is not on curve");return{x:I,y:A}}else throw new Error(`bad point: got length ${F}, expected compressed=${O} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=kue(n,t.a,t.b);function f(T,C){const O=n.sqr(C),R=h(T);return n.eql(O,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,Ey),Pue),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(T,C,O=!1){if(!n.isValid(C)||O&&n.is0(C))throw new Error(`bad point coordinate ${T}`);return C}function y(T){if(!(T instanceof E))throw new Error("ProjectivePoint expected")}const b=YP((T,C)=>{const{px:O,py:R,pz:F}=T;if(n.eql(F,n.ONE))return{x:O,y:R};const q=T.is0();C==null&&(C=q?n.ONE:n.inv(F));const B=n.mul(O,C),I=n.mul(R,C),A=n.mul(F,C);if(q)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:B,y:I}}),v=YP(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:C,y:O}=T.toAffine();if(!n.isValid(C)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(C,O))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(T,C,O,R,F){return O=new E(n.mul(O.px,T),O.py,O.pz),C=rp(R,C),O=rp(F,O),C.add(O)}class E{constructor(C,O,R){this.px=w("x",C),this.py=w("y",O,!0),this.pz=w("z",R),Object.freeze(this)}static fromAffine(C){const{x:O,y:R}=C||{};if(!C||!n.isValid(O)||!n.isValid(R))throw new Error("invalid affine point");if(C instanceof E)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(R)?E.ZERO:new E(O,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return pue(E,"pz",C)}static fromBytes(C){return Hs(C),E.fromHex(C)}static fromHex(C){const O=E.fromAffine(d(Hr("pointHex",C)));return O.assertValidity(),O}static fromPrivateKey(C){const O=fj(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return E.BASE.multiply(O(C))}static msm(C,O){return vue(E,r,C,O)}precompute(C=8,O=!0){return S.setWindowSize(this,C),O||this.multiply(Ey),this}_setWindowSize(C){this.precompute(C)}assertValidity(){v(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){y(C);const{px:O,py:R,pz:F}=this,{px:q,py:B,pz:I}=C,A=n.eql(n.mul(O,I),n.mul(q,F)),j=n.eql(n.mul(R,I),n.mul(B,F));return A&&j}negate(){return new E(this.px,n.neg(this.py),this.pz)}double(){const{a:C,b:O}=t,R=n.mul(O,Ey),{px:F,py:q,pz:B}=this;let I=n.ZERO,A=n.ZERO,j=n.ZERO,P=n.mul(F,F),k=n.mul(q,q),U=n.mul(B,B),z=n.mul(F,q);return z=n.add(z,z),j=n.mul(F,B),j=n.add(j,j),I=n.mul(C,j),A=n.mul(R,U),A=n.add(I,A),I=n.sub(k,A),A=n.add(k,A),A=n.mul(I,A),I=n.mul(z,I),j=n.mul(R,j),U=n.mul(C,U),z=n.sub(P,U),z=n.mul(C,z),z=n.add(z,j),j=n.add(P,P),P=n.add(j,P),P=n.add(P,U),P=n.mul(P,z),A=n.add(A,P),U=n.mul(q,B),U=n.add(U,U),P=n.mul(U,z),I=n.sub(I,P),j=n.mul(U,k),j=n.add(j,j),j=n.add(j,j),new E(I,A,j)}add(C){y(C);const{px:O,py:R,pz:F}=this,{px:q,py:B,pz:I}=C;let A=n.ZERO,j=n.ZERO,P=n.ZERO;const k=t.a,U=n.mul(t.b,Ey);let z=n.mul(O,q),G=n.mul(R,B),Q=n.mul(F,I),Y=n.add(O,R),Z=n.add(q,B);Y=n.mul(Y,Z),Z=n.add(z,G),Y=n.sub(Y,Z),Z=n.add(O,F);let se=n.add(q,I);return Z=n.mul(Z,se),se=n.add(z,Q),Z=n.sub(Z,se),se=n.add(R,F),A=n.add(B,I),se=n.mul(se,A),A=n.add(G,Q),se=n.sub(se,A),P=n.mul(k,Z),A=n.mul(U,Q),P=n.add(A,P),A=n.sub(G,P),P=n.add(G,P),j=n.mul(A,P),G=n.add(z,z),G=n.add(G,z),Q=n.mul(k,Q),Z=n.mul(U,Z),G=n.add(G,Q),Q=n.sub(z,Q),Q=n.mul(k,Q),Z=n.add(Z,Q),z=n.mul(G,Z),j=n.add(j,z),z=n.mul(se,Z),A=n.mul(Y,A),A=n.sub(A,z),z=n.mul(Y,G),P=n.mul(se,P),P=n.add(P,z),new E(A,j,P)}subtract(C){return this.add(C.negate())}is0(){return this.equals(E.ZERO)}multiply(C){const{endo:O}=e;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let R,F;const q=B=>S.wNAFCached(this,B,E.normalizeZ);if(O){const{k1neg:B,k1:I,k2neg:A,k2:j}=O.splitScalar(C),{p:P,f:k}=q(I),{p:U,f:z}=q(j);F=k.add(z),R=_(O.beta,P,U,B,A)}else{const{p:B,f:I}=q(C);R=B,F=I}return E.normalizeZ([R,F])[0]}multiplyUnsafe(C){const{endo:O}=e,R=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===sp||R.is0())return E.ZERO;if(C===ip)return R;if(S.hasPrecomputes(this))return this.multiply(C);if(O){const{k1neg:F,k1:q,k2neg:B,k2:I}=O.splitScalar(C),{p1:A,p2:j}=wue(E,R,q,I);return _(O.beta,A,j,F,B)}else return S.wNAFCachedUnsafe(R,C)}multiplyAndAddUnsafe(C,O,R){const F=this.multiplyUnsafe(O).add(C.multiplyUnsafe(R));return F.is0()?void 0:F}toAffine(C){return b(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return s===ip?!0:C?C(E,this):S.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:C}=e;return s===ip?this:C?C(E,this):this.multiplyUnsafe(s)}toBytes(C=!0){return u0("isCompressed",C),this.assertValidity(),u(E,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return mg(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}E.BASE=new E(t.Gx,t.Gy,n.ONE),E.ZERO=new E(n.ZERO,n.ONE,n.ZERO),E.Fp=n,E.Fn=r;const x=r.BITS,S=yue(E,e.endo?Math.ceil(x/2):x);return E}function pj(t){return Uint8Array.of(t?2:3)}function Rue(t,e,n={}){Rv(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Ph,s=e.hmac||((R,...F)=>Nv(e.hash,R,ml(...F))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const F=a>>ip;return R>F}function u(R){return l(R)?o.neg(R):R}function d(R,F){if(!o.isValidNot0(F))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(F,q,B){d("r",F),d("s",q),this.r=F,this.s=q,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(F){const q=o.BYTES,B=Hr("compactSignature",F,q*2);return new h(o.fromBytes(B.subarray(0,q)),o.fromBytes(B.subarray(q,q*2)))}static fromDER(F){const{r:q,s:B}=Io.toSig(Hr("DER",F));return new h(q,B)}assertValidity(){}addRecoveryBit(F){return new h(this.r,this.s,F)}recoverPublicKey(F){const q=i.ORDER,{r:B,s:I,recovery:A}=this;if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");if(a*Nue<q&&A>1)throw new Error("recovery id is ambiguous for h>1 curve");const j=A===2||A===3?B+a:B;if(!i.isValid(j))throw new Error("recovery id 2 or 3 invalid");const P=i.toBytes(j),k=t.fromHex(ml(pj((A&1)===0),P)),U=o.inv(j),z=v(Hr("msgHash",F)),G=o.create(-z*U),Q=o.create(I*U),Y=t.BASE.multiplyUnsafe(G).add(k.multiplyUnsafe(Q));if(Y.is0())throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(F){if(F==="compact")return ml(o.toBytes(this.r),o.toBytes(this.s));if(F==="der")return JA(Io.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return mg(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return mg(this.toBytes("compact"))}}const f=fj(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return fue(r(lj(R)),R)},precompute(R=8,F=t.BASE){return F.precompute(R,!1)}};function g(R,F=!0){return t.fromPrivateKey(R).toBytes(F)}function w(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const F=Hr("key",R).length,q=i.BYTES,B=q+1,I=2*q+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===B))return F===B||F===I}function y(R,F,q=!0){if(w(R)===!0)throw new Error("first arg must be private key");if(w(F)===!1)throw new Error("second arg must be public key");return t.fromHex(F).multiply(f(R)).toBytes(q)}const b=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const F=kv(R),q=R.length*8-c;return q>0?F>>BigInt(q):F},v=e.bits2int_modN||function(R){return o.create(b(R))},_=Ov(c);function E(R){return QC("num < 2^"+c,R,sp,_),o.toBytes(R)}function x(R,F,q=S){if(["recovered","canonical"].some(Y=>Y in q))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:I,prehash:A,extraEntropy:j}=q;I==null&&(I=!0),R=Hr("msgHash",R),nk(q),A&&(R=Hr("prehashed msgHash",B(R)));const P=v(R),k=f(F),U=[E(k),E(P)];if(j!=null&&j!==!1){const Y=j===!0?r(i.BYTES):j;U.push(Hr("extraEntropy",Y))}const z=ml(...U),G=P;function Q(Y){const Z=b(Y);if(!o.isValidNot0(Z))return;const se=o.inv(Z),Pe=t.BASE.multiply(Z).toAffine(),Oe=o.create(Pe.x);if(Oe===sp)return;const De=o.create(se*o.create(G+Oe*k));if(De===sp)return;let Ke=(Pe.x===Oe?0:2)|Number(Pe.y&ip),Zt=De;return I&&l(De)&&(Zt=u(De),Ke^=1),new h(Oe,Zt,Ke)}return{seed:z,k2sig:Q}}const S={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function C(R,F,q=S){const{seed:B,k2sig:I}=x(R,F,q);return sue(e.hash.outputLen,o.BYTES,s)(B,I)}t.BASE.precompute(8);function O(R,F,q,B=T){const I=R;F=Hr("msgHash",F),q=Hr("publicKey",q),nk(B);const{lowS:A,prehash:j,format:P}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(P!==void 0&&!["compact","der","js"].includes(P))throw new Error('format must be "compact", "der" or "js"');const k=typeof I=="string"||GA(I),U=!k&&!P&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!k&&!U)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let z,G;try{if(U)if(P===void 0||P==="js")z=new h(I.r,I.s);else throw new Error("invalid format");if(k){try{P!=="compact"&&(z=h.fromDER(I))}catch(Ke){if(!(Ke instanceof Io.Err))throw Ke}!z&&P!=="der"&&(z=h.fromCompact(I))}G=t.fromHex(q)}catch{return!1}if(!z||A&&z.hasHighS())return!1;j&&(F=e.hash(F));const{r:Q,s:Y}=z,Z=v(F),se=o.inv(Y),Pe=o.create(Z*se),Oe=o.create(Q*se),De=t.BASE.multiplyUnsafe(Pe).add(G.multiplyUnsafe(Oe));return De.is0()?!1:o.create(De.x)===Q}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:C,verify:O,utils:p,Point:t,Signature:h})}function $ue(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=kh(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Due(t){const{CURVE:e,curveOpts:n}=$ue(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function jue(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Uue(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Due(t),s=Oue(e,n),i=Rue(s,r,n);return jue(t,i)}function XC(t,e){const n=r=>Uue({...t,hash:r});return{...n(e),create:n}}const gj={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},mj={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},yj={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Lue=kh(gj.p),Mue=kh(mj.p),Bue=kh(yj.p),Fue=XC({...gj,Fp:Lue,lowS:!1},Tv);XC({...mj,Fp:Mue,lowS:!1},Yce),XC({...yj,Fp:Bue,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Kce);const zue=Fue,wj="base10",xr="base16",yi="base64pad",Ma="base64url",pm="utf8",vj=0,Uo=1,gm=2,Wue=0,rk=1,op=12,nI=32;function que(){const t=ZC.utils.randomPrivateKey(),e=ZC.getPublicKey(t);return{privateKey:ts(t,xr),publicKey:ts(e,xr)}}function ex(){const t=Ph(nI);return ts(t,xr)}function Hue(t,e){const n=ZC.getSharedSecret(Fs(t,xr),Fs(e,xr)),r=tue(Pv,n,void 0,void 0,nI);return ts(r,xr)}function aw(t){const e=Pv(Fs(t,xr));return ts(e,xr)}function Hi(t){const e=Pv(Fs(t,pm));return ts(e,xr)}function bj(t){return Fs(`${t}`,wj)}function tu(t){return Number(ts(t,wj))}function Ej(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function _j(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Vue(t){const e=bj(typeof t.type<"u"?t.type:vj);if(tu(e)===Uo&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Fs(t.senderPublicKey,xr):void 0,r=typeof t.iv<"u"?Fs(t.iv,xr):Ph(op),s=Fs(t.symKey,xr),i=ej(s,r).encrypt(Fs(t.message,pm)),o=Cj({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Ma?Ej(o):o}function Gue(t){const e=Fs(t.symKey,xr),{sealed:n,iv:r}=wg({encoded:t.encoded,encoding:t.encoding}),s=ej(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ts(s,pm)}function Kue(t,e){const n=bj(gm),r=Ph(op),s=Fs(t,pm),i=Cj({type:n,sealed:s,iv:r});return e===Ma?Ej(i):i}function Yue(t,e){const{sealed:n}=wg({encoded:t,encoding:e});return ts(n,pm)}function Cj(t){if(tu(t.type)===gm)return ts(np([t.type,t.sealed]),yi);if(tu(t.type)===Uo){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ts(np([t.type,t.senderPublicKey,t.iv,t.sealed]),yi)}return ts(np([t.type,t.iv,t.sealed]),yi)}function wg(t){const e=(t.encoding||yi)===Ma?_j(t.encoded):t.encoded,n=Fs(e,yi),r=n.slice(Wue,rk),s=rk;if(tu(r)===Uo){const c=s+nI,l=c+op,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(tu(r)===gm){const c=n.slice(s),l=Ph(op);return{type:r,sealed:c,iv:l}}const i=s+op,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Jue(t,e){const n=wg({encoded:t,encoding:e==null?void 0:e.encoding});return xj({type:tu(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ts(n.senderPublicKey,xr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function xj(t){const e=(t==null?void 0:t.type)||vj;if(e===Uo){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function sk(t){return t.type===Uo&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function ik(t){return t.type===gm}function Que(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return np([new Uint8Array([4]),e,n])}function Zue(t,e){const[n,r,s]=t.split("."),i=Buffer.from(_j(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=Pv(c),u=Que(e);if(!zue.verify(np([o,a]),l,u))throw new Error("Invalid signature");return jC(t).payload}const Xue="irn";function h0(t){return(t==null?void 0:t.relay)||{protocol:Xue}}function Uf(t){const e=Tae[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function ede(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function ok(t){if(!t.includes("wc:")){const l=D4(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:tde(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:ede(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function tde(t){return t.startsWith("//")?t.substring(2):t}function nde(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function ak(t){const e=new URLSearchParams,n=nde(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function _y(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var rde=Object.defineProperty,sde=Object.defineProperties,ide=Object.getOwnPropertyDescriptors,ck=Object.getOwnPropertySymbols,ode=Object.prototype.hasOwnProperty,ade=Object.prototype.propertyIsEnumerable,lk=(t,e,n)=>e in t?rde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cde=(t,e)=>{for(var n in e||(e={}))ode.call(e,n)&&lk(t,n,e[n]);if(ck)for(var n of ck(e))ade.call(e,n)&&lk(t,n,e[n]);return t},lde=(t,e)=>sde(t,ide(e));function Oh(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function ude(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Oh(n.accounts))}),e}function dde(t,e){const n=[];return Object.values(t).forEach(r=>{Oh(r.accounts).includes(e)&&n.push(...r.methods)}),n}function hde(t,e){const n=[];return Object.values(t).forEach(r=>{Oh(r.accounts).includes(e)&&n.push(...r.events)}),n}function $v(t){return t.includes(":")}function md(t){return $v(t)?t.split(":")[0]:t}function uk(t){var e,n,r;const s={};if(!Ec(t))return s;for(const[i,o]of Object.entries(t)){const a=$v(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=md(i);s[u]=lde(cde({},s[u]),{chains:eo(a,(e=s[u])==null?void 0:e.chains),methods:eo(c,(n=s[u])==null?void 0:n.methods),events:eo(l,(r=s[u])==null?void 0:r.events)})}return s}function fde(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function dk(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=fde(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=eo(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function pde(t,e){var n,r,s,i,o,a;const c=uk(t),l=uk(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:eo((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:eo((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:eo((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const gde={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},mde={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ae(t,e){const{message:n,code:r}=mde[t];return{message:e?`${n} ${e}`:n,code:r}}function Wt(t,e){const{message:n,code:r}=gde[t];return{message:e?`${n} ${e}`:n,code:r}}function Lo(t,e){return!!Array.isArray(t)}function Ec(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Wn(t){return typeof t>"u"}function fn(t,e){return e&&Wn(t)?!0:typeof t=="string"&&!!t.trim().length}function rI(t,e){return e&&Wn(t)?!0:typeof t=="number"&&!isNaN(t)}function yde(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return gl(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Oh(a),d=n[o];(!gl(P4(o,d),u)||!gl(d.methods,c)||!gl(d.events,l))&&(i=!1)}),i):!1}function f0(t){return fn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function wde(t){if(fn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&f0(n)}}return!1}function vde(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(fn(t,!1)){if(e(t))return!0;const n=D4(t);return e(n)}}catch{}return!1}function bde(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Ede(t){return t==null?void 0:t.topic}function _de(t,e){let n=null;return fn(t==null?void 0:t.publicKey,!1)||(n=ae("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function hk(t){let e=!0;return Lo(t)?t.length&&(e=t.every(n=>fn(n,!1))):e=!1,e}function Cde(t,e,n){let r=null;return Lo(e)&&e.length?e.forEach(s=>{r||f0(s)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):f0(t)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function xde(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=Cde(s,P4(s,i),`${e} ${n}`);o&&(r=o)}),r}function Sde(t,e){let n=null;return Lo(t)?t.forEach(r=>{n||wde(r)||(n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Ade(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Sde(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function Ide(t,e){let n=null;return hk(t==null?void 0:t.methods)?hk(t==null?void 0:t.events)||(n=Wt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Wt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function Sj(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Ide(r,`${e}, namespace`);s&&(n=s)}),n}function Tde(t,e,n){let r=null;if(t&&Ec(t)){const s=Sj(t,e);s&&(r=s);const i=xde(t,e,n);i&&(r=i)}else r=ae("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function Q1(t,e){let n=null;if(t&&Ec(t)){const r=Sj(t,e);r&&(n=r);const s=Ade(t,e);s&&(n=s)}else n=ae("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function Aj(t){return fn(t.protocol,!0)}function Nde(t,e){let n=!1;return t?t&&Lo(t)&&t.length&&t.forEach(r=>{n=Aj(r)}):n=!0,n}function Pde(t){return typeof t=="number"}function Br(t){return typeof t<"u"&&typeof t!==null}function kde(t){return!(!t||typeof t!="object"||!t.code||!rI(t.code,!1)||!t.message||!fn(t.message,!1))}function Ode(t){return!(Wn(t)||!fn(t.method,!1))}function Rde(t){return!(Wn(t)||Wn(t.result)&&Wn(t.error)||!rI(t.id,!1)||!fn(t.jsonrpc,!1))}function $de(t){return!(Wn(t)||!fn(t.name,!1))}function fk(t,e){return!(!f0(e)||!ude(t).includes(e))}function Dde(t,e,n){return fn(n,!1)?dde(t,e).includes(n):!1}function jde(t,e,n){return fn(n,!1)?hde(t,e).includes(n):!1}function pk(t,e,n){let r=null;const s=Ude(t),i=Lde(e),o=Object.keys(s),a=Object.keys(i),c=gk(Object.keys(t)),l=gk(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),gl(o,a)||(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Oh(e[d].accounts);h.includes(d)||(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(gl(s[d].methods,i[d].methods)?gl(s[d].events,i[d].events)||(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Ude(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function gk(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Lde(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Oh(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function Mde(t,e){return rI(t,!1)&&t<=e.max&&t>=e.min}function mk(){const t=hm();return new Promise(e=>{switch(t){case gs.browser:e(Bde());break;case gs.reactNative:e(Fde());break;case gs.node:e(zde());break;default:e(!0)}})}function Bde(){return Nh()&&(navigator==null?void 0:navigator.onLine)}async function Fde(){if(Fc()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function zde(){return!0}function Wde(t){switch(hm()){case gs.browser:qde(t);break;case gs.reactNative:Hde(t);break}}function qde(t){!Fc()&&Nh()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Hde(t){Fc()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function Vde(){var t;return Nh()&&Zl()?((t=Zl())==null?void 0:t.visibilityState)==="visible":!0}const Z1={};class pf{static get(e){return Z1[e]}static set(e,n){Z1[e]=n}static delete(e){delete Z1[e]}}function Gde(t){const e=Th.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Kde({publicKey:t,signature:e,payload:n}){var r;const s=tx(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=Qde(n.address),a=n.era==="00"?new Uint8Array([0]):tx(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${Jde(n.tip)}`),d=Xde(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=Zde(h.length+1);return new Uint8Array([...f,i,...h])}function Yde(t){const e=tx(t),n=Bae.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function tx(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Jde(t){return t.startsWith("0x")?t.slice(2):t}function Qde(t){const e=Th.decode(t)[0];return e===42?0:e===60?2:1}function Zde(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Xde(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function ehe(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=Gde(t.transaction.address),r=Kde({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return Yde(s)}const the="PARSE_ERROR",nhe="INVALID_REQUEST",rhe="METHOD_NOT_FOUND",she="INVALID_PARAMS",Ij="INTERNAL_ERROR",sI="SERVER_ERROR",ihe=[-32700,-32600,-32601,-32602,-32603],ap={[the]:{code:-32700,message:"Parse error"},[nhe]:{code:-32600,message:"Invalid Request"},[rhe]:{code:-32601,message:"Method not found"},[she]:{code:-32602,message:"Invalid params"},[Ij]:{code:-32603,message:"Internal error"},[sI]:{code:-32e3,message:"Server error"}},Tj=sI;function ohe(t){return ihe.includes(t)}function yk(t){return Object.keys(ap).includes(t)?ap[t]:ap[Tj]}function ahe(t){const e=Object.values(ap).find(n=>n.code===t);return e||ap[Tj]}function Nj(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Pj={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nx=function(t,e){return nx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},nx(t,e)};function che(t,e){nx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var rx=function(){return rx=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rx.apply(this,arguments)};function lhe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function uhe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function dhe(t,e){return function(n,r){e(n,r,t)}}function hhe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function fhe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function phe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ghe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function mhe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function sx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kj(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function yhe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kj(arguments[e]));return t}function whe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function vg(t){return this instanceof vg?(this.v=t,this):new vg(t)}function vhe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof vg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function bhe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:vg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Ehe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sx=="function"?sx(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function _he(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Che(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function xhe(t){return t&&t.__esModule?t:{default:t}}function She(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Ahe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Ihe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return rx},__asyncDelegator:bhe,__asyncGenerator:vhe,__asyncValues:Ehe,__await:vg,__awaiter:fhe,__classPrivateFieldGet:She,__classPrivateFieldSet:Ahe,__createBinding:ghe,__decorate:uhe,__exportStar:mhe,__extends:che,__generator:phe,__importDefault:xhe,__importStar:Che,__makeTemplateObject:_he,__metadata:hhe,__param:dhe,__read:kj,__rest:lhe,__spread:yhe,__spreadArrays:whe,__values:sx},Symbol.toStringTag,{value:"Module"})),The=I0(Ihe);var yo={},wk;function Nhe(){if(wk)return yo;wk=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.isBrowserCryptoAvailable=yo.getSubtleCrypto=yo.getBrowerCrypto=void 0;function t(){return(rn==null?void 0:rn.crypto)||(rn==null?void 0:rn.msCrypto)||{}}yo.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}yo.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return yo.isBrowserCryptoAvailable=n,yo}var wo={},vk;function Phe(){if(vk)return wo;vk=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.isBrowser=wo.isNode=wo.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}wo.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}wo.isNode=e;function n(){return!t()&&!e()}return wo.isBrowser=n,wo}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=The;e.__exportStar(Nhe(),t),e.__exportStar(Phe(),t)})(Pj);function Li(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function vl(t=6){return BigInt(Li(t))}function sc(t,e,n){return{id:n||Li(),jsonrpc:"2.0",method:t,params:e}}function Dv(t,e){return{id:t,jsonrpc:"2.0",result:e}}function jv(t,e,n){return{id:t,jsonrpc:"2.0",error:khe(e)}}function khe(t,e){return typeof t>"u"?yk(Ij):(typeof t=="string"&&(t=Object.assign(Object.assign({},yk(sI)),{message:t})),ohe(t.code)&&(t=ahe(t.code)),t)}let Ohe=class{},Rhe=class extends Ohe{constructor(){super()}},$he=class extends Rhe{constructor(e){super()}};const Dhe="^https?:",jhe="^wss?:";function Uhe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Oj(t,e){const n=Uhe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function bk(t){return Oj(t,Dhe)}function Ek(t){return Oj(t,jhe)}function Lhe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Rj(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function iI(t){return Rj(t)&&"method"in t}function Uv(t){return Rj(t)&&(Mi(t)||js(t))}function Mi(t){return"result"in t}function js(t){return"error"in t}let Ys=class extends $he{constructor(e){super(e),this.events=new Ks.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(sc(e.method,e.params||[],e.id||vl().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{js(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Uv(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Mhe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Bhe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",_k=t=>t.split("?")[0],Ck=10,Fhe=Mhe();let zhe=class{constructor(e){if(this.url=e,this.events=new Ks.EventEmitter,this.registering=!1,!Ek(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ko(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Ek(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=Pj.isReactNative()?void 0:{rejectUnauthorized:!Lhe(e)},i=new Fhe(e,[],s);Bhe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Ql(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=jv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return Nj(e,_k(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ck&&this.events.setMaxListeners(Ck)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${_k(this.url)}`));return this.events.emit("register_error",n),n}};var Whe={};const $j="wc",Dj=2,ix="core",ro=`${$j}@2:${ix}:`,qhe={logger:"error"},Hhe={database:":memory:"},Vhe="crypto",xk="client_ed25519_seed",Ghe=oe.ONE_DAY,Khe="keychain",Yhe="0.3",Jhe="messages",Qhe="0.3",Sk=oe.SIX_HOURS,Zhe="publisher",jj="irn",Xhe="error",Uj="wss://relay.walletconnect.org",efe="relayer",Nn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},tfe="_subscription",Ps={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},nfe=.1,ox="2.21.3",Bt={link_mode:"link_mode",relay:"relay"},cw={inbound:"inbound",outbound:"outbound"},rfe="0.3",sfe="WALLETCONNECT_CLIENT_ID",Ak="WALLETCONNECT_LINK_MODE_APPS",ls={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ife="subscription",ofe="0.3",afe="pairing",cfe="0.3",gf={wc_pairingDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:0},res:{ttl:oe.ONE_DAY,prompt:!1,tag:0}}},ol={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Xs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lfe="history",ufe="0.3",dfe="expirer",$s={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},hfe="0.3",ffe="verify-api",pfe="https://verify.walletconnect.com",Lj="https://verify.walletconnect.org",cp=Lj,gfe=`${cp}/v3`,mfe=[pfe,Lj],yfe="echo",wfe="https://echo.walletconnect.com",ji={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Eo={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ei={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Yc={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Jc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},mf={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},vfe=.1,bfe="event-client",Efe=86400,_fe="https://pulse.walletconnect.org/batch";function Cfe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,_=new Uint8Array(v);y!==b;){for(var E=p[y],x=0,S=v-1;(E!==0||x<w)&&S!==-1;S--,x++)E+=256*_[S]>>>0,_[S]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=x,y++}for(var T=v-w;T!==v&&_[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(_[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var E=0,x=b-1;(_!==0||E<y)&&x!==-1;x--,E++)_+=a*v[x]>>>0,v[x]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var S=b-y;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(w+(b-S)),C=w;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var xfe=Cfe,Sfe=xfe;const Mj=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Afe=t=>new TextEncoder().encode(t),Ife=t=>new TextDecoder().decode(t);class Tfe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Nfe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Bj(this,e)}}class Pfe{constructor(e){this.decoders=e}or(e){return Bj(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Bj=(t,e)=>new Pfe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class kfe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Tfe(e,n,r),this.decoder=new Nfe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Lv=({name:t,prefix:e,encode:n,decode:r})=>new kfe(t,e,n,r),mm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Sfe(n,e);return Lv({prefix:t,name:e,encode:r,decode:i=>Mj(s(i))})},Ofe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Rfe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Qn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Lv({prefix:e,name:t,encode(s){return Rfe(s,r,n)},decode(s){return Ofe(s,r,n,t)}}),$fe=Lv({prefix:"\0",name:"identity",encode:t=>Ife(t),decode:t=>Afe(t)});var Dfe=Object.freeze({__proto__:null,identity:$fe});const jfe=Qn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ufe=Object.freeze({__proto__:null,base2:jfe});const Lfe=Qn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Mfe=Object.freeze({__proto__:null,base8:Lfe});const Bfe=mm({prefix:"9",name:"base10",alphabet:"0123456789"});var Ffe=Object.freeze({__proto__:null,base10:Bfe});const zfe=Qn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Wfe=Qn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var qfe=Object.freeze({__proto__:null,base16:zfe,base16upper:Wfe});const Hfe=Qn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Vfe=Qn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gfe=Qn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kfe=Qn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yfe=Qn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Jfe=Qn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qfe=Qn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zfe=Qn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Xfe=Qn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var epe=Object.freeze({__proto__:null,base32:Hfe,base32upper:Vfe,base32pad:Gfe,base32padupper:Kfe,base32hex:Yfe,base32hexupper:Jfe,base32hexpad:Qfe,base32hexpadupper:Zfe,base32z:Xfe});const tpe=mm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),npe=mm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rpe=Object.freeze({__proto__:null,base36:tpe,base36upper:npe});const spe=mm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ipe=mm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ope=Object.freeze({__proto__:null,base58btc:spe,base58flickr:ipe});const ape=Qn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cpe=Qn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lpe=Qn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),upe=Qn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var dpe=Object.freeze({__proto__:null,base64:ape,base64pad:cpe,base64url:lpe,base64urlpad:upe});const Fj=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),hpe=Fj.reduce((t,e,n)=>(t[n]=e,t),[]),fpe=Fj.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function ppe(t){return t.reduce((e,n)=>(e+=hpe[n],e),"")}function gpe(t){const e=[];for(const n of t){const r=fpe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const mpe=Lv({prefix:"🚀",name:"base256emoji",encode:ppe,decode:gpe});var ype=Object.freeze({__proto__:null,base256emoji:mpe}),wpe=zj,Ik=128,vpe=-128,bpe=Math.pow(2,31);function zj(t,e,n){e=e||[],n=n||0;for(var r=n;t>=bpe;)e[n++]=t&255|Ik,t/=128;for(;t&vpe;)e[n++]=t&255|Ik,t>>>=7;return e[n]=t|0,zj.bytes=n-r+1,e}var Epe=ax,_pe=128,Tk=127;function ax(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw ax.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Tk)<<s:(o&Tk)*Math.pow(2,s),s+=7}while(o>=_pe);return ax.bytes=i-r,n}var Cpe=Math.pow(2,7),xpe=Math.pow(2,14),Spe=Math.pow(2,21),Ape=Math.pow(2,28),Ipe=Math.pow(2,35),Tpe=Math.pow(2,42),Npe=Math.pow(2,49),Ppe=Math.pow(2,56),kpe=Math.pow(2,63),Ope=function(t){return t<Cpe?1:t<xpe?2:t<Spe?3:t<Ape?4:t<Ipe?5:t<Tpe?6:t<Npe?7:t<Ppe?8:t<kpe?9:10},Rpe={encode:wpe,decode:Epe,encodingLength:Ope},Wj=Rpe;const Nk=(t,e,n=0)=>(Wj.encode(t,e,n),e),Pk=t=>Wj.encodingLength(t),cx=(t,e)=>{const n=e.byteLength,r=Pk(t),s=r+Pk(n),i=new Uint8Array(s+n);return Nk(t,i,0),Nk(n,i,r),i.set(e,s),new $pe(t,n,e,i)};class $pe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const qj=({name:t,code:e,encode:n})=>new Dpe(t,e,n);class Dpe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?cx(this.code,n):n.then(r=>cx(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Hj=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),jpe=qj({name:"sha2-256",code:18,encode:Hj("SHA-256")}),Upe=qj({name:"sha2-512",code:19,encode:Hj("SHA-512")});var Lpe=Object.freeze({__proto__:null,sha256:jpe,sha512:Upe});const Vj=0,Mpe="identity",Gj=Mj,Bpe=t=>cx(Vj,Gj(t)),Fpe={code:Vj,name:Mpe,encode:Gj,digest:Bpe};var zpe=Object.freeze({__proto__:null,identity:Fpe});new TextEncoder,new TextDecoder;const kk={...Dfe,...Ufe,...Mfe,...Ffe,...qfe,...epe,...rpe,...ope,...dpe,...ype};({...Lpe,...zpe});function Kj(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Wpe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Kj(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Yj(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Ok=Yj("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),X1=Yj("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Wpe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),qpe={utf8:Ok,"utf-8":Ok,hex:kk.base16,latin1:X1,ascii:X1,binary:X1,...kk};function Hpe(t,e="utf8"){const n=qpe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Kj(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var Vpe=Object.defineProperty,Gpe=(t,e,n)=>e in t?Vpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$i=(t,e,n)=>Gpe(t,typeof e!="symbol"?e+"":e,n);class Kpe{constructor(e,n){this.core=e,this.logger=n,$i(this,"keychain",new Map),$i(this,"name",Khe),$i(this,"version",Yhe),$i(this,"initialized",!1),$i(this,"storagePrefix",ro),$i(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),$i(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),$i(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),$i(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=ae("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),$i(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=fr(n,this.name)}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,WC(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?qC(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ype=Object.defineProperty,Jpe=(t,e,n)=>e in t?Ype(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mn=(t,e,n)=>Jpe(t,typeof e!="symbol"?e+"":e,n);class Qpe{constructor(e,n,r){this.core=e,this.logger=n,Mn(this,"name",Vhe),Mn(this,"keychain"),Mn(this,"randomSessionIdentifier",ex()),Mn(this,"initialized",!1),Mn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Mn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Mn(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=dP(s);return G6(i.publicKey)}),Mn(this,"generateKeyPair",()=>{this.isInitialized();const s=que();return this.setPrivateKey(s.publicKey,s.privateKey)}),Mn(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=dP(i),a=this.randomSessionIdentifier;return await Jse(a,s,Ghe,o)}),Mn(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Hue(a,i);return this.setSymKey(c,o)}),Mn(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||aw(s);return await this.keychain.set(o,s),o}),Mn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Mn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Mn(this,"encode",async(s,i,o)=>{this.isInitialized();const a=xj(o),c=Ko(i);if(ik(a))return Kue(c,o==null?void 0:o.encoding);if(sk(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return Vue({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Mn(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Jue(i,o);if(ik(a)){const c=Yue(i,o==null?void 0:o.encoding);return Ql(c)}if(sk(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=Gue({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Ql(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Mn(this,"getPayloadType",(s,i=yi)=>{const o=wg({encoded:s,encoding:i});return tu(o.type)}),Mn(this,"getPayloadSenderPublicKey",(s,i=yi)=>{const o=wg({encoded:s,encoding:i});return o.senderPublicKey?ts(o.senderPublicKey,xr):void 0}),this.core=e,this.logger=fr(n,this.name),this.keychain=r||new Kpe(this.core,this.logger)}get context(){return rs(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(xk)}catch{e=ex(),await this.keychain.set(xk,e)}return Hpe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Zpe=Object.defineProperty,Xpe=Object.defineProperties,ege=Object.getOwnPropertyDescriptors,Rk=Object.getOwnPropertySymbols,tge=Object.prototype.hasOwnProperty,nge=Object.prototype.propertyIsEnumerable,lx=(t,e,n)=>e in t?Zpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rge=(t,e)=>{for(var n in e||(e={}))tge.call(e,n)&&lx(t,n,e[n]);if(Rk)for(var n of Rk(e))nge.call(e,n)&&lx(t,n,e[n]);return t},sge=(t,e)=>Xpe(t,ege(e)),os=(t,e,n)=>lx(t,typeof e!="symbol"?e+"":e,n);class ige extends Kte{constructor(e,n){super(e,n),this.logger=e,this.core=n,os(this,"messages",new Map),os(this,"messagesWithoutClientAck",new Map),os(this,"name",Jhe),os(this,"version",Qhe),os(this,"initialized",!1),os(this,"storagePrefix",ro),os(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),os(this,"set",async(r,s,i)=>{this.isInitialized();const o=Hi(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===cw.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,sge(rge({},c),{[o]:s}))}return await this.persist(),o}),os(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),os(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),os(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Hi(s);return typeof i[o]<"u"}),os(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Hi(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),os(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=fr(e,this.name),this.core=n}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,WC(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,WC(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?qC(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?qC(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var oge=Object.defineProperty,age=Object.defineProperties,cge=Object.getOwnPropertyDescriptors,$k=Object.getOwnPropertySymbols,lge=Object.prototype.hasOwnProperty,uge=Object.prototype.propertyIsEnumerable,ux=(t,e,n)=>e in t?oge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cy=(t,e)=>{for(var n in e||(e={}))lge.call(e,n)&&ux(t,n,e[n]);if($k)for(var n of $k(e))uge.call(e,n)&&ux(t,n,e[n]);return t},eE=(t,e)=>age(t,cge(e)),ti=(t,e,n)=>ux(t,typeof e!="symbol"?e+"":e,n);class dge extends Yte{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,ti(this,"events",new Ks.EventEmitter),ti(this,"name",Zhe),ti(this,"queue",new Map),ti(this,"publishTimeout",oe.toMiliseconds(oe.ONE_MINUTE)),ti(this,"initialPublishTimeout",oe.toMiliseconds(oe.ONE_SECOND*15)),ti(this,"needsTransportRestart",!1),ti(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||Sk,c=h0(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||vl().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(Nn.publish,w),g(h))};this.relayer.events.on(Nn.publish,w);const y=rc(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(_=>{this.logger.warn(_,_==null?void 0:_.message),v(_)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Nn.publish,w)}catch(b){this.queue.set(d,eE(Cy({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await rc(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),ti(this,"on",(r,s)=>{this.events.on(r,s)}),ti(this,"once",(r,s)=>{this.events.once(r,s)}),ti(this,"off",(r,s)=>{this.events.off(r,s)}),ti(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=fr(n,this.name),this.registerEventListeners()}get context(){return rs(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=Sk,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Uf(h0().protocol).publish,params:Cy({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Wn((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Wn((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Nn.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,eE(Cy({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(eE(Cy({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(gu.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Nn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Nn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var hge=Object.defineProperty,fge=(t,e,n)=>e in t?hge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$u=(t,e,n)=>fge(t,typeof e!="symbol"?e+"":e,n);class pge{constructor(){$u(this,"map",new Map),$u(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),$u(this,"get",e=>this.map.get(e)||[]),$u(this,"exists",(e,n)=>this.get(e).includes(n)),$u(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),$u(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var gge=Object.defineProperty,mge=Object.defineProperties,yge=Object.getOwnPropertyDescriptors,Dk=Object.getOwnPropertySymbols,wge=Object.prototype.hasOwnProperty,vge=Object.prototype.propertyIsEnumerable,dx=(t,e,n)=>e in t?gge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yf=(t,e)=>{for(var n in e||(e={}))wge.call(e,n)&&dx(t,n,e[n]);if(Dk)for(var n of Dk(e))vge.call(e,n)&&dx(t,n,e[n]);return t},tE=(t,e)=>mge(t,yge(e)),Tt=(t,e,n)=>dx(t,typeof e!="symbol"?e+"":e,n);class bge extends Zte{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Tt(this,"subscriptions",new Map),Tt(this,"topicMap",new pge),Tt(this,"events",new Ks.EventEmitter),Tt(this,"name",ife),Tt(this,"version",ofe),Tt(this,"pending",new Map),Tt(this,"cached",[]),Tt(this,"initialized",!1),Tt(this,"storagePrefix",ro),Tt(this,"subscribeTimeout",oe.toMiliseconds(oe.ONE_MINUTE)),Tt(this,"initialSubscribeTimeout",oe.toMiliseconds(oe.ONE_SECOND*15)),Tt(this,"clientId"),Tt(this,"batchSubscribeTopicsLimit",500),Tt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Tt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=h0(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Tt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Tt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Tt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Tt(this,"on",(r,s)=>{this.events.on(r,s)}),Tt(this,"once",(r,s)=>{this.events.once(r,s)}),Tt(this,"off",(r,s)=>{this.events.off(r,s)}),Tt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Tt(this,"start",async()=>{await this.onConnect()}),Tt(this,"stop",async()=>{await this.onDisconnect()}),Tt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Tt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Tt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(gu.pulse,async()=>{await this.checkPending()}),this.events.on(ls.created,async r=>{const s=ls.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(ls.deleted,async r=>{const s=ls.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=fr(n,this.name),this.clientId=""}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=h0(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Wt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Bt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Uf(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Bt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},oe.toMiliseconds(oe.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(ls.created,d),u(h.id))};this.events.on(ls.created,d);try{const h=await rc(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ls.created,d),u(h)}catch{}}),l=await rc(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Nn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Uf(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await rc(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Nn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Uf(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await rc(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Nn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Uf(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,tE(yf({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,yf({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,yf({},n)),this.topicMap.set(n.topic,e),this.events.emit(ls.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(ls.deleted,tE(yf({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ls.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ls.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>tE(yf({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await fce(oe.toMiliseconds(oe.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Hi(e+await this.getClientId())}}var Ege=Object.defineProperty,jk=Object.getOwnPropertySymbols,_ge=Object.prototype.hasOwnProperty,Cge=Object.prototype.propertyIsEnumerable,hx=(t,e,n)=>e in t?Ege(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uk=(t,e)=>{for(var n in e||(e={}))_ge.call(e,n)&&hx(t,n,e[n]);if(jk)for(var n of jk(e))Cge.call(e,n)&&hx(t,n,e[n]);return t},ct=(t,e,n)=>hx(t,typeof e!="symbol"?e+"":e,n);class xge extends Jte{constructor(e){super(e),ct(this,"protocol","wc"),ct(this,"version",2),ct(this,"core"),ct(this,"logger"),ct(this,"events",new Ks.EventEmitter),ct(this,"provider"),ct(this,"messages"),ct(this,"subscriber"),ct(this,"publisher"),ct(this,"name",efe),ct(this,"transportExplicitlyClosed",!1),ct(this,"initialized",!1),ct(this,"connectionAttemptInProgress",!1),ct(this,"relayUrl"),ct(this,"projectId"),ct(this,"packageName"),ct(this,"bundleId"),ct(this,"hasExperiencedNetworkDisruption",!1),ct(this,"pingTimeout"),ct(this,"heartBeatTimeout",oe.toMiliseconds(oe.THIRTY_SECONDS+oe.FIVE_SECONDS)),ct(this,"reconnectTimeout"),ct(this,"connectPromise"),ct(this,"reconnectInProgress",!1),ct(this,"requestsInFlight",[]),ct(this,"connectTimeout",oe.toMiliseconds(oe.ONE_SECOND*15)),ct(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||vl().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),ct(this,"resetPingTimeout",()=>{c0()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),ct(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),ct(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Nn.connect)}),ct(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),ct(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Nn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),ct(this,"registerProviderListeners",()=>{this.provider.on(Ps.payload,this.onPayloadHandler),this.provider.on(Ps.connect,this.onConnectHandler),this.provider.on(Ps.disconnect,this.onDisconnectHandler),this.provider.on(Ps.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?fr(e.logger,this.name):cm(Ch({level:e.logger||Xhe})),this.messages=new ige(this.logger,e.core),this.subscriber=new bge(this,this.logger),this.publisher=new dge(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Uj,this.projectId=e.projectId,Qae()?this.packageName=AP():Zae()&&(this.bundleId=AP()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return rs(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Bt.relay},cw.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(ls.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(ls.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Uk({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await rc(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await mk())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=yn(oe.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Nn.message,e),await this.recordMessageEvent(e,cw.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ps.disconnect,i),await rc(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ps.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ps.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ps.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,oe.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(c0())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ys(new zhe(rce({sdkVersion:ox,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),iI(e)){if(!e.method.endsWith(tfe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Bt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Uk({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Uv(e)&&this.events.emit(Nn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,cw.inbound),this.events.emit(Nn.message,e))}async acknowledgePayload(e){const n=Dv(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ps.payload,this.onPayloadHandler),this.provider.off(Ps.connect,this.onConnectHandler),this.provider.off(Ps.disconnect,this.onDisconnectHandler),this.provider.off(Ps.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await mk();Wde(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(gu.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Vde())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Nn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},oe.toMiliseconds(nfe)))))}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Sge(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Lk(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Mk(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Age="[object RegExp]",Ige="[object String]",Tge="[object Number]",Nge="[object Boolean]",Bk="[object Arguments]",Pge="[object Symbol]",kge="[object Date]",Oge="[object Map]",Rge="[object Set]",$ge="[object Array]",Dge="[object Function]",jge="[object ArrayBuffer]",nE="[object Object]",Uge="[object Error]",Lge="[object DataView]",Mge="[object Uint8Array]",Bge="[object Uint8ClampedArray]",Fge="[object Uint16Array]",zge="[object Uint32Array]",Wge="[object BigUint64Array]",qge="[object Int8Array]",Hge="[object Int16Array]",Vge="[object Int32Array]",Gge="[object BigInt64Array]",Kge="[object Float32Array]",Yge="[object Float64Array]";function Jge(){}function Fk(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Qge(t,e,n){return Lf(t,e,void 0,void 0,void 0,void 0,n)}function Lf(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return lp(t,e,i,o)}return lp(t,e,i,o)}function lp(t,e,n,r){if(Object.is(t,e))return!0;let s=Mk(t),i=Mk(e);if(s===Bk&&(s=nE),i===Bk&&(i=nE),s!==i)return!1;switch(s){case Ige:return t.toString()===e.toString();case Tge:{const c=t.valueOf(),l=e.valueOf();return Sge(c,l)}case Nge:case kge:case Pge:return Object.is(t.valueOf(),e.valueOf());case Age:return t.source===e.source&&t.flags===e.flags;case Dge:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case Oge:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Lf(l,e.get(c),c,t,e,n,r))return!1;return!0}case Rge:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Lf(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case $ge:case Mge:case Bge:case Fge:case zge:case Wge:case qge:case Hge:case Vge:case Gge:case Kge:case Yge:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Lf(t[c],e[c],c,t,e,n,r))return!1;return!0}case jge:return t.byteLength!==e.byteLength?!1:lp(new Uint8Array(t),new Uint8Array(e),n,r);case Lge:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:lp(new Uint8Array(t),new Uint8Array(e),n,r);case Uge:return t.name===e.name&&t.message===e.message;case nE:{if(!(lp(t.constructor,e.constructor,n,r)||Fk(t)&&Fk(e)))return!1;const c=[...Object.keys(t),...Lk(t)],l=[...Object.keys(e),...Lk(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Lf(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Zge(t,e){return Qge(t,e,Jge)}var Xge=Object.defineProperty,zk=Object.getOwnPropertySymbols,eme=Object.prototype.hasOwnProperty,tme=Object.prototype.propertyIsEnumerable,fx=(t,e,n)=>e in t?Xge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wk=(t,e)=>{for(var n in e||(e={}))eme.call(e,n)&&fx(t,n,e[n]);if(zk)for(var n of zk(e))tme.call(e,n)&&fx(t,n,e[n]);return t},Dr=(t,e,n)=>fx(t,typeof e!="symbol"?e+"":e,n);class wu extends Qte{constructor(e,n,r,s=ro,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Dr(this,"map",new Map),Dr(this,"version",rfe),Dr(this,"cached",[]),Dr(this,"initialized",!1),Dr(this,"getKey"),Dr(this,"storagePrefix",ro),Dr(this,"recentlyDeleted",[]),Dr(this,"recentlyDeletedLimit",200),Dr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Wn(o)?this.map.set(this.getKey(o),o):bde(o)?this.map.set(o.id,o):Ede(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Dr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Dr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Dr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Zge(a[c],o[c]))):this.values)),Dr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Wk(Wk({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Dr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=fr(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=ae("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nme=Object.defineProperty,rme=(t,e,n)=>e in t?nme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qe=(t,e,n)=>rme(t,typeof e!="symbol"?e+"":e,n);class sme{constructor(e,n){this.core=e,this.logger=n,Qe(this,"name",afe),Qe(this,"version",cfe),Qe(this,"events",new IA),Qe(this,"pairings"),Qe(this,"initialized",!1),Qe(this,"storagePrefix",ro),Qe(this,"ignoredPayloadTypes",[Uo]),Qe(this,"registeredMethods",[]),Qe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Qe(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Qe(this,"create",async r=>{this.isInitialized();const s=ex(),i=await this.core.crypto.setSymKey(s),o=yn(oe.FIVE_MINUTES),a={protocol:jj},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=ak({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ol.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Qe(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ji.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=ok(r.uri);s.props.properties.topic=i,s.addTrace(ji.pairing_uri_validation_success),s.addTrace(ji.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(ji.existing_pairing),u.active)throw s.setError(Eo.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ji.pairing_not_expired)}const d=c||yn(oe.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(ji.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ol.create,h),s.addTrace(ji.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ji.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Eo.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Eo.subscribe_pairing_topic_failure),f}return s.addTrace(ji.subscribe_pairing_topic_success),h}),Qe(this,"activate",async({topic:r})=>{this.isInitialized();const s=yn(oe.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Qe(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=nl();this.events.once(pt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Qe(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Qe(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Qe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Qe(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Wt("USER_DISCONNECTED")),await this.deletePairing(s))}),Qe(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return ak({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Qe(this,"sendRequest",async(r,s,i)=>{const o=sc(s,i),a=await this.core.crypto.encode(r,o),c=gf[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Qe(this,"sendResult",async(r,s,i)=>{const o=Dv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=gf[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Qe(this,"sendError",async(r,s,i)=>{const o=jv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=gf[c]?gf[c].res:gf.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Qe(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Wt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Qe(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Oa(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Qe(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Qe(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Qe(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ol.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Qe(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Mi(s)?this.events.emit(pt("pairing_ping",i),{}):js(s)&&this.events.emit(pt("pairing_ping",i),{error:s.error})},500)}),Qe(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ol.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Qe(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Wt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Qe(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Wt("WC_METHOD_UNSUPPORTED",r))}),Qe(this,"isValidPair",(r,s)=>{var i;if(!Br(r)){const{message:a}=ae("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Eo.malformed_pairing_uri),new Error(a)}if(!vde(r.uri)){const{message:a}=ae("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Eo.malformed_pairing_uri),new Error(a)}const o=ok(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=ae("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Eo.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ae("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Eo.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&oe.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Eo.pairing_expired);const{message:a}=ae("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Qe(this,"isValidPing",async r=>{if(!Br(r)){const{message:i}=ae("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Qe(this,"isValidDisconnect",async r=>{if(!Br(r)){const{message:i}=ae("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Qe(this,"isValidPairingTopic",async r=>{if(!fn(r,!1)){const{message:s}=ae("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Oa(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=ae("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=fr(n,this.name),this.pairings=new wu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return rs(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Nn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Bt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);iI(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):Uv(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on($s.expired,async e=>{const{topic:n}=$4(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ol.expire,{topic:n}))})}}var ime=Object.defineProperty,ome=(t,e,n)=>e in t?ime(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bn=(t,e,n)=>ome(t,typeof e!="symbol"?e+"":e,n);class ame extends Gte{constructor(e,n){super(e,n),this.core=e,this.logger=n,Bn(this,"records",new Map),Bn(this,"events",new Ks.EventEmitter),Bn(this,"name",lfe),Bn(this,"version",ufe),Bn(this,"cached",[]),Bn(this,"initialized",!1),Bn(this,"storagePrefix",ro),Bn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Bn(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:yn(oe.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Xs.created,o)}),Bn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=js(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Xs.updated,s))}),Bn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Bn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Xs.deleted,i)}}),this.persist()}),Bn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Bn(this,"on",(r,s)=>{this.events.on(r,s)}),Bn(this,"once",(r,s)=>{this.events.once(r,s)}),Bn(this,"off",(r,s)=>{this.events.off(r,s)}),Bn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=fr(n,this.name)}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:sc(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Xs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Xs.created,e=>{const n=Xs.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Xs.updated,e=>{const n=Xs.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Xs.deleted,e=>{const n=Xs.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(gu.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{oe.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Xs.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var cme=Object.defineProperty,lme=(t,e,n)=>e in t?cme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ar=(t,e,n)=>lme(t,typeof e!="symbol"?e+"":e,n);class ume extends Xte{constructor(e,n){super(e,n),this.core=e,this.logger=n,ar(this,"expirations",new Map),ar(this,"events",new Ks.EventEmitter),ar(this,"name",dfe),ar(this,"version",hfe),ar(this,"cached",[]),ar(this,"initialized",!1),ar(this,"storagePrefix",ro),ar(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ar(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ar(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit($s.created,{target:i,expiration:o})}),ar(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ar(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit($s.deleted,{target:s,expiration:i})}}),ar(this,"on",(r,s)=>{this.events.on(r,s)}),ar(this,"once",(r,s)=>{this.events.once(r,s)}),ar(this,"off",(r,s)=>{this.events.off(r,s)}),ar(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=fr(n,this.name)}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return sce(e);if(typeof e=="number")return ice(e);const{message:n}=ae("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit($s.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;oe.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit($s.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(gu.pulse,()=>this.checkExpirations()),this.events.on($s.created,e=>{const n=$s.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on($s.expired,e=>{const n=$s.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on($s.deleted,e=>{const n=$s.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dme=Object.defineProperty,hme=(t,e,n)=>e in t?dme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dn=(t,e,n)=>hme(t,typeof e!="symbol"?e+"":e,n);class fme extends ene{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,dn(this,"name",ffe),dn(this,"abortController"),dn(this,"isDevEnv"),dn(this,"verifyUrlV3",gfe),dn(this,"storagePrefix",ro),dn(this,"version",Dj),dn(this,"publicKey"),dn(this,"fetchPromise"),dn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&oe.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),dn(this,"register",async s=>{if(!Nh()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Zl(),u=this.startAbortTimer(oe.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(jC(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),dn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(jC(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),dn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(oe.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),dn(this,"getVerifyUrl",s=>{let i=s||cp;return mfe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${cp}`),i=cp),i}),dn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(oe.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),dn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),dn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),dn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),dn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),dn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),dn(this,"validateAttestation",(s,i)=>{const o=Zue(s,i.publicKey),a={hasExpired:oe.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=fr(n,this.name),this.abortController=new AbortController,this.isDevEnv=qA(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return rs(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),oe.toMiliseconds(e))}}var pme=Object.defineProperty,gme=(t,e,n)=>e in t?pme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qk=(t,e,n)=>gme(t,typeof e!="symbol"?e+"":e,n);class mme extends tne{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,qk(this,"context",yfe),qk(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${wfe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=fr(n,this.context)}}var yme=Object.defineProperty,Hk=Object.getOwnPropertySymbols,wme=Object.prototype.hasOwnProperty,vme=Object.prototype.propertyIsEnumerable,px=(t,e,n)=>e in t?yme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wf=(t,e)=>{for(var n in e||(e={}))wme.call(e,n)&&px(t,n,e[n]);if(Hk)for(var n of Hk(e))vme.call(e,n)&&px(t,n,e[n]);return t},xn=(t,e,n)=>px(t,typeof e!="symbol"?e+"":e,n);class bme extends nne{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,xn(this,"context",bfe),xn(this,"storagePrefix",ro),xn(this,"storageVersion",vfe),xn(this,"events",new Map),xn(this,"shouldPersist",!1),xn(this,"init",async()=>{if(!qA())try{const s={eventId:TP(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:O4(this.core.relayer.protocol,this.core.relayer.version,ox)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),xn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=TP(),u=this.core.projectId||"",d=Date.now(),h=wf({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),xn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return wf(wf({},a),this.setMethods(a.eventId))}),xn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),xn(this,"setEventListeners",()=>{this.core.heartbeat.on(gu.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{oe.fromMiliseconds(Date.now())-oe.fromMiliseconds(s.timestamp)>Efe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),xn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),xn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),xn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),xn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),xn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,wf(wf({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),xn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),xn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${_fe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${ox}${i}`,{method:"POST",body:JSON.stringify(s)})}),xn(this,"getAppDomain",()=>k4().url),this.logger=fr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Eme=Object.defineProperty,Vk=Object.getOwnPropertySymbols,_me=Object.prototype.hasOwnProperty,Cme=Object.prototype.propertyIsEnumerable,gx=(t,e,n)=>e in t?Eme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gk=(t,e)=>{for(var n in e||(e={}))_me.call(e,n)&&gx(t,n,e[n]);if(Vk)for(var n of Vk(e))Cme.call(e,n)&&gx(t,n,e[n]);return t},Pt=(t,e,n)=>gx(t,typeof e!="symbol"?e+"":e,n);let xme=class Jj extends Wte{constructor(e){var n;super(e),Pt(this,"protocol",$j),Pt(this,"version",Dj),Pt(this,"name",ix),Pt(this,"relayUrl"),Pt(this,"projectId"),Pt(this,"customStoragePrefix"),Pt(this,"events",new Ks.EventEmitter),Pt(this,"logger"),Pt(this,"heartbeat"),Pt(this,"relayer"),Pt(this,"crypto"),Pt(this,"storage"),Pt(this,"history"),Pt(this,"expirer"),Pt(this,"pairing"),Pt(this,"verify"),Pt(this,"echoClient"),Pt(this,"linkModeSupportedApps"),Pt(this,"eventClient"),Pt(this,"initialized",!1),Pt(this,"logChunkController"),Pt(this,"on",(a,c)=>this.events.on(a,c)),Pt(this,"once",(a,c)=>this.events.once(a,c)),Pt(this,"off",(a,c)=>this.events.off(a,c)),Pt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Pt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Bt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Uj,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Ch({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:qhe.logger,name:ix}),{logger:i,chunkLoggerController:o}=NA({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=fr(i,this.name),this.heartbeat=new kee,this.crypto=new Qpe(this,this.logger,e==null?void 0:e.keychain),this.history=new ame(this,this.logger),this.expirer=new ume(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new fte(Gk(Gk({},Hhe),e==null?void 0:e.storageOptions)),this.relayer=new xge({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new sme(this,this.logger),this.verify=new fme(this,this.logger,this.storage),this.echoClient=new mme(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new bme(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new Jj(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(sfe,r),n}get context(){return rs(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Ak,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Ak)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Whe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const Sme=xme,Qj="wc",Zj=2,Xj="client",oI=`${Qj}@${Zj}:${Xj}:`,rE={name:Xj,logger:"error"},Kk="WALLETCONNECT_DEEPLINK_CHOICE",Ame="proposal",Yk="Proposal expired",Ime="session",Du=oe.SEVEN_DAYS,Tme="engine",Sn={wc_sessionPropose:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:oe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:oe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1119}}},sE={min:oe.FIVE_MINUTES,max:oe.SEVEN_DAYS},Di={idle:"IDLE",active:"ACTIVE"},Nme={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Pme="request",kme=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Ome="wc",Rme="auth",$me="authKeys",Dme="pairingTopics",jme="requests",Mv=`${Ome}@${1.5}:${Rme}:`,lw=`${Mv}:PUB_KEY`;var Ume=Object.defineProperty,Lme=Object.defineProperties,Mme=Object.getOwnPropertyDescriptors,Jk=Object.getOwnPropertySymbols,Bme=Object.prototype.hasOwnProperty,Fme=Object.prototype.propertyIsEnumerable,mx=(t,e,n)=>e in t?Ume(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lt=(t,e)=>{for(var n in e||(e={}))Bme.call(e,n)&&mx(t,n,e[n]);if(Jk)for(var n of Jk(e))Fme.call(e,n)&&mx(t,n,e[n]);return t},jr=(t,e)=>Lme(t,Mme(e)),te=(t,e,n)=>mx(t,typeof e!="symbol"?e+"":e,n);class zme extends one{constructor(e){super(e),te(this,"name",Tme),te(this,"events",new IA),te(this,"initialized",!1),te(this,"requestQueue",{state:Di.idle,queue:[]}),te(this,"sessionRequestQueue",{state:Di.idle,queue:[]}),te(this,"requestQueueDelay",oe.ONE_SECOND),te(this,"expectedPairingMethodMap",new Map),te(this,"recentlyDeletedMap",new Map),te(this,"recentlyDeletedLimit",200),te(this,"relayMessageCache",[]),te(this,"pendingSessions",new Map),te(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Sn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay)))}),te(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=jr(Lt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=pde(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const x=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=x.active}}catch(x){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),x}if(!u||!h){const{topic:x,uri:S}=await this.client.core.pairing.create();u=x,d=S}if(!u){const{message:x}=ae("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(x)}const f=await this.client.core.crypto.generateKeyPair(),p=Sn.wc_sessionPropose.req.ttl||oe.FIVE_MINUTES,g=yn(p),w=jr(Lt(Lt({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:jj}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Li()}),y=pt("session_connect",w.id),{reject:b,resolve:v,done:_}=nl(p,Yk),E=({id:x})=>{x===w.id&&(this.client.events.off("proposal_expire",E),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:Yk,code:0}}))};return this.client.events.on("proposal_expire",E),this.events.once(y,({error:x,session:S})=>{this.client.events.off("proposal_expire",E),x?b(x):S&&v(S)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:_}}),te(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),te(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[ei.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(Yc.no_internet_connection),C}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Yc.proposal_not_found),C}try{await this.isValidApprove(n)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Yc.session_approve_namespace_validation_failure),C}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ei.session_approve_started,properties:{topic:p,trace:[ei.session_approve_started,ei.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,E=await this.client.core.crypto.generateSharedKey(v,_),x=Lt(Lt(Lt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:yn(Du)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),S=Bt.relay;b.addTrace(ei.subscribing_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:S})}catch(C){throw b.setError(Yc.subscribe_session_topic_failure),C}b.addTrace(ei.subscribe_session_topic_success);const T=jr(Lt({},x),{topic:E,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:x.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Bt.relay});await this.client.session.set(E,T),b.addTrace(ei.store_session);try{b.addTrace(ei.publishing_session_settle),await this.sendRequest({topic:E,method:"wc_sessionSettle",params:x,throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(Yc.session_settle_publish_failure),C}),b.addTrace(ei.session_settle_publish_success),b.addTrace(ei.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(Yc.session_approve_publish_failure),C}),b.addTrace(ei.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(E,Wt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(E),C}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(E,yn(Du)),{topic:E,acknowledged:()=>Promise.resolve(this.client.session.get(E))}}),te(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Sn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),te(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=nl(),c=Li(),l=vl().toString(),u=this.client.session.get(r).namespaces;return this.events.once(pt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),te(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Li(),{done:i,resolve:o,reject:a}=nl();return this.events.once(pt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,yn(Du)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),te(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:r,request:s,topic:i,expiry:o=Sn.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Bt.relay&&await this.confirmOnlineStateOrThrow();const c=Li(),l=vl().toString(),{done:u,resolve:d,reject:h}=nl(o,"Request expired. Please try again.");this.events.once(pt("session_request",c),({error:w,result:y})=>{w?h(w):d(y)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:jr(Lt({},s),{expiryTimestamp:yn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:jr(Lt({},s),{expiryTimestamp:yn(o)}),chainId:r};return await Promise.all([new Promise(async w=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),w()}),new Promise(async w=>{var y;if(!((y=a.sessionConfig)!=null&&y.disableDeepLink)){const b=await lce(this.client.core.storage,Kk);await oce({id:c,topic:i,wcDeepLink:b})}w()}),u()]).then(w=>w[2])}),te(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Bt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Mi(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):js(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),te(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Li(),i=vl().toString(),{done:o,resolve:a,reject:c}=nl();this.events.once(pt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),te(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=vl().toString(),a=Li();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),te(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Wt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=ae("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),te(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>yde(r,n)))),te(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),te(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Bt.link_mode:Bt.relay;o===Bt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const _=await this.client.core.crypto.generateKeyPair(),E=aw(_);if(await Promise.all([this.client.auth.authKeys.set(lw,{responseTopic:E,publicKey:_}),this.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:b})]),await this.client.core.relayer.subscribe(E,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:k}=Td(a[0]);let U=xle(k,"request",g);ow(y)&&(U=Ale(U,y.pop())),y.push(U)}const x=w&&w>Sn.wc_sessionAuthenticate.req.ttl?w:Sn.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:yn(x)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},C={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:yn(Sn.wc_sessionPropose.req.ttl),id:Li()},{done:O,resolve:R,reject:F}=nl(x,"Request expired"),q=Li(),B=pt("session_connect",C.id),I=pt("session_request",q),A=async({error:k,session:U})=>{this.events.off(I,j),k?F(k):U&&R({session:U})},j=async k=>{var U,z,G;if(await this.deletePendingAuthRequest(q,{message:"fulfilled",code:0}),k.error){const De=Wt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===De.code?void 0:(this.events.off(B,A),F(k.error.message))}await this.deleteProposal(C.id),this.events.off(B,A);const{cacaos:Q,responder:Y}=k.result,Z=[],se=[];for(const De of Q){await MP({cacao:De,projectId:this.client.core.projectId})||(this.client.logger.error(De,"Signature verification failed"),F(Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ke}=De,Zt=ow(Ke.resources),Is=[HC(Ke.iss)],it=l0(Ke.iss);if(Zt){const Le=BP(Zt),Dt=FP(Zt);Z.push(...Le),Is.push(...Dt)}for(const Le of Is)se.push(`${Le}:${it}`)}const Pe=await this.client.core.crypto.generateSharedKey(_,Y.publicKey);let Oe;Z.length>0&&(Oe={topic:Pe,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:Y,controller:Y.publicKey,expiry:yn(Du),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:dk([...new Set(Z)],[...new Set(se)]),transportType:o},await this.client.core.relayer.subscribe(Pe,{transportType:o}),await this.client.session.set(Pe,Oe),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:Y.metadata}),Oe=this.client.session.get(Pe)),(U=this.client.metadata.redirect)!=null&&U.linkMode&&(z=Y.metadata.redirect)!=null&&z.linkMode&&(G=Y.metadata.redirect)!=null&&G.universal&&r&&(this.client.core.addLinkModeSupportedApp(Y.metadata.redirect.universal),this.client.session.update(Pe,{transportType:Bt.link_mode})),R({auths:Q,session:Oe})};this.events.once(B,A),this.events.once(I,j);let P;try{if(i){const k=sc("wc_sessionAuthenticate",S,q);this.client.core.history.set(b,k);const U=await this.client.core.crypto.encode("",k,{type:gm,encoding:Ma});P=_y(r,b,U)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:S,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:q}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:C,expiry:Sn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch(k){throw this.events.off(B,A),this.events.off(I,j),k}return await this.setProposal(C.id,C),await this.setAuthRequest(q,{request:jr(Lt({},S),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:P??v,response:O}}),te(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Jc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(mf.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(mf.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Bt.relay;a===Bt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=aw(c),d={type:Uo,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await MP({cacao:w,projectId:this.client.core.projectId})){i.setError(mf.invalid_cacao);const E=Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:E,encodeOpts:d}),new Error(E.message)}i.addTrace(Jc.cacaos_verified);const{p:y}=w,b=ow(y.resources),v=[HC(y.iss)],_=l0(y.iss);if(b){const E=BP(b),x=FP(b);h.push(...E),v.push(...x)}for(const E of v)f.push(`${E}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Jc.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:yn(Du),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:dk([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Jc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(mf.subscribe_authenticated_session_topic_failure),w}i.addTrace(Jc.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Jc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Jc.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(mf.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),te(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Bt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=aw(o),l={type:Uo,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Sn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),te(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return Y4(r,s)}),te(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),te(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),te(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Wt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Kk).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Wt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Di.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),te(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Yc.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Wt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),te(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Di.idle,this.client.events.emit("session_request_expire",{id:n}))}),te(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),te(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),te(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,yn(Sn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),te(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Bt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),te(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||yn(Sn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),te(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=sc(s,i,c);let f;const p=!!u;try{const y=p?Ma:yi;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(kme.includes(s)){const y=Hi(JSON.stringify(h)),b=Hi(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=Sn[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=_y(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=Sn[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=jr(Lt({},d),{correlationId:h.id}),l?(y.internal=jr(Lt({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),te(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=Dv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Ma:yi;u=await this.client.core.crypto.encode(s,l,jr(Lt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=_y(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Sn[p].res;g.tvf=jr(Lt({},f),{correlationId:r}),o?(g.internal=jr(Lt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),te(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=jv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Ma:yi;u=await this.client.core.crypto.encode(s,l,jr(Lt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=_y(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Sn[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),te(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Oa(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Oa(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),te(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),te(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),te(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Di.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Di.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Di.idle}),te(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),te(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),te(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=ae("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),te(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),te(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Eo.proposal_listener_not_found)),this.isValidConnect(Lt({},s.params));const u=a.expiryTimestamp||yn(Sn.wc_sessionPropose.req.ttl),d=Lt({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Hi(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(ji.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Sn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),te(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Mi(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(js(r)){await this.deleteProposal(i);const o=pt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),te(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=jr(Lt(Lt(Lt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Bt.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(pt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),te(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Mi(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(pt("session_approve",s),{})):js(r)&&(await this.client.session.delete(n,Wt("USER_DISCONNECTED")),this.events.emit(pt("session_approve",s),{error:r.error}))}),te(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=pf.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Wt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Lt({topic:n},s));try{pf.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw pf.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),te(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),te(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=pt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Mi(r)?this.events.emit(pt("session_update",s),{}):js(r)&&this.events.emit(pt("session_update",s),{error:r.error})}),te(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,yn(Du)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),te(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=pt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Mi(r)?this.events.emit(pt("session_extend",s),{}):js(r)&&this.events.emit(pt("session_extend",s),{error:r.error})}),te(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),te(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=pt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Mi(r)?this.events.emit(pt("session_ping",s),{}):js(r)&&this.events.emit(pt("session_ping",s),{error:r.error})},500)}),te(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Nn.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Wt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),te(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Lt({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Hi(JSON.stringify(sc("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Bt.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),te(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=pt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Mi(r)?this.events.emit(pt("session_request",s),{result:r.result}):js(r)&&this.events.emit(pt("session_request",s),{error:r.error})}),te(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=pf.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Lt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),pf.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),te(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Mi(r)?this.events.emit(pt("session_request",s),{result:r.result}):js(r)&&this.events.emit(pt("session_request",s),{error:r.error})}),te(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Hi(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Bt.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Uo,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Sn.wc_sessionAuthenticate.autoReject,appLink:h})}}),te(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),te(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Di.idle,this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay))}),te(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=pt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(pt("session_request",i.request.id),{error:r})})}),te(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Di.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Di.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),te(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),te(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:sc("wc_sessionPropose",jr(Lt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),te(this,"isValidConnect",async n=>{if(!Br(n)){const{message:l}=ae("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Wn(r)||await this.isValidPairingTopic(r),!Nde(c)){const{message:l}=ae("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Wn(s)&&Ec(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Wn(i)&&Ec(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Wn(o)||this.validateSessionProps(o,"sessionProperties"),!Wn(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),te(this,"validateNamespaces",(n,r)=>{const s=Tde(n,"connect()",r);if(s)throw new Error(s.message)}),te(this,"isValidApprove",async n=>{if(!Br(n))throw new Error(ae("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=Q1(s,"approve()");if(l)throw new Error(l.message);const u=pk(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!fn(i,!0)){const{message:d}=ae("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Wn(o)||this.validateSessionProps(o,"sessionProperties"),!Wn(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),te(this,"isValidReject",async n=>{if(!Br(n)){const{message:i}=ae("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!kde(s)){const{message:i}=ae("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),te(this,"isValidSessionSettleRequest",n=>{if(!Br(n)){const{message:l}=ae("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!Aj(r)){const{message:l}=ae("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=_de(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Q1(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Oa(o)){const{message:l}=ae("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),te(this,"isValidUpdate",async n=>{if(!Br(n)){const{message:c}=ae("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=Q1(s,"update()");if(o)throw new Error(o.message);const a=pk(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),te(this,"isValidExtend",async n=>{if(!Br(n)){const{message:s}=ae("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),te(this,"isValidRequest",async n=>{if(!Br(n)){const{message:c}=ae("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!fk(a,i)){const{message:c}=ae("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!Ode(s)){const{message:c}=ae("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!Dde(a,i,s.method)){const{message:c}=ae("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!Mde(o,sE)){const{message:c}=ae("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${sE.min} and ${sE.max}`);throw new Error(c)}}),te(this,"isValidRespond",async n=>{var r;if(!Br(n)){const{message:o}=ae("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!Rde(i)){const{message:o}=ae("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),te(this,"isValidPing",async n=>{if(!Br(n)){const{message:s}=ae("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),te(this,"isValidEmit",async n=>{if(!Br(n)){const{message:a}=ae("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!fk(o,i)){const{message:a}=ae("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!$de(s)){const{message:a}=ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!jde(o,i,s.name)){const{message:a}=ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),te(this,"isValidDisconnect",async n=>{if(!Br(n)){const{message:s}=ae("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),te(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!fn(s,!1))throw new Error("uri is required parameter");if(!fn(i,!1))throw new Error("domain is required parameter");if(!fn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Td(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Td(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),te(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||cp,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Bt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),te(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=ae("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),te(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),te(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),te(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=ae("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),te(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Bt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),te(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),te(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=IP(n,"topic")||"",s=decodeURIComponent(IP(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Bt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),te(this,"registerLinkModeListeners",async()=>{var n;if(qA()||Fc()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),te(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),te(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),te(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=Nme[i];if(i==="sui_signTransaction")return[cle(r.transactionBytes)];if(i==="near_signTransaction")return[DP(r)];if(i==="near_signTransactions")return r.map(c=>DP(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[ehe({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Lo(r)?r.map(c=>jP(c)):[jP(r)];if(i==="cosmos_signDirect")return[ule(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Lo(a))return i==="solana_signAllTransactions"?a.map(c=>ale(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Nn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(lw)?this.client.auth.authKeys.get(lw):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Bt.link_mode?Ma:yi});iI(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Hi(r)})):Uv(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on($s.expired,async e=>{const{topic:n,id:r}=$4(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ae("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ae("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ol.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ol.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!fn(e,!1)){const{message:n}=ae("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Oa(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ae("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!fn(e,!1)){const{message:n}=ae("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ae("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Oa(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ae("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ae("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(fn(e,!1)){const{message:n}=ae("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ae("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!Pde(e)){const{message:n}=ae("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ae("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Oa(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ae("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class Wme extends wu{constructor(e,n){super(e,n,Ame,oI),this.core=e,this.logger=n}}let qme=class extends wu{constructor(e,n){super(e,n,Ime,oI),this.core=e,this.logger=n}};class Hme extends wu{constructor(e,n){super(e,n,Pme,oI,r=>r.id),this.core=e,this.logger=n}}class Vme extends wu{constructor(e,n){super(e,n,$me,Mv,()=>lw),this.core=e,this.logger=n}}class Gme extends wu{constructor(e,n){super(e,n,Dme,Mv),this.core=e,this.logger=n}}class Kme extends wu{constructor(e,n){super(e,n,jme,Mv,r=>r.id),this.core=e,this.logger=n}}var Yme=Object.defineProperty,Jme=(t,e,n)=>e in t?Yme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iE=(t,e,n)=>Jme(t,typeof e!="symbol"?e+"":e,n);class Qme{constructor(e,n){this.core=e,this.logger=n,iE(this,"authKeys"),iE(this,"pairingTopics"),iE(this,"requests"),this.authKeys=new Vme(this.core,this.logger),this.pairingTopics=new Gme(this.core,this.logger),this.requests=new Kme(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Zme=Object.defineProperty,Xme=(t,e,n)=>e in t?Zme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ze=(t,e,n)=>Xme(t,typeof e!="symbol"?e+"":e,n);let eye=class eU extends ine{constructor(e){super(e),Ze(this,"protocol",Qj),Ze(this,"version",Zj),Ze(this,"name",rE.name),Ze(this,"metadata"),Ze(this,"core"),Ze(this,"logger"),Ze(this,"events",new Ks.EventEmitter),Ze(this,"engine"),Ze(this,"session"),Ze(this,"proposal"),Ze(this,"pendingRequest"),Ze(this,"auth"),Ze(this,"signConfig"),Ze(this,"on",(r,s)=>this.events.on(r,s)),Ze(this,"once",(r,s)=>this.events.once(r,s)),Ze(this,"off",(r,s)=>this.events.off(r,s)),Ze(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Ze(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Ze(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Ze(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Ze(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||rE.name,this.metadata=ece(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:cm(Ch({level:(e==null?void 0:e.logger)||rE.logger}));this.core=(e==null?void 0:e.core)||new Sme(e),this.logger=fr(n,this.name),this.session=new qme(this.core,this.logger),this.proposal=new Wme(this.core,this.logger),this.pendingRequest=new Hme(this.core,this.logger),this.engine=new zme(this),this.auth=new Qme(this.core,this.logger)}static async init(e){const n=new eU(e);return await n.initialize(),n}get context(){return rs(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},oe.toMiliseconds(oe.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var yx={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof rn<"u"&&rn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof rn<"u"&&rn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var A={next:function(){var j=I.shift();return{done:j===void 0,value:j}}};return c.iterable&&(A[Symbol.iterator]=function(){return A}),A}function g(I){this.map={},I instanceof g?I.forEach(function(A,j){this.append(j,A)},this):Array.isArray(I)?I.forEach(function(A){if(A.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+A.length);this.append(A[0],A[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(A){this.append(A,I[A])},this)}g.prototype.append=function(I,A){I=h(I),A=f(A);var j=this.map[I];this.map[I]=j?j+", "+A:A},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,A){this.map[h(I)]=f(A)},g.prototype.forEach=function(I,A){for(var j in this.map)this.map.hasOwnProperty(j)&&I.call(A,this.map[j],j,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(A,j){I.push(j)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(A){I.push(A)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(A,j){I.push([j,A])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function y(I){return new Promise(function(A,j){I.onload=function(){A(I.result)},I.onerror=function(){j(I.error)}})}function b(I){var A=new FileReader,j=y(A);return A.readAsArrayBuffer(I),j}function v(I){var A=new FileReader,j=y(A),P=/charset=([A-Za-z0-9_-]+)/.exec(I.type),k=P?P[1]:"utf-8";return A.readAsText(I,k),j}function _(I){for(var A=new Uint8Array(I),j=new Array(A.length),P=0;P<A.length;P++)j[P]=String.fromCharCode(A[P]);return j.join("")}function E(I){if(I.slice)return I.slice(0);var A=new Uint8Array(I.byteLength);return A.set(new Uint8Array(I)),A.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=E(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=E(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=w(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(I){var A=I.toUpperCase();return S.indexOf(A)>-1?A:I}function C(I,A){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');A=A||{};var j=A.body;if(I instanceof C){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,A.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!j&&I._bodyInit!=null&&(j=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new g(A.headers)),this.method=T(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal||function(){if("AbortController"in a){var U=new AbortController;return U.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(j),(this.method==="GET"||this.method==="HEAD")&&(A.cache==="no-store"||A.cache==="no-cache")){var P=/([?&])_=[^&]*/;if(P.test(this.url))this.url=this.url.replace(P,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function O(I){var A=new FormData;return I.trim().split("&").forEach(function(j){if(j){var P=j.split("="),k=P.shift().replace(/\+/g," "),U=P.join("=").replace(/\+/g," ");A.append(decodeURIComponent(k),decodeURIComponent(U))}}),A}function R(I){var A=new g,j=I.replace(/\r?\n[\t ]+/g," ");return j.split("\r").map(function(P){return P.indexOf(`
`)===0?P.substr(1,P.length):P}).forEach(function(P){var k=P.split(":"),U=k.shift().trim();if(U){var z=k.join(":").trim();try{A.append(U,z)}catch(G){console.warn("Response "+G.message)}}}),A}x.call(C.prototype);function F(I,A){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=A.statusText===void 0?"":""+A.statusText,this.headers=new g(A.headers),this.url=A.url||"",this._initBody(I)}x.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var I=new F(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var q=[301,302,303,307,308];F.redirect=function(I,A){if(q.indexOf(A)===-1)throw new RangeError("Invalid status code");return new F(null,{status:A,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(A,j){this.message=A,this.name=j;var P=Error(A);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(I,A){return new Promise(function(j,P){var k=new C(I,A);if(k.signal&&k.signal.aborted)return P(new o.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function z(){U.abort()}U.onload=function(){var Y={statusText:U.statusText,headers:R(U.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(U.status<200||U.status>599)?Y.status=200:Y.status=U.status,Y.url="responseURL"in U?U.responseURL:Y.headers.get("X-Request-URL");var Z="response"in U?U.response:U.responseText;setTimeout(function(){j(new F(Z,Y))},0)},U.onerror=function(){setTimeout(function(){P(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){P(new TypeError("Network request timed out"))},0)},U.onabort=function(){setTimeout(function(){P(new o.DOMException("Aborted","AbortError"))},0)};function G(Y){try{return Y===""&&a.location.href?a.location.href:Y}catch{return Y}}if(U.open(k.method,G(k.url),!0),k.credentials==="include"?U.withCredentials=!0:k.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(c.blob?U.responseType="blob":c.arrayBuffer&&(U.responseType="arraybuffer")),A&&typeof A.headers=="object"&&!(A.headers instanceof g||a.Headers&&A.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(A.headers).forEach(function(Y){Q.push(h(Y)),U.setRequestHeader(Y,f(A.headers[Y]))}),k.headers.forEach(function(Y,Z){Q.indexOf(Z)===-1&&U.setRequestHeader(Z,Y)})}else k.headers.forEach(function(Y,Z){U.setRequestHeader(Z,Y)});k.signal&&(k.signal.addEventListener("abort",z),U.onreadystatechange=function(){U.readyState===4&&k.signal.removeEventListener("abort",z)}),U.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=g,a.Request=C,a.Response=F),o.Headers=g,o.Request=C,o.Response=F,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(yx,yx.exports);var tye=yx.exports;const Qk=ou(tye);var nye=Object.defineProperty,rye=Object.defineProperties,sye=Object.getOwnPropertyDescriptors,Zk=Object.getOwnPropertySymbols,iye=Object.prototype.hasOwnProperty,oye=Object.prototype.propertyIsEnumerable,Xk=(t,e,n)=>e in t?nye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eO=(t,e)=>{for(var n in e||(e={}))iye.call(e,n)&&Xk(t,n,e[n]);if(Zk)for(var n of Zk(e))oye.call(e,n)&&Xk(t,n,e[n]);return t},tO=(t,e)=>rye(t,sye(e));const aye={Accept:"application/json","Content-Type":"application/json"},cye="POST",nO={headers:aye,method:cye},rO=10;let Ni=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Ks.EventEmitter,this.isAvailable=!1,this.registering=!1,!bk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Ko(e),r=await(await Qk(this.url,tO(eO({},nO),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!bk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Ko({id:1,jsonrpc:"2.0",method:"test",params:[]});await Qk(e,tO(eO({},nO),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Ql(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=jv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return Nj(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>rO&&this.events.setMaxListeners(rO)}};const sO="error",lye="wss://relay.walletconnect.org",uye="wc",dye="universal_provider",xy=`${uye}@2:${dye}:`,tU="https://rpc.walletconnect.org/v1/",Xu="generic",hye=`${tU}bundler`,Js={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function aI(t){return t==null||typeof t!="object"&&typeof t!="function"}function nU(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function rU(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const fye="[object RegExp]",sU="[object String]",iU="[object Number]",oU="[object Boolean]",aU="[object Arguments]",pye="[object Symbol]",gye="[object Date]",mye="[object Map]",yye="[object Set]",wye="[object Array]",vye="[object ArrayBuffer]",bye="[object Object]",Eye="[object DataView]",_ye="[object Uint8Array]",Cye="[object Uint8ClampedArray]",xye="[object Uint16Array]",Sye="[object Uint32Array]",Aye="[object Int8Array]",Iye="[object Int16Array]",Tye="[object Int32Array]",Nye="[object Float32Array]",Pye="[object Float64Array]";function cI(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kye(t,e){return yd(t,void 0,t,new Map,e)}function yd(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(aI(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=yd(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,yd(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(yd(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(cI(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=yd(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),al(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),al(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),al(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,al(o,t,n,r,s),o}if(typeof t=="object"&&Oye(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),al(o,t,n,r,s),o}return t}function al(t,e,n=t,r,s){const i=[...Object.keys(e),...nU(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=yd(e[a],a,n,r,s))}}function Oye(t){switch(rU(t)){case aU:case wye:case vye:case Eye:case oU:case gye:case Nye:case Pye:case Aye:case Iye:case Tye:case mye:case iU:case bye:case fye:case yye:case sU:case pye:case _ye:case Cye:case xye:case Sye:return!0;default:return!1}}function Rye(t,e){return kye(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case iU:case sU:case oU:{const o=new t.constructor(t==null?void 0:t.valueOf());return al(o,t),o}case aU:{const o={};return al(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function iO(t){return Rye(t)}function oO(t){return t!==null&&typeof t=="object"&&rU(t)==="[object Arguments]"}function aO(t){return typeof t=="object"&&t!==null}function $ye(){}function Dye(t){return cI(t)}function jye(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Uye(t){if(aI(t))return t;if(Array.isArray(t)||cI(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Lye(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=wx(s,o,r,new Map)}return s}function wx(t,e,n,r){if(aI(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Uye(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...nU(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(oO(a)&&(a={...a}),oO(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=iO(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||aO(c)&&aO(a)?t[o]=wx(c,a,n,r):c==null&&jye(a)?t[o]=wx({},a,n,r):c==null&&Dye(a)?t[o]=iO(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function Mye(t,...e){return Lye(t,...e,$ye)}var Bye=Object.defineProperty,Fye=Object.defineProperties,zye=Object.getOwnPropertyDescriptors,cO=Object.getOwnPropertySymbols,Wye=Object.prototype.hasOwnProperty,qye=Object.prototype.propertyIsEnumerable,lO=(t,e,n)=>e in t?Bye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sy=(t,e)=>{for(var n in e||(e={}))Wye.call(e,n)&&lO(t,n,e[n]);if(cO)for(var n of cO(e))qye.call(e,n)&&lO(t,n,e[n]);return t},Hye=(t,e)=>Fye(t,zye(e));function Es(t,e,n){var r;const s=Td(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${tU}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function vu(t){return t.includes(":")?t.split(":")[1]:t}function cU(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Vye(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Ay(t={},e={}){const n=uO(t),r=uO(e);return Mye(n,r)}function uO(t){var e,n,r,s,i;const o={};if(!Ec(t))return o;for(const[a,c]of Object.entries(t)){const l=$v(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=md(a);o[f]=Hye(Sy(Sy({},o[f]),c),{chains:eo(l,(e=o[f])==null?void 0:e.chains),methods:eo(u,(n=o[f])==null?void 0:n.methods),events:eo(d,(r=o[f])==null?void 0:r.events)}),(Ec(h)||Ec(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Sy(Sy({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function dO(t){return t.includes(":")?t.split(":")[2]:t}function hO(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=$v(n)?[n]:r.chains?r.chains:cU(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function oE(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const lU={},dt=t=>lU[t],aE=(t,e)=>{lU[t]=e};var Gye=Object.defineProperty,Kye=(t,e,n)=>e in t?Gye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ju=(t,e,n)=>Kye(t,typeof e!="symbol"?e+"":e,n);class Yye{constructor(e){ju(this,"name","polkadot"),ju(this,"client"),ju(this,"httpProviders"),ju(this,"events"),ju(this,"namespace"),ju(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=vu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Es(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ys(new Ni(r,dt("disableProviderPing")))}}var Jye=Object.defineProperty,Qye=Object.defineProperties,Zye=Object.getOwnPropertyDescriptors,fO=Object.getOwnPropertySymbols,Xye=Object.prototype.hasOwnProperty,ewe=Object.prototype.propertyIsEnumerable,vx=(t,e,n)=>e in t?Jye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pO=(t,e)=>{for(var n in e||(e={}))Xye.call(e,n)&&vx(t,n,e[n]);if(fO)for(var n of fO(e))ewe.call(e,n)&&vx(t,n,e[n]);return t},gO=(t,e)=>Qye(t,Zye(e)),Uu=(t,e,n)=>vx(t,typeof e!="symbol"?e+"":e,n);class twe{constructor(e){Uu(this,"name","eip155"),Uu(this,"client"),Uu(this,"chainId"),Uu(this,"namespace"),Uu(this,"httpProviders"),Uu(this,"events"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Es(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ys(new Ni(r,dt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(vu(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:gO(pO({},u.sessionProperties||{}),{capabilities:gO(pO({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(sc("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${hye}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var nwe=Object.defineProperty,rwe=(t,e,n)=>e in t?nwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lu=(t,e,n)=>rwe(t,typeof e!="symbol"?e+"":e,n);class swe{constructor(e){Lu(this,"name","solana"),Lu(this,"client"),Lu(this,"httpProviders"),Lu(this,"events"),Lu(this,"namespace"),Lu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=vu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Es(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ys(new Ni(r,dt("disableProviderPing")))}}var iwe=Object.defineProperty,owe=(t,e,n)=>e in t?iwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mu=(t,e,n)=>owe(t,typeof e!="symbol"?e+"":e,n);class awe{constructor(e){Mu(this,"name","cosmos"),Mu(this,"client"),Mu(this,"httpProviders"),Mu(this,"events"),Mu(this,"namespace"),Mu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=vu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Es(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ys(new Ni(r,dt("disableProviderPing")))}}var cwe=Object.defineProperty,lwe=(t,e,n)=>e in t?cwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bu=(t,e,n)=>lwe(t,typeof e!="symbol"?e+"":e,n);class uwe{constructor(e){Bu(this,"name","algorand"),Bu(this,"client"),Bu(this,"httpProviders"),Bu(this,"events"),Bu(this,"namespace"),Bu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Es(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Es(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ys(new Ni(r,dt("disableProviderPing")))}}var dwe=Object.defineProperty,hwe=(t,e,n)=>e in t?dwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fu=(t,e,n)=>hwe(t,typeof e!="symbol"?e+"":e,n);class fwe{constructor(e){Fu(this,"name","cip34"),Fu(this,"client"),Fu(this,"httpProviders"),Fu(this,"events"),Fu(this,"namespace"),Fu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=vu(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ys(new Ni(r,dt("disableProviderPing")))}}var pwe=Object.defineProperty,gwe=(t,e,n)=>e in t?pwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zu=(t,e,n)=>gwe(t,typeof e!="symbol"?e+"":e,n);class mwe{constructor(e){zu(this,"name","elrond"),zu(this,"client"),zu(this,"httpProviders"),zu(this,"events"),zu(this,"namespace"),zu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=vu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Es(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ys(new Ni(r,dt("disableProviderPing")))}}var ywe=Object.defineProperty,wwe=(t,e,n)=>e in t?ywe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wu=(t,e,n)=>wwe(t,typeof e!="symbol"?e+"":e,n);class vwe{constructor(e){Wu(this,"name","multiversx"),Wu(this,"client"),Wu(this,"httpProviders"),Wu(this,"events"),Wu(this,"namespace"),Wu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=vu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Es(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ys(new Ni(r,dt("disableProviderPing")))}}var bwe=Object.defineProperty,Ewe=(t,e,n)=>e in t?bwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qu=(t,e,n)=>Ewe(t,typeof e!="symbol"?e+"":e,n);class _we{constructor(e){qu(this,"name","near"),qu(this,"client"),qu(this,"httpProviders"),qu(this,"events"),qu(this,"namespace"),qu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Es(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Es(e,this.namespace);return typeof r>"u"?void 0:new Ys(new Ni(r,dt("disableProviderPing")))}}var Cwe=Object.defineProperty,xwe=(t,e,n)=>e in t?Cwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hu=(t,e,n)=>xwe(t,typeof e!="symbol"?e+"":e,n);class Swe{constructor(e){Hu(this,"name","tezos"),Hu(this,"client"),Hu(this,"httpProviders"),Hu(this,"events"),Hu(this,"namespace"),Hu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Es(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Es(e,this.namespace);return typeof r>"u"?void 0:new Ys(new Ni(r))}}var Awe=Object.defineProperty,Iwe=(t,e,n)=>e in t?Awe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vu=(t,e,n)=>Iwe(t,typeof e!="symbol"?e+"":e,n);class Twe{constructor(e){Vu(this,"name",Xu),Vu(this,"client"),Vu(this,"httpProviders"),Vu(this,"events"),Vu(this,"namespace"),Vu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Js.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Td(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Es(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ys(new Ni(r,dt("disableProviderPing")))}}var Nwe=Object.defineProperty,Pwe=Object.defineProperties,kwe=Object.getOwnPropertyDescriptors,mO=Object.getOwnPropertySymbols,Owe=Object.prototype.hasOwnProperty,Rwe=Object.prototype.propertyIsEnumerable,bx=(t,e,n)=>e in t?Nwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Iy=(t,e)=>{for(var n in e||(e={}))Owe.call(e,n)&&bx(t,n,e[n]);if(mO)for(var n of mO(e))Rwe.call(e,n)&&bx(t,n,e[n]);return t},cE=(t,e)=>Pwe(t,kwe(e)),ks=(t,e,n)=>bx(t,typeof e!="symbol"?e+"":e,n);let $we=class uU{constructor(e){ks(this,"client"),ks(this,"namespaces"),ks(this,"optionalNamespaces"),ks(this,"sessionProperties"),ks(this,"scopedProperties"),ks(this,"events",new IA),ks(this,"rpcProviders",{}),ks(this,"session"),ks(this,"providerOpts"),ks(this,"logger"),ks(this,"uri"),ks(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:cm(Ch({level:(e==null?void 0:e.logger)||sO})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new uU(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Iy({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,Dv(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Wt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=hO(this.session.namespaces);this.namespaces=Ay(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=hO(s.namespaces);return this.namespaces=Ay(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Xu?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Lo(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await eye.init({core:this.providerOpts.core,logger:this.providerOpts.logger||sO,relayUrl:this.providerOpts.relayUrl||lye,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>md(n)))];aE("client",this.client),aE("events",this.events),aE("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=Vye(n,this.session),s=cU(r),i=Ay(this.namespaces,this.optionalNamespaces),o=cE(Iy({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new twe({namespace:o});break;case"algorand":this.rpcProviders[n]=new uwe({namespace:o});break;case"solana":this.rpcProviders[n]=new swe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new awe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new Yye({namespace:o});break;case"cip34":this.rpcProviders[n]=new fwe({namespace:o});break;case"elrond":this.rpcProviders[n]=new mwe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new vwe({namespace:o});break;case"near":this.rpcProviders[n]=new _we({namespace:o});break;case"tezos":this.rpcProviders[n]=new Swe({namespace:o});break;default:this.rpcProviders[Xu]?this.rpcProviders[Xu].updateNamespace(o):this.rpcProviders[Xu]=new Twe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Lo(o)&&this.events.emit("accountsChanged",o.map(dO))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=md(o),l=oE(o)!==oE(a)?`${c}:${oE(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=cE(Iy({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",cE(Iy({},Wt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Js.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Xu]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Ay(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>md(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=md(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(dO);if(!Lo(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${xy}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${xy}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${xy}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(xy)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const up={getSIWX(){return ne.state.siwx},async initializeIfEnabled(){var i;const t=ne.state.siwx,e=$.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if($.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await gt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),bt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ve._getClient())==null?void 0:i.disconnect().catch(console.error)),ke.reset("Connect"),mi.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ne.state.siwx,e=Ce.getPlainAddress($.getActiveCaipAddress()),n=$.getActiveCaipNetwork(),r=ve._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();de.getConnectorId(n.chainNamespace)===X.CONNECTOR_ID.AUTH&&ke.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),$.setLastConnectedSIWECaipNetwork(n),gt.close(),bt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!gt.state.open||ke.state.view==="ApproveTransaction")&&await gt.open({view:"SIWXSignMessage"}),i.isSmartAccount?mi.showError("This application might not support Smart Accounts"):mi.showError("Signature declined"),bt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=$.getLastConnectedSIWECaipNetwork();r?$.switchActiveNetwork(r):await ve.disconnect()}else gt.close();ke.reset("Connect"),bt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=$.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Ce.getPlainAddress($.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=ne.state.siwx,e=Ce.getPlainAddress($.getActiveCaipAddress()),n=$.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=ke.state.view==="ApproveTransaction",r=ke.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=up.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=$.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(mi.showLoading("Authenticating...",{autoClose:!1}),ce.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),bt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:up.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),bt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:up.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{mi.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=$.state.activeChain;return{network:((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=ce.state.preferredAccountTypes)==null?void 0:n[t])===Rn.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Ft={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},ic={ConnectorExplorerIds:{[X.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[X.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[X.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Ft.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Ft.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Ft.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Ft.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Ft.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Ft.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Ft.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Ft.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Ft.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Ft.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Ft.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[X.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[X.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[X.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[X.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[X.CONNECTOR_ID.INJECTED]:"Browser Wallet",[X.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[X.CONNECTOR_ID.COINBASE]:"Coinbase",[X.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[X.CONNECTOR_ID.LEDGER]:"Ledger",[X.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[X.CONNECTOR_ID.INJECTED]:"INJECTED",[X.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[X.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[X.CONNECTOR_ID.AUTH]:"AUTH"}},bg={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Ft.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=$.state.activeChain;return X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>de.getConnectorId(e)===X.CONNECTOR_ID.AUTH&&e===t)}},Dwe=new AbortController,Vt={EmbeddedWalletAbortController:Dwe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${jwe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function jwe(){return typeof window<"u"}const Uwe={createLogger(t,e="error"){const n=Ch({level:e}),{logger:r}=NA({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},Lwe="rpc.walletconnect.org";function yO(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const lE=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ki={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Lwe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:X.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${X.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return lE.includes(e)?yO(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:ic.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ki.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Km(a.url,a.config))}),lE.includes(t.caipNetworkId)&&r.push(Km(yO(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Km(a))}),yT(r)},extendWagmiTransports(t,e,n){if(lE.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return yT([n,Km(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:X.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=le.getActiveCaipNetworkId(),n=$.getAllRequestedCaipNetworks(),r=Array.from(((c=$.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},p0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ur=$t({providers:{...p0},providerIds:{...p0}}),St={state:Ur,subscribeKey(t,e){return Kn(Ur,t,e)},subscribe(t){return Gn(Ur,()=>{t(Ur)})},subscribeProviders(t){return Gn(Ur.providers,()=>t(Ur.providers))},setProvider(t,e){e&&(Ur.providers[t]=Yl(e))},getProvider(t){return Ur.providers[t]},setProviderId(t,e){e&&(Ur.providerIds[t]=e)},getProviderId(t){if(t)return Ur.providerIds[t]},reset(){Ur.providers={...p0},Ur.providerIds={...p0}},resetChain(t){Ur.providers[t]=void 0,Ur.providerIds[t]=void 0}},wO={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Fn={set(t,e){fs.isClient&&localStorage.setItem(`${Ee.STORAGE_KEY}${t}`,e)},get(t){return fs.isClient?localStorage.getItem(`${Ee.STORAGE_KEY}${t}`):null},delete(t,e){fs.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ee.STORAGE_KEY}${t}`))}},Ty=30*1e3,fs={checkIfAllowedToTriggerEmail(){const t=Fn.get(Ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ty){const n=Math.ceil((Ty-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Fn.get(Ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ty)return Math.ceil((Ty-e)/1e3)}return 0},checkIfRequestExists(t){return Rn.NOT_SAFE_RPC_METHODS.includes(t.method)||Rn.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(wO.transactionHash))||(t==null?void 0:t.match(wO.signedMessage)))?Ee.RPC_RESPONSE_TYPE_TX:Ee.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Rn.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var ut;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ut||(ut={}));var Ex;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Ex||(Ex={}));const me=ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ba=t=>{switch(typeof t){case"undefined":return me.undefined;case"string":return me.string;case"number":return isNaN(t)?me.nan:me.number;case"boolean":return me.boolean;case"function":return me.function;case"bigint":return me.bigint;case"symbol":return me.symbol;case"object":return Array.isArray(t)?me.array:t===null?me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?me.promise:typeof Map<"u"&&t instanceof Map?me.map:typeof Set<"u"&&t instanceof Set?me.set:typeof Date<"u"&&t instanceof Date?me.date:me.object;default:return me.unknown}},ie=ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Mwe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class _i extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}_i.create=t=>new _i(t);const Eg=(t,e)=>{let n;switch(t.code){case ie.invalid_type:t.received===me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ut.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:n=`Unrecognized key(s) in object: ${ut.joinValues(t.keys,", ")}`;break;case ie.invalid_union:n="Invalid input";break;case ie.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ut.joinValues(t.options)}`;break;case ie.invalid_enum_value:n=`Invalid enum value. Expected ${ut.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:n="Invalid function arguments";break;case ie.invalid_return_type:n="Invalid function return type";break;case ie.invalid_date:n="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ut.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ie.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ie.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ie.custom:n="Invalid input";break;case ie.invalid_intersection_types:n="Intersection results could not be merged";break;case ie.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:n="Number must be finite";break;default:n=e.defaultError,ut.assertNever(t)}return{message:n}};let dU=Eg;function Bwe(t){dU=t}function g0(){return dU}const m0=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},Fwe=[];function be(t,e){const n=m0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,g0(),Eg].filter(r=>!!r)});t.common.issues.push(n)}class hr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Me;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return hr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Me;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Me=Object.freeze({status:"aborted"}),hU=t=>({status:"dirty",value:t}),Ar=t=>({status:"valid",value:t}),_x=t=>t.status==="aborted",Cx=t=>t.status==="dirty",_g=t=>t.status==="valid",y0=t=>typeof Promise<"u"&&t instanceof Promise;var Ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ie||(Ie={}));class so{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const vO=(t,e)=>{if(_g(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new _i(t.common.issues);return this._error=n,this._error}}};function qe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ge{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ba(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ba(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new hr,ctx:{common:e.parent.common,data:e.data,parsedType:Ba(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(y0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ba(e)},i=this._parseSync({data:e,path:s.path,parent:s});return vO(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ba(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(y0(s)?s:Promise.resolve(s));return vO(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ie.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Ai({schema:this,typeName:$e.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Mo.create(this,this._def)}nullable(){return su.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ci.create(this,this._def)}promise(){return ch.create(this,this._def)}or(e){return Ag.create([this,e],this._def)}and(e){return Ig.create(this,e,this._def)}transform(e){return new Ai({...qe(this._def),schema:this,typeName:$e.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Og({...qe(this._def),innerType:this,defaultValue:n,typeName:$e.ZodDefault})}brand(){return new pU({typeName:$e.ZodBranded,type:this,...qe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new E0({...qe(this._def),innerType:this,catchValue:n,typeName:$e.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ym.create(this,e)}readonly(){return C0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zwe=/^c[^\s-]{8,}$/i,Wwe=/^[a-z][a-z0-9]*$/,qwe=/^[0-9A-HJKMNP-TV-Z]{26}$/,Hwe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vwe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Gwe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let uE;const Kwe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Ywe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Jwe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Qwe(t,e){return!!((e==="v4"||!e)&&Kwe.test(t)||(e==="v6"||!e)&&Ywe.test(t))}class wi extends Ge{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==me.string){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:me.string,received:i.parsedType}),Me}const r=new hr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?be(s,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&be(s,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Vwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"email",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")uE||(uE=new RegExp(Gwe,"u")),uE.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"emoji",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Hwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"uuid",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")zwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"cuid",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Wwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"cuid2",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")qwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"ulid",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),be(s,{validation:"url",code:ie.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"regex",code:ie.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Jwe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Qwe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"ip",code:ie.invalid_string,message:i.message}),r.dirty()):ut.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ie.invalid_string,...Ie.errToObj(r)})}_addCheck(e){return new wi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ie.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ie.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ie.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ie.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ie.errToObj(n)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new wi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wi.create=t=>{var e;return new wi({checks:[],typeName:$e.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};function Zwe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Rc extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==me.number){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:me.number,received:i.parsedType}),Me}let r;const s=new hr;for(const i of this._def.checks)i.kind==="int"?ut.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ie.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Zwe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ie.not_finite,message:i.message}),s.dirty()):ut.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,r,s){return new Rc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ie.toString(s)}]})}_addCheck(e){return new Rc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ut.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Rc.create=t=>new Rc({checks:[],typeName:$e.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class $c extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==me.bigint){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:me.bigint,received:i.parsedType}),Me}let r;const s=new hr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ut.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,r,s){return new $c({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ie.toString(s)}]})}_addCheck(e){return new $c({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$c.create=t=>{var e;return new $c({checks:[],typeName:$e.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};class Cg extends Ge{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==me.boolean){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.boolean,received:r.parsedType}),Me}return Ar(e.data)}}Cg.create=t=>new Cg({typeName:$e.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class nu extends Ge{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==me.date){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:me.date,received:i.parsedType}),Me}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_date}),Me}const r=new hr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ut.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new nu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}nu.create=t=>new nu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:$e.ZodDate,...qe(t)});class w0 extends Ge{_parse(e){if(this._getType(e)!==me.symbol){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.symbol,received:r.parsedType}),Me}return Ar(e.data)}}w0.create=t=>new w0({typeName:$e.ZodSymbol,...qe(t)});class xg extends Ge{_parse(e){if(this._getType(e)!==me.undefined){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.undefined,received:r.parsedType}),Me}return Ar(e.data)}}xg.create=t=>new xg({typeName:$e.ZodUndefined,...qe(t)});class Sg extends Ge{_parse(e){if(this._getType(e)!==me.null){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.null,received:r.parsedType}),Me}return Ar(e.data)}}Sg.create=t=>new Sg({typeName:$e.ZodNull,...qe(t)});class ah extends Ge{constructor(){super(...arguments),this._any=!0}_parse(e){return Ar(e.data)}}ah.create=t=>new ah({typeName:$e.ZodAny,...qe(t)});class Rl extends Ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ar(e.data)}}Rl.create=t=>new Rl({typeName:$e.ZodUnknown,...qe(t)});class Jo extends Ge{_parse(e){const n=this._getOrReturnCtx(e);return be(n,{code:ie.invalid_type,expected:me.never,received:n.parsedType}),Me}}Jo.create=t=>new Jo({typeName:$e.ZodNever,...qe(t)});class v0 extends Ge{_parse(e){if(this._getType(e)!==me.undefined){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.void,received:r.parsedType}),Me}return Ar(e.data)}}v0.create=t=>new v0({typeName:$e.ZodVoid,...qe(t)});class Ci extends Ge{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==me.array)return be(n,{code:ie.invalid_type,expected:me.array,received:n.parsedType}),Me;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(be(n,{code:o?ie.too_big:ie.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(be(n,{code:ie.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(be(n,{code:ie.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new so(n,o,n.path,a)))).then(o=>hr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new so(n,o,n.path,a)));return hr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ci({...this._def,minLength:{value:e,message:Ie.toString(n)}})}max(e,n){return new Ci({...this._def,maxLength:{value:e,message:Ie.toString(n)}})}length(e,n){return new Ci({...this._def,exactLength:{value:e,message:Ie.toString(n)}})}nonempty(e){return this.min(1,e)}}Ci.create=(t,e)=>new Ci({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$e.ZodArray,...qe(e)});function ed(t){if(t instanceof Gt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Mo.create(ed(r))}return new Gt({...t._def,shape:()=>e})}else return t instanceof Ci?new Ci({...t._def,type:ed(t.element)}):t instanceof Mo?Mo.create(ed(t.unwrap())):t instanceof su?su.create(ed(t.unwrap())):t instanceof io?io.create(t.items.map(e=>ed(e))):t}class Gt extends Ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ut.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==me.object){const l=this._getOrReturnCtx(e);return be(l,{code:ie.invalid_type,expected:me.object,received:l.parsedType}),Me}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Jo&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new so(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Jo){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(be(s,{code:ie.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new so(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>hr.mergeObjectSync(r,l)):hr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new Gt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ie.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Gt({...this._def,unknownKeys:"strip"})}passthrough(){return new Gt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Gt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Gt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$e.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Gt({...this._def,catchall:e})}pick(e){const n={};return ut.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Gt({...this._def,shape:()=>n})}omit(e){const n={};return ut.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Gt({...this._def,shape:()=>n})}deepPartial(){return ed(this)}partial(e){const n={};return ut.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Gt({...this._def,shape:()=>n})}required(e){const n={};return ut.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Mo;)i=i._def.innerType;n[r]=i}}),new Gt({...this._def,shape:()=>n})}keyof(){return fU(ut.objectKeys(this.shape))}}Gt.create=(t,e)=>new Gt({shape:()=>t,unknownKeys:"strip",catchall:Jo.create(),typeName:$e.ZodObject,...qe(e)});Gt.strictCreate=(t,e)=>new Gt({shape:()=>t,unknownKeys:"strict",catchall:Jo.create(),typeName:$e.ZodObject,...qe(e)});Gt.lazycreate=(t,e)=>new Gt({shape:t,unknownKeys:"strip",catchall:Jo.create(),typeName:$e.ZodObject,...qe(e)});class Ag extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new _i(a.ctx.common.issues));return be(n,{code:ie.invalid_union,unionErrors:o}),Me}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new _i(c));return be(n,{code:ie.invalid_union,unionErrors:a}),Me}}get options(){return this._def.options}}Ag.create=(t,e)=>new Ag({options:t,typeName:$e.ZodUnion,...qe(e)});const uw=t=>t instanceof Ng?uw(t.schema):t instanceof Ai?uw(t.innerType()):t instanceof Pg?[t.value]:t instanceof Dc?t.options:t instanceof kg?Object.keys(t.enum):t instanceof Og?uw(t._def.innerType):t instanceof xg?[void 0]:t instanceof Sg?[null]:null;class Bv extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==me.object)return be(n,{code:ie.invalid_type,expected:me.object,received:n.parsedType}),Me;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(be(n,{code:ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=uw(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Bv({typeName:$e.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...qe(r)})}}function xx(t,e){const n=Ba(t),r=Ba(e);if(t===e)return{valid:!0,data:t};if(n===me.object&&r===me.object){const s=ut.objectKeys(e),i=ut.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=xx(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===me.array&&r===me.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=xx(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===me.date&&r===me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ig extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(_x(i)||_x(o))return Me;const a=xx(i.value,o.value);return a.valid?((Cx(i)||Cx(o))&&n.dirty(),{status:n.value,value:a.data}):(be(r,{code:ie.invalid_intersection_types}),Me)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ig.create=(t,e,n)=>new Ig({left:t,right:e,typeName:$e.ZodIntersection,...qe(n)});class io extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.array)return be(r,{code:ie.invalid_type,expected:me.array,received:r.parsedType}),Me;if(r.data.length<this._def.items.length)return be(r,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Me;!this._def.rest&&r.data.length>this._def.items.length&&(be(r,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new so(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>hr.mergeArray(n,o)):hr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new io({...this._def,rest:e})}}io.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new io({items:t,typeName:$e.ZodTuple,rest:null,...qe(e)})};class Tg extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.object)return be(r,{code:ie.invalid_type,expected:me.object,received:r.parsedType}),Me;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new so(r,a,r.path,a)),value:o._parse(new so(r,r.data[a],r.path,a))});return r.common.async?hr.mergeObjectAsync(n,s):hr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ge?new Tg({keyType:e,valueType:n,typeName:$e.ZodRecord,...qe(r)}):new Tg({keyType:wi.create(),valueType:e,typeName:$e.ZodRecord,...qe(n)})}}class b0 extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.map)return be(r,{code:ie.invalid_type,expected:me.map,received:r.parsedType}),Me;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new so(r,a,r.path,[l,"key"])),value:i._parse(new so(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Me;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Me;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}b0.create=(t,e,n)=>new b0({valueType:e,keyType:t,typeName:$e.ZodMap,...qe(n)});class ru extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.set)return be(r,{code:ie.invalid_type,expected:me.set,received:r.parsedType}),Me;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(be(r,{code:ie.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(be(r,{code:ie.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Me;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new so(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new ru({...this._def,minSize:{value:e,message:Ie.toString(n)}})}max(e,n){return new ru({...this._def,maxSize:{value:e,message:Ie.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ru.create=(t,e)=>new ru({valueType:t,minSize:null,maxSize:null,typeName:$e.ZodSet,...qe(e)});class Nd extends Ge{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==me.function)return be(n,{code:ie.invalid_type,expected:me.function,received:n.parsedType}),Me;function r(a,c){return m0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,g0(),Eg].filter(l=>!!l),issueData:{code:ie.invalid_arguments,argumentsError:c}})}function s(a,c){return m0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,g0(),Eg].filter(l=>!!l),issueData:{code:ie.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof ch){const a=this;return Ar(async function(...c){const l=new _i([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ar(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new _i([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new _i([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Nd({...this._def,args:io.create(e).rest(Rl.create())})}returns(e){return new Nd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Nd({args:e||io.create([]).rest(Rl.create()),returns:n||Rl.create(),typeName:$e.ZodFunction,...qe(r)})}}class Ng extends Ge{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ng.create=(t,e)=>new Ng({getter:t,typeName:$e.ZodLazy,...qe(e)});class Pg extends Ge{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return be(n,{received:n.data,code:ie.invalid_literal,expected:this._def.value}),Me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Pg.create=(t,e)=>new Pg({value:t,typeName:$e.ZodLiteral,...qe(e)});function fU(t,e){return new Dc({values:t,typeName:$e.ZodEnum,...qe(e)})}class Dc extends Ge{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return be(n,{expected:ut.joinValues(r),received:n.parsedType,code:ie.invalid_type}),Me}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return be(n,{received:n.data,code:ie.invalid_enum_value,options:r}),Me}return Ar(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Dc.create(e)}exclude(e){return Dc.create(this.options.filter(n=>!e.includes(n)))}}Dc.create=fU;class kg extends Ge{_parse(e){const n=ut.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==me.string&&r.parsedType!==me.number){const s=ut.objectValues(n);return be(r,{expected:ut.joinValues(s),received:r.parsedType,code:ie.invalid_type}),Me}if(n.indexOf(e.data)===-1){const s=ut.objectValues(n);return be(r,{received:r.data,code:ie.invalid_enum_value,options:s}),Me}return Ar(e.data)}get enum(){return this._def.values}}kg.create=(t,e)=>new kg({values:t,typeName:$e.ZodNativeEnum,...qe(e)});class ch extends Ge{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==me.promise&&n.common.async===!1)return be(n,{code:ie.invalid_type,expected:me.promise,received:n.parsedType}),Me;const r=n.parsedType===me.promise?n.data:Promise.resolve(n.data);return Ar(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ch.create=(t,e)=>new ch({type:t,typeName:$e.ZodPromise,...qe(e)});class Ai extends Ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$e.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{be(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!_g(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>_g(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);ut.assertNever(s)}}Ai.create=(t,e,n)=>new Ai({schema:t,typeName:$e.ZodEffects,effect:e,...qe(n)});Ai.createWithPreprocess=(t,e,n)=>new Ai({schema:e,effect:{type:"preprocess",transform:t},typeName:$e.ZodEffects,...qe(n)});class Mo extends Ge{_parse(e){return this._getType(e)===me.undefined?Ar(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Mo.create=(t,e)=>new Mo({innerType:t,typeName:$e.ZodOptional,...qe(e)});class su extends Ge{_parse(e){return this._getType(e)===me.null?Ar(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}su.create=(t,e)=>new su({innerType:t,typeName:$e.ZodNullable,...qe(e)});class Og extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===me.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Og.create=(t,e)=>new Og({innerType:t,typeName:$e.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...qe(e)});class E0 extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return y0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new _i(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new _i(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}E0.create=(t,e)=>new E0({innerType:t,typeName:$e.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...qe(e)});class _0 extends Ge{_parse(e){if(this._getType(e)!==me.nan){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.nan,received:r.parsedType}),Me}return{status:"valid",value:e.data}}}_0.create=t=>new _0({typeName:$e.ZodNaN,...qe(t)});const Xwe=Symbol("zod_brand");class pU extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ym extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Me:i.status==="dirty"?(n.dirty(),hU(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Me:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new ym({in:e,out:n,typeName:$e.ZodPipeline})}}class C0 extends Ge{_parse(e){const n=this._def.innerType._parse(e);return _g(n)&&(n.value=Object.freeze(n.value)),n}}C0.create=(t,e)=>new C0({innerType:t,typeName:$e.ZodReadonly,...qe(e)});const gU=(t,e={},n)=>t?ah.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):ah.create(),e0e={object:Gt.lazycreate};var $e;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($e||($e={}));const t0e=(t,e={message:`Input not instance of ${t.name}`})=>gU(n=>n instanceof t,e),mU=wi.create,yU=Rc.create,n0e=_0.create,r0e=$c.create,wU=Cg.create,s0e=nu.create,i0e=w0.create,o0e=xg.create,a0e=Sg.create,c0e=ah.create,l0e=Rl.create,u0e=Jo.create,d0e=v0.create,h0e=Ci.create,f0e=Gt.create,p0e=Gt.strictCreate,g0e=Ag.create,m0e=Bv.create,y0e=Ig.create,w0e=io.create,v0e=Tg.create,b0e=b0.create,E0e=ru.create,_0e=Nd.create,C0e=Ng.create,x0e=Pg.create,S0e=Dc.create,A0e=kg.create,I0e=ch.create,bO=Ai.create,T0e=Mo.create,N0e=su.create,P0e=Ai.createWithPreprocess,k0e=ym.create,O0e=()=>mU().optional(),R0e=()=>yU().optional(),$0e=()=>wU().optional(),D0e={string:t=>wi.create({...t,coerce:!0}),number:t=>Rc.create({...t,coerce:!0}),boolean:t=>Cg.create({...t,coerce:!0}),bigint:t=>$c.create({...t,coerce:!0}),date:t=>nu.create({...t,coerce:!0})},j0e=Me;var N=Object.freeze({__proto__:null,defaultErrorMap:Eg,setErrorMap:Bwe,getErrorMap:g0,makeIssue:m0,EMPTY_PATH:Fwe,addIssueToContext:be,ParseStatus:hr,INVALID:Me,DIRTY:hU,OK:Ar,isAborted:_x,isDirty:Cx,isValid:_g,isAsync:y0,get util(){return ut},get objectUtil(){return Ex},ZodParsedType:me,getParsedType:Ba,ZodType:Ge,ZodString:wi,ZodNumber:Rc,ZodBigInt:$c,ZodBoolean:Cg,ZodDate:nu,ZodSymbol:w0,ZodUndefined:xg,ZodNull:Sg,ZodAny:ah,ZodUnknown:Rl,ZodNever:Jo,ZodVoid:v0,ZodArray:Ci,ZodObject:Gt,ZodUnion:Ag,ZodDiscriminatedUnion:Bv,ZodIntersection:Ig,ZodTuple:io,ZodRecord:Tg,ZodMap:b0,ZodSet:ru,ZodFunction:Nd,ZodLazy:Ng,ZodLiteral:Pg,ZodEnum:Dc,ZodNativeEnum:kg,ZodPromise:ch,ZodEffects:Ai,ZodTransformer:Ai,ZodOptional:Mo,ZodNullable:su,ZodDefault:Og,ZodCatch:E0,ZodNaN:_0,BRAND:Xwe,ZodBranded:pU,ZodPipeline:ym,ZodReadonly:C0,custom:gU,Schema:Ge,ZodSchema:Ge,late:e0e,get ZodFirstPartyTypeKind(){return $e},coerce:D0e,any:c0e,array:h0e,bigint:r0e,boolean:wU,date:s0e,discriminatedUnion:m0e,effect:bO,enum:S0e,function:_0e,instanceof:t0e,intersection:y0e,lazy:C0e,literal:x0e,map:b0e,nan:n0e,nativeEnum:A0e,never:u0e,null:a0e,nullable:N0e,number:yU,object:f0e,oboolean:$0e,onumber:R0e,optional:T0e,ostring:O0e,pipeline:k0e,preprocess:P0e,promise:I0e,record:v0e,set:E0e,strictObject:p0e,string:mU,symbol:i0e,transformer:bO,tuple:w0e,undefined:o0e,union:g0e,unknown:l0e,void:d0e,NEVER:j0e,ZodIssueCode:ie,quotelessJson:Mwe,ZodError:_i});const en=N.object({message:N.string()});function ye(t){return N.literal(Ee[t])}N.object({accessList:N.array(N.string()),blockHash:N.string().nullable(),blockNumber:N.string().nullable(),chainId:N.string().or(N.number()),from:N.string(),gas:N.string(),hash:N.string(),input:N.string().nullable(),maxFeePerGas:N.string(),maxPriorityFeePerGas:N.string(),nonce:N.string(),r:N.string(),s:N.string(),to:N.string(),transactionIndex:N.string().nullable(),type:N.string(),v:N.string(),value:N.string()});const U0e=N.object({chainId:N.string().or(N.number())}),L0e=N.object({email:N.string().email()}),M0e=N.object({otp:N.string()}),B0e=N.object({uri:N.string(),preferredAccountType:N.optional(N.string()),chainId:N.optional(N.string().or(N.number()))}),F0e=N.object({chainId:N.optional(N.string().or(N.number())),preferredAccountType:N.optional(N.string()),socialUri:N.optional(N.string())}),z0e=N.object({provider:N.enum(["google","github","apple","facebook","x","discord"])}),W0e=N.object({email:N.string().email()}),q0e=N.object({otp:N.string()}),H0e=N.object({otp:N.string()}),V0e=N.object({themeMode:N.optional(N.enum(["light","dark"])),themeVariables:N.optional(N.record(N.string(),N.string().or(N.number()))),w3mThemeVariables:N.optional(N.record(N.string(),N.string()))}),G0e=N.object({metadata:N.object({name:N.string(),description:N.string(),url:N.string(),icons:N.array(N.string())}).optional(),sdkVersion:N.string().optional(),sdkType:N.string().optional(),projectId:N.string()}),K0e=N.object({type:N.string()}),Y0e=N.object({action:N.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),J0e=N.object({url:N.string()}),Q0e=N.object({userName:N.string()}),Z0e=N.object({email:N.string().optional().nullable(),address:N.string(),chainId:N.string().or(N.number()),accounts:N.array(N.object({address:N.string(),type:N.enum([Rn.ACCOUNT_TYPES.EOA,Rn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:N.string().optional().nullable(),preferredAccountType:N.optional(N.string())}),X0e=N.object({action:N.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),eve=N.object({email:N.string().email().optional().nullable(),address:N.string(),chainId:N.string().or(N.number()),smartAccountDeployed:N.optional(N.boolean()),accounts:N.array(N.object({address:N.string(),type:N.enum([Rn.ACCOUNT_TYPES.EOA,Rn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:N.optional(N.string())}),tve=N.object({uri:N.string()}),nve=N.object({isConnected:N.boolean()}),rve=N.object({chainId:N.string().or(N.number())}),sve=N.object({chainId:N.string().or(N.number())}),ive=N.object({newEmail:N.string().email()}),ove=N.object({smartAccountEnabledNetworks:N.array(N.number())});N.object({address:N.string(),isDeployed:N.boolean()});const ave=N.object({version:N.string().optional()}),cve=N.object({type:N.string(),address:N.string()}),lve=N.any(),uve=N.object({method:N.literal("eth_accounts")}),dve=N.object({method:N.literal("eth_blockNumber")}),hve=N.object({method:N.literal("eth_call"),params:N.array(N.any())}),fve=N.object({method:N.literal("eth_chainId")}),pve=N.object({method:N.literal("eth_estimateGas"),params:N.array(N.any())}),gve=N.object({method:N.literal("eth_feeHistory"),params:N.array(N.any())}),mve=N.object({method:N.literal("eth_gasPrice")}),yve=N.object({method:N.literal("eth_getAccount"),params:N.array(N.any())}),wve=N.object({method:N.literal("eth_getBalance"),params:N.array(N.any())}),vve=N.object({method:N.literal("eth_getBlockByHash"),params:N.array(N.any())}),bve=N.object({method:N.literal("eth_getBlockByNumber"),params:N.array(N.any())}),Eve=N.object({method:N.literal("eth_getBlockReceipts"),params:N.array(N.any())}),_ve=N.object({method:N.literal("eth_getBlockTransactionCountByHash"),params:N.array(N.any())}),Cve=N.object({method:N.literal("eth_getBlockTransactionCountByNumber"),params:N.array(N.any())}),xve=N.object({method:N.literal("eth_getCode"),params:N.array(N.any())}),Sve=N.object({method:N.literal("eth_getFilterChanges"),params:N.array(N.any())}),Ave=N.object({method:N.literal("eth_getFilterLogs"),params:N.array(N.any())}),Ive=N.object({method:N.literal("eth_getLogs"),params:N.array(N.any())}),Tve=N.object({method:N.literal("eth_getProof"),params:N.array(N.any())}),Nve=N.object({method:N.literal("eth_getStorageAt"),params:N.array(N.any())}),Pve=N.object({method:N.literal("eth_getTransactionByBlockHashAndIndex"),params:N.array(N.any())}),kve=N.object({method:N.literal("eth_getTransactionByBlockNumberAndIndex"),params:N.array(N.any())}),Ove=N.object({method:N.literal("eth_getTransactionByHash"),params:N.array(N.any())}),Rve=N.object({method:N.literal("eth_getTransactionCount"),params:N.array(N.any())}),$ve=N.object({method:N.literal("eth_getTransactionReceipt"),params:N.array(N.any())}),Dve=N.object({method:N.literal("eth_getUncleCountByBlockHash"),params:N.array(N.any())}),jve=N.object({method:N.literal("eth_getUncleCountByBlockNumber"),params:N.array(N.any())}),Uve=N.object({method:N.literal("eth_maxPriorityFeePerGas")}),Lve=N.object({method:N.literal("eth_newBlockFilter")}),Mve=N.object({method:N.literal("eth_newFilter"),params:N.array(N.any())}),Bve=N.object({method:N.literal("eth_newPendingTransactionFilter")}),Fve=N.object({method:N.literal("eth_sendRawTransaction"),params:N.array(N.any())}),zve=N.object({method:N.literal("eth_syncing"),params:N.array(N.any())}),Wve=N.object({method:N.literal("eth_uninstallFilter"),params:N.array(N.any())}),EO=N.object({method:N.literal("personal_sign"),params:N.array(N.any())}),qve=N.object({method:N.literal("eth_signTypedData_v4"),params:N.array(N.any())}),Hve=N.object({method:N.literal("eth_sendTransaction"),params:N.array(N.any())}),Vve=N.object({method:N.literal("solana_signMessage"),params:N.object({message:N.string(),pubkey:N.string()})}),Gve=N.object({method:N.literal("solana_signTransaction"),params:N.object({transaction:N.string()})}),Kve=N.object({method:N.literal("solana_signAllTransactions"),params:N.object({transactions:N.array(N.string())})}),Yve=N.object({method:N.literal("solana_signAndSendTransaction"),params:N.object({transaction:N.string(),options:N.object({skipPreflight:N.boolean().optional(),preflightCommitment:N.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:N.number().optional(),minContextSlot:N.number().optional()}).optional()})}),Jve=N.object({method:N.literal("wallet_sendCalls"),params:N.array(N.object({chainId:N.string().or(N.number()).optional(),from:N.string().optional(),version:N.string().optional(),capabilities:N.any().optional(),calls:N.array(N.object({to:N.string().startsWith("0x"),data:N.string().startsWith("0x").optional(),value:N.string().optional()}))}))}),Qve=N.object({method:N.literal("wallet_getCallsStatus"),params:N.array(N.string())}),Zve=N.object({method:N.literal("wallet_getCapabilities")}),Xve=N.object({method:N.literal("wallet_grantPermissions"),params:N.array(N.any())}),ebe=N.object({method:N.literal("wallet_revokePermissions"),params:N.any()}),tbe=N.object({method:N.literal("wallet_getAssets"),params:N.any()}),_O=N.object({token:N.string()}),we=N.object({id:N.string().optional()}),vf={appEvent:we.extend({type:ye("APP_SWITCH_NETWORK"),payload:U0e}).or(we.extend({type:ye("APP_CONNECT_EMAIL"),payload:L0e})).or(we.extend({type:ye("APP_CONNECT_DEVICE")})).or(we.extend({type:ye("APP_CONNECT_OTP"),payload:M0e})).or(we.extend({type:ye("APP_CONNECT_SOCIAL"),payload:B0e})).or(we.extend({type:ye("APP_GET_FARCASTER_URI")})).or(we.extend({type:ye("APP_CONNECT_FARCASTER")})).or(we.extend({type:ye("APP_GET_USER"),payload:N.optional(F0e)})).or(we.extend({type:ye("APP_GET_SOCIAL_REDIRECT_URI"),payload:z0e})).or(we.extend({type:ye("APP_SIGN_OUT")})).or(we.extend({type:ye("APP_IS_CONNECTED"),payload:N.optional(_O)})).or(we.extend({type:ye("APP_GET_CHAIN_ID")})).or(we.extend({type:ye("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(we.extend({type:ye("APP_INIT_SMART_ACCOUNT")})).or(we.extend({type:ye("APP_SET_PREFERRED_ACCOUNT"),payload:K0e})).or(we.extend({type:ye("APP_RPC_REQUEST"),payload:EO.or(tbe).or(uve).or(dve).or(hve).or(fve).or(pve).or(gve).or(mve).or(yve).or(wve).or(vve).or(bve).or(Eve).or(_ve).or(Cve).or(xve).or(Sve).or(Ave).or(Ive).or(Tve).or(Nve).or(Pve).or(kve).or(Ove).or(Rve).or($ve).or(Dve).or(jve).or(Uve).or(Lve).or(Mve).or(Bve).or(Fve).or(zve).or(Wve).or(EO).or(qve).or(Hve).or(Vve).or(Gve).or(Kve).or(Yve).or(Qve).or(Jve).or(Zve).or(Xve).or(ebe)})).or(we.extend({type:ye("APP_UPDATE_EMAIL"),payload:W0e})).or(we.extend({type:ye("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:q0e})).or(we.extend({type:ye("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:H0e})).or(we.extend({type:ye("APP_SYNC_THEME"),payload:V0e})).or(we.extend({type:ye("APP_SYNC_DAPP_DATA"),payload:G0e})).or(we.extend({type:ye("APP_RELOAD")})),frameEvent:we.extend({type:ye("FRAME_SWITCH_NETWORK_ERROR"),payload:en}).or(we.extend({type:ye("FRAME_SWITCH_NETWORK_SUCCESS"),payload:sve})).or(we.extend({type:ye("FRAME_CONNECT_EMAIL_SUCCESS"),payload:Y0e})).or(we.extend({type:ye("FRAME_CONNECT_EMAIL_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:J0e})).or(we.extend({type:ye("FRAME_GET_FARCASTER_URI_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Q0e})).or(we.extend({type:ye("FRAME_CONNECT_FARCASTER_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_CONNECT_OTP_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_CONNECT_OTP_SUCCESS")})).or(we.extend({type:ye("FRAME_CONNECT_DEVICE_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_CONNECT_DEVICE_SUCCESS")})).or(we.extend({type:ye("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Z0e})).or(we.extend({type:ye("FRAME_CONNECT_SOCIAL_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_USER_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_USER_SUCCESS"),payload:eve})).or(we.extend({type:ye("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:tve})).or(we.extend({type:ye("FRAME_SIGN_OUT_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_SIGN_OUT_SUCCESS")})).or(we.extend({type:ye("FRAME_IS_CONNECTED_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_IS_CONNECTED_SUCCESS"),payload:nve})).or(we.extend({type:ye("FRAME_GET_CHAIN_ID_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_CHAIN_ID_SUCCESS"),payload:rve})).or(we.extend({type:ye("FRAME_RPC_REQUEST_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_RPC_REQUEST_SUCCESS"),payload:lve})).or(we.extend({type:ye("FRAME_SESSION_UPDATE"),payload:_O})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SUCCESS"),payload:X0e})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:ive})).or(we.extend({type:ye("FRAME_SYNC_THEME_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_SYNC_THEME_SUCCESS")})).or(we.extend({type:ye("FRAME_SYNC_DAPP_DATA_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(we.extend({type:ye("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:ove})).or(we.extend({type:ye("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:cve})).or(we.extend({type:ye("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_READY"),payload:ave})).or(we.extend({type:ye("FRAME_RELOAD_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_RELOAD_SUCCESS")}))};function dE(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class nbe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=X.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!dE(Ee.FRAME_EVENT_KEY,l))return;const u=vf.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}fs.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{fs.isClient&&window.addEventListener("message",({data:o})=>{if(!dE(Ee.FRAME_EVENT_KEY,o))return;const a=vf.frameEvent.parse(o);i(a)})},onAppEvent:i=>{fs.isClient&&window.addEventListener("message",({data:o})=>{if(!dE(Ee.APP_EVENT_KEY,o))return;const a=vf.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(fs.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");vf.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(fs.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");vf.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),fs.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${kX}?projectId=${e}&chainId=${r}&version=${RX}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class rbe{constructor(e){var i;const n=Ch({level:OX}),{logger:r,chunkLoggerController:s}=NA({opts:n});this.logger=fr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class sbe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new rbe(e)),this.abortController=i,this.w3mFrame=new nbe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Fn.get(Ee.EMAIL_LOGIN_USED_KEY)}getEmail(){return Fn.get(Ee.EMAIL)}getUsername(){return Fn.get(Ee.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ee.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{fs.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ee.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ee.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ee.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ee.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ee.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ee.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ee.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ee.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ee.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ee.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ee.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ee.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ee.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ee.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ee.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ee.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ee.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ee.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ee.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ee.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Rn.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ee.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ee.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ee.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Rn.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Rn.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ee.APP_SYNC_DAPP_DATA,Ee.APP_SYNC_THEME,Ee.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ee.APP_CONNECT_EMAIL,Ee.APP_CONNECT_DEVICE,Ee.APP_CONNECT_OTP,Ee.APP_CONNECT_SOCIAL,Ee.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,_;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((_=w.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Fn.set(Ee.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Fn.set(Ee.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Fn.set(Ee.EMAIL,e),Fn.set(Ee.EMAIL_LOGIN_USED_KEY,"true"),Fn.delete(Ee.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Fn.delete(Ee.EMAIL_LOGIN_USED_KEY),Fn.delete(Ee.EMAIL),Fn.delete(Ee.LAST_USED_CHAIN_KEY),Fn.delete(Ee.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Fn.set(Ee.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Fn.get(Ee.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Fn.set(Ee.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class $l{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return $l.instance||($l.instance=new sbe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),$l.instance}}var CO={};const ibe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof CO<"u"?CO.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},Sx={filterOutDuplicatesByRDNS(t){const e=ne.state.enableEIP6963?de.state.connectors:[],n=le.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ce.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=de.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=le.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=de.state,{featuredWalletIds:n}=ne.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ne.state.features)==null?void 0:c.connectMethodsOrder),r=e||de.state.connectors;if(n)return n;const{injected:s,announced:i}=dw.getConnectorsByType(r,Se.state.recommended,Se.state.featured),o=s.filter(dw.showConnector),a=i.filter(dw.showConnector);return o.length||a.length?["wallet","email","social"]:ibe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Se.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Se.state.excludedWallets.some(r=>bg.isLowerCaseMatch(r.name,t.name));return e||n}},dw={getConnectorsByType(t,e,n){const{customWallets:r}=ne.state,s=le.getRecentWallets(),i=Sx.filterOutDuplicateWallets(e),o=Sx.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Se.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Se.state.excludedWallets.some(i=>bg.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ce.isMobile()||Ce.isMobile()&&!e&&!ve.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from($.state.chains.values()).some(n=>de.getConnectorId(n.namespace)===X.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ne.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=dw.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ne.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:v})=>v===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Ce.isMobile())return{accounts:[],chainId:void 0};if(t.id===X.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hw=globalThis,lI=hw.ShadowRoot&&(hw.ShadyCSS===void 0||hw.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,uI=Symbol(),xO=new WeakMap;let vU=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==uI)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(lI&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=xO.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&xO.set(n,e))}return e}toString(){return this.cssText}};const Os=t=>new vU(typeof t=="string"?t:t+"",void 0,uI),Pd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new vU(n,t,uI)},obe=(t,e)=>{if(lI)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=hw.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},SO=lI?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Os(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:abe,defineProperty:cbe,getOwnPropertyDescriptor:lbe,getOwnPropertyNames:ube,getOwnPropertySymbols:dbe,getPrototypeOf:hbe}=Object,_c=globalThis,AO=_c.trustedTypes,fbe=AO?AO.emptyScript:"",hE=_c.reactiveElementPolyfillSupport,dp=(t,e)=>t,Ax={toAttribute(t,e){switch(e){case Boolean:t=t?fbe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},bU=(t,e)=>!abe(t,e),IO={attribute:!0,type:String,converter:Ax,reflect:!1,useDefault:!1,hasChanged:bU};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),_c.litPropertyMetadata??(_c.litPropertyMetadata=new WeakMap);let td=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=IO){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&cbe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=lbe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??IO}static _$Ei(){if(this.hasOwnProperty(dp("elementProperties")))return;const e=hbe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(dp("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(dp("properties"))){const n=this.properties,r=[...ube(n),...dbe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(SO(s))}else e!==void 0&&n.push(SO(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return obe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:Ax).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:Ax;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??bU)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};td.elementStyles=[],td.shadowRootOptions={mode:"open"},td[dp("elementProperties")]=new Map,td[dp("finalized")]=new Map,hE==null||hE({ReactiveElement:td}),(_c.reactiveElementVersions??(_c.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hp=globalThis,x0=hp.trustedTypes,TO=x0?x0.createPolicy("lit-html",{createHTML:t=>t}):void 0,EU="$lit$",Fa=`lit$${Math.random().toFixed(9).slice(2)}$`,_U="?"+Fa,pbe=`<${_U}>`,iu=document,Rg=()=>iu.createComment(""),$g=t=>t===null||typeof t!="object"&&typeof t!="function",dI=Array.isArray,gbe=t=>dI(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",fE=`[ 	
\f\r]`,bf=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,NO=/-->/g,PO=/>/g,Qc=RegExp(`>|${fE}(?:([^\\s"'>=/]+)(${fE}*=${fE}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),kO=/'/g,OO=/"/g,CU=/^(?:script|style|textarea|title)$/i,xU=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),$xe=xU(1),Dxe=xU(2),lh=Symbol.for("lit-noChange"),Pn=Symbol.for("lit-nothing"),RO=new WeakMap,bl=iu.createTreeWalker(iu,129);function SU(t,e){if(!dI(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return TO!==void 0?TO.createHTML(e):e}const mbe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=bf;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===bf?u[1]==="!--"?o=NO:u[1]!==void 0?o=PO:u[2]!==void 0?(CU.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Qc):u[3]!==void 0&&(o=Qc):o===Qc?u[0]===">"?(o=s??bf,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Qc:u[3]==='"'?OO:kO):o===OO||o===kO?o=Qc:o===NO||o===PO?o=bf:(o=Qc,s=void 0);const f=o===Qc&&t[a+1].startsWith("/>")?" ":"";i+=o===bf?c+pbe:d>=0?(r.push(l),c.slice(0,d)+EU+c.slice(d)+Fa+f):c+Fa+(d===-2?a:f)}return[SU(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Dg{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=mbe(e,n);if(this.el=Dg.createElement(l,r),bl.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=bl.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(EU)){const h=u[o++],f=s.getAttribute(d).split(Fa),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?wbe:p[1]==="?"?vbe:p[1]==="@"?bbe:Fv}),s.removeAttribute(d)}else d.startsWith(Fa)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(CU.test(s.tagName)){const d=s.textContent.split(Fa),h=d.length-1;if(h>0){s.textContent=x0?x0.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Rg()),bl.nextNode(),c.push({type:2,index:++i});s.append(d[h],Rg())}}}else if(s.nodeType===8)if(s.data===_U)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Fa,d+1))!==-1;)c.push({type:7,index:i}),d+=Fa.length-1}i++}}static createElement(e,n){const r=iu.createElement("template");return r.innerHTML=e,r}}function uh(t,e,n=t,r){var o,a;if(e===lh)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=$g(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=uh(t,s._$AS(t,e.values),s,r)),e}class ybe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??iu).importNode(n,!0);bl.currentNode=s;let i=bl.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new wm(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new Ebe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=bl.nextNode(),o++)}return bl.currentNode=iu,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class wm{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Pn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=uh(this,e,n),$g(e)?e===Pn||e==null||e===""?(this._$AH!==Pn&&this._$AR(),this._$AH=Pn):e!==this._$AH&&e!==lh&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):gbe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Pn&&$g(this._$AH)?this._$AA.nextSibling.data=e:this.T(iu.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Dg.createElement(SU(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new ybe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=RO.get(e.strings);return n===void 0&&RO.set(e.strings,n=new Dg(e)),n}k(e){dI(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new wm(this.O(Rg()),this.O(Rg()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Fv{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Pn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Pn}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=uh(this,e,n,0),o=!$g(e)||e!==this._$AH&&e!==lh,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=uh(this,a[r+c],n,c),l===lh&&(l=this._$AH[c]),o||(o=!$g(l)||l!==this._$AH[c]),l===Pn?e=Pn:e!==Pn&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Pn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class wbe extends Fv{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Pn?void 0:e}}class vbe extends Fv{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Pn)}}class bbe extends Fv{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=uh(this,e,n,0)??Pn)===lh)return;const r=this._$AH,s=e===Pn&&r!==Pn||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Pn&&(r===Pn||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class Ebe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){uh(this,e)}}const pE=hp.litHtmlPolyfillSupport;pE==null||pE(Dg,wm),(hp.litHtmlVersions??(hp.litHtmlVersions=[])).push("3.3.0");const _be=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new wm(e.insertBefore(Rg(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dl=globalThis;class fw extends td{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=_be(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return lh}}var _R;fw._$litElement$=!0,fw.finalized=!0,(_R=Dl.litElementHydrateSupport)==null||_R.call(Dl,{LitElement:fw});const gE=Dl.litElementPolyfillSupport;gE==null||gE({LitElement:fw});(Dl.litElementVersions??(Dl.litElementVersions=[])).push("4.2.0");let fp,Cc,xc;function jxe(t,e){fp=document.createElement("style"),Cc=document.createElement("style"),xc=document.createElement("style"),fp.textContent=kd(t).core.cssText,Cc.textContent=kd(t).dark.cssText,xc.textContent=kd(t).light.cssText,document.head.appendChild(fp),document.head.appendChild(Cc),document.head.appendChild(xc),AU(e)}function AU(t){Cc&&xc&&(t==="light"?(Cc.removeAttribute("media"),xc.media="enabled"):(xc.removeAttribute("media"),Cc.media="enabled"))}function Cbe(t){fp&&Cc&&xc&&(fp.textContent=kd(t).core.cssText,Cc.textContent=kd(t).dark.cssText,xc.textContent=kd(t).light.cssText)}function kd(t){return{core:Pd`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Os(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Os((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Os((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Os((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Os((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Pd`
      :root {
        --w3m-color-mix: ${Os((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Os($o(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Os($o(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Pd`
      :root {
        --w3m-color-mix: ${Os((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Os($o(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Os($o(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Uxe=Pd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Lxe=Pd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Mxe=Pd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Mf={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},IU=_W({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function vm(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const $O=vm({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),DO=vm({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});vm({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});vm({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});vm({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const xbe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},pp={getMethodsByChainNamespace(t){return xbe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case $O.caipNetworkId:u.chains.push($O.deprecatedCaipNetworkId);break;case DO.caipNetworkId:u.chains.push(DO.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await ep.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class hI{constructor({provider:e,namespace:n}){this.id=X.CONNECTOR_ID.WALLET_CONNECT,this.name=ic.ConnectorNamesMap[X.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=ic.ConnectorImageIds[X.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=$.getCaipNetworks.bind($),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ne.state.universalProviderConfigOverride,s=pp.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return up.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Sbe})}}const Sbe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class TU{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>$.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:X.CONNECTOR_ID.AUTH,type:"AUTH",name:X.CONNECTOR_NAMES.AUTH,provider:e,imageId:ic.ConnectorImageIds[X.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){ce.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=ce.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof hI);if(!e)throw new Error("WalletConnectConnector not found");return e}}class Abe extends TU{setUniversalProvider(e){this.addConnector(new hI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Ce.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&vt.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(ce.state.balanceLoading&&e.chainId===((c=$.state.activeCaipNetwork)==null?void 0:c.id))return{balance:ce.state.balance||"0.00",symbol:ce.state.balanceSymbol||""};const s=(await ce.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===X.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Th.encode(new TextEncoder().encode(r)),pubkey:s}},(a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=$.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===X.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:zl(n.id)}]}))}catch(u){if(u.code===Mf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Mf.ERROR_INVALID_CHAIN_ID||u.code===Mf.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Mf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:zl(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const Ibe=["email","socials","swaps","onramp","activity","reownBranding"],Ny={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?vt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?vt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?vt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},Tbe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Ny[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Ny[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Ny[t].processApi(e)},processFallbackFeature(t,e){return Ny[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Se.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?vt.DEFAULT_REMOTE_FEATURES:vt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of Ibe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),vt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;hn.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class Nbe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=$.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=$.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=$.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return $.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>$.getCaipNetworks(n),this.getActiveChainNamespace=()=>$.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{$.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>$.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>$.state.activeChain===n||!n?$.state.activeCaipAddress:$.getAccountProp("caipAddress",n),this.setClientId=n=>{Ne.setClientId(n)},this.getProvider=n=>St.getProvider(n),this.getProviderType=n=>St.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=ce.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{ce.setCaipAddress(n,r),n&&ne.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{ce.setBalance(n,r,s)},this.setProfileName=(n,r)=>{ce.setProfileName(n,r)},this.setProfileImage=(n,r)=>{ce.setProfileImage(n,r)},this.setUser=(n,r)=>{ce.setUser(n,r)},this.resetAccount=n=>{ce.resetAccount(n)},this.setCaipNetwork=n=>{$.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{$.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{ce.setAllAccounts(n,r),ne.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{ce.setStatus(n,r),de.isConnected()?le.setConnectionStatus("connected"):le.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>$.getAccountProp("address",n),this.setConnectors=n=>{const r=[...de.state.allConnectors,...n];de.setConnectors(r)},this.setConnections=(n,r)=>{ve.setConnections(n,r)},this.fetchIdentity=n=>Ne.fetchIdentity(n),this.getReownName=n=>ep.getNamesForAddress(n),this.getConnectors=()=>de.getConnectors(),this.getConnectorImage=n=>e6.getConnectorImage(n),this.getConnections=n=>ug.getConnectionsData(n).connections,this.getRecentConnections=n=>ug.getConnectionsData(n).recentConnections,this.switchConnection=n=>ve.switchConnection(n),this.deleteConnection=n=>le.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=St.getProviderId(r),i=n?{...n,type:s}:void 0;ce.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!$.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{ce.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{ce.removeAddressLabel(n,r)},this.getAddress=n=>$.state.activeChain===n||!n?ce.state.address:$.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>$.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{$.resetNetwork(n)},this.addConnector=n=>{de.addConnector(n)},this.resetWcConnection=()=>{ve.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{ce.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{ce.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{$.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{ce.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ne.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await Tbe.fetchRemoteFeatures(e),ne.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&SC.setOnrampProviders(this.remoteFeatures.onramp),((n=ne.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ne.state.remoteFeatures)==null?void 0:r.socials)&&((s=ne.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Se.fetchAllowedOrigins();if(!e||!Ce.isClient()){hn.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;pp.isOriginAllowed(n,e,Mf.DEFAULT_ALLOWED_ANCESTORS)||hn.open(Vt.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){hn.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":hn.open(Vt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;hn.open({shortMessage:Vt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Vt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:hn.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,bt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&qr.setThemeMode(e.themeMode),e.themeVariables&&qr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");$.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&$.setActiveCaipNetwork(n)}initializeConnectionController(e){ve.initialize(e.adapters??[]),ve.setWcBasic(e.basic??!1)}initializeConnectorController(){de.initialize(this.chainNamespaces)}initializeProjectSettings(e){ne.setProjectId(e.projectId),ne.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ne.setDebug(e.debug!==!1),ne.setEnableWalletConnect(e.enableWalletConnect!==!1),ne.setEnableWalletGuide(e.enableWalletGuide!==!1),ne.setEnableWallets(e.enableWallets!==!1),ne.setEIP6963Enabled(e.enableEIP6963!==!1),ne.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ne.setEnableAuthLogger(e.enableAuthLogger!==!1),ne.setCustomRpcUrls(e.customRpcUrls),ne.setEnableEmbedded(e.enableEmbedded),ne.setAllWallets(e.allWallets),ne.setIncludeWalletIds(e.includeWalletIds),ne.setExcludeWalletIds(e.excludeWalletIds),ne.setFeaturedWalletIds(e.featuredWalletIds),ne.setTokens(e.tokens),ne.setTermsConditionsUrl(e.termsConditionsUrl),ne.setPrivacyPolicyUrl(e.privacyPolicyUrl),ne.setCustomWallets(e.customWallets),ne.setFeatures(e.features),ne.setAllowUnsupportedChain(e.allowUnsupportedChain),ne.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ne.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ne.setDefaultAccountTypes(e.defaultAccountTypes);const n=le.getPreferredAccountTypes()||{},r={...ne.state.defaultAccountTypes,...n};ce.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ne.setMetadata(e.metadata),ne.setDisableAppend(e.disableAppend),ne.setEnableEmbedded(e.enableEmbedded),ne.setSIWX(e.siwx),!e.projectId){hn.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===X.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ne.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Ce.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Ki.getUnsupportedNetwork(`${n}:${e}`);$.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Ki.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Ki.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Ki.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Ki.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=St.getProvider(e),s=St.getProviderId(e),{caipAddress:i}=$.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),le.removeConnectedNamespace(e),St.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),de.removeConnectorId(e),$.resetAccount(e),$.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=$.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),le.setConnectedNamespaces([...$.state.chains.keys()]),this.chainNamespaces.forEach(o=>{de.setConnectorId(Ft.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,v,_;const c=$.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const E=this.getCaipNetworks().find(x=>x.chainNamespace===i);E&&this.setCaipNetwork(E)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((_=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:_[0])});if(!h)return;le.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=ce.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=$.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),le.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=LX(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));ht.resetSend(),ve.resetWcConnection(),await up.clearSessions(),de.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));le.deleteConnectedSocialProvider(),bt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter($.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:ce.state.address,provider:St.getProvider($.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(vt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter($.state.activeChain),s=St.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===X.CHAIN.EVM){const n=this.getAdapter($.state.activeChain),r=St.getProvider($.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:ce.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:$.state.activeChain}),ce.state.profileImage||!1},getEnsAddress:async e=>await pp.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter($.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=St.getProvider($.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter($.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter($.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter($.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter($.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter($.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter($.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!ce.state.address||this.updateNativeBalance(ce.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ve.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(St.getProviderId($.state.activeChain)===Ft.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=St.getProvider(n),i=St.getProviderId(n);if(e.chainNamespace===$.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Ft.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=ds.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new Abe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=le.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(le.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=$.state.activeChain===e,c=$.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=ce.state.address,i=$.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=$.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=$.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=$.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===X.CHAIN.EVM&&Ce.isSafeApp()&&de.setConnectorId(X.CONNECTOR_ID.SAFE,e);const n=de.getConnectorId(e);switch(this.setStatus("connecting",e),n){case X.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case X.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=de.getConnectorId(e),s=this.getCaipNetwork(e),o=de.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Ce.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=$.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:w}=ds.parseCaipAddress(g);return w===(c==null?void 0:c.toString())})||a[0];if(l){const g=ds.validateCaipAddress(l),{chainId:w,address:y}=ds.parseCaipAddress(g);if(St.setProviderId(i,Ft.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&$.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==X.CHAIN.EVM){const b=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:$.state.activeCaipNetwork});St.setProvider(i,b)}else St.setProvider(i,this.universalProvider);de.setConnectorId(X.CONNECTOR_ID.WALLET_CONNECT,i),le.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:y,chainId:w,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await $.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=ds.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Ce.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){St.setProviderId(s,e),St.setProvider(s,n),de.setConnectorId(r,s)}async syncAllAccounts(e){const n=de.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===$.state.activeChain,r=$.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=le.getActiveNetworkProps(),c=i||a,l=((d=$.state.activeCaipNetwork)==null?void 0:d.name)===X.UNSUPPORTED_NETWORK_NAME,u=$.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(v=>{var _;return((_=ds.parseCaipNetworkId(v))==null?void 0:_.chainId)===c.toString()}),b=w.find(v=>{var _;return((_=ds.parseCaipNetworkId(v))==null?void 0:_.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===y),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===$.state.activeChain?ne.state.enableNetworkSwitch&&!ne.state.allowUnsupportedChain&&((h=$.state.activeCaipNetwork)==null?void 0:h.name)===X.UNSUPPORTED_NETWORK_NAME?$.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),bg.isLowerCaseMatch(s,ce.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=de.getConnectorId(e),r=St.getProviderId(e);if(r===Ft.CONNECTOR_TYPE_ANNOUNCED||r===Ft.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Ft.CONNECTOR_TYPE_WALLET_CONNECT){const i=St.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===X.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===X.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!lg.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=$.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=Uwe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ne.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await $we.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{ve.setUri(e)}),this.universalProvider.on("connect",ve.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),ve.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(pp.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Ce.isCaipAddress(r[0])&&this.syncAccount(ds.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ce.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){bt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Vt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Vt.ALERT_ERRORS[o];a&&(hn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ve.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return gt.open({...e,data:{swap:e.arguments}})}return gt.open(e)}async close(){await this.injectModalUi(),gt.close()}setLoading(e,n){gt.setLoading(e,n)}async disconnect(e){await ve.disconnect({namespace:e})}getSIWX(){return ne.state.siwx}getError(){return""}getChainId(){var e;return(e=$.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){hn.open(Vt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await $.switchActiveNetwork(n)}getWalletProvider(){return $.state.activeChain?St.state.providers[$.state.activeChain]:null}getWalletProviderType(){return St.getProviderId($.state.activeChain)}subscribeProviders(e){return St.subscribeProviders(e)}getThemeMode(){return qr.state.themeMode}getThemeVariables(){return qr.state.themeVariables}setThemeMode(e){qr.setThemeMode(e),AU(qr.state.themeMode)}setTermsConditionsUrl(e){ne.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ne.setPrivacyPolicyUrl(e)}setThemeVariables(e){qr.setThemeVariables(e),Cbe(qr.state.themeVariables)}subscribeTheme(e){return qr.subscribe(e)}subscribeConnections(e){return ve.subscribe(e)}getWalletInfo(e){return e?$.getAccountProp("connectedWalletInfo",e):ce.state.connectedWalletInfo}getAccount(e){var o;const n=de.getAuthConnector(e),r=$.getAccountData(e),s=$.state.activeChain,i=le.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Ce.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===X.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:le.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?$.subscribeChainProp("accountState",r,n):$.subscribe(r),de.subscribe(r)}subscribeNetwork(e){return $.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?ce.subscribeKey("connectedWalletInfo",e,n):ce.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ce.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){$.subscribeKey("activeCaipNetwork",e)}getState(){return Zi.state}subscribeState(e){return Zi.subscribe(e)}showErrorMessage(e){mi.showError(e)}showSuccessMessage(e){mi.showSuccess(e)}getEvent(){return{...bt.state}}subscribeEvents(e){return bt.subscribe(e)}replace(e){ke.replace(e)}redirect(e){ke.push(e)}popTransactionStack(e){ke.popTransactionStack(e)}isOpen(){return gt.state.open}isTransactionStackEmpty(){return ke.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ne.setFeatures(e)}updateRemoteFeatures(e){ne.setRemoteFeatures(e)}updateOptions(e){const r={...ne.state||{},...e};ne.setOptions(r)}setConnectMethodsOrder(e){ne.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ne.setWalletFeaturesOrder(e)}setCollapseWallets(e){ne.setCollapseWallets(e)}setSocialsOrder(e){ne.setSocialsOrder(e)}getConnectMethodsOrder(){return Sx.getConnectOrderMethod(ne.state.features,de.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||$.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&$.removeNetwork(e,n)}}let jO=!1;class Pbe extends Nbe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{fs.checkIfRequestExists(n)?fs.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Rn.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Rn.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=fs.checkIfRequestIsSafe(r),i=ce.state.address,o=$.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=$.state.activeChain;de.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=$.state.activeChain,s=r===X.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ne.state.defaultAccountTypes[r],o=(l=ce.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;bg.isLowerCaseMatch(n.address,ce.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...ce.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Ce.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Ce.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...ce.state.user||{},username:n},$.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,$.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,$.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===$.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=ce.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=qr.getSnapshot(),u=ne.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:$o(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:X.CONNECTOR_ID.AUTH,info:{name:X.CONNECTOR_ID.AUTH},type:Ft.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=$.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):de.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),le.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Ce.isTelegram())return;const r=le.getTelegramSocialProvider();if(!r||!Ce.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;ce.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=de.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ve.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),le.setConnectedSocialProvider(r),le.removeTelegramSocialProvider(),bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=bg.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=$l.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:Vt.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?hn.open(Vt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?hn.open(Vt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&hn.open(Vt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Zi.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===$.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Se.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=$.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=St.getProvider(r),u=St.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=St.getProviderId(n)===Ft.CONNECTOR_TYPE_AUTH,u=St.getProviderId(r),d=u===Ft.CONNECTOR_TYPE_AUTH,h=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if($.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:X.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Ft.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Ft.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Zi.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==X.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=St.getProviderId(e);if(n===Ft.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=le.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Ce.isClient()&&!jO)try{const e={...vt.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Ce.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ne.state.disableAppend&&!ne.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}jO=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Ce.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(on(()=>import("./embedded-wallet-B47Qs0ew.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(on(()=>import("./email-DxZVxJkT.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(on(()=>import("./socials-CO21B68L.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(on(()=>import("./swaps-D_pc71Ev.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(on(()=>import("./send-DWWxIbMc.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(on(()=>import("./receive-Csts46wF.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(on(()=>import("./onramp-sT-p_Nd6.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(on(()=>import("./transactions-oYsT6EMr.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(on(()=>import("./index-D2UdZLjz.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,on(()=>import("./index-DiIeBLIA.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),on(()=>import("./w3m-modal-2kEW2A6F.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let Aa;function kbe(t){t&&(Aa=t)}function bm(){if(!Aa)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Aa==null?void 0:Aa.open(n))}async function e(){await(Aa==null?void 0:Aa.close())}return{open:t,close:e}}const Obe="1.7.10";let Py;function Rbe(t){return Py||(Py=new Pbe({...t,sdkVersion:Ce.generateSdkVersion(t.adapters??[],"react",Obe)}),kbe(Py)),Py}const $be=Ti({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),UO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Dbe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=$be({isOpen:t}),{open:i}=bm(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,w]=D.useState(1),[y,b]=D.useState(1),[v,_]=D.useState(0),[E,x]=D.useState(null),[S,T]=D.useState(UO[0]),[C,O]=D.useState(!1),[R,F]=D.useState(null),q=D.useCallback(async()=>{var k,U;try{if((k=window.solana)!=null&&k.isPhantom){const z=await window.solana.connect();F(z.publicKey.toString());return}if((U=window.solflare)!=null&&U.isSolflare){const z=await window.solflare.connect();F(z.publicKey.toString());return}i()}catch(z){console.error("Failed to connect Solana wallet:",z),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);D.useEffect(()=>{var k,U;(k=window.solana)!=null&&k.publicKey?F(window.solana.publicKey.toString()):(U=window.solflare)!=null&&U.publicKey&&F(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var U;u(!0),h(null);try{let z,G=f==="owned"&&r||void 0;if(S.api==="opensea-solana"){if(f==="owned"&&!R){O(!0),u(!1);return}G=R||void 0,z=await J8(S.slug,50),console.log("Fetched Solana NFTs from collection:",z.data.length),f==="owned"&&R&&(console.log("Filtering for owner:",R),console.log("Sample NFT owner data:",(U=z.data[0])==null?void 0:U.owners),console.log("All NFTs owner data:",z.data.map(Y=>({name:Y.name,owners:Y.owners,owner_of:Y.owner_of}))),z.data.some(Y=>Y.owners&&Y.owners.length>0)?(z.data=z.data.filter(Y=>{const Z=Y.owners.some(se=>se.owner_of&&se.owner_of.toLowerCase()===R.toLowerCase());return Z&&console.log("Found owned NFT:",Y.name),Z}),console.log("NFTs after filtering:",z.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else S.api==="opensea"?z=await xA(S.slug,50,G):z=await CA(S.slug,g,50,G);c(z.data),b(z.totalPages),_(z.totalCount)}catch(z){z instanceof Error?h(z.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,S,R]),D.useEffect(()=>{C&&q()},[C,q]);const B=k=>new Date(k).toLocaleDateString(),I=k=>S.api==="opensea-solana"&&(!k.owners||k.owners.length===0)?"Owner data unavailable":k.owners.length>0?`${k.owners[0].owner_of.substring(0,6)}...`:"N/A",A=()=>{n&&n()},j=async k=>{if(S.api==="opensea"&&S.chain)try{const U=await Y8(S.chain,k.address,k.token_id.toString()),z={...k,attributes:JSON.stringify(U.traits||[])};x(z)}catch(U){console.error("Failed to fetch full NFT details",U),x(k)}else x(k)},P=k=>{T(k),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(sm,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:A,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:UO.map(k=>m.jsx("button",{className:`${s.collectionButton} ${S.slug===k.slug?"active":""}`,onClick:()=>P(k),children:k.name},k.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!R,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||R?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||R?1:.6},children:"My NFTs"}),S.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{q()},style:{background:R?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:R?"white":"black",marginLeft:"auto"},children:R?`Solana: ${R.slice(0,4)}...${R.slice(-4)}`:"Connect Solana"})]}),S.api==="opensea-solana"&&!R&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(k=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{j(k)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${k.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",k.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I(k)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",B(k.created_at)]})]},k.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(k=>Math.max(1,k-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(k=>Math.min(y,k+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),E&&m.jsx(HZ,{nft:E,onClose:()=>x(null)})]}):null},jbe=Ti({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),Ube=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}];function NU(){const t=jbe(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(36),[u,d]=D.useState(36),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[w,y]=D.useState(!1),[b,v]=D.useState(!1),[_,E]=D.useState(!1),x=D.useCallback(()=>{const B=P=>{const k=e.current;if(!k)return;P.textAlign="center";const U=(z,G)=>{const Q=z.split(" "),Y=[];let Z="";for(let se=0;se<Q.length;se++){const Pe=Z?Z+" "+Q[se]:Q[se];P.measureText(Pe).width<=G?Z=Pe:(Z&&Y.push(Z),Z=Q[se])}return Z&&Y.push(Z),Y};if(s){P.font=`bold ${c}px Impact`;const z=k.width*.9;(function(){return P.font=`bold ${c}px Impact`,U(s,z)})().forEach((Q,Y)=>{const Z=c+10+Y*c*1.2;P.strokeStyle="#000",P.lineWidth=4,P.strokeText(Q,k.width/2,Z),P.fillStyle="#fff",P.fillText(Q,k.width/2,Z)})}if(o){P.font=`bold ${u}px Impact`;const z=k.width*.9,G=function(){return P.font=`bold ${u}px Impact`,U(o,z)}(),Q=12;G.forEach((Y,Z)=>{const se=k.height-Q-(G.length-1-Z)*u*1.2;P.strokeStyle="#000",P.lineWidth=4,P.strokeText(Y,k.width/2,se),P.fillStyle="#fff",P.fillText(Y,k.width/2,se)})}},I=P=>{try{h&&S(P),p&&T(P),w&&C(P)}catch{console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead."),f(!1),g(!1),y(!1)}},A=e.current;if(!A)return;const j=A.getContext("2d");if(j)if(j.clearRect(0,0,A.width,A.height),n){console.log("Loading image:",n);const P=new Image;P.crossOrigin="anonymous",P.onload=()=>{console.log("Image loaded successfully:",P.width,"x",P.height);const k=e.current;if(!k||k!==A)return;const U=k.getContext("2d");if(!U)return;U.clearRect(0,0,k.width,k.height);const z=Math.min(k.width/P.width,k.height/P.height),G=(k.width-P.width*z)/2,Q=(k.height-P.height*z)/2;console.log("Drawing image at:",G,Q,"with scale:",z),U.drawImage(P,G,Q,P.width*z,P.height*z),B(U),I(k)},P.onerror=k=>{console.error("Failed to load image:",n,k);const U=e.current;if(!U||U!==A)return;const z=U.getContext("2d");z&&(z.clearRect(0,0,U.width,U.height),z.fillStyle="#333",z.fillRect(0,0,U.width,U.height),B(z),I(U))},P.src=n}else j.fillStyle="#333",j.fillRect(0,0,A.width,A.height),B(j),I(A)},[n,s,c,o,u,h,p,w]),S=B=>{const I=B.getContext("2d");if(!I)return;const A=I.getImageData(0,0,B.width,B.height),j=A.data;for(let P=0;P<j.length;P+=4){const k=j[P],U=j[P+1],z=j[P+2],G=(k+U+z)/3,Q=1.8;j[P]=Math.min(255,G+(k-G)*Q),j[P+1]=Math.min(255,G+(U-G)*Q*.7),j[P+2]=Math.min(255,G+(z-G)*Q*.4);const Y=1.3;j[P]=Math.min(255,Math.max(0,j[P]*Y)),j[P+1]=Math.min(255,Math.max(0,j[P+1]*Y)),j[P+2]=Math.min(255,Math.max(0,j[P+2]*Y))}I.putImageData(A,0,0)},T=B=>{const I=B.getContext("2d");if(!I)return;const A=4,P=I.getImageData(0,0,B.width,B.height).data,k=new Uint8ClampedArray(P);for(let U=0;U<B.height;U+=A)for(let z=0;z<B.width;z+=A){const G=(U*B.width+z)*4,Q=P[G],Y=P[G+1],Z=P[G+2],se=P[G+3];for(let Pe=0;Pe<A&&U+Pe<B.height;Pe++)for(let Oe=0;Oe<A&&z+Oe<B.width;Oe++){const De=((U+Pe)*B.width+(z+Oe))*4;k[De]=Q,k[De+1]=Y,k[De+2]=Z,k[De+3]=se}}I.putImageData(new ImageData(k,B.width,B.height),0,0)},C=B=>{const I=B.getContext("2d");if(!I)return;const A=I.getImageData(0,0,B.width,B.height),j=A.data;for(let P=0;P<j.length;P+=4){const k=(Math.random()-.5)*50;j[P]=Math.max(0,Math.min(255,j[P]+k)),j[P+1]=Math.max(0,Math.min(255,j[P+1]+k)),j[P+2]=Math.max(0,Math.min(255,j[P+2]+k))}I.putImageData(A,0,0)};D.useEffect(()=>{x()},[x]);const O=B=>{var A;const I=(A=B.target.files)==null?void 0:A[0];I&&r(URL.createObjectURL(I))},R=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),y(!1)},F=()=>{const B=e.current;if(!B)return;const I=document.createElement("a");I.download="meme.png",I.href=B.toDataURL("image/png"),document.body.appendChild(I),I.click(),document.body.removeChild(I)},q=async B=>{E(!0),v(!1);try{console.log("Fetching NFTs for collection:",B);let I;if(B.api==="opensea"){console.log("Using OpenSea API for:",B.slug);const A=await xA(B.slug,50);I=A.data,console.log("OpenSea response:",A)}else if(B.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",B.slug);const A=await J8(B.slug,50);I=A.data,console.log("OpenSea Solana response:",A)}else{console.log("Using Scatter API for:",B.slug);const A=await CA(B.slug,1,50);I=A.data,console.log("Scatter response:",A)}if(I&&I.length>0){const A=I[Math.floor(Math.random()*I.length)],j=A.image||A.image_url||A.image_url_shrunk;console.log("Selected NFT:",A),console.log("Image URL:",j),r(j)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(I){console.error("Error fetching NFTs:",I),alert("Failed to fetch NFT images. Check console for details.")}finally{E(!1)}};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(B=>!B),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:Ube.map(B=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{q(B)},children:B.name},B.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:O})]}),_&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:B=>i(B.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:B=>l(Number(B.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:B=>a(B.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:B=>d(Number(B.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(B=>!B),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(B=>!B),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(B=>!B),children:"Grain"})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:F,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:R,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:320,height:320,className:t.canvas})})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jg(){return jg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jg.apply(this,arguments)}var oc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(oc||(oc={}));const LO="popstate";function Lbe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Ix("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:kU(s)}return Bbe(e,n,null,t)}function Cn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function PU(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Mbe(){return Math.random().toString(36).substr(2,8)}function MO(t,e){return{usr:t.state,key:t.key,idx:e}}function Ix(t,e,n,r){return n===void 0&&(n=null),jg({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Rh(e):e,{state:n,key:e&&e.key||r||Mbe()})}function kU(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Rh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Bbe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=oc.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(jg({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=oc.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=oc.Push;let b=Ix(g.location,w,y);l=u()+1;let v=MO(b,l),_=g.createHref(b);try{o.pushState(v,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(_)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=oc.Replace;let b=Ix(g.location,w,y);l=u();let v=MO(b,l),_=g.createHref(b);o.replaceState(v,"",_),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:kU(w);return b=b.replace(/ $/,"%20"),Cn(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(LO,d),c=w,()=>{s.removeEventListener(LO,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var BO;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(BO||(BO={}));function Fbe(t,e,n){return n===void 0&&(n="/"),zbe(t,e,n)}function zbe(t,e,n,r){let s=typeof e=="string"?Rh(e):e,i=$U(s.pathname||"/",n);if(i==null)return null;let o=OU(t);Wbe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=t1e(i);a=Zbe(o[c],l)}return a}function OU(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Cn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=jl([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Cn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),OU(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:Jbe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of RU(i.path))s(i,o,c)}),e}function RU(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=RU(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function Wbe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Qbe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qbe=/^:[\w-]+$/,Hbe=3,Vbe=2,Gbe=1,Kbe=10,Ybe=-2,FO=t=>t==="*";function Jbe(t,e){let n=t.split("/"),r=n.length;return n.some(FO)&&(r+=Ybe),e&&(r+=Vbe),n.filter(s=>!FO(s)).reduce((s,i)=>s+(qbe.test(i)?Hbe:i===""?Gbe:Kbe),r)}function Qbe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Zbe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=Xbe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:jl([i,d.pathname]),pathnameBase:a1e(jl([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=jl([i,d.pathnameBase]))}return o}function Xbe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=e1e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function e1e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),PU(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function t1e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return PU(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $U(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function n1e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Rh(t):t;return{pathname:n?n.startsWith("/")?n:r1e(n,e):e,search:c1e(r),hash:l1e(s)}}function r1e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function mE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s1e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function i1e(t,e){let n=s1e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function o1e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Rh(t):(s=jg({},t),Cn(!s.pathname||!s.pathname.includes("?"),mE("?","pathname","search",s)),Cn(!s.pathname||!s.pathname.includes("#"),mE("#","pathname","hash",s)),Cn(!s.search||!s.search.includes("#"),mE("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=n1e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const jl=t=>t.join("/").replace(/\/\/+/g,"/"),a1e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),c1e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,l1e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function u1e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DU=["post","put","patch","delete"];new Set(DU);const d1e=["get",...DU];new Set(d1e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ug(){return Ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ug.apply(this,arguments)}const fI=D.createContext(null),h1e=D.createContext(null),zv=D.createContext(null),Wv=D.createContext(null),$h=D.createContext({outlet:null,matches:[],isDataRoute:!1}),jU=D.createContext(null);function qv(){return D.useContext(Wv)!=null}function UU(){return qv()||Cn(!1),D.useContext(Wv).location}function LU(t){D.useContext(zv).static||D.useLayoutEffect(t)}function f1e(){let{isDataRoute:t}=D.useContext($h);return t?A1e():p1e()}function p1e(){qv()||Cn(!1);let t=D.useContext(fI),{basename:e,future:n,navigator:r}=D.useContext(zv),{matches:s}=D.useContext($h),{pathname:i}=UU(),o=JSON.stringify(i1e(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return LU(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=o1e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:jl([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function g1e(t,e){return m1e(t,e)}function m1e(t,e,n,r){qv()||Cn(!1);let{navigator:s}=D.useContext(zv),{matches:i}=D.useContext($h),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=UU(),u;if(e){var d;let w=typeof e=="string"?Rh(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Cn(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=Fbe(t,{pathname:f}),g=E1e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:jl([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:jl([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?D.createElement(Wv.Provider,{value:{location:Ug({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:oc.Pop}},g):g}function y1e(){let t=S1e(),e=u1e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const w1e=D.createElement(y1e,null);class v1e extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement($h.Provider,{value:this.props.routeContext},D.createElement(jU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b1e(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(fI);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement($h.Provider,{value:e},r)}function E1e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Cn(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||w1e,c&&(l<0&&h===0?(I1e("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(b1e,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(v1e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var MU=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(MU||{}),BU=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(BU||{});function _1e(t){let e=D.useContext(fI);return e||Cn(!1),e}function C1e(t){let e=D.useContext(h1e);return e||Cn(!1),e}function x1e(t){let e=D.useContext($h);return e||Cn(!1),e}function FU(t){let e=x1e(),n=e.matches[e.matches.length-1];return n.route.id||Cn(!1),n.route.id}function S1e(){var t;let e=D.useContext(jU),n=C1e(),r=FU();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function A1e(){let{router:t}=_1e(MU.UseNavigateStable),e=FU(BU.UseNavigateStable),n=D.useRef(!1);return LU(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ug({fromRouteId:e},i)))},[t,e])}const zO={};function I1e(t,e,n){zO[t]||(zO[t]=!0)}function T1e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function pw(t){Cn(!1)}function N1e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=oc.Pop,navigator:i,static:o=!1,future:a}=t;qv()&&Cn(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:Ug({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Rh(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let w=$U(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(zv.Provider,{value:l},D.createElement(Wv.Provider,{children:n,value:g}))}function P1e(t){let{children:e,location:n}=t;return g1e(Tx(e),n)}new Promise(()=>{});function Tx(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Tx(r.props.children,i));return}r.type!==pw&&Cn(!1),!r.props.index||!r.props.children||Cn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Tx(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const k1e="6";try{window.__reactRouterVersion=k1e}catch{}const O1e="startTransition",WO=rM[O1e];function R1e(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=Lbe({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&WO?WO(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>T1e(r),[r]),D.createElement(N1e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var qO;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qO||(qO={}));var HO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(HO||(HO={}));const $1e=Ti({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function D1e(){const t=$1e(),{open:e}=bm(),{address:n,isConnected:r}=nm(),{isPending:s}=F5(),{disconnect:i}=z5(),{data:o}=W5({address:n}),[a,c]=D.useState("pixelawbs-popup"),[l,u]=D.useState(new Set),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),v=f1e(),_=D.useRef(null);D.useEffect(()=>{if(a==="halloween-popup"&&_.current){const A=_.current.querySelector("script[data-tiktok-embed]");A&&A.remove();const j=document.createElement("script");j.src="https://www.tiktok.com/embed.js",j.async=!0,j.setAttribute("data-tiktok-embed","true"),_.current.appendChild(j)}},[a]);const E=(A,j,P)=>{if(A==="url"&&P)window.open(P,"_blank");else if(A==="popup"&&j)c(j),u(k=>{const U=new Set(k);return U.delete(j),U}),document.body.offsetWidth;else if(A==="wallet")r?i():e();else if(A==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else A==="nft-gallery"?p(!0):A==="meme-generator"?w(!0):A==="chess"&&(r?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):e().then(()=>{const k=()=>{window.ethereum&&window.ethereum.selectedAddress?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):setTimeout(k,200)};k()}))},x=()=>c(null),S=A=>{u(j=>new Set(j).add(A)),c(null)},T=A=>{A==="mint-popup"?h(!0):A==="nft-gallery-popup"?p(!0):A==="meme-generator-popup"?w(!0):c(A),u(j=>{const P=new Set(j);return P.delete(A),P})},C=()=>h(!1),O=()=>p(!1),R=()=>w(!1),F=()=>{h(!1),u(A=>new Set(A).add("mint-popup"))},q=()=>{p(!1),u(A=>new Set(A).add("nft-gallery-popup"))},B=()=>{w(!1),u(A=>new Set(A).add("meme-generator-popup"))},I=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[y&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(UZ,{onIconClick:E}),m.jsx(MZ,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:I,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(Rs,{id:"chat-popup",isOpen:a==="chat-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Rs,{id:"purity-popup",isOpen:a==="purity-popup",onClose:x,onMinimize:S,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Rs,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Rs,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Rs,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(Rs,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(rY,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(Rs,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:x,onMinimize:S,children:(()=>{const A=j=>{j.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:A,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(Rs,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:x,onMinimize:S,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:_,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(Rs,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:x,onMinimize:S,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(zZ,{isOpen:d,onClose:C,onMinimize:F,walletAddress:n||""}),m.jsx(Dbe,{isOpen:f,onClose:O,onMinimize:q,walletAddress:n}),m.jsx(Rs,{id:"meme-generator-popup",isOpen:g,onClose:R,onMinimize:B,children:m.jsx(NU,{})})]})}const j1e=Ti({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),VO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],U1e=({onBack:t,walletAddress:e})=>{const n=j1e(),{open:r}=bm(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(VO[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[w,y]=D.useState("all"),[b,v]=D.useState(null),_=D.useCallback(async()=>{var T,C;try{if((T=window.solana)!=null&&T.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((C=window.solflare)!=null&&C.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var T,C;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(C=window.solflare)!=null&&C.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let C,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,C=await BZ(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",C.data.length)}else u.api==="opensea"?C=await xA(u.slug,100,O):C=await CA(u.slug,1,100,O);w==="owned"&&p&&(console.log("Filtering for owner:",p),C.data.some(F=>F.owners&&F.owners.length>0)?C.data=C.data.filter(F=>F.owners.some(B=>B.owner_of&&B.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(C.data)}catch(C){console.error(C)}finally{a(!1)}})()},[e,u,p,w]),D.useEffect(()=>{h&&_()},[h,_]);const E=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const C=await Y8(u.chain,T.address,T.token_id.toString()),O={...T,attributes:JSON.stringify(C.traits||[])};l(O)}catch(C){console.error("Failed to fetch full NFT details",C),l(T)}else l(T);a(!1)},x=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(C){console.error("Failed to parse NFT attributes:",C)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:T.map((C,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[C.trait_type,":"]})," ",C.value]},O))})]})},S=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:VO.map(T=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{_()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(T=>{let C=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void E(T),children:[m.jsx("img",{src:C,alt:T.name,onError:O=>{O.currentTarget.src!==T.image_url&&T.image_url?O.currentTarget.src=T.image_url:O.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?O.currentTarget.src=T.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:T.name})]},T.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?x():S()})]})},L1e=Ti({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),si=({isOpen:t,onClose:e,title:n,children:r})=>{const s=L1e();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},M1e=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=q5();D.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const _=await G8(n);s(_);const E={};_.forEach(x=>{E[x.id]=0}),u(E)}catch(_){h(_.message)}finally{o(!1)}},g=(_,E)=>{u(x=>({...x,[_]:Math.max(0,E)}))},w=async()=>{const _=Object.entries(l).filter(([,E])=>E>0).map(([E,x])=>({id:E,quantity:x}));if(_.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const E=await K8(n,_);if(E.success&&E.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const x=await f.sendTransaction({to:E.mintTransaction.to,value:BigInt(E.mintTransaction.value),data:E.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${x}`),e()}catch(x){h("Transaction failed: "+x.message)}}else throw new Error(E.message||"Could not retrieve minting transaction.")}catch(E){h("Minting failed: "+E.message)}finally{c(!1)}},y=(_,E)=>`${parseFloat(_)} ${E}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(si,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:v,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(_=>m.jsxs("div",{style:b,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:_.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(_.token_price,_.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",_.wallet_limit===4294967295?"Unlimited":_.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:_.wallet_limit===4294967295?void 0:_.wallet_limit,value:l[_.id]||"",onChange:E=>g(_.id,parseInt(E.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},_.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},B1e=Ti({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),F1e=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],z1e=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],W1e=()=>{const t=B1e(),{open:e}=bm(),{address:n,isConnected:r}=nm(),{isPending:s}=F5(),{disconnect:i}=z5(),{data:o}=W5({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),[v,_]=D.useState(!1),[E,x]=D.useState(!1),[S,T]=D.useState(!1),[C,O]=D.useState(!1),[R,F]=D.useState(!1),[q,B]=D.useState(!1),[I,A]=D.useState(!1),[j,P]=D.useState(!1),[k,U]=D.useState(!1),z=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>_(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>x(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],G=Z=>{Z.disabled||Z.action()};if(D.useEffect(()=>{const Z=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(Z)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(U1e,{onBack:()=>c("main"),walletAddress:n||void 0});function Q({open:Z,onClose:se,title:Pe,nfts:Oe}){const De=Ke=>{switch(Ke){case"lawbsters":T(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":F(!0);break;case"halloween":B(!0);break;case"lawbstation":A(!0);break;case"nexus":P(!0);break}};return m.jsx(si,{isOpen:Z,onClose:se,title:Pe,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Oe.map(Ke=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>De(Ke.id),children:[m.jsx("img",{src:Ke.image,alt:Ke.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:Ke.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:Ke.description})]},Ke.id))})})}function Y({open:Z,onClose:se}){return Z?m.jsxs(si,{isOpen:Z,onClose:se,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:z.map(Z=>m.jsxs("div",{className:t.icon,onClick:()=>G(Z),children:[m.jsx("img",{src:Z.icon,alt:Z.label}),m.jsx("span",{children:Z.label})]},Z.label))}),l&&m.jsxs(si,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:Z=>Z.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),U(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(M1e,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(Q,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:F1e}),m.jsx(Q,{open:v,onClose:()=>_(!1),title:"SOL NFTS FOLDER",nfts:z1e}),m.jsx(Y,{open:E,onClose:()=>x(!1)}),m.jsxs(si,{isOpen:S,onClose:()=>T(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(si,{isOpen:C,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(si,{isOpen:R,onClose:()=>F(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{F(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(si,{isOpen:q,onClose:()=>B(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(si,{isOpen:I,onClose:()=>A(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(si,{isOpen:j,onClose:()=>P(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(si,{isOpen:k,onClose:()=>U(!1),title:"Meme Generator",children:m.jsx(NU,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function q1e(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function H1e(t){let e=[],n,r;function s(a){return lg.parseEvmChainId(a)||1}function i(){var a;return n||(n=$l.getInstance({projectId:t.options.projectId,chainId:(a=$.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?hn.open(Vt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?hn.open(Vt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&hn.open(Vt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Vt.EmbeddedWalletAbortController})),n}async function o(a={}){var g,w;const c=i();let l=a.chainId;if(a.isReconnecting){const y=lg.parseEvmChainId(c.getLastUsedChainId()||""),b=(g=t.chains)==null?void 0:g[0].id;if(l=y||b,!l)throw new Error("ChainId not found in provider")}const u=(w=ce.state.preferredAccountTypes)==null?void 0:w.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:X.CONNECTOR_ID.AUTH,name:X.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:X.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=$l.getInstance({projectId:t.options.projectId,chainId:(c=$.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Vt.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?hn.open(Vt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?hn.open(Vt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&hn.open(Vt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=$.state.activeChain===X.CHAIN.EVM;if(X.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>de.getConnectorId(h)===X.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new no(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=ce.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(g=>g.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new no(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(tc)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}pI.type="walletConnect";function pI(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:pI.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=$.getCaipNetworks(),w=await this.getProvider();if(!w)throw new Pa;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=ne.state.universalProviderConfigOverride;if(!w.session||y){const C=pp.createNamespaces(g,b);await w.connect({optionalNamespaces:C,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),_=await this.getChainId(),E=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,x=E==null?void 0:E.some(C=>Number(C.split(":")[1])===_);let S=1;x?S=_:E!=null&&E[0]&&(S=Number(E[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const T=b==null?void 0:b.defaultChain;return w.setDefaultChain(T??`eip155:${S}`),{accounts:v,chainId:S}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new wn(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,g,w;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(w=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[X.CHAIN.EVM])==null?void 0:w.accounts;return(h==null?void 0:h.map(y=>y.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=le.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=le.getStoredActiveCaipNetworkId(),y=e.getCaipNetworks(h),b=y==null?void 0:y.find(v=>v.id===w);b&&b.chainNamespace===X.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(X.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[X.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=$.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new Pa;const p=$.getCaipNetworks().find(v=>v.id===h);if(!p)throw new no(new ng);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:je(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const _=v;if(/(?:user rejected)/iu.test(_.message))throw new wn(_);try{let E;d!=null&&d.blockExplorerUrls?E=d.blockExplorerUrls:E=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const x=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],S={blockExplorerUrls:E,chainId:je(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:x};await f.request({method:"wallet_addEthereumChain",params:[S]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(E){throw new wn(E)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>tc(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds($.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[X.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Ef=$t({pendingTransactions:0}),GO={state:Ef,subscribeKey(t,e){return Kn(Ef,t,e)},increase(t){Ef[t]+=1},decrease(t){Ef[t]-=1},reset(t){Ef[t]=0}};function V1e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function G1e(t){if(Ce.isSafeApp()){const{safe:e}=await on(async()=>{const{safe:n}=await import("./index-DcLTlY4x.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function K1e(t){try{const{coinbaseWallet:e}=await on(async()=>{const{coinbaseWallet:n}=await import("./index-DcLTlY4x.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Y1e={enable:!1,pollingInterval:3e4};class J1e extends TU{constructor(e){const n=Ki.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=X.CHAIN.EVM,this.adapterType=X.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Y1e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===X.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Ce.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Ad(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Ce.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Ad(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===X.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Ki.getCaipNetworkId(s);i?n[s.id]=Ki.extendWagmiTransports(s,e.projectId,i):n[s.id]=Ki.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=qq({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=Cq(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),GO.increase("pendingTransactions")}});const e=GO.subscribeKey("pendingTransactions",n=>{var r;n>=X.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){g5(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await K1e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await G1e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(pI(e,n)),e.enableInjected!==!1&&r.push(tv({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(H1e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await vq(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Ad(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await yq(this.wagmiConfig,s);const i=await wq(this.wagmiConfig,s);return await xq(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(lg.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await Sq(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await uq(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return RW(e.value,e.decimals)}formatUnits(e){return wh(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===X.CONNECTOR_ID.AUTH||e.id===X.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:ic.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:ic.ConnectorNamesMap[e.id]??e.name,imageId:ic.ConnectorImageIds[e.id],type:ic.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===X.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){m5(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Bi(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Ce.isSafeApp()&&n===X.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await Qy(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Qy(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await ET(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===X.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:r,type:s,id:n}}const l=await Qy(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await M_(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=le.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await pq(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});le.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=Bi(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await f5(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await ET(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Bi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=V1e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Bi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Bi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Bi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=Bi(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if($.state.activeChain==="eip155")return;M_(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new hI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const zU="7c65f27254d6ddd24cf7eedf2685c4fb",Q1e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},WU=new J1e({networks:[IU],projectId:zU,ssr:!1});Rbe({adapters:[WU],networks:[IU],projectId:zU,metadata:Q1e,features:{analytics:!1}});const Z1e=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>on(async()=>{const{default:r}=await Promise.resolve().then(()=>Dh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class gI extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class X1e extends gI{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class eEe extends gI{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class tEe extends gI{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Nx;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Nx||(Nx={}));var nEe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class rEe{constructor(e,{headers:n={},customFetch:r,region:s=Nx.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Z1e(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return nEe(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new X1e(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new eEe(u);if(!u.ok)throw new tEe(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var Kr={},mI={},Hv={},Em={},Vv={},Gv={},sEe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},dh=sEe();const iEe=dh.fetch,qU=dh.fetch.bind(dh),HU=dh.Headers,oEe=dh.Request,aEe=dh.Response,Dh=Object.freeze(Object.defineProperty({__proto__:null,Headers:HU,Request:oEe,Response:aEe,default:qU,fetch:iEe},Symbol.toStringTag,{value:"Module"})),cEe=I0(Dh);var Kv={};Object.defineProperty(Kv,"__esModule",{value:!0});let lEe=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Kv.default=lEe;var VU=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gv,"__esModule",{value:!0});const uEe=VU(cEe),dEe=VU(Kv);let hEe=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=uEe.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new dEe.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Gv.default=hEe;var fEe=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vv,"__esModule",{value:!0});const pEe=fEe(Gv);let gEe=class extends pEe.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Vv.default=gEe;var mEe=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Em,"__esModule",{value:!0});const yEe=mEe(Vv);let wEe=class extends yEe.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Em.default=wEe;var vEe=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hv,"__esModule",{value:!0});const _f=vEe(Em);let bEe=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new _f.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new _f.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new _f.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new _f.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new _f.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Hv.default=bEe;var Yv={},Jv={};Object.defineProperty(Jv,"__esModule",{value:!0});Jv.version=void 0;Jv.version="0.0.0-automated";Object.defineProperty(Yv,"__esModule",{value:!0});Yv.DEFAULT_HEADERS=void 0;const EEe=Jv;Yv.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${EEe.version}`};var GU=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mI,"__esModule",{value:!0});const _Ee=GU(Hv),CEe=GU(Em),xEe=Yv;let SEe=class KU{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},xEe.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new _Ee.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new KU(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new CEe.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};mI.default=SEe;var jh=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.PostgrestError=Kr.PostgrestBuilder=Kr.PostgrestTransformBuilder=Kr.PostgrestFilterBuilder=Kr.PostgrestQueryBuilder=Kr.PostgrestClient=void 0;const YU=jh(mI);Kr.PostgrestClient=YU.default;const JU=jh(Hv);Kr.PostgrestQueryBuilder=JU.default;const QU=jh(Em);Kr.PostgrestFilterBuilder=QU.default;const ZU=jh(Vv);Kr.PostgrestTransformBuilder=ZU.default;const XU=jh(Gv);Kr.PostgrestBuilder=XU.default;const eL=jh(Kv);Kr.PostgrestError=eL.default;var AEe=Kr.default={PostgrestClient:YU.default,PostgrestQueryBuilder:JU.default,PostgrestFilterBuilder:QU.default,PostgrestTransformBuilder:ZU.default,PostgrestBuilder:XU.default,PostgrestError:eL.default};const{PostgrestClient:IEe,PostgrestQueryBuilder:Hxe,PostgrestFilterBuilder:Vxe,PostgrestTransformBuilder:Gxe,PostgrestBuilder:Kxe,PostgrestError:Yxe}=AEe;function TEe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const NEe=TEe(),PEe="2.11.13",kEe={"X-Client-Info":`realtime-js/${PEe}`},OEe="1.0.0",tL=1e4,REe=1e3;var gp;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(gp||(gp={}));var cr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(cr||(cr={}));var di;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(di||(di={}));var Px;(function(t){t.websocket="websocket"})(Px||(Px={}));var cl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(cl||(cl={}));class $Ee{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class nL{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var kt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(kt||(kt={}));const KO=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=DEe(o,t,e,s),i),{})},DEe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?rL(i,o):kx(o)},rL=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return MEe(e,n)}switch(t){case kt.bool:return jEe(e);case kt.float4:case kt.float8:case kt.int2:case kt.int4:case kt.int8:case kt.numeric:case kt.oid:return UEe(e);case kt.json:case kt.jsonb:return LEe(e);case kt.timestamp:return BEe(e);case kt.abstime:case kt.date:case kt.daterange:case kt.int4range:case kt.int8range:case kt.money:case kt.reltime:case kt.text:case kt.time:case kt.timestamptz:case kt.timetz:case kt.tsrange:case kt.tstzrange:return kx(e);default:return kx(e)}},kx=t=>t,jEe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},UEe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},LEe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},MEe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>rL(e,a))}return t},BEe=t=>typeof t=="string"?t.replace(" ","T"):t,sL=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class yE{constructor(e,n,r={},s=tL){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var YO;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(YO||(YO={}));class mp{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=mp.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=mp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),p=u.filter(w=>f.indexOf(w.presence_ref)<0),g=d.filter(w=>h.indexOf(w.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var JO;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(JO||(JO={}));var QO;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(QO||(QO={}));var xo;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(xo||(xo={}));class yI{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=cr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new yE(this,di.join,this.params,this.timeout),this.rejoinTimer=new nL(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=cr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(di.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new mp(this),this.broadcastEndpointURL=sL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==cr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(xo.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(xo.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(xo.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const w=h[g],{filter:{event:y,schema:b,table:v,filter:_}}=w,E=u&&u[g];if(E&&E.event===y&&E.schema===b&&E.table===v&&E.filter===_)p.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=cr.errored,e==null||e(xo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(xo.SUBSCRIBED);return}}).receive("error",u=>{this.state=cr.errored,e==null||e(xo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=cr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(di.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new yE(this,di.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new yE(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=di;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,w;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(g=f.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,w,y,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,E=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((g=n.ids)===null||g===void 0?void 0:g.includes(_))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(b=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:w,commit_timestamp:y,type:b,errors:v}=p;h=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:y,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===cr.closed}_isJoined(){return this.state===cr.joined}_isJoining(){return this.state===cr.joining}_isLeaving(){return this.state===cr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&yI.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(di.close,{},e)}_onError(e){this._on(di.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=KO(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=KO(e.columns,e.old_record)),n}}const ZO=()=>{},FEe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zEe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=kEe,this.params={},this.timeout=tL,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ZO,this.ref=0,this.logger=ZO,this.conn=null,this.sendBuffer=[],this.serializer=new $Ee,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>on(async()=>{const{default:c}=await Promise.resolve().then(()=>Dh);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Px.websocket}`,this.httpEndpoint=sL(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nL(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=NEe),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:OEe}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case gp.connecting:return cl.Connecting;case gp.open:return cl.Open;case gp.closing:return cl.Closing;default:return cl.Closed}}isConnected(){return this.connectionState()===cl.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new yI(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(di.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(REe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(di.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([FEe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class wI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function In(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class WEe extends wI{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ox extends wI{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var qEe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const iL=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>on(async()=>{const{default:r}=await Promise.resolve().then(()=>Dh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},HEe=()=>qEe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield on(()=>Promise.resolve().then(()=>Dh),void 0)).Response:Response}),Rx=t=>{if(Array.isArray(t))return t.map(n=>Rx(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Rx(r)}),e};var bu=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const wE=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),VEe=(t,e,n)=>bu(void 0,void 0,void 0,function*(){const r=yield HEe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new WEe(wE(s),t.status||500))}).catch(s=>{e(new Ox(wE(s),s))}):e(new Ox(wE(t),t))}),GEe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function _m(t,e,n,r,s,i){return bu(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,GEe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>VEe(c,a,r))})})}function S0(t,e,n,r){return bu(this,void 0,void 0,function*(){return _m(t,"GET",e,n,r)})}function ja(t,e,n,r,s){return bu(this,void 0,void 0,function*(){return _m(t,"POST",e,r,s,n)})}function KEe(t,e,n,r,s){return bu(this,void 0,void 0,function*(){return _m(t,"PUT",e,r,s,n)})}function YEe(t,e,n,r){return bu(this,void 0,void 0,function*(){return _m(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function oL(t,e,n,r,s){return bu(this,void 0,void 0,function*(){return _m(t,"DELETE",e,r,s,n)})}var Lr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const JEe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},XO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class QEe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=iL(s)}uploadOrUpdate(e,n,r,s){return Lr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},XO),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(In(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Lr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:XO.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(In(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Lr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield ja(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new wI("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(In(r))return{data:null,error:r};throw r}})}update(e,n,r){return Lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Lr(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(In(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Lr(this,void 0,void 0,function*(){try{return{data:{path:(yield ja(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(In(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Lr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ja(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(In(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Lr(this,void 0,void 0,function*(){try{const s=yield ja(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(In(s))return{data:null,error:s};throw s}})}download(e,n){return Lr(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield S0(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(In(a))return{data:null,error:a};throw a}})}info(e){return Lr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield S0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Rx(r),error:null}}catch(r){if(In(r))return{data:null,error:r};throw r}})}exists(e){return Lr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield YEe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(In(r)&&r instanceof Ox){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return Lr(this,void 0,void 0,function*(){try{return{data:yield oL(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(In(n))return{data:null,error:n};throw n}})}list(e,n,r){return Lr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},JEe),n),{prefix:e||""});return{data:yield ja(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(In(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const ZEe="2.7.1",XEe={"X-Client-Info":`storage-js/${ZEe}`};var Gu=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class e_e{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},XEe),n),this.fetch=iL(r)}listBuckets(){return Gu(this,void 0,void 0,function*(){try{return{data:yield S0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(In(e))return{data:null,error:e};throw e}})}getBucket(e){return Gu(this,void 0,void 0,function*(){try{return{data:yield S0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(In(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Gu(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(In(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Gu(this,void 0,void 0,function*(){try{return{data:yield KEe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(In(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Gu(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(In(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Gu(this,void 0,void 0,function*(){try{return{data:yield oL(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(In(n))return{data:null,error:n};throw n}})}}class t_e extends e_e{constructor(e,n={},r){super(e,n,r)}from(e){return new QEe(this.url,this.headers,e,this.fetch)}}const n_e="2.50.1";let Bf="";typeof Deno<"u"?Bf="deno":typeof document<"u"?Bf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bf="react-native":Bf="node";const r_e={"X-Client-Info":`supabase-js-${Bf}/${n_e}`},s_e={headers:r_e},i_e={schema:"public"},o_e={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},a_e={};var c_e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const l_e=t=>{let e;return t?e=t:typeof fetch>"u"?e=qU:e=fetch,(...n)=>e(...n)},u_e=()=>typeof Headers>"u"?HU:Headers,d_e=(t,e,n)=>{const r=l_e(n),s=u_e();return(i,o)=>c_e(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var h_e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function f_e(t){return t.endsWith("/")?t:t+"/"}function p_e(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>h_e(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const aL="2.70.0",nd=30*1e3,$x=3,vE=$x*nd,g_e="http://localhost:9999",m_e="supabase.auth.token",y_e={"X-Client-Info":`gotrue-js/${aL}`},Dx="X-Supabase-Api-Version",cL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},w_e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,v_e=6e5;class vI extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ze(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class b_e extends vI{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function E_e(t){return ze(t)&&t.name==="AuthApiError"}class lL extends vI{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class zc extends vI{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ia extends zc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function __e(t){return ze(t)&&t.name==="AuthSessionMissingError"}class ky extends zc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Oy extends zc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ry extends zc{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function C_e(t){return ze(t)&&t.name==="AuthImplicitGrantRedirectError"}class eR extends zc{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jx extends zc{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function bE(t){return ze(t)&&t.name==="AuthRetryableFetchError"}class tR extends zc{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class yp extends zc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const A0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nR=` 	
\r=`.split(""),x_e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<nR.length;e+=1)t[nR[e].charCodeAt(0)]=-2;for(let e=0;e<A0.length;e+=1)t[A0[e].charCodeAt(0)]=e;return t})();function rR(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(A0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(A0[r]),e.queuedBits-=6}}function uL(t,e,n){const r=x_e[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function sR(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{I_e(o,r,n)};for(let o=0;o<t.length;o+=1)uL(t.charCodeAt(o),s,i);return e.join("")}function S_e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function A_e(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}S_e(r,e)}}function I_e(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function T_e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)uL(t.charCodeAt(s),n,r);return new Uint8Array(e)}function N_e(t){const e=[];return A_e(t,n=>e.push(n)),new Uint8Array(e)}function P_e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>rR(s,n,r)),rR(null,n,r),e.join("")}function k_e(t){return Math.round(Date.now()/1e3)+t}function O_e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ii=()=>typeof window<"u"&&typeof document<"u",Zc={tested:!1,writable:!1},wp=()=>{if(!ii())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zc.tested)return Zc.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Zc.tested=!0,Zc.writable=!0}catch{Zc.tested=!0,Zc.writable=!1}return Zc.writable};function R_e(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const dL=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>on(async()=>{const{default:r}=await Promise.resolve().then(()=>Dh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},$_e=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",hL=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},$y=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dy=async(t,e)=>{await t.removeItem(e)};class Qv{constructor(){this.promise=new Qv.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Qv.promiseConstructor=Promise;function EE(t){const e=t.split(".");if(e.length!==3)throw new yp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!w_e.test(e[r]))throw new yp("JWT not in base64url format");return{header:JSON.parse(sR(e[0])),payload:JSON.parse(sR(e[1])),signature:T_e(e[2]),raw:{header:e[0],payload:e[1]}}}async function D_e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function j_e(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function U_e(t){return("0"+t.toString(16)).substr(-2)}function L_e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,U_e).join("")}async function M_e(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function B_e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await M_e(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ku(t,e,n=!1){const r=L_e();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await hL(t,`${e}-code-verifier`,s);const i=await B_e(r);return[i,r===i?"plain":"s256"]}const F_e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function z_e(t){const e=t.headers.get(Dx);if(!e||!e.match(F_e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function W_e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function q_e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const H_e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yu(t){if(!H_e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var V_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const rl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),G_e=[502,503,504];async function iR(t){var e;if(!$_e(t))throw new jx(rl(t),0);if(G_e.includes(t.status))throw new jx(rl(t),t.status);let n;try{n=await t.json()}catch(i){throw new lL(rl(i),i)}let r;const s=z_e(t);if(s&&s.getTime()>=cL["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new tR(rl(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ia}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new tR(rl(n),t.status,n.weak_password.reasons);throw new b_e(rl(n),t.status||500,r)}const K_e=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ye(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Dx]||(i[Dx]=cL["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Y_e(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Y_e(t,e,n,r,s,i){const o=K_e(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new jx(rl(c),0)}if(a.ok||await iR(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await iR(c)}}function _o(t){var e;let n=null;X_e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=k_e(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function oR(t){const e=_o(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function za(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function J_e(t){return{data:t,error:null}}function Q_e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=V_e(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Z_e(t){return t}function X_e(t){return t.access_token&&t.refresh_token&&t.expires_in}const _E=["global","local","others"];var eCe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class tCe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=dL(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=_E[0]){if(_E.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_E.join(", ")}`);try{return await Ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:za})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=eCe(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Q_e,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ze(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:za})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await Ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Z_e});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);l[`${w}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(ze(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Yu(e);try{return await Ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:za})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Yu(e);try{return await Ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:za})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Yu(e);try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:za})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Yu(e.userId);try{const{data:n,error:r}=await Ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Yu(e.userId),Yu(e.id);try{return{data:await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}}const nCe={getItem:t=>wp()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{wp()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{wp()&&globalThis.localStorage.removeItem(t)}};function aR(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function rCe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ju={debug:!!(globalThis&&wp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sCe extends fL{}async function iCe(t,e,n){Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new sCe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ju.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}rCe();const oCe={url:g_e,storageKey:m_e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:y_e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function cR(t,e,n){return await n()}class Lg{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Lg.nextInstanceID,Lg.nextInstanceID+=1,this.instanceID>0&&ii()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},oCe),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new tCe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=dL(s.fetch),this.lock=s.lock||cR,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ii()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=iCe:this.lock=cR,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:wp()?this.storage=nCe:(this.memoryStorage={},this.storage=aR(this.memoryStorage)):(this.memoryStorage={},this.storage=aR(this.memoryStorage)),ii()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${aL}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=R_e(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ii()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),C_e(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ze(n)?{error:n}:{error:new lL("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:_o}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Ku(this.storage,this.storageKey)),i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:_o})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_o})}else throw new Oy("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:oR})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:oR})}else throw new Oy("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ky}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:w,wallet:y,statement:b,options:v}=e;let _;if(ii())if(typeof y=="object")_=y;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))_=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const E=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const x=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),b?{statement:b}:null));let S;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")S=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)S=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const x=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=x}}try{const{data:w,error:y}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:P_e(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:_o});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new ky}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(ze(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await $y(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:_o});if(await Dy(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ky}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ze(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:_o}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ky}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Ku(this.storage,this.storageKey));const{error:d}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Oy("You must provide either an email or phone number.")}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:_o});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(ze(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ku(this.storage,this.storageKey)),await Ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:J_e})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ia;const{error:s}=await Ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ze(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Oy("You must provide either an email or phone number and a type")}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await $y(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<vE:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:za}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ia}:await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:za})})}catch(n){if(ze(n))return __e(n)&&(await this._removeSession(),await Dy(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ia;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Ku(this.storage,this.storageKey));const{data:l,error:u}=await Ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:za});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ia;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=EE(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ze(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ia;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ii())throw new Ry("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ry(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new eR("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ry("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new eR("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new Ry("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=nd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(ze(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await $y(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(E_e(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Dy(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=O_e(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ku(this.storage,this.storageKey,!0));try{return await Ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ye(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ii()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ze(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await j_e(async s=>(s>0&&await D_e(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_o})),(s,i)=>{const o=200*Math.pow(2,s);return i&&bE(i)&&Date.now()+o-r<nd})}catch(r){if(this._debug(n,"error",r),ze(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ii()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await $y(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<vE;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${vE}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),bE(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ia;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Qv;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ia;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),ze(i)){const o={session:null,error:i};return bE(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await hL(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Dy(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ii()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),nd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/nd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${nd}ms, refresh threshold is ${$x} ticks`),s<=$x&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ii()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ku(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await Ye(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(ze(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ze(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=EE(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+v_e>Date.now()))return r;const{data:s,error:i}=await Ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new yp("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new yp("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=EE(r);if(W_e(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=q_e(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,N_e(`${a}.${c}`)))throw new yp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}}Lg.nextInstanceID=0;const aCe=Lg;class cCe extends aCe{constructor(e){super(e)}}var lCe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class uCe{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=f_e(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:i_e,realtime:a_e,auth:Object.assign(Object.assign({},o_e),{storageKey:l}),global:s_e},d=p_e(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=d_e(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new IEe(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new rEe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new t_e(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return lCe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cCe({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new zEe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const pL=(t,e,n)=>new uCe(t,e,n),gL="https://roxwocgknkiqnsgiojgz.supabase.co",dCe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",hCe=pL(gL,dCe),CE=pL(gL,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMDc2MzExMiwiZXhwIjoyMDQ2MzM5MTEyfQ.US6YTQfWVWNAfmEopBpD580jsaevKv_Ev7dGFeqFptA"),Cf={AI:"ai"},jy={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},lR=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],fCe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],pCe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=document.createElement("script");a.src="/stockfish.js",a.onload=()=>{if(console.log("[DEBUG] LawbBot script loaded, initializing..."),typeof window<"u"&&window.Stockfish){const c=window.Stockfish;c().then(l=>{console.log("[DEBUG] LawbBot initialized successfully"),n.current=l,e(!0),r.current=!1,l.postMessage("setoption name Threads value 4"),l.postMessage("setoption name Hash value 128"),l.postMessage("setoption name MultiPV value 1")}).catch(l=>{console.error("[DEBUG] LawbBot initialization failed:",l),e(!1),r.current=!1})}else console.error("[DEBUG] LawbBot not found in window object"),e(!1),r.current=!1},a.onerror=c=>{console.error("[DEBUG] Failed to load LawbBot script:",c),e(!1),r.current=!1},document.head.appendChild(a)}catch(a){console.error("[DEBUG] Failed to create LawbBot script:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var f;console.log("[DEBUG] Stockfish message:",h),typeof h=="string"&&h.startsWith("bestmove ")&&(l=h.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(f=n.current)==null||f.removeMessageListener(d),c(l)))};try{n.current.addMessageListener(d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeMessageListener(d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},gCe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},mCe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=nm(),[s,i]=D.useState(Cf.AI),[o,a]=D.useState(()=>JSON.parse(JSON.stringify(lR))),[c,l]=D.useState("blue"),[u,d]=D.useState(null),[h,f]=D.useState("active"),[p,g]=D.useState("hard"),[w,y]=D.useState("Connect wallet to play"),[b,v]=D.useState([]),[_,E]=D.useState([]),[x,S]=D.useState([]),[T,C]=D.useState(null),[O,R]=D.useState(!1),[F,q]=D.useState(!1),[B,I]=D.useState(null),[A,j]=D.useState(null),[P]=D.useState(""),[k]=D.useState(.1),[U,z]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),G=D.useRef(null),Q=D.useRef(!1),Y=D.useRef(o),Z=D.useRef(null),se=D.useRef(null),Pe=D.useRef(!1),Oe=D.useRef(!1),[De,Ke]=D.useState(!1),[Zt,Is]=D.useState(!1),[it,Le]=D.useState(!1),[Dt,jt]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),pr=()=>{jt(L=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!L)),!L))},{stockfishReady:ss}=pCe(),{getOpeningData:Ht}=gCe(),[Ut,Zn]=D.useState("loading"),[Wc,ea]=D.useState(!1),[ta,Dn]=D.useState([]),[Nr,na]=D.useState(!1),[Uh,ra]=D.useState("/images/chessboard1.png"),Cm=()=>{const L=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],W=Math.floor(Math.random()*L.length),H=L[W];return console.log("[DEBUG] Random chessboard selected:",H,"(index:",W,")"),H};D.useEffect(()=>{if(ss)Zn("ready");else{const L=window.setTimeout(()=>{ss||(Zn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(L)}},[ss]),D.useEffect(()=>{Y.current=o},[o]),D.useEffect(()=>{r?y("Select game mode"):(y("Connect wallet to play"),R(!1))},[r]),D.useEffect(()=>(!G.current&&typeof Worker<"u"&&(G.current=new Worker("/aiWorker.js"),G.current.onmessage=L=>{console.log("[DEBUG] AI worker response received:",L.data);const{move:W,nodes:H}=L.data;W&&Q.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",W),console.log("[DEBUG] AI searched",H,"nodes"),Q.current=!1,se.current&&(window.clearTimeout(se.current),se.current=null),Z.current&&Z.current(W.from,W.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},G.current.onerror=L=>{console.error("[DEBUG] AI worker error:",L),y("AI worker error - using fallback mode"),Q.current=!1}),()=>{G.current&&(G.current.terminate(),G.current=null),se.current&&(window.clearTimeout(se.current),se.current=null)}),[]),D.useEffect(()=>{bI()},[]);const bI=async()=>{try{const L=new Promise((K,V)=>window.setTimeout(()=>V(new Error("Database timeout")),1e4)),W=hCe.from("leaderboard").select("*").order("points",{ascending:!1}),H=await Promise.race([W,L]);if(H.error)throw H.error;H.data&&E(H.data),console.log("Leaderboard data loaded:",H.data)}catch(L){y("Failed to load leaderboard"),console.error("Leaderboard error:",L)}},Lh=async L=>{if(console.log("[DEBUG] updateScore called with:",L),!r){console.log("[DEBUG] No wallet address, returning");return}try{const W=r.toLowerCase(),{data:H}=await CE.from("leaderboard").select("*").eq("username",W).maybeSingle();console.log("[DEBUG] Existing record:",H);const K=H!=null&&H.wins?Number(H.wins):0,V=H!=null&&H.losses?Number(H.losses):0,ue=H!=null&&H.draws?Number(H.draws):0,he=H!=null&&H.total_games?Number(H.total_games):0,xe=H!=null&&H.points?Number(H.points):0;console.log("[DEBUG] Score calculation:",{currentWins:K,currentLosses:V,currentDraws:ue,currentTotalGames:he,currentPoints:xe,gameResult:L});const et=K+(L==="win"?1:0),ft=V+(L==="loss"?1:0),un=ue+(L==="draw"?1:0),yt=he+1;let Mh=0;if(L==="win")switch(p){case"easy":Mh=10;break;default:Mh=1}else L==="draw"&&(Mh=1);const tb=xe+Mh;if(console.log("[DEBUG] New values:",{newWins:et,newLosses:ft,newDraws:un,newTotalGames:yt,newPoints:tb,pointsToAdd:Mh}),H){const{error:Bh}=await CE.from("leaderboard").update({wins:et,losses:ft,draws:un,total_games:yt,points:tb,updated_at:new Date().toISOString()}).eq("username",W);if(Bh){console.error("[DEBUG] Error updating leaderboard:",Bh);return}}else{const{error:Bh}=await CE.from("leaderboard").insert({username:W,chain_type:"ethereum",wins:et,losses:ft,draws:un,total_games:yt,points:tb,updated_at:new Date().toISOString()});if(Bh){console.error("[DEBUG] Error inserting leaderboard record:",Bh);return}}console.log("[DEBUG] Leaderboard updated successfully"),await bI()}catch(W){console.error("[DEBUG] Error in updateScore:",W)}},Xt=L=>L&&L===L.toUpperCase()?"red":"blue",EI=(L,W)=>L>=0&&L<8&&W>=0&&W<8,_I=(L,W)=>`${String.fromCharCode(97+W)}${8-L}`,sa=(L,W)=>{const H=W==="blue"?"k":"K";let K=null;for(let he=0;he<8;he++){for(let xe=0;xe<8;xe++)if(L[he][xe]===H){K={row:he,col:xe};break}if(K)break}if(!K)return console.log(`King not found for ${W}`),!1;const V=W==="blue"?"red":"blue",ue=mL(K.row,K.col,V,L);return console.log(`${W} king at ${K.row},${K.col} under attack: ${ue}`),ue},mL=(L,W,H,K)=>{for(let V=0;V<8;V++)for(let ue=0;ue<8;ue++){const he=K[V][ue];if(he&&Xt(he)===H&&qc(he,V,ue,L,W,!1,H,K,!0))return!0}return!1},yL=(L,W,H,K,V,ue=o)=>{const he=ue.map(et=>[...et]),xe=he[L][W];return he[H][K]=xe,he[L][W]=null,sa(he,V)},wL=(L,W,H,K,V,ue)=>{const he=L==="blue"?-1:1,xe=L==="blue"?6:1;if(!EI(K,V)||L==="blue"&&K>=W||L==="red"&&K<=W)return!1;const et=Math.abs(K-W),ft=Math.abs(V-H);if((et===1&&ft===0||et===2&&ft===0&&W===xe||et===1&&ft===1)&&et<=2&&ft<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:L,from:`${W},${H}`,to:`${K},${V}`}),H===V&&K===W+he)return ue[K][V]===null;if(H===V&&W===xe&&K===W+2*he)return ue[W+he][H]===null&&ue[K][V]===null;if(Math.abs(H-V)===1&&K===W+he){const yt=ue[K][V];return yt!==null&&Xt(yt)!==L}if(Math.abs(H-V)===1&&K===W+he){const yt=ue[W][V];if(yt&&Xt(yt)!==L&&yt.toLowerCase()==="p"&&U.lastPawnDoubleMove&&U.lastPawnDoubleMove.row===W&&U.lastPawnDoubleMove.col===V)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},CI=(L,W,H,K,V)=>L!==H&&W!==K?!1:SI(L,W,H,K,V),vL=(L,W,H,K)=>{const V=Math.abs(L-H),ue=Math.abs(W-K);return V===2&&ue===1||V===1&&ue===2},xI=(L,W,H,K,V)=>Math.abs(L-H)!==Math.abs(W-K)?!1:SI(L,W,H,K,V),bL=(L,W,H,K,V)=>CI(L,W,H,K,V)||xI(L,W,H,K,V),EL=(L,W,H,K,V)=>{const ue=Math.abs(W-K),he=Math.abs(H-V);if(ue<=1&&he<=1)return!0;if(ue===0&&he===2){if(L==="blue"&&!U.blueKingMoved){if(V===6&&!U.blueRooksMove.right||V===2&&!U.blueRooksMove.left)return!0}else if(L==="red"&&!U.redKingMoved&&(V===6&&!U.redRooksMove.right||V===2&&!U.redRooksMove.left))return!0}return!1},SI=(L,W,H,K,V)=>{const ue=L===H?0:(H-L)/Math.abs(H-L),he=W===K?0:(K-W)/Math.abs(K-W);let xe=L+ue,et=W+he;for(;xe!==H||et!==K;){if(V[xe][et]!==null)return!1;xe+=ue,et+=he}return!0},qc=(L,W,H,K,V,ue=!0,he=Xt(L),xe=o,et=!1)=>{if(!EI(K,V))return et||console.log("[ILLEGAL MOVE] Out of board:",{piece:L,startRow:W,startCol:H,endRow:K,endCol:V}),!1;const ft=xe[K][V];if(ft&&Xt(ft)===he)return et||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:L,startRow:W,startCol:H,endRow:K,endCol:V}),!1;const un=L.toLowerCase();let yt=!1;switch(un){case"p":yt=wL(he,W,H,K,V,xe);break;case"r":yt=CI(W,H,K,V,xe);break;case"n":yt=vL(W,H,K,V);break;case"b":yt=xI(W,H,K,V,xe);break;case"q":yt=bL(W,H,K,V,xe);break;case"k":yt=EL(he,W,H,K,V);break}return yt?yt&&ue&&yL(W,H,K,V,he,xe)?(et||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:L,startRow:W,startCol:H,endRow:K,endCol:V}),!1):yt:(et||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:L,startRow:W,startCol:H,endRow:K,endCol:V,playerColor:he,pieceType:un,targetPiece:xe[K][V],targetPieceColor:xe[K][V]?Xt(xe[K][V]):null}),!1)},xm=(L,W=o,H=c)=>{const K=[],V=W[L.row][L.col];if(!V||Xt(V)!==H)return K;const ue=V.toLowerCase();if(ue==="p"){const he=H==="blue"?-1:1,xe=H==="blue"?6:1,et=L.row+he;if(et>=0&&et<8&&qc(V,L.row,L.col,et,L.col,!0,H,W,!0)&&K.push({row:et,col:L.col}),L.row===xe){const ft=L.row+2*he;ft>=0&&ft<8&&qc(V,L.row,L.col,ft,L.col,!0,H,W,!0)&&K.push({row:ft,col:L.col})}for(const ft of[-1,1]){const un=L.col+ft,yt=L.row+he;un>=0&&un<8&&yt>=0&&yt<8&&qc(V,L.row,L.col,yt,un,!0,H,W,!0)&&K.push({row:yt,col:un})}}else if(ue==="n"){const he=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[xe,et]of he){const ft=L.row+xe,un=L.col+et;ft>=0&&ft<8&&un>=0&&un<8&&qc(V,L.row,L.col,ft,un,!0,H,W,!0)&&K.push({row:ft,col:un})}}else for(let he=0;he<8;he++)for(let xe=0;xe<8;xe++)qc(V,L.row,L.col,he,xe,!0,H,W,!0)&&K.push({row:he,col:xe});return K},_L=(L,W=o)=>{if(!sa(W,L))return!1;for(let H=0;H<8;H++)for(let K=0;K<8;K++){const V=W[H][K];if(V&&Xt(V)===L&&xm({row:H,col:K},W,L).length>0)return!1}return!0},CL=(L,W=o)=>{if(sa(W,L))return!1;for(let H=0;H<8;H++)for(let K=0;K<8;K++){const V=W[H][K];if(V&&Xt(V)===L&&xm({row:H,col:K},W,L).length>0)return!1}return!0},xL=(L,W)=>{if(h!=="active"||Q.current)return;const H=o[L][W],K=H?Xt(H):null;if(u&&x.some(V=>V.row===L&&V.col===W)){Sm(u,{row:L,col:W});return}if(H&&K===c){const V=xm({row:L,col:W});d({row:L,col:W}),S(V);return}d(null),S([])},Sm=(L,W,H=!1)=>{const K=o[L.row][L.col];if(console.log("[MOVE ATTEMPT]",{from:L,to:W,piece:K,isAIMove:H,board:JSON.parse(JSON.stringify(o)),moveHistory:b}),!!K){if(K.toLowerCase()==="p"&&(Xt(K)==="blue"&&W.row===0||Xt(K)==="red"&&W.row===7)){I({from:L,to:W}),q(!0);return}PI(L,W,"q",H)}};Z.current=Sm;const AI=D.useCallback((L,W,H=!1)=>{na(!0);const K=o.map(he=>[...he]),V=K[L.row][L.col];if(!V)return;K[W.row][W.col]=V,K[L.row][L.col]=null,RL(K,L,W,V);const ue=$L(L,W);if(v(he=>{const xe=[...he,ue];return console.log("[MOVE HISTORY UPDATED]",xe),xe}),C({from:L,to:W}),d(null),S([]),b.length<10&&!H){const he=uR(K,c==="blue"?"red":"blue");Ht(he).then(xe=>{xe&&xe.moves&&xe.moves.length>0&&(Dn(xe.moves.slice(0,3)),ea(!0),setTimeout(()=>ea(!1),5e3))})}DL(L,W,V),l(he=>{const xe=he==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",xe),II(K,xe),xe}),II(K,c==="blue"?"red":"blue"),a(K),Q.current=!1,Pe.current=!1,Oe.current=!1,na(!1)},[o,c,b,Ht]);D.useEffect(()=>{if(!Q.current&&s===Cf.AI&&c==="red"&&!Pe.current&&!Nr)if(Q.current=!0,p==="easy")setTimeout(()=>{const L=SL(o);L?Sm(L.from,L.to,!0):Q.current=!1},600);else{y("AI is calculating...");const L=uR(o,c);if(Oe.current)return;Oe.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:L,difficulty:p,movetime:3e3})}).then(H=>{if(H.ok)return H.json();throw new Error("API call failed")}).then(H=>{const K=H.bestmove||H.move;if(K&&K!=="(none)"&&K.length===4){const V=K.charCodeAt(0)-97,ue=parseInt(K[1]),he=K.charCodeAt(2)-97,xe=parseInt(K[3]),et=8-ue,ft=8-xe;if(V>=0&&V<8&&et>=0&&et<8&&he>=0&&he<8&&ft>=0&&ft<8){const un={from:{row:et,col:V},to:{row:ft,col:he}},yt=o[et][V];yt&&Xt(yt)==="red"&&qc(yt,et,V,ft,he,!0,"red",o)?Sm(un.from,un.to,!0):(Q.current=!1,Oe.current=!1)}else Q.current=!1,Oe.current=!1}else Q.current=!1,Oe.current=!1}).catch(()=>{y("AI error. Please try again."),Q.current=!1,Oe.current=!1})}},[c,s,p,o,U,ss]);const II=(L,W)=>{console.log("Checking game end for player:",W);const H=L.some(V=>V.some(ue=>ue==="k")),K=L.some(V=>V.some(ue=>ue==="K"));if(!H)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),y("King captured! Red wins!"),Lh("loss"),Le(!0),setTimeout(()=>Le(!1),3e3),"checkmate";if(!K)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),y("King captured! You win!"),Lh("win"),Le(!0),setTimeout(()=>Le(!1),3e3),"checkmate";if(console.log("Is king in check:",sa(L,W)),_L(W,L)){console.log("[GAME END] CHECKMATE",{winner:W==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(L)),moveHistory:b}),f("checkmate");const V=W==="blue"?"red":"blue";return V==="blue"?(y("Checkmate! You win!"),Eu("checkmate"),RI(!0),UL(),Lh("win"),Le(!0),setTimeout(()=>Le(!1),3e3)):(y(`Checkmate! ${V==="red"?"AI":"Opponent"} wins!`),Eu("checkmate"),$I(!0),Lh("loss"),Le(!0),setTimeout(()=>Le(!1),3e3)),"checkmate"}return CL(W,L)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(L)),moveHistory:b}),f("stalemate"),y("Stalemate! Game is a draw."),Lh("draw"),Le(!0),setTimeout(()=>Le(!1),3e3),"stalemate"):(sa(L,W)?(console.log("CHECK detected!"),Eu("check"),y(`${W==="blue"?"Blue":"Red"} is in check!`)):y("Your turn"),null)},SL=L=>{const W=[];for(let V=0;V<8;V++)for(let ue=0;ue<8;ue++){const he=L[V][ue];he&&Xt(he)==="red"&&W.push({row:V,col:ue})}for(let V=W.length-1;V>0;V--){const ue=Math.floor(Math.random()*(V+1));[W[V],W[ue]]=[W[ue],W[V]]}const H=[],K=[];for(const V of W){const ue=xm(V,L,"red");for(const he of ue){const xe=L[he.row][he.col];if(xe&&Xt(xe)==="blue"){const ft={p:100,n:320,b:330,r:500,q:900,k:2e4}[xe.toLowerCase()]||0;H.push({from:V,to:he,value:ft})}else K.push({from:V,to:he})}}if(H.length>0&&Math.random()<.3){H.sort((V,ue)=>V.value-ue.value);for(const V of H){const ue=L.map(xe=>[...xe]),he=ue[V.from.row][V.from.col];if(ue[V.to.row][V.to.col]=he,ue[V.from.row][V.from.col]=null,!sa(ue,"red"))return{from:V.from,to:V.to}}}for(const V of K){const ue=L.map(xe=>[...xe]),he=ue[V.from.row][V.from.col];if(ue[V.to.row][V.to.col]=he,ue[V.from.row][V.from.col]=null,!sa(ue,"red"))return V}H.sort((V,ue)=>V.value-ue.value);for(const V of H){const ue=L.map(xe=>[...xe]),he=ue[V.from.row][V.from.col];if(ue[V.to.row][V.to.col]=he,ue[V.from.row][V.from.col]=null,!sa(ue,"red"))return{from:V.from,to:V.to}}return null},AL=()=>{BL(),a(JSON.parse(JSON.stringify(lR))),l("blue"),d(null),f("active"),v([]),S([]),C(null),R(!1),y("Select game mode"),z({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ra(Cm()),Q.current&&(Q.current=!1)},IL=()=>{console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),R(!0),Ke(!1),y("Game started! Your turn");const L=Cm();ra(L),console.log("[DEBUG] Game started with chessboard:",L)},TI=L=>`${L.slice(0,6)}...${L.slice(-4)}`,TL=(L,W)=>{const H=o[L][W],K=(u==null?void 0:u.row)===L&&(u==null?void 0:u.col)===W,V=x.some(he=>he.row===L&&he.col===W),ue=T&&(T.from.row===L&&T.from.col===W||T.to.row===L&&T.to.col===W);return m.jsxs("div",{className:`square ${K?"selected":""} ${V?"legal-move":""} ${ue?"last-move":""}`,onClick:()=>xL(L,W),children:[H&&m.jsx("div",{className:"piece",style:{backgroundImage:jy[H]?`url(${jy[H]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),V&&m.jsx("div",{className:"legal-move-indicator"})]},`${L}-${W}`)},NL=()=>{if(!F||!B)return null;const L=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:L.map(W=>m.jsx("div",{className:"promotion-piece",onClick:()=>{PI(B.from,B.to,W),q(!1),I(null)},style:{backgroundImage:jy[W]?`url(${jy[W]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},W))})]})})},[PL,kL]=D.useState(null),NI=(L=!1,W="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${L?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:fCe.map(H=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>kL(H.key),children:[m.jsx("img",{src:H.img,alt:H.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:H.name}),PL===H.key&&m.jsx("div",{className:"piece-gallery-desc",children:H.desc})]},H.key))}),m.jsx("div",{className:"piece-gallery-tip",children:W})]}),OL=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),m.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",m.jsx("br",{}),"Good luck, have fun!"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{IL()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),RL=(L,W,H,K)=>{if(K.toLowerCase()==="p"&&(Xt(K)==="blue"&&H.row===0||Xt(K)==="red"&&H.row===7)){const V=Xt(K)==="blue"?"q":"Q";L[H.row][H.col]=V}K.toLowerCase()==="k"&&Math.abs(W.col-H.col)===2&&(H.col===6?(L[W.row][7]=null,L[W.row][5]=Xt(K)==="blue"?"r":"R"):H.col===2&&(L[W.row][0]=null,L[W.row][3]=Xt(K)==="blue"?"r":"R"))},$L=(L,W,H,K)=>{const V=_I(L.row,L.col),ue=_I(W.row,W.col);return`${V}-${ue}`},DL=(L,W,H)=>{const K={...U};H.toLowerCase()==="k"?Xt(H)==="blue"?K.blueKingMoved=!0:K.redKingMoved=!0:H.toLowerCase()==="r"&&(Xt(H)==="blue"?(L.col===0&&(K.blueRooksMove.left=!0),L.col===7&&(K.blueRooksMove.right=!0)):(L.col===0&&(K.redRooksMove.left=!0),L.col===7&&(K.redRooksMove.right=!0))),H.toLowerCase()==="p"&&Math.abs(L.row-W.row)===2?K.lastPawnDoubleMove={row:W.row,col:W.col}:K.lastPawnDoubleMove=null,z(K)},PI=(L,W,H="q",K=!1)=>{o[L.row][L.col];const ue=o[W.row][W.col]!==null;if(Eu(ue?"capture":"move"),ue){j({row:W.row,col:W.col,show:!0}),setTimeout(()=>{AI(L,W,K),j(null)},500);return}AI(L,W,K)},[kI,jL]=D.useState(!0),[Zv,OI]=D.useState(!1),Eu=L=>{if(!kI)return;let W="";switch(L){case"move":W="/images/move.mp3";break;case"capture":W="/images/capture.mp3";break;case"check":W="/images/play.mp3";break;case"checkmate":W="/images/victory.mp3";break;case"victory":W="/images/victory.mp3";break;default:W="/images/move.mp3"}new Audio(W).play().catch(()=>{})},UL=()=>{if(Zv){Eu("victory");for(let L=0;L<50;L++)setTimeout(()=>{const W=document.createElement("div");W.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(W),setTimeout(()=>W.remove(),3e3)},L*100);setTimeout(()=>OI(!1),5e3)}},[LL,RI]=D.useState(!1),[ML,$I]=D.useState(!1),DI=()=>{RI(!1),$I(!1)},Xv=()=>{DI(),AL()},eb=()=>{DI(),R(!1)},BL=()=>{new Audio("/images/start.mp3").play().catch(()=>{})};return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Dt?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"}),m.jsx("button",{className:"dark-mode-toggle",onClick:pr,title:Dt?"Switch to light mode":"Switch to dark mode","aria-label":Dt?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:Dt?"☀️":"🌙"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[O&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"move-history-status",children:w}),m.jsxs("div",{className:"move-history",children:[m.jsx("div",{className:"move-history-title",children:"Move History"}),m.jsx("ul",{className:"move-history-list",children:b.slice().reverse().map((L,W)=>m.jsx("li",{children:L},b.length-1-W))})]})]}),!O&&m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,10).map((L,W)=>{if(typeof L=="object"&&L!==null&&"username"in L&&"wins"in L&&"losses"in L&&"draws"in L&&"points"in L){const H=L;return m.jsxs("tr",{children:[m.jsx("td",{children:W+1}),m.jsx("td",{children:TI(H.username)}),m.jsx("td",{children:H.wins}),m.jsx("td",{children:H.losses}),m.jsx("td",{children:H.draws}),m.jsx("td",{children:H.points})]},H.username)}return null})})]})})]})]}),m.jsxs("div",{className:"center-area",children:[m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:s===Cf.AI?"NA":`${k} ETH`}),O&&!De&&m.jsxs("span",{className:"mode-play",children:["Mode: ",p==="easy"?"Easy":"Hard"]}),p==="easy"&&m.jsxs("span",{className:`stockfish-status ${Ut}`,children:["LawbBot: ",Ut==="loading"?"Loading...":Ut==="ready"?"Ready":"Failed"]}),p==="hard"&&m.jsxs("span",{className:`stockfish-status ${Ut}`,children:["LawbBot: ",Ut==="loading"?"Loading...":Ut==="ready"?"Ready":"Failed"]}),Wc&&ta.length>0&&m.jsxs("div",{className:"opening-suggestions",children:[m.jsx("span",{className:"opening-label",children:"Opening:"}),ta.map((L,W)=>m.jsxs("span",{className:"opening-move",children:[L.san," (",Math.round(L.white+L.draws+L.black)," games)"]},W))]})]})}),O?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Uh})`},children:[Array.from({length:8},(L,W)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(H,K)=>TL(W,K))},W)),A&&A.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${A.row*12.5}%`,left:`${A.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>Is(!0),children:"Chess Piece Info"}),m.jsx("button",{onClick:Xv,children:"New Game"}),m.jsx("button",{onClick:eb,children:"Back to Menu"})]}),m.jsxs("div",{className:"epic-controls",children:[m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:kI,onChange:L=>jL(L.target.checked)}),m.jsx("label",{htmlFor:"sound-toggle",children:"🎵 Sound Effects"})]}),m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:Zv,onChange:L=>OI(L.target.checked)}),m.jsx("label",{htmlFor:"victory-toggle",children:"🎉 Victory Celebration"})]})]})]}):De?OL():m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${s===Cf.AI?"selected":""}`,onClick:()=>i(Cf.AI),children:"VS THE HOUSE"}),m.jsxs("div",{className:"pvp-under-construction",children:[m.jsx("button",{className:"mode-btn",disabled:!0,children:"PVP UNDER CONSTRUCTION"}),m.jsx("img",{src:"/images/chessboard4.png",alt:"Chessboard",style:{display:"block",margin:"16px auto 0 auto",width:"180px",maxWidth:"90%"}})]}),m.jsx("button",{className:"start-btn continue-btn",onClick:()=>Ke(!0),children:"Continue"}),m.jsxs("div",{className:"how-to-section",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"how-to-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Points System:"})," Win points by defeating the AI. 1 win = 10pts. 1 draw = 1 point."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:O?m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,10).map((L,W)=>{if(typeof L=="object"&&L!==null&&"username"in L&&"wins"in L&&"losses"in L&&"draws"in L&&"points"in L){const H=L;return m.jsxs("tr",{children:[m.jsx("td",{children:W+1}),m.jsx("td",{children:TI(H.username)}),m.jsx("td",{children:H.wins}),m.jsx("td",{children:H.losses}),m.jsx("td",{children:H.draws}),m.jsx("td",{children:H.points})]},H.username)}return null})})]})})]}):m.jsx("div",{className:"piece-gallery-panel",children:NI(!1)})})]}),Zt&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>Is(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:L=>L.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>Is(!1),children:"×"}),NI(!1)]})}),NL(),it&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),LL&&Zv&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:Xv,children:"New Game"}),m.jsx("button",{onClick:eb,children:"Back to Menu"})]})]}),ML&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(L=>m.jsx("div",{className:"blood-drip",style:{left:`${10+L*14}%`,animationDelay:`${.5+L*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},L))}),m.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Xv,children:"New Game"}),m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:eb,children:"Back to Menu"})]})]})]})]})};function uR(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const dR=()=>{const[t,e]=D.useState(!1),{address:n,isConnected:r}=nm(),{open:s}=bm(),[i,o]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),a=()=>{o(l=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!l)),!l))};D.useEffect(()=>{typeof document<"u"&&(i?document.body.classList.add("chess-dark-mode"):document.body.classList.remove("chess-dark-mode"))},[i]);const c=()=>{t?window.location.href="https://lawb.xyz":(e(!0),window.setTimeout(()=>e(!1),4e3))};return m.jsxs("div",{className:`chess98-main-window${i?" chess-dark-mode":""}`,children:[m.jsxs("div",{className:"chess98-header",children:[m.jsx("button",{className:"chess98-back-btn",onClick:c,children:t?"warning this will end current game":"Back to Desktop"}),m.jsx("span",{className:"chess98-title",children:"LAWB CHESS"}),m.jsxs("span",{className:"chess98-wallet-status",children:[r&&n?m.jsxs("span",{title:n,children:[n.slice(0,6),"...",n.slice(-4)]}):m.jsx("span",{style:{color:"#fff",cursor:"pointer"},onClick:()=>{s()},children:"Connect Wallet"}),m.jsx("button",{className:"dark-mode-toggle",onClick:a,title:i?"Switch to light mode":"Switch to dark mode","aria-label":i?"Switch to light mode":"Switch to dark mode",style:{marginLeft:16},children:i?"☀️":"🌙"})]})]}),m.jsx("div",{className:"chess98-content",children:r&&n?m.jsx(mCe,{fullscreen:!0,onClose:()=>{},onMinimize:()=>{}}):m.jsxs("div",{className:"wallet-required",style:{marginTop:80},children:[m.jsx("h3",{style:{marginBottom:12,color:i?"#00ff00":"#0a2a7a"},children:"Wallet Required"}),m.jsxs("p",{style:{color:i?"#00ff00":"#222"},children:["You must connect your wallet to play chess and appear on the leaderboard.",m.jsx("br",{}),m.jsx("span",{style:{fontSize:13,opacity:.8},children:"(Wallet address is your username.)"})]}),m.jsx("button",{className:"start-btn",style:{marginTop:18,background:i?"#222":"#008000",color:i?"#00ff00":"#fff",border:i?"2px solid #00ff00":void 0},onClick:()=>{s()},children:"Connect Wallet"})]})})]})},yCe=new RH,wCe=typeof window<"u"&&window.location.hostname.startsWith("chess."),vCe=()=>q1e("(max-width: 768px)")?m.jsx(W1e,{}):m.jsx(D1e,{});xE.createRoot(document.getElementById("root")).render(m.jsx(ms.StrictMode,{children:m.jsx(Gq,{config:WU.wagmiConfig,children:m.jsx(VH,{client:yCe,children:m.jsx(R1e,{children:m.jsx(P1e,{children:wCe?m.jsx(pw,{path:"/*",element:m.jsx(dR,{})}):m.jsxs(m.Fragment,{children:[m.jsx(pw,{path:"/",element:m.jsx(vCe,{})}),m.jsx(pw,{path:"/chess",element:m.jsx(dR,{})})]})})})})})}));export{Dxe as $,ce as A,Ne as B,de as C,Kn as D,ep as E,Gn as F,Se as G,SC as H,Rf as I,pi as J,uX as K,St as L,gt as M,oX as N,ne as O,ds as P,dw as Q,ke as R,mi as S,qr as T,ug as U,bg as V,Rn as W,Mxe as X,Sx as Y,qX as Z,up as _,fw as a,yh as a$,Pn as a0,ou as a1,rn as a2,jxe as a3,bU as a4,Ax as a5,lh as a6,on as a7,UCe as a8,tc as a9,ZD as aA,QD as aB,Tc as aC,Jf as aD,Ho as aE,PCe as aF,WF as aG,Wl as aH,NCe as aI,kCe as aJ,Bw as aK,OCe as aL,h7 as aM,K$ as aN,TCe as aO,J0 as aP,jp as aQ,Fw as aR,I0 as aS,RCe as aT,f7 as aU,VT as aV,Dq as aW,lY as aX,Ks as aY,PW as aZ,NW as a_,no as aa,ng as ab,je as ac,wn as ad,Pa as ae,n5 as af,tv as ag,zw as ah,VS as ai,Ic as aj,ACe as ak,ev as al,GS as am,SCe as an,xCe as ao,oD as ap,K0 as aq,Mw as ar,NF as as,$F as at,$Ce as au,Tz as av,ee as aw,MS as ax,_r as ay,Pz as az,vt as b,zl as b0,H0 as b1,Sr as b2,ln as b3,em as b4,X as c,Ce as d,$ as e,bt as f,$o as g,Lxe as h,Pd as i,fs as j,ve as k,Ft as l,sbe as m,hn as n,ibe as o,le as p,Vt as q,Uxe as r,ht as s,e6 as t,$t as u,MX as v,As as w,$xe as x,SA as y,n6 as z};
