const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-DLXnrq3A.js","assets/hmac-C4lAl_Mu.js","assets/secp256k1-DFJTEl6m.js","assets/embedded-wallet-C3biWeAu.js","assets/if-defined-BYEZX_Il.js","assets/index-1bH_i9T-.js","assets/index-Df-Gceyf.js","assets/ref-W9s3UFbl.js","assets/index-bfch74vy.js","assets/index-Cw8ekQQD.js","assets/index-CS2D1cAj.js","assets/index-DXgLFVUx.js","assets/index-CKnxvGxz.js","assets/index-L1jwLZmU.js","assets/index-EX5iUzAO.js","assets/email-BrbP-rdK.js","assets/index-DBfVldvt.js","assets/socials-5oeCwp5A.js","assets/index-CUHUG3Jt.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DC9sFS1x.js","assets/index-BfpPAD_y.js","assets/index-DyQuaTuL.js","assets/index-CCiUaTOb.js","assets/swaps-CEgEa65T.js","assets/index-BPq87Tvf.js","assets/index-DmaIjflK.js","assets/index-BXYUX-FP.js","assets/send-C84diajF.js","assets/index-Cjzhv8hy.js","assets/index-CFdegLP8.js","assets/receive-BsEGCOkE.js","assets/index-DUGf8Cth.js","assets/onramp-B_9SRqcK.js","assets/index-D0eZRUQl.js","assets/index-DrSCbjMz.js","assets/index-Ck3EWQfn.js","assets/transactions-Byg19UW-.js","assets/index-D4FqpfMO.js","assets/index-CJQimvzx.js","assets/index-l_m0rq4-.js","assets/index-DX2X8cNY.js","assets/index-DgKmH8Lr.js","assets/w3m-modal-BA8pBHif.js"])))=>i.map(i=>d[i]);
var II=t=>{throw TypeError(t)};var eb=(t,e,n)=>e.has(t)||II("Cannot "+n);var L=(t,e,n)=>(eb(t,e,"read from private field"),n?n.call(t):e.get(t)),Se=(t,e,n)=>e.has(t)?II("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),pe=(t,e,n,r)=>(eb(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),He=(t,e,n)=>(eb(t,e,"access private method"),n);var Im=(t,e,n,r)=>({set _(s){pe(t,e,s,n)},get _(){return L(t,e,r)}});function AL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var en=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function T0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var pR={exports:{}},N0={},gR={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=Symbol.for("react.element"),IL=Symbol.for("react.portal"),TL=Symbol.for("react.fragment"),NL=Symbol.for("react.strict_mode"),PL=Symbol.for("react.profiler"),kL=Symbol.for("react.provider"),OL=Symbol.for("react.context"),RL=Symbol.for("react.forward_ref"),$L=Symbol.for("react.suspense"),DL=Symbol.for("react.memo"),jL=Symbol.for("react.lazy"),TI=Symbol.iterator;function UL(t){return t===null||typeof t!="object"?null:(t=TI&&t[TI]||t["@@iterator"],typeof t=="function"?t:null)}var mR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yR=Object.assign,wR={};function ph(t,e,n){this.props=t,this.context=e,this.refs=wR,this.updater=n||mR}ph.prototype.isReactComponent={};ph.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ph.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vR(){}vR.prototype=ph.prototype;function Dx(t,e,n){this.props=t,this.context=e,this.refs=wR,this.updater=n||mR}var jx=Dx.prototype=new vR;jx.constructor=Dx;yR(jx,ph.prototype);jx.isPureReactComponent=!0;var NI=Array.isArray,bR=Object.prototype.hasOwnProperty,Ux={current:null},ER={key:!0,ref:!0,__self:!0,__source:!0};function _R(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)bR.call(e,r)&&!ER.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Wg,type:t,key:i,ref:o,props:s,_owner:Ux.current}}function LL(t,e){return{$$typeof:Wg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wg}function ML(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var PI=/\/+/g;function tb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ML(""+t.key):e.toString(36)}function Ly(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wg:case IL:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+tb(o,0):r,NI(s)?(n="",t!=null&&(n=t.replace(PI,"$&/")+"/"),Ly(s,e,n,"",function(l){return l})):s!=null&&(Lx(s)&&(s=LL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(PI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",NI(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+tb(i,a);o+=Ly(i,e,n,c,s)}else if(c=UL(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+tb(i,a++),o+=Ly(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tm(t,e,n){if(t==null)return t;var r=[],s=0;return Ly(t,r,"","",function(i){return e.call(n,i,s++)}),r}function BL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sr={current:null},My={transition:null},FL={ReactCurrentDispatcher:Sr,ReactCurrentBatchConfig:My,ReactCurrentOwner:Ux};function CR(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:Tm,forEach:function(t,e,n){Tm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tm(t,function(){e++}),e},toArray:function(t){return Tm(t,function(e){return e})||[]},only:function(t){if(!Lx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Je.Component=ph;Je.Fragment=TL;Je.Profiler=PL;Je.PureComponent=Dx;Je.StrictMode=NL;Je.Suspense=$L;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FL;Je.act=CR;Je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ux.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)bR.call(e,c)&&!ER.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Wg,type:t.type,key:s,ref:i,props:r,_owner:o}};Je.createContext=function(t){return t={$$typeof:OL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kL,_context:t},t.Consumer=t};Je.createElement=_R;Je.createFactory=function(t){var e=_R.bind(null,t);return e.type=t,e};Je.createRef=function(){return{current:null}};Je.forwardRef=function(t){return{$$typeof:RL,render:t}};Je.isValidElement=Lx;Je.lazy=function(t){return{$$typeof:jL,_payload:{_status:-1,_result:t},_init:BL}};Je.memo=function(t,e){return{$$typeof:DL,type:t,compare:e===void 0?null:e}};Je.startTransition=function(t){var e=My.transition;My.transition={};try{t()}finally{My.transition=e}};Je.unstable_act=CR;Je.useCallback=function(t,e){return Sr.current.useCallback(t,e)};Je.useContext=function(t){return Sr.current.useContext(t)};Je.useDebugValue=function(){};Je.useDeferredValue=function(t){return Sr.current.useDeferredValue(t)};Je.useEffect=function(t,e){return Sr.current.useEffect(t,e)};Je.useId=function(){return Sr.current.useId()};Je.useImperativeHandle=function(t,e,n){return Sr.current.useImperativeHandle(t,e,n)};Je.useInsertionEffect=function(t,e){return Sr.current.useInsertionEffect(t,e)};Je.useLayoutEffect=function(t,e){return Sr.current.useLayoutEffect(t,e)};Je.useMemo=function(t,e){return Sr.current.useMemo(t,e)};Je.useReducer=function(t,e,n){return Sr.current.useReducer(t,e,n)};Je.useRef=function(t){return Sr.current.useRef(t)};Je.useState=function(t){return Sr.current.useState(t)};Je.useSyncExternalStore=function(t,e,n){return Sr.current.useSyncExternalStore(t,e,n)};Je.useTransition=function(){return Sr.current.useTransition()};Je.version="18.3.1";gR.exports=Je;var D=gR.exports;const gs=cu(D),zL=AL({__proto__:null,default:gs},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WL=D,qL=Symbol.for("react.element"),HL=Symbol.for("react.fragment"),VL=Object.prototype.hasOwnProperty,GL=WL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KL={key:!0,ref:!0,__self:!0,__source:!0};function xR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VL.call(e,r)&&!KL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:qL,type:t,key:i,ref:o,props:s,_owner:GL.current}}N0.Fragment=HL;N0.jsx=xR;N0.jsxs=xR;pR.exports=N0;var m=pR.exports,_E={},SR={exports:{}},Es={},AR={exports:{}},IR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,k){var U=P.length;P.push(k);e:for(;0<U;){var z=U-1>>>1,V=P[z];if(0<s(V,k))P[z]=k,P[U]=V,U=z;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var k=P[0],U=P.pop();if(U!==k){P[0]=U;e:for(var z=0,V=P.length,Q=V>>>1;z<Q;){var Y=2*(z+1)-1,Z=P[Y],se=Y+1,Ne=P[se];if(0>s(Z,U))se<V&&0>s(Ne,Z)?(P[z]=Ne,P[se]=U,z=se):(P[z]=Z,P[Y]=U,z=Y);else if(se<V&&0>s(Ne,U))P[z]=Ne,P[se]=U,z=se;else break e}}return k}function s(P,k){var U=P.sortIndex-k.sortIndex;return U!==0?U:P.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var k=n(l);k!==null;){if(k.callback===null)r(l);else if(k.startTime<=P)r(l),k.sortIndex=k.expirationTime,e(c,k);else break;k=n(l)}}function _(P){if(g=!1,v(P),!p)if(n(c)!==null)p=!0,A(E);else{var k=n(l);k!==null&&j(_,k.startTime-P)}}function E(P,k){p=!1,g&&(g=!1,y(T),T=-1),f=!0;var U=h;try{for(v(k),d=n(c);d!==null&&(!(d.expirationTime>k)||P&&!R());){var z=d.callback;if(typeof z=="function"){d.callback=null,h=d.priorityLevel;var V=z(d.expirationTime<=k);k=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(c)&&r(c),v(k)}else r(c);d=n(c)}if(d!==null)var Q=!0;else{var Y=n(l);Y!==null&&j(_,Y.startTime-k),Q=!1}return Q}finally{d=null,h=U,f=!1}}var x=!1,S=null,T=-1,C=5,O=-1;function R(){return!(t.unstable_now()-O<C)}function B(){if(S!==null){var P=t.unstable_now();O=P;var k=!0;try{k=S(!0,P)}finally{k?W():(x=!1,S=null)}}else x=!1}var W;if(typeof b=="function")W=function(){b(B)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,I=M.port2;M.port1.onmessage=B,W=function(){I.postMessage(null)}}else W=function(){w(B,0)};function A(P){S=P,x||(x=!0,W())}function j(P,k){T=w(function(){P(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,A(E))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var U=h;h=k;try{return P()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,k){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=h;h=P;try{return k()}finally{h=U}},t.unstable_scheduleCallback=function(P,k,U){var z=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?z+U:z):U=z,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=U+V,P={id:u++,callback:k,priorityLevel:P,startTime:U,expirationTime:V,sortIndex:-1},U>z?(P.sortIndex=U,e(l,P),n(c)===null&&P===n(l)&&(g?(y(T),T=-1):g=!0,j(_,U-z))):(P.sortIndex=V,e(c,P),p||f||(p=!0,A(E))),P},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(P){var k=h;return function(){var U=h;h=k;try{return P.apply(this,arguments)}finally{h=U}}}})(IR);AR.exports=IR;var YL=AR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JL=D,vs=YL;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TR=new Set,vp={};function lu(t,e){Vd(t,e),Vd(t+"Capture",e)}function Vd(t,e){for(vp[t]=e,t=0;t<e.length;t++)TR.add(e[t])}var zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),CE=Object.prototype.hasOwnProperty,QL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kI={},OI={};function ZL(t){return CE.call(OI,t)?!0:CE.call(kI,t)?!1:QL.test(t)?OI[t]=!0:(kI[t]=!0,!1)}function XL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eM(t,e,n,r){if(e===null||typeof e>"u"||XL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ar(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qn[t]=new Ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qn[e]=new Ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qn[t]=new Ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qn[t]=new Ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qn[t]=new Ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qn[t]=new Ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qn[t]=new Ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qn[t]=new Ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qn[t]=new Ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mx=/[\-:]([a-z])/g;function Bx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mx,Bx);qn[e]=new Ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mx,Bx);qn[e]=new Ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mx,Bx);qn[e]=new Ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qn[t]=new Ar(t,1,!1,t.toLowerCase(),null,!1,!1)});qn.xlinkHref=new Ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qn[t]=new Ar(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fx(t,e,n,r){var s=qn.hasOwnProperty(e)?qn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eM(e,n,s,r)&&(n=null),r||s===null?ZL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zo=JL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nm=Symbol.for("react.element"),id=Symbol.for("react.portal"),od=Symbol.for("react.fragment"),zx=Symbol.for("react.strict_mode"),xE=Symbol.for("react.profiler"),NR=Symbol.for("react.provider"),PR=Symbol.for("react.context"),Wx=Symbol.for("react.forward_ref"),SE=Symbol.for("react.suspense"),AE=Symbol.for("react.suspense_list"),qx=Symbol.for("react.memo"),Ta=Symbol.for("react.lazy"),kR=Symbol.for("react.offscreen"),RI=Symbol.iterator;function Fh(t){return t===null||typeof t!="object"?null:(t=RI&&t[RI]||t["@@iterator"],typeof t=="function"?t:null)}var Kt=Object.assign,nb;function xf(t){if(nb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nb=e&&e[1]||""}return`
`+nb+t}var rb=!1;function sb(t,e){if(!t||rb)return"";rb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{rb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xf(t):""}function tM(t){switch(t.tag){case 5:return xf(t.type);case 16:return xf("Lazy");case 13:return xf("Suspense");case 19:return xf("SuspenseList");case 0:case 2:case 15:return t=sb(t.type,!1),t;case 11:return t=sb(t.type.render,!1),t;case 1:return t=sb(t.type,!0),t;default:return""}}function IE(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case od:return"Fragment";case id:return"Portal";case xE:return"Profiler";case zx:return"StrictMode";case SE:return"Suspense";case AE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PR:return(t.displayName||"Context")+".Consumer";case NR:return(t._context.displayName||"Context")+".Provider";case Wx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qx:return e=t.displayName||null,e!==null?e:IE(t.type)||"Memo";case Ta:e=t._payload,t=t._init;try{return IE(t(e))}catch{}}return null}function nM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IE(e);case 8:return e===zx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rM(t){var e=OR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pm(t){t._valueTracker||(t._valueTracker=rM(t))}function RR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=OR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function TE(t,e){var n=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $I(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $R(t,e){e=e.checked,e!=null&&Fx(t,"checked",e,!1)}function NE(t,e){$R(t,e);var n=Sc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?PE(t,e.type,n):e.hasOwnProperty("defaultValue")&&PE(t,e.type,Sc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function DI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function PE(t,e,n){(e!=="number"||mw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sf=Array.isArray;function bd(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sc(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function kE(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(Sf(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sc(n)}}function DR(t,e){var n=Sc(e.value),r=Sc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function UI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function OE(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var km,UR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(km=km||document.createElement("div"),km.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=km.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ff={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sM=["Webkit","ms","Moz","O"];Object.keys(Ff).forEach(function(t){sM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ff[e]=Ff[t]})});function LR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ff.hasOwnProperty(t)&&Ff[t]?(""+e).trim():e+"px"}function MR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=LR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var iM=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function RE(t,e){if(e){if(iM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function $E(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DE=null;function Hx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jE=null,Ed=null,_d=null;function LI(t){if(t=Vg(t)){if(typeof jE!="function")throw Error(re(280));var e=t.stateNode;e&&(e=$0(e),jE(t.stateNode,t.type,e))}}function BR(t){Ed?_d?_d.push(t):_d=[t]:Ed=t}function FR(){if(Ed){var t=Ed,e=_d;if(_d=Ed=null,LI(t),e)for(t=0;t<e.length;t++)LI(e[t])}}function zR(t,e){return t(e)}function WR(){}var ib=!1;function qR(t,e,n){if(ib)return t(e,n);ib=!0;try{return zR(t,e,n)}finally{ib=!1,(Ed!==null||_d!==null)&&(WR(),FR())}}function Ep(t,e){var n=t.stateNode;if(n===null)return null;var r=$0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var UE=!1;if(zo)try{var zh={};Object.defineProperty(zh,"passive",{get:function(){UE=!0}}),window.addEventListener("test",zh,zh),window.removeEventListener("test",zh,zh)}catch{UE=!1}function oM(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var zf=!1,yw=null,ww=!1,LE=null,aM={onError:function(t){zf=!0,yw=t}};function cM(t,e,n,r,s,i,o,a,c){zf=!1,yw=null,oM.apply(aM,arguments)}function lM(t,e,n,r,s,i,o,a,c){if(cM.apply(this,arguments),zf){if(zf){var l=yw;zf=!1,yw=null}else throw Error(re(198));ww||(ww=!0,LE=l)}}function uu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function HR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function MI(t){if(uu(t)!==t)throw Error(re(188))}function uM(t){var e=t.alternate;if(!e){if(e=uu(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return MI(s),t;if(i===r)return MI(s),e;i=i.sibling}throw Error(re(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function VR(t){return t=uM(t),t!==null?GR(t):null}function GR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GR(t);if(e!==null)return e;t=t.sibling}return null}var KR=vs.unstable_scheduleCallback,BI=vs.unstable_cancelCallback,dM=vs.unstable_shouldYield,hM=vs.unstable_requestPaint,sn=vs.unstable_now,fM=vs.unstable_getCurrentPriorityLevel,Vx=vs.unstable_ImmediatePriority,YR=vs.unstable_UserBlockingPriority,vw=vs.unstable_NormalPriority,pM=vs.unstable_LowPriority,JR=vs.unstable_IdlePriority,P0=null,Yi=null;function gM(t){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(P0,t,void 0,(t.current.flags&128)===128)}catch{}}var wi=Math.clz32?Math.clz32:wM,mM=Math.log,yM=Math.LN2;function wM(t){return t>>>=0,t===0?32:31-(mM(t)/yM|0)|0}var Om=64,Rm=4194304;function Af(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Af(a):(i&=o,i!==0&&(r=Af(i)))}else o=n&~s,o!==0?r=Af(o):i!==0&&(r=Af(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wi(e),s=1<<n,r|=t[n],e&=~s;return r}function vM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-wi(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=vM(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function ME(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QR(){var t=Om;return Om<<=1,!(Om&4194240)&&(Om=64),t}function ob(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wi(e),t[e]=n}function EM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-wi(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wi(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var vt=0;function ZR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var XR,Kx,e3,t3,n3,BE=!1,$m=[],ac=null,cc=null,lc=null,_p=new Map,Cp=new Map,Ua=[],_M="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FI(t,e){switch(t){case"focusin":case"focusout":ac=null;break;case"dragenter":case"dragleave":cc=null;break;case"mouseover":case"mouseout":lc=null;break;case"pointerover":case"pointerout":_p.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cp.delete(e.pointerId)}}function Wh(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Vg(e),e!==null&&Kx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CM(t,e,n,r,s){switch(e){case"focusin":return ac=Wh(ac,t,e,n,r,s),!0;case"dragenter":return cc=Wh(cc,t,e,n,r,s),!0;case"mouseover":return lc=Wh(lc,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _p.set(i,Wh(_p.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Cp.set(i,Wh(Cp.get(i)||null,t,e,n,r,s)),!0}return!1}function r3(t){var e=dl(t.target);if(e!==null){var n=uu(e);if(n!==null){if(e=n.tag,e===13){if(e=HR(n),e!==null){t.blockedOn=e,n3(t.priority,function(){e3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function By(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=FE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);DE=r,n.target.dispatchEvent(r),DE=null}else return e=Vg(n),e!==null&&Kx(e),t.blockedOn=n,!1;e.shift()}return!0}function zI(t,e,n){By(t)&&n.delete(e)}function xM(){BE=!1,ac!==null&&By(ac)&&(ac=null),cc!==null&&By(cc)&&(cc=null),lc!==null&&By(lc)&&(lc=null),_p.forEach(zI),Cp.forEach(zI)}function qh(t,e){t.blockedOn===e&&(t.blockedOn=null,BE||(BE=!0,vs.unstable_scheduleCallback(vs.unstable_NormalPriority,xM)))}function xp(t){function e(s){return qh(s,t)}if(0<$m.length){qh($m[0],t);for(var n=1;n<$m.length;n++){var r=$m[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ac!==null&&qh(ac,t),cc!==null&&qh(cc,t),lc!==null&&qh(lc,t),_p.forEach(e),Cp.forEach(e),n=0;n<Ua.length;n++)r=Ua[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ua.length&&(n=Ua[0],n.blockedOn===null);)r3(n),n.blockedOn===null&&Ua.shift()}var Cd=Zo.ReactCurrentBatchConfig,Ew=!0;function SM(t,e,n,r){var s=vt,i=Cd.transition;Cd.transition=null;try{vt=1,Yx(t,e,n,r)}finally{vt=s,Cd.transition=i}}function AM(t,e,n,r){var s=vt,i=Cd.transition;Cd.transition=null;try{vt=4,Yx(t,e,n,r)}finally{vt=s,Cd.transition=i}}function Yx(t,e,n,r){if(Ew){var s=FE(t,e,n,r);if(s===null)mb(t,e,r,_w,n),FI(t,r);else if(CM(s,t,e,n,r))r.stopPropagation();else if(FI(t,r),e&4&&-1<_M.indexOf(t)){for(;s!==null;){var i=Vg(s);if(i!==null&&XR(i),i=FE(t,e,n,r),i===null&&mb(t,e,r,_w,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else mb(t,e,r,null,n)}}var _w=null;function FE(t,e,n,r){if(_w=null,t=Hx(r),t=dl(t),t!==null)if(e=uu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=HR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _w=t,null}function s3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fM()){case Vx:return 1;case YR:return 4;case vw:case pM:return 16;case JR:return 536870912;default:return 16}default:return 16}}var Xa=null,Jx=null,Fy=null;function i3(){if(Fy)return Fy;var t,e=Jx,n=e.length,r,s="value"in Xa?Xa.value:Xa.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Fy=s.slice(t,1<r?1-r:void 0)}function zy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dm(){return!0}function WI(){return!1}function _s(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dm:WI,this.isPropagationStopped=WI,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dm)},persist:function(){},isPersistent:Dm}),e}var gh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qx=_s(gh),Hg=Kt({},gh,{view:0,detail:0}),IM=_s(Hg),ab,cb,Hh,k0=Kt({},Hg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hh&&(Hh&&t.type==="mousemove"?(ab=t.screenX-Hh.screenX,cb=t.screenY-Hh.screenY):cb=ab=0,Hh=t),ab)},movementY:function(t){return"movementY"in t?t.movementY:cb}}),qI=_s(k0),TM=Kt({},k0,{dataTransfer:0}),NM=_s(TM),PM=Kt({},Hg,{relatedTarget:0}),lb=_s(PM),kM=Kt({},gh,{animationName:0,elapsedTime:0,pseudoElement:0}),OM=_s(kM),RM=Kt({},gh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$M=_s(RM),DM=Kt({},gh,{data:0}),HI=_s(DM),jM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LM[t])?!!e[t]:!1}function Zx(){return MM}var BM=Kt({},Hg,{key:function(t){if(t.key){var e=jM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zx,charCode:function(t){return t.type==="keypress"?zy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FM=_s(BM),zM=Kt({},k0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VI=_s(zM),WM=Kt({},Hg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zx}),qM=_s(WM),HM=Kt({},gh,{propertyName:0,elapsedTime:0,pseudoElement:0}),VM=_s(HM),GM=Kt({},k0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KM=_s(GM),YM=[9,13,27,32],Xx=zo&&"CompositionEvent"in window,Wf=null;zo&&"documentMode"in document&&(Wf=document.documentMode);var JM=zo&&"TextEvent"in window&&!Wf,o3=zo&&(!Xx||Wf&&8<Wf&&11>=Wf),GI=" ",KI=!1;function a3(t,e){switch(t){case"keyup":return YM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ad=!1;function QM(t,e){switch(t){case"compositionend":return c3(e);case"keypress":return e.which!==32?null:(KI=!0,GI);case"textInput":return t=e.data,t===GI&&KI?null:t;default:return null}}function ZM(t,e){if(ad)return t==="compositionend"||!Xx&&a3(t,e)?(t=i3(),Fy=Jx=Xa=null,ad=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o3&&e.locale!=="ko"?null:e.data;default:return null}}var XM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XM[t.type]:e==="textarea"}function l3(t,e,n,r){BR(r),e=Cw(e,"onChange"),0<e.length&&(n=new Qx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qf=null,Sp=null;function eB(t){b3(t,0)}function O0(t){var e=ud(t);if(RR(e))return t}function tB(t,e){if(t==="change")return e}var u3=!1;if(zo){var ub;if(zo){var db="oninput"in document;if(!db){var JI=document.createElement("div");JI.setAttribute("oninput","return;"),db=typeof JI.oninput=="function"}ub=db}else ub=!1;u3=ub&&(!document.documentMode||9<document.documentMode)}function QI(){qf&&(qf.detachEvent("onpropertychange",d3),Sp=qf=null)}function d3(t){if(t.propertyName==="value"&&O0(Sp)){var e=[];l3(e,Sp,t,Hx(t)),qR(eB,e)}}function nB(t,e,n){t==="focusin"?(QI(),qf=e,Sp=n,qf.attachEvent("onpropertychange",d3)):t==="focusout"&&QI()}function rB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return O0(Sp)}function sB(t,e){if(t==="click")return O0(e)}function iB(t,e){if(t==="input"||t==="change")return O0(e)}function oB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ci=typeof Object.is=="function"?Object.is:oB;function Ap(t,e){if(Ci(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!CE.call(e,s)||!Ci(t[s],e[s]))return!1}return!0}function ZI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XI(t,e){var n=ZI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ZI(n)}}function h3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f3(){for(var t=window,e=mw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mw(t.document)}return e}function eS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aB(t){var e=f3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&h3(n.ownerDocument.documentElement,n)){if(r!==null&&eS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=XI(n,i);var o=XI(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cB=zo&&"documentMode"in document&&11>=document.documentMode,cd=null,zE=null,Hf=null,WE=!1;function e2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;WE||cd==null||cd!==mw(r)||(r=cd,"selectionStart"in r&&eS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hf&&Ap(Hf,r)||(Hf=r,r=Cw(zE,"onSelect"),0<r.length&&(e=new Qx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=cd)))}function jm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ld={animationend:jm("Animation","AnimationEnd"),animationiteration:jm("Animation","AnimationIteration"),animationstart:jm("Animation","AnimationStart"),transitionend:jm("Transition","TransitionEnd")},hb={},p3={};zo&&(p3=document.createElement("div").style,"AnimationEvent"in window||(delete ld.animationend.animation,delete ld.animationiteration.animation,delete ld.animationstart.animation),"TransitionEvent"in window||delete ld.transitionend.transition);function R0(t){if(hb[t])return hb[t];if(!ld[t])return t;var e=ld[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in p3)return hb[t]=e[n];return t}var g3=R0("animationend"),m3=R0("animationiteration"),y3=R0("animationstart"),w3=R0("transitionend"),v3=new Map,t2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jc(t,e){v3.set(t,e),lu(e,[t])}for(var fb=0;fb<t2.length;fb++){var pb=t2[fb],lB=pb.toLowerCase(),uB=pb[0].toUpperCase()+pb.slice(1);jc(lB,"on"+uB)}jc(g3,"onAnimationEnd");jc(m3,"onAnimationIteration");jc(y3,"onAnimationStart");jc("dblclick","onDoubleClick");jc("focusin","onFocus");jc("focusout","onBlur");jc(w3,"onTransitionEnd");Vd("onMouseEnter",["mouseout","mouseover"]);Vd("onMouseLeave",["mouseout","mouseover"]);Vd("onPointerEnter",["pointerout","pointerover"]);Vd("onPointerLeave",["pointerout","pointerover"]);lu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lu("onBeforeInput",["compositionend","keypress","textInput","paste"]);lu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var If="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dB=new Set("cancel close invalid load scroll toggle".split(" ").concat(If));function n2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lM(r,e,void 0,t),t.currentTarget=null}function b3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;n2(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;n2(s,a,l),i=c}}}if(ww)throw t=LE,ww=!1,LE=null,t}function jt(t,e){var n=e[KE];n===void 0&&(n=e[KE]=new Set);var r=t+"__bubble";n.has(r)||(E3(e,t,2,!1),n.add(r))}function gb(t,e,n){var r=0;e&&(r|=4),E3(n,t,r,e)}var Um="_reactListening"+Math.random().toString(36).slice(2);function Ip(t){if(!t[Um]){t[Um]=!0,TR.forEach(function(n){n!=="selectionchange"&&(dB.has(n)||gb(n,!1,t),gb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Um]||(e[Um]=!0,gb("selectionchange",!1,e))}}function E3(t,e,n,r){switch(s3(e)){case 1:var s=SM;break;case 4:s=AM;break;default:s=Yx}n=s.bind(null,e,n,t),s=void 0,!UE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function mb(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=dl(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}qR(function(){var l=i,u=Hx(n),d=[];e:{var h=v3.get(t);if(h!==void 0){var f=Qx,p=t;switch(t){case"keypress":if(zy(n)===0)break e;case"keydown":case"keyup":f=FM;break;case"focusin":p="focus",f=lb;break;case"focusout":p="blur",f=lb;break;case"beforeblur":case"afterblur":f=lb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=qI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=NM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=qM;break;case g3:case m3:case y3:f=OM;break;case w3:f=VM;break;case"scroll":f=IM;break;case"wheel":f=KM;break;case"copy":case"cut":case"paste":f=$M;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=VI}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,y!==null&&(_=Ep(b,y),_!=null&&g.push(Tp(b,_,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==DE&&(p=n.relatedTarget||n.fromElement)&&(dl(p)||p[Wo]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?dl(p):null,p!==null&&(w=uu(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=qI,_="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=VI,_="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:ud(f),v=p==null?h:ud(p),h=new g(_,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,_=null,dl(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,_=g),w=_,f&&p)t:{for(g=f,y=p,b=0,v=g;v;v=xu(v))b++;for(v=0,_=y;_;_=xu(_))v++;for(;0<b-v;)g=xu(g),b--;for(;0<v-b;)y=xu(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=xu(g),y=xu(y)}g=null}else g=null;f!==null&&r2(d,h,f,g,!1),p!==null&&w!==null&&r2(d,w,p,g,!0)}}e:{if(h=l?ud(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=tB;else if(YI(h))if(u3)E=iB;else{E=rB;var x=nB}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=sB);if(E&&(E=E(t,l))){l3(d,E,n,u);break e}x&&x(t,h,l),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&PE(h,"number",h.value)}switch(x=l?ud(l):window,t){case"focusin":(YI(x)||x.contentEditable==="true")&&(cd=x,zE=l,Hf=null);break;case"focusout":Hf=zE=cd=null;break;case"mousedown":WE=!0;break;case"contextmenu":case"mouseup":case"dragend":WE=!1,e2(d,n,u);break;case"selectionchange":if(cB)break;case"keydown":case"keyup":e2(d,n,u)}var S;if(Xx)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ad?a3(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(o3&&n.locale!=="ko"&&(ad||T!=="onCompositionStart"?T==="onCompositionEnd"&&ad&&(S=i3()):(Xa=u,Jx="value"in Xa?Xa.value:Xa.textContent,ad=!0)),x=Cw(l,T),0<x.length&&(T=new HI(T,t,null,n,u),d.push({event:T,listeners:x}),S?T.data=S:(S=c3(n),S!==null&&(T.data=S)))),(S=JM?QM(t,n):ZM(t,n))&&(l=Cw(l,"onBeforeInput"),0<l.length&&(u=new HI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=S))}b3(d,e)})}function Tp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ep(t,n),i!=null&&r.unshift(Tp(t,i,s)),i=Ep(t,e),i!=null&&r.push(Tp(t,i,s))),t=t.return}return r}function xu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function r2(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=Ep(n,i),c!=null&&o.unshift(Tp(n,c,a))):s||(c=Ep(n,i),c!=null&&o.push(Tp(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hB=/\r\n?/g,fB=/\u0000|\uFFFD/g;function s2(t){return(typeof t=="string"?t:""+t).replace(hB,`
`).replace(fB,"")}function Lm(t,e,n){if(e=s2(e),s2(t)!==e&&n)throw Error(re(425))}function xw(){}var qE=null,HE=null;function VE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var GE=typeof setTimeout=="function"?setTimeout:void 0,pB=typeof clearTimeout=="function"?clearTimeout:void 0,i2=typeof Promise=="function"?Promise:void 0,gB=typeof queueMicrotask=="function"?queueMicrotask:typeof i2<"u"?function(t){return i2.resolve(null).then(t).catch(mB)}:GE;function mB(t){setTimeout(function(){throw t})}function yb(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xp(e)}function uc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function o2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mh=Math.random().toString(36).slice(2),Vi="__reactFiber$"+mh,Np="__reactProps$"+mh,Wo="__reactContainer$"+mh,KE="__reactEvents$"+mh,yB="__reactListeners$"+mh,wB="__reactHandles$"+mh;function dl(t){var e=t[Vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wo]||n[Vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=o2(t);t!==null;){if(n=t[Vi])return n;t=o2(t)}return e}t=n,n=t.parentNode}return null}function Vg(t){return t=t[Vi]||t[Wo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ud(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function $0(t){return t[Np]||null}var YE=[],dd=-1;function Uc(t){return{current:t}}function Mt(t){0>dd||(t.current=YE[dd],YE[dd]=null,dd--)}function kt(t,e){dd++,YE[dd]=t.current,t.current=e}var Ac={},lr=Uc(Ac),Yr=Uc(!1),Ml=Ac;function Gd(t,e){var n=t.type.contextTypes;if(!n)return Ac;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Jr(t){return t=t.childContextTypes,t!=null}function Sw(){Mt(Yr),Mt(lr)}function a2(t,e,n){if(lr.current!==Ac)throw Error(re(168));kt(lr,e),kt(Yr,n)}function _3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(re(108,nM(t)||"Unknown",s));return Kt({},n,r)}function Aw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ac,Ml=lr.current,kt(lr,t),kt(Yr,Yr.current),!0}function c2(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=_3(t,e,Ml),r.__reactInternalMemoizedMergedChildContext=t,Mt(Yr),Mt(lr),kt(lr,t)):Mt(Yr),kt(Yr,n)}var Ao=null,D0=!1,wb=!1;function C3(t){Ao===null?Ao=[t]:Ao.push(t)}function vB(t){D0=!0,C3(t)}function Lc(){if(!wb&&Ao!==null){wb=!0;var t=0,e=vt;try{var n=Ao;for(vt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ao=null,D0=!1}catch(s){throw Ao!==null&&(Ao=Ao.slice(t+1)),KR(Vx,Lc),s}finally{vt=e,wb=!1}}return null}var hd=[],fd=0,Iw=null,Tw=0,Us=[],Ls=0,Bl=null,Ro=1,$o="";function tl(t,e){hd[fd++]=Tw,hd[fd++]=Iw,Iw=t,Tw=e}function x3(t,e,n){Us[Ls++]=Ro,Us[Ls++]=$o,Us[Ls++]=Bl,Bl=t;var r=Ro;t=$o;var s=32-wi(r)-1;r&=~(1<<s),n+=1;var i=32-wi(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ro=1<<32-wi(e)+s|n<<s|r,$o=i+t}else Ro=1<<i|n<<s|r,$o=t}function tS(t){t.return!==null&&(tl(t,1),x3(t,1,0))}function nS(t){for(;t===Iw;)Iw=hd[--fd],hd[fd]=null,Tw=hd[--fd],hd[fd]=null;for(;t===Bl;)Bl=Us[--Ls],Us[Ls]=null,$o=Us[--Ls],Us[Ls]=null,Ro=Us[--Ls],Us[Ls]=null}var ms=null,fs=null,Ft=!1,di=null;function S3(t,e){var n=Ms(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function l2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ms=t,fs=uc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ms=t,fs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bl!==null?{id:Ro,overflow:$o}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ms(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ms=t,fs=null,!0):!1;default:return!1}}function JE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function QE(t){if(Ft){var e=fs;if(e){var n=e;if(!l2(t,e)){if(JE(t))throw Error(re(418));e=uc(n.nextSibling);var r=ms;e&&l2(t,e)?S3(r,n):(t.flags=t.flags&-4097|2,Ft=!1,ms=t)}}else{if(JE(t))throw Error(re(418));t.flags=t.flags&-4097|2,Ft=!1,ms=t}}}function u2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ms=t}function Mm(t){if(t!==ms)return!1;if(!Ft)return u2(t),Ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!VE(t.type,t.memoizedProps)),e&&(e=fs)){if(JE(t))throw A3(),Error(re(418));for(;e;)S3(t,e),e=uc(e.nextSibling)}if(u2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fs=uc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fs=null}}else fs=ms?uc(t.stateNode.nextSibling):null;return!0}function A3(){for(var t=fs;t;)t=uc(t.nextSibling)}function Kd(){fs=ms=null,Ft=!1}function rS(t){di===null?di=[t]:di.push(t)}var bB=Zo.ReactCurrentBatchConfig;function Vh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function Bm(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function d2(t){var e=t._init;return e(t._payload)}function I3(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=pc(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,_){return b===null||b.tag!==6?(b=Sb(v,y.mode,_),b.return=y,b):(b=s(b,v),b.return=y,b)}function c(y,b,v,_){var E=v.type;return E===od?u(y,b,v.props.children,_,v.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ta&&d2(E)===b.type)?(_=s(b,v.props),_.ref=Vh(y,b,v),_.return=y,_):(_=Yy(v.type,v.key,v.props,null,y.mode,_),_.ref=Vh(y,b,v),_.return=y,_)}function l(y,b,v,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=Ab(v,y.mode,_),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,_,E){return b===null||b.tag!==7?(b=Rl(v,y.mode,_,E),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Sb(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Nm:return v=Yy(b.type,b.key,b.props,null,y.mode,v),v.ref=Vh(y,null,b),v.return=y,v;case id:return b=Ab(b,y.mode,v),b.return=y,b;case Ta:var _=b._init;return d(y,_(b._payload),v)}if(Sf(b)||Fh(b))return b=Rl(b,y.mode,v,null),b.return=y,b;Bm(y,b)}return null}function h(y,b,v,_){var E=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(y,b,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nm:return v.key===E?c(y,b,v,_):null;case id:return v.key===E?l(y,b,v,_):null;case Ta:return E=v._init,h(y,b,E(v._payload),_)}if(Sf(v)||Fh(v))return E!==null?null:u(y,b,v,_,null);Bm(y,v)}return null}function f(y,b,v,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(v)||null,a(b,y,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Nm:return y=y.get(_.key===null?v:_.key)||null,c(b,y,_,E);case id:return y=y.get(_.key===null?v:_.key)||null,l(b,y,_,E);case Ta:var x=_._init;return f(y,b,v,x(_._payload),E)}if(Sf(_)||Fh(_))return y=y.get(v)||null,u(b,y,_,E,null);Bm(b,_)}return null}function p(y,b,v,_){for(var E=null,x=null,S=b,T=b=0,C=null;S!==null&&T<v.length;T++){S.index>T?(C=S,S=null):C=S.sibling;var O=h(y,S,v[T],_);if(O===null){S===null&&(S=C);break}t&&S&&O.alternate===null&&e(y,S),b=i(O,b,T),x===null?E=O:x.sibling=O,x=O,S=C}if(T===v.length)return n(y,S),Ft&&tl(y,T),E;if(S===null){for(;T<v.length;T++)S=d(y,v[T],_),S!==null&&(b=i(S,b,T),x===null?E=S:x.sibling=S,x=S);return Ft&&tl(y,T),E}for(S=r(y,S);T<v.length;T++)C=f(S,y,T,v[T],_),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),b=i(C,b,T),x===null?E=C:x.sibling=C,x=C);return t&&S.forEach(function(R){return e(y,R)}),Ft&&tl(y,T),E}function g(y,b,v,_){var E=Fh(v);if(typeof E!="function")throw Error(re(150));if(v=E.call(v),v==null)throw Error(re(151));for(var x=E=null,S=b,T=b=0,C=null,O=v.next();S!==null&&!O.done;T++,O=v.next()){S.index>T?(C=S,S=null):C=S.sibling;var R=h(y,S,O.value,_);if(R===null){S===null&&(S=C);break}t&&S&&R.alternate===null&&e(y,S),b=i(R,b,T),x===null?E=R:x.sibling=R,x=R,S=C}if(O.done)return n(y,S),Ft&&tl(y,T),E;if(S===null){for(;!O.done;T++,O=v.next())O=d(y,O.value,_),O!==null&&(b=i(O,b,T),x===null?E=O:x.sibling=O,x=O);return Ft&&tl(y,T),E}for(S=r(y,S);!O.done;T++,O=v.next())O=f(S,y,T,O.value,_),O!==null&&(t&&O.alternate!==null&&S.delete(O.key===null?T:O.key),b=i(O,b,T),x===null?E=O:x.sibling=O,x=O);return t&&S.forEach(function(B){return e(y,B)}),Ft&&tl(y,T),E}function w(y,b,v,_){if(typeof v=="object"&&v!==null&&v.type===od&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Nm:e:{for(var E=v.key,x=b;x!==null;){if(x.key===E){if(E=v.type,E===od){if(x.tag===7){n(y,x.sibling),b=s(x,v.props.children),b.return=y,y=b;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ta&&d2(E)===x.type){n(y,x.sibling),b=s(x,v.props),b.ref=Vh(y,x,v),b.return=y,y=b;break e}n(y,x);break}else e(y,x);x=x.sibling}v.type===od?(b=Rl(v.props.children,y.mode,_,v.key),b.return=y,y=b):(_=Yy(v.type,v.key,v.props,null,y.mode,_),_.ref=Vh(y,b,v),_.return=y,y=_)}return o(y);case id:e:{for(x=v.key;b!==null;){if(b.key===x)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=Ab(v,y.mode,_),b.return=y,y=b}return o(y);case Ta:return x=v._init,w(y,b,x(v._payload),_)}if(Sf(v))return p(y,b,v,_);if(Fh(v))return g(y,b,v,_);Bm(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=Sb(v,y.mode,_),b.return=y,y=b),o(y)):n(y,b)}return w}var Yd=I3(!0),T3=I3(!1),Nw=Uc(null),Pw=null,pd=null,sS=null;function iS(){sS=pd=Pw=null}function oS(t){var e=Nw.current;Mt(Nw),t._currentValue=e}function ZE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xd(t,e){Pw=t,sS=pd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gr=!0),t.firstContext=null)}function zs(t){var e=t._currentValue;if(sS!==t)if(t={context:t,memoizedValue:e,next:null},pd===null){if(Pw===null)throw Error(re(308));pd=t,Pw.dependencies={lanes:0,firstContext:t}}else pd=pd.next=t;return e}var hl=null;function aS(t){hl===null?hl=[t]:hl.push(t)}function N3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,aS(e)):(n.next=s.next,s.next=n),e.interleaved=n,qo(t,r)}function qo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Na=!1;function cS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qo(t,n)}return s=r.interleaved,s===null?(e.next=e,aS(r)):(e.next=s.next,s.next=e),r.interleaved=e,qo(t,n)}function Wy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gx(t,n)}}function h2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kw(t,e,n,r){var s=t.updateQueue;Na=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Kt({},d,h);break e;case 2:Na=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);zl|=o,t.lanes=o,t.memoizedState=d}}function f2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(re(191,s));s.call(r)}}}var Gg={},Ji=Uc(Gg),Pp=Uc(Gg),kp=Uc(Gg);function fl(t){if(t===Gg)throw Error(re(174));return t}function lS(t,e){switch(kt(kp,e),kt(Pp,t),kt(Ji,Gg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:OE(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=OE(e,t)}Mt(Ji),kt(Ji,e)}function Jd(){Mt(Ji),Mt(Pp),Mt(kp)}function k3(t){fl(kp.current);var e=fl(Ji.current),n=OE(e,t.type);e!==n&&(kt(Pp,t),kt(Ji,n))}function uS(t){Pp.current===t&&(Mt(Ji),Mt(Pp))}var Ht=Uc(0);function Ow(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vb=[];function dS(){for(var t=0;t<vb.length;t++)vb[t]._workInProgressVersionPrimary=null;vb.length=0}var qy=Zo.ReactCurrentDispatcher,bb=Zo.ReactCurrentBatchConfig,Fl=0,Gt=null,yn=null,In=null,Rw=!1,Vf=!1,Op=0,EB=0;function Qn(){throw Error(re(321))}function hS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ci(t[n],e[n]))return!1;return!0}function fS(t,e,n,r,s,i){if(Fl=i,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qy.current=t===null||t.memoizedState===null?SB:AB,t=n(r,s),Vf){i=0;do{if(Vf=!1,Op=0,25<=i)throw Error(re(301));i+=1,In=yn=null,e.updateQueue=null,qy.current=IB,t=n(r,s)}while(Vf)}if(qy.current=$w,e=yn!==null&&yn.next!==null,Fl=0,In=yn=Gt=null,Rw=!1,e)throw Error(re(300));return t}function pS(){var t=Op!==0;return Op=0,t}function Ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Gt.memoizedState=In=t:In=In.next=t,In}function Ws(){if(yn===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=yn.next;var e=In===null?Gt.memoizedState:In.next;if(e!==null)In=e,yn=t;else{if(t===null)throw Error(re(310));yn=t,t={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},In===null?Gt.memoizedState=In=t:In=In.next=t}return In}function Rp(t,e){return typeof e=="function"?e(t):e}function Eb(t){var e=Ws(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=yn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Fl&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Gt.lanes|=u,zl|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Ci(r,e.memoizedState)||(Gr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Gt.lanes|=i,zl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _b(t){var e=Ws(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ci(i,e.memoizedState)||(Gr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function O3(){}function R3(t,e){var n=Gt,r=Ws(),s=e(),i=!Ci(r.memoizedState,s);if(i&&(r.memoizedState=s,Gr=!0),r=r.queue,gS(j3.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||In!==null&&In.memoizedState.tag&1){if(n.flags|=2048,$p(9,D3.bind(null,n,r,s,e),void 0,null),kn===null)throw Error(re(349));Fl&30||$3(n,e,s)}return s}function $3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D3(t,e,n,r){e.value=n,e.getSnapshot=r,U3(e)&&L3(t)}function j3(t,e,n){return n(function(){U3(e)&&L3(t)})}function U3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ci(t,n)}catch{return!0}}function L3(t){var e=qo(t,1);e!==null&&vi(e,t,1,-1)}function p2(t){var e=Ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:t},e.queue=t,t=t.dispatch=xB.bind(null,Gt,t),[e.memoizedState,t]}function $p(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function M3(){return Ws().memoizedState}function Hy(t,e,n,r){var s=Ui();Gt.flags|=t,s.memoizedState=$p(1|e,n,void 0,r===void 0?null:r)}function j0(t,e,n,r){var s=Ws();r=r===void 0?null:r;var i=void 0;if(yn!==null){var o=yn.memoizedState;if(i=o.destroy,r!==null&&hS(r,o.deps)){s.memoizedState=$p(e,n,i,r);return}}Gt.flags|=t,s.memoizedState=$p(1|e,n,i,r)}function g2(t,e){return Hy(8390656,8,t,e)}function gS(t,e){return j0(2048,8,t,e)}function B3(t,e){return j0(4,2,t,e)}function F3(t,e){return j0(4,4,t,e)}function z3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function W3(t,e,n){return n=n!=null?n.concat([t]):null,j0(4,4,z3.bind(null,e,t),n)}function mS(){}function q3(t,e){var n=Ws();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function H3(t,e){var n=Ws();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function V3(t,e,n){return Fl&21?(Ci(n,e)||(n=QR(),Gt.lanes|=n,zl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gr=!0),t.memoizedState=n)}function _B(t,e){var n=vt;vt=n!==0&&4>n?n:4,t(!0);var r=bb.transition;bb.transition={};try{t(!1),e()}finally{vt=n,bb.transition=r}}function G3(){return Ws().memoizedState}function CB(t,e,n){var r=fc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},K3(t))Y3(e,n);else if(n=N3(t,e,n,r),n!==null){var s=vr();vi(n,t,r,s),J3(n,e,r)}}function xB(t,e,n){var r=fc(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(K3(t))Y3(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ci(a,o)){var c=e.interleaved;c===null?(s.next=s,aS(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=N3(t,e,s,r),n!==null&&(s=vr(),vi(n,t,r,s),J3(n,e,r))}}function K3(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function Y3(t,e){Vf=Rw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function J3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gx(t,n)}}var $w={readContext:zs,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},SB={readContext:zs,useCallback:function(t,e){return Ui().memoizedState=[t,e===void 0?null:e],t},useContext:zs,useEffect:g2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hy(4194308,4,z3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hy(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hy(4,2,t,e)},useMemo:function(t,e){var n=Ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ui();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CB.bind(null,Gt,t),[r.memoizedState,t]},useRef:function(t){var e=Ui();return t={current:t},e.memoizedState=t},useState:p2,useDebugValue:mS,useDeferredValue:function(t){return Ui().memoizedState=t},useTransition:function(){var t=p2(!1),e=t[0];return t=_B.bind(null,t[1]),Ui().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Gt,s=Ui();if(Ft){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),kn===null)throw Error(re(349));Fl&30||$3(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,g2(j3.bind(null,r,i,t),[t]),r.flags|=2048,$p(9,D3.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ui(),e=kn.identifierPrefix;if(Ft){var n=$o,r=Ro;n=(r&~(1<<32-wi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Op++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AB={readContext:zs,useCallback:q3,useContext:zs,useEffect:gS,useImperativeHandle:W3,useInsertionEffect:B3,useLayoutEffect:F3,useMemo:H3,useReducer:Eb,useRef:M3,useState:function(){return Eb(Rp)},useDebugValue:mS,useDeferredValue:function(t){var e=Ws();return V3(e,yn.memoizedState,t)},useTransition:function(){var t=Eb(Rp)[0],e=Ws().memoizedState;return[t,e]},useMutableSource:O3,useSyncExternalStore:R3,useId:G3,unstable_isNewReconciler:!1},IB={readContext:zs,useCallback:q3,useContext:zs,useEffect:gS,useImperativeHandle:W3,useInsertionEffect:B3,useLayoutEffect:F3,useMemo:H3,useReducer:_b,useRef:M3,useState:function(){return _b(Rp)},useDebugValue:mS,useDeferredValue:function(t){var e=Ws();return yn===null?e.memoizedState=t:V3(e,yn.memoizedState,t)},useTransition:function(){var t=_b(Rp)[0],e=Ws().memoizedState;return[t,e]},useMutableSource:O3,useSyncExternalStore:R3,useId:G3,unstable_isNewReconciler:!1};function oi(t,e){if(t&&t.defaultProps){e=Kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function XE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var U0={isMounted:function(t){return(t=t._reactInternals)?uu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vr(),s=fc(t),i=jo(r,s);i.payload=e,n!=null&&(i.callback=n),e=dc(t,i,s),e!==null&&(vi(e,t,s,r),Wy(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vr(),s=fc(t),i=jo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=dc(t,i,s),e!==null&&(vi(e,t,s,r),Wy(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vr(),r=fc(t),s=jo(n,r);s.tag=2,e!=null&&(s.callback=e),e=dc(t,s,r),e!==null&&(vi(e,t,r,n),Wy(e,t,r))}};function m2(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ap(n,r)||!Ap(s,i):!0}function Q3(t,e,n){var r=!1,s=Ac,i=e.contextType;return typeof i=="object"&&i!==null?i=zs(i):(s=Jr(e)?Ml:lr.current,r=e.contextTypes,i=(r=r!=null)?Gd(t,s):Ac),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=U0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function y2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&U0.enqueueReplaceState(e,e.state,null)}function e_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},cS(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=zs(i):(i=Jr(e)?Ml:lr.current,s.context=Gd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(XE(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&U0.enqueueReplaceState(s,s.state,null),kw(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Qd(t,e){try{var n="",r=e;do n+=tM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Cb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function t_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TB=typeof WeakMap=="function"?WeakMap:Map;function Z3(t,e,n){n=jo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jw||(jw=!0,d_=r),t_(t,e)},n}function X3(t,e,n){n=jo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){t_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){t_(t,e),typeof r!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function w2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TB;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=zB.bind(null,t,e,n),e.then(t,t))}function v2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b2(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jo(-1,1),e.tag=2,dc(n,e,1))),n.lanes|=1),t)}var NB=Zo.ReactCurrentOwner,Gr=!1;function mr(t,e,n,r){e.child=t===null?T3(e,null,n,r):Yd(e,t.child,n,r)}function E2(t,e,n,r,s){n=n.render;var i=e.ref;return xd(e,s),r=fS(t,e,n,r,i,s),n=pS(),t!==null&&!Gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ho(t,e,s)):(Ft&&n&&tS(e),e.flags|=1,mr(t,e,r,s),e.child)}function _2(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!xS(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,e$(t,e,i,r,s)):(t=Yy(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ap,n(o,r)&&t.ref===e.ref)return Ho(t,e,s)}return e.flags|=1,t=pc(i,r),t.ref=e.ref,t.return=e,e.child=t}function e$(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ap(i,r)&&t.ref===e.ref)if(Gr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Gr=!0);else return e.lanes=t.lanes,Ho(t,e,s)}return n_(t,e,n,r,s)}function t$(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(md,ls),ls|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(md,ls),ls|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,kt(md,ls),ls|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,kt(md,ls),ls|=r;return mr(t,e,s,n),e.child}function n$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function n_(t,e,n,r,s){var i=Jr(n)?Ml:lr.current;return i=Gd(e,i),xd(e,s),n=fS(t,e,n,r,i,s),r=pS(),t!==null&&!Gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ho(t,e,s)):(Ft&&r&&tS(e),e.flags|=1,mr(t,e,n,s),e.child)}function C2(t,e,n,r,s){if(Jr(n)){var i=!0;Aw(e)}else i=!1;if(xd(e,s),e.stateNode===null)Vy(t,e),Q3(e,n,r),e_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=zs(l):(l=Jr(n)?Ml:lr.current,l=Gd(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&y2(e,o,r,l),Na=!1;var h=e.memoizedState;o.state=h,kw(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Yr.current||Na?(typeof u=="function"&&(XE(e,n,u,r),c=e.memoizedState),(a=Na||m2(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,P3(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:oi(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=zs(c):(c=Jr(n)?Ml:lr.current,c=Gd(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&y2(e,o,r,c),Na=!1,h=e.memoizedState,o.state=h,kw(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Yr.current||Na?(typeof f=="function"&&(XE(e,n,f,r),p=e.memoizedState),(l=Na||m2(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return r_(t,e,n,r,i,s)}function r_(t,e,n,r,s,i){n$(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&c2(e,n,!1),Ho(t,e,i);r=e.stateNode,NB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yd(e,t.child,null,i),e.child=Yd(e,null,a,i)):mr(t,e,a,i),e.memoizedState=r.state,s&&c2(e,n,!0),e.child}function r$(t){var e=t.stateNode;e.pendingContext?a2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&a2(t,e.context,!1),lS(t,e.containerInfo)}function x2(t,e,n,r,s){return Kd(),rS(s),e.flags|=256,mr(t,e,n,r),e.child}var s_={dehydrated:null,treeContext:null,retryLane:0};function i_(t){return{baseLanes:t,cachePool:null,transitions:null}}function s$(t,e,n){var r=e.pendingProps,s=Ht.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kt(Ht,s&1),t===null)return QE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=B0(o,r,0,null),t=Rl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=i_(n),e.memoizedState=s_,t):yS(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return PB(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=pc(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=pc(a,i):(i=Rl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?i_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=s_,r}return i=t.child,t=i.sibling,r=pc(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yS(t,e){return e=B0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fm(t,e,n,r){return r!==null&&rS(r),Yd(e,t.child,null,n),t=yS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PB(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Cb(Error(re(422))),Fm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=B0({mode:"visible",children:r.children},s,0,null),i=Rl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Yd(e,t.child,null,o),e.child.memoizedState=i_(o),e.memoizedState=s_,i);if(!(e.mode&1))return Fm(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(re(419)),r=Cb(i,r,void 0),Fm(t,e,o,r)}if(a=(o&t.childLanes)!==0,Gr||a){if(r=kn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qo(t,s),vi(r,t,s,-1))}return CS(),r=Cb(Error(re(421))),Fm(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=WB.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,fs=uc(s.nextSibling),ms=e,Ft=!0,di=null,t!==null&&(Us[Ls++]=Ro,Us[Ls++]=$o,Us[Ls++]=Bl,Ro=t.id,$o=t.overflow,Bl=e),e=yS(e,r.children),e.flags|=4096,e)}function S2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ZE(t.return,e,n)}function xb(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function i$(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(mr(t,e,r.children,n),r=Ht.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&S2(t,n,e);else if(t.tag===19)S2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kt(Ht,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ow(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),xb(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ow(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}xb(e,!0,n,null,i);break;case"together":xb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ho(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=pc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kB(t,e,n){switch(e.tag){case 3:r$(e),Kd();break;case 5:k3(e);break;case 1:Jr(e.type)&&Aw(e);break;case 4:lS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;kt(Nw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kt(Ht,Ht.current&1),e.flags|=128,null):n&e.child.childLanes?s$(t,e,n):(kt(Ht,Ht.current&1),t=Ho(t,e,n),t!==null?t.sibling:null);kt(Ht,Ht.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return i$(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kt(Ht,Ht.current),r)break;return null;case 22:case 23:return e.lanes=0,t$(t,e,n)}return Ho(t,e,n)}var o$,o_,a$,c$;o$=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};o_=function(){};a$=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fl(Ji.current);var i=null;switch(n){case"input":s=TE(t,s),r=TE(t,r),i=[];break;case"select":s=Kt({},s,{value:void 0}),r=Kt({},r,{value:void 0}),i=[];break;case"textarea":s=kE(t,s),r=kE(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xw)}RE(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vp.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(vp.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&jt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};c$=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gh(t,e){if(!Ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function OB(t,e,n){var r=e.pendingProps;switch(nS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return Jr(e.type)&&Sw(),Zn(e),null;case 3:return r=e.stateNode,Jd(),Mt(Yr),Mt(lr),dS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Mm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,di!==null&&(p_(di),di=null))),o_(t,e),Zn(e),null;case 5:uS(e);var s=fl(kp.current);if(n=e.type,t!==null&&e.stateNode!=null)a$(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return Zn(e),null}if(t=fl(Ji.current),Mm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Vi]=e,r[Np]=i,t=(e.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(s=0;s<If.length;s++)jt(If[s],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":$I(r,i),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},jt("invalid",r);break;case"textarea":jI(r,i),jt("invalid",r)}RE(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Lm(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Lm(r.textContent,a,t),s=["children",""+a]):vp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&jt("scroll",r)}switch(n){case"input":Pm(r),DI(r,i,!0);break;case"textarea":Pm(r),UI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vi]=e,t[Np]=r,o$(t,e,!1,!1),e.stateNode=t;e:{switch(o=$E(n,r),n){case"dialog":jt("cancel",t),jt("close",t),s=r;break;case"iframe":case"object":case"embed":jt("load",t),s=r;break;case"video":case"audio":for(s=0;s<If.length;s++)jt(If[s],t);s=r;break;case"source":jt("error",t),s=r;break;case"img":case"image":case"link":jt("error",t),jt("load",t),s=r;break;case"details":jt("toggle",t),s=r;break;case"input":$I(t,r),s=TE(t,r),jt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Kt({},r,{value:void 0}),jt("invalid",t);break;case"textarea":jI(t,r),s=kE(t,r),jt("invalid",t);break;default:s=r}RE(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?MR(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&UR(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&bp(t,c):typeof c=="number"&&bp(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&jt("scroll",t):c!=null&&Fx(t,i,c,o))}switch(n){case"input":Pm(t),DI(t,r,!1);break;case"textarea":Pm(t),UI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sc(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?bd(t,!!r.multiple,i,!1):r.defaultValue!=null&&bd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)c$(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=fl(kp.current),fl(Ji.current),Mm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vi]=e,(i=r.nodeValue!==n)&&(t=ms,t!==null))switch(t.tag){case 3:Lm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lm(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vi]=e,e.stateNode=r}return Zn(e),null;case 13:if(Mt(Ht),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ft&&fs!==null&&e.mode&1&&!(e.flags&128))A3(),Kd(),e.flags|=98560,i=!1;else if(i=Mm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[Vi]=e}else Kd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),i=!1}else di!==null&&(p_(di),di=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ht.current&1?bn===0&&(bn=3):CS())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return Jd(),o_(t,e),t===null&&Ip(e.stateNode.containerInfo),Zn(e),null;case 10:return oS(e.type._context),Zn(e),null;case 17:return Jr(e.type)&&Sw(),Zn(e),null;case 19:if(Mt(Ht),i=e.memoizedState,i===null)return Zn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Gh(i,!1);else{if(bn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ow(t),o!==null){for(e.flags|=128,Gh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt(Ht,Ht.current&1|2),e.child}t=t.sibling}i.tail!==null&&sn()>Zd&&(e.flags|=128,r=!0,Gh(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ow(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ft)return Zn(e),null}else 2*sn()-i.renderingStartTime>Zd&&n!==1073741824&&(e.flags|=128,r=!0,Gh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=sn(),e.sibling=null,n=Ht.current,kt(Ht,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return _S(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ls&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function RB(t,e){switch(nS(e),e.tag){case 1:return Jr(e.type)&&Sw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jd(),Mt(Yr),Mt(lr),dS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uS(e),null;case 13:if(Mt(Ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Kd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mt(Ht),null;case 4:return Jd(),null;case 10:return oS(e.type._context),null;case 22:case 23:return _S(),null;case 24:return null;default:return null}}var zm=!1,cr=!1,$B=typeof WeakSet=="function"?WeakSet:Set,_e=null;function gd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xt(t,e,r)}else n.current=null}function a_(t,e,n){try{n()}catch(r){Xt(t,e,r)}}var A2=!1;function DB(t,e){if(qE=Ew,t=f3(),eS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(HE={focusedElem:t,selectionRange:n},Ew=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:oi(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(_){Xt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return p=A2,A2=!1,p}function Gf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&a_(e,n,i)}s=s.next}while(s!==r)}}function L0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function c_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function l$(t){var e=t.alternate;e!==null&&(t.alternate=null,l$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vi],delete e[Np],delete e[KE],delete e[yB],delete e[wB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function u$(t){return t.tag===5||t.tag===3||t.tag===4}function I2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||u$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function l_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xw));else if(r!==4&&(t=t.child,t!==null))for(l_(t,e,n),t=t.sibling;t!==null;)l_(t,e,n),t=t.sibling}function u_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(u_(t,e,n),t=t.sibling;t!==null;)u_(t,e,n),t=t.sibling}var Fn=null,li=!1;function ia(t,e,n){for(n=n.child;n!==null;)d$(t,e,n),n=n.sibling}function d$(t,e,n){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(P0,n)}catch{}switch(n.tag){case 5:cr||gd(n,e);case 6:var r=Fn,s=li;Fn=null,ia(t,e,n),Fn=r,li=s,Fn!==null&&(li?(t=Fn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fn.removeChild(n.stateNode));break;case 18:Fn!==null&&(li?(t=Fn,n=n.stateNode,t.nodeType===8?yb(t.parentNode,n):t.nodeType===1&&yb(t,n),xp(t)):yb(Fn,n.stateNode));break;case 4:r=Fn,s=li,Fn=n.stateNode.containerInfo,li=!0,ia(t,e,n),Fn=r,li=s;break;case 0:case 11:case 14:case 15:if(!cr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&a_(n,e,o),s=s.next}while(s!==r)}ia(t,e,n);break;case 1:if(!cr&&(gd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xt(n,e,a)}ia(t,e,n);break;case 21:ia(t,e,n);break;case 22:n.mode&1?(cr=(r=cr)||n.memoizedState!==null,ia(t,e,n),cr=r):ia(t,e,n);break;default:ia(t,e,n)}}function T2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $B),e.forEach(function(r){var s=qB.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Js(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Fn=a.stateNode,li=!1;break e;case 3:Fn=a.stateNode.containerInfo,li=!0;break e;case 4:Fn=a.stateNode.containerInfo,li=!0;break e}a=a.return}if(Fn===null)throw Error(re(160));d$(i,o,s),Fn=null,li=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Xt(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)h$(e,t),e=e.sibling}function h$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Js(e,t),Pi(t),r&4){try{Gf(3,t,t.return),L0(3,t)}catch(g){Xt(t,t.return,g)}try{Gf(5,t,t.return)}catch(g){Xt(t,t.return,g)}}break;case 1:Js(e,t),Pi(t),r&512&&n!==null&&gd(n,n.return);break;case 5:if(Js(e,t),Pi(t),r&512&&n!==null&&gd(n,n.return),t.flags&32){var s=t.stateNode;try{bp(s,"")}catch(g){Xt(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&$R(s,i),$E(a,o);var l=$E(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?MR(s,d):u==="dangerouslySetInnerHTML"?UR(s,d):u==="children"?bp(s,d):Fx(s,u,d,l)}switch(a){case"input":NE(s,i);break;case"textarea":DR(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?bd(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?bd(s,!!i.multiple,i.defaultValue,!0):bd(s,!!i.multiple,i.multiple?[]:"",!1))}s[Np]=i}catch(g){Xt(t,t.return,g)}}break;case 6:if(Js(e,t),Pi(t),r&4){if(t.stateNode===null)throw Error(re(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Xt(t,t.return,g)}}break;case 3:if(Js(e,t),Pi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xp(e.containerInfo)}catch(g){Xt(t,t.return,g)}break;case 4:Js(e,t),Pi(t);break;case 13:Js(e,t),Pi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bS=sn())),r&4&&T2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(cr=(l=cr)||u,Js(e,t),cr=l):Js(e,t),Pi(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(_e=t,u=t.child;u!==null;){for(d=_e=u;_e!==null;){switch(h=_e,f=h.child,h.tag){case 0:case 11:case 14:case 15:Gf(4,h,h.return);break;case 1:gd(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Xt(r,n,g)}}break;case 5:gd(h,h.return);break;case 22:if(h.memoizedState!==null){P2(d);continue}}f!==null?(f.return=h,_e=f):P2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=LR("display",o))}catch(g){Xt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Xt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Js(e,t),Pi(t),r&4&&T2(t);break;case 21:break;default:Js(e,t),Pi(t)}}function Pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(u$(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bp(s,""),r.flags&=-33);var i=I2(t);u_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=I2(t);l_(t,a,o);break;default:throw Error(re(161))}}catch(c){Xt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jB(t,e,n){_e=t,f$(t)}function f$(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||zm;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||cr;a=zm;var l=cr;if(zm=o,(cr=c)&&!l)for(_e=s;_e!==null;)o=_e,c=o.child,o.tag===22&&o.memoizedState!==null?k2(s):c!==null?(c.return=o,_e=c):k2(s);for(;i!==null;)_e=i,f$(i),i=i.sibling;_e=s,zm=a,cr=l}N2(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):N2(t)}}function N2(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cr||L0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:oi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&f2(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}f2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&xp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}cr||e.flags&512&&c_(e)}catch(h){Xt(e,e.return,h)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function P2(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function k2(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{L0(4,e)}catch(c){Xt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Xt(e,s,c)}}var i=e.return;try{c_(e)}catch(c){Xt(e,i,c)}break;case 5:var o=e.return;try{c_(e)}catch(c){Xt(e,o,c)}}}catch(c){Xt(e,e.return,c)}if(e===t){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var UB=Math.ceil,Dw=Zo.ReactCurrentDispatcher,wS=Zo.ReactCurrentOwner,Fs=Zo.ReactCurrentBatchConfig,rt=0,kn=null,dn=null,Wn=0,ls=0,md=Uc(0),bn=0,Dp=null,zl=0,M0=0,vS=0,Kf=null,Hr=null,bS=0,Zd=1/0,xo=null,jw=!1,d_=null,hc=null,Wm=!1,ec=null,Uw=0,Yf=0,h_=null,Gy=-1,Ky=0;function vr(){return rt&6?sn():Gy!==-1?Gy:Gy=sn()}function fc(t){return t.mode&1?rt&2&&Wn!==0?Wn&-Wn:bB.transition!==null?(Ky===0&&(Ky=QR()),Ky):(t=vt,t!==0||(t=window.event,t=t===void 0?16:s3(t.type)),t):1}function vi(t,e,n,r){if(50<Yf)throw Yf=0,h_=null,Error(re(185));qg(t,n,r),(!(rt&2)||t!==kn)&&(t===kn&&(!(rt&2)&&(M0|=n),bn===4&&La(t,Wn)),Qr(t,r),n===1&&rt===0&&!(e.mode&1)&&(Zd=sn()+500,D0&&Lc()))}function Qr(t,e){var n=t.callbackNode;bM(t,e);var r=bw(t,t===kn?Wn:0);if(r===0)n!==null&&BI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&BI(n),e===1)t.tag===0?vB(O2.bind(null,t)):C3(O2.bind(null,t)),gB(function(){!(rt&6)&&Lc()}),n=null;else{switch(ZR(r)){case 1:n=Vx;break;case 4:n=YR;break;case 16:n=vw;break;case 536870912:n=JR;break;default:n=vw}n=E$(n,p$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p$(t,e){if(Gy=-1,Ky=0,rt&6)throw Error(re(327));var n=t.callbackNode;if(Sd()&&t.callbackNode!==n)return null;var r=bw(t,t===kn?Wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lw(t,r);else{e=r;var s=rt;rt|=2;var i=m$();(kn!==t||Wn!==e)&&(xo=null,Zd=sn()+500,Ol(t,e));do try{BB();break}catch(a){g$(t,a)}while(!0);iS(),Dw.current=i,rt=s,dn!==null?e=0:(kn=null,Wn=0,e=bn)}if(e!==0){if(e===2&&(s=ME(t),s!==0&&(r=s,e=f_(t,s))),e===1)throw n=Dp,Ol(t,0),La(t,r),Qr(t,sn()),n;if(e===6)La(t,r);else{if(s=t.current.alternate,!(r&30)&&!LB(s)&&(e=Lw(t,r),e===2&&(i=ME(t),i!==0&&(r=i,e=f_(t,i))),e===1))throw n=Dp,Ol(t,0),La(t,r),Qr(t,sn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:nl(t,Hr,xo);break;case 3:if(La(t,r),(r&130023424)===r&&(e=bS+500-sn(),10<e)){if(bw(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=GE(nl.bind(null,t,Hr,xo),e);break}nl(t,Hr,xo);break;case 4:if(La(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-wi(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UB(r/1960))-r,10<r){t.timeoutHandle=GE(nl.bind(null,t,Hr,xo),r);break}nl(t,Hr,xo);break;case 5:nl(t,Hr,xo);break;default:throw Error(re(329))}}}return Qr(t,sn()),t.callbackNode===n?p$.bind(null,t):null}function f_(t,e){var n=Kf;return t.current.memoizedState.isDehydrated&&(Ol(t,e).flags|=256),t=Lw(t,e),t!==2&&(e=Hr,Hr=n,e!==null&&p_(e)),t}function p_(t){Hr===null?Hr=t:Hr.push.apply(Hr,t)}function LB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ci(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function La(t,e){for(e&=~vS,e&=~M0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wi(e),r=1<<n;t[n]=-1,e&=~r}}function O2(t){if(rt&6)throw Error(re(327));Sd();var e=bw(t,0);if(!(e&1))return Qr(t,sn()),null;var n=Lw(t,e);if(t.tag!==0&&n===2){var r=ME(t);r!==0&&(e=r,n=f_(t,r))}if(n===1)throw n=Dp,Ol(t,0),La(t,e),Qr(t,sn()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,nl(t,Hr,xo),Qr(t,sn()),null}function ES(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(Zd=sn()+500,D0&&Lc())}}function Wl(t){ec!==null&&ec.tag===0&&!(rt&6)&&Sd();var e=rt;rt|=1;var n=Fs.transition,r=vt;try{if(Fs.transition=null,vt=1,t)return t()}finally{vt=r,Fs.transition=n,rt=e,!(rt&6)&&Lc()}}function _S(){ls=md.current,Mt(md)}function Ol(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pB(n)),dn!==null)for(n=dn.return;n!==null;){var r=n;switch(nS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sw();break;case 3:Jd(),Mt(Yr),Mt(lr),dS();break;case 5:uS(r);break;case 4:Jd();break;case 13:Mt(Ht);break;case 19:Mt(Ht);break;case 10:oS(r.type._context);break;case 22:case 23:_S()}n=n.return}if(kn=t,dn=t=pc(t.current,null),Wn=ls=e,bn=0,Dp=null,vS=M0=zl=0,Hr=Kf=null,hl!==null){for(e=0;e<hl.length;e++)if(n=hl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}hl=null}return t}function g$(t,e){do{var n=dn;try{if(iS(),qy.current=$w,Rw){for(var r=Gt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Rw=!1}if(Fl=0,In=yn=Gt=null,Vf=!1,Op=0,wS.current=null,n===null||n.return===null){bn=1,Dp=e,dn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Wn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=v2(o);if(f!==null){f.flags&=-257,b2(f,o,a,i,e),f.mode&1&&w2(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){w2(i,l,e),CS();break e}c=Error(re(426))}}else if(Ft&&a.mode&1){var w=v2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),b2(w,o,a,i,e),rS(Qd(c,a));break e}}i=c=Qd(c,a),bn!==4&&(bn=2),Kf===null?Kf=[i]:Kf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Z3(i,c,e);h2(i,y);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(hc===null||!hc.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=X3(i,a,e);h2(i,_);break e}}i=i.return}while(i!==null)}w$(n)}catch(E){e=E,dn===n&&n!==null&&(dn=n=n.return);continue}break}while(!0)}function m$(){var t=Dw.current;return Dw.current=$w,t===null?$w:t}function CS(){(bn===0||bn===3||bn===2)&&(bn=4),kn===null||!(zl&268435455)&&!(M0&268435455)||La(kn,Wn)}function Lw(t,e){var n=rt;rt|=2;var r=m$();(kn!==t||Wn!==e)&&(xo=null,Ol(t,e));do try{MB();break}catch(s){g$(t,s)}while(!0);if(iS(),rt=n,Dw.current=r,dn!==null)throw Error(re(261));return kn=null,Wn=0,bn}function MB(){for(;dn!==null;)y$(dn)}function BB(){for(;dn!==null&&!dM();)y$(dn)}function y$(t){var e=b$(t.alternate,t,ls);t.memoizedProps=t.pendingProps,e===null?w$(t):dn=e,wS.current=null}function w$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RB(n,e),n!==null){n.flags&=32767,dn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bn=6,dn=null;return}}else if(n=OB(n,e,ls),n!==null){dn=n;return}if(e=e.sibling,e!==null){dn=e;return}dn=e=t}while(e!==null);bn===0&&(bn=5)}function nl(t,e,n){var r=vt,s=Fs.transition;try{Fs.transition=null,vt=1,FB(t,e,n,r)}finally{Fs.transition=s,vt=r}return null}function FB(t,e,n,r){do Sd();while(ec!==null);if(rt&6)throw Error(re(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(EM(t,i),t===kn&&(dn=kn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wm||(Wm=!0,E$(vw,function(){return Sd(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fs.transition,Fs.transition=null;var o=vt;vt=1;var a=rt;rt|=4,wS.current=null,DB(t,n),h$(n,t),aB(HE),Ew=!!qE,HE=qE=null,t.current=n,jB(n),hM(),rt=a,vt=o,Fs.transition=i}else t.current=n;if(Wm&&(Wm=!1,ec=t,Uw=s),i=t.pendingLanes,i===0&&(hc=null),gM(n.stateNode),Qr(t,sn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jw)throw jw=!1,t=d_,d_=null,t;return Uw&1&&t.tag!==0&&Sd(),i=t.pendingLanes,i&1?t===h_?Yf++:(Yf=0,h_=t):Yf=0,Lc(),null}function Sd(){if(ec!==null){var t=ZR(Uw),e=Fs.transition,n=vt;try{if(Fs.transition=null,vt=16>t?16:t,ec===null)var r=!1;else{if(t=ec,ec=null,Uw=0,rt&6)throw Error(re(331));var s=rt;for(rt|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(_e=l;_e!==null;){var u=_e;switch(u.tag){case 0:case 11:case 15:Gf(8,u,i)}var d=u.child;if(d!==null)d.return=u,_e=d;else for(;_e!==null;){u=_e;var h=u.sibling,f=u.return;if(l$(u),u===l){_e=null;break}if(h!==null){h.return=f,_e=h;break}_e=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Gf(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,_e=y;break e}_e=i.return}}var b=t.current;for(_e=b;_e!==null;){o=_e;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,_e=v;else e:for(o=b;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:L0(9,a)}}catch(E){Xt(a,a.return,E)}if(a===o){_e=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,_e=_;break e}_e=a.return}}if(rt=s,Lc(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(P0,t)}catch{}r=!0}return r}finally{vt=n,Fs.transition=e}}return!1}function R2(t,e,n){e=Qd(n,e),e=Z3(t,e,1),t=dc(t,e,1),e=vr(),t!==null&&(qg(t,1,e),Qr(t,e))}function Xt(t,e,n){if(t.tag===3)R2(t,t,n);else for(;e!==null;){if(e.tag===3){R2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hc===null||!hc.has(r))){t=Qd(n,t),t=X3(e,t,1),e=dc(e,t,1),t=vr(),e!==null&&(qg(e,1,t),Qr(e,t));break}}e=e.return}}function zB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vr(),t.pingedLanes|=t.suspendedLanes&n,kn===t&&(Wn&n)===n&&(bn===4||bn===3&&(Wn&130023424)===Wn&&500>sn()-bS?Ol(t,0):vS|=n),Qr(t,e)}function v$(t,e){e===0&&(t.mode&1?(e=Rm,Rm<<=1,!(Rm&130023424)&&(Rm=4194304)):e=1);var n=vr();t=qo(t,e),t!==null&&(qg(t,e,n),Qr(t,n))}function WB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),v$(t,n)}function qB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),v$(t,n)}var b$;b$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yr.current)Gr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gr=!1,kB(t,e,n);Gr=!!(t.flags&131072)}else Gr=!1,Ft&&e.flags&1048576&&x3(e,Tw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vy(t,e),t=e.pendingProps;var s=Gd(e,lr.current);xd(e,n),s=fS(null,e,r,t,s,n);var i=pS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jr(r)?(i=!0,Aw(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cS(e),s.updater=U0,e.stateNode=s,s._reactInternals=e,e_(e,r,t,n),e=r_(null,e,r,!0,i,n)):(e.tag=0,Ft&&i&&tS(e),mr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vy(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=VB(r),t=oi(r,t),s){case 0:e=n_(null,e,r,t,n);break e;case 1:e=C2(null,e,r,t,n);break e;case 11:e=E2(null,e,r,t,n);break e;case 14:e=_2(null,e,r,oi(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:oi(r,s),n_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:oi(r,s),C2(t,e,r,s,n);case 3:e:{if(r$(e),t===null)throw Error(re(387));r=e.pendingProps,i=e.memoizedState,s=i.element,P3(t,e),kw(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Qd(Error(re(423)),e),e=x2(t,e,r,n,s);break e}else if(r!==s){s=Qd(Error(re(424)),e),e=x2(t,e,r,n,s);break e}else for(fs=uc(e.stateNode.containerInfo.firstChild),ms=e,Ft=!0,di=null,n=T3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kd(),r===s){e=Ho(t,e,n);break e}mr(t,e,r,n)}e=e.child}return e;case 5:return k3(e),t===null&&QE(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,VE(r,s)?o=null:i!==null&&VE(r,i)&&(e.flags|=32),n$(t,e),mr(t,e,o,n),e.child;case 6:return t===null&&QE(e),null;case 13:return s$(t,e,n);case 4:return lS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yd(e,null,r,n):mr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:oi(r,s),E2(t,e,r,s,n);case 7:return mr(t,e,e.pendingProps,n),e.child;case 8:return mr(t,e,e.pendingProps.children,n),e.child;case 12:return mr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,kt(Nw,r._currentValue),r._currentValue=o,i!==null)if(Ci(i.value,o)){if(i.children===s.children&&!Yr.current){e=Ho(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=jo(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ZE(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(re(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ZE(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}mr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xd(e,n),s=zs(s),r=r(s),e.flags|=1,mr(t,e,r,n),e.child;case 14:return r=e.type,s=oi(r,e.pendingProps),s=oi(r.type,s),_2(t,e,r,s,n);case 15:return e$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:oi(r,s),Vy(t,e),e.tag=1,Jr(r)?(t=!0,Aw(e)):t=!1,xd(e,n),Q3(e,r,s),e_(e,r,s,n),r_(null,e,r,!0,t,n);case 19:return i$(t,e,n);case 22:return t$(t,e,n)}throw Error(re(156,e.tag))};function E$(t,e){return KR(t,e)}function HB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(t,e,n,r){return new HB(t,e,n,r)}function xS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VB(t){if(typeof t=="function")return xS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wx)return 11;if(t===qx)return 14}return 2}function pc(t,e){var n=t.alternate;return n===null?(n=Ms(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yy(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")xS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case od:return Rl(n.children,s,i,e);case zx:o=8,s|=8;break;case xE:return t=Ms(12,n,e,s|2),t.elementType=xE,t.lanes=i,t;case SE:return t=Ms(13,n,e,s),t.elementType=SE,t.lanes=i,t;case AE:return t=Ms(19,n,e,s),t.elementType=AE,t.lanes=i,t;case kR:return B0(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case NR:o=10;break e;case PR:o=9;break e;case Wx:o=11;break e;case qx:o=14;break e;case Ta:o=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Ms(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Rl(t,e,n,r){return t=Ms(7,t,r,e),t.lanes=n,t}function B0(t,e,n,r){return t=Ms(22,t,r,e),t.elementType=kR,t.lanes=n,t.stateNode={isHidden:!1},t}function Sb(t,e,n){return t=Ms(6,t,null,e),t.lanes=n,t}function Ab(t,e,n){return e=Ms(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GB(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ob(0),this.expirationTimes=ob(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ob(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function SS(t,e,n,r,s,i,o,a,c){return t=new GB(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ms(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cS(i),t}function KB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:id,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _$(t){if(!t)return Ac;t=t._reactInternals;e:{if(uu(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(Jr(n))return _3(t,n,e)}return e}function C$(t,e,n,r,s,i,o,a,c){return t=SS(n,r,!0,t,s,i,o,a,c),t.context=_$(null),n=t.current,r=vr(),s=fc(n),i=jo(r,s),i.callback=e??null,dc(n,i,s),t.current.lanes=s,qg(t,s,r),Qr(t,r),t}function F0(t,e,n,r){var s=e.current,i=vr(),o=fc(s);return n=_$(n),e.context===null?e.context=n:e.pendingContext=n,e=jo(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dc(s,e,o),t!==null&&(vi(t,s,o,i),Wy(t,s,o)),o}function Mw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function AS(t,e){$2(t,e),(t=t.alternate)&&$2(t,e)}function YB(){return null}var x$=typeof reportError=="function"?reportError:function(t){console.error(t)};function IS(t){this._internalRoot=t}z0.prototype.render=IS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));F0(t,e,null,null)};z0.prototype.unmount=IS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wl(function(){F0(null,t,null,null)}),e[Wo]=null}};function z0(t){this._internalRoot=t}z0.prototype.unstable_scheduleHydration=function(t){if(t){var e=t3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ua.length&&e!==0&&e<Ua[n].priority;n++);Ua.splice(n,0,t),n===0&&r3(t)}};function TS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function W0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function D2(){}function JB(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Mw(o);i.call(l)}}var o=C$(e,r,t,0,null,!1,!1,"",D2);return t._reactRootContainer=o,t[Wo]=o.current,Ip(t.nodeType===8?t.parentNode:t),Wl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Mw(c);a.call(l)}}var c=SS(t,0,!1,null,null,!1,!1,"",D2);return t._reactRootContainer=c,t[Wo]=c.current,Ip(t.nodeType===8?t.parentNode:t),Wl(function(){F0(e,c,n,r)}),c}function q0(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Mw(o);a.call(c)}}F0(e,o,t,s)}else o=JB(n,e,t,s,r);return Mw(o)}XR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Af(e.pendingLanes);n!==0&&(Gx(e,n|1),Qr(e,sn()),!(rt&6)&&(Zd=sn()+500,Lc()))}break;case 13:Wl(function(){var r=qo(t,1);if(r!==null){var s=vr();vi(r,t,1,s)}}),AS(t,1)}};Kx=function(t){if(t.tag===13){var e=qo(t,134217728);if(e!==null){var n=vr();vi(e,t,134217728,n)}AS(t,134217728)}};e3=function(t){if(t.tag===13){var e=fc(t),n=qo(t,e);if(n!==null){var r=vr();vi(n,t,e,r)}AS(t,e)}};t3=function(){return vt};n3=function(t,e){var n=vt;try{return vt=t,e()}finally{vt=n}};jE=function(t,e,n){switch(e){case"input":if(NE(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=$0(r);if(!s)throw Error(re(90));RR(r),NE(r,s)}}}break;case"textarea":DR(t,n);break;case"select":e=n.value,e!=null&&bd(t,!!n.multiple,e,!1)}};zR=ES;WR=Wl;var QB={usingClientEntryPoint:!1,Events:[Vg,ud,$0,BR,FR,ES]},Kh={findFiberByHostInstance:dl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZB={bundleType:Kh.bundleType,version:Kh.version,rendererPackageName:Kh.rendererPackageName,rendererConfig:Kh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VR(t),t===null?null:t.stateNode},findFiberByHostInstance:Kh.findFiberByHostInstance||YB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qm.isDisabled&&qm.supportsFiber)try{P0=qm.inject(ZB),Yi=qm}catch{}}Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QB;Es.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TS(e))throw Error(re(200));return KB(t,e,null,n)};Es.createRoot=function(t,e){if(!TS(t))throw Error(re(299));var n=!1,r="",s=x$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=SS(t,1,!1,null,null,n,!1,r,s),t[Wo]=e.current,Ip(t.nodeType===8?t.parentNode:t),new IS(e)};Es.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=VR(e),t=t===null?null:t.stateNode,t};Es.flushSync=function(t){return Wl(t)};Es.hydrate=function(t,e,n){if(!W0(e))throw Error(re(200));return q0(null,t,e,!0,n)};Es.hydrateRoot=function(t,e,n){if(!TS(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=x$;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=C$(e,null,t,1,n??null,s,!1,i,o),t[Wo]=e.current,Ip(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new z0(e)};Es.render=function(t,e,n){if(!W0(e))throw Error(re(200));return q0(null,t,e,!1,n)};Es.unmountComponentAtNode=function(t){if(!W0(t))throw Error(re(40));return t._reactRootContainer?(Wl(function(){q0(null,null,t,!1,function(){t._reactRootContainer=null,t[Wo]=null})}),!0):!1};Es.unstable_batchedUpdates=ES;Es.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!W0(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return q0(t,e,n,!1,r)};Es.version="18.3.1-next-f1338f8080-20240426";function S$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S$)}catch(t){console.error(t)}}S$(),SR.exports=Es;var NS=SR.exports,j2=NS;_E.createRoot=j2.createRoot,_E.hydrateRoot=j2.hydrateRoot;const A$="2.31.4";let Yh={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${A$}`},ee=class g_ extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof g_?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof g_&&n.cause.docsPath||n.docsPath,i=(a=Yh.getDocsUrl)==null?void 0:a.call(Yh,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Yh.version?[`Version: ${Yh.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=A$}walk(e){return I$(this,e)}};function I$(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?I$(t.cause,e):e?null:t}let T$=class extends ee{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class XB extends ee{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let eF=class extends ee{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class N$ extends ee{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let P$=class extends ee{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class U2 extends ee{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function yh(t,{dir:e,size:n=32}={}){return typeof t=="string"?gc(t,{dir:e,size:n}):tF(t,{dir:e,size:n})}function gc(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new P$({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function tF(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new P$({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Vo(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function an(t){return Vo(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function wh(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const nF=new TextEncoder;function H0(t,e={}){return typeof t=="number"||typeof t=="bigint"?sF(t,e):typeof t=="boolean"?rF(t,e):Vo(t)?to(t,e):Ad(t,e)}function rF(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ai(n,{size:e.size}),yh(n,{size:e.size})):n}const lo={zero:48,nine:57,A:65,F:70,a:97,f:102};function L2(t){if(t>=lo.zero&&t<=lo.nine)return t-lo.zero;if(t>=lo.A&&t<=lo.F)return t-(lo.A-10);if(t>=lo.a&&t<=lo.f)return t-(lo.a-10)}function to(t,e={}){let n=t;e.size&&(Ai(n,{size:e.size}),n=yh(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=L2(r.charCodeAt(a++)),l=L2(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ee(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function sF(t,e){const n=je(t,e);return to(n)}function Ad(t,e={}){const n=nF.encode(t);return typeof e.size=="number"?(Ai(n,{size:e.size}),yh(n,{dir:"right",size:e.size})):n}function Ai(t,{size:e}){if(an(t)>e)throw new eF({givenSize:an(t),maxSize:e})}function Go(t,e={}){const{signed:n}=e;e.size&&Ai(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Ko(t,e={}){return Number(Go(t,e))}function k$(t,e={}){let n=to(t);return e.size&&(Ai(n,{size:e.size}),n=wh(n,{dir:"right"})),new TextDecoder().decode(n)}const iF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ql(t,e={}){return typeof t=="number"||typeof t=="bigint"?je(t,e):typeof t=="string"?V0(t,e):typeof t=="boolean"?O$(t,e):Cr(t,e)}function O$(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ai(n,{size:e.size}),yh(n,{size:e.size})):n}function Cr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=iF[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ai(r,{size:e.size}),yh(r,{dir:"right",size:e.size})):r}function je(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new T$({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?yh(a,{size:r}):a}const oF=new TextEncoder;function V0(t,e={}){const n=oF.encode(t);return Cr(n,e)}async function aF(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:je(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Ic(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new bF(t.type);return`${t.name}(${G0(t.inputs,{includeName:e})})`}function G0(t,{includeName:e=!1}={}){return t?t.map(n=>cF(n,{includeName:e})).join(e?", ":","):""}function cF(t,{includeName:e}){return t.type.startsWith("tuple")?`(${G0(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class lF extends ee{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class M2 extends ee{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class R$ extends ee{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${G0(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class K0 extends ee{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class uF extends ee{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class dF extends ee{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${an(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class hF extends ee{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class lCe extends ee{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class uCe extends ee{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class $$ extends ee{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class fF extends ee{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class D$ extends ee{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Bw extends ee{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class pF extends ee{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class dCe extends ee{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class gF extends ee{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Ic(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Ic(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class mF extends ee{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class m_ extends ee{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${G0(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class j$ extends ee{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ic(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class yF extends ee{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class wF extends ee{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class vF extends ee{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class bF extends ee{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Tc(t){return typeof t[0]=="string"?Y0(t):EF(t)}function EF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Y0(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class Nc extends ee{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let J0=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Hm=BigInt(2**32-1),B2=BigInt(32);function _F(t,e=!1){return e?{h:Number(t&Hm),l:Number(t>>B2&Hm)}:{h:Number(t>>B2&Hm)|0,l:Number(t&Hm)|0}}function CF(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=_F(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const xF=(t,e,n)=>t<<n|e>>>32-n,SF=(t,e,n)=>e<<n|t>>>32-n,AF=(t,e,n)=>e<<n-32|t>>>64-n,IF=(t,e,n)=>t<<n-32|e>>>64-n,Su=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function TF(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Hl(t,...e){if(!TF(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function fCe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Fw(t.outputLen),Fw(t.blockLen)}function zw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function U$(t,e){Hl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function NF(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function jp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ib(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ki(t,e){return t<<32-e|t>>>e}const PF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function kF(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function OF(t){for(let e=0;e<t.length;e++)t[e]=kF(t[e]);return t}const F2=PF?t=>t:OF,L$=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",RF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pCe(t){if(Hl(t),L$)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=RF[t[n]];return e}const uo={_0:48,_9:57,A:65,F:70,a:97,f:102};function z2(t){if(t>=uo._0&&t<=uo._9)return t-uo._0;if(t>=uo.A&&t<=uo.F)return t-(uo.A-10);if(t>=uo.a&&t<=uo.f)return t-(uo.a-10)}function gCe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(L$)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=z2(t.charCodeAt(i)),a=z2(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function $F(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Q0(t){return typeof t=="string"&&(t=$F(t)),Hl(t),t}function mCe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Hl(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class M${}function B$(t){const e=r=>t().update(Q0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function DF(t){const e=(r,s)=>t(s).update(Q0(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function yCe(t=32){if(Su&&typeof Su.getRandomValues=="function")return Su.getRandomValues(new Uint8Array(t));if(Su&&typeof Su.randomBytes=="function")return Uint8Array.from(Su.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const jF=BigInt(0),Jh=BigInt(1),UF=BigInt(2),LF=BigInt(7),MF=BigInt(256),BF=BigInt(113),F$=[],z$=[],W$=[];for(let t=0,e=Jh,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],F$.push(2*(5*r+n)),z$.push((t+1)*(t+2)/2%64);let s=jF;for(let i=0;i<7;i++)e=(e<<Jh^(e>>LF)*BF)%MF,e&UF&&(s^=Jh<<(Jh<<BigInt(i))-Jh);W$.push(s)}const q$=CF(W$,!0),FF=q$[0],zF=q$[1],W2=(t,e,n)=>n>32?AF(t,e,n):xF(t,e,n),q2=(t,e,n)=>n>32?IF(t,e,n):SF(t,e,n);function H$(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=W2(l,u,1)^n[a],h=q2(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=z$[o],c=W2(s,i,a),l=q2(s,i,a),u=F$[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=FF[r],t[1]^=zF[r]}jp(n)}class Kg extends M${constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Fw(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=NF(this.state)}clone(){return this._cloneInto()}keccak(){F2(this.state32),H$(this.state32,this.rounds),F2(this.state32),this.posOut=0,this.pos=0}update(e){zw(this),e=Q0(e),Hl(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){zw(this,!1),Hl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Fw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(U$(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,jp(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Kg(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Mc=(t,e,n)=>B$(()=>new Kg(e,t,n)),WF=Mc(6,144,224/8),qF=Mc(6,136,256/8),HF=Mc(6,104,384/8),VF=Mc(6,72,512/8),GF=Mc(1,144,224/8),PS=Mc(1,136,256/8),KF=Mc(1,104,384/8),YF=Mc(1,72,512/8),V$=(t,e,n)=>DF((r={})=>new Kg(e,t,r.dkLen===void 0?n:r.dkLen,!0)),JF=V$(31,168,128/8),QF=V$(31,136,256/8),wCe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Kg,keccakP:H$,keccak_224:GF,keccak_256:PS,keccak_384:KF,keccak_512:YF,sha3_224:WF,sha3_256:qF,sha3_384:HF,sha3_512:VF,shake128:JF,shake256:QF},Symbol.toStringTag,{value:"Module"}));function vh(t,e){const n=e||"hex",r=PS(Vo(t,{strict:!1})?H0(t):t);return n==="bytes"?r:ql(r)}const Tb=new J0(8192);function Yg(t,e){if(Tb.has(`${t}.${e}`))return Tb.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=vh(Ad(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Tb.set(`${t}.${e}`,i),i}function tc(t,e){if(!xi(t,{strict:!1}))throw new Nc({address:t});return Yg(t,e)}const ZF=/^0x[a-fA-F0-9]{40}$/,Nb=new J0(8192);function xi(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Nb.has(r))return Nb.get(r);const s=ZF.test(t)?t.toLowerCase()===t?!0:n?Yg(t)===t:!0:!1;return Nb.set(r,s),s}function Ww(t,e,n,{strict:r}={}){return Vo(t,{strict:!1})?y_(t,e,n,{strict:r}):Y$(t,e,n,{strict:r})}function G$(t,e){if(typeof e=="number"&&e>0&&e>an(t)-1)throw new N$({offset:e,position:"start",size:an(t)})}function K$(t,e,n){if(typeof e=="number"&&typeof n=="number"&&an(t)!==n-e)throw new N$({offset:n,position:"end",size:an(t)})}function Y$(t,e,n,{strict:r}={}){G$(t,e);const s=t.slice(e,n);return r&&K$(s,e,n),s}function y_(t,e,n,{strict:r}={}){G$(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&K$(s,e,n),s}const XF=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,J$=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Q$(t,e){if(t.length!==e.length)throw new hF({expectedLength:t.length,givenLength:e.length});const n=e9({params:t,values:e}),r=OS(n);return r.length===0?"0x":r}function e9({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(kS({param:t[r],value:e[r]}));return n}function kS({param:t,value:e}){const n=RS(t.type);if(n){const[r,s]=n;return n9(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return a9(e,{param:t});if(t.type==="address")return t9(e);if(t.type==="bool")return s9(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=J$.exec(t.type)??[];return i9(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return r9(e,{param:t});if(t.type==="string")return o9(e);throw new yF(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function OS(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=an(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(je(e+s,{size:32})),r.push(a),s+=an(a)):n.push(a)}return Tc([...n,...r])}function t9(t){if(!xi(t))throw new Nc({address:t});return{dynamic:!1,encoded:gc(t.toLowerCase())}}function n9(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new vF(t);if(!r&&t.length!==e)throw new uF({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=kS({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=OS(i);if(r){const a=je(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Tc([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Tc(i.map(({encoded:o})=>o))}}function r9(t,{param:e}){const[,n]=e.type.split("bytes"),r=an(t);if(!n){let s=t;return r%32!==0&&(s=gc(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Tc([gc(je(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new dF({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:gc(t,{dir:"right"})}}function s9(t){if(typeof t!="boolean")throw new ee(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:gc(O$(t))}}function i9(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new T$({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:je(t,{size:32,signed:e})}}function o9(t){const e=V0(t),n=Math.ceil(an(e)/32),r=[];for(let s=0;s<n;s++)r.push(gc(Ww(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Tc([gc(je(an(e),{size:32})),...r])}}function a9(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=kS({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?OS(r):Tc(r.map(({encoded:s})=>s))}}function RS(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const Pb="/docs/contract/encodeDeployData";function $S(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new lF({docsPath:Pb});if(!("inputs"in s))throw new M2({docsPath:Pb});if(!s.inputs||s.inputs.length===0)throw new M2({docsPath:Pb});const i=Q$(s.inputs,n);return Y0([r,i])}function Hn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class du extends ee{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Jy extends ee{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function c9(t){const e=vh(`0x${t.substring(4)}`).substring(26);return Yg(`0x${e}`)}const l9="modulepreload",u9=function(t){return"/"+t},H2={},rn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=u9(c),c in H2)return;H2[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":l9,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function d9({hash:t,signature:e}){const n=Vo(t)?t:ql(t),{secp256k1:r}=await rn(async()=>{const{secp256k1:o}=await import("./secp256k1-DLXnrq3A.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=V2(f);return new r.Signature(Go(l),Go(u)).addRecoveryBit(p)}const o=Vo(e)?e:ql(e);if(an(o)!==65)throw new Error("invalid signature length");const a=Ko(`0x${o.slice(130)}`),c=V2(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function V2(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function h9({hash:t,signature:e}){return c9(await d9({hash:t,signature:e}))}class G2 extends ee{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Z$ extends ee{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class f9 extends ee{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const p9={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new f9({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Z$({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new G2({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new G2({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function DS(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(p9);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function g9(t,e="hex"){const n=X$(t),r=DS(new Uint8Array(n.length));return n.encode(r),e==="hex"?Cr(r.bytes):r.bytes}function X$(t){return Array.isArray(t)?m9(t.map(e=>X$(e))):y9(t)}function m9(t){const e=t.reduce((s,i)=>s+i.length,0),n=eD(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function y9(t){const e=typeof t=="string"?to(t):t,n=eD(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function eD(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ee("Length is too large.")}function w9(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=vh(Y0(["0x05",g9([e?je(e):"0x",s,n?je(n):"0x"])]));return r==="bytes"?to(i):i}async function tD(t){const{authorization:e,signature:n}=t;return h9({hash:w9(e),signature:n??e})}class w_ extends ee{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class v9 extends ee{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class b9 extends ee{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class nD extends ee{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function rD({chain:t,currentChainId:e}){if(!t)throw new b9;if(e!==t.id)throw new v9({chain:t,currentChainId:e})}const E9={gwei:9,wei:18},_9={ether:-9,wei:9},C9={ether:-18,gwei:-9};function bh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Zr(t,e="wei"){return bh(t,_9[e])}class pl extends ee{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(pl,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(pl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class qw extends ee{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Zr(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(qw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class v_ extends ee{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Zr(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(v_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class b_ extends ee{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(b_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class E_ extends ee{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(E_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class __ extends ee{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(__,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class C_ extends ee{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(C_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class x_ extends ee{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(x_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class S_ extends ee{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(S_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class A_ extends ee{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(A_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Hw extends ee{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Zr(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Zr(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Hw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Z0 extends ee{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function jS(t,e="wei"){return bh(t,E9[e])}function Jg(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class x9 extends ee{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class S9 extends ee{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Jg(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class A9 extends ee{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Jg({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${jS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Zr(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Zr(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Zr(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class sD extends ee{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class iD extends ee{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class I9 extends ee{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const br=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),T9=t=>t,US=t=>t;class Jf extends ee{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${US(o)}`,e&&`Request body: ${br(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class LS extends ee{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${US(r)}`,`Request body: ${br(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class K2 extends ee{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${US(n)}`,`Request body: ${br(e)}`],name:"TimeoutError"})}}const N9=-1;class es extends ee{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof LS?e.code:n??N9}}class Cs extends es{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Up extends es{constructor(e){super(e,{code:Up.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Up,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Lp extends es{constructor(e){super(e,{code:Lp.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Lp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Mp extends es{constructor(e,{method:n}={}){super(e,{code:Mp.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Mp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Bp extends es{constructor(e){super(e,{code:Bp.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Bp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Vl extends es{constructor(e){super(e,{code:Vl.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Vl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Fp extends es{constructor(e){super(e,{code:Fp.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Fp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class zp extends es{constructor(e){super(e,{code:zp.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class mc extends es{constructor(e){super(e,{code:mc.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(mc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Xd extends es{constructor(e){super(e,{code:Xd.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Xd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class gl extends es{constructor(e,{method:n}={}){super(e,{code:gl.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(gl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class eh extends es{constructor(e){super(e,{code:eh.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(eh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Wp extends es{constructor(e){super(e,{code:Wp.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class mn extends Cs{constructor(e){super(e,{code:mn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class qp extends Cs{constructor(e){super(e,{code:qp.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Hp extends Cs{constructor(e,{method:n}={}){super(e,{code:Hp.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Vp extends Cs{constructor(e){super(e,{code:Vp.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Gp extends Cs{constructor(e){super(e,{code:Gp.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class no extends Cs{constructor(e){super(e,{code:no.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(no,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class th extends Cs{constructor(e){super(e,{code:th.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(th,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Kp extends Cs{constructor(e){super(e,{code:Kp.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Yp extends Cs{constructor(e){super(e,{code:Yp.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Jp extends Cs{constructor(e){super(e,{code:Jp.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Jp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Qp extends Cs{constructor(e){super(e,{code:Qp.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Zp extends Cs{constructor(e){super(e,{code:Zp.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class nh extends Cs{constructor(e){super(e,{code:nh.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(nh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class P9 extends es{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function MS(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ee?t.walk(s=>(s==null?void 0:s.code)===pl.code):t;return r instanceof ee?new pl({cause:t,message:r.details}):pl.nodeMessage.test(n)?new pl({cause:t,message:t.details}):qw.nodeMessage.test(n)?new qw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):v_.nodeMessage.test(n)?new v_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):b_.nodeMessage.test(n)?new b_({cause:t,nonce:e==null?void 0:e.nonce}):E_.nodeMessage.test(n)?new E_({cause:t,nonce:e==null?void 0:e.nonce}):__.nodeMessage.test(n)?new __({cause:t,nonce:e==null?void 0:e.nonce}):C_.nodeMessage.test(n)?new C_({cause:t}):x_.nodeMessage.test(n)?new x_({cause:t,gas:e==null?void 0:e.gas}):S_.nodeMessage.test(n)?new S_({cause:t,gas:e==null?void 0:e.gas}):A_.nodeMessage.test(n)?new A_({cause:t}):Hw.nodeMessage.test(n)?new Hw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Z0({cause:t})}function oD(t,{docsPath:e,...n}){const r=(()=>{const s=MS(t,n);return s instanceof Z0?t:s})();return new A9(r,{docsPath:e,...n})}function BS(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const k9={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function X0(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=O9(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Cr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=je(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=je(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=je(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=je(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=je(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=je(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=k9[t.type]),typeof t.value<"u"&&(e.value=je(t.value)),e}function O9(t){return t.map(e=>({address:e.address,r:e.r?je(BigInt(e.r)):e.r,s:e.s?je(BigInt(e.s)):e.s,chainId:je(e.chainId),nonce:je(e.nonce),...typeof e.yParity<"u"?{yParity:je(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:je(e.v)}:{}}))}function xt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const R9=2n**256n-1n;function Qg(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Hn(e):void 0;if(o&&!xi(o.address))throw new Nc({address:o.address});if(i&&!xi(i))throw new Nc({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new x9;if(r&&r>R9)throw new qw({maxFeePerGas:r});if(s&&r&&s>r)throw new Hw({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Zg(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Ko(e)}class $9 extends ee{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class FS extends ee{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class D9 extends ee{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Zr(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class aD extends ee{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const cD={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function lD(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Ko(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Ko(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?cD[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=j9(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function j9(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function U9(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:lD(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Xp(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?je(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new aD({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||U9)(c)}async function uD(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function L9(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await xt(t,Xp,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Go(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):xt(t,Xp,"getBlock")({}),xt(t,uD,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new FS;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Y2(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new $9;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await xt(t,Xp,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new FS;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await L9(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await xt(t,uD,"getGasPrice")({}))}}class M9 extends ee{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Jg({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${jS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Zr(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Zr(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Zr(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function B9(t,{docsPath:e,...n}){const r=(()=>{const s=MS(t,n);return s instanceof Z0?t:s})();return new M9(r,{docsPath:e,...n})}class F9 extends ee{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class z9 extends ee{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function J2(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function W9(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=J2(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=J2(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Q2(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new U2({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new U2({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function q9(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=je(e)),n!==void 0&&(o.nonce=je(n)),r!==void 0&&(o.state=Q2(r)),s!==void 0){if(o.state)throw new z9;o.stateDiff=Q2(s)}return o}function dD(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!xi(n,{strict:!1}))throw new Nc({address:n});if(e[n])throw new F9({address:n});e[n]=q9(r)}return e}async function hD(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?je(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function fD(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Hn(n):void 0;try{let M=function(A){const{block:j,request:P,rpcStateOverride:k}=A;return t.request({method:"eth_estimateGas",params:k?[P,j??"latest",k]:j?[P,j]:[P]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:_,stateOverride:E,...x}=await ev(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?je(d):void 0)||h,C=dD(E),O=await(async()=>{if(x.to)return x.to;if(c&&c.length>0)return await tD({authorization:c[0]}).catch(()=>{throw new ee("`to` is required. Could not infer from `authorizationList`")})})();Qg(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,W=(R||X0)({...BS(x,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:O,value:_});let I=BigInt(await M({block:T,request:W,rpcStateOverride:C}));if(c){const A=await hD(t,{address:W.from}),j=await Promise.all(c.map(async P=>{const{address:k}=P,U=await M({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:k,value:je(A)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(U)}));I+=j.reduce((P,k)=>P+k,0n)}return I}catch(a){throw B9(a,{...e,account:r,chain:t.chain})}}async function pD(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?je(r):n]},{dedupe:!!r});return Ko(s)}function gD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>to(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Cr(i))}function mD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>to(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>to(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Cr(o))}function H9(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function V9(t,e,n){return t&e^~t&n}function G9(t,e,n){return t&e^t&n^e&n}class K9 extends M${constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Ib(this.buffer)}update(e){zw(this),e=Q0(e),Hl(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Ib(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zw(this),U$(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,jp(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;H9(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Ib(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const oa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Y9=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),aa=new Uint32Array(64);class J9 extends K9{constructor(e=32){super(64,e,8,!1),this.A=oa[0]|0,this.B=oa[1]|0,this.C=oa[2]|0,this.D=oa[3]|0,this.E=oa[4]|0,this.F=oa[5]|0,this.G=oa[6]|0,this.H=oa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)aa[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=aa[d-15],f=aa[d-2],p=ki(h,7)^ki(h,18)^h>>>3,g=ki(f,17)^ki(f,19)^f>>>10;aa[d]=g+aa[d-7]+p+aa[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ki(a,6)^ki(a,11)^ki(a,25),f=u+h+V9(a,c,l)+Y9[d]+aa[d]|0,g=(ki(r,2)^ki(r,13)^ki(r,22))+G9(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){jp(aa)}destroy(){this.set(0,0,0,0,0,0,0,0),jp(this.buffer)}}const Q9=B$(()=>new J9),Z9=Q9;function X9(t,e){return Z9(Vo(t,{strict:!1})?H0(t):t)}function e7(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=X9(e);return s.set([n],0),r==="bytes"?s:Cr(s)}function t7(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(e7({commitment:i,to:r,version:n}));return s}const Z2=6,yD=32,zS=4096,wD=yD*zS,X2=wD*Z2-1-1*zS*Z2;class n7 extends ee{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class r7 extends ee{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function s7(t){const e=typeof t.data=="string"?to(t.data):t.data,n=an(e);if(!n)throw new r7;if(n>X2)throw new n7({maxSize:X2,size:n});const r=[];let s=!0,i=0;for(;s;){const o=DS(new Uint8Array(wD));let a=0;for(;a<zS;){const c=e.slice(i,i+(yD-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Cr(o.bytes))}function i7(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??s7({data:e}),i=t.commitments??gD({blobs:s,kzg:n,to:r}),o=t.proofs??mD({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function o7(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new S9({transaction:t})}const vD=["blobVersionedHashes","chainId","fees","gas","nonce","type"],eT=new Map;async function ev(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=vD,type:u}=e,d=n&&Hn(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await xt(t,Xp,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await xt(t,Zg,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await xt(t,pD,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=gD({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=t7({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=mD({blobs:r,commitments:y,kzg:o}),v=i7({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=o7(h)}catch{let y=eT.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",eT.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await Y2(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new D9({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new FS;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await Y2(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await xt(t,fD,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Qg(h),delete h.parameters,h}async function bD(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const kb=new J0(128);async function Xg(t,e){var b,v,_,E;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new du({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Hn(n):null;try{Qg(e);const x=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await tD({authorization:i[0]}).catch(()=>{throw new ee("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let S;r!==null&&(S=await xt(t,Zg,"getChainId")({}),rD({currentChainId:S,chain:r}));const T=(_=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:_.format,O=(T||X0)({...BS(w,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:S,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:x,type:p,value:g}),R=kb.get(t.uid),B=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:B,params:[O]},{retryCount:0})}catch(W){if(R===!1)throw W;const M=W;if(M.name==="InvalidInputRpcError"||M.name==="InvalidParamsRpcError"||M.name==="MethodNotFoundRpcError"||M.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(I=>(kb.set(t.uid,!0),I)).catch(I=>{const A=I;throw A.name==="MethodNotFoundRpcError"||A.name==="MethodNotSupportedRpcError"?(kb.set(t.uid,!1),M):A});throw M}}if((y==null?void 0:y.type)==="local"){const S=await xt(t,ev,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...vD,"sidecars"],type:p,value:g,...w,to:x}),T=(E=r==null?void 0:r.serializers)==null?void 0:E.transaction,C=await y.signTransaction(S,{serializer:T});return await xt(t,bD,"sendRawTransaction")({serializedTransaction:C})}throw(y==null?void 0:y.type)==="smart"?new Jy({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Jy({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(x){throw x instanceof Jy?x:oD(x,{...e,account:y,chain:e.chain||void 0})}}function a7(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=$S({abi:n,args:r,bytecode:s});return Xg(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const I_=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],vCe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],c7=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],l7=[...c7,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function u7(t,e={}){typeof e.size<"u"&&Ai(t,{size:e.size});const n=Cr(t,e);return Go(n,e)}function d7(t,e={}){let n=t;if(typeof e.size<"u"&&(Ai(n,{size:e.size}),n=wh(n)),n.length>1||n[0]>1)throw new XB(n);return!!n[0]}function Uo(t,e={}){typeof e.size<"u"&&Ai(t,{size:e.size});const n=Cr(t,e);return Ko(n,e)}function h7(t,e={}){let n=t;return typeof e.size<"u"&&(Ai(n,{size:e.size}),n=wh(n,{dir:"right"})),new TextDecoder().decode(n)}function tv(t,e){const n=typeof e=="string"?to(e):e,r=DS(n);if(an(n)===0&&t.length>0)throw new K0;if(an(e)&&an(e)<32)throw new R$({data:typeof e=="string"?e:Cr(e),params:t,size:an(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Id(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Id(t,e,{staticPosition:n}){const r=RS(e.type);if(r){const[s,i]=r;return p7(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return w7(t,e,{staticPosition:n});if(e.type==="address")return f7(t);if(e.type==="bool")return g7(t);if(e.type.startsWith("bytes"))return m7(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return y7(t,e);if(e.type==="string")return v7(t,{staticPosition:n});throw new wF(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const tT=32,T_=32;function f7(t){const e=t.readBytes(32);return[Yg(Cr(Y$(e,-20))),32]}function p7(t,e,{length:n,staticPosition:r}){if(!n){const o=Uo(t.readBytes(T_)),a=r+o,c=a+tT;t.setPosition(a);const l=Uo(t.readBytes(tT)),u=eg(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Id(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(eg(e)){const o=Uo(t.readBytes(T_)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Id(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Id(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function g7(t){return[d7(t.readBytes(32),{size:32}),32]}function m7(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Uo(t.readBytes(32));t.setPosition(n+o);const a=Uo(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Cr(c),32]}return[Cr(t.readBytes(Number.parseInt(s),32)),32]}function y7(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?u7(s,{signed:n}):Uo(s,{signed:n}),32]}function w7(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(eg(e)){const o=Uo(t.readBytes(T_)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Id(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Id(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function v7(t,{staticPosition:e}){const n=Uo(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Uo(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=h7(wh(i));return t.setPosition(e+32),[o,32]}function eg(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(eg);const n=RS(t.type);return!!(n&&eg({...t,type:n[1]}))}const b7=t=>vh(H0(t));function E7(t){return b7(t)}const _7="1.0.8";let Vs=class N_ extends Error{constructor(e,n={}){var o;const r=n.cause instanceof N_?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof N_&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${_7}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Xo(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const ED=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_D=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,CD=/^\(.+?\).*?$/,nT=/^tuple(?<array>(\[(\d*)\])*)$/;function P_(t){let e=t.type;if(nT.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=P_(i),s<n-1&&(e+=", ")}const r=Xo(nT,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,P_({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Qh(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=P_(s),r!==n-1&&(e+=", ")}return e}function C7(t){var e;return t.type==="function"?`function ${t.name}(${Qh(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Qh(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Qh(t.inputs)})`:t.type==="error"?`error ${t.name}(${Qh(t.inputs)})`:t.type==="constructor"?`constructor(${Qh(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const xD=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function x7(t){return xD.test(t)}function S7(t){return Xo(xD,t)}const SD=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function A7(t){return SD.test(t)}function I7(t){return Xo(SD,t)}const AD=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function T7(t){return AD.test(t)}function N7(t){return Xo(AD,t)}const ID=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function TD(t){return ID.test(t)}function P7(t){return Xo(ID,t)}const ND=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function k7(t){return ND.test(t)}function O7(t){return Xo(ND,t)}const PD=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function R7(t){return PD.test(t)}function $7(t){return Xo(PD,t)}const D7=/^receive\(\) external payable$/;function j7(t){return D7.test(t)}const U7=new Set(["indexed"]),k_=new Set(["calldata","memory","storage"]);class L7 extends Vs{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class M7 extends Vs{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class B7 extends Vs{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class F7 extends Vs{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class z7 extends Vs{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class W7 extends Vs{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class q7 extends Vs{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Eh extends Vs{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class H7 extends Vs{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class V7 extends Vs{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class G7 extends Vs{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class K7 extends Vs{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Y7(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const Ob=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function J7(t,e={}){if(T7(t))return Q7(t,e);if(A7(t))return Z7(t,e);if(x7(t))return X7(t,e);if(k7(t))return ez(t,e);if(R7(t))return tz(t);if(j7(t))return{type:"receive",stateMutability:"payable"};throw new H7({signature:t})}function Q7(t,e={}){const n=N7(t);if(!n)throw new Eh({signature:t,type:"function"});const r=pi(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Gl(r[a],{modifiers:k_,structs:e,type:"function"}));const o=[];if(n.returns){const a=pi(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Gl(a[l],{modifiers:k_,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Z7(t,e={}){const n=I7(t);if(!n)throw new Eh({signature:t,type:"event"});const r=pi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Gl(r[o],{modifiers:U7,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function X7(t,e={}){const n=S7(t);if(!n)throw new Eh({signature:t,type:"error"});const r=pi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Gl(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function ez(t,e={}){const n=O7(t);if(!n)throw new Eh({signature:t,type:"constructor"});const r=pi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Gl(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function tz(t){const e=$7(t);if(!e)throw new Eh({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const nz=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,rz=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,sz=/^u?int$/;function Gl(t,e){var d,h;const n=Y7(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(Ob.has(n))return Ob.get(n);const r=CD.test(t),s=Xo(r?rz:nz,t);if(!s)throw new B7({param:t});if(s.name&&oz(s.name))throw new F7({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=pi(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Gl(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(sz.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!kD(c))throw new M7({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new z7({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(k_.has(s.modifier)&&!az(c,!!s.array))throw new W7({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return Ob.set(n,u),u}function pi(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?pi(a,[...e,n.trim()]):pi(a,e,`${n}${o}`,r);case"(":return pi(a,e,`${n}${o}`,r+1);case")":return pi(a,e,`${n}${o}`,r-1);default:return pi(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new K7({current:n,depth:r});return e.push(n.trim()),e}function kD(t){return t==="address"||t==="bool"||t==="function"||t==="string"||ED.test(t)||_D.test(t)}const iz=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function oz(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||ED.test(t)||_D.test(t)||iz.test(t)}function az(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function cz(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!TD(a))continue;const c=P7(a);if(!c)throw new Eh({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Gl(p,{type:"struct"});u.push(g)}if(!u.length)throw new V7({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=OD(c,e)}return r}const lz=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function OD(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(CD.test(o.type))r.push(o);else{const c=Xo(lz,o.type);if(!(c!=null&&c.type))throw new q7({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new G7({type:u});r.push({...o,type:`tuple${l??""}`,components:OD(e[u]??[],e,new Set([...n,u]))})}else if(kD(u))r.push(o);else throw new L7({type:u})}}return r}function RD(t){const e=cz(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];TD(i)||n.push(J7(i,e))}return n}function uz(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ee("Unable to normalize signature.");return s}const dz=t=>{const e=typeof t=="string"?t:C7(t);return uz(e)};function $D(t){return E7(dz(t))}const WS=$D,qS=t=>Ww($D(t),0,4);function HS(t){const{abi:e,args:n=[],name:r}=t,s=Vo(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?qS(a)===r:a.type==="event"?WS(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?O_(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=DD(a.inputs,o.inputs,n);if(l)throw new gF({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function O_(t,e){const n=typeof t,r=e.type;switch(r){case"address":return xi(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>O_(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>O_(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function DD(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return DD(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?xi(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?xi(n[r],{strict:!1}):!1)return o}}const Rb="/docs/contract/decodeFunctionResult";function VS(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=HS({abi:e,args:n,name:r});if(!a)throw new Bw(r,{docsPath:Rb});i=a}if(i.type!=="function")throw new Bw(void 0,{docsPath:Rb});if(!i.outputs)throw new pF(i.name,{docsPath:Rb});const o=tv(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const rT="/docs/contract/encodeFunctionData";function hz(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=HS({abi:e,args:n,name:r});if(!i)throw new Bw(r,{docsPath:rT});s=i}if(s.type!=="function")throw new Bw(void 0,{docsPath:rT});return{abi:[s],functionName:qS(Ic(s))}}function em(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:hz(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Q$(s.inputs,e??[]):void 0;return Y0([i,o??"0x"])}function GS({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new w_({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new w_({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const jD={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},fz={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},pz={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function gz(t){const{abi:e,data:n}=t,r=Ww(n,0,4);if(r==="0x")throw new K0;const i=[...e||[],fz,pz].find(o=>o.type==="error"&&r===qS(Ic(o)));if(!i)throw new $$(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?tv(i.inputs,Ww(n,4)):void 0,errorName:i.name}}function UD({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?br(e[i]):e[i]}`).join(", ")})`}class mz extends ee{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Hn(n):void 0;let g=Jg({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${jS(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Zr(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Zr(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Zr(l)} gwei`,nonce:u});f&&(g+=`
${W9(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class LD extends ee{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=HS({abi:n,args:r,name:o}),l=c?UD({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Ic(c,{includeName:!0}):void 0,d=Jg({address:s&&T9(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class R_ extends ee{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=gz({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=jD[f]}else{const f=u?Ic(u,{includeName:!0}):void 0,p=u&&h?UD({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof $$&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class yz extends ee{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class wz extends ee{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class KS extends ee{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function vz(t,e){var r,s,i,o,a,c;if(!(t instanceof ee))return!1;const n=t.walk(l=>l instanceof R_);return n instanceof R_?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===jD[50]):!1}function bz(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Vo(e)?e:null}function Ez(t){return`[${t.slice(2)}]`}function _z(t){const e=new Uint8Array(32).fill(0);return t?bz(t)||vh(Ad(t)):Cr(e)}function Cz(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Ad(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Ad(s[i]);o.byteLength>255&&(o=Ad(Ez(_z(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const xz=3;function Vw(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof KS?t:t instanceof ee?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof K0?new yz({functionName:i}):[xz,Vl.code].includes(c)&&(l||u||d||h)?new R_({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof LS?u:h??d}):t;return new LD(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const Sz="0.1.1";function Az(){return Sz}let MD=class $_ extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof $_){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof $_&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Az()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return BD(this,e)}};function BD(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?BD(t.cause,e):e?null:t}function Iz(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Pz({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Io(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new Nz({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Tz(c,r):c}function Tz(t,e){return Iz(t,{dir:"left",size:e})}let Nz=class extends MD{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Pz=class extends MD{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function kz(t){return{address:t.address,amount:Io(t.amount),index:Io(t.index),validatorIndex:Io(t.validatorIndex)}}function Oz(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Io(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Io(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Io(t.gasLimit)},...typeof t.number=="bigint"&&{number:Io(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Io(t.prevRandao)},...typeof t.time=="bigint"&&{time:Io(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(kz)}}}const Rz="0x82ad56cb",$z="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Dz="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function jz(t,{docsPath:e,...n}){const r=(()=>{const s=MS(t,n);return s instanceof Z0?t:s})();return new mz(r,{docsPath:e,...n})}function YS(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const $b=new Map;function FD({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>$b.delete(e),a=()=>c().map(({args:u})=>u),c=()=>$b.get(e)||[],l=u=>$b.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=YS();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function zD(t,e){var W,M,I,A;const{account:n=t.account,authorizationList:r,batch:s=!!((W=t.batch)!=null&&W.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:_,value:E,stateOverride:x,...S}=e,T=n?Hn(n):void 0;if(u&&(h||f))throw new ee("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&_)throw new ee("Cannot provide both `code` & `to` as parameters.");const C=u&&d,O=h&&f&&_&&d,R=C||O,B=C?Mz({code:u,data:d}):O?Bz({data:d,factory:h,factoryData:f,to:_}):d;try{Qg(e);const P=(typeof i=="bigint"?je(i):void 0)||o,k=l?Oz(l):void 0,U=dD(x),z=(A=(I=(M=t.chain)==null?void 0:M.formatters)==null?void 0:I.transactionRequest)==null?void 0:A.format,Q=(z||X0)({...BS(S,{format:z}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:R?void 0:_,value:E});if(s&&Uz({request:Q})&&!U&&!k)try{return await Lz(t,{...Q,blockNumber:i,blockTag:o})}catch(se){if(!(se instanceof nD)&&!(se instanceof w_))throw se}const Y=(()=>{const se=[Q,P];return U&&k?[...se,U,k]:U?[...se,U]:k?[...se,{},k]:se})(),Z=await t.request({method:"eth_call",params:Y});return Z==="0x"?{data:void 0}:{data:Z}}catch(j){const P=Fz(j),{offchainLookup:k,offchainLookupSignature:U}=await rn(async()=>{const{offchainLookup:z,offchainLookupSignature:V}=await import("./ccip-B4fQ6pNO.js");return{offchainLookup:z,offchainLookupSignature:V}},[]);if(t.ccipRead!==!1&&(P==null?void 0:P.slice(0,10))===U&&_)return{data:await k(t,{data:P,to:_})};throw R&&(P==null?void 0:P.slice(0,10))==="0x101bb98d"?new wz({factory:h}):jz(j,{...e,account:T,chain:t.chain})}}function Uz({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Rz)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Lz(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new nD;l=GS({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?je(s):void 0)||i,{schedule:h}=FD({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const y=w.map(_=>({allowFailure:!0,callData:_.data,target:_.to})),b=em({abi:I_,args:[y],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return VS({abi:I_,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new KS({data:f});return f==="0x"?{data:void 0}:{data:f}}function Mz(t){const{code:e,data:n}=t;return $S({abi:RD(["constructor(bytes, bytes)"]),bytecode:$z,args:[e,n]})}function Bz(t){const{data:e,factory:n,factoryData:r,to:s}=t;return $S({abi:RD(["constructor(address, bytes, address, bytes)"]),bytecode:Dz,args:[s,e,n,r]})}function Fz(t){var n;if(!(t instanceof ee))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function JS(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=em({abi:n,args:s,functionName:i});try{const{data:c}=await xt(t,zD,"call")({...o,data:a,to:r});return VS({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Vw(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function zz(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=GS({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:l7,functionName:"reverse",args:[ql(Cz(c))],blockNumber:n,blockTag:r},u=xt(t,JS,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(vz(l))return null;throw l}}function Wz(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function qz(t){const e=Wz(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const Hz=new Map,Vz=new Map;function Gz(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Hz),r=e(t,Vz);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Kz(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Gz(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Yz=t=>`blockNumber.${t}`;async function Jz(t,{cacheTime:e=t.cacheTime}={}){const n=await Kz(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Yz(t.uid),cacheTime:e});return BigInt(n)}function WD(t,e){if(!xi(t,{strict:!1}))throw new Nc({address:t});if(!xi(e,{strict:!1}))throw new Nc({address:e});return t.toLowerCase()===e.toLowerCase()}const sT="/docs/contract/decodeEventLog";function Qz(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new fF({docsPath:sT});const c=e.find(g=>g.type==="event"&&o===WS(Ic(g)));if(!(c&&"name"in c)||c.type!=="event")throw new D$(o,{docsPath:sT});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new j$({abiItem:c,param:w});h[d?y:w.name||y]=Zz({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=tv(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof R$||g instanceof Z$?new m_({abiItem:c,data:n,params:p,size:an(n)}):g}else if(i)throw new m_({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Zz({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(tv([t],e)||[])[0]}function Xz(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===WS(u));if(!c)return null;const l=Qz({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!eW({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof D$)return null;if(c instanceof m_||c instanceof j$){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function eW(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?WD(o,a):i.type==="string"||i.type==="bytes"?vh(H0(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function qD(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function tW(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>qD(i));return!("abi"in e)||!e.abi?s:Xz({abi:e.abi,logs:s,strict:n})}async function HD(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?je(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,je(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,je(i)]},{dedupe:!!a}),!c)throw new sD({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||lD)(c)}const VD={"0x0":"reverted","0x1":"success"};function nW(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>qD(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Ko(t.transactionIndex):null,status:t.status?VD[t.status]:null,type:t.type?cD[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function iT(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new iD({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||nW)(n)}async function rW(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=GS({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:_,args:E,functionName:x}=l[b];try{const S=em({abi:v,args:E,functionName:x});p+=(S.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(S.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:S,target:_}]}catch(S){const T=Vw(S,{abi:v,address:_,args:E,docsPath:"/docs/contract/multicall",functionName:x,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:_}]}}const g=await Promise.allSettled(h.map(b=>xt(t,JS,"readContract")({abi:I_,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let E=0;E<h[b].length;E++)w.push({status:"failure",error:v.reason,result:void 0});continue}const _=v.value;for(let E=0;E<_.length;E++){const{returnData:x,success:S}=_[E],{callData:T}=h[b][E],{abi:C,address:O,functionName:R,args:B}=l[w.length];try{if(T==="0x")throw new K0;if(!S)throw new KS({data:x});const W=VS({abi:C,args:B,data:x,functionName:R});w.push(r?{result:W,status:"success"}:W)}catch(W){const M=Vw(W,{abi:C,address:O,args:B,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw M;w.push({error:M,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new ee("multicall results mismatch");return w}const Vm=new J0(8192);function sW(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Vm.get(n))return Vm.get(n);const r=t().finally(()=>Vm.delete(n));return Vm.set(n,r),r}async function Gw(t){return new Promise(e=>setTimeout(e,t))}function Kw(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await Gw(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function iW(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new gl(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new gl(new Error("method not supported"),{method:l});const u=s?V0(`${c}.${br(n)}`):void 0;return sW(()=>Kw(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case Up.code:throw new Up(f);case Lp.code:throw new Lp(f);case Mp.code:throw new Mp(f,{method:n.method});case Bp.code:throw new Bp(f);case Vl.code:throw new Vl(f);case Fp.code:throw new Fp(f);case zp.code:throw new zp(f);case mc.code:throw new mc(f);case Xd.code:throw new Xd(f);case gl.code:throw new gl(f,{method:n.method});case eh.code:throw new eh(f);case Wp.code:throw new Wp(f);case mn.code:throw new mn(f);case qp.code:throw new qp(f);case Hp.code:throw new Hp(f);case Vp.code:throw new Vp(f);case Gp.code:throw new Gp(f);case no.code:throw new no(f);case th.code:throw new th(f);case Kp.code:throw new Kp(f);case Yp.code:throw new Yp(f);case Jp.code:throw new Jp(f);case Qp.code:throw new Qp(f);case Zp.code:throw new Zp(f);case nh.code:throw new nh(f);case 5e3:throw new mn(f);default:throw h instanceof ee?h:new P9(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Jf){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>oW(h)}),{enabled:s,id:u})}}function oW(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===eh.code||t.code===Vl.code:t instanceof Jf&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function aW(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function GD(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function cW(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const oT=cW();function lW(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await GD(async({signal:p})=>{const g={...a,body:Array.isArray(r)?br(r.map(v=>({jsonrpc:"2.0",id:v.id??oT.take(),...v}))):br({jsonrpc:"2.0",id:r.id??oT.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new K2({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new Jf({body:r,details:br(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof Jf||h instanceof K2?h:new Jf({body:r,cause:h,url:t})}}}}class uW extends ee{constructor({domain:e}){super(`Invalid domain "${br(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class dW extends ee{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class hW extends ee{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function fW(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return br({domain:o,message:a,primaryType:r,types:s})}function pW(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(J$);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;je(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!xi(d))throw new Nc({address:d});const f=u.match(XF);if(f){const[g,w]=f;if(w&&an(d)!==Number.parseInt(w))throw new mF({expectedSize:Number.parseInt(w),givenSize:an(d)})}const p=s[u];p&&(mW(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new uW({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new dW({primaryType:r,types:s})}function gW({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function mW(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new hW({type:t})}class yW extends ee{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function wW(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new yW({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const Db=new Map,aT=new Map;let vW=0;function tg(t,e,n){const r=++vW,s=()=>Db.get(t)||[],i=()=>{const u=s();Db.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=aT.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(Db.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&aT.set(t,l),o}function QS(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Gw(c);const l=async()=>{s&&(await t({unpoll:i}),await Gw(r),l())};l()})(),i}function bW(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=br(["watchBlockNumber",t.uid,e,n,o]);return tg(d,{onBlockNumber:r,onError:s},h=>QS(async()=>{var f;try{const p=await xt(t,Jz,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=br(["watchBlockNumber",t.uid,e,n]);return tg(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var v;if(!f)return;const b=Go((v=y.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function EW(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function _W(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=br(["watchPendingTransactions",t.uid,e,i]);return tg(l,{onTransactions:r,onError:n},u=>{let d;const h=QS(async()=>{var f;try{if(!d)try{d=await xt(t,qz,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await xt(t,tW,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await xt(t,EW,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function CW(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Yg(r))}async function xW(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function SW(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Hn(n):void 0,i=r?[s==null?void 0:s.address,[je(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const KD="0x5792579257925792579257925792579257925792579257925792579257925792",YD=je(0,{size:32});async function AW(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Hn(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?em({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Tc([p,f.dataSuffix]):p,to:f.to,value:f.value?je(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:je(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new th(new ee(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new nh(new ee(y,{details:y}))}const p=[];for(const y of d){const b=Xg(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Go(y.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:YD);return{id:Tc([...w,je(s.id,{size:32}),KD])}}throw oD(h,{...e,account:u,chain:e.chain})}}async function JD(t,e){async function n(u){if(u.endsWith(KD.slice(2))){const h=wh(y_(u,-64,-32)),f=y_(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>YD.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:Ko(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Ko(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Go(u.blockNumber),gasUsed:Go(u.gasUsed),status:VD[u.status]})))??[],statusCode:l,status:c,version:o}}async function IW(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function TW(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=br(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=YS();let u;const d=tg(o,{resolve:c,reject:l},h=>{const f=QS(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await JD(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new NW({id:n}))},i):void 0,await a}class NW extends ee{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function PW(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=br(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=YS(),b=a?setTimeout(()=>{p(),f(),y(new I9({hash:n}))},a):void 0;return f=tg(c,{onReplaced:r,resolve:w,reject:y},v=>{p=xt(t,bW,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(_){const E=S=>{clearTimeout(b),p(),S(),f()};let x=_;if(!h)try{if(d){if(e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;E(()=>v.resolve(d));return}if(l||(h=!0,await Kw(async()=>{l=await xt(t,HD,"getTransaction")({hash:n}),l.blockNumber&&(x=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await xt(t,iT,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;E(()=>v.resolve(d))}catch(S){if(S instanceof sD||S instanceof iD){if(!l){h=!1;return}try{u=l,h=!0;const T=await Kw(()=>xt(t,Xp,"getBlock")({blockNumber:x,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof aD});h=!1;const C=T.transactions.find(({from:R,nonce:B})=>R===u.from&&B===u.nonce);if(!C||(d=await xt(t,iT,"getTransactionReceipt")({hash:C.hash}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e)))return;let O="replaced";C.to===u.to&&C.value===u.value&&C.input===u.input?O="repriced":C.from===C.to&&C.value===0n&&(O="cancelled"),E(()=>{var R;(R=v.onReplaced)==null||R.call(v,{reason:O,replacedTransaction:u,transaction:C,transactionReceipt:d}),v.resolve(d)})}catch(T){E(()=>v.reject(T))}}else E(()=>v.reject(S))}}})}),g}async function kW(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>tc(n))}async function OW(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function QD(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new du({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Hn(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Hn(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await xt(t,Zg,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await xt(t,pD,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&WD(o.address,i.address))&&(a.nonce+=1)),a}async function RW(t,e){const{account:n=t.account}=e;if(!n)throw new du({docsPath:"/docs/eip7702/signAuthorization"});const r=Hn(n);if(!r.signAuthorization)throw new Jy({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await QD(t,e);return r.signAuthorization(s)}async function $W(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new du({docsPath:"/docs/actions/wallet/signTransaction"});const i=Hn(n);Qg({account:i,...e});const o=await xt(t,Zg,"getChainId")({});r!==null&&rD({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||X0;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:je(o),from:i.address}]},{retryCount:0})}async function ZD(t,{account:e=t.account,message:n}){if(!e)throw new du({docsPath:"/docs/actions/wallet/signMessage"});const r=Hn(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?V0(n):n.raw instanceof Uint8Array?ql(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function DW(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new du({docsPath:"/docs/actions/wallet/signTypedData"});const o=Hn(n),a={EIP712Domain:gW({domain:r}),...e.types};if(pW({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=fW({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function jW(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:je(e)}]},{retryCount:0})}async function UW(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function XD(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new du({docsPath:"/docs/contract/writeContract"});const l=r?Hn(r):null,u=em({abi:n,args:i,functionName:a});try{return await xt(t,Xg,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Vw(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function ys(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const Qy="2.17.3",LW=()=>`@wagmi/core@${Qy}`;var e5=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Yw,t5;let ea=class D_ extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return LW()}constructor(e,n={}){var i;super(),Yw.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof D_?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof D_&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return e5(this,Yw,"m",t5).call(this,this,e)}};Yw=new WeakSet,t5=function t(e,n){return n!=null&&n(e)?e:e.cause?e5(this,Yw,"m",t).call(this,e.cause,n):e};class ng extends ea{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class MW extends ea{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class BW extends ea{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class FW extends ea{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class zW extends ea{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class WW extends ea{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Zy(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new MW;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const j_=256;let Gm=j_,Km;function n5(t=11){if(!Km||Gm+t>j_*2){Km="",Gm=0;for(let e=0;e<j_;e++)Km+=(256+Math.random()*256|0).toString(16).substring(1)}return Km.substring(Gm,Gm+++t)}function r5(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Hn(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:n5()};function y(b){return v=>{const _=v(b);for(const x in w)delete _[x];const E={...b,..._};return Object.assign(E,{extend:y(E)})}}return Object.assign(w,{extend:y(w)})}function ZS({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=n5();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:iW(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function qW(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>ZS({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function cT(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=HW,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=ZS({key:n,name:r,async request({method:g,params:w}){let y;const b=async(v=0)=>{const _=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const E=await _.request({method:g,params:w});return f({method:g,params:w,response:E,transport:_,status:"success"}),E}catch(E){if(f({error:E,method:g,params:w,transport:_,status:"error"}),i(E)||v===h.length-1||(y??(y=h.slice(v+1).some(x=>{const{include:S,exclude:T}=x({chain:c}).config.methods||{};return S?S.includes(g):T?!T.includes(g):!0})),!y))throw E;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};VW({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function HW(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Xd.code||t.code===mn.code||pl.nodeMessage.test(t.message)||t.code===5e3))}function VW({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-y,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(x=>x[w].latency),v=1-y.reduce((x,S)=>x+S,0)/y.length/f,_=u.map(x=>x[w].success),E=_.reduce((x,S)=>x+S,0)/_.length;return E===0?[0,w]:[l*v+c*E,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await Gw(e),d()};d()}class GW extends ee{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Ym(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new GW;const v=lW(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return ZS({key:s,methods:i,name:o,async request({method:_,params:E}){const x={method:_,params:E},{schedule:S}=FD({id:b,wait:g,shouldSplitBatch(R){return R.length>p},fn:R=>v.request({body:R}),sort:(R,B)=>R.id-B.id}),T=async R=>n?S(R):[await v.request({body:R})],[{error:C,result:O}]=await T(x);if(u)return{error:C,result:O};if(C)throw new LS({body:x,error:C,url:b});return O},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function KW(t){return{addChain:e=>aF(t,e),deployContract:e=>a7(t,e),getAddresses:()=>CW(t),getCallsStatus:e=>JD(t,e),getCapabilities:e=>SW(t,e),getChainId:()=>Zg(t),getPermissions:()=>xW(t),prepareAuthorization:e=>QD(t,e),prepareTransactionRequest:e=>ev(t,e),requestAddresses:()=>kW(t),requestPermissions:e=>OW(t,e),sendCalls:e=>AW(t,e),sendRawTransaction:e=>bD(t,e),sendTransaction:e=>Xg(t,e),showCallsStatus:e=>IW(t,e),signAuthorization:e=>RW(t,e),signMessage:e=>ZD(t,e),signTransaction:e=>$W(t,e),signTypedData:e=>DW(t,e),switchChain:e=>jW(t,e),waitForCallsStatus:e=>TW(t,e),watchAsset:e=>UW(t,e),writeContract:e=>XD(t,e)}}async function tm(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new WW({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new BW;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new zW({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Hn(e.account??n.accounts[0]);if(o&&(o.address=tc(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new FW({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return r5({account:o,chain:a,name:"Connector Client",transport:l=>qW(c)({...l,retryCount:0})})}async function s5(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function YW(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await tm(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return ys(o,fD,"estimateGas")({...s,account:i})}function i5(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(C9[t])}function Td(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function JW(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return ys(o,rW,"multicall")({allowFailure:n,contracts:s,...i})}function QW(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ys(s,JS,"readContract")(r)}async function ZW(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>JW(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof LD)throw c;const l=()=>o.map(u=>QW(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function XW(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await lT(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await lT(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=k$(wh(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await ys(c,hD,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:bh(u,i5(a)),symbol:d.nativeCurrency.symbol,value:u}}async function lT(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await ZW(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=bh(c??"0",i5(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function uT(t){return t.state.chainId}function Kl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Kl(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Kl(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Jm=[];function Bi(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Kl(Jm,e)?Jm:(Jm=e,e)}let jb=[];function dT(t){const e=t.connectors;return Kl(jb,e)?jb:(jb=e,e)}function eq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ys(s,zz,"getEnsName")(r)}async function tq(t,e={}){return(await tm(t,e)).extend(KW)}async function nq(t,e){const{account:n,chainId:r,...s}=e,i=n??Td(t).address,o=t.getClient({chainId:r});return ys(o,ev,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Ub=!1;async function U_(t,e={}){var l,u;if(Ub)return[];Ub=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Ub=!1,a}async function rq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await tm(t,{account:n??void 0,chainId:r,connector:s}),await ys(o,Xg,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function sq(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await tm(t,{account:n,connector:r}),ys(i,ZD,"signMessage")({...s,...n?{account:n}:{}})}class Pa extends ea{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class iq extends ea{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function hT(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new iq({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new ng;return t.setState(a=>({...a,chainId:r})),i}function o5(t,e){const{onChange:n}=e;return t.subscribe(()=>Td(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Kl(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function oq(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function aq(t,e){const{onChange:n}=e;return t.subscribe(()=>Bi(t),n,{equalityFn:Kl})}function a5(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function cq(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=ys(l,_W,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function lq(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await ys(i,PW,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await ys(i,HD,"getTransaction")({hash:a.transactionHash}),d=await ys(i,zD,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?k$(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function uq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await tm(t,{account:n??void 0,chainId:r,connector:s}),await ys(o,XD,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function _Ce(t){return t}nv.type="injected";function nv(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...dq[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:nv.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new Pa;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(_=>tc(_)),h.length>0&&(h=await this.getAccounts())}catch(v){const _=v;if(_.code===mn.code)throw new mn(_);if(_.code===mc.code)throw _}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(E=>tc(E))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const _=await this.switchChain({chainId:l}).catch(E=>{if(E.code===mn.code)throw E;return{id:v}});v=(_==null?void 0:_.id)??v}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const _=v;throw _.code===mn.code?new mn(_):_.code===mc.code?new mc(_):_}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Pa;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await GD(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Pa;return(await l.request({method:"eth_accounts"})).map(d=>tc(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Pa;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=Xy(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new Pa}return!!(await Kw(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new Pa;const h=c.chains.find(b=>b.id===u);if(!h)throw new no(new ng);const f=new Promise(b=>{const v=_=>{"chainId"in _&&_.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:je(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:_,...E}=h.blockExplorers??{};let x;l!=null&&l.blockExplorerUrls?x=l.blockExplorerUrls:_&&(x=[_.url,...Object.values(E).map(C=>C.url)]);let S;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?S=l.rpcUrls:S=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const T={blockExplorerUrls:x,chainId:je(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:S};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new mn(new Error("User rejected switch after adding network."))}),f]),h}catch(_){throw new mn(_)}throw v.code===mn.code?new mn(v):new no(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>tc(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const dq={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Xy(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Xy(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Xy(t,"isPhantom")}}};function Xy(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function hq(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function fq(){const t=new Set;let e=[];const n=()=>hq(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const pq=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},gq=pq;function mq(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const L_=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return L_(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return L_(r)(n)}}}},yq=(t,e)=>(n,r,s)=>{let i={storage:mq(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return L_(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[_,E]=b;if(f=i.merge(E,(v=r())!=null?v:h),n(f,!0),_)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},wq=yq,fT=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},Lb=t=>t?fT(t):fT;var c5={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var _=w.length,E;for(v=0;v<_;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),y){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(c5);var vq=c5.exports;const bq=cu(vq);class Eq{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new bq})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function _q(t){return new Eq(t)}function Cq(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function pT(t,e){return t.slice(0,e).join(".")||"."}function gT(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function xq(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=gT(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=gT(s,c);if(u!==0)return r?e.call(this,a,c,pT(i,u)):`[ref=${pT(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Sq(t,e,n,r){return JSON.stringify(t,xq((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Aq(t){const{deserialize:e=Cq,key:n="wagmi",serialize:r=Sq,storage:s=l5}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const l5={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Iq(){const t=typeof window<"u"&&window.localStorage?window.localStorage:l5;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const M_=256;let Qm=M_,Zm;function Tq(t=11){if(!Zm||Qm+t>M_*2){Zm="",Qm=0;for(let e=0;e<M_;e++)Zm+=(256+Math.random()*256|0).toString(16).substring(1)}return Zm.substring(Qm,Qm+++t)}function Nq(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Aq({storage:Iq()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?fq():void 0,a=Lb(()=>i.chains),c=Lb(()=>{const E=[],x=new Set;for(const S of i.connectors??[]){const T=l(S);if(E.push(T),!s&&T.rdns){const C=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const O of C)x.add(O)}}if(!s&&o){const S=o.getProviders();for(const T of S)x.has(T.info.rdns)||E.push(l(u(T)))}return E});function l(E){var T;const x=_q(Tq()),S={...E({emitter:x,chains:a.getState(),storage:n,transports:i.transports}),emitter:x,uid:x.uid};return x.on("connect",v),(T=S.setup)==null||T.call(S),S}function u(E){const{info:x}=E,S=E.provider;return nv({target:{...x,id:x.rdns,provider:S}})}const d=new Map;function h(E={}){const x=E.chainId??w.getState().chainId,S=a.getState().find(C=>C.id===x);if(E.chainId&&!S)throw new ng;{const C=d.get(w.getState().chainId);if(C&&!S)return C;if(!S)throw new ng}{const C=d.get(x);if(C)return C}let T;if(i.client)T=i.client({chain:S});else{const C=S.id,O=a.getState().map(W=>W.id),R={},B=Object.entries(i);for(const[W,M]of B)if(!(W==="chains"||W==="client"||W==="connectors"||W==="transports"))if(typeof M=="object")if(C in M)R[W]=M[C];else{if(O.some(A=>A in M))continue;R[W]=M}else R[W]=M;T=r5({...R,chain:S,batch:R.batch??{multicall:!0},transport:W=>i.transports[C]({...W,connectors:c})})}return d.set(x,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";Qy.startsWith(g)?p=Number.parseInt(Qy.replace(g,"")):p=Number.parseInt(Qy.split(".")[0]??"0");const w=Lb(gq(n?wq(f,{migrate(E,x){if(x===p)return E;const S=f(),T=y(E,S.chainId);return{...S,chainId:T}},name:"store",partialize(E){return{connections:{__type:"Map",value:Array.from(E.connections.entries()).map(([x,S])=>{const{id:T,name:C,type:O,uid:R}=S.connector;return[x,{...S,connector:{id:T,name:C,type:O,uid:R}}]})},chainId:E.chainId,current:E.current}},merge(E,x){typeof E=="object"&&E&&"status"in E&&delete E.status;const S=y(E,x.chainId);return{...x,...E,chainId:S}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(E,x){return E&&typeof E=="object"&&"chainId"in E&&typeof E.chainId=="number"&&a.getState().some(S=>S.id===E.chainId)?E.chainId:x}r&&w.subscribe(({connections:E,current:x})=>{var S;return x?(S=E.get(x))==null?void 0:S.chainId:void 0},E=>{if(a.getState().some(S=>S.id===E))return w.setState(S=>({...S,chainId:E??S.chainId}))}),o==null||o.subscribe(E=>{const x=new Set,S=new Set;for(const C of c.getState())if(x.add(C.id),C.rdns){const O=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const R of O)S.add(R)}const T=[];for(const C of E){if(S.has(C.info.rdns))continue;const O=l(u(C));x.has(O.id)||T.push(O)}n&&!w.persist.hasHydrated()||c.setState(C=>[...C,...T],!0)});function b(E){w.setState(x=>{const S=x.connections.get(E.uid);return S?{...x,connections:new Map(x.connections).set(E.uid,{accounts:E.accounts??S.accounts,chainId:E.chainId??S.chainId,connector:S.connector})}:x})}function v(E){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(x=>{const S=c.getState().find(T=>T.uid===E.uid);return S?(S.emitter.listenerCount("connect")&&S.emitter.off("connect",b),S.emitter.listenerCount("change")||S.emitter.on("change",b),S.emitter.listenerCount("disconnect")||S.emitter.on("disconnect",_),{...x,connections:new Map(x.connections).set(E.uid,{accounts:E.accounts,chainId:E.chainId,connector:S}),current:E.uid,status:"connected"}):x})}function _(E){w.setState(x=>{const S=x.connections.get(E.uid);if(S){const C=S.connector;C.emitter.listenerCount("change")&&S.connector.emitter.off("change",b),C.emitter.listenerCount("disconnect")&&S.connector.emitter.off("disconnect",_),C.emitter.listenerCount("connect")||S.connector.emitter.on("connect",v)}if(x.connections.delete(E.uid),x.connections.size===0)return{...x,connections:new Map,current:null,status:"disconnected"};const T=x.connections.values().next().value;return{...x,connections:new Map(x.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(E){let x;typeof E=="function"?x=E(w.getState()):x=E;const S=f();typeof x!="object"&&(x=S),Object.keys(S).some(C=>!(C in x))&&(x=S),w.setState(x,!0)},subscribe(E,x,S){return w.subscribe(E,x,S?{...S,fireImmediately:S.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(E){const x=typeof E=="function"?E(a.getState()):E;if(x.length!==0)return a.setState(x,!0)},subscribe(E){return a.subscribe(E)}},connectors:{providerDetailToConnector:u,setup:l,setState(E){return c.setState(typeof E=="function"?E(c.getState()):E,!0)},subscribe(E){return c.subscribe(E)}},events:{change:b,connect:v,disconnect:_}}}}function Pq(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?U_(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function kq(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Pq(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const u5=D.createContext(void 0);function Oq(t){const{children:e,config:n}=t,r={value:n};return D.createElement(kq,t,D.createElement(u5.Provider,r,e))}const Rq="2.15.6",$q=()=>`wagmi@${Rq}`;let Dq=class extends ea{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return $q()}};class jq extends Dq{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Bc(t={}){const e=t.config??D.useContext(u5);if(!e)throw new jq;return e}var d5={exports:{}},h5={},f5={exports:{}},p5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh=D;function Uq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lq=typeof Object.is=="function"?Object.is:Uq,Mq=rh.useState,Bq=rh.useEffect,Fq=rh.useLayoutEffect,zq=rh.useDebugValue;function Wq(t,e){var n=e(),r=Mq({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Fq(function(){s.value=n,s.getSnapshot=e,Mb(s)&&i({inst:s})},[t,n,e]),Bq(function(){return Mb(s)&&i({inst:s}),t(function(){Mb(s)&&i({inst:s})})},[t]),zq(n),n}function Mb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lq(t,n)}catch{return!0}}function qq(t,e){return e()}var Hq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qq:Wq;p5.useSyncExternalStore=rh.useSyncExternalStore!==void 0?rh.useSyncExternalStore:Hq;f5.exports=p5;var Vq=f5.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv=D,Gq=Vq;function Kq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yq=typeof Object.is=="function"?Object.is:Kq,Jq=Gq.useSyncExternalStore,Qq=rv.useRef,Zq=rv.useEffect,Xq=rv.useMemo,eH=rv.useDebugValue;h5.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Qq(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Xq(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Yq(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=Jq(t,i[0],i[1]);return Zq(function(){o.hasValue=!0,o.value=a},[a]),eH(a),a};d5.exports=h5;var tH=d5.exports;const Bb=t=>typeof t=="object"&&!Array.isArray(t);function nH(t,e,n=e,r=Kl){const s=D.useRef([]),i=tH.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(Bb(o)&&Bb(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(Bb(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function nm(t={}){const e=Bc(t);return nH(n=>o5(e,{onChange:n}),()=>Td(e))}var _h=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yl=typeof window>"u"||"Deno"in globalThis;function yr(){}function rH(t,e){return typeof t=="function"?t(e):t}function B_(t){return typeof t=="number"&&t>=0&&t!==1/0}function g5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function yc(t,e){return typeof t=="function"?t(e):t}function hi(t,e){return typeof t=="function"?t(e):t}function mT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==XS(o,e.options))return!1}else if(!rg(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function yT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Jl(e.options.mutationKey)!==Jl(i))return!1}else if(!rg(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function XS(t,e){return((e==null?void 0:e.queryKeyHashFn)||Jl)(t)}function Jl(t){return JSON.stringify(t,(e,n)=>F_(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function rg(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>rg(t[n],e[n])):!1}function m5(t,e){if(t===e)return t;const n=wT(t)&&wT(e);if(n||F_(t)&&F_(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=m5(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function Jw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function wT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function F_(t){if(!vT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!vT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function vT(t){return Object.prototype.toString.call(t)==="[object Object]"}function sH(t){return new Promise(e=>{setTimeout(e,t)})}function z_(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?m5(t,e):e}function iH(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function oH(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var eA=Symbol();function y5(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===eA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function w5(t,e){return typeof t=="function"?t(...e):!!t}var Cl,Wa,$d,rR,aH=(rR=class extends _h{constructor(){super();Se(this,Cl);Se(this,Wa);Se(this,$d);pe(this,$d,e=>{if(!Yl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){L(this,Wa)||this.setEventListener(L(this,$d))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,Wa))==null||e.call(this),pe(this,Wa,void 0))}setEventListener(e){var n;pe(this,$d,e),(n=L(this,Wa))==null||n.call(this),pe(this,Wa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){L(this,Cl)!==e&&(pe(this,Cl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof L(this,Cl)=="boolean"?L(this,Cl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Cl=new WeakMap,Wa=new WeakMap,$d=new WeakMap,rR),tA=new aH,Dd,qa,jd,sR,cH=(sR=class extends _h{constructor(){super();Se(this,Dd,!0);Se(this,qa);Se(this,jd);pe(this,jd,e=>{if(!Yl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){L(this,qa)||this.setEventListener(L(this,jd))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,qa))==null||e.call(this),pe(this,qa,void 0))}setEventListener(e){var n;pe(this,jd,e),(n=L(this,qa))==null||n.call(this),pe(this,qa,e(this.setOnline.bind(this)))}setOnline(e){L(this,Dd)!==e&&(pe(this,Dd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return L(this,Dd)}},Dd=new WeakMap,qa=new WeakMap,jd=new WeakMap,sR),Qw=new cH;function W_(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function lH(t){return Math.min(1e3*2**t,3e4)}function v5(t){return(t??"online")==="online"?Qw.isOnline():!0}var b5=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Fb(t){return t instanceof b5}function E5(t){let e=!1,n=0,r=!1,s;const i=W_(),o=g=>{var w;r||(h(new b5(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>tA.isFocused()&&(t.networkMode==="always"||Qw.isOnline())&&t.canRun(),u=()=>v5(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var x;if(r)return;const b=t.retry??(Yl?0:3),v=t.retryDelay??lH,_=typeof v=="function"?v(n,y):v,E=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!E){h(y);return}n++,(x=t.onFail)==null||x.call(t,n,y),sH(_).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var uH=t=>setTimeout(t,0);function dH(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=uH;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var vn=dH(),xl,iR,_5=(iR=class{constructor(){Se(this,xl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),B_(this.gcTime)&&pe(this,xl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Yl?1/0:5*60*1e3))}clearGcTimeout(){L(this,xl)&&(clearTimeout(L(this,xl)),pe(this,xl,void 0))}},xl=new WeakMap,iR),Ud,Sl,$s,Al,ar,Mg,Il,ai,bo,oR,hH=(oR=class extends _5{constructor(e){super();Se(this,ai);Se(this,Ud);Se(this,Sl);Se(this,$s);Se(this,Al);Se(this,ar);Se(this,Mg);Se(this,Il);pe(this,Il,!1),pe(this,Mg,e.defaultOptions),this.setOptions(e.options),this.observers=[],pe(this,Al,e.client),pe(this,$s,L(this,Al).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,pe(this,Ud,fH(this.options)),this.state=e.state??L(this,Ud),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=L(this,ar))==null?void 0:e.promise}setOptions(e){this.options={...L(this,Mg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,$s).remove(this)}setData(e,n){const r=z_(this.state.data,e,this.options);return He(this,ai,bo).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){He(this,ai,bo).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=L(this,ar))==null?void 0:r.promise;return(s=L(this,ar))==null||s.cancel(e),n?n.then(yr).catch(yr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,Ud))}isActive(){return this.observers.some(e=>hi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===eA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>yc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!g5(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=L(this,ar))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=L(this,ar))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),L(this,$s).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(L(this,ar)&&(L(this,Il)?L(this,ar).cancel({revert:!0}):L(this,ar).cancelRetry()),this.scheduleGc()),L(this,$s).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||He(this,ai,bo).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(L(this,ar))return L(this,ar).continueRetry(),L(this,ar).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(pe(this,Il,!0),r.signal)})},i=()=>{const h=y5(this.options,n),p=(()=>{const g={client:L(this,Al),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return pe(this,Il,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:L(this,Al),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),pe(this,Sl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&He(this,ai,bo).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;Fb(h)&&h.silent||He(this,ai,bo).call(this,{type:"error",error:h}),Fb(h)||((p=(f=L(this,$s).config).onError)==null||p.call(f,h,this),(w=(g=L(this,$s).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return pe(this,ar,E5({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=L(this,$s).config).onSuccess)==null||p.call(f,h,this),(w=(g=L(this,$s).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{He(this,ai,bo).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{He(this,ai,bo).call(this,{type:"pause"})},onContinue:()=>{He(this,ai,bo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),L(this,ar).start()}},Ud=new WeakMap,Sl=new WeakMap,$s=new WeakMap,Al=new WeakMap,ar=new WeakMap,Mg=new WeakMap,Il=new WeakMap,ai=new WeakSet,bo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...C5(r.data,this.options),fetchMeta:e.meta??null};case"success":return pe(this,Sl,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Fb(s)&&s.revert&&L(this,Sl)?{...L(this,Sl),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),vn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),L(this,$s).notify({query:this,type:"updated",action:e})})},oR);function C5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:v5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function fH(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fi,aR,pH=(aR=class extends _h{constructor(e={}){super();Se(this,Fi);this.config=e,pe(this,Fi,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??XS(s,n);let o=this.get(i);return o||(o=new hH({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){L(this,Fi).has(e.queryHash)||(L(this,Fi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=L(this,Fi).get(e.queryHash);n&&(e.destroy(),n===e&&L(this,Fi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,Fi).get(e)}getAll(){return[...L(this,Fi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>mT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>mT(e,r)):n}notify(e){vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){vn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){vn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fi=new WeakMap,aR),zi,pr,Tl,Wi,xa,cR,gH=(cR=class extends _5{constructor(e){super();Se(this,Wi);Se(this,zi);Se(this,pr);Se(this,Tl);this.mutationId=e.mutationId,pe(this,pr,e.mutationCache),pe(this,zi,[]),this.state=e.state||x5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){L(this,zi).includes(e)||(L(this,zi).push(e),this.clearGcTimeout(),L(this,pr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){pe(this,zi,L(this,zi).filter(n=>n!==e)),this.scheduleGc(),L(this,pr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){L(this,zi).length||(this.state.status==="pending"?this.scheduleGc():L(this,pr).remove(this))}continue(){var e;return((e=L(this,Tl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,v,_,E,x,S,T;const n=()=>{He(this,Wi,xa).call(this,{type:"continue"})};pe(this,Tl,E5({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{He(this,Wi,xa).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{He(this,Wi,xa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,pr).canRun(this)}));const r=this.state.status==="pending",s=!L(this,Tl).canStart();try{if(r)n();else{He(this,Wi,xa).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=L(this,pr).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&He(this,Wi,xa).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await L(this,Tl).start();return await((u=(l=L(this,pr).config).onSuccess)==null?void 0:u.call(l,C,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,C,e,this.state.context)),await((p=(f=L(this,pr).config).onSettled)==null?void 0:p.call(f,C,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,C,null,e,this.state.context)),He(this,Wi,xa).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(y=L(this,pr).config).onError)==null?void 0:b.call(y,C,e,this.state.context,this)),await((_=(v=this.options).onError)==null?void 0:_.call(v,C,e,this.state.context)),await((x=(E=L(this,pr).config).onSettled)==null?void 0:x.call(E,void 0,C,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,C,e,this.state.context)),C}finally{He(this,Wi,xa).call(this,{type:"error",error:C})}}finally{L(this,pr).runNext(this)}}},zi=new WeakMap,pr=new WeakMap,Tl=new WeakMap,Wi=new WeakSet,xa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),vn.batch(()=>{L(this,zi).forEach(r=>{r.onMutationUpdate(e)}),L(this,pr).notify({mutation:this,type:"updated",action:e})})},cR);function x5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var No,ci,Bg,lR,mH=(lR=class extends _h{constructor(e={}){super();Se(this,No);Se(this,ci);Se(this,Bg);this.config=e,pe(this,No,new Set),pe(this,ci,new Map),pe(this,Bg,0)}build(e,n,r){const s=new gH({mutationCache:this,mutationId:++Im(this,Bg)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){L(this,No).add(e);const n=Xm(e);if(typeof n=="string"){const r=L(this,ci).get(n);r?r.push(e):L(this,ci).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(L(this,No).delete(e)){const n=Xm(e);if(typeof n=="string"){const r=L(this,ci).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&L(this,ci).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Xm(e);if(typeof n=="string"){const r=L(this,ci).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Xm(e);if(typeof n=="string"){const s=(r=L(this,ci).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){vn.batch(()=>{L(this,No).forEach(e=>{this.notify({type:"removed",mutation:e})}),L(this,No).clear(),L(this,ci).clear()})}getAll(){return Array.from(L(this,No))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yT(n,r))}findAll(e={}){return this.getAll().filter(n=>yT(e,n))}notify(e){vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return vn.batch(()=>Promise.all(e.map(n=>n.continue().catch(yr))))}},No=new WeakMap,ci=new WeakMap,Bg=new WeakMap,lR);function Xm(t){var e;return(e=t.options.scope)==null?void 0:e.id}function bT(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=y5(e.options,e.fetchOptions),b=async(v,_,E)=>{if(g)return Promise.reject();if(_==null&&v.pages.length)return Promise.resolve(v);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:_,direction:E?"backward":"forward",meta:e.options.meta};return w(R),R})(),T=await y(S),{maxPages:C}=e.options,O=E?oH:iH;return{pages:O(v.pages,T,C),pageParams:O(v.pageParams,_,C)}};if(s&&i.length){const v=s==="backward",_=v?yH:ET,E={pages:i,pageParams:o},x=_(r,E);a=await b(E,x,v)}else{const v=t??i.length;do{const _=c===0?o[0]??r.initialPageParam:ET(r,a);if(c>0&&_==null)break;a=await b(a,_),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function ET(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function yH(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Zt,Ha,Va,Ld,Md,Ga,Bd,Fd,uR,wH=(uR=class{constructor(t={}){Se(this,Zt);Se(this,Ha);Se(this,Va);Se(this,Ld);Se(this,Md);Se(this,Ga);Se(this,Bd);Se(this,Fd);pe(this,Zt,t.queryCache||new pH),pe(this,Ha,t.mutationCache||new mH),pe(this,Va,t.defaultOptions||{}),pe(this,Ld,new Map),pe(this,Md,new Map),pe(this,Ga,0)}mount(){Im(this,Ga)._++,L(this,Ga)===1&&(pe(this,Bd,tA.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,Zt).onFocus())})),pe(this,Fd,Qw.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,Zt).onOnline())})))}unmount(){var t,e;Im(this,Ga)._--,L(this,Ga)===0&&((t=L(this,Bd))==null||t.call(this),pe(this,Bd,void 0),(e=L(this,Fd))==null||e.call(this),pe(this,Fd,void 0))}isFetching(t){return L(this,Zt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return L(this,Ha).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,Zt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=L(this,Zt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(yc(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return L(this,Zt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=L(this,Zt).get(r.queryHash),i=s==null?void 0:s.state.data,o=rH(e,i);if(o!==void 0)return L(this,Zt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return vn.batch(()=>L(this,Zt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,Zt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=L(this,Zt);vn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=L(this,Zt);return vn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=vn.batch(()=>L(this,Zt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(yr).catch(yr)}invalidateQueries(t,e={}){return vn.batch(()=>(L(this,Zt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=vn.batch(()=>L(this,Zt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(yr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(yr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=L(this,Zt).build(this,e);return n.isStaleByTime(yc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(yr).catch(yr)}fetchInfiniteQuery(t){return t.behavior=bT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(yr).catch(yr)}ensureInfiniteQueryData(t){return t.behavior=bT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Qw.isOnline()?L(this,Ha).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,Zt)}getMutationCache(){return L(this,Ha)}getDefaultOptions(){return L(this,Va)}setDefaultOptions(t){pe(this,Va,t)}setQueryDefaults(t,e){L(this,Ld).set(Jl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...L(this,Ld).values()],n={};return e.forEach(r=>{rg(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){L(this,Md).set(Jl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...L(this,Md).values()],n={};return e.forEach(r=>{rg(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...L(this,Va).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=XS(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===eA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...L(this,Va).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){L(this,Zt).clear(),L(this,Ha).clear()}},Zt=new WeakMap,Ha=new WeakMap,Va=new WeakMap,Ld=new WeakMap,Md=new WeakMap,Ga=new WeakMap,Bd=new WeakMap,Fd=new WeakMap,uR),Mr,Xe,Fg,gr,Nl,zd,Ka,Ya,zg,Wd,qd,Pl,kl,Ja,Hd,gt,Tf,q_,H_,V_,G_,K_,Y_,J_,S5,dR,vH=(dR=class extends _h{constructor(e,n){super();Se(this,gt);Se(this,Mr);Se(this,Xe);Se(this,Fg);Se(this,gr);Se(this,Nl);Se(this,zd);Se(this,Ka);Se(this,Ya);Se(this,zg);Se(this,Wd);Se(this,qd);Se(this,Pl);Se(this,kl);Se(this,Ja);Se(this,Hd,new Set);this.options=n,pe(this,Mr,e),pe(this,Ya,null),pe(this,Ka,W_()),this.options.experimental_prefetchInRender||L(this,Ka).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,Xe).addObserver(this),_T(L(this,Xe),this.options)?He(this,gt,Tf).call(this):this.updateResult(),He(this,gt,G_).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Q_(L(this,Xe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Q_(L(this,Xe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,He(this,gt,K_).call(this),He(this,gt,Y_).call(this),L(this,Xe).removeObserver(this)}setOptions(e){const n=this.options,r=L(this,Xe);if(this.options=L(this,Mr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof hi(this.options.enabled,L(this,Xe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");He(this,gt,J_).call(this),L(this,Xe).setOptions(this.options),n._defaulted&&!Jw(this.options,n)&&L(this,Mr).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,Xe),observer:this});const s=this.hasListeners();s&&CT(L(this,Xe),r,this.options,n)&&He(this,gt,Tf).call(this),this.updateResult(),s&&(L(this,Xe)!==r||hi(this.options.enabled,L(this,Xe))!==hi(n.enabled,L(this,Xe))||yc(this.options.staleTime,L(this,Xe))!==yc(n.staleTime,L(this,Xe)))&&He(this,gt,q_).call(this);const i=He(this,gt,H_).call(this);s&&(L(this,Xe)!==r||hi(this.options.enabled,L(this,Xe))!==hi(n.enabled,L(this,Xe))||i!==L(this,Ja))&&He(this,gt,V_).call(this,i)}getOptimisticResult(e){const n=L(this,Mr).getQueryCache().build(L(this,Mr),e),r=this.createResult(n,e);return EH(this,r)&&(pe(this,gr,r),pe(this,zd,this.options),pe(this,Nl,L(this,Xe).state)),r}getCurrentResult(){return L(this,gr)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){L(this,Hd).add(e)}getCurrentQuery(){return L(this,Xe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=L(this,Mr).defaultQueryOptions(e),r=L(this,Mr).getQueryCache().build(L(this,Mr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return He(this,gt,Tf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,gr)))}createResult(e,n){var C;const r=L(this,Xe),s=this.options,i=L(this,gr),o=L(this,Nl),a=L(this,zd),l=e!==r?e.state:L(this,Fg),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),R=!O&&_T(e,n),B=O&&CT(e,r,n,s);(R||B)&&(d={...d,...C5(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,y=!0):O=typeof n.placeholderData=="function"?n.placeholderData((C=L(this,qd))==null?void 0:C.state.data,L(this,qd)):n.placeholderData,O!==void 0&&(w="success",f=z_(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===L(this,zg))f=L(this,Wd);else try{pe(this,zg,n.select),f=n.select(f),f=z_(i==null?void 0:i.data,f,n),pe(this,Wd,f),pe(this,Ya,null)}catch(O){pe(this,Ya,O)}L(this,Ya)&&(p=L(this,Ya),f=L(this,Wd),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",_=w==="error",E=v&&b,x=f!==void 0,T={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:_,isInitialLoading:E,isLoading:E,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:_&&!x,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&x,isStale:nA(e,n),refetch:this.refetch,promise:L(this,Ka)};if(this.options.experimental_prefetchInRender){const O=W=>{T.status==="error"?W.reject(T.error):T.data!==void 0&&W.resolve(T.data)},R=()=>{const W=pe(this,Ka,T.promise=W_());O(W)},B=L(this,Ka);switch(B.status){case"pending":e.queryHash===r.queryHash&&O(B);break;case"fulfilled":(T.status==="error"||T.data!==B.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==B.reason)&&R();break}}return T}updateResult(){const e=L(this,gr),n=this.createResult(L(this,Xe),this.options);if(pe(this,Nl,L(this,Xe).state),pe(this,zd,this.options),L(this,Nl).data!==void 0&&pe(this,qd,L(this,Xe)),Jw(n,e))return;pe(this,gr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!L(this,Hd).size)return!0;const o=new Set(i??L(this,Hd));return this.options.throwOnError&&o.add("error"),Object.keys(L(this,gr)).some(a=>{const c=a;return L(this,gr)[c]!==e[c]&&o.has(c)})};He(this,gt,S5).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&He(this,gt,G_).call(this)}},Mr=new WeakMap,Xe=new WeakMap,Fg=new WeakMap,gr=new WeakMap,Nl=new WeakMap,zd=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,zg=new WeakMap,Wd=new WeakMap,qd=new WeakMap,Pl=new WeakMap,kl=new WeakMap,Ja=new WeakMap,Hd=new WeakMap,gt=new WeakSet,Tf=function(e){He(this,gt,J_).call(this);let n=L(this,Xe).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(yr)),n},q_=function(){He(this,gt,K_).call(this);const e=yc(this.options.staleTime,L(this,Xe));if(Yl||L(this,gr).isStale||!B_(e))return;const r=g5(L(this,gr).dataUpdatedAt,e)+1;pe(this,Pl,setTimeout(()=>{L(this,gr).isStale||this.updateResult()},r))},H_=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,Xe)):this.options.refetchInterval)??!1},V_=function(e){He(this,gt,Y_).call(this),pe(this,Ja,e),!(Yl||hi(this.options.enabled,L(this,Xe))===!1||!B_(L(this,Ja))||L(this,Ja)===0)&&pe(this,kl,setInterval(()=>{(this.options.refetchIntervalInBackground||tA.isFocused())&&He(this,gt,Tf).call(this)},L(this,Ja)))},G_=function(){He(this,gt,q_).call(this),He(this,gt,V_).call(this,He(this,gt,H_).call(this))},K_=function(){L(this,Pl)&&(clearTimeout(L(this,Pl)),pe(this,Pl,void 0))},Y_=function(){L(this,kl)&&(clearInterval(L(this,kl)),pe(this,kl,void 0))},J_=function(){const e=L(this,Mr).getQueryCache().build(L(this,Mr),this.options);if(e===L(this,Xe))return;const n=L(this,Xe);pe(this,Xe,e),pe(this,Fg,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},S5=function(e){vn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(L(this,gr))}),L(this,Mr).getQueryCache().notify({query:L(this,Xe),type:"observerResultsUpdated"})})},dR);function bH(t,e){return hi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function _T(t,e){return bH(t,e)||t.state.data!==void 0&&Q_(t,e,e.refetchOnMount)}function Q_(t,e,n){if(hi(e.enabled,t)!==!1&&yc(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&nA(t,e)}return!1}function CT(t,e,n,r){return(t!==e||hi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&nA(t,n)}function nA(t,e){return hi(e.enabled,t)!==!1&&t.isStaleByTime(yc(e.staleTime,t))}function EH(t,e){return!Jw(t.getCurrentResult(),e)}var Qa,Za,Br,Po,Fo,ew,Z_,hR,_H=(hR=class extends _h{constructor(n,r){super();Se(this,Fo);Se(this,Qa);Se(this,Za);Se(this,Br);Se(this,Po);pe(this,Qa,n),this.setOptions(r),this.bindMethods(),He(this,Fo,ew).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=L(this,Qa).defaultMutationOptions(n),Jw(this.options,r)||L(this,Qa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,Br),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Jl(r.mutationKey)!==Jl(this.options.mutationKey)?this.reset():((s=L(this,Br))==null?void 0:s.state.status)==="pending"&&L(this,Br).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=L(this,Br))==null||n.removeObserver(this)}onMutationUpdate(n){He(this,Fo,ew).call(this),He(this,Fo,Z_).call(this,n)}getCurrentResult(){return L(this,Za)}reset(){var n;(n=L(this,Br))==null||n.removeObserver(this),pe(this,Br,void 0),He(this,Fo,ew).call(this),He(this,Fo,Z_).call(this)}mutate(n,r){var s;return pe(this,Po,r),(s=L(this,Br))==null||s.removeObserver(this),pe(this,Br,L(this,Qa).getMutationCache().build(L(this,Qa),this.options)),L(this,Br).addObserver(this),L(this,Br).execute(n)}},Qa=new WeakMap,Za=new WeakMap,Br=new WeakMap,Po=new WeakMap,Fo=new WeakSet,ew=function(){var r;const n=((r=L(this,Br))==null?void 0:r.state)??x5();pe(this,Za,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Z_=function(n){vn.batch(()=>{var r,s,i,o,a,c,l,u;if(L(this,Po)&&this.hasListeners()){const d=L(this,Za).variables,h=L(this,Za).context;(n==null?void 0:n.type)==="success"?((s=(r=L(this,Po)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=L(this,Po)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=L(this,Po)).onError)==null||c.call(a,n.error,d,h),(u=(l=L(this,Po)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(L(this,Za))})})},hR);function CH(t){return JSON.stringify(t,(e,n)=>xH(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function xH(t){if(!xT(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!xT(n)||!n.hasOwnProperty("isPrototypeOf"))}function xT(t){return Object.prototype.toString.call(t)==="[object Object]"}function A5(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:v,enabled:_,notifyOnChangeProps:E,placeholderData:x,refetchInterval:S,refetchIntervalInBackground:T,refetchOnMount:C,refetchOnReconnect:O,refetchOnWindowFocus:R,retryOnMount:B,select:W,staleTime:M,suspense:I,throwOnError:A,config:j,connector:P,query:k,...U}=t;return U}function SH(t){return{mutationFn(e){return Zy(t,e)},mutationKey:["connect"]}}function AH(t){return{mutationFn(e){return s5(t,e)},mutationKey:["disconnect"]}}function IH(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return eq(t,{...i,address:r})},queryKey:TH(e)}}function TH(t={}){return["ensName",A5(t)]}function NH(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return tq(t,{...o,connector:r})},queryKey:PH(e)}}function PH(t={}){const{connector:e,...n}=t;return["walletClient",{...A5(n),connectorUid:e==null?void 0:e.uid}]}var I5=D.createContext(void 0),rA=t=>{const e=D.useContext(I5);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},kH=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(I5.Provider,{value:t,children:e})),T5=D.createContext(!1),OH=()=>D.useContext(T5);T5.Provider;function RH(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var $H=D.createContext(RH()),DH=()=>D.useContext($H),jH=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},UH=t=>{D.useEffect(()=>{t.clearReset()},[t])},LH=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||w5(n,[t.error,r])),MH=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},BH=(t,e)=>t.isLoading&&t.isFetching&&!e,FH=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,ST=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function zH(t,e,n){var d,h,f,p,g;const r=OH(),s=DH(),i=rA(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",MH(o),jH(o,s),UH(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(w=>{const y=u?c.subscribe(vn.batchCalls(w)):yr;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),FH(o,l))throw ST(o,c,s);if(LH({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Yl&&BH(l,r)){const w=a?ST(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(yr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function WH(t,e){return zH(t,vH)}function N5(t,e){const n=rA(),[r]=D.useState(()=>new _H(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(vn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(yr)},[r]);if(s.error&&w5(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function P5(t){const e=WH({...t,queryKeyHashFn:CH});return e.queryKey=t.queryKey,e}function k5(t={}){const e=Bc(t);return D.useSyncExternalStore(n=>oq(e,{onChange:n}),()=>uT(e),()=>uT(e))}function qH(t={}){const e=Bc(t);return D.useSyncExternalStore(n=>a5(e,{onChange:n}),()=>dT(e),()=>dT(e))}function O5(t={}){const{mutation:e}=t,n=Bc(t),r=SH(n),{mutate:s,mutateAsync:i,...o}=N5({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:qH({config:n})}}function HH(t={}){const e=Bc(t);return D.useSyncExternalStore(n=>aq(e,{onChange:n}),()=>Bi(e),()=>Bi(e))}function R5(t={}){const{mutation:e}=t,n=Bc(t),r=AH(n),{mutate:s,mutateAsync:i,...o}=N5({...e,...r});return{...o,connectors:HH({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function $5(t={}){const{address:e,query:n={}}=t,r=Bc(t),s=k5({config:r}),i=IH(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return P5({...n,...i,enabled:o})}function D5(t={}){const{query:e={},...n}=t,r=Bc(n),s=rA(),{address:i,connector:o,status:a}=nm({config:r}),c=k5({config:r}),l=t.connector??o,{queryKey:u,...d}=NH(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),P5({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}const VH="_verified_lvyh0_1",sA={verified:VH},GH=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:sA.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),KH=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:sA.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),YH=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:sA.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function j5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=j5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function wc(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=j5(t))&&(r&&(r+=" "),r+=e);return r}const JH="_root_98iqw_1",QH="_article_98iqw_21",AT={root:JH,article:QH},iA=({className:t,children:e})=>m.jsx("div",{className:wc("react-tweet-theme",AT.root,t),children:m.jsx("article",{className:AT.article,children:e})}),U5=t=>m.jsx("img",{...t}),ZH="_header_nqq4j_1",XH="_avatar_nqq4j_11",eV="_avatarOverflow_nqq4j_16",tV="_avatarSquare_nqq4j_23",nV="_avatarShadow_nqq4j_26",rV="_author_nqq4j_37",sV="_authorLink_nqq4j_44",iV="_authorVerified_nqq4j_53",oV="_authorLinkText_nqq4j_56",aV="_authorMeta_nqq4j_63",cV="_authorFollow_nqq4j_66",lV="_username_nqq4j_69",uV="_follow_nqq4j_74",dV="_separator_nqq4j_82",hV="_brand_nqq4j_86",fV="_twitterIcon_nqq4j_90",Dn={header:ZH,avatar:XH,avatarOverflow:eV,avatarSquare:tV,avatarShadow:nV,author:rV,authorLink:sV,authorVerified:iV,authorLinkText:oV,authorMeta:aV,authorFollow:cV,username:lV,follow:uV,separator:dV,brand:hV,twitterIcon:fV},pV="_verifiedOld_lcna5_1",gV="_verifiedBlue_lcna5_4",mV="_verifiedGovernment_lcna5_7",zb={verifiedOld:pV,verifiedBlue:gV,verifiedGovernment:mV},L5=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(GH,{}),s=zb.verifiedBlue;if(n)switch(t.is_blue_verified||(s=zb.verifiedOld),t.verified_type){case"Government":r=m.jsx(YH,{}),s=zb.verifiedGovernment;break;case"Business":r=m.jsx(KH,{}),s=null;break}return n?m.jsx("div",{className:wc(e,s),children:r}):null},yV=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:U5,{user:s}=t;return m.jsxs("div",{className:Dn.header,children:[m.jsxs("a",{href:t.url,className:Dn.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:wc(Dn.avatarOverflow,s.profile_image_shape==="Square"&&Dn.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Dn.avatarOverflow,children:m.jsx("div",{className:Dn.avatarShadow})})]}),m.jsxs("div",{className:Dn.author,children:[m.jsxs("a",{href:t.url,className:Dn.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Dn.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(L5,{user:s,className:Dn.authorVerified})]}),m.jsxs("div",{className:Dn.authorMeta,children:[m.jsx("a",{href:t.url,className:Dn.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Dn.authorFollow,children:[m.jsx("span",{className:Dn.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:Dn.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Dn.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Dn.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},wV="_root_1ec15_1",vV={root:wV},bV=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:vV.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),EV="_root_eihfa_1",_V={root:EV},CV=({href:t,children:e})=>m.jsx("a",{href:t,className:_V.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),xV="_root_1xq52_1",SV={root:xV},AV=({tweet:t})=>m.jsx("p",{className:SV.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(CV,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),IT=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,M5=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,IV=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,TV=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,NV=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,PV=t=>`https://x.com/hashtag/${t.text}`,kV=t=>`https://x.com/search?q=%24${t.text}`,OV=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,B5=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},RV=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},$V=t=>{const e=RV(t);return e.length>1?e[1]:e[0]},X_=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function TT(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Zh(n,"hashtag",t.entities.hashtags),Zh(n,"mention",t.entities.user_mentions),Zh(n,"url",t.entities.urls),Zh(n,"symbol",t.entities.symbols),t.entities.media&&Zh(n,"media",t.entities.media),DV(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:PV(r),text:s});case"mention":return Object.assign(r,{href:M5(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:kV(r),text:s});default:return Object.assign(r,{text:s})}})}function Zh(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function DV(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const jV=t=>({...t,url:IT(t),user:{...t.user,url:M5(t),follow_url:NV(t)},like_url:IV(t),reply_url:TV(t),in_reply_to_url:t.in_reply_to_screen_name?OV(t):void 0,entities:TT(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:IT(t.quoted_tweet),entities:TT(t.quoted_tweet)}:void 0}),UV="_root_g9tkv_1",LV="_rounded_g9tkv_6",MV="_mediaWrapper_g9tkv_10",BV="_grid2Columns_g9tkv_17",FV="_grid3_g9tkv_20",zV="_grid2x2_g9tkv_23",WV="_mediaContainer_g9tkv_26",qV="_mediaLink_g9tkv_34",HV="_skeleton_g9tkv_38",VV="_image_g9tkv_43",os={root:UV,rounded:LV,mediaWrapper:MV,grid2Columns:BV,grid3:FV,grid2x2:zV,mediaContainer:WV,mediaLink:qV,skeleton:HV,image:VV},GV="_anchor_fp31d_1",KV="_videoButton_fp31d_17",YV="_videoButtonIcon_fp31d_35",JV="_watchOnTwitter_fp31d_44",QV="_viewReplies_fp31d_60",Au={anchor:GV,videoButton:KV,videoButtonIcon:YV,watchOnTwitter:JV,viewReplies:QV},ZV=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=$V(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:os.image,poster:B5(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Au.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Au.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Au.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Au.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:wc(Au.anchor,Au.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},XV=t=>m.jsx("img",{...t}),NT=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},F5=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:XV;return m.jsx("div",{className:wc(os.root,!n&&os.rounded),children:m.jsx("div",{className:wc(os.mediaWrapper,o>1&&os.grid2Columns,o===3&&os.grid3,o>4&&os.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:wc(os.mediaContainer,os.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:os.skeleton,style:NT(l,o)}),m.jsx(c,{src:B5(l,"small"),alt:l.ext_alt_text||"Image",className:os.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:os.mediaContainer,children:[m.jsx("div",{className:os.skeleton,style:NT(l,o)}),m.jsx(ZV,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},eG={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},tG=new Intl.DateTimeFormat("en-US",eG),nG=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},rG=t=>{const e=nG(tG.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},sG="_root_i24yn_1",iG={root:sG},oG=({tweet:t})=>{const e=new Date(t.created_at),n=rG(e);return m.jsx("a",{className:iG.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},aG="_info_19qcj_1",cG="_infoLink_19qcj_10",lG="_infoIcon_19qcj_30",Wb={info:aG,infoLink:cG,infoIcon:lG},uG=({tweet:t})=>m.jsxs("div",{className:Wb.info,children:[m.jsx(oG,{tweet:t}),m.jsx("a",{className:Wb.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Wb.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),dG="_actions_n2anf_1",hG="_like_n2anf_13",fG="_reply_n2anf_14",pG="_copy_n2anf_15",gG="_likeIconWrapper_n2anf_27",mG="_likeCount_n2anf_30",yG="_replyIconWrapper_n2anf_35",wG="_copyIconWrapper_n2anf_36",vG="_likeIcon_n2anf_27",bG="_replyIcon_n2anf_35",EG="_copyIcon_n2anf_36",_G="_replyText_n2anf_56",CG="_copyText_n2anf_57",Fr={actions:dG,like:hG,reply:fG,copy:pG,likeIconWrapper:gG,likeCount:mG,replyIconWrapper:yG,copyIconWrapper:wG,likeIcon:vG,replyIcon:bG,copyIcon:EG,replyText:_G,copyText:CG},xG=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:Fr.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:Fr.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:Fr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:Fr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:Fr.copyText,children:e?"Copied!":"Copy link"})]})},SG=({tweet:t})=>{const e=X_(t.favorite_count);return m.jsxs("div",{className:Fr.actions,children:[m.jsxs("a",{className:Fr.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:Fr.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Fr.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:Fr.likeCount,children:e})]}),m.jsxs("a",{className:Fr.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:Fr.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Fr.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:Fr.replyText,children:"Reply"})]}),m.jsx(xG,{tweet:t})]})},AG="_replies_1cutb_1",IG="_link_1cutb_4",TG="_text_1cutb_23",qb={replies:AG,link:IG,text:TG},NG=({tweet:t})=>m.jsx("div",{className:qb.replies,children:m.jsx("a",{className:qb.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:qb.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${X_(t.conversation_count)} reply`:`Read ${X_(t.conversation_count)} replies`})})}),PG="_root_q5799_1",kG="_article_q5799_16",PT={root:PG,article:kG},OG=({tweet:t,children:e})=>m.jsx("div",{className:PT.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:PT.article,children:e})}),RG="_header_r31i5_1",$G="_avatar_r31i5_11",DG="_avatarSquare_r31i5_17",jG="_author_r31i5_21",UG="_authorText_r31i5_26",LG="_username_r31i5_33",Gc={header:RG,avatar:$G,avatarSquare:DG,author:jG,authorText:UG,username:LG},MG=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Gc.header,children:[m.jsx("a",{href:t.url,className:Gc.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:wc(Gc.avatarOverflow,e.profile_image_shape==="Square"&&Gc.avatarSquare),children:m.jsx(U5,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Gc.author,children:[m.jsx("div",{className:Gc.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(L5,{user:e}),m.jsx("div",{className:Gc.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},BG="_root_175ot_1",FG={root:BG},zG=({tweet:t})=>m.jsx("p",{className:FG.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),WG=({tweet:t})=>{var e;return m.jsxs(OG,{tweet:t,children:[m.jsx(MG,{tweet:t}),m.jsx(zG,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(F5,{quoted:!0,tweet:t}):null]})},qG=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>jV(t),[t]);return m.jsxs(iA,{children:[m.jsx(yV,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(bV,{tweet:r}),m.jsx(AV,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(F5,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(WG,{tweet:r.quoted_tweet}),m.jsx(uG,{tweet:r}),m.jsx(SG,{tweet:r}),m.jsx(NG,{tweet:r})]})},HG="_root_16yxa_1",VG={root:HG},GG=t=>m.jsx(iA,{children:m.jsxs("div",{className:VG.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),KG="_skeleton_oi7hr_1",YG={skeleton:KG},ey=({style:t})=>m.jsx("span",{className:YG.skeleton,style:t}),JG="_root_17qqv_1",QG={root:JG},ZG=()=>m.jsxs(iA,{className:QG.root,children:[m.jsx(ey,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(ey,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(ey,{style:{height:"2rem"}}),m.jsx(ey,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var z5={exports:{}},W5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=D;function XG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eK=typeof Object.is=="function"?Object.is:XG,tK=sh.useState,nK=sh.useEffect,rK=sh.useLayoutEffect,sK=sh.useDebugValue;function iK(t,e){var n=e(),r=tK({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return rK(function(){s.value=n,s.getSnapshot=e,Hb(s)&&i({inst:s})},[t,n,e]),nK(function(){return Hb(s)&&i({inst:s}),t(function(){Hb(s)&&i({inst:s})})},[t]),sK(n),n}function Hb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!eK(t,n)}catch{return!0}}function oK(t,e){return e()}var aK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?oK:iK;W5.useSyncExternalStore=sh.useSyncExternalStore!==void 0?sh.useSyncExternalStore:aK;z5.exports=W5;var cK=z5.exports;const q5=0,H5=1,V5=2,kT=3;var OT=Object.prototype.hasOwnProperty;function eC(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&eC(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(OT.call(t,n)&&++r&&!OT.call(e,n)||!(n in e)||!eC(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const ko=new WeakMap,nc=()=>{},wr=nc(),tC=Object,nt=t=>t===wr,Gi=t=>typeof t=="function",Pc=(t,e)=>({...t,...e}),G5=t=>Gi(t.then),Vb={},ty={},oA="undefined",rm=typeof window!=oA,nC=typeof document!=oA,lK=rm&&"Deno"in window,uK=()=>rm&&typeof window.requestAnimationFrame!=oA,K5=(t,e)=>{const n=ko.get(t);return[()=>!nt(e)&&t.get(e)||Vb,r=>{if(!nt(e)){const s=t.get(e);e in ty||(ty[e]=s),n[5](e,Pc(s,r),s||Vb)}},n[6],()=>!nt(e)&&e in ty?ty[e]:!nt(e)&&t.get(e)||Vb]};let rC=!0;const dK=()=>rC,[sC,iC]=rm&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[nc,nc],hK=()=>{const t=nC&&document.visibilityState;return nt(t)||t!=="hidden"},fK=t=>(nC&&document.addEventListener("visibilitychange",t),sC("focus",t),()=>{nC&&document.removeEventListener("visibilitychange",t),iC("focus",t)}),pK=t=>{const e=()=>{rC=!0,t()},n=()=>{rC=!1};return sC("online",e),sC("offline",n),()=>{iC("online",e),iC("offline",n)}},gK={isOnline:dK,isVisible:hK},mK={initFocus:fK,initReconnect:pK},RT=!gs.useId,sg=!rm||lK,yK=t=>uK()?window.requestAnimationFrame(t):setTimeout(t,1),Gb=sg?D.useEffect:D.useLayoutEffect,Kb=typeof navigator<"u"&&navigator.connection,$T=!sg&&Kb&&(["slow-2g","2g"].includes(Kb.effectiveType)||Kb.saveData),ny=new WeakMap,Yb=(t,e)=>tC.prototype.toString.call(t)===`[object ${e}]`;let wK=0;const oC=t=>{const e=typeof t,n=Yb(t,"Date"),r=Yb(t,"RegExp"),s=Yb(t,"Object");let i,o;if(tC(t)===t&&!n&&!r){if(i=ny.get(t),i)return i;if(i=++wK+"~",ny.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=oC(t[o])+",";ny.set(t,i)}if(s){i="#";const a=tC.keys(t).sort();for(;!nt(o=a.pop());)nt(t[o])||(i+=o+":"+oC(t[o])+",");ny.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},aA=t=>{if(Gi(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?oC(t):"",[t,e]};let vK=0;const aC=()=>++vK;async function Y5(...t){const[e,n,r,s]=t,i=Pc({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Gi(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=aA(h);if(!f)return;const[p,g]=K5(e,f),[w,y,b,v]=ko.get(e),_=()=>{const W=w[f];return(Gi(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],W&&W[0])?W[0](V5).then(()=>p().data):p().data};if(t.length<3)return _();let E=r,x;const S=aC();y[f]=[S,0];const T=!nt(c),C=p(),O=C.data,R=C._c,B=nt(R)?O:R;if(T&&(c=Gi(c)?c(B,O):c,g({data:c,_c:B})),Gi(E))try{E=E(B)}catch(W){x=W}if(E&&G5(E))if(E=await E.catch(W=>{x=W}),S!==y[f][0]){if(x)throw x;return E}else x&&T&&l(x)&&(o=!0,g({data:B,_c:wr}));if(o&&!x)if(Gi(o)){const W=o(E,B);g({data:W,error:wr,_c:wr})}else g({data:E,error:wr,_c:wr});if(y[f][1]=aC(),Promise.resolve(_()).then(()=>{g({_c:wr})}),x){if(u)throw x;return}return E}}const DT=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},bK=(t,e)=>{if(!ko.has(t)){const n=Pc(mK,e),r=Object.create(null),s=Y5.bind(wr,t);let i=nc;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!ko.has(t)&&(ko.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!sg)){const u=n.initFocus(setTimeout.bind(wr,DT.bind(wr,r,q5))),d=n.initReconnect(setTimeout.bind(wr,DT.bind(wr,r,H5)));i=()=>{u&&u(),d&&d(),ko.delete(t)}}};return l(),[t,s,l,i]}return[t,ko.get(t)[4]]},EK=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!nt(i)&&o>i||setTimeout(r,a,s)},_K=eC,[J5,CK]=bK(new Map),xK=Pc({onLoadingSlow:nc,onSuccess:nc,onError:nc,onErrorRetry:EK,onDiscarded:nc,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:$T?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:$T?5e3:3e3,compare:_K,isPaused:()=>!1,cache:J5,mutate:CK,fallback:{}},gK),SK=(t,e)=>{const n=Pc(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Pc(s,o))}return n},AK=D.createContext({}),IK="$inf$",Q5=rm&&window.__SWR_DEVTOOLS_USE__,TK=Q5?window.__SWR_DEVTOOLS_USE__:[],NK=()=>{Q5&&(window.__SWR_DEVTOOLS_REACT__=gs)},PK=t=>Gi(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],kK=()=>Pc(xK,D.useContext(AK)),OK=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=aA(e),[,,,a]=ko.get(J5);if(o.startsWith(IK))return n(...i);const c=a[o];return nt(c)?n(...i):(delete a[o],c)}),r),RK=TK.concat(OK),$K=t=>function(...n){const r=kK(),[s,i,o]=PK(n),a=SK(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(RK);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},DK=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};NK();const Jb=gs.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),Qb={dedupe:!0},jK=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=ko.get(r),[y,b]=aA(t),v=D.useRef(!1),_=D.useRef(!1),E=D.useRef(y),x=D.useRef(e),S=D.useRef(n),T=()=>S.current,C=()=>T().isVisible()&&T().isOnline(),[O,R,B,W]=K5(r,y),M=D.useRef({}).current,I=nt(o)?nt(n.fallback)?wr:n.fallback[y]:o,A=(st,Le)=>{for(const Rt in M){const $t=Rt;if($t==="data"){if(!s(st[$t],Le[$t])&&(!nt(st[$t])||!s(Z,Le[$t])))return!1}else if(Le[$t]!==st[$t])return!1}return!0},j=D.useMemo(()=>{const st=!y||!e?!1:nt(a)?T().isPaused()||i?!1:c!==!1:a,Le=nn=>{const $n=Pc(nn);return delete $n._k,st?{isValidating:!0,isLoading:!0,...$n}:$n},Rt=O(),$t=W(),hr=Le(Rt),ns=Rt===$t?hr:Le($t);let Jt=hr;return[()=>{const nn=Le(O());return A(nn,Jt)?(Jt.data=nn.data,Jt.isLoading=nn.isLoading,Jt.isValidating=nn.isValidating,Jt.error=nn.error,Jt):(Jt=nn,nn)},()=>ns]},[r,y]),P=cK.useSyncExternalStore(D.useCallback(st=>B(y,(Le,Rt)=>{A(Rt,Le)||st()}),[r,y]),j[0],j[1]),k=!v.current,U=f[y]&&f[y].length>0,z=P.data,V=nt(z)?I&&G5(I)?Jb(I):I:z,Q=P.error,Y=D.useRef(V),Z=h?nt(z)?nt(Y.current)?V:Y.current:z:V,se=U&&!nt(Q)?!1:k&&!nt(a)?a:T().isPaused()?!1:i?nt(V)?!1:c:nt(V)||c,Ne=!!(y&&e&&k&&se),ke=nt(P.isValidating)?Ne:P.isValidating,$e=nt(P.isLoading)?Ne:P.isLoading,Ke=D.useCallback(async st=>{const Le=x.current;if(!y||!Le||_.current||T().isPaused())return!1;let Rt,$t,hr=!0;const ns=st||{},Jt=!g[y]||!ns.dedupe,nn=()=>RT?!_.current&&y===E.current&&v.current:y===E.current,$n={isValidating:!1,isLoading:!1},ta=()=>{R($n)},Wc=()=>{const _n=g[y];_n&&_n[1]===$t&&delete g[y]},na={isValidating:!0};nt(O().data)&&(na.isLoading=!0);try{if(Jt&&(R(na),n.loadingTimeout&&nt(O().data)&&setTimeout(()=>{hr&&nn()&&T().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[Le(b),aC()]),[Rt,$t]=g[y],Rt=await Rt,Jt&&setTimeout(Wc,n.dedupingInterval),!g[y]||g[y][1]!==$t)return Jt&&nn()&&T().onDiscarded(y),!1;$n.error=wr;const _n=p[y];if(!nt(_n)&&($t<=_n[0]||$t<=_n[1]||_n[1]===0))return ta(),Jt&&nn()&&T().onDiscarded(y),!1;const Ir=O().data;$n.data=s(Ir,Rt)?Ir:Rt,Jt&&nn()&&T().onSuccess(Rt,y,n)}catch(_n){Wc();const Ir=T(),{shouldRetryOnError:qc}=Ir;Ir.isPaused()||($n.error=_n,Jt&&nn()&&(Ir.onError(_n,y,Ir),(qc===!0||Gi(qc)&&qc(_n))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||C())&&Ir.onErrorRetry(_n,y,Ir,Cu=>{const ra=f[y];ra&&ra[0]&&ra[0](kT,Cu)},{retryCount:(ns.retryCount||0)+1,dedupe:!0})))}return hr=!1,ta(),!0},[y,r]),Yt=D.useCallback((...st)=>Y5(r,E.current,...st),[]);if(Gb(()=>{x.current=e,S.current=n,nt(z)||(Y.current=z)}),Gb(()=>{if(!y)return;const st=Ke.bind(wr,Qb);let Le=0;T().revalidateOnFocus&&(Le=Date.now()+T().focusThrottleInterval);const $t=DK(y,f,(hr,ns={})=>{if(hr==q5){const Jt=Date.now();T().revalidateOnFocus&&Jt>Le&&C()&&(Le=Jt+T().focusThrottleInterval,st())}else if(hr==H5)T().revalidateOnReconnect&&C()&&st();else{if(hr==V5)return Ke();if(hr==kT)return Ke(ns)}});return _.current=!1,E.current=y,v.current=!0,R({_k:b}),se&&(nt(V)||sg?st():yK(st)),()=>{_.current=!0,$t()}},[y]),Gb(()=>{let st;function Le(){const $t=Gi(l)?l(O().data):l;$t&&st!==-1&&(st=setTimeout(Rt,$t))}function Rt(){!O().error&&(u||T().isVisible())&&(d||T().isOnline())?Ke(Qb).then(Le):Le()}return Le(),()=>{st&&(clearTimeout(st),st=-1)}},[l,u,d,y]),D.useDebugValue(Z),i&&nt(V)&&y){if(!RT&&sg)throw new Error("Fallback data is required when using Suspense in SSR.");x.current=e,S.current=n,_.current=!1;const st=w[y];if(!nt(st)){const Le=Yt(st);Jb(Le)}if(nt(Q)){const Le=Ke(Qb);nt(Z)||(Le.status="fulfilled",Le.value=!0),Jb(Le)}else throw Q}return{mutate:Yt,get data(){return M.data=!0,Z},get error(){return M.error=!0,Q},get isValidating(){return M.isValidating=!0,ke},get isLoading(){return M.isLoading=!0,$e}}},jT=$K(jK);class UK extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const LK=jT.default||jT,MK="https://react-tweet.vercel.app";async function BK([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new UK({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const FK=(t,e,n)=>{const{isLoading:r,data:s,error:i}=LK(()=>e||t?[e||t&&`${MK}/api/tweet/${t}`,n]:null,BK,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},zK=({id:t,apiUrl:e,fallback:n=m.jsx(ZG,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=FK(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||GG;return m.jsx(l,{error:i?i(a):a})}return m.jsx(qG,{tweet:o,components:r})};var sv={exports:{}},Z5={},X5={exports:{}},WK="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qK=WK,HK=qK;function e8(){}function t8(){}t8.resetWarningCache=e8;var VK=function(){function t(r,s,i,o,a,c){if(c!==HK){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:t8,resetWarningCache:e8};return n.PropTypes=n,n};X5.exports=VK();var n8=X5.exports;function r8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=r8(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function UT(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=r8(t))&&(r&&(r+=" "),r+=e);return r}const GK=Object.freeze(Object.defineProperty({__proto__:null,clsx:UT,default:UT},Symbol.toStringTag,{value:"Module"})),KK=T0(GK);var tn={},oo={};Object.defineProperty(oo,"__esModule",{value:!0});oo.dontSetMe=XK;oo.findInArray=YK;oo.int=ZK;oo.isFunction=JK;oo.isNum=QK;function YK(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function JK(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function QK(t){return typeof t=="number"&&!isNaN(t)}function ZK(t){return parseInt(t,10)}function XK(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.browserPrefixToKey=i8;hu.browserPrefixToStyle=eY;hu.default=void 0;hu.getPrefix=s8;const Zb=["Moz","Webkit","O","ms"];function s8(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<Zb.length;r++)if(i8(e,Zb[r])in n)return Zb[r];return""}function i8(t,e){return e?"".concat(e).concat(tY(t)):t}function eY(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function tY(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}hu.default=s8();Object.defineProperty(tn,"__esModule",{value:!0});tn.addClassName=c8;tn.addEvent=sY;tn.addUserSelectStyles=gY;tn.createCSSTransform=dY;tn.createSVGTransform=hY;tn.getTouch=fY;tn.getTouchIdentifier=pY;tn.getTranslation=cA;tn.innerHeight=cY;tn.innerWidth=lY;tn.matchesSelector=a8;tn.matchesSelectorAndParentsTo=rY;tn.offsetXYFromParent=uY;tn.outerHeight=oY;tn.outerWidth=aY;tn.removeClassName=l8;tn.removeEvent=iY;tn.removeUserSelectStyles=mY;var ws=oo,LT=nY(hu);function o8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(o8=function(r){return r?n:e})(t)}function nY(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=o8(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let ry="";function a8(t,e){return ry||(ry=(0,ws.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,ws.isFunction)(t[n])})),(0,ws.isFunction)(t[ry])?t[ry](e):!1}function rY(t,e,n){let r=t;do{if(a8(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function sY(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function iY(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function oY(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ws.int)(n.borderTopWidth),e+=(0,ws.int)(n.borderBottomWidth),e}function aY(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ws.int)(n.borderLeftWidth),e+=(0,ws.int)(n.borderRightWidth),e}function cY(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ws.int)(n.paddingTop),e-=(0,ws.int)(n.paddingBottom),e}function lY(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ws.int)(n.paddingLeft),e-=(0,ws.int)(n.paddingRight),e}function uY(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function dY(t,e){const n=cA(t,e,"px");return{[(0,LT.browserPrefixToKey)("transform",LT.default)]:n}}function hY(t,e){return cA(t,e,"")}function cA(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function fY(t,e){return t.targetTouches&&(0,ws.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,ws.findInArray)(t.changedTouches,n=>e===n.identifier)}function pY(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function gY(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&c8(t.body,"react-draggable-transparent-selection")}function mY(t){if(t)try{if(t.body&&l8(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function c8(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function l8(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.canDragX=vY;ao.canDragY=bY;ao.createCoreData=_Y;ao.createDraggableData=CY;ao.getBoundPosition=yY;ao.getControlPosition=EY;ao.snapToGrid=wY;var as=oo,yd=tn;function yY(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:xY(r);const s=lA(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,as.int)(u.paddingLeft)+(0,as.int)(l.marginLeft),top:-s.offsetTop+(0,as.int)(u.paddingTop)+(0,as.int)(l.marginTop),right:(0,yd.innerWidth)(c)-(0,yd.outerWidth)(s)-s.offsetLeft+(0,as.int)(u.paddingRight)-(0,as.int)(l.marginRight),bottom:(0,yd.innerHeight)(c)-(0,yd.outerHeight)(s)-s.offsetTop+(0,as.int)(u.paddingBottom)-(0,as.int)(l.marginBottom)}}return(0,as.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,as.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,as.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,as.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function wY(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function vY(t){return t.props.axis==="both"||t.props.axis==="x"}function bY(t){return t.props.axis==="both"||t.props.axis==="y"}function EY(t,e,n){const r=typeof e=="number"?(0,yd.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=lA(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,yd.offsetXYFromParent)(r||t,i,n.props.scale)}function _Y(t,e,n){const r=!(0,as.isNum)(t.lastX),s=lA(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function CY(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function xY(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function lA(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var iv={},ov={};Object.defineProperty(ov,"__esModule",{value:!0});ov.default=SY;function SY(){}Object.defineProperty(iv,"__esModule",{value:!0});iv.default=void 0;var Xb=IY(D),Tr=uA(n8),AY=uA(NS),Xn=tn,ca=ao,e1=oo,Xh=uA(ov);function uA(t){return t&&t.__esModule?t:{default:t}}function u8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(u8=function(r){return r?n:e})(t)}function IY(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=u8(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function fr(t,e,n){return e=TY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TY(t){var e=NY(t,"string");return typeof e=="symbol"?e:String(e)}function NY(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ti={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let la=ti.mouse,av=class extends Xb.Component{constructor(){super(...arguments),fr(this,"dragging",!1),fr(this,"lastX",NaN),fr(this,"lastY",NaN),fr(this,"touchIdentifier",null),fr(this,"mounted",!1),fr(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Xn.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Xn.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,Xn.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,ca.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,ca.createCoreData)(this,o,a);(0,Xh.default)("DraggableCore: handleDragStart: %j",c),(0,Xh.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Xn.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Xn.addEvent)(r,la.move,this.handleDrag),(0,Xn.addEvent)(r,la.stop,this.handleDragStop))}),fr(this,"handleDrag",e=>{const n=(0,ca.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,ca.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,ca.createCoreData)(this,r,s);if((0,Xh.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),fr(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,ca.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,ca.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,ca.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Xn.removeUserSelectStyles)(a.ownerDocument),(0,Xh.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Xh.default)("DraggableCore: Removing handlers"),(0,Xn.removeEvent)(a.ownerDocument,la.move,this.handleDrag),(0,Xn.removeEvent)(a.ownerDocument,la.stop,this.handleDragStop))}),fr(this,"onMouseDown",e=>(la=ti.mouse,this.handleDragStart(e))),fr(this,"onMouseUp",e=>(la=ti.mouse,this.handleDragStop(e))),fr(this,"onTouchStart",e=>(la=ti.touch,this.handleDragStart(e))),fr(this,"onTouchEnd",e=>(la=ti.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Xn.addEvent)(e,ti.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Xn.removeEvent)(n,ti.mouse.move,this.handleDrag),(0,Xn.removeEvent)(n,ti.touch.move,this.handleDrag),(0,Xn.removeEvent)(n,ti.mouse.stop,this.handleDragStop),(0,Xn.removeEvent)(n,ti.touch.stop,this.handleDragStop),(0,Xn.removeEvent)(e,ti.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Xn.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:AY.default.findDOMNode(this)}render(){return Xb.cloneElement(Xb.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};iv.default=av;fr(av,"displayName","DraggableCore");fr(av,"propTypes",{allowAnyClick:Tr.default.bool,children:Tr.default.node.isRequired,disabled:Tr.default.bool,enableUserSelectHack:Tr.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Tr.default.arrayOf(Tr.default.number),handle:Tr.default.string,cancel:Tr.default.string,nodeRef:Tr.default.object,onStart:Tr.default.func,onDrag:Tr.default.func,onStop:Tr.default.func,onMouseDown:Tr.default.func,scale:Tr.default.number,className:e1.dontSetMe,style:e1.dontSetMe,transform:e1.dontSetMe});fr(av,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(D),n=u(n8),r=u(NS),s=u(KK),i=tn,o=ao,a=oo,c=u(iv),l=u(ov);function u(b){return b&&b.__esModule?b:{default:b}}function d(b){if(typeof WeakMap!="function")return null;var v=new WeakMap,_=new WeakMap;return(d=function(E){return E?_:v})(b)}function h(b,v){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var _=d(v);if(_&&_.has(b))return _.get(b);var E={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in b)if(S!=="default"&&Object.prototype.hasOwnProperty.call(b,S)){var T=x?Object.getOwnPropertyDescriptor(b,S):null;T&&(T.get||T.set)?Object.defineProperty(E,S,T):E[S]=b[S]}return E.default=b,_&&_.set(b,E),E}function f(){return f=Object.assign?Object.assign.bind():function(b){for(var v=1;v<arguments.length;v++){var _=arguments[v];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(b[E]=_[E])}return b},f.apply(this,arguments)}function p(b,v,_){return v=g(v),v in b?Object.defineProperty(b,v,{value:_,enumerable:!0,configurable:!0,writable:!0}):b[v]=_,b}function g(b){var v=w(b,"string");return typeof v=="symbol"?v:String(v)}function w(b,v){if(typeof b!="object"||b===null)return b;var _=b[Symbol.toPrimitive];if(_!==void 0){var E=_.call(b,v);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(b)}class y extends e.Component{static getDerivedStateFromProps(v,_){let{position:E}=v,{prevPropsPosition:x}=_;return E&&(!x||E.x!==x.x||E.y!==x.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:E,prevPropsPosition:x}),{x:E.x,y:E.y,prevPropsPosition:{...E}}):null}constructor(v){super(v),p(this,"onDragStart",(_,E)=>{if((0,l.default)("Draggable: onDragStart: %j",E),this.props.onStart(_,(0,o.createDraggableData)(this,E))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(_,E)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",E);const x=(0,o.createDraggableData)(this,E),S={x:x.x,y:x.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:O}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[R,B]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=R,S.y=B,S.slackX=this.state.slackX+(C-S.x),S.slackY=this.state.slackY+(O-S.y),x.x=S.x,x.y=S.y,x.deltaX=S.x-this.state.x,x.deltaY=S.y-this.state.y}if(this.props.onDrag(_,x)===!1)return!1;this.setState(S)}),p(this,"onDragStop",(_,E)=>{if(!this.state.dragging||this.props.onStop(_,(0,o.createDraggableData)(this,E))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",E);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:O}=this.props.position;S.x=C,S.y=O}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var v,_;return(v=(_=this.props)===null||_===void 0||(_=_.nodeRef)===null||_===void 0?void 0:_.current)!==null&&v!==void 0?v:r.default.findDOMNode(this)}render(){const{axis:v,bounds:_,children:E,defaultPosition:x,defaultClassName:S,defaultClassNameDragging:T,defaultClassNameDragged:C,position:O,positionOffset:R,scale:B,...W}=this.props;let M={},I=null;const j=!!!O||this.state.dragging,P=O||x,k={x:(0,o.canDragX)(this)&&j?this.state.x:P.x,y:(0,o.canDragY)(this)&&j?this.state.y:P.y};this.state.isElementSVG?I=(0,i.createSVGTransform)(k,R):M=(0,i.createCSSTransform)(k,R);const U=(0,s.default)(E.props.className||"",S,{[T]:this.state.dragging,[C]:this.state.dragged});return e.createElement(c.default,f({},W,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(E),{className:U,style:{...E.props.style,...M},transform:I}))}}t.default=y,p(y,"displayName","Draggable"),p(y,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Z5);const{default:d8,DraggableCore:PY}=Z5;sv.exports=d8;sv.exports.default=d8;sv.exports.DraggableCore=PY;var kY=sv.exports;const sm=cu(kY);function Vt(){return Vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vt.apply(null,arguments)}function h8(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var f8={exports:{}},Et={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rn=typeof Symbol=="function"&&Symbol.for,dA=Rn?Symbol.for("react.element"):60103,hA=Rn?Symbol.for("react.portal"):60106,cv=Rn?Symbol.for("react.fragment"):60107,lv=Rn?Symbol.for("react.strict_mode"):60108,uv=Rn?Symbol.for("react.profiler"):60114,dv=Rn?Symbol.for("react.provider"):60109,hv=Rn?Symbol.for("react.context"):60110,fA=Rn?Symbol.for("react.async_mode"):60111,fv=Rn?Symbol.for("react.concurrent_mode"):60111,pv=Rn?Symbol.for("react.forward_ref"):60112,gv=Rn?Symbol.for("react.suspense"):60113,OY=Rn?Symbol.for("react.suspense_list"):60120,mv=Rn?Symbol.for("react.memo"):60115,yv=Rn?Symbol.for("react.lazy"):60116,RY=Rn?Symbol.for("react.block"):60121,$Y=Rn?Symbol.for("react.fundamental"):60117,DY=Rn?Symbol.for("react.responder"):60118,jY=Rn?Symbol.for("react.scope"):60119;function xs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case dA:switch(t=t.type,t){case fA:case fv:case cv:case uv:case lv:case gv:return t;default:switch(t=t&&t.$$typeof,t){case hv:case pv:case yv:case mv:case dv:return t;default:return e}}case hA:return e}}}function p8(t){return xs(t)===fv}Et.AsyncMode=fA;Et.ConcurrentMode=fv;Et.ContextConsumer=hv;Et.ContextProvider=dv;Et.Element=dA;Et.ForwardRef=pv;Et.Fragment=cv;Et.Lazy=yv;Et.Memo=mv;Et.Portal=hA;Et.Profiler=uv;Et.StrictMode=lv;Et.Suspense=gv;Et.isAsyncMode=function(t){return p8(t)||xs(t)===fA};Et.isConcurrentMode=p8;Et.isContextConsumer=function(t){return xs(t)===hv};Et.isContextProvider=function(t){return xs(t)===dv};Et.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===dA};Et.isForwardRef=function(t){return xs(t)===pv};Et.isFragment=function(t){return xs(t)===cv};Et.isLazy=function(t){return xs(t)===yv};Et.isMemo=function(t){return xs(t)===mv};Et.isPortal=function(t){return xs(t)===hA};Et.isProfiler=function(t){return xs(t)===uv};Et.isStrictMode=function(t){return xs(t)===lv};Et.isSuspense=function(t){return xs(t)===gv};Et.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===cv||t===fv||t===uv||t===lv||t===gv||t===OY||typeof t=="object"&&t!==null&&(t.$$typeof===yv||t.$$typeof===mv||t.$$typeof===dv||t.$$typeof===hv||t.$$typeof===pv||t.$$typeof===$Y||t.$$typeof===DY||t.$$typeof===jY||t.$$typeof===RY)};Et.typeOf=xs;f8.exports=Et;var UY=f8.exports,pA=UY,LY={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},MY={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},BY={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},g8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gA={};gA[pA.ForwardRef]=BY;gA[pA.Memo]=g8;function MT(t){return pA.isMemo(t)?g8:gA[t.$$typeof]||LY}var FY=Object.defineProperty,zY=Object.getOwnPropertyNames,BT=Object.getOwnPropertySymbols,WY=Object.getOwnPropertyDescriptor,qY=Object.getPrototypeOf,FT=Object.prototype;function m8(t,e,n){if(typeof e!="string"){if(FT){var r=qY(e);r&&r!==FT&&m8(t,r,n)}var s=zY(e);BT&&(s=s.concat(BT(e)));for(var i=MT(t),o=MT(e),a=0;a<s.length;++a){var c=s[a];if(!MY[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=WY(e,c);try{FY(t,c,l)}catch{}}}}return t}var HY=m8;const VY=cu(HY);var y8={};Object.defineProperty(y8,"__esModule",{value:!0});y8.default=GY;function GY(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function sy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zw(){return Zw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zw.apply(this,arguments)}function KY(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ua(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YY(t){var e=function(n){KY(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,sy(ua(ua(i)),"cachedTheme",void 0),sy(ua(ua(i)),"lastOuterTheme",void 0),sy(ua(ua(i)),"lastTheme",void 0),sy(ua(ua(i)),"renderProvider",function(l){var u=i.props.children;return gs.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?Zw({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?gs.createElement(t.Consumer,null,this.renderProvider):null},r}(gs.Component);return e}function JY(t){return function(n){var r=gs.forwardRef(function(s,i){return gs.createElement(t.Consumer,null,function(o){return gs.createElement(n,Zw({theme:o,ref:i},s))})});return VY(r,n),r}}function QY(t){var e=function(){var r=gs.useContext(t);return r};return e}function ZY(t){return{context:t,withTheme:JY(t),useTheme:QY(t),ThemeProvider:YY(t)}}var w8=D.createContext();ZY(w8);var zT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch=(typeof window>"u"?"undefined":zT(window))==="object"&&(typeof document>"u"?"undefined":zT(document))==="object"&&document.nodeType===9;function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function XY(t,e){if(ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function eJ(t){var e=XY(t,"string");return ig(e)=="symbol"?e:e+""}function tJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eJ(r.key),r)}}function mA(t,e,n){return e&&tJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cC(t,e){return cC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},cC(t,e)}function v8(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,cC(t,e)}function WT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var nJ={}.constructor;function lC(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(lC);if(t.constructor!==nJ)return t;var e={};for(var n in t)e[n]=lC(t[n]);return e}function wv(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=lC(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var qT=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},$l=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=qT(e[r]," ");else n=qT(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function xh(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function ef(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function og(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=xh(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=ef(f+":"+u+$l(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=ef(g+":"+u+$l(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=ef(y+":"+u+$l(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),ef(""+t+u+"{"+r,o)+ef("}",o))}var rJ=/([[\].#*$><+~=|^:(),"'`\s])/g,HT=typeof CSS<"u"&&CSS.escape,yA=function(t){return HT?HT(t):t.replace(rJ,"\\$1")},b8=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),uC=function(t){v8(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(WT(WT(o)),l),o.selectorText="."+yA(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=$l(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Vt({},s,{allowEmpty:!0}):s;return og(this.selectorText,this.style,a)},mA(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(b8),sJ={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new uC(e,n,r)}},t1={indent:1,children:!0},iJ=/@([\w-]+)/,oJ=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(iJ);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new vv(Vt({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=t1);var s=xh(r),i=s.linebreak;if(r.indent==null&&(r.indent=t1.indent),r.children==null&&(r.children=t1.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),aJ=/@container|@media|@supports\s+/,cJ={onCreateRule:function(e,n,r){return aJ.test(e)?new oJ(e,n,r):null}},n1={indent:1,children:!0},lJ=/@keyframes\s+([\w-]+)/,dC=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(lJ);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:yA(c(this,a)),this.rules=new vv(Vt({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Vt({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=n1);var s=xh(r),i=s.linebreak;if(r.indent==null&&(r.indent=n1.indent),r.children==null&&(r.children=n1.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),uJ=/@keyframes\s+/,dJ=/\$([\w-]+)/g,hC=function(e,n){return typeof e=="string"?e.replace(dJ,function(r,s){return s in n?n[s]:r}):e},VT=function(e,n,r){var s=e[n],i=hC(s,r);i!==s&&(e[n]=i)},hJ={onCreateRule:function(e,n,r){return typeof e=="string"&&uJ.test(e)?new dC(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&VT(e,"animation-name",r.keyframes),"animation"in e&&VT(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return hC(e,s.keyframes);case"animation-name":return hC(e,s.keyframes);default:return e}}},fJ=function(t){v8(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Vt({},s,{allowEmpty:!0}):s;return og(this.key,this.style,a)},e}(b8),pJ={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new fJ(e,n,r):null}},gJ=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=xh(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=og(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return og(this.at,this.style,r)},t}(),mJ=/@font-face/,yJ={onCreateRule:function(e,n,r){return mJ.test(e)?new gJ(e,n,r):null}},wJ=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return og(this.key,this.style,r)},t}(),vJ={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new wJ(e,n,r):null}},bJ=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),EJ={"@charset":!0,"@import":!0,"@namespace":!0},_J={onCreateRule:function(e,n,r){return e in EJ?new bJ(e,n,r):null}},GT=[sJ,cJ,hJ,pJ,yJ,vJ,_J],CJ={process:!0},KT={force:!0,process:!0},vv=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Vt({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+yA(this.classes[p]));var g=wv(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Vt({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof uC?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof dC&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof uC?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof dC&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=CJ);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,KT)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,KT)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=xh(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),E8=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Vt({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new vv(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),xJ=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),SJ=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=h8(s,["attached"]),a=xh(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},mA(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),Qf=new SJ,fC=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),pC="2f1acc6c3a606b082e5eef5e54414ffb";fC[pC]==null&&(fC[pC]=0);var YT=fC[pC]++,JT=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+YT+a+n:c+i.key+"-"+YT+(a?"-"+a:"")+"-"+n};return r},_8=function(e){var n;return function(){return n||(n=e()),n}},AJ=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},IJ=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=$l(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},TJ=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},NJ=function(e,n){return e.selectorText=n,e.selectorText===n},C8=_8(function(){return document.querySelector("head")});function PJ(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function kJ(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function OJ(t){for(var e=C8(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function RJ(t){var e=Qf.registry;if(e.length>0){var n=PJ(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=kJ(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=OJ(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function $J(t,e){var n=e.insertionPoint,r=RJ(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}C8().appendChild(t)}var DJ=_8(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),QT=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},ZT=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},jJ=function(){var e=document.createElement("style");return e.textContent=`
`,e},UJ=function(){function t(n){this.getPropertyValue=AJ,this.setProperty=IJ,this.removeProperty=TJ,this.setSelector=NJ,this.hasInsertedRules=!1,this.cssRules=[],n&&Qf.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||jJ(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=DJ();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){$J(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=ZT(i,s);if(a=QT(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=ZT(i,s),d=QT(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof E8&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),LJ=0,MJ=function(){function t(n){this.id=LJ++,this.version="10.10.0",this.plugins=new xJ,this.options={id:{minify:!1},createGenerateId:JT,Renderer:Ch?UJ:null,plugins:[]},this.generateId=JT({minify:!1});for(var r=0;r<GT.length;r++)this.plugins.use(GT[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Vt({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=Qf.index===0?0:Qf.index+1);var a=new E8(r,Vt({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),Qf.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Vt({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=wv(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),x8=function(e){return new MJ(e)},XT=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},mA(t,[{key:"size",get:function(){return this.length}}]),t}(),wA=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function S8(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=S8(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */x8();var A8=Date.now(),r1="fnValues"+A8,s1="fnStyle"+ ++A8,BJ=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=wv(n,{},s);return i[s1]=r,i},onProcessStyle:function(n,r){if(r1 in r||s1 in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[r1]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[s1];a&&(o.style=a(n)||{});var c=o[r1];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function FJ(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Xu;typeof self<"u"?Xu=self:typeof window<"u"?Xu=window:typeof global<"u"?Xu=global:typeof module<"u"?Xu=module:Xu=Function("return this")();var eN=FJ(Xu),tN=function(e){return e&&e[eN]&&e===e[eN]()},zJ=function(e){return{onCreateRule:function(r,s,i){if(!tN(s))return null;var o=s,a=wv(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!tN(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},WJ=/;\n/,qJ=function(e){for(var n={},r=e.split(WJ),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},HJ=function(e){typeof e.style=="string"&&(e.style=qJ(e.style))};function VJ(){return{onProcessRule:HJ}}var vc="@global",gC="@global ",GJ=function(){function t(n,r,s){this.type="global",this.at=vc,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new vv(Vt({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),KJ=function(){function t(n,r,s){this.type="global",this.at=vc,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(gC.length);this.rule=s.jss.createRule(i,r,Vt({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),YJ=/\s*,\s*/g;function I8(t,e){for(var n=t.split(YJ),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function JJ(t,e){var n=t.options,r=t.style,s=r?r[vc]:null;if(s){for(var i in s)e.addRule(i,s[i],Vt({},n,{selector:I8(i,t.selector)}));delete r[vc]}}function QJ(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,vc.length)!==vc)){var i=I8(s.substr(vc.length),t.selector);e.addRule(i,r[s],Vt({},n,{selector:i})),delete r[s]}}function ZJ(){function t(n,r,s){if(!n)return null;if(n===vc)return new GJ(n,r,s);if(n[0]==="@"&&n.substr(0,gC.length)===gC)return new KJ(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(JJ(n,r),QJ(n,r))}return{onCreateRule:t,onProcessRule:e}}var tw=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},i1="extendCurrValue"+Date.now();function XJ(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];ml(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Vt({},t,{extend:l}):t.extend[c];ml(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){ml(t.extend.extend,e,n,r);continue}if(tw(t.extend[d])){d in r||(r[d]={}),ml(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function eQ(t,e,n,r){for(var s in t)if(s!=="extend"){if(tw(r[s])&&tw(t[s])){ml(t[s],e,n,r[s]);continue}if(tw(t[s])){r[s]=ml(t[s],e,n);continue}r[s]=t[s]}}function ml(t,e,n,r){return r===void 0&&(r={}),XJ(t,e,n,r),eQ(t,e,n,r),r}function tQ(){function t(n,r,s){return"extend"in n?ml(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[i1])s.prop(i,null);return s[i1]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[i1]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var nN=/\s*,\s*/g,nQ=/&/g,rQ=/\$([\w-]+)/g;function sQ(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(nN),a=s.split(nN),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(nQ,u):u+" "+h}return c}function n(s,i,o){if(o)return Vt({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Vt({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(rQ,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Vt({},l,{selector:p})):c.addRule(g,s[d],Vt({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function mC(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=mC(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return mC(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function iQ(){function t(e,n){return"composes"in e&&(mC(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var oQ=/[A-Z]/g,aQ=/^ms-/,o1={};function cQ(t){return"-"+t.toLowerCase()}function T8(t){if(o1.hasOwnProperty(t))return o1[t];var e=t.replace(oQ,cQ);return o1[t]=aQ.test(e)?"-"+e:e}function Xw(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:T8(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Xw):e.fallbacks=Xw(t.fallbacks)),e}function lQ(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=Xw(n[r]);return n}return Xw(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=T8(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var J=wA&&CSS?CSS.px:"px",iy=wA&&CSS?CSS.ms:"ms",Iu=wA&&CSS?CSS.percent:"%",uQ={"animation-delay":iy,"animation-duration":iy,"background-position":J,"background-position-x":J,"background-position-y":J,"background-size":J,border:J,"border-bottom":J,"border-bottom-left-radius":J,"border-bottom-right-radius":J,"border-bottom-width":J,"border-left":J,"border-left-width":J,"border-radius":J,"border-right":J,"border-right-width":J,"border-top":J,"border-top-left-radius":J,"border-top-right-radius":J,"border-top-width":J,"border-width":J,"border-block":J,"border-block-end":J,"border-block-end-width":J,"border-block-start":J,"border-block-start-width":J,"border-block-width":J,"border-inline":J,"border-inline-end":J,"border-inline-end-width":J,"border-inline-start":J,"border-inline-start-width":J,"border-inline-width":J,"border-start-start-radius":J,"border-start-end-radius":J,"border-end-start-radius":J,"border-end-end-radius":J,margin:J,"margin-bottom":J,"margin-left":J,"margin-right":J,"margin-top":J,"margin-block":J,"margin-block-end":J,"margin-block-start":J,"margin-inline":J,"margin-inline-end":J,"margin-inline-start":J,padding:J,"padding-bottom":J,"padding-left":J,"padding-right":J,"padding-top":J,"padding-block":J,"padding-block-end":J,"padding-block-start":J,"padding-inline":J,"padding-inline-end":J,"padding-inline-start":J,"mask-position-x":J,"mask-position-y":J,"mask-size":J,height:J,width:J,"min-height":J,"max-height":J,"min-width":J,"max-width":J,bottom:J,left:J,top:J,right:J,inset:J,"inset-block":J,"inset-block-end":J,"inset-block-start":J,"inset-inline":J,"inset-inline-end":J,"inset-inline-start":J,"box-shadow":J,"text-shadow":J,"column-gap":J,"column-rule":J,"column-rule-width":J,"column-width":J,"font-size":J,"font-size-delta":J,"letter-spacing":J,"text-decoration-thickness":J,"text-indent":J,"text-stroke":J,"text-stroke-width":J,"word-spacing":J,motion:J,"motion-offset":J,outline:J,"outline-offset":J,"outline-width":J,perspective:J,"perspective-origin-x":Iu,"perspective-origin-y":Iu,"transform-origin":Iu,"transform-origin-x":Iu,"transform-origin-y":Iu,"transform-origin-z":Iu,"transition-delay":iy,"transition-duration":iy,"vertical-align":J,"flex-basis":J,"shape-margin":J,size:J,gap:J,grid:J,"grid-gap":J,"row-gap":J,"grid-row-gap":J,"grid-column-gap":J,"grid-template-rows":J,"grid-template-columns":J,"grid-auto-rows":J,"grid-auto-columns":J,"box-shadow-x":J,"box-shadow-y":J,"box-shadow-blur":J,"box-shadow-spread":J,"font-line-height":J,"text-shadow-x":J,"text-shadow-y":J,"text-shadow-blur":J};function N8(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var dQ=N8(uQ);function Zf(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Zf(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=Zf(s,e[s],n);else for(var i in e)e[i]=Zf(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||dQ[t];return o&&!(e===0&&o===J)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function hQ(t){t===void 0&&(t={});var e=N8(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=Zf(o,s[o],e);return s}function r(s,i){return Zf(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var fQ={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},pQ={position:!0,size:!0},oy={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},a1={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function gQ(t,e,n){return t.map(function(r){return k8(r,e,n,!1,!0)})}function P8(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?P8(t[0],e,n,r):typeof t[0]=="object"?gQ(t,e,r):[t]}function k8(t,e,n,r,s){if(!(oy[e]||a1[e]))return[];var i=[];if(a1[e]&&(t=mQ(t,n,a1[e],r)),Object.keys(t).length)for(var o in oy[e]){if(t[o]){Array.isArray(t[o])?i.push(pQ[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}oy[e][o]!=null&&i.push(oy[e][o])}return!i.length||s?i:[i]}function mQ(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=ag((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function ag(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=ag(t.fallbacks[i],e,!0);continue}t[r]=P8(s,r,fQ,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=ag(t.fallbacks,e,!0);continue}t[r]=k8(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function yQ(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=ag(e[r],n);return e}return ag(e,n)}return{onProcessStyle:t}}function yC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function wQ(t){if(Array.isArray(t))return yC(t)}function vQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bQ(t,e){if(t){if(typeof t=="string")return yC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yC(t,e):void 0}}function EQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Q(t){return wQ(t)||vQ(t)||bQ(t)||EQ()}var Nf="",wC="",O8="",R8="",CQ=Ch&&"ontouchstart"in document.documentElement;if(Ch){var c1={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},xQ=document.createElement("p"),l1=xQ.style,SQ="Transform";for(var u1 in c1)if(u1+SQ in l1){Nf=u1,wC=c1[u1];break}Nf==="Webkit"&&"msHyphens"in l1&&(Nf="ms",wC=c1.ms,R8="edge"),Nf==="Webkit"&&"-apple-trailing-word"in l1&&(O8="apple")}var We={js:Nf,css:wC,vendor:O8,browser:R8,isTouch:CQ};function AQ(t){return t[1]==="-"||We.js==="ms"?t:"@"+We.css+"keyframes"+t.substr(10)}var IQ={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:We.js==="ms"?"-webkit-"+e:We.css+e}},TQ={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:We.js==="Webkit"?We.css+"print-"+e:e}},NQ=/[-\s]+(.)?/g;function PQ(t,e){return e?e.toUpperCase():""}function vA(t){return t.replace(NQ,PQ)}function kc(t){return vA("-"+t)}var kQ={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(We.js==="Webkit"){var r="mask-image";if(vA(r)in n)return e;if(We.js+kc(r)in n)return We.css+e}return e}},OQ={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:We.vendor==="apple"&&!We.isTouch?We.css+e:e}},RQ={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:We.css+e}},$Q={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:We.css+e}},DQ={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:We.js==="Webkit"||We.js==="ms"&&We.browser!=="edge"?We.css+e:e}},jQ={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:We.js==="Moz"||We.js==="ms"||We.vendor==="apple"?We.css+e:e}},UQ={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(We.js==="Webkit"){var r="WebkitColumn"+kc(e);return r in n?We.css+"column-"+e:!1}if(We.js==="Moz"){var s="page"+kc(e);return s in n?"page-"+e:!1}return!1}},LQ={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(We.js==="Moz")return e;var r=e.replace("-inline","");return We.js+kc(r)in n?We.css+r:!1}},MQ={supportedProperty:function(e,n){return vA(e)in n?e:!1}},BQ={supportedProperty:function(e,n){var r=kc(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:We.js+r in n?We.css+e:We.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},FQ={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:We.js==="ms"?""+We.css+e:e}},zQ={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:We.js==="ms"?We.css+"scroll-chaining":e}},WQ={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},qQ={supportedProperty:function(e,n){var r=WQ[e];return r&&We.js+kc(r)in n?We.css+r:!1}},$8={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},HQ=Object.keys($8),VQ=function(e){return We.css+e},GQ={supportedProperty:function(e,n,r){var s=r.multiple;if(HQ.indexOf(e)>-1){var i=$8[e];if(!Array.isArray(i))return We.js+kc(i)in n?We.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(We.js+kc(i[0])in n))return!1;return i.map(VQ)}return!1}},D8=[IQ,TQ,kQ,OQ,RQ,$Q,DQ,jQ,UQ,LQ,MQ,BQ,FQ,zQ,qQ,GQ],rN=D8.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),KQ=D8.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,_Q(e.noPrefill)),t},[]),Pf,ol={};if(Ch){Pf=document.createElement("p");var d1=window.getComputedStyle(document.documentElement,"");for(var h1 in d1)isNaN(h1)||(ol[d1[h1]]=d1[h1]);KQ.forEach(function(t){return delete ol[t]})}function vC(t,e){if(e===void 0&&(e={}),!Pf)return t;if(ol[t]!=null)return ol[t];(t==="transition"||t==="transform")&&(e[t]=t in Pf.style);for(var n=0;n<rN.length&&(ol[t]=rN[n](t,Pf.style,e),!ol[t]);n++);try{Pf.style[t]=""}catch{return!1}return ol[t]}var Tu={},YQ={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},JQ=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Sa;function QQ(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?vC(e):", "+vC(n);return r||e||n}Ch&&(Sa=document.createElement("p"));function sN(t,e){var n=e;if(!Sa||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Tu[r]!=null)return Tu[r];try{Sa.style[t]=n}catch{return Tu[r]=!1,!1}if(YQ[t])n=n.replace(JQ,QQ);else if(Sa.style[t]===""&&(n=We.css+n,n==="-ms-flex"&&(Sa.style[t]="-ms-flexbox"),Sa.style[t]=n,Sa.style[t]===""))return Tu[r]=!1,!1;return Sa.style[t]="",Tu[r]=n,Tu[r]}function ZQ(){function t(s){if(s.type==="keyframes"){var i=s;i.at=AQ(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=vC(i);c&&c!==i&&(a=!0);var l=!1,u=sN(c,$l(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return sN(i,$l(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function XQ(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var eZ=function(e){return e===void 0&&(e={}),{plugins:[BJ(),zJ(e.observable),VJ(),ZJ(),tQ(),sQ(),iQ(),lQ(),hQ(e.defaultUnit),yQ(),ZQ(),XQ()]}},tZ=Number.MIN_SAFE_INTEGER||-1e9,nZ=function(){return tZ++},rZ=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Ch}),iN=new Map,bA=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new XT),r[n];var s=iN.get(n);return s||(s=new XT,iN.set(n,s)),s},oN=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=bA(r,s);o.manage(i),r.registry&&r.registry.add(n)}},sZ=function(e){if(e.sheet){var n=bA(e.context,e.index);n.unmanage(e.theme)}},iZ=x8(eZ()),j8=new WeakMap,U8=function(e){return j8.get(e)},oZ=function(e,n){j8.set(e,n)},aZ=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function cZ(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Vt({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var lZ=function(e){if(!e.context.disableStylesGeneration){var n=bA(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||iZ,i=aZ(e),o=S8(i),a=s.createStyleSheet(i,cZ(e,o!==null));return oZ(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},uZ=function(e,n){for(var r in n)e.deleteRule(n[r])},dZ=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},hZ=function(e,n){var r=U8(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},fZ=function(e,n){if(!n)return e.classes;var r=U8(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function aN(t){return t?D.useEffect:gs.useInsertionEffect||D.useLayoutEffect}var f1={},Ii=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?nZ():s,o=r.theming,a=r.name,c=h8(r,["index","theming","name"]),l=o&&o.context||w8,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||f1},d={};return function(f){var p=D.useRef(!0),g=D.useContext(rZ),w=u(f&&f.theme),y=D.useMemo(function(){var E=lZ({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return E&&g.isSSR&&oN({index:i,context:g,sheet:E,theme:w}),[E,E?hZ(E,f):null]},[g,w]),b=y[0],v=y[1];aN(g.isSSR)(function(){b&&v&&!p.current&&dZ(f,b,v)},[f]),aN(g.isSSR)(function(){return b&&oN({index:i,context:g,sheet:b,theme:w}),function(){b&&(sZ({index:i,context:g,sheet:b,theme:w}),v&&uZ(b,v))}},[b]);var _=D.useMemo(function(){return b&&v?fZ(b,v):d},[b,v]);return D.useDebugValue(_),D.useDebugValue(w===f1?"No theme":w),D.useEffect(function(){p.current=!1}),_}};const pZ=Ii({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function p1({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=pZ(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(sm,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const gZ=Ii({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Os({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=gZ({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(sm,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const g1=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],mZ=80,yZ=80,wZ=10,vZ=10,bZ=10,EZ=10,_Z=({onIconClick:t})=>{const e=g1.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:bZ+d*(mZ+wZ),y:EZ+u*(yZ+vZ)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(p1,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(Os,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:g1.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(p1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(Os,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:g1.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(p1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},CZ=Ii({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),xZ=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=CZ({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Dexscreener"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function L8(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function EA(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function M8(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function _A(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function B8(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function F8(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function SZ(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const AZ=Ii({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),IZ=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=AZ({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),{data:w}=D5();D.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const x=await L8(r);a(x);const S={};x.forEach(T=>{S[T.id]=0}),f(S)}catch(x){g(x.message)}finally{l(!1)}},b=(x,S)=>{f(T=>({...T,[x]:Math.max(0,S)}))},v=async()=>{const x=Object.entries(h).filter(([,S])=>S>0).map(([S,T])=>({id:S,quantity:T}));if(x.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const S=await M8(r,x);if(console.log("Mint API result:",S),S.success&&S.mintTransaction){console.log("Got mint transaction:",S.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await w.sendTransaction({to:S.mintTransaction.to,value:BigInt(S.mintTransaction.value),data:S.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(S.message||"Could not retrieve minting transaction.")}catch(S){console.error("Minting failed:",S),g("Minting failed: "+S.message)}finally{d(!1)}},_=(x,S)=>`${parseFloat(x)} ${S}`,E=()=>{n&&n()};return t?m.jsx(sm,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:E,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(x=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",_(x.token_price,x.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:x.wallet_limit===4294967295?999:x.wallet_limit,value:h[x.id]||0,onChange:S=>b(x.id,parseInt(S.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},x.id))]}),m.jsx("button",{onClick:v,disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},TZ=Ii({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),NZ=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},PZ=({nft:t,onClose:e})=>{const n=TZ(),r=D.useRef(null),s=NZ(t.attributes);return m.jsx(sm,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},kZ=Symbol(),cN=Object.getPrototypeOf,bC=new WeakMap,OZ=t=>t&&(bC.has(t)?bC.get(t):cN(t)===Object.prototype||cN(t)===Array.prototype),RZ=t=>OZ(t)&&t[kZ]||null,lN=(t,e=!0)=>{bC.set(t,e)},e0={},m1=t=>typeof t=="object"&&t!==null,ka=new WeakMap,kf=new WeakSet,$Z=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>m1(l)&&!kf.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return lN(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(kf.has(g))lN(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(ka.has(g)){const[b,v]=ka.get(g);y.value=i(b,v(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!m1(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(C,O=++a[0])=>{d!==O&&(d=O,h.forEach(R=>R(C,O)))};let p=a[1];const g=(C=++a[1])=>(p!==C&&!h.size&&(p=C,y.forEach(([O])=>{const R=O[1](C);R>d&&(d=R)})),d),w=C=>(O,R)=>{const B=[...O];B[1]=[C,...B[1]],f(B,R)},y=new Map,b=(C,O)=>{if((e0?"production":void 0)!=="production"&&y.has(C))throw new Error("prop listener already exists");if(h.size){const R=O[3](w(C));y.set(C,[O,R])}else y.set(C,[O])},v=C=>{var O;const R=y.get(C);R&&(y.delete(C),(O=R[1])==null||O.call(R))},_=C=>(h.add(C),h.size===1&&y.forEach(([R,B],W)=>{if((e0?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const M=R[3](w(W));y.set(W,[R,M])}),()=>{h.delete(C),h.size===0&&y.forEach(([R,B],W)=>{B&&(B(),y.set(W,[R]))})}),E=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),S=e(E,{deleteProperty(C,O){const R=Reflect.get(C,O);v(O);const B=Reflect.deleteProperty(C,O);return B&&f(["delete",[O],R]),B},set(C,O,R,B){const W=Reflect.has(C,O),M=Reflect.get(C,O,B);if(W&&(t(M,R)||o.has(R)&&t(M,o.get(R))))return!0;v(O),m1(R)&&(R=RZ(R)||R);let I=R;if(R instanceof Promise)R.then(A=>{R.status="fulfilled",R.value=A,f(["resolve",[O],A])}).catch(A=>{R.status="rejected",R.reason=A,f(["reject",[O],A])});else{!ka.has(R)&&n(R)&&(I=c(R));const A=!kf.has(I)&&ka.get(I);A&&b(O,A)}return Reflect.set(C,O,I,B),f(["set",[O],R,M]),!0}});o.set(l,S);const T=[E,g,i,_];return ka.set(S,T),Reflect.ownKeys(l).forEach(C=>{const O=Object.getOwnPropertyDescriptor(l,C);"value"in O&&(S[C]=l[C],delete O.value,delete O.writable),Object.defineProperty(E,C,O)}),S})=>[c,ka,kf,t,e,n,r,s,i,o,a],[DZ]=$Z();function Ot(t={}){return DZ(t)}function Vn(t,e,n){const r=ka.get(t);(e0?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function cg(t,e){const n=ka.get(t);(e0?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Ql(t){return kf.add(t),t}function Gn(t,e,n,r){let s=t[e];return Vn(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function jZ(t){const e=Ot({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var uN={};const X={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof uN<"u"?uN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},lg={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=X.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var UZ=20,LZ=1,Zl=1e6,dN=1e6,MZ=-7,BZ=21,FZ=!1,im="[big.js] ",fu=im+"Invalid ",bv=fu+"decimal places",zZ=fu+"rounding mode",z8=im+"Division by zero",bt={},Qi=void 0,WZ=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function W8(){function t(e){var n=this;if(!(n instanceof t))return e===Qi?W8():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(fu+"value");e=e===0&&1/e<0?"-0":String(e)}qZ(n,e)}n.constructor=t}return t.prototype=bt,t.DP=UZ,t.RM=LZ,t.NE=MZ,t.PE=BZ,t.strict=FZ,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function qZ(t,e){var n,r,s;if(!WZ.test(e))throw Error(fu+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function pu(t,e,n,r){var s=t.c;if(n===Qi&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(zZ);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Qi))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Qi||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function gu(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}bt.abs=function(){var t=new this.constructor(this);return t.s=1,t};bt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};bt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Zl)throw Error(bv);if(!s[0])throw Error(z8);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],v=0,_=o+(y.e=e.e-t.e)+1;for(y.s=i,i=_<0?0:_,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Qi)&&i--);return!b[0]&&v!=1&&(b.shift(),y.e--,_--),v>_&&pu(y,_,n.RM,g[0]!==Qi),y};bt.eq=function(t){return this.cmp(t)===0};bt.gt=function(t){return this.cmp(t)>0};bt.gte=function(t){return this.cmp(t)>-1};bt.lt=function(t){return this.cmp(t)<0};bt.lte=function(t){return this.cmp(t)<1};bt.minus=bt.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};bt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(z8);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};bt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};bt.plus=bt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};bt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-dN||t>dN)throw Error(fu+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};bt.prec=function(t,e){if(t!==~~t||t<1||t>Zl)throw Error(fu+"precision");return pu(new this.constructor(this),t,e)};bt.round=function(t,e){if(t===Qi)t=0;else if(t!==~~t||t<-Zl||t>Zl)throw Error(bv);return pu(new this.constructor(this),t+this.e+1,e)};bt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(im+"No square root");i=Math.sqrt(+gu(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return pu(t,(s.DP-=4)+t.e+1,s.RM)};bt.times=bt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};bt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Qi){if(t!==~~t||t<0||t>Zl)throw Error(bv);for(n=pu(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return gu(n,!0,!!r)};bt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Qi){if(t!==~~t||t<0||t>Zl)throw Error(bv);for(n=pu(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return gu(n,!1,!!r)};bt[Symbol.for("nodejs.util.inspect.custom")]=bt.toJSON=bt.toString=function(){var t=this,e=t.constructor;return gu(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};bt.toNumber=function(){var t=+gu(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(im+"Imprecise conversion");return t};bt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Qi){if(t!==~~t||t<1||t>Zl)throw Error(fu+"precision");for(n=pu(new r(n),t,e);n.c.length<t;)n.c.push(0)}return gu(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};bt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(im+"valueOf disallowed");return gu(t,t.e<=e.NE||t.e>=e.PE,!0)};var tf=W8();const HZ={bigNumber(t){return t?new tf(t):new tf(0)},multiply(t,e){if(t===void 0||e===void 0)return new tf(0);const n=new tf(t),r=new tf(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},VZ=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],GZ=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],KZ=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],YZ={getERC20Abi:t=>X.USDT_CONTRACT_ADDRESSES.includes(t)?KZ:VZ,getSwapAbi:()=>GZ},us={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ue={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function y1(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Oe={setItem(t,e){Of()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Of())return localStorage.getItem(t)||void 0},removeItem(t){Of()&&localStorage.removeItem(t)},clear(){Of()&&localStorage.clear()}};function Of(){return typeof window<"u"&&typeof localStorage<"u"}function Do(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var hN={};const w1=(typeof process<"u"&&typeof hN<"u"?hN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",q8=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],JZ="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",yt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:w1,SECURE_SITE_DASHBOARD:`${w1}/dashboard`,SECURE_SITE_FAVICON:`${w1}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},le={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=le.getActiveNamespace(),e=le.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Oe.setItem(Ue.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Oe.getItem(Ue.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Oe.removeItem(Ue.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Oe.setItem(Ue.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Oe.setItem(Ue.ACTIVE_CAIP_NETWORK_ID,t),le.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Oe.getItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Oe.removeItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=y1(t);Oe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=le.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Oe.setItem(Ue.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Oe.getItem(Ue.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=y1(t);Oe.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Oe.getItem(Ue.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=y1(t);return Oe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Oe.setItem(Ue.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Oe.getItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Oe.removeItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Oe.getItem(Ue.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Oe.getItem(Ue.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Oe.setItem(Ue.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Oe.getItem(Ue.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Oe.getItem(Ue.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Oe.setItem(Ue.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=le.getConnectedNamespaces();e.includes(t)||(e.push(t),le.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=le.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),le.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Oe.getItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Oe.setItem(Ue.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Oe.removeItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Oe.getItem(Ue.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=le.getBalanceCache();Oe.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=le.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=le.getBalanceCache();e[t.caipAddress]=t,Oe.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Oe.getItem(Ue.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=le.getBalanceCache();Oe.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=le.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=le.getNativeBalanceCache();e[t.caipAddress]=t,Oe.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Oe.getItem(Ue.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=le.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;le.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=le.getEnsCache();e[t.address]=t,Oe.setItem(Ue.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=le.getEnsCache();Oe.setItem(Ue.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Oe.getItem(Ue.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=le.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;le.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=le.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Oe.setItem(Ue.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=le.getIdentityCache();Oe.setItem(Ue.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Oe.removeItem(Ue.PORTFOLIO_CACHE),Oe.removeItem(Ue.NATIVE_BALANCE_CACHE),Oe.removeItem(Ue.ENS_CACHE),Oe.removeItem(Ue.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Oe.setItem(Ue.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Oe.getItem(Ue.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=le.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===X.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Oe.setItem(Ue.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Oe.getItem(Ue.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=le.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Oe.setItem(Ue.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Oe.getItem(Ue.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=le.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Oe.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=le.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Oe.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(le.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Ce={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ce.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=yt.TEN_SEC_MS:!0},isAllowedRetry(t,e=yt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ce.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+yt.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ce.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ce.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?le.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ce.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return X.W3M_API_URL},getBlockchainApiUrl(){return X.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return X.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?yt.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in X.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function nf(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class om{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await nf(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await nf(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await nf(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await nf(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await nf(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const QZ={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?yt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ce.isTelegram()){if(Ce.isIos())return t.filter(e=>e!=="google");if(Ce.isMac())return t.filter(e=>e!=="x");if(Ce.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ie=Ot({features:yt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:yt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ne={state:Ie,subscribeKey(t,e){return Gn(Ie,t,e)},setOptions(t){Object.assign(Ie,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Ie.remoteFeatures,...t};Ie.remoteFeatures=e,(n=Ie.remoteFeatures)!=null&&n.socials&&(Ie.remoteFeatures.socials=QZ.filterSocialsByPlatform(Ie.remoteFeatures.socials))},setFeatures(t){if(!t)return;Ie.features||(Ie.features=yt.DEFAULT_FEATURES);const e={...Ie.features,...t};Ie.features=e},setProjectId(t){Ie.projectId=t},setCustomRpcUrls(t){Ie.customRpcUrls=t},setAllWallets(t){Ie.allWallets=t},setIncludeWalletIds(t){Ie.includeWalletIds=t},setExcludeWalletIds(t){Ie.excludeWalletIds=t},setFeaturedWalletIds(t){Ie.featuredWalletIds=t},setTokens(t){Ie.tokens=t},setTermsConditionsUrl(t){Ie.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ie.privacyPolicyUrl=t},setCustomWallets(t){Ie.customWallets=t},setIsSiweEnabled(t){Ie.isSiweEnabled=t},setIsUniversalProvider(t){Ie.isUniversalProvider=t},setSdkVersion(t){Ie.sdkVersion=t},setMetadata(t){Ie.metadata=t},setDisableAppend(t){Ie.disableAppend=t},setEIP6963Enabled(t){Ie.enableEIP6963=t},setDebug(t){Ie.debug=t},setEnableWalletConnect(t){Ie.enableWalletConnect=t},setEnableWalletGuide(t){Ie.enableWalletGuide=t},setEnableAuthLogger(t){Ie.enableAuthLogger=t},setEnableWallets(t){Ie.enableWallets=t},setPreferUniversalLinks(t){Ie.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Ie.hasMultipleAddresses=t},setSIWX(t){Ie.siwx=t},setConnectMethodsOrder(t){Ie.features={...Ie.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ie.features={...Ie.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ie.remoteFeatures={...Ie.remoteFeatures,socials:t}},setCollapseWallets(t){Ie.features={...Ie.features,collapseWallets:t}},setEnableEmbedded(t){Ie.enableEmbedded=t},setAllowUnsupportedChain(t){Ie.allowUnsupportedChain=t},setManualWCControl(t){Ie.manualWCControl=t},setEnableNetworkSwitch(t){Ie.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Ie.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Ie.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ie.universalProviderConfigOverride},getSnapshot(){return cg(Ie)}},ZZ=Object.freeze({enabled:!0,events:[]}),XZ=new om({baseUrl:Ce.getAnalyticsUrl(),clientId:null}),eX=5,tX=60*1e3,da=Ot({...ZZ}),nX={state:da,subscribeKey(t,e){return Gn(da,t,e)},async sendError(t,e){if(!da.enabled)return;const n=Date.now();if(da.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<tX}).length>=eX)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};da.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ne.state;await XZ.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ce.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){da.enabled=!0},disable(){da.enabled=!1},clearEvents(){da.events=[]}};class ih extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,ih.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,ih):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function fN(t,e){const n=t instanceof ih?t:new ih(t instanceof Error?t.message:String(t),e,t);throw nX.sendError(n,n.category),n}function Ss(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return fN(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return fN(a,e)}},n[r]=i}else n[r]=s}),n}const qi={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},rX={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===qi.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${qi.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===qi.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${qi.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===X.CHAIN.SOLANA&&t===qi.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${qi.COINBASE.url}/dapp?cb_url=${r}`)}},ss=Ot({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),sX={state:ss,subscribeNetworkImages(t){return Vn(ss.networkImages,()=>t(ss.networkImages))},subscribeKey(t,e){return Gn(ss,t,e)},subscribe(t){return Vn(ss,()=>t(ss))},setWalletImage(t,e){ss.walletImages[t]=e},setNetworkImage(t,e){ss.networkImages[t]=e},setChainImage(t,e){ss.chainImages[t]=e},setConnectorImage(t,e){ss.connectorImages={...ss.connectorImages,[t]:e}},setTokenImage(t,e){ss.tokenImages[t]=e},setCurrencyImage(t,e){ss.currencyImages[t]=e}},fi=Ss(sX),iX={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},v1=Ot({networkImagePromises:{}}),H8={async fetchWalletImage(t){if(t)return await xe._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(v1.networkImagePromises[t]||(v1.networkImagePromises[t]=xe._fetchNetworkImage(t)),await v1.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return fi.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return fi.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return fi.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return fi.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return fi.state.connectorImages[t.imageId]},getChainImage(t){return fi.state.networkImages[iX[t]]}},ha=Ot({message:"",variant:"info",open:!1}),oX={state:ha,subscribeKey(t,e){return Gn(ha,t,e)},open(t,e){const{debug:n}=ne.state,{shortMessage:r,longMessage:s}=t;n&&(ha.message=r,ha.variant=e,ha.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){ha.open=!1,ha.message="",ha.variant="info"}},ln=Ss(oX),aX=Ce.getAnalyticsUrl(),cX=new om({baseUrl:aX,clientId:null}),lX=["MODAL_CREATED"],ho=Ot({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),wt={state:ho,subscribe(t){return Vn(ho,()=>t(ho))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ne.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=ce.state.address;if(lX.includes(t.data.event)||typeof window>"u")return;await cX.post({path:"/e",params:wt.getSdkProperties(),body:{eventId:Ce.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),ho.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===X.HTTP_STATUS_CODES.FORBIDDEN&&!ho.reportedErrors.FORBIDDEN&&(ln.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Of()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ho.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;ho.timestamp=Date.now(),ho.data=t,(e=ne.state.features)!=null&&e.analytics&&wt._sendAnalyticsEvent(ho)}},uX=Ce.getApiUrl(),Nr=new om({baseUrl:uX,clientId:null}),dX=40,pN=4,hX=20,Be=Ot({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),xe={state:Be,subscribeKey(t,e){return Gn(Be,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ne.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ne.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Nr.baseUrl}/getWalletImage/${t}`,n=await Nr.getBlob({path:e,params:xe._getSdkProperties()});fi.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Nr.baseUrl}/public/getAssetImage/${t}`,n=await Nr.getBlob({path:e,params:xe._getSdkProperties()});fi.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Nr.baseUrl}/public/getAssetImage/${t}`,n=await Nr.getBlob({path:e,params:xe._getSdkProperties()});fi.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Nr.baseUrl}/public/getCurrencyImage/${t}`,n=await Nr.getBlob({path:e,params:xe._getSdkProperties()});fi.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Nr.baseUrl}/public/getTokenImage/${t}`,n=await Nr.getBlob({path:e,params:xe._getSdkProperties()});fi.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ce.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===qi.COINBASE.id?!0:$.state.activeChain==="solana"&&(n.id===qi.SOLFLARE.id||n.id===qi.PHANTOM.id)):t},async fetchProjectConfig(){return(await Nr.get({path:"/appkit/v1/config",params:xe._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Nr.get({path:"/projects/v1/origins",params:xe._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===X.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=X.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=$.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!H8.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>xe._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ue.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>xe._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>xe._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>xe._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];xe._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(qi).map(o=>o.id));const r=await Nr.get({path:"/getWallets",params:{...xe._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:xe._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ne.state;if(t!=null&&t.length){const e={...xe._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??pN,include:t},{data:n}=await xe.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>xe._fetchWalletImage(i))),Be.featured=r,Be.allFeatured=r}},async fetchRecommendedWallets(){try{Be.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ne.state,r=[...e??[],...n??[]].filter(Boolean),s=$.getRequestedCaipNetworkIds().join(","),i={page:1,entries:pN,include:t,exclude:r,chains:s},{data:o,count:a}=await xe.fetchWallets(i),c=le.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>xe._fetchWalletImage(d))),Be.recommended=o,Be.allRecommended=o,Be.count=a??0}catch{}finally{Be.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ne.state,s=$.getRequestedCaipNetworkIds().join(","),i=[...Be.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:dX,include:e,exclude:i,chains:s},{data:a,count:c}=await xe.fetchWallets(o),l=a.slice(0,hX).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>xe._fetchWalletImage(u))),Be.wallets=Ce.uniqueBy([...Be.wallets,...xe._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Be.count=c>Be.count?c:Be.count,Be.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await xe.fetchWallets(e);n&&n.forEach(r=>{Be.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ne.state,s=$.getRequestedCaipNetworkIds().join(",");Be.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await xe.fetchWallets(i);wt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>xe._fetchWalletImage(c)),Ce.wait(300)]),Be.search=xe._filterOutExtensions(o)},initPromise(t,e){const n=Be.promises[t];return n||(Be.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&xe.initPromise("connectorImages",xe.fetchConnectorImages),e&&xe.initPromise("featuredWallets",xe.fetchFeaturedWallets),n&&xe.initPromise("recommendedWallets",xe.fetchRecommendedWallets),r&&xe.initPromise("networkImages",xe.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ne.state.features)!=null&&t.analytics&&xe.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Nr.get({path:"/getAnalyticsConfig",params:xe._getSdkProperties()});ne.setFeatures({analytics:t})}catch{ne.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=$.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.recommended=Be.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.filteredWallets=Be.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Be.filteredWallets=[]},setFilterByNamespace(t){if(!t){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=$.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.recommended=Be.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.filteredWallets=Be.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},_t=Ot({view:"Connect",history:["Connect"],transactionStack:[]}),fX={state:_t,subscribeKey(t,e){return Gn(_t,t,e)},pushTransactionStack(t){_t.transactionStack.push(t)},popTransactionStack(t){const e=_t.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Pe.goBack();break;case"cancel":s==null||s(),Pe.goBack();break}},push(t,e){t!==_t.view&&(_t.view=t,_t.history.push(t),_t.data=e)},reset(t,e){_t.view=t,_t.history=[t],_t.data=e},replace(t,e){_t.history.at(-1)===t||(_t.view=t,_t.history[_t.history.length-1]=t,_t.data=e)},goBack(){var r;const t=$.state.activeCaipAddress,e=Pe.state.view==="ConnectingFarcaster",n=!t&&e;if(_t.history.length>1){_t.history.pop();const[s]=_t.history.slice(-1);s&&(t&&s==="Connect"?_t.view="Account":_t.view=s)}else pt.close();(r=_t.data)!=null&&r.wallet&&(_t.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){ce.setFarcasterUrl(void 0,$.state.activeChain);const a=ue.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=cg(ne.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(_t.history.length>1){_t.history=_t.history.slice(0,t+1);const[e]=_t.history.slice(-1);e&&(_t.view=e)}},goBackOrCloseModal(){Pe.state.history.length>1?Pe.goBack():pt.close()}},Pe=Ss(fX),fo=Ot({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),EC={state:fo,subscribe(t){return Vn(fo,()=>t(fo))},setThemeMode(t){fo.themeMode=t;try{const e=ue.getAuthConnector();if(e){const n=EC.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Do(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){fo.themeVariables={...fo.themeVariables,...t};try{const e=ue.getAuthConnector();if(e){const n=EC.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Do(fo.themeVariables,fo.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return cg(fo)}},zr=Ss(EC),V8={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},it=Ot({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...V8},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),pX={state:it,subscribe(t){return Vn(it,()=>{t(it)})},subscribeKey(t,e){return Gn(it,t,e)},initialize(t){t.forEach(e=>{const n=le.getConnectedConnectorId(e);n&&ue.setConnectorId(n,e)})},setActiveConnector(t){t&&(it.activeConnector=Ql(t))},setConnectors(t){t.filter(s=>!it.allConnectors.some(i=>i.id===s.id&&ue.getConnectorName(i.name)===ue.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&it.allConnectors.push(Ql(s))});const n=ue.getEnabledNamespaces(),r=ue.getEnabledConnectors(n);it.connectors=ue.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(it.filterByNamespaceMap).forEach(e=>{it.filterByNamespaceMap[e]=!1}),t.forEach(e=>{it.filterByNamespaceMap[e]=!0}),ue.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){it.filterByNamespaceMap[t]=e,ue.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ue.getEnabledNamespaces(),e=ue.getEnabledConnectors(t),n=ue.areAllNamespacesEnabled();it.connectors=ue.mergeMultiChainConnectors(e),n?xe.clearFilterByNamespaces():xe.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(it.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return it.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(it.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ue.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===X.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=ue.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===X.CONNECTOR_ID.AUTH){const s=t,i=cg(ne.state),o=zr.getSnapshot().themeMode,a=zr.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Do(a,o)}),ue.setConnectors([t])}else ue.setConnectors([t])},getAuthConnector(t){var r;const e=t||$.state.activeChain,n=it.connectors.find(s=>s.id===X.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return it.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return it.allConnectors.find(e=>e.id===t)},getConnector(t,e){return it.allConnectors.filter(r=>r.chain===$.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=cg(ne.state),r=zr.getSnapshot().themeMode,s=zr.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Do(s,r)})},getConnectorsByNamespace(t){const e=it.allConnectors.filter(n=>n.chain===t);return ue.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=ue.getConnector(t.id,t.rdns),n=$.state.activeChain;rX.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Pe.push("ConnectingExternal",{connector:e}):Pe.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ue.getConnectorsByNamespace(t):ue.mergeMultiChainConnectors(it.allConnectors)},setFilterByNamespace(t){it.filterByNamespace=t,it.connectors=ue.getConnectors(t),xe.setFilterByNamespace(t)},setConnectorId(t,e){t&&(it.activeConnectorIds={...it.activeConnectorIds,[e]:t},le.setConnectedConnectorId(e,t))},removeConnectorId(t){it.activeConnectorIds={...it.activeConnectorIds,[t]:void 0},le.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return it.activeConnectorIds[t]},isConnected(t){return t?!!it.activeConnectorIds[t]:Object.values(it.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){it.activeConnectorIds={...V8}}},ue=Ss(pX),ug={getConnectionStatus(t,e){const n=ue.state.activeConnectorIds[e],r=ve.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===X.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=ve.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=ue.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>ue.getConnectorById(a.connectorId)),o=ug.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var oh={};const gX="https://secure.walletconnect.org/sdk",mX=(typeof process<"u"&&typeof oh<"u"?oh.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||gX,yX=(typeof process<"u"&&typeof oh<"u"?oh.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",wX=(typeof process<"u"&&typeof oh<"u"?oh.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ee={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},On={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},vX=1e3,Oo={checkNamespaceConnectorId(t,e){return ue.getConnectorId(t)===e},isSocialProvider(t){return yt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&ue.setActiveConnector(e),s==null||s(Ce.isMobile()&&t),r){const l=pt.subscribeKey("open",u=>{u||(Pe.state.view!==r&&Pe.replace(r),l(),a(new Error("Modal closed")))})}const c=$.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&pt.close(),c(),o(us.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=$.subscribeKey("activeCaipAddress",s=>{s&&(pt.close(),r(),e(us.parseCaipAddress(s)))});ve.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=ce.state.socialWindow,i=ce.state.socialProvider,o=!1,a=null;const c=$.subscribeKey("activeCaipAddress",l=>{l&&(e&&pt.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===X.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=ue.getAuthConnector();if(g&&!o){s&&(s.close(),ce.setSocialWindow(void 0,$.state.activeChain),s=ce.state.socialWindow),o=!0;const w=f.data.resultUri;if(i&&wt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await g.provider.connectSocial(w),i){le.setConnectedSocialProvider(i),await ve.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const y=$.state.activeCaipAddress;if(!y){u(new Error("Failed to connect"));return}l(us.parseCaipAddress(y)),wt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&wt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&wt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(ce.setSocialProvider(t,$.state.activeChain),i=ce.state.socialProvider,wt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=pt.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=ue.getAuthConnector();if(p&&!ce.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();ce.setFarcasterUrl(g,$.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=ue.getAuthConnector();a=Ce.returnOpenHref(`${X.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){ce.setSocialWindow(a,$.state.activeChain),s=ce.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=pt.subscribeKey("open",c=>{c||(Pe.state.view!==e&&Pe.replace(e),a(),i(new Error("Modal closed")))})}const o=$.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&pt.close(),o(),s(us.parseCaipAddress(a)))})})},async updateEmail(){const t=le.getConnectedConnectorId($.state.activeChain),e=ue.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==X.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Pe.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(pt.close(),clearInterval(i),o(),r({email:a}))},vX),o=pt.subscribeKey("open",a=>{a||(Pe.state.view!=="Connect"&&Pe.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return $.checkIfSmartAccountEnabled()&&((n=ce.state.preferredAccountTypes)==null?void 0:n[t])===On.ACCOUNT_TYPES.EOA}},rl=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),fn=Ot({...rl}),bX={state:fn,subscribeKey(t,e){return Gn(fn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ce.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){fn.message=rl.message,fn.variant=rl.variant,fn.svg=rl.svg,fn.open=rl.open,fn.autoClose=rl.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=rl.autoClose}){fn.open?(fn.open=!1,setTimeout(()=>{fn.message=t,fn.variant=n,fn.svg=e,fn.open=!0,fn.autoClose=r},150)):(fn.message=t,fn.variant=n,fn.svg=e,fn.open=!0,fn.autoClose=r)}},gi=bX,It=Ot({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),EX={state:It,subscribe(t){return Vn(It,()=>t(It))},setLastNetworkInView(t){It.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");It.loading=!0;try{const s=await Te.fetchTransactions({account:t,cursor:It.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Rf.filterSpamTransactions(s.data),o=Rf.filterByConnectedChain(i),a=[...It.transactions,...o];It.loading=!1,e==="coinbase"?It.coinbaseTransactions=Rf.groupTransactionsByYearAndMonth(It.coinbaseTransactions,s.data):(It.transactions=a,It.transactionsByYear=Rf.groupTransactionsByYearAndMonth(It.transactionsByYear,o)),It.empty=a.length===0,It.next=s.next?s.next:void 0}catch{const i=$.state.activeChain;wt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ne.state.projectId,cursor:It.next,isSmartAccount:((r=ce.state.preferredAccountTypes)==null?void 0:r[i])===On.ACCOUNT_TYPES.SMART_ACCOUNT}}),gi.showError("Failed to fetch transactions"),It.loading=!1,It.empty=!0,It.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){It.next=void 0},resetTransactions(){It.transactions=[],It.transactionsByYear={},It.lastNetworkInView=void 0,It.loading=!1,It.empty=!1,It.next=void 0}},Rf=Ss(EX,"API_ERROR"),et=Ot({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Kc;const _X={state:et,subscribe(t){return Vn(et,()=>t(et))},subscribeKey(t,e){return Gn(et,t,e)},_getClient(){return et._client},setClient(t){et._client=Ql(t)},initialize(t){const e=le.getConnections();for(const n of t){const r=n.namespace;if(r){const s=et.connections.get(r)??[],i=e[r]??[],o=[...s,...i];et.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(Ce.isTelegram()||Ce.isSafari()&&Ce.isIos()){if(Kc){await Kc,Kc=void 0;return}if(!Ce.isPairingExpired(et==null?void 0:et.wcPairingExpiry)){const s=et.wcUri;et.wcUri=s;return}Kc=(e=(t=ve._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ve.state.status="connecting",await Kc,Kc=void 0,et.wcPairingExpiry=void 0,ve.state.status="connected"}else await((r=(n=ve._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=ve._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&$.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=ve._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||$.state.activeChain;e&&ue.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;pt.setLoading(!0,$.state.activeChain);const n=ue.getAuthConnector();n&&(ce.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),le.setPreferredAccountTypes(ce.state.preferredAccountTypes??{[e]:t}),await ve.reconnectExternal(n),pt.setLoading(!1,$.state.activeChain),wt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ve._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ve._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ve._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ve._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ve._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ve._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ve._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ve._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ve._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ve._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ve._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ve._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){et.wcUri=void 0,et.wcPairingExpiry=void 0,et.wcLinking=void 0,et.recentWallet=void 0,et.status="disconnected",Rf.resetTransactions(),le.deleteWalletConnectDeepLink()},resetUri(){et.wcUri=void 0,et.wcPairingExpiry=void 0,Kc=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ve.state;t&&le.setWalletConnectDeepLink(t),e&&le.setAppKitRecent(e),wt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Pe.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){et.wcBasic=t},setUri(t){et.wcUri=t,et.wcPairingExpiry=Ce.getPairingExpiry()},setWcLinking(t){et.wcLinking=t},setWcError(t){et.wcError=t,et.buffering=!1},setRecentWallet(t){et.recentWallet=t},setBuffering(t){et.buffering=t},setStatus(t){et.status=t},setIsSwitchingConnection(t){et.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=ve._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new ih("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){et.connections=new Map(et.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&Oo.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await ve.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=ue.getConnectorById(t.connectorId),s=t.connectorId===X.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await ve.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await ve.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=ue.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===X.CONNECTOR_ID.AUTH,a=t.connectorId===X.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Oo.isSocialProvider(i)){const{address:d}=await Oo.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){pt.open({view:"ConnectingFarcaster"})},onConnect(){Pe.replace("ProfileWallets")}});c=d}else{const{address:d}=await Oo.connectEmail({closeModalOnConnect:r,onOpen(){pt.open({view:"EmailLogin"})},onConnect(){Pe.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Oo.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){pt.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Pe.replace("ProfileWallets")}});c=d}else{const d=await ve.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await ve.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){ug.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=ce.getCaipAddress(n);if(o){const{address:c}=us.parseCaipAddress(o);i=c}const a=ug.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await ve.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ve.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},ve=Ss(_X),Nu=Ot({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Zi={state:Nu,subscribe(t){return Vn(Nu,()=>t(Nu))},subscribeOpen(t){return Gn(Nu,"open",t)},set(t){Object.assign(Nu,{...Nu,...t})}};function CX(t){const e=Array.from($.state.chains.keys());let n=[];return t?(n.push([t,$.state.chains.get(t)]),Oo.checkNamespaceConnectorId(t,X.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Oo.checkNamespaceConnectorId(r,X.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,$.state.chains.get(r)])}):Oo.checkNamespaceConnectorId(t,X.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Oo.checkNamespaceConnectorId(r,X.CONNECTOR_ID.AUTH)&&n.push([r,$.state.chains.get(r)])})):n=Array.from($.state.chains.entries()),n}function G8(){var r,s;const t=((r=$.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=$.state.activeCaipNetwork)==null?void 0:s.id)||1,n=yt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const xX={async getTokenList(){var r;const t=$.state.activeCaipNetwork,e=await Te.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=$.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(ve==null?void 0:ve.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Te.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Te.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=ve.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await CA.getMyTokensWithBalance(t);return ce.setTokenBalance(e,$.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:G8(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},mt=Ot({tokenBalances:[],loading:!1}),SX={state:mt,subscribe(t){return Vn(mt,()=>t(mt))},subscribeKey(t,e){return Gn(mt,t,e)},setToken(t){t&&(mt.token=Ql(t))},setTokenAmount(t){mt.sendTokenAmount=t},setReceiverAddress(t){mt.receiverAddress=t},setReceiverProfileImageUrl(t){mt.receiverProfileImageUrl=t},setReceiverProfileName(t){mt.receiverProfileName=t},setNetworkBalanceInUsd(t){mt.networkBalanceInUSD=t},setLoading(t){mt.loading=t},async sendToken(){var t;try{switch(dt.setLoading(!0),(t=$.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await dt.sendEvmToken();return;case"solana":await dt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{dt.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=$.state.activeChain,e=(n=ce.state.preferredAccountTypes)==null?void 0:n[t];if(!dt.state.sendTokenAmount||!dt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!dt.state.token)throw new Error("A token is required");(r=dt.state.token)!=null&&r.address?(wt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===On.ACCOUNT_TYPES.SMART_ACCOUNT,token:dt.state.token.address,amount:dt.state.sendTokenAmount,network:((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await dt.sendERC20Token({receiverAddress:dt.state.receiverAddress,tokenAddress:dt.state.token.address,sendTokenAmount:dt.state.sendTokenAmount,decimals:dt.state.token.quantity.decimals})):(wt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===On.ACCOUNT_TYPES.SMART_ACCOUNT,token:dt.state.token.symbol||"",amount:dt.state.sendTokenAmount,network:((i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await dt.sendNativeToken({receiverAddress:dt.state.receiverAddress,sendTokenAmount:dt.state.sendTokenAmount,decimals:dt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;mt.loading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=$.state.activeCaipAddress,s=r?Ce.getPlainAddress(r):void 0;if(mt.lastRetry&&!Ce.isAllowedRetry(mt.lastRetry,30*yt.ONE_SEC_MS))return mt.loading=!1,[];try{if(s&&e&&n){const a=await CA.getMyTokensWithBalance();return mt.tokenBalances=a,mt.lastRetry=void 0,a}}catch(a){mt.lastRetry=Date.now(),t==null||t(a),gi.showError("Token Balance Unavailable")}finally{mt.loading=!1}return[]},fetchNetworkBalance(){if(mt.tokenBalances.length===0)return;const t=xX.mapBalancesToSwapTokens(mt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===G8());e&&(mt.networkBalanceInUSD=e?HZ.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Pe.pushTransactionStack({});const e=t.receiverAddress,n=ce.state.address,r=ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ve.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),wt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=ce.state.preferredAccountTypes)==null?void 0:i.eip155)===On.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=dt.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=ve._getClient())==null||c.updateBalance("eip155"),dt.resetSend()},async sendERC20Token(t){Pe.pushTransactionStack({onSuccess(){Pe.replace("Account")}});const e=ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(ce.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ce.getPlainAddress(t.tokenAddress);await ve.writeContract({fromAddress:ce.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:YZ.getERC20Abi(n),chainNamespace:"eip155"}),dt.resetSend()}},async sendSolanaToken(){var t;if(!dt.state.sendTokenAmount||!dt.state.receiverAddress)throw new Error("An amount and receiver address are required");Pe.pushTransactionStack({onSuccess(){Pe.replace("Account")}}),await ve.sendTransaction({chainNamespace:"solana",to:dt.state.receiverAddress,value:dt.state.sendTokenAmount}),(t=ve._getClient())==null||t.updateBalance("solana"),dt.resetSend()},resetSend(){mt.token=void 0,mt.sendTokenAmount=void 0,mt.receiverAddress=void 0,mt.receiverProfileImageUrl=void 0,mt.receiverProfileName=void 0,mt.loading=!1,mt.tokenBalances=[]}},dt=Ss(SX),b1={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},ay={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},he=Ot({chains:jZ(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),AX={state:he,subscribe(t){return Vn(he,()=>{t(he)})},subscribeKey(t,e){return Gn(he,t,e)},subscribeChainProp(t,e,n){let r;return Vn(he.chains,()=>{var i;const s=n||he.activeChain;if(s){const o=(i=he.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=le.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ne.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(he.noAdapters=!0),he.noAdapters||(he.activeChain=a==null?void 0:a.namespace,he.activeCaipNetwork=i,$.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),he.activeChain&&Zi.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);$.state.chains.set(u,{namespace:u,networkState:Ot({...ay,caipNetwork:d==null?void 0:d[0]}),accountState:Ot(b1),caipNetworks:d??[],...n}),$.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(he.activeChain===t){const r=Array.from(he.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&$.setActiveCaipNetwork(s)}}he.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){he.chains.set(t.namespace,{namespace:t.namespace,networkState:{...ay,caipNetwork:r[0]},accountState:b1,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),$.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=he.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),he.chains.set(t.chainNamespace,{...e,caipNetworks:r}),$.setRequestedCaipNetworks(r,t.chainNamespace),ue.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=he.chains.get(t);if(n){const o=((r=he.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&$.setActiveCaipNetwork(n.caipNetworks[0]),he.chains.set(t,{...n,caipNetworks:a}),$.setRequestedCaipNetworks(a||[],t),a.length===0&&ue.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=he.chains.get(t);n&&(n.networkState={...n.networkState||ay,...e},he.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=he.chains.get(t);if(r){const s={...r.accountState||b1,...e};he.chains.set(t,{...r,accountState:s}),(he.chains.size===1||he.activeChain===t)&&(e.caipAddress&&(he.activeCaipAddress=e.caipAddress),ce.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=he.chains.get(t);if(n){const r={...n.networkState||ay,...e};he.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){$.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&ue.removeConnectorId(n)},setActiveNamespace(t){var r,s;he.activeChain=t;const e=t?he.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(he.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,he.activeCaipNetwork=n,$.setChainNetworkData(t,{caipNetwork:n}),le.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Zi.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;he.activeChain!==t.chainNamespace&&$.setIsSwitchingNamespace(!0);const e=he.chains.get(t.chainNamespace);he.activeChain=t.chainNamespace,he.activeCaipNetwork=t,$.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?he.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:he.activeCaipAddress=void 0,$.setAccountProp("caipAddress",he.activeCaipAddress,t.chainNamespace),e&&ce.replaceState(e.accountState),dt.resetSend(),Zi.set({activeChain:he.activeChain,selectedNetworkId:(i=he.activeCaipNetwork)==null?void 0:i.caipNetworkId}),le.setActiveCaipNetworkId(t.caipNetworkId),!$.checkIfSupportedNetwork(t.chainNamespace)&&ne.state.enableNetworkSwitch&&!ne.state.allowUnsupportedChain&&!ve.state.wcBasic&&$.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=he.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==$.state.activeChain,n=(s=$.getNetworkData(t))==null?void 0:s.caipNetwork,r=$.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await $.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=$.state.chains.get($.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=he.activeCaipNetwork)==null?void 0:o.id)})),r=$.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&pt.close()}catch{Pe.goBack()}wt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||he.activeChain,n=he.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||he.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=he.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=he.activeChain;if(e&&(n=e),!n)return;const r=(s=he.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=he.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=he.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ce.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return he.chains.forEach(e=>{const n=$.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){$.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=$.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));ue.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return he.chains.forEach(e=>{const n=$.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return he.activeCaipNetwork},getActiveCaipAddress(){return he.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=he.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=$.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());$.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||he.activeCaipNetwork,r=$.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!he.activeChain)return!0;const e=$.getRequestedCaipNetworks(he.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){$.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=lg.caipNetworkIdToNumber((r=he.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=he.activeChain;if(!e||!t)return!1;const n=$.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){pt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=he.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&yt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){$.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");he.activeCaipAddress=void 0,$.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),ue.removeConnectorId(e)},setIsSwitchingNamespace(t){he.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(he.chains.forEach(s=>{X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=he.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=$.state.chains.get(t))==null?void 0:e.accountState:ce.state},getNetworkData(t){var n;const e=t||he.activeChain;if(e)return(n=$.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=$.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ue.state.filterByNamespace;return(t?[he.chains.get(t)]:Array.from(he.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?$.getRequestedCaipNetworks(t):$.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){he.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return he.lastConnectedSIWECaipNetwork}},$=Ss(AX),IX={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},K8=Ce.getBlockchainApiUrl(),Pr=Ot({clientId:null,api:new om({baseUrl:K8,clientId:null}),supportedChains:{http:[],ws:[]}}),Te={state:Pr,async get(t){const{st:e,sv:n}=Te.getSdkProperties(),r=ne.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Pr.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ne.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Pr.supportedChains.http.length||await Te.getSupportedNetworks()}catch{return!1}return Pr.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Te.get({path:"v1/supported-chains"});return Pr.supportedChains=t,t}catch{return Pr.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Te.isNetworkSupported(e))return{avatar:"",name:""};const r=le.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Te.get({path:`/v1/identity/${t}`,params:{sender:$.state.activeCaipAddress?Ce.getPlainAddress($.state.activeCaipAddress):void 0}});return le.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Te.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Te.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Te.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Te.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Te.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Te.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Te.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Pr.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ne.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Te.isNetworkSupported((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Te.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Te.getSdkProperties();if(!await Te.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Te.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Te.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Pr.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:yt.CONVERT_SLIPPAGE_TOLERANCE},projectId:ne.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Te.getSdkProperties();if(!await Te.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Te.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Te.getSdkProperties();if(!await Te.isNetworkSupported((l=$.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return gi.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=le.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Te.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return le.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Te.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Te.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Te.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Te.get({path:`/v1/profile/reverse/${t}`,params:{sender:ce.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Te.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Te.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Te.isNetworkSupported((i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Pr.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Te.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Pr.api.post({path:"/v1/generators/onrampurl",params:{projectId:ne.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Te.isNetworkSupported((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Te.get({path:"/v1/onramp/options"})}catch{return IX}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Te.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Pr.api.post({path:"/v1/onramp/quote",params:{projectId:ne.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Te.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Te.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Te.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Pr.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ne.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Pr.clientId=t,Pr.api=new om({baseUrl:K8,clientId:t})}},E1={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return bh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},CA={async getMyTokensWithBalance(t){const e=ce.state.address,n=$.state.activeCaipNetwork,r=ue.getConnectorId("eip155")===X.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=le.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Te.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=E1.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ve.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ve.walletGetAssets({account:t,chainFilter:[s]});if(!E1.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>E1.createBalance(l,e.caipNetworkId));return le.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Is=Ot({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),TX={state:Is,replaceState(t){t&&Object.assign(Is,Ql(t))},subscribe(t){return $.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return $.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){$.setAccountProp("status",t,e)},getCaipAddress(t){return $.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ce.getPlainAddress(t):void 0;e===$.state.activeChain&&($.state.activeCaipAddress=t),$.setAccountProp("caipAddress",t,e),$.setAccountProp("address",n,e)},setBalance(t,e,n){$.setAccountProp("balance",t,n),$.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){$.setAccountProp("profileName",t,e)},setProfileImage(t,e){$.setAccountProp("profileImage",t,e)},setUser(t,e){$.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){$.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){$.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){$.setAccountProp("currentTab",t,$.state.activeChain)},setTokenBalance(t,e){t&&$.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){$.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){$.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=$.getAccountProp("addressLabels",n)||new Map;r.set(t,e),$.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=$.getAccountProp("addressLabels",e)||new Map;n.delete(t),$.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){$.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){$.setAccountProp("preferredAccountTypes",{...Is.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Is.preferredAccountTypes=t},setSocialProvider(t,e){t&&$.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){$.setAccountProp("socialWindow",t?Ql(t):void 0,e)},setFarcasterUrl(t,e){$.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Is.balanceLoading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=$.state.activeCaipAddress,s=r?Ce.getPlainAddress(r):void 0;if(Is.lastRetry&&!Ce.isAllowedRetry(Is.lastRetry,30*yt.ONE_SEC_MS))return Is.balanceLoading=!1,[];try{if(s&&e&&n){const a=await CA.getMyTokensWithBalance();return ce.setTokenBalance(a,n),Is.lastRetry=void 0,Is.balanceLoading=!1,a}}catch(a){Is.lastRetry=Date.now(),t==null||t(a),gi.showError("Token Balance Unavailable")}finally{Is.balanceLoading=!1}return[]},resetAccount(t){$.resetAccount(t)}},ce=Ss(TX),NX={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=$.state.activeCaipNetwork,r=Pe.state.data;if(t.id===(n==null?void 0:n.id))return;const i=ce.getCaipAddress($.state.activeChain),o=t.chainNamespace!==$.state.activeChain,a=ce.getCaipAddress(t.chainNamespace),l=ue.getConnectorId($.state.activeChain)===X.CONNECTOR_ID.AUTH,u=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Pe.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Pe.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Pe.push("SwitchNetwork",{...r,network:t})}},kr=Ot({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),PX={state:kr,subscribe(t){return Vn(kr,()=>t(kr))},subscribeKey(t,e){return Gn(kr,t,e)},async open(t){var o,a;const e=ce.state.status==="connected",n=t==null?void 0:t.namespace,r=$.state.activeChain,s=n&&n!==r,i=(o=$.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(ve.state.wcBasic?xe.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await xe.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),ue.setFilterByNamespace(t==null?void 0:t.namespace),pt.setLoading(!0,n),n&&s){const c=((a=$.getNetworkData(n))==null?void 0:a.caipNetwork)||$.getRequestedCaipNetworks(n)[0];c&&NX.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=$.state.noAdapters;ne.state.manualWCControl||c&&!i?Ce.isMobile()?Pe.reset("AllWallets"):Pe.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Pe.reset(t.view,t.data):i?Pe.reset("Account"):Pe.reset("Connect")}kr.open=!0,Zi.set({open:!0}),wt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ne.state.enableEmbedded,e=!!$.state.activeCaipAddress;kr.open&&wt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),kr.open=!1,Pe.reset("Connect"),pt.clearLoading(),t?e?Pe.replace("Account"):Pe.push("Connect"):Zi.set({open:!1}),ve.resetUri()},setLoading(t,e){e&&kr.loadingNamespaceMap.set(e,t),kr.loading=t,Zi.set({loading:t})},clearLoading(){kr.loadingNamespaceMap.clear(),kr.loading=!1},shake(){kr.shake||(kr.shake=!0,setTimeout(()=>{kr.shake=!1},500))}},pt=Ss(PX),Xf={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},_C={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},kX={providers:q8,selectedProvider:null,error:null,purchaseCurrency:Xf,paymentCurrency:_C,purchaseCurrencies:[Xf],paymentCurrencies:[],quotesLoading:!1},tt=Ot(kX),OX={state:tt,subscribe(t){return Vn(tt,()=>t(tt))},subscribeKey(t,e){return Gn(tt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=$.state.activeChain===X.CHAIN.SOLANA?"SOL":"USDC",n=ce.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",JZ),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ne.state.projectId),tt.selectedProvider={...t,url:r.toString()}}else tt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=q8.filter(r=>e.includes(r.name));tt.providers=n}else tt.providers=[]},setPurchaseCurrency(t){tt.purchaseCurrency=t},setPaymentCurrency(t){tt.paymentCurrency=t},setPurchaseAmount(t){CC.state.purchaseAmount=t},setPaymentAmount(t){CC.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Te.getOnrampOptions();tt.purchaseCurrencies=t.purchaseCurrencies,tt.paymentCurrencies=t.paymentCurrencies,tt.paymentCurrency=t.paymentCurrencies[0]||_C,tt.purchaseCurrency=t.purchaseCurrencies[0]||Xf,await xe.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await xe.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;tt.quotesLoading=!0;try{const n=await Te.getOnrampQuote({purchaseCurrency:tt.purchaseCurrency,paymentCurrency:tt.paymentCurrency,amount:((t=tt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=tt.purchaseCurrency)==null?void 0:e.symbol});return tt.quotesLoading=!1,tt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return tt.error=n.message,tt.quotesLoading=!1,null}finally{tt.quotesLoading=!1}},resetState(){tt.selectedProvider=null,tt.error=null,tt.purchaseCurrency=Xf,tt.paymentCurrency=_C,tt.purchaseCurrencies=[Xf],tt.paymentCurrencies=[],tt.paymentAmount=void 0,tt.purchaseAmount=void 0,tt.quotesLoading=!1}},CC=Ss(OX),gN=2147483648,RX={convertEVMChainIdToCoinType(t){if(t>=gN)throw new Error("Invalid chainId");return(gN|t)>>>0}},Ts=Ot({suggestions:[],loading:!1}),$X={state:Ts,subscribe(t){return Vn(Ts,()=>t(Ts))},subscribeKey(t,e){return Gn(Ts,t,e)},async resolveName(t){var e,n;try{return await Te.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Te.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ts.loading=!0,Ts.suggestions=[];const e=await Te.getEnsNameSuggestions(t);return Ts.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ts.suggestions}catch(e){const n=ep.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ts.loading=!1}},async getNamesForAddress(t){try{if(!$.state.activeCaipNetwork)return[];const n=le.getEnsFromCacheForAddress(t);if(n)return n;const r=await Te.reverseLookupEnsName({address:t});return le.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=ep.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=$.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=ce.state.address,r=ue.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Ts.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Pe.pushTransactionStack({onCancel(){Pe.replace("RegisterAccountName")}});const i=await ve.signMessage(s);Ts.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=RX.convertEVMChainIdToCoinType(Number(o));await Te.registerEnsName({coinType:a,address:n,signature:i,message:s}),ce.setProfileName(t,e.chainNamespace),Pe.replace("RegisterAccountNameSuccess")}catch(s){const i=ep.parseEnsApiError(s,`Error registering name ${t}`);throw Pe.replace("RegisterAccountName"),new Error(i)}finally{Ts.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},ep=Ss($X);var xA={exports:{}},Nd=typeof Reflect=="object"?Reflect:null,mN=Nd&&typeof Nd.apply=="function"?Nd.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},nw;Nd&&typeof Nd.ownKeys=="function"?nw=Nd.ownKeys:Object.getOwnPropertySymbols?nw=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:nw=function(e){return Object.getOwnPropertyNames(e)};function DX(t){console&&console.warn&&console.warn(t)}var Y8=Number.isNaN||function(e){return e!==e};function St(){St.init.call(this)}xA.exports=St;xA.exports.once=MX;St.EventEmitter=St;St.prototype._events=void 0;St.prototype._eventsCount=0;St.prototype._maxListeners=void 0;var yN=10;function Ev(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(St,"defaultMaxListeners",{enumerable:!0,get:function(){return yN},set:function(t){if(typeof t!="number"||t<0||Y8(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");yN=t}});St.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};St.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Y8(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function J8(t){return t._maxListeners===void 0?St.defaultMaxListeners:t._maxListeners}St.prototype.getMaxListeners=function(){return J8(this)};St.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")mN(c,this,n);else for(var l=c.length,u=t6(c,l),r=0;r<l;++r)mN(u[r],this,n);return!0};function Q8(t,e,n,r){var s,i,o;if(Ev(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=J8(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,DX(a)}return t}St.prototype.addListener=function(e,n){return Q8(this,e,n,!1)};St.prototype.on=St.prototype.addListener;St.prototype.prependListener=function(e,n){return Q8(this,e,n,!0)};function jX(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Z8(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=jX.bind(r);return s.listener=n,r.wrapFn=s,s}St.prototype.once=function(e,n){return Ev(n),this.on(e,Z8(this,e,n)),this};St.prototype.prependOnceListener=function(e,n){return Ev(n),this.prependListener(e,Z8(this,e,n)),this};St.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Ev(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():UX(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};St.prototype.off=St.prototype.removeListener;St.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function X8(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?LX(s):t6(s,s.length)}St.prototype.listeners=function(e){return X8(this,e,!0)};St.prototype.rawListeners=function(e){return X8(this,e,!1)};St.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):e6.call(t,e)};St.prototype.listenerCount=e6;function e6(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}St.prototype.eventNames=function(){return this._eventsCount>0?nw(this._events):[]};function t6(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function UX(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function LX(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function MX(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}n6(t,e,i,{once:!0}),e!=="error"&&BX(t,s,{once:!0})})}function BX(t,e,n){typeof t.on=="function"&&n6(t,"error",e,n)}function n6(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Gs=xA.exports;const SA=cu(Gs);var oe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xC=function(t,e){return xC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},xC(t,e)};function FX(t,e){xC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var SC=function(){return SC=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},SC.apply(this,arguments)};function zX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function WX(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function qX(t,e){return function(n,r){e(n,r,t)}}function HX(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function VX(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function GX(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function KX(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function YX(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function AC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function r6(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function JX(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r6(arguments[e]));return t}function QX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function dg(t){return this instanceof dg?(this.v=t,this):new dg(t)}function ZX(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof dg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function XX(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:dg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function eee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof AC=="function"?AC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function tee(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function nee(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function ree(t){return t&&t.__esModule?t:{default:t}}function see(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function iee(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const oee=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return SC},__asyncDelegator:XX,__asyncGenerator:ZX,__asyncValues:eee,__await:dg,__awaiter:VX,__classPrivateFieldGet:see,__classPrivateFieldSet:iee,__createBinding:KX,__decorate:WX,__exportStar:YX,__extends:FX,__generator:GX,__importDefault:ree,__importStar:nee,__makeTemplateObject:tee,__metadata:HX,__param:qX,__read:r6,__rest:zX,__spread:JX,__spreadArrays:QX,__values:AC},Symbol.toStringTag,{value:"Module"})),_v=T0(oee);var _1={},rf={},wN;function aee(){if(wN)return rf;wN=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return rf.delay=t,rf}var Yc={},C1={},Jc={},vN;function cee(){return vN||(vN=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.ONE_THOUSAND=Jc.ONE_HUNDRED=void 0,Jc.ONE_HUNDRED=100,Jc.ONE_THOUSAND=1e3),Jc}var x1={},bN;function lee(){return bN||(bN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(x1)),x1}var EN;function s6(){return EN||(EN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=_v;e.__exportStar(cee(),t),e.__exportStar(lee(),t)}(C1)),C1}var _N;function uee(){if(_N)return Yc;_N=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.fromMiliseconds=Yc.toMiliseconds=void 0;const t=s6();function e(r){return r*t.ONE_THOUSAND}Yc.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Yc.fromMiliseconds=n,Yc}var CN;function dee(){return CN||(CN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=_v;e.__exportStar(aee(),t),e.__exportStar(uee(),t)}(_1)),_1}var Pu={},xN;function hee(){if(xN)return Pu;xN=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Pu.Watch=t,Pu.default=t,Pu}var S1={},sf={},SN;function fee(){if(SN)return sf;SN=1,Object.defineProperty(sf,"__esModule",{value:!0}),sf.IWatch=void 0;class t{}return sf.IWatch=t,sf}var AN;function pee(){return AN||(AN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),_v.__exportStar(fee(),t)}(S1)),S1}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=_v;e.__exportStar(dee(),t),e.__exportStar(hee(),t),e.__exportStar(pee(),t),e.__exportStar(s6(),t)})(oe);class mu{}let gee=class extends mu{constructor(e){super()}};const IN=oe.FIVE_SECONDS,yu={pulse:"heartbeat_pulse"};let mee=class i6 extends gee{constructor(e){super(e),this.events=new Gs.EventEmitter,this.interval=IN,this.interval=(e==null?void 0:e.interval)||IN}static async init(e){const n=new i6(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),oe.toMiliseconds(this.interval))}pulse(){this.events.emit(yu.pulse)}};const yee=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,wee=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,vee=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function bee(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Eee(t);return}return e}function Eee(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function cy(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!vee.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(yee.test(t)||wee.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,bee)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function _ee(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Sn(t,...e){try{return _ee(t(...e))}catch(n){return Promise.reject(n)}}function Cee(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function xee(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function rw(t){if(Cee(t))return String(t);if(xee(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return rw(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const IC="base64:";function See(t){return typeof t=="string"?t:IC+Tee(t)}function Aee(t){return typeof t!="string"||!t.startsWith(IC)?t:Iee(t.slice(IC.length))}function Iee(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Tee(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ur(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Nee(...t){return Ur(t.join(":"))}function ly(t){return t=Ur(t),t?t+":":""}function Pee(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function kee(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const Oee="memory",Ree=()=>{const t=new Map;return{name:Oee,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function $ee(t={}){const e={mounts:{"":t.driver||Ree()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ur(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await TN(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=Ur(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:y,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ur(l);const{relativeKey:d,driver:h}=n(l);return Sn(h.hasItem,d,u)},getItem(l,u={}){l=Ur(l);const{relativeKey:d,driver:h}=n(l);return Sn(h.getItem,d,u).then(f=>cy(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Sn(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:Nee(d.base,f.key),value:cy(f.value)}))):Promise.all(d.items.map(h=>Sn(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:cy(f)})))))},getItemRaw(l,u={}){l=Ur(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Sn(h.getItemRaw,d,u):Sn(h.getItem,d,u).then(f=>Aee(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ur(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Sn(f.setItem,h,rw(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Sn(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:rw(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Sn(d.driver.setItem,h.relativeKey,rw(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ur(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Sn(f.setItemRaw,h,u,d);else if(f.setItem)await Sn(f.setItem,h,See(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ur(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Sn(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Sn(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ur(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Sn(h.getMeta,d,u)),!u.nativeOnly){const p=await Sn(h.getItem,d+"$",u).then(g=>cy(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=ly(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await Sn(y.driver.getKeys,y.relativeBase,u);for(const v of b){const _=y.mountpoint+Ur(v);h.some(E=>_.startsWith(E))||f.push(_)}h=[y.mountpoint,...h.filter(v=>!v.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||Pee(y,u.maxDepth))&&kee(y,l))},async clear(l,u={}){l=ly(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Sn(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>NN(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=ly(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(TN(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=ly(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await NN(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ur(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ur(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function TN(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function NN(t){typeof t.dispose=="function"&&await Sn(t.dispose)}function wu(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function o6(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=wu(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let A1;function am(){return A1||(A1=o6("keyval-store","keyval")),A1}function PN(t,e=am()){return e("readonly",n=>wu(n.get(t)))}function Dee(t,e,n=am()){return n("readwrite",r=>(r.put(e,t),wu(r.transaction)))}function jee(t,e=am()){return e("readwrite",n=>(n.delete(t),wu(n.transaction)))}function Uee(t=am()){return t("readwrite",e=>(e.clear(),wu(e.transaction)))}function Lee(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},wu(t.transaction)}function Mee(t=am()){return t("readonly",e=>{if(e.getAllKeys)return wu(e.getAllKeys());const n=[];return Lee(e,r=>n.push(r.key)).then(()=>n)})}const Bee=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Fee=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Xl(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Fee(t)}catch{return t}}function Yo(t){return typeof t=="string"?t:Bee(t)||""}const zee="idb-keyval";var Wee=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=o6(t.dbName,t.storeName)),{name:zee,options:t,async hasItem(s){return!(typeof await PN(n(s),r)>"u")},async getItem(s){return await PN(n(s),r)??null},setItem(s,i){return Dee(n(s),i,r)},removeItem(s){return jee(n(s),r)},getKeys(){return Mee(r)},clear(){return Uee(r)}}};const qee="WALLET_CONNECT_V2_INDEXED_DB",Hee="keyvaluestorage";let Vee=class{constructor(){this.indexedDb=$ee({driver:Wee({dbName:qee,storeName:Hee})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Yo(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var I1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sw={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof I1<"u"&&I1.localStorage?sw.exports=I1.localStorage:typeof window<"u"&&window.localStorage?sw.exports=window.localStorage:sw.exports=new e})();function Gee(t){var e;return[t[0],Xl((e=t[1])!=null?e:"")]}let Kee=class{constructor(){this.localStorage=sw.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Gee)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Xl(n)}async setItem(e,n){this.localStorage.setItem(e,Yo(n))}async removeItem(e){this.localStorage.removeItem(e)}};const Yee="wc_storage_version",kN=1,Jee=async(t,e,n)=>{const r=Yee,s=await e.getItem(r);if(s&&s>=kN){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,kN),n(e),Qee(t,o)},Qee=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Zee=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Kee;this.storage=e;try{const n=new Vee;Jee(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function Xee(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var ete=tte;function tte(t,e,n){var r=n&&n.stringify||Xee,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const ON=ete;var ed=Xi;const hg=dte().console||{},nte={mapHttpRequest:uy,mapHttpResponse:uy,wrapRequestSerializer:T1,wrapResponseSerializer:T1,wrapErrorSerializer:T1,req:uy,res:uy,err:ate};function rte(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Xi(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||hg;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=rte(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=fg),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:cte(t)};c.levels=Xi.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=fg,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=TC());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,ku(l,c,"error","log"),ku(l,c,"fatal","error"),ku(l,c,"warn","error"),ku(l,c,"info","log"),ku(l,c,"debug","log"),ku(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,Cv([p],b,y,this._stdErrSerialize)}function v(_){this._childLevel=(_._childLevel|0)+1,this.error=Ou(_,p,"error"),this.fatal=Ou(_,p,"fatal"),this.warn=Ou(_,p,"warn"),this.info=Ou(_,p,"info"),this.debug=Ou(_,p,"debug"),this.trace=Ou(_,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=TC([].concat(_._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Xi.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Xi.stdSerializers=nte;Xi.stdTimeFunctions=Object.assign({},{nullTime:a6,epochTime:c6,unixTime:lte,isoTime:ute});function ku(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?fg:s[n]?s[n]:hg[n]||hg[r]||fg,ste(t,e,n)}function ste(t,e,n){!t.transmit&&e[n]===fg||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===hg?hg:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Cv(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,ite(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Xi.levels.values[l],d=Xi.levels.values[n];if(d<u)return;ote(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Xi.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function ite(t,e,n,r){t._serialize&&Cv(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Xi.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?ON(s.shift(),s):void 0}else typeof i=="string"&&(i=ON(s.shift(),s));return i!==void 0&&(o.msg=i),o}function Cv(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Xi.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Ou(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function ote(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Cv(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=TC(c)}function TC(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function ate(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function cte(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?a6:c6}function uy(){return{}}function T1(t){return t}function fg(){}function a6(){return!1}function c6(){return Date.now()}function lte(){return Math.round(Date.now()/1e3)}function ute(){return new Date(Date.now()).toISOString()}function dte(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const cm=cu(ed),hte={level:"info"},lm="custom_context",AA=1e3*1024;let fte=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},RN=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new fte(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},l6=class{constructor(e,n=AA){this.level=e??"error",this.levelValue=ed.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new RN(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===ed.levels.values.error?console.error(e):n===ed.levels.values.warn?console.warn(e):n===ed.levels.values.debug?console.debug(e):n===ed.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Yo({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new RN(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Yo({extraMetadata:e})),new Blob(n,{type:"application/json"})}},pte=class{constructor(e,n=AA){this.baseChunkLogger=new l6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},gte=class{constructor(e,n=AA){this.baseChunkLogger=new l6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var mte=Object.defineProperty,yte=Object.defineProperties,wte=Object.getOwnPropertyDescriptors,$N=Object.getOwnPropertySymbols,vte=Object.prototype.hasOwnProperty,bte=Object.prototype.propertyIsEnumerable,DN=(t,e,n)=>e in t?mte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,t0=(t,e)=>{for(var n in e||(e={}))vte.call(e,n)&&DN(t,n,e[n]);if($N)for(var n of $N(e))bte.call(e,n)&&DN(t,n,e[n]);return t},n0=(t,e)=>yte(t,wte(e));function Sh(t){return n0(t0({},t),{level:(t==null?void 0:t.level)||hte.level})}function Ete(t,e=lm){return t[e]||""}function _te(t,e,n=lm){return t[n]=e,t}function ts(t,e=lm){let n="";return typeof t.bindings>"u"?n=Ete(t,e):n=t.bindings().context||"",n}function Cte(t,e,n=lm){const r=ts(t,n);return r.trim()?`${r}/${e}`:e}function dr(t,e,n=lm){const r=Cte(t,e,n),s=t.child({context:r});return _te(s,r,n)}function xte(t){var e,n;const r=new pte((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:cm(n0(t0({},t.opts),{level:"trace",browser:n0(t0({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Ste(t){var e;const n=new gte((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:cm(n0(t0({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function IA(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?xte(t):Ste(t)}var Ate=Object.defineProperty,Ite=(t,e,n)=>e in t?Ate(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jN=(t,e,n)=>Ite(t,typeof e!="symbol"?e+"":e,n);let Tte=class extends mu{constructor(e){super(),this.opts=e,jN(this,"protocol","wc"),jN(this,"version",2)}};var Nte=Object.defineProperty,Pte=(t,e,n)=>e in t?Nte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kte=(t,e,n)=>Pte(t,e+"",n);let Ote=class extends mu{constructor(e,n){super(),this.core=e,this.logger=n,kte(this,"records",new Map)}},Rte=class{constructor(e,n){this.logger=e,this.core=n}},$te=class extends mu{constructor(e,n){super(),this.relayer=e,this.logger=n}},Dte=class extends mu{constructor(e){super()}},jte=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},Ute=class extends mu{constructor(e,n){super(),this.relayer=e,this.logger=n}},Lte=class extends mu{constructor(e,n){super(),this.core=e,this.logger=n}},Mte=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},Bte=class{constructor(e,n){this.projectId=e,this.logger=n}},Fte=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var zte=Object.defineProperty,Wte=(t,e,n)=>e in t?zte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,UN=(t,e,n)=>Wte(t,typeof e!="symbol"?e+"":e,n);let qte=class{constructor(e){this.opts=e,UN(this,"protocol","wc"),UN(this,"version",2)}},Hte=class{constructor(e){this.client=e}};function Vte(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function u6(t,...e){if(!Vte(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function LN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Gte(t,e){u6(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ru=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const N1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Kte(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function d6(t){return typeof t=="string"&&(t=Kte(t)),u6(t),t}let Yte=class{clone(){return this._cloneInto()}};function Jte(t){const e=r=>t().update(d6(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function h6(t=32){if(Ru&&typeof Ru.getRandomValues=="function")return Ru.getRandomValues(new Uint8Array(t));if(Ru&&typeof Ru.randomBytes=="function")return Ru.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Qte(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Zte=class extends Yte{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=N1(this.buffer)}update(e){LN(this);const{view:n,buffer:r,blockLen:s}=this;e=d6(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=N1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){LN(this),Gte(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Qte(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=N1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const dy=BigInt(2**32-1),NC=BigInt(32);function f6(t,e=!1){return e?{h:Number(t&dy),l:Number(t>>NC&dy)}:{h:Number(t>>NC&dy)|0,l:Number(t&dy)|0}}function Xte(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=f6(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const ene=(t,e)=>BigInt(t>>>0)<<NC|BigInt(e>>>0),tne=(t,e,n)=>t>>>n,nne=(t,e,n)=>t<<32-n|e>>>n,rne=(t,e,n)=>t>>>n|e<<32-n,sne=(t,e,n)=>t<<32-n|e>>>n,ine=(t,e,n)=>t<<64-n|e>>>n-32,one=(t,e,n)=>t>>>n-32|e<<64-n,ane=(t,e)=>e,cne=(t,e)=>t,lne=(t,e,n)=>t<<n|e>>>32-n,une=(t,e,n)=>e<<n|t>>>32-n,dne=(t,e,n)=>e<<n-32|t>>>64-n,hne=(t,e,n)=>t<<n-32|e>>>64-n;function fne(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const pne=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),gne=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,mne=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),yne=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,wne=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),vne=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ve={fromBig:f6,split:Xte,toBig:ene,shrSH:tne,shrSL:nne,rotrSH:rne,rotrSL:sne,rotrBH:ine,rotrBL:one,rotr32H:ane,rotr32L:cne,rotlSH:lne,rotlSL:une,rotlBH:dne,rotlBL:hne,add:fne,add3L:pne,add3H:gne,add4L:mne,add4H:yne,add5H:vne,add5L:wne},[bne,Ene]=Ve.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),fa=new Uint32Array(80),pa=new Uint32Array(80);let _ne=class extends Zte{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)fa[v]=e.getUint32(n),pa[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const _=fa[v-15]|0,E=pa[v-15]|0,x=Ve.rotrSH(_,E,1)^Ve.rotrSH(_,E,8)^Ve.shrSH(_,E,7),S=Ve.rotrSL(_,E,1)^Ve.rotrSL(_,E,8)^Ve.shrSL(_,E,7),T=fa[v-2]|0,C=pa[v-2]|0,O=Ve.rotrSH(T,C,19)^Ve.rotrBH(T,C,61)^Ve.shrSH(T,C,6),R=Ve.rotrSL(T,C,19)^Ve.rotrBL(T,C,61)^Ve.shrSL(T,C,6),B=Ve.add4L(S,R,pa[v-7],pa[v-16]),W=Ve.add4H(B,x,O,fa[v-7],fa[v-16]);fa[v]=W|0,pa[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const _=Ve.rotrSH(d,h,14)^Ve.rotrSH(d,h,18)^Ve.rotrBH(d,h,41),E=Ve.rotrSL(d,h,14)^Ve.rotrSL(d,h,18)^Ve.rotrBL(d,h,41),x=d&f^~d&g,S=h&p^~h&w,T=Ve.add5L(b,E,S,Ene[v],pa[v]),C=Ve.add5H(T,y,_,x,bne[v],fa[v]),O=T|0,R=Ve.rotrSH(r,s,28)^Ve.rotrBH(r,s,34)^Ve.rotrBH(r,s,39),B=Ve.rotrSL(r,s,28)^Ve.rotrBL(r,s,34)^Ve.rotrBL(r,s,39),W=r&i^r&a^i&a,M=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ve.add(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=Ve.add3L(O,B,M);r=Ve.add3H(I,C,R,W),s=I|0}({h:r,l:s}=Ve.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ve.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ve.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ve.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ve.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ve.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ve.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Ve.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){fa.fill(0),pa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Cne=Jte(()=>new _ne);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const TA=BigInt(0),p6=BigInt(1),xne=BigInt(2);function NA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function PA(t){if(!NA(t))throw new Error("Uint8Array expected")}function P1(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Sne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function kA(t){PA(t);let e="";for(let n=0;n<t.length;n++)e+=Sne[t[n]];return e}function g6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?TA:BigInt("0x"+t)}const po={_0:48,_9:57,A:65,F:70,a:97,f:102};function MN(t){if(t>=po._0&&t<=po._9)return t-po._0;if(t>=po.A&&t<=po.F)return t-(po.A-10);if(t>=po.a&&t<=po.f)return t-(po.a-10)}function m6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=MN(t.charCodeAt(i)),a=MN(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Ane(t){return g6(kA(t))}function iw(t){return PA(t),g6(kA(Uint8Array.from(t).reverse()))}function y6(t,e){return m6(t.toString(16).padStart(e*2,"0"))}function PC(t,e){return y6(t,e).reverse()}function go(t,e,n){let r;if(typeof e=="string")try{r=m6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(NA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function BN(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];PA(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const k1=t=>typeof t=="bigint"&&TA<=t;function Ine(t,e,n){return k1(t)&&k1(e)&&k1(n)&&e<=t&&t<n}function of(t,e,n,r){if(!Ine(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Tne(t){let e;for(e=0;t>TA;t>>=p6,e+=1);return e}const Nne=t=>(xne<<BigInt(t-1))-p6,Pne={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||NA(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function OA(t,e,n={}){const r=(s,i,o)=>{const a=Pne[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function FN(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Pn=BigInt(0),on=BigInt(1),al=BigInt(2),kne=BigInt(3),kC=BigInt(4),zN=BigInt(5),WN=BigInt(8);function wn(t,e){const n=t%e;return n>=Pn?n:e+n}function One(t,e,n){if(e<Pn)throw new Error("invalid exponent, negatives unsupported");if(n<=Pn)throw new Error("invalid modulus");if(n===on)return Pn;let r=on;for(;e>Pn;)e&on&&(r=r*t%n),t=t*t%n,e>>=on;return r}function Oi(t,e,n){let r=t;for(;e-- >Pn;)r*=r,r%=n;return r}function qN(t,e){if(t===Pn)throw new Error("invert: expected non-zero number");if(e<=Pn)throw new Error("invert: expected positive modulus, got "+e);let n=wn(t,e),r=e,s=Pn,i=on;for(;n!==Pn;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==on)throw new Error("invert: does not exist");return wn(s,e)}function Rne(t){const e=(t-on)/al;let n,r,s;for(n=t-on,r=0;n%al===Pn;n/=al,r++);for(s=al;s<t&&One(s,e,t)!==t-on;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+on)/kC;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+on)/al;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,on<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function $ne(t){if(t%kC===kne){const e=(t+on)/kC;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%WN===zN){const e=(t-zN)/WN;return function(n,r){const s=n.mul(r,al),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,al),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Rne(t)}const Dne=(t,e)=>(wn(t,e)&on)===on,jne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Une(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=jne.reduce((r,s)=>(r[s]="function",r),e);return OA(t,n)}function Lne(t,e,n){if(n<Pn)throw new Error("invalid exponent, negatives unsupported");if(n===Pn)return t.ONE;if(n===on)return e;let r=t.ONE,s=e;for(;n>Pn;)n&on&&(r=t.mul(r,s)),s=t.sqr(s),n>>=on;return r}function Mne(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function w6(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function v6(t,e,n=!1,r={}){if(t<=Pn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=w6(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Nne(s),ZERO:Pn,ONE:on,create:c=>wn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Pn<=c&&c<t},is0:c=>c===Pn,isOdd:c=>(c&on)===on,neg:c=>wn(-c,t),eql:(c,l)=>c===l,sqr:c=>wn(c*c,t),add:(c,l)=>wn(c+l,t),sub:(c,l)=>wn(c-l,t),mul:(c,l)=>wn(c*l,t),pow:(c,l)=>Lne(a,c,l),div:(c,l)=>wn(c*qN(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>qN(c,t),sqrt:r.sqrt||(c=>(o||(o=$ne(t)),o(a,c))),invertBatch:c=>Mne(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?PC(c,i):y6(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?iw(c):Ane(c)}});return Object.freeze(a)}const HN=BigInt(0),hy=BigInt(1);function O1(t,e){const n=e.negate();return t?n:e}function b6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function R1(t,e){b6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Bne(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Fne(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const $1=new WeakMap,E6=new WeakMap;function D1(t){return E6.get(t)||1}function zne(t,e){return{constTimeNegate:O1,hasPrecomputes(n){return D1(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>HN;)r&hy&&(s=s.add(i)),i=i.double(),r>>=hy;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=R1(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=R1(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=hy);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(O1(y,r[g])):a=a.add(O1(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=R1(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===HN)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=hy),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=$1.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&$1.set(r,s(i))),i},wNAFCached(n,r,s){const i=D1(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=D1(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){b6(r,e),E6.set(n,r),$1.delete(n)}}}function Wne(t,e,n,r){if(Bne(n,t),Fne(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Tne(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function qne(t){return Une(t.Fp),OA(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...w6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Qs=BigInt(0),Or=BigInt(1),fy=BigInt(2),Hne=BigInt(8),Vne={zip215:!0};function Gne(t){const e=qne(t);return OA(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Kne(t){const e=Gne(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=fy<<BigInt(a*8)-Or,u=n.create,d=v6(e.n,e.nBitLength),h=e.uvRatio||((I,A)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(A))}}catch{return{isValid:!1,value:Qs}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,A,j)=>{if(P1("phflag",j),A.length||j)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,A){of("coordinate "+I,A,Qs,l)}function w(I){if(!(I instanceof v))throw new Error("ExtendedPoint expected")}const y=FN((I,A)=>{const{ex:j,ey:P,ez:k}=I,U=I.is0();A==null&&(A=U?Hne:n.inv(k));const z=u(j*A),V=u(P*A),Q=u(k*A);if(U)return{x:Qs,y:Or};if(Q!==Or)throw new Error("invZ was invalid");return{x:z,y:V}}),b=FN(I=>{const{a:A,d:j}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:P,ey:k,ez:U,et:z}=I,V=u(P*P),Q=u(k*k),Y=u(U*U),Z=u(Y*Y),se=u(V*A),Ne=u(Y*u(se+Q)),ke=u(Z+u(j*u(V*Q)));if(Ne!==ke)throw new Error("bad point: equation left != right (1)");const $e=u(P*k),Ke=u(U*z);if($e!==Ke)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(A,j,P,k){this.ex=A,this.ey=j,this.ez=P,this.et=k,g("x",A),g("y",j),g("z",P),g("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof v)throw new Error("extended point not allowed");const{x:j,y:P}=A||{};return g("x",j),g("y",P),new v(j,P,Or,u(j*P))}static normalizeZ(A){const j=n.invertBatch(A.map(P=>P.ez));return A.map((P,k)=>P.toAffine(j[k])).map(v.fromAffine)}static msm(A,j){return Wne(v,d,A,j)}_setWindowSize(A){x.setWindowSize(this,A)}assertValidity(){b(this)}equals(A){w(A);const{ex:j,ey:P,ez:k}=this,{ex:U,ey:z,ez:V}=A,Q=u(j*V),Y=u(U*k),Z=u(P*V),se=u(z*k);return Q===Y&&Z===se}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:A}=e,{ex:j,ey:P,ez:k}=this,U=u(j*j),z=u(P*P),V=u(fy*u(k*k)),Q=u(A*U),Y=j+P,Z=u(u(Y*Y)-U-z),se=Q+z,Ne=se-V,ke=Q-z,$e=u(Z*Ne),Ke=u(se*ke),Yt=u(Z*ke),As=u(Ne*se);return new v($e,Ke,As,Yt)}add(A){w(A);const{a:j,d:P}=e,{ex:k,ey:U,ez:z,et:V}=this,{ex:Q,ey:Y,ez:Z,et:se}=A;if(j===BigInt(-1)){const Jt=u((U-k)*(Y+Q)),nn=u((U+k)*(Y-Q)),$n=u(nn-Jt);if($n===Qs)return this.double();const ta=u(z*fy*se),Wc=u(V*fy*Z),na=Wc+ta,_n=nn+Jt,Ir=Wc-ta,qc=u(na*$n),Cu=u(_n*Ir),ra=u(na*Ir),Cm=u($n*_n);return new v(qc,Cu,Cm,ra)}const Ne=u(k*Q),ke=u(U*Y),$e=u(V*P*se),Ke=u(z*Z),Yt=u((k+U)*(Q+Y)-Ne-ke),As=Ke-$e,st=Ke+$e,Le=u(ke-j*Ne),Rt=u(Yt*As),$t=u(st*Le),hr=u(Yt*Le),ns=u(As*st);return new v(Rt,$t,ns,hr)}subtract(A){return this.add(A.negate())}wNAF(A){return x.wNAFCached(this,A,v.normalizeZ)}multiply(A){const j=A;of("scalar",j,Or,r);const{p:P,f:k}=this.wNAF(j);return v.normalizeZ([P,k])[0]}multiplyUnsafe(A,j=v.ZERO){const P=A;return of("scalar",P,Qs,r),P===Qs?E:this.is0()||P===Or?this:x.wNAFCachedUnsafe(this,P,v.normalizeZ,j)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return x.unsafeLadder(this,r).is0()}toAffine(A){return y(this,A)}clearCofactor(){const{h:A}=e;return A===Or?this:this.multiplyUnsafe(A)}static fromHex(A,j=!1){const{d:P,a:k}=e,U=n.BYTES;A=go("pointHex",A,U),P1("zip215",j);const z=A.slice(),V=A[U-1];z[U-1]=V&-129;const Q=iw(z),Y=j?l:n.ORDER;of("pointHex.y",Q,Qs,Y);const Z=u(Q*Q),se=u(Z-Or),Ne=u(P*Z-k);let{isValid:ke,value:$e}=h(se,Ne);if(!ke)throw new Error("Point.fromHex: invalid y coordinate");const Ke=($e&Or)===Or,Yt=(V&128)!==0;if(!j&&$e===Qs&&Yt)throw new Error("Point.fromHex: x=0 and x_0=1");return Yt!==Ke&&($e=u(-$e)),v.fromAffine({x:$e,y:Q})}static fromPrivateKey(A){return C(A).point}toRawBytes(){const{x:A,y:j}=this.toAffine(),P=PC(j,n.BYTES);return P[P.length-1]|=A&Or?128:0,P}toHex(){return kA(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Or,u(e.Gx*e.Gy)),v.ZERO=new v(Qs,Or,Or,Qs);const{BASE:_,ZERO:E}=v,x=zne(v,a*8);function S(I){return wn(I,r)}function T(I){return S(iw(I))}function C(I){const A=n.BYTES;I=go("private key",I,A);const j=go("hashed private key",i(I),2*A),P=f(j.slice(0,A)),k=j.slice(A,2*A),U=T(P),z=_.multiply(U),V=z.toRawBytes();return{head:P,prefix:k,scalar:U,point:z,pointBytes:V}}function O(I){return C(I).pointBytes}function R(I=new Uint8Array,...A){const j=BN(...A);return T(i(p(j,go("context",I),!!s)))}function B(I,A,j={}){I=go("message",I),s&&(I=s(I));const{prefix:P,scalar:k,pointBytes:U}=C(A),z=R(j.context,P,I),V=_.multiply(z).toRawBytes(),Q=R(j.context,V,U,I),Y=S(z+Q*k);of("signature.s",Y,Qs,r);const Z=BN(V,PC(Y,n.BYTES));return go("result",Z,n.BYTES*2)}const W=Vne;function M(I,A,j,P=W){const{context:k,zip215:U}=P,z=n.BYTES;I=go("signature",I,2*z),A=go("message",A),j=go("publicKey",j,z),U!==void 0&&P1("zip215",U),s&&(A=s(A));const V=iw(I.slice(z,2*z));let Q,Y,Z;try{Q=v.fromHex(j,U),Y=v.fromHex(I.slice(0,z),U),Z=_.multiplyUnsafe(V)}catch{return!1}if(!U&&Q.isSmallOrder())return!1;const se=R(k,Y.toRawBytes(),Q.toRawBytes(),A);return Y.add(Q.multiplyUnsafe(se)).subtract(Z).clearCofactor().equals(v.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:B,verify:M,ExtendedPoint:v,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,A=v.BASE){return A._setWindowSize(I),A.multiply(BigInt(3)),A}}}}BigInt(0),BigInt(1);const RA=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),VN=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Yne=BigInt(1),GN=BigInt(2);BigInt(3);const Jne=BigInt(5),Qne=BigInt(8);function Zne(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=RA,o=t*t%i*t%i,a=Oi(o,GN,i)*o%i,c=Oi(a,Yne,i)*t%i,l=Oi(c,Jne,i)*c%i,u=Oi(l,e,i)*l%i,d=Oi(u,n,i)*u%i,h=Oi(d,r,i)*d%i,f=Oi(h,s,i)*h%i,p=Oi(f,s,i)*h%i,g=Oi(p,e,i)*l%i;return{pow_p_5_8:Oi(g,GN,i)*t%i,b2:o}}function Xne(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ere(t,e){const n=RA,r=wn(e*e*e,n),s=wn(r*r*e,n),i=Zne(t*s).pow_p_5_8;let o=wn(t*r*i,n);const a=wn(e*o*o,n),c=o,l=wn(o*VN,n),u=a===t,d=a===wn(-t,n),h=a===wn(-t*VN,n);return u&&(o=c),(d||h)&&(o=l),Dne(o,n)&&(o=wn(-o,n)),{isValid:u||d,value:o}}const tre=v6(RA,void 0,!0),nre={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:tre,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Qne,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Cne,randomBytes:h6,adjustScalarBytes:Xne,uvRatio:ere},_6=Kne(nre),rre="EdDSA",sre="JWT",r0=".",xv="base64url",C6="utf8",x6="utf8",ire=":",ore="did",are="key",KN="base58btc",cre="z",lre="K36",ure=32;function $A(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function S6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?$A(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function A6(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=S6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return $A(n)}function dre(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,_=new Uint8Array(v);y!==b;){for(var E=p[y],x=0,S=v-1;(E!==0||x<w)&&S!==-1;S--,x++)E+=256*_[S]>>>0,_[S]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=x,y++}for(var T=v-w;T!==v&&_[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(_[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var E=0,x=b-1;(_!==0||E<y)&&x!==-1;x--,E++)_+=a*v[x]>>>0,v[x]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var S=b-y;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(w+(b-S)),C=w;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var hre=dre,fre=hre;const I6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},pre=t=>new TextEncoder().encode(t),gre=t=>new TextDecoder().decode(t);let mre=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},yre=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return T6(this,e)}},wre=class{constructor(e){this.decoders=e}or(e){return T6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const T6=(t,e)=>new wre({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let vre=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new mre(e,n,r),this.decoder=new yre(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Sv=({name:t,prefix:e,encode:n,decode:r})=>new vre(t,e,n,r),um=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=fre(n,e);return Sv({prefix:t,name:e,encode:r,decode:i=>I6(s(i))})},bre=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ere=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Kn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Sv({prefix:e,name:t,encode(s){return Ere(s,r,n)},decode(s){return bre(s,r,n,t)}}),_re=Sv({prefix:"\0",name:"identity",encode:t=>gre(t),decode:t=>pre(t)});var Cre=Object.freeze({__proto__:null,identity:_re});const xre=Kn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Sre=Object.freeze({__proto__:null,base2:xre});const Are=Kn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ire=Object.freeze({__proto__:null,base8:Are});const Tre=um({prefix:"9",name:"base10",alphabet:"0123456789"});var Nre=Object.freeze({__proto__:null,base10:Tre});const Pre=Kn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kre=Kn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ore=Object.freeze({__proto__:null,base16:Pre,base16upper:kre});const Rre=Kn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$re=Kn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dre=Kn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jre=Kn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ure=Kn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Lre=Kn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Mre=Kn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Bre=Kn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Fre=Kn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var zre=Object.freeze({__proto__:null,base32:Rre,base32upper:$re,base32pad:Dre,base32padupper:jre,base32hex:Ure,base32hexupper:Lre,base32hexpad:Mre,base32hexpadupper:Bre,base32z:Fre});const Wre=um({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),qre=um({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Hre=Object.freeze({__proto__:null,base36:Wre,base36upper:qre});const Vre=um({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Gre=um({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Kre=Object.freeze({__proto__:null,base58btc:Vre,base58flickr:Gre});const Yre=Kn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Jre=Kn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Qre=Kn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Zre=Kn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Xre=Object.freeze({__proto__:null,base64:Yre,base64pad:Jre,base64url:Qre,base64urlpad:Zre});const N6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ese=N6.reduce((t,e,n)=>(t[n]=e,t),[]),tse=N6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function nse(t){return t.reduce((e,n)=>(e+=ese[n],e),"")}function rse(t){const e=[];for(const n of t){const r=tse[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const sse=Sv({prefix:"🚀",name:"base256emoji",encode:nse,decode:rse});var ise=Object.freeze({__proto__:null,base256emoji:sse}),ose=P6,YN=128,ase=-128,cse=Math.pow(2,31);function P6(t,e,n){e=e||[],n=n||0;for(var r=n;t>=cse;)e[n++]=t&255|YN,t/=128;for(;t&ase;)e[n++]=t&255|YN,t>>>=7;return e[n]=t|0,P6.bytes=n-r+1,e}var lse=OC,use=128,JN=127;function OC(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw OC.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&JN)<<s:(o&JN)*Math.pow(2,s),s+=7}while(o>=use);return OC.bytes=i-r,n}var dse=Math.pow(2,7),hse=Math.pow(2,14),fse=Math.pow(2,21),pse=Math.pow(2,28),gse=Math.pow(2,35),mse=Math.pow(2,42),yse=Math.pow(2,49),wse=Math.pow(2,56),vse=Math.pow(2,63),bse=function(t){return t<dse?1:t<hse?2:t<fse?3:t<pse?4:t<gse?5:t<mse?6:t<yse?7:t<wse?8:t<vse?9:10},Ese={encode:ose,decode:lse,encodingLength:bse},k6=Ese;const QN=(t,e,n=0)=>(k6.encode(t,e,n),e),ZN=t=>k6.encodingLength(t),RC=(t,e)=>{const n=e.byteLength,r=ZN(t),s=r+ZN(n),i=new Uint8Array(s+n);return QN(t,i,0),QN(n,i,r),i.set(e,s),new _se(t,n,e,i)};let _se=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const O6=({name:t,code:e,encode:n})=>new Cse(t,e,n);let Cse=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?RC(this.code,n):n.then(r=>RC(this.code,r))}else throw Error("Unknown type, must be binary type")}};const R6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),xse=O6({name:"sha2-256",code:18,encode:R6("SHA-256")}),Sse=O6({name:"sha2-512",code:19,encode:R6("SHA-512")});var Ase=Object.freeze({__proto__:null,sha256:xse,sha512:Sse});const $6=0,Ise="identity",D6=I6,Tse=t=>RC($6,D6(t)),Nse={code:$6,name:Ise,encode:D6,digest:Tse};var Pse=Object.freeze({__proto__:null,identity:Nse});new TextEncoder,new TextDecoder;const XN={...Cre,...Sre,...Ire,...Nre,...Ore,...zre,...Hre,...Kre,...Xre,...ise};({...Ase,...Pse});function j6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const eP=j6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),j1=j6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=S6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),U6={utf8:eP,"utf-8":eP,hex:XN.base16,latin1:j1,ascii:j1,binary:j1,...XN};function Av(t,e="utf8"){const n=U6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Ah(t,e="utf8"){const n=U6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$A(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function tP(t){return Xl(Av(Ah(t,xv),C6))}function s0(t){return Av(Ah(Yo(t),C6),xv)}function L6(t){const e=Ah(lre,KN),n=cre+Av(A6([e,t]),KN);return[ore,are,n].join(ire)}function kse(t){return Av(t,xv)}function Ose(t){return Ah(t,xv)}function Rse(t){return Ah([s0(t.header),s0(t.payload)].join(r0),x6)}function $se(t){return[s0(t.header),s0(t.payload),kse(t.signature)].join(r0)}function $C(t){const e=t.split(r0),n=tP(e[0]),r=tP(e[1]),s=Ose(e[2]),i=Ah(e.slice(0,2).join(r0),x6);return{header:n,payload:r,signature:s,data:i}}function nP(t=h6(ure)){const e=_6.getPublicKey(t);return{secretKey:A6([t,e]),publicKey:e}}async function Dse(t,e,n,r,s=oe.fromMiliseconds(Date.now())){const i={alg:rre,typ:sre},o=L6(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=Rse({header:i,payload:c}),u=_6.sign(l,r.secretKey.slice(0,32));return $se({header:i,payload:c,signature:u})}var rP=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},jse=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Use=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Lse=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),Mse=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Bse=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Fse=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,zse=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,sP=3,Wse=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Fse]],iP=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function qse(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Bse:typeof navigator<"u"?Vse(navigator.userAgent):Kse()}function Hse(t){return t!==""&&Wse.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function Vse(t){var e=Hse(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new Mse;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<sP&&(s=rP(rP([],s,!0),Yse(sP-s.length),!0)):s=[];var i=s.join("."),o=Gse(t),a=zse.exec(t);return a&&a[1]?new Lse(n,i,o,a[1]):new jse(n,i,o)}function Gse(t){for(var e=0,n=iP.length;e<n;e++){var r=iP[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function Kse(){var t=typeof process<"u"&&process.version;return t?new Use(process.version.slice(1)):null}function Yse(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.getLocalStorage=Pt.getLocalStorageOrThrow=Pt.getCrypto=Pt.getCryptoOrThrow=M6=Pt.getLocation=Pt.getLocationOrThrow=DA=Pt.getNavigator=Pt.getNavigatorOrThrow=eu=Pt.getDocument=Pt.getDocumentOrThrow=Pt.getFromWindowOrThrow=Pt.getFromWindow=void 0;function vu(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Pt.getFromWindow=vu;function Ih(t){const e=vu(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Pt.getFromWindowOrThrow=Ih;function Jse(){return Ih("document")}Pt.getDocumentOrThrow=Jse;function Qse(){return vu("document")}var eu=Pt.getDocument=Qse;function Zse(){return Ih("navigator")}Pt.getNavigatorOrThrow=Zse;function Xse(){return vu("navigator")}var DA=Pt.getNavigator=Xse;function eie(){return Ih("location")}Pt.getLocationOrThrow=eie;function tie(){return vu("location")}var M6=Pt.getLocation=tie;function nie(){return Ih("crypto")}Pt.getCryptoOrThrow=nie;function rie(){return vu("crypto")}Pt.getCrypto=rie;function sie(){return Ih("localStorage")}Pt.getLocalStorageOrThrow=sie;function iie(){return vu("localStorage")}Pt.getLocalStorage=iie;var jA={};Object.defineProperty(jA,"__esModule",{value:!0});var B6=jA.getWindowMetadata=void 0;const oP=Pt;function oie(){let t,e;try{t=oP.getDocumentOrThrow(),e=oP.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");y+=v+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}B6=jA.getWindowMetadata=oie;function pg(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function DC(t){return pg(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const F6="2.31.0";let af={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${F6}`};class tu extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof tu?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof tu&&n.cause.docsPath||n.docsPath,i=(a=af.getDocsUrl)==null?void 0:a.call(af,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...af.version?[`Version: ${af.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=F6}walk(e){return z6(this,e)}}function z6(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?z6(t.cause,e):e?null:t}class W6 extends tu{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Th(t,{dir:e,size:n=32}={}){return typeof t=="string"?aie(t,{dir:e,size:n}):cie(t,{dir:e,size:n})}function aie(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new W6({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function cie(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new W6({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class lie extends tu{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class uie extends tu{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Nh(t,{size:e}){if(DC(t)>e)throw new uie({givenSize:DC(t),maxSize:e})}function jC(t,e={}){const{signed:n}=e;e.size&&Nh(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function die(t,e={}){return Number(jC(t,e))}const hie=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function UC(t,e={}){return typeof t=="number"||typeof t=="bigint"?H6(t,e):typeof t=="string"?gie(t,e):typeof t=="boolean"?fie(t,e):q6(t,e)}function fie(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Nh(n,{size:e.size}),Th(n,{size:e.size})):n}function q6(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=hie[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Nh(r,{size:e.size}),Th(r,{dir:"right",size:e.size})):r}function H6(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new lie({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Th(a,{size:r}):a}const pie=new TextEncoder;function gie(t,e={}){const n=pie.encode(t);return q6(n,e)}const mie=new TextEncoder;function yie(t,e={}){return typeof t=="number"||typeof t=="bigint"?vie(t,e):typeof t=="boolean"?wie(t,e):pg(t)?V6(t,e):G6(t,e)}function wie(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Nh(n,{size:e.size}),Th(n,{size:e.size})):n}const mo={zero:48,nine:57,A:65,F:70,a:97,f:102};function aP(t){if(t>=mo.zero&&t<=mo.nine)return t-mo.zero;if(t>=mo.A&&t<=mo.F)return t-(mo.A-10);if(t>=mo.a&&t<=mo.f)return t-(mo.a-10)}function V6(t,e={}){let n=t;e.size&&(Nh(n,{size:e.size}),n=Th(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=aP(r.charCodeAt(a++)),l=aP(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new tu(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function vie(t,e){const n=H6(t,e);return V6(n)}function G6(t,e={}){const n=mie.encode(t);return typeof e.size=="number"?(Nh(n,{size:e.size}),Th(n,{dir:"right",size:e.size})):n}function K6(t,e){const n=e||"hex",r=PS(pg(t,{strict:!1})?yie(t):t);return n==="bytes"?r:UC(r)}class bie extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const U1=new bie(8192);function Eie(t,e){if(U1.has(`${t}.${e}`))return U1.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=K6(G6(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return U1.set(`${t}.${e}`,i),i}function _ie(t){const e=K6(`0x${t.substring(4)}`).substring(26);return Eie(`0x${e}`)}async function Cie({hash:t,signature:e}){const n=pg(t)?t:UC(t),{secp256k1:r}=await rn(async()=>{const{secp256k1:o}=await import("./secp256k1-DFJTEl6m.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=cP(f);return new r.Signature(jC(l),jC(u)).addRecoveryBit(p)}const o=pg(e)?e:UC(e);if(DC(o)!==65)throw new Error("invalid signature length");const a=die(`0x${o.slice(130)}`),c=cP(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function cP(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function xie({hash:t,signature:e}){return _ie(await Cie({hash:t,signature:e}))}function Sie(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let _=p-1;(b!==0||v<d)&&_!==-1;_--,v++)b+=256*g[_]>>>0,g[_]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let _=0;for(let E=f-1;(v!==0||_<h)&&E!==-1;E--,_++)v+=n*p[E]>>>0,p[E]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=_,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Aie="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ph=Sie(Aie);function Iie(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function Tie(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const Nie=new TextEncoder,Pie=50;function kie(t,e,n){Nie.encodeInto(t,e.subarray(n))}function Oie(t,e,n){t.length>Pie?kie(t,e,n):Tie(t,e,n)}const Rie=4096;function Y6(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=Rie&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const $ie=new TextDecoder,Die=200;function jie(t,e,n){const r=t.subarray(e,e+n);return $ie.decode(r)}function Uie(t,e,n){return n>Die?jie(t,e,n):Y6(t,e,n)}class py{constructor(e,n){this.type=e,this.data=n}}class ds extends Error{constructor(e){super(e);const n=Object.create(ds.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:ds.name})}}const cf=4294967295;function Lie(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function J6(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Q6(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function Mie(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const Bie=-1,Fie=4294967296-1,zie=17179869184-1;function Wie({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=zie)if(e===0&&t<=Fie){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),J6(r,4,t),n}}function qie(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function Hie(t){if(t instanceof Date){const e=qie(t);return Wie(e)}else return null}function Vie(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=Q6(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new ds(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function Gie(t){const e=Vie(t);return new Date(e.sec*1e3+e.nsec/1e6)}const Kie={type:Bie,encode:Hie,decode:Gie};class i0{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Kie)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new py(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new py(o,i)}}}return e instanceof py?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new py(n,e)}}i0.defaultCodec=new i0;function Yie(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function LC(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Yie(t)?new Uint8Array(t):Uint8Array.from(t)}const Jie=100,Qie=2048;let Zie=class Z6{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??i0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??Jie,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??Qie,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Z6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=Iie(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Oie(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=LC(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),Lie(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),J6(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Xie(t,e){return new Zie(e).encodeSharedRef(t)}function L1(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const eoe=16,toe=16;class noe{constructor(e=eoe,n=toe){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=Y6(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const MC="array",tp="map_key",X6="map_value",roe=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new ds("The type of key must be string or number but "+typeof t)};class soe{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=MC,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=tp,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===MC){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===tp||e.type===X6){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const lf=-1,UA=new DataView(new ArrayBuffer(0)),ioe=new Uint8Array(UA.buffer);try{UA.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const lP=new RangeError("Insufficient data"),ooe=new noe;let aoe=class ej{constructor(e){this.totalPos=0,this.pos=0,this.view=UA,this.bytes=ioe,this.headByte=lf,this.stack=new soe,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??i0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??cf,this.maxBinLength=(e==null?void 0:e.maxBinLength)??cf,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??cf,this.maxMapLength=(e==null?void 0:e.maxMapLength)??cf,this.maxExtLength=(e==null?void 0:e.maxExtLength)??cf,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:ooe,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??roe}clone(){return new ej({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=lf,this.stack.reset()}setBuffer(e){const n=LC(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===lf&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=LC(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${L1(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new ds(`Unrecognized type byte: ${L1(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===MC)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===tp){if(n==="__proto__")throw new ds("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=X6;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=tp;continue e}}return n}}readHeadByte(){return this.headByte===lf&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=lf}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new ds(`Unrecognized array type byte: ${L1(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new ds(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new ds(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new ds(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw lP;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=Uie(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===tp:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new ds(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw lP;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new ds(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=Mie(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Q6(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function coe(t,e){return new aoe(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function loe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tj(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function o0(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function LA(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function BC(t){if(!Array.isArray(t))throw new Error("array expected")}function a0(t,e){if(!tj(!0,e))throw new Error(`${t}: array of strings expected`)}function uoe(t,e){if(!tj(!1,e))throw new Error(`${t}: array of numbers expected`)}function doe(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function hoe(t){const e=typeof t=="string"?t.split(""):t,n=e.length;a0("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(BC(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(BC(s),s.map(i=>{o0("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function foe(t=""){return o0("join",t),{encode:e=>(a0("join.decode",e),e.join(t)),decode:e=>(o0("join.decode",e),e.split(t))}}function poe(t,e="="){return LA(t),o0("padding",e),{encode(n){for(a0("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){a0("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const nj=(t,e)=>e===0?t:nj(e,t%e),c0=(t,e)=>t+(e-nj(t,e)),M1=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function uP(t,e,n,r){if(BC(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(c0(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${c0(e,n)}`);let s=0,i=0;const o=M1[e],a=M1[n]-1,c=[];for(const l of t){if(LA(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=M1[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function goe(t,e=!1){if(LA(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(c0(8,t)>32||c0(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!loe(n))throw new Error("radix2.encode input should be Uint8Array");return uP(Array.from(n),8,t,!e)},decode:n=>(uoe("radix2.decode",n),Uint8Array.from(uP(n,t,8,e)))}}const moe=doe(goe(5),hoe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),poe(5),foe(""));function MA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function rj(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?MA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function np(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=rj(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return MA(n)}function yoe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,_=new Uint8Array(v);y!==b;){for(var E=p[y],x=0,S=v-1;(E!==0||x<w)&&S!==-1;S--,x++)E+=256*_[S]>>>0,_[S]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=x,y++}for(var T=v-w;T!==v&&_[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(_[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var E=0,x=b-1;(_!==0||E<y)&&x!==-1;x--,E++)_+=a*v[x]>>>0,v[x]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var S=b-y;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(w+(b-S)),C=w;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var woe=yoe,voe=woe;const boe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Eoe=t=>new TextEncoder().encode(t),_oe=t=>new TextDecoder().decode(t);class Coe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class xoe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return sj(this,e)}}class Soe{constructor(e){this.decoders=e}or(e){return sj(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const sj=(t,e)=>new Soe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Aoe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Coe(e,n,r),this.decoder=new xoe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Iv=({name:t,prefix:e,encode:n,decode:r})=>new Aoe(t,e,n,r),dm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=voe(n,e);return Iv({prefix:t,name:e,encode:r,decode:i=>boe(s(i))})},Ioe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Toe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Yn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Iv({prefix:e,name:t,encode(s){return Toe(s,r,n)},decode(s){return Ioe(s,r,n,t)}}),Noe=Iv({prefix:"\0",name:"identity",encode:t=>_oe(t),decode:t=>Eoe(t)}),Poe=Object.freeze(Object.defineProperty({__proto__:null,identity:Noe},Symbol.toStringTag,{value:"Module"})),koe=Yn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ooe=Object.freeze(Object.defineProperty({__proto__:null,base2:koe},Symbol.toStringTag,{value:"Module"})),Roe=Yn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),$oe=Object.freeze(Object.defineProperty({__proto__:null,base8:Roe},Symbol.toStringTag,{value:"Module"})),Doe=dm({prefix:"9",name:"base10",alphabet:"0123456789"}),joe=Object.freeze(Object.defineProperty({__proto__:null,base10:Doe},Symbol.toStringTag,{value:"Module"})),Uoe=Yn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Loe=Yn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Moe=Object.freeze(Object.defineProperty({__proto__:null,base16:Uoe,base16upper:Loe},Symbol.toStringTag,{value:"Module"})),Boe=Yn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Foe=Yn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zoe=Yn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Woe=Yn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qoe=Yn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Hoe=Yn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Voe=Yn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Goe=Yn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Koe=Yn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Yoe=Object.freeze(Object.defineProperty({__proto__:null,base32:Boe,base32hex:qoe,base32hexpad:Voe,base32hexpadupper:Goe,base32hexupper:Hoe,base32pad:zoe,base32padupper:Woe,base32upper:Foe,base32z:Koe},Symbol.toStringTag,{value:"Module"})),Joe=dm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Qoe=dm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Zoe=Object.freeze(Object.defineProperty({__proto__:null,base36:Joe,base36upper:Qoe},Symbol.toStringTag,{value:"Module"})),Xoe=dm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eae=dm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),tae=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Xoe,base58flickr:eae},Symbol.toStringTag,{value:"Module"})),nae=Yn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rae=Yn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),sae=Yn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),iae=Yn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),oae=Object.freeze(Object.defineProperty({__proto__:null,base64:nae,base64pad:rae,base64url:sae,base64urlpad:iae},Symbol.toStringTag,{value:"Module"})),ij=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),aae=ij.reduce((t,e,n)=>(t[n]=e,t),[]),cae=ij.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function lae(t){return t.reduce((e,n)=>(e+=aae[n],e),"")}function uae(t){const e=[];for(const n of t){const r=cae[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const dae=Iv({prefix:"🚀",name:"base256emoji",encode:lae,decode:uae}),hae=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:dae},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const dP={...Poe,...Ooe,...$oe,...joe,...Moe,...Yoe,...Zoe,...tae,...oae,...hae};function oj(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const hP=oj("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),B1=oj("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=rj(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),aj={utf8:hP,"utf-8":hP,hex:dP.base16,latin1:B1,ascii:B1,binary:B1,...dP};function Bs(t,e="utf8"){const n=aj[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?MA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Xr(t,e="utf8"){const n=aj[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const fae={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},pae="Input must be an string, Buffer or Uint8Array";function gae(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(pae);return e}function mae(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function gy(t){return(4294967296+t).toString(16).substring(1)}function yae(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=gy(e[s]).toUpperCase(),r+=" ",r+=gy(e[s+1]).toUpperCase();else if(n===64)r+=gy(e[s+1]).toUpperCase(),r+=gy(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function wae(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var cj={normalizeInput:gae,toHex:mae,debugPrint:yae,testSpeed:wae};const ow=cj;function my(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function fP(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function lj(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function ga(t,e,n,r,s,i){const o=$f[s],a=$f[s+1],c=$f[i],l=$f[i+1];my(Fe,t,e),fP(Fe,t,o,a);let u=Fe[r]^Fe[t],d=Fe[r+1]^Fe[t+1];Fe[r]=d,Fe[r+1]=u,my(Fe,n,r),u=Fe[e]^Fe[n],d=Fe[e+1]^Fe[n+1],Fe[e]=u>>>24^d<<8,Fe[e+1]=d>>>24^u<<8,my(Fe,t,e),fP(Fe,t,c,l),u=Fe[r]^Fe[t],d=Fe[r+1]^Fe[t+1],Fe[r]=u>>>16^d<<16,Fe[r+1]=d>>>16^u<<16,my(Fe,n,r),u=Fe[e]^Fe[n],d=Fe[e+1]^Fe[n+1],Fe[e]=d>>>31^u<<1,Fe[e+1]=u>>>31^d<<1}const uj=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),vae=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],er=new Uint8Array(vae.map(function(t){return t*2})),Fe=new Uint32Array(32),$f=new Uint32Array(32);function dj(t,e){let n=0;for(n=0;n<16;n++)Fe[n]=t.h[n],Fe[n+16]=uj[n];for(Fe[24]=Fe[24]^t.t,Fe[25]=Fe[25]^t.t/4294967296,e&&(Fe[28]=~Fe[28],Fe[29]=~Fe[29]),n=0;n<32;n++)$f[n]=lj(t.b,4*n);for(n=0;n<12;n++)ga(0,8,16,24,er[n*16+0],er[n*16+1]),ga(2,10,18,26,er[n*16+2],er[n*16+3]),ga(4,12,20,28,er[n*16+4],er[n*16+5]),ga(6,14,22,30,er[n*16+6],er[n*16+7]),ga(0,10,20,30,er[n*16+8],er[n*16+9]),ga(2,12,22,24,er[n*16+10],er[n*16+11]),ga(4,14,16,26,er[n*16+12],er[n*16+13]),ga(6,8,18,28,er[n*16+14],er[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^Fe[n]^Fe[n+16]}const ma=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function hj(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};ma.fill(0),ma[0]=t,e&&(ma[1]=e.length),ma[2]=1,ma[3]=1,n&&ma.set(n,32),r&&ma.set(r,48);for(let i=0;i<16;i++)s.h[i]=uj[i]^lj(ma,i*4);return e&&(BA(s,e),s.c=128),s}function BA(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,dj(t,!1),t.c=0),t.b[t.c++]=e[n]}function fj(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;dj(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function pj(t,e,n,r,s){n=n||64,t=ow.normalizeInput(t),r&&(r=ow.normalizeInput(r)),s&&(s=ow.normalizeInput(s));const i=hj(n,e,r,s);return BA(i,t),fj(i)}function bae(t,e,n,r,s){const i=pj(t,e,n,r,s);return ow.toHex(i)}var Eae={blake2b:pj,blake2bHex:bae,blake2bInit:hj,blake2bUpdate:BA,blake2bFinal:fj};const gj=cj;function _ae(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function ya(t,e,n,r,s,i){ct[t]=ct[t]+ct[e]+s,ct[r]=yy(ct[r]^ct[t],16),ct[n]=ct[n]+ct[r],ct[e]=yy(ct[e]^ct[n],12),ct[t]=ct[t]+ct[e]+i,ct[r]=yy(ct[r]^ct[t],8),ct[n]=ct[n]+ct[r],ct[e]=yy(ct[e]^ct[n],7)}function yy(t,e){return t>>>e^t<<32-e}const mj=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),ct=new Uint32Array(16),jn=new Uint32Array(16);function yj(t,e){let n=0;for(n=0;n<8;n++)ct[n]=t.h[n],ct[n+8]=mj[n];for(ct[12]^=t.t,ct[13]^=t.t/4294967296,e&&(ct[14]=~ct[14]),n=0;n<16;n++)jn[n]=_ae(t.b,4*n);for(n=0;n<10;n++)ya(0,4,8,12,jn[tr[n*16+0]],jn[tr[n*16+1]]),ya(1,5,9,13,jn[tr[n*16+2]],jn[tr[n*16+3]]),ya(2,6,10,14,jn[tr[n*16+4]],jn[tr[n*16+5]]),ya(3,7,11,15,jn[tr[n*16+6]],jn[tr[n*16+7]]),ya(0,5,10,15,jn[tr[n*16+8]],jn[tr[n*16+9]]),ya(1,6,11,12,jn[tr[n*16+10]],jn[tr[n*16+11]]),ya(2,7,8,13,jn[tr[n*16+12]],jn[tr[n*16+13]]),ya(3,4,9,14,jn[tr[n*16+14]],jn[tr[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=ct[n]^ct[n+8]}function wj(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(mj),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(FA(r,e),r.c=64),r}function FA(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,yj(t,!1),t.c=0),t.b[t.c++]=e[n]}function vj(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;yj(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function bj(t,e,n){n=n||32,t=gj.normalizeInput(t);const r=wj(n,e);return FA(r,t),vj(r)}function Cae(t,e,n){const r=bj(t,e,n);return gj.toHex(r)}var xae={blake2s:bj,blake2sHex:Cae,blake2sInit:wj,blake2sUpdate:FA,blake2sFinal:vj};const uf=Eae,df=xae;var Sae={blake2b:uf.blake2b,blake2bHex:uf.blake2bHex,blake2bInit:uf.blake2bInit,blake2bUpdate:uf.blake2bUpdate,blake2bFinal:uf.blake2bFinal,blake2s:df.blake2s,blake2sHex:df.blake2sHex,blake2sInit:df.blake2sInit,blake2sUpdate:df.blake2sUpdate,blake2sFinal:df.blake2sFinal},Aae={};const Iae=":";function Pd(t){const[e,n]=t.split(Iae);return{namespace:e,reference:n}}function Ej(t,e){return t.includes(":")?[t]:e.chains||[]}var Tae=Object.defineProperty,Nae=Object.defineProperties,Pae=Object.getOwnPropertyDescriptors,pP=Object.getOwnPropertySymbols,kae=Object.prototype.hasOwnProperty,Oae=Object.prototype.propertyIsEnumerable,gP=(t,e,n)=>e in t?Tae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mP=(t,e)=>{for(var n in e||(e={}))kae.call(e,n)&&gP(t,n,e[n]);if(pP)for(var n of pP(e))Oae.call(e,n)&&gP(t,n,e[n]);return t},Rae=(t,e)=>Nae(t,Pae(e));const $ae="ReactNative",ps={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Dae="js";function l0(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Fc(){return!eu()&&!!DA()&&navigator.product===$ae}function jae(){return Fc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Uae(){return Fc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function kh(){return!l0()&&!!DA()&&!!eu()}function hm(){return Fc()?ps.reactNative:l0()?ps.node:kh()?ps.browser:ps.unknown}function yP(){var t;try{return Fc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Lae(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function Mae(t){var e,n;const r=_j();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Rae(mP(mP({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function _j(){return B6()||{name:"",description:"",url:"",icons:[""]}}function Bae(){if(hm()===ps.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=qse();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Fae(){var t;const e=hm();return e===ps.browser?[e,((t=M6())==null?void 0:t.host)||"unknown"].join(":"):e}function Cj(t,e,n){const r=Bae(),s=Fae();return[[t,e].join("-"),[Dae,n].join("-"),r,s].join("/")}function zae({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=Cj(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=Lae(l[1]||"",d);return l[0]+"?"+h}function yl(t,e){return t.filter(n=>e.includes(n)).length===t.length}function FC(t){return Object.fromEntries(t.entries())}function zC(t){return new Map(Object.entries(t))}function sl(t=oe.FIVE_MINUTES,e){const n=oe.toMiliseconds(t||oe.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function rc(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function xj(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Wae(t){return xj("topic",t)}function qae(t){return xj("id",t)}function Sj(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function gn(t,e){return oe.fromMiliseconds(Date.now()+oe.toMiliseconds(t))}function Oa(t){return Date.now()>=oe.toMiliseconds(t)}function ft(t,e){return`${t}${e?`:${e}`:""}`}function eo(t=[],e=[]){return[...new Set([...t,...e])]}async function Hae({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=Vae(i,t,e),a=hm();if(a===ps.browser){if(!((r=eu())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Gae(o)}else a===ps.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function Vae(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Qae(r,!0)}`}else s=`${s}/wc?${r}`;return s}function Gae(t){let e="_self";Jae()?e="_top":(Yae()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Kae(t,e){let n="";try{if(kh()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function wP(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function vP(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function zA(){return typeof process<"u"&&Aae.IS_VITEST==="true"}function Yae(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Jae(){try{return window.self!==window.top}catch{return!1}}function Qae(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function Aj(t){return Buffer.from(t,"base64").toString("utf-8")}function Zae(t){return new Promise(e=>setTimeout(e,t))}const wy=BigInt(2**32-1),bP=BigInt(32);function Ij(t,e=!1){return e?{h:Number(t&wy),l:Number(t>>bP&wy)}:{h:Number(t>>bP&wy)|0,l:Number(t&wy)|0}}function Tj(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Ij(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const EP=(t,e,n)=>t>>>n,_P=(t,e,n)=>t<<32-n|e>>>n,Ra=(t,e,n)=>t>>>n|e<<32-n,$a=(t,e,n)=>t<<32-n|e>>>n,Df=(t,e,n)=>t<<64-n|e>>>n-32,jf=(t,e,n)=>t>>>n-32|e<<64-n,Xae=(t,e)=>e,ece=(t,e)=>t,tce=(t,e,n)=>t<<n|e>>>32-n,nce=(t,e,n)=>e<<n|t>>>32-n,rce=(t,e,n)=>e<<n-32|t>>>64-n,sce=(t,e,n)=>t<<n-32|e>>>64-n;function ii(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const WA=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),qA=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ice=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),oce=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,ace=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),cce=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,$u=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function HA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Jo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qs(t,...e){if(!HA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function VA(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Jo(t.outputLen),Jo(t.blockLen)}function Oc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function GA(t,e){qs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function gg(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Hs(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function F1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ri(t,e){return t<<32-e|t>>>e}const Nj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Pj(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Eo=Nj?t=>t:t=>Pj(t);function lce(t){for(let e=0;e<t.length;e++)t[e]=Pj(t[e]);return t}const Da=Nj?t=>t:lce,kj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",uce=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mg(t){if(qs(t),kj)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=uce[t[n]];return e}const yo={_0:48,_9:57,A:65,F:70,a:97,f:102};function CP(t){if(t>=yo._0&&t<=yo._9)return t-yo._0;if(t>=yo.A&&t<=yo.F)return t-(yo.A-10);if(t>=yo.a&&t<=yo.f)return t-(yo.a-10)}function KA(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(kj)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=CP(t.charCodeAt(i)),a=CP(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function dce(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function bi(t){return typeof t=="string"&&(t=dce(t)),qs(t),t}function wl(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];qs(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Tv=class{};function fm(t){const e=r=>t().update(bi(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function hce(t){const e=(r,s)=>t(s).update(bi(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Oh(t=32){if($u&&typeof $u.getRandomValues=="function")return $u.getRandomValues(new Uint8Array(t));if($u&&typeof $u.randomBytes=="function")return Uint8Array.from($u.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const fce=BigInt(0),hf=BigInt(1),pce=BigInt(2),gce=BigInt(7),mce=BigInt(256),yce=BigInt(113),Oj=[],Rj=[],$j=[];for(let t=0,e=hf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Oj.push(2*(5*r+n)),Rj.push((t+1)*(t+2)/2%64);let s=fce;for(let i=0;i<7;i++)e=(e<<hf^(e>>gce)*yce)%mce,e&pce&&(s^=hf<<(hf<<BigInt(i))-hf);$j.push(s)}const Dj=Tj($j,!0),wce=Dj[0],vce=Dj[1],xP=(t,e,n)=>n>32?rce(t,e,n):tce(t,e,n),SP=(t,e,n)=>n>32?sce(t,e,n):nce(t,e,n);function bce(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=xP(l,u,1)^n[a],h=SP(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Rj[o],c=xP(s,i,a),l=SP(s,i,a),u=Oj[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=wce[r],t[1]^=vce[r]}Hs(n)}let Ece=class jj extends Tv{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Jo(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=gg(this.state)}clone(){return this._cloneInto()}keccak(){Da(this.state32),bce(this.state32,this.rounds),Da(this.state32),this.posOut=0,this.pos=0}update(e){Oc(this),e=bi(e),qs(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Oc(this,!1),qs(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Jo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(GA(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Hs(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new jj(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const _ce=(t,e,n)=>fm(()=>new Ece(e,t,n)),Cce=_ce(1,136,256/8);function xce(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Sce(t,e,n){return t&e^~t&n}function Ace(t,e,n){return t&e^t&n^e&n}let Uj=class extends Tv{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=F1(this.buffer)}update(e){Oc(this),e=bi(e),qs(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=F1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Oc(this),GA(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Hs(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;xce(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=F1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const wa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),rr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ice=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),va=new Uint32Array(64);let Tce=class extends Uj{constructor(e=32){super(64,e,8,!1),this.A=wa[0]|0,this.B=wa[1]|0,this.C=wa[2]|0,this.D=wa[3]|0,this.E=wa[4]|0,this.F=wa[5]|0,this.G=wa[6]|0,this.H=wa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)va[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=va[d-15],f=va[d-2],p=Ri(h,7)^Ri(h,18)^h>>>3,g=Ri(f,17)^Ri(f,19)^f>>>10;va[d]=g+va[d-7]+p+va[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ri(a,6)^Ri(a,11)^Ri(a,25),f=u+h+Sce(a,c,l)+Ice[d]+va[d]|0,p=(Ri(r,2)^Ri(r,13)^Ri(r,22))+Ace(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Hs(va)}destroy(){this.set(0,0,0,0,0,0,0,0),Hs(this.buffer)}};const Lj=Tj(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Nce=Lj[0],Pce=Lj[1],ba=new Uint32Array(80),Ea=new Uint32Array(80);let YA=class extends Uj{constructor(e=64){super(128,e,16,!1),this.Ah=rr[0]|0,this.Al=rr[1]|0,this.Bh=rr[2]|0,this.Bl=rr[3]|0,this.Ch=rr[4]|0,this.Cl=rr[5]|0,this.Dh=rr[6]|0,this.Dl=rr[7]|0,this.Eh=rr[8]|0,this.El=rr[9]|0,this.Fh=rr[10]|0,this.Fl=rr[11]|0,this.Gh=rr[12]|0,this.Gl=rr[13]|0,this.Hh=rr[14]|0,this.Hl=rr[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)ba[v]=e.getUint32(n),Ea[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const _=ba[v-15]|0,E=Ea[v-15]|0,x=Ra(_,E,1)^Ra(_,E,8)^EP(_,E,7),S=$a(_,E,1)^$a(_,E,8)^_P(_,E,7),T=ba[v-2]|0,C=Ea[v-2]|0,O=Ra(T,C,19)^Df(T,C,61)^EP(T,C,6),R=$a(T,C,19)^jf(T,C,61)^_P(T,C,6),B=ice(S,R,Ea[v-7],Ea[v-16]),W=oce(B,x,O,ba[v-7],ba[v-16]);ba[v]=W|0,Ea[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const _=Ra(d,h,14)^Ra(d,h,18)^Df(d,h,41),E=$a(d,h,14)^$a(d,h,18)^jf(d,h,41),x=d&f^~d&g,S=h&p^~h&w,T=ace(b,E,S,Pce[v],Ea[v]),C=cce(T,y,_,x,Nce[v],ba[v]),O=T|0,R=Ra(r,s,28)^Df(r,s,34)^Df(r,s,39),B=$a(r,s,28)^jf(r,s,34)^jf(r,s,39),W=r&i^r&a^i&a,M=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=ii(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=WA(O,B,M);r=qA(I,C,R,W),s=I|0}({h:r,l:s}=ii(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ii(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ii(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ii(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ii(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=ii(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=ii(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=ii(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Hs(ba,Ea)}destroy(){Hs(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},kce=class extends YA{constructor(){super(48),this.Ah=nr[0]|0,this.Al=nr[1]|0,this.Bh=nr[2]|0,this.Bl=nr[3]|0,this.Ch=nr[4]|0,this.Cl=nr[5]|0,this.Dh=nr[6]|0,this.Dl=nr[7]|0,this.Eh=nr[8]|0,this.El=nr[9]|0,this.Fh=nr[10]|0,this.Fl=nr[11]|0,this.Gh=nr[12]|0,this.Gl=nr[13]|0,this.Hh=nr[14]|0,this.Hl=nr[15]|0}};const sr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let Oce=class extends YA{constructor(){super(32),this.Ah=sr[0]|0,this.Al=sr[1]|0,this.Bh=sr[2]|0,this.Bl=sr[3]|0,this.Ch=sr[4]|0,this.Cl=sr[5]|0,this.Dh=sr[6]|0,this.Dl=sr[7]|0,this.Eh=sr[8]|0,this.El=sr[9]|0,this.Fh=sr[10]|0,this.Fl=sr[11]|0,this.Gh=sr[12]|0,this.Gl=sr[13]|0,this.Hh=sr[14]|0,this.Hl=sr[15]|0}};const Nv=fm(()=>new Tce),Rce=fm(()=>new YA),$ce=fm(()=>new kce),Dce=fm(()=>new Oce),jce=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),pn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),fe=new Uint32Array(32);function _a(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=fe[2*t],l=fe[2*t+1],u=fe[2*e],d=fe[2*e+1],h=fe[2*n],f=fe[2*n+1],p=fe[2*r],g=fe[2*r+1],w=WA(c,u,o);l=qA(w,l,d,a),c=w|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Xae(g,p),Dl:ece(g)},{h:f,l:h}=ii(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Ra(d,u,24),Bl:$a(d,u,24)},fe[2*t]=c,fe[2*t+1]=l,fe[2*e]=u,fe[2*e+1]=d,fe[2*n]=h,fe[2*n+1]=f,fe[2*r]=p,fe[2*r+1]=g}function Ca(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=fe[2*t],l=fe[2*t+1],u=fe[2*e],d=fe[2*e+1],h=fe[2*n],f=fe[2*n+1],p=fe[2*r],g=fe[2*r+1],w=WA(c,u,o);l=qA(w,l,d,a),c=w|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Ra(g,p,16),Dl:$a(g,p,16)},{h:f,l:h}=ii(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Df(d,u,63),Bl:jf(d,u,63)},fe[2*t]=c,fe[2*t+1]=l,fe[2*e]=u,fe[2*e+1]=d,fe[2*n]=h,fe[2*n+1]=f,fe[2*r]=p,fe[2*r+1]=g}function Uce(t,e={},n,r,s){if(Jo(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class Lce extends Tv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Jo(e),Jo(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=gg(this.buffer)}update(e){Oc(this),e=bi(e),qs(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Da(s),this.compress(s,0,!1),Da(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));Da(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);Da(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Oc(this),GA(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Hs(this.buffer.subarray(n)),Da(r),this.compress(r,0,!0),Da(r);const s=gg(e);this.get().forEach((i,o)=>s[o]=Eo(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class Mce extends Lce{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=pn[0]|0,this.v0h=pn[1]|0,this.v1l=pn[2]|0,this.v1h=pn[3]|0,this.v2l=pn[4]|0,this.v2h=pn[5]|0,this.v3l=pn[6]|0,this.v3h=pn[7]|0,this.v4l=pn[8]|0,this.v4h=pn[9]|0,this.v5l=pn[10]|0,this.v5h=pn[11]|0,this.v6l=pn[12]|0,this.v6h=pn[13]|0,this.v7l=pn[14]|0,this.v7h=pn[15]|0,Uce(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=bi(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=bi(i);const a=gg(i);this.v4l^=Eo(a[0]),this.v4h^=Eo(a[1]),this.v5l^=Eo(a[2]),this.v5h^=Eo(a[3])}if(s!==void 0){s=bi(s);const a=gg(s);this.v6l^=Eo(a[0]),this.v6h^=Eo(a[1]),this.v7l^=Eo(a[2]),this.v7h^=Eo(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=w|0}compress(e,n,r){this.get().forEach((c,l)=>fe[l]=c),fe.set(pn,16);let{h:s,l:i}=Ij(BigInt(this.length));fe[24]=pn[8]^i,fe[25]=pn[9]^s,r&&(fe[28]=~fe[28],fe[29]=~fe[29]);let o=0;const a=jce;for(let c=0;c<12;c++)_a(0,4,8,12,e,n+2*a[o++]),Ca(0,4,8,12,e,n+2*a[o++]),_a(1,5,9,13,e,n+2*a[o++]),Ca(1,5,9,13,e,n+2*a[o++]),_a(2,6,10,14,e,n+2*a[o++]),Ca(2,6,10,14,e,n+2*a[o++]),_a(3,7,11,15,e,n+2*a[o++]),Ca(3,7,11,15,e,n+2*a[o++]),_a(0,5,10,15,e,n+2*a[o++]),Ca(0,5,10,15,e,n+2*a[o++]),_a(1,6,11,12,e,n+2*a[o++]),Ca(1,6,11,12,e,n+2*a[o++]),_a(2,7,8,13,e,n+2*a[o++]),Ca(2,7,8,13,e,n+2*a[o++]),_a(3,4,9,14,e,n+2*a[o++]),Ca(3,4,9,14,e,n+2*a[o++]);this.v0l^=fe[0]^fe[16],this.v0h^=fe[1]^fe[17],this.v1l^=fe[2]^fe[18],this.v1h^=fe[3]^fe[19],this.v2l^=fe[4]^fe[20],this.v2h^=fe[5]^fe[21],this.v3l^=fe[6]^fe[22],this.v3h^=fe[7]^fe[23],this.v4l^=fe[8]^fe[24],this.v4h^=fe[9]^fe[25],this.v5l^=fe[10]^fe[26],this.v5h^=fe[11]^fe[27],this.v6l^=fe[12]^fe[28],this.v6h^=fe[13]^fe[29],this.v7l^=fe[14]^fe[30],this.v7h^=fe[15]^fe[31],Hs(fe)}destroy(){this.destroyed=!0,Hs(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Bce=hce(t=>new Mce(t)),Fce="https://rpc.walletconnect.org/v1";function Mj(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Cce(n)).toString("hex")}async function zce(t,e,n,r,s,i){switch(n.t){case"eip191":return await Wce(t,e,n.s);case"eip1271":return await qce(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Wce(t,e,n){return(await xie({hash:Mj(e),signature:n})).toLowerCase()===t.toLowerCase()}async function qce(t,e,n,r,s,i){const o=Pd(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:Mj(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||Fce}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Hce(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Hce(){return Date.now()+Math.floor(Math.random()*1e3)}function Vce(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Ph.encode(i)}function Gce(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=Bce(r,{dkLen:32});return Ph.encode(s)}function AP(t){const e=new Uint8Array(Nv(Kce(t)));return Ph.encode(e)}function Kce(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function IP(t){const e=Buffer.from(t,"base64"),n=coe(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Xie(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=Dce(i);return moe.encode(o).replace(/=+$/,"")}function z1(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function Yce(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(z1(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(z1(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(z1(r.length)),s.push(r);const i=Buffer.concat(s),o=Nv(i);return Buffer.from(o).toString("hex").toUpperCase()}var Jce=Object.defineProperty,Qce=Object.defineProperties,Zce=Object.getOwnPropertyDescriptors,TP=Object.getOwnPropertySymbols,Xce=Object.prototype.hasOwnProperty,ele=Object.prototype.propertyIsEnumerable,NP=(t,e,n)=>e in t?Jce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tle=(t,e)=>{for(var n in e||(e={}))Xce.call(e,n)&&NP(t,n,e[n]);if(TP)for(var n of TP(e))ele.call(e,n)&&NP(t,n,e[n]);return t},nle=(t,e)=>Qce(t,Zce(e));const rle="did:pkh:",JA=t=>t==null?void 0:t.split(":"),sle=t=>{const e=t&&JA(t);if(e)return t.includes(rle)?e[3]:e[1]},WC=t=>{const e=t&&JA(t);if(e)return e[2]+":"+e[3]},u0=t=>{const e=t&&JA(t);if(e)return e.pop()};async function PP(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=Bj(s,s.iss),o=u0(s.iss);return await zce(o,i,r,WC(s.iss),n)}const Bj=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=u0(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${sle(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=aw(t.resources);if(p){const g=yg(p);s=fle(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function ile(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function ole(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function nu(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function ale(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:cle(e,n,r)}}}function cle(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function Fj(t){return nu(t),`urn:recap:${ile(t).replace(/=/g,"")}`}function yg(t){const e=ole(t.replace("urn:recap:",""));return nu(e),e}function lle(t,e,n){const r=ale(t,e,n);return Fj(r)}function ule(t){return t&&t.includes("urn:recap:")}function dle(t,e){const n=yg(t),r=yg(e),s=hle(n,r);return Fj(s)}function hle(t,e){nu(t),nu(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=nle(tle({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function fle(t="",e){nu(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function kP(t){var e;const n=yg(t);nu(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function OP(t){const e=yg(t);nu(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function aw(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return ule(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function zj(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qC(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function W1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qr(t,...e){if(!zj(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function RP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ple(t,e){qr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function bc(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ah(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function gle(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const mle=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function yle(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function HC(t){if(typeof t=="string")t=yle(t);else if(zj(t))t=VC(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function wle(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function vle(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const ble=(t,e)=>{function n(r,...s){if(qr(r),!mle)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?qr(l):qr(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&qr(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");qr(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,qr(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(qr(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function $P(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!_le(e))throw new Error("invalid output, must be aligned");return e}function DP(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Ele(t,e,n){qC(n);const r=new Uint8Array(16),s=gle(r);return DP(s,0,BigInt(e),n),DP(s,8,BigInt(t),n),r}function _le(t){return t.byteOffset%4===0}function VC(t){return Uint8Array.from(t)}const Wj=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Cle=Wj("expand 16-byte k"),xle=Wj("expand 32-byte k"),Sle=bc(Cle),Ale=bc(xle);function ot(t,e){return t<<e|t>>>32-e}function GC(t){return t.byteOffset%4===0}const vy=64,Ile=16,qj=2**32-1,jP=new Uint32Array;function Tle(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(vy),u=bc(l),d=GC(s)&&GC(i),h=d?bc(s):jP,f=d?bc(i):jP;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=qj)throw new Error("arx: counter overflow");const g=Math.min(vy,c-p);if(d&&g===vy){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<Ile;y++)b=w+y,f[b]=h[b]^u[y];p+=vy;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function Nle(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=wle({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return W1(s),W1(o),qC(i),qC(n),(a,c,l,u,d=0)=>{qr(a),qr(c),qr(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),qr(u),W1(d),d<0||d>=qj)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=VC(a)),w=Ale;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=Sle,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);GC(c)||f.push(c=VC(c));const y=bc(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,bc(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,f.push(c)}const v=bc(c);return Tle(t,w,y,v,l,u,d,o),ah(...f),u}}const Un=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Ple{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=HC(e),qr(e,32);const n=Un(e,0),r=Un(e,2),s=Un(e,4),i=Un(e,6),o=Un(e,8),a=Un(e,10),c=Un(e,12),l=Un(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Un(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Un(e,n+0),b=Un(e,n+2),v=Un(e,n+4),_=Un(e,n+6),E=Un(e,n+8),x=Un(e,n+10),S=Un(e,n+12),T=Un(e,n+14);let C=i[0]+(y&8191),O=i[1]+((y>>>13|b<<3)&8191),R=i[2]+((b>>>10|v<<6)&8191),B=i[3]+((v>>>7|_<<9)&8191),W=i[4]+((_>>>4|E<<12)&8191),M=i[5]+(E>>>1&8191),I=i[6]+((E>>>14|x<<2)&8191),A=i[7]+((x>>>11|S<<5)&8191),j=i[8]+((S>>>8|T<<8)&8191),P=i[9]+(T>>>5|s),k=0,U=k+C*a+O*(5*w)+R*(5*g)+B*(5*p)+W*(5*f);k=U>>>13,U&=8191,U+=M*(5*h)+I*(5*d)+A*(5*u)+j*(5*l)+P*(5*c),k+=U>>>13,U&=8191;let z=k+C*c+O*a+R*(5*w)+B*(5*g)+W*(5*p);k=z>>>13,z&=8191,z+=M*(5*f)+I*(5*h)+A*(5*d)+j*(5*u)+P*(5*l),k+=z>>>13,z&=8191;let V=k+C*l+O*c+R*a+B*(5*w)+W*(5*g);k=V>>>13,V&=8191,V+=M*(5*p)+I*(5*f)+A*(5*h)+j*(5*d)+P*(5*u),k+=V>>>13,V&=8191;let Q=k+C*u+O*l+R*c+B*a+W*(5*w);k=Q>>>13,Q&=8191,Q+=M*(5*g)+I*(5*p)+A*(5*f)+j*(5*h)+P*(5*d),k+=Q>>>13,Q&=8191;let Y=k+C*d+O*u+R*l+B*c+W*a;k=Y>>>13,Y&=8191,Y+=M*(5*w)+I*(5*g)+A*(5*p)+j*(5*f)+P*(5*h),k+=Y>>>13,Y&=8191;let Z=k+C*h+O*d+R*u+B*l+W*c;k=Z>>>13,Z&=8191,Z+=M*a+I*(5*w)+A*(5*g)+j*(5*p)+P*(5*f),k+=Z>>>13,Z&=8191;let se=k+C*f+O*h+R*d+B*u+W*l;k=se>>>13,se&=8191,se+=M*c+I*a+A*(5*w)+j*(5*g)+P*(5*p),k+=se>>>13,se&=8191;let Ne=k+C*p+O*f+R*h+B*d+W*u;k=Ne>>>13,Ne&=8191,Ne+=M*l+I*c+A*a+j*(5*w)+P*(5*g),k+=Ne>>>13,Ne&=8191;let ke=k+C*g+O*p+R*f+B*h+W*d;k=ke>>>13,ke&=8191,ke+=M*u+I*l+A*c+j*a+P*(5*w),k+=ke>>>13,ke&=8191;let $e=k+C*w+O*g+R*p+B*f+W*h;k=$e>>>13,$e&=8191,$e+=M*d+I*u+A*l+j*c+P*a,k+=$e>>>13,$e&=8191,k=(k<<2)+k|0,k=k+U|0,U=k&8191,k=k>>>13,z+=k,i[0]=U,i[1]=z,i[2]=V,i[3]=Q,i[4]=Y,i[5]=Z,i[6]=se,i[7]=Ne,i[8]=ke,i[9]=$e}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;ah(r)}update(e){RP(this),e=HC(e),qr(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){ah(this.h,this.r,this.buffer,this.pad)}digestInto(e){RP(this),ple(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function kle(t){const e=(r,s)=>t(s).update(HC(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Ole=kle(t=>new Ple(t));function Rle(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,v=n[0],_=n[1],E=n[2],x=o,S=a,T=c,C=l,O=u,R=d,B=h,W=f,M=p,I=g,A=w,j=y,P=b,k=v,U=_,z=E;for(let Q=0;Q<i;Q+=2)x=x+O|0,P=ot(P^x,16),M=M+P|0,O=ot(O^M,12),x=x+O|0,P=ot(P^x,8),M=M+P|0,O=ot(O^M,7),S=S+R|0,k=ot(k^S,16),I=I+k|0,R=ot(R^I,12),S=S+R|0,k=ot(k^S,8),I=I+k|0,R=ot(R^I,7),T=T+B|0,U=ot(U^T,16),A=A+U|0,B=ot(B^A,12),T=T+B|0,U=ot(U^T,8),A=A+U|0,B=ot(B^A,7),C=C+W|0,z=ot(z^C,16),j=j+z|0,W=ot(W^j,12),C=C+W|0,z=ot(z^C,8),j=j+z|0,W=ot(W^j,7),x=x+R|0,z=ot(z^x,16),A=A+z|0,R=ot(R^A,12),x=x+R|0,z=ot(z^x,8),A=A+z|0,R=ot(R^A,7),S=S+B|0,P=ot(P^S,16),j=j+P|0,B=ot(B^j,12),S=S+B|0,P=ot(P^S,8),j=j+P|0,B=ot(B^j,7),T=T+W|0,k=ot(k^T,16),M=M+k|0,W=ot(W^M,12),T=T+W|0,k=ot(k^T,8),M=M+k|0,W=ot(W^M,7),C=C+O|0,U=ot(U^C,16),I=I+U|0,O=ot(O^I,12),C=C+O|0,U=ot(U^C,8),I=I+U|0,O=ot(O^I,7);let V=0;r[V++]=o+x|0,r[V++]=a+S|0,r[V++]=c+T|0,r[V++]=l+C|0,r[V++]=u+O|0,r[V++]=d+R|0,r[V++]=h+B|0,r[V++]=f+W|0,r[V++]=p+M|0,r[V++]=g+I|0,r[V++]=w+A|0,r[V++]=y+j|0,r[V++]=b+P|0,r[V++]=v+k|0,r[V++]=_+U|0,r[V++]=E+z|0}const $le=Nle(Rle,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Dle=new Uint8Array(16),UP=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Dle.subarray(n))},jle=new Uint8Array(32);function LP(t,e,n,r,s){const i=t(e,n,jle),o=Ole.create(i);s&&UP(o,s),UP(o,r);const a=Ele(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return ah(i,a),c}const Ule=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=$P(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=LP(t,e,n,a,r);return i.set(c,o),ah(c),i},decrypt(s,i){i=$P(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=LP(t,e,n,o,r);if(!vle(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),ah(c),i}}),Hj=ble({blockSize:64,nonceLength:12,tagLength:16},Ule($le));let Vj=class extends Tv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,VA(e);const r=bi(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Hs(i)}update(e){return Oc(this),this.iHash.update(e),this}digestInto(e){Oc(this),qs(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Pv=(t,e,n)=>new Vj(t,e).update(n).digest();Pv.create=(t,e)=>new Vj(t,e);function Lle(t,e,n){return VA(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Pv(t,bi(n),bi(e))}const q1=Uint8Array.from([0]),MP=Uint8Array.of();function Mle(t,e,n,r=32){VA(t),Jo(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=MP);const o=new Uint8Array(i*s),a=Pv.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)q1[0]=u+1,c.update(u===0?MP:l).update(n).update(q1).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Hs(l,q1),o.slice(0,r)}const Ble=(t,e,n,r,s)=>Mle(t,Lle(t,e,n),r,s),kv=Nv,QA=BigInt(0),KC=BigInt(1);function d0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function by(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Gj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?QA:BigInt("0x"+t)}function Ov(t){return Gj(mg(t))}function h0(t){return qs(t),Gj(mg(Uint8Array.from(t).reverse()))}function ZA(t,e){return KA(t.toString(16).padStart(e*2,"0"))}function XA(t,e){return ZA(t,e).reverse()}function Wr(t,e,n){let r;if(typeof e=="string")try{r=KA(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(HA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const H1=t=>typeof t=="bigint"&&QA<=t;function Fle(t,e,n){return H1(t)&&H1(e)&&H1(n)&&e<=t&&t<n}function YC(t,e,n,r){if(!Fle(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function zle(t){let e;for(e=0;t>QA;t>>=KC,e+=1);return e}const Rv=t=>(KC<<BigInt(t))-KC;function Wle(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return wl(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function $v(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function BP(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Kr=BigInt(0),Er=BigInt(1),vl=BigInt(2),qle=BigInt(3),Kj=BigInt(4),Yj=BigInt(5),Jj=BigInt(8);function js(t,e){const n=t%e;return n>=Kr?n:e+n}function ni(t,e,n){let r=t;for(;e-- >Kr;)r*=r,r%=n;return r}function FP(t,e){if(t===Kr)throw new Error("invert: expected non-zero number");if(e<=Kr)throw new Error("invert: expected positive modulus, got "+e);let n=js(t,e),r=e,s=Kr,i=Er;for(;n!==Kr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Er)throw new Error("invert: does not exist");return js(s,e)}function Qj(t,e){const n=(t.ORDER+Er)/Kj,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Hle(t,e){const n=(t.ORDER-Yj)/Jj,r=t.mul(e,vl),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,vl),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Vle(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Er,n=0;for(;e%vl===Kr;)e/=vl,n++;let r=vl;const s=Rh(t);for(;zP(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Qj;let i=s.pow(r,e);const o=(e+Er)/vl;return function(a,c){if(a.is0(c))return c;if(zP(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=Er<<BigInt(l-f-1),w=a.pow(u,g);l=f,u=a.sqr(w),d=a.mul(d,u),h=a.mul(h,w)}return h}}function Gle(t){return t%Kj===qle?Qj:t%Jj===Yj?Hle:Vle(t)}const Kle=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Yle(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Kle.reduce((r,s)=>(r[s]="function",r),e);return $v(t,n),t}function Jle(t,e,n){if(n<Kr)throw new Error("invalid exponent, negatives unsupported");if(n===Kr)return t.ONE;if(n===Er)return e;let r=t.ONE,s=e;for(;n>Kr;)n&Er&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Er;return r}function Zj(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function zP(t,e){const n=(t.ORDER-Er)/vl,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Qle(t,e){e!==void 0&&Jo(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Rh(t,e,n=!1,r={}){if(t<=Kr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=Qle(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:Rv(o),ZERO:Kr,ONE:Er,create:u=>js(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Kr<=u&&u<t},is0:u=>u===Kr,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Er)===Er,neg:u=>js(-u,t),eql:(u,d)=>u===d,sqr:u=>js(u*u,t),add:(u,d)=>js(u+d,t),sub:(u,d)=>js(u-d,t),mul:(u,d)=>js(u*d,t),pow:(u,d)=>Jle(l,u,d),div:(u,d)=>js(u*FP(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>FP(u,t),sqrt:i||(u=>(c||(c=Gle(t)),c(l,u))),toBytes:u=>n?XA(u,a):ZA(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?h0(u):Ov(u)},invertBatch:u=>Zj(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function Xj(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function e4(t){const e=Xj(t);return e+Math.ceil(e/2)}function Zle(t,e,n=!1){const r=t.length,s=Xj(e),i=e4(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?h0(t):Ov(t),a=js(o,e-Er)+Er;return n?XA(a,s):ZA(a,s)}const ch=BigInt(0),bl=BigInt(1);function rp(t,e){const n=e.negate();return t?n:e}function Xle(t,e,n){const r=i=>i.pz,s=Zj(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function t4(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function V1(t,e){t4(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Rv(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function WP(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=bl);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function eue(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function tue(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const G1=new WeakMap,n4=new WeakMap;function K1(t){return n4.get(t)||1}function qP(t){if(t!==ch)throw new Error("invalid wNAF")}function nue(t,e){return{constTimeNegate:rp,hasPrecomputes(n){return K1(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>ch;)r&bl&&(s=s.add(i)),i=i.double(),r>>=bl;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=V1(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=V1(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=WP(s,c,a);s=l,d?o=o.add(rp(f,r[p])):i=i.add(rp(h,r[u]))}return qP(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=V1(n,e);for(let a=0;a<o.windows&&s!==ch;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=WP(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return qP(s),i},getPrecomputes(n,r,s){let i=G1.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),G1.set(r,i))),i},wNAFCached(n,r,s){const i=K1(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=K1(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){t4(r,e),n4.set(n,r),G1.delete(n)}}}function rue(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>ch||r>ch;)n&bl&&(i=i.add(s)),r&bl&&(o=o.add(s)),s=s.double(),n>>=bl,r>>=bl;return{p1:i,p2:o}}function sue(t,e,n,r){eue(n,t),tue(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=zle(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Rv(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function HP(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Yle(e),e}else return Rh(t)}function iue(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>ch))throw new Error(`CURVE.${o} must be positive bigint`)}const r=HP(e.p,n.Fp),s=HP(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const ff=BigInt(0),Du=BigInt(1),Ey=BigInt(2);function oue(t){return $v(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function aue(t){const e=oue(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Oh,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Ey**BigInt(254):Ey**BigInt(447),p=a?BigInt(8)*Ey**BigInt(251)-Du:BigInt(4)*Ey**BigInt(445)-Du,g=f+p+Du,w=C=>js(C,n),y=b(d);function b(C){return XA(w(C),u)}function v(C){const O=Wr("u coordinate",C,u);return a&&(O[31]&=127),w(h0(O))}function _(C){return h0(s(Wr("scalar",C,u)))}function E(C,O){const R=T(v(O),_(C));if(R===ff)throw new Error("invalid private or public key received");return b(R)}function x(C){return E(C,y)}function S(C,O,R){const B=w(C*(O-R));return O=w(O-B),R=w(R+B),{x_2:O,x_3:R}}function T(C,O){YC("u",C,ff,n),YC("scalar",O,f,g);const R=O,B=C;let W=Du,M=ff,I=C,A=Du,j=ff;for(let k=BigInt(l-1);k>=ff;k--){const U=R>>k&Du;j^=U,{x_2:W,x_3:I}=S(j,W,I),{x_2:M,x_3:A}=S(j,M,A),j=U;const z=W+M,V=w(z*z),Q=W-M,Y=w(Q*Q),Z=V-Y,se=I+A,Ne=I-A,ke=w(Ne*z),$e=w(se*Q),Ke=ke+$e,Yt=ke-$e;I=w(Ke*Ke),A=w(B*w(Yt*Yt)),W=w(V*Y),M=w(Z*(V+w(h*Z)))}({x_2:W,x_3:I}=S(j,W,I)),{x_2:M,x_3:A}=S(j,M,A);const P=i(M);return w(W*P)}return{scalarMult:E,scalarMultBase:x,getSharedSecret:(C,O)=>E(C,O),getPublicKey:C=>x(C),utils:{randomPrivateKey:()=>c(u)},GuBytes:y.slice()}}BigInt(0);const cue=BigInt(1),VP=BigInt(2),lue=BigInt(3),uue=BigInt(5);BigInt(8);const r4={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function due(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=r4.p,o=t*t%i*t%i,a=ni(o,VP,i)*o%i,c=ni(a,cue,i)*t%i,l=ni(c,uue,i)*c%i,u=ni(l,e,i)*l%i,d=ni(u,n,i)*u%i,h=ni(d,r,i)*d%i,f=ni(h,s,i)*h%i,p=ni(f,s,i)*h%i,g=ni(p,e,i)*l%i;return{pow_p_5_8:ni(g,VP,i)*t%i,b2:o}}function hue(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const JC=(()=>{const t=r4.p;return aue({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=due(e);return js(ni(n,lue,t)*r,t)},adjustScalarBytes:hue})})();function GP(t){t.lowS!==void 0&&d0("lowS",t.lowS),t.prehash!==void 0&&d0("prehash",t.prehash)}class fue extends Error{constructor(e=""){super(e)}}const To={Err:fue,_tlv:{encode:(t,e)=>{const{Err:n}=To;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=by(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?by(s.length/2|128):"";return by(t)+i+s+e},decode(t,e){const{Err:n}=To;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=To;if(t<sp)throw new e("integer: negative integers are not allowed");let n=by(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=To;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ov(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=To,s=Wr("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=To,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},sp=BigInt(0),ip=BigInt(1),pue=BigInt(2),_y=BigInt(3),gue=BigInt(4);function mue(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function s4(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Wr("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function yue(t,e={}){const{Fp:n,Fn:r}=iue("weierstrass",t,e),{h:s,n:i}=t;$v(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,C,O){const{x:R,y:B}=C.toAffine(),W=n.toBytes(R);if(d0("isCompressed",O),O){a();const M=!n.isOdd(B);return wl(i4(M),W)}else return wl(Uint8Array.of(4),W,n.toBytes(B))}function l(T){qs(T);const C=n.BYTES,O=C+1,R=2*C+1,B=T.length,W=T[0],M=T.subarray(1);if(B===O&&(W===2||W===3)){const I=n.fromBytes(M);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const A=h(I);let j;try{j=n.sqrt(A)}catch(k){const U=k instanceof Error?": "+k.message:"";throw new Error("bad point: is not on curve, sqrt error"+U)}a();const P=n.isOdd(j);return(W&1)===1!==P&&(j=n.neg(j)),{x:I,y:j}}else if(B===R&&W===4){const I=n.fromBytes(M.subarray(C*0,C*1)),A=n.fromBytes(M.subarray(C*1,C*2));if(!f(I,A))throw new Error("bad point: is not on curve");return{x:I,y:A}}else throw new Error(`bad point: got length ${B}, expected compressed=${O} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=mue(n,t.a,t.b);function f(T,C){const O=n.sqr(C),R=h(T);return n.eql(O,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,_y),gue),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(T,C,O=!1){if(!n.isValid(C)||O&&n.is0(C))throw new Error(`bad point coordinate ${T}`);return C}function y(T){if(!(T instanceof E))throw new Error("ProjectivePoint expected")}const b=BP((T,C)=>{const{px:O,py:R,pz:B}=T;if(n.eql(B,n.ONE))return{x:O,y:R};const W=T.is0();C==null&&(C=W?n.ONE:n.inv(B));const M=n.mul(O,C),I=n.mul(R,C),A=n.mul(B,C);if(W)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:M,y:I}}),v=BP(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:C,y:O}=T.toAffine();if(!n.isValid(C)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(C,O))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(T,C,O,R,B){return O=new E(n.mul(O.px,T),O.py,O.pz),C=rp(R,C),O=rp(B,O),C.add(O)}class E{constructor(C,O,R){this.px=w("x",C),this.py=w("y",O,!0),this.pz=w("z",R),Object.freeze(this)}static fromAffine(C){const{x:O,y:R}=C||{};if(!C||!n.isValid(O)||!n.isValid(R))throw new Error("invalid affine point");if(C instanceof E)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(R)?E.ZERO:new E(O,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return Xle(E,"pz",C)}static fromBytes(C){return qs(C),E.fromHex(C)}static fromHex(C){const O=E.fromAffine(d(Wr("pointHex",C)));return O.assertValidity(),O}static fromPrivateKey(C){const O=s4(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return E.BASE.multiply(O(C))}static msm(C,O){return sue(E,r,C,O)}precompute(C=8,O=!0){return S.setWindowSize(this,C),O||this.multiply(_y),this}_setWindowSize(C){this.precompute(C)}assertValidity(){v(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){y(C);const{px:O,py:R,pz:B}=this,{px:W,py:M,pz:I}=C,A=n.eql(n.mul(O,I),n.mul(W,B)),j=n.eql(n.mul(R,I),n.mul(M,B));return A&&j}negate(){return new E(this.px,n.neg(this.py),this.pz)}double(){const{a:C,b:O}=t,R=n.mul(O,_y),{px:B,py:W,pz:M}=this;let I=n.ZERO,A=n.ZERO,j=n.ZERO,P=n.mul(B,B),k=n.mul(W,W),U=n.mul(M,M),z=n.mul(B,W);return z=n.add(z,z),j=n.mul(B,M),j=n.add(j,j),I=n.mul(C,j),A=n.mul(R,U),A=n.add(I,A),I=n.sub(k,A),A=n.add(k,A),A=n.mul(I,A),I=n.mul(z,I),j=n.mul(R,j),U=n.mul(C,U),z=n.sub(P,U),z=n.mul(C,z),z=n.add(z,j),j=n.add(P,P),P=n.add(j,P),P=n.add(P,U),P=n.mul(P,z),A=n.add(A,P),U=n.mul(W,M),U=n.add(U,U),P=n.mul(U,z),I=n.sub(I,P),j=n.mul(U,k),j=n.add(j,j),j=n.add(j,j),new E(I,A,j)}add(C){y(C);const{px:O,py:R,pz:B}=this,{px:W,py:M,pz:I}=C;let A=n.ZERO,j=n.ZERO,P=n.ZERO;const k=t.a,U=n.mul(t.b,_y);let z=n.mul(O,W),V=n.mul(R,M),Q=n.mul(B,I),Y=n.add(O,R),Z=n.add(W,M);Y=n.mul(Y,Z),Z=n.add(z,V),Y=n.sub(Y,Z),Z=n.add(O,B);let se=n.add(W,I);return Z=n.mul(Z,se),se=n.add(z,Q),Z=n.sub(Z,se),se=n.add(R,B),A=n.add(M,I),se=n.mul(se,A),A=n.add(V,Q),se=n.sub(se,A),P=n.mul(k,Z),A=n.mul(U,Q),P=n.add(A,P),A=n.sub(V,P),P=n.add(V,P),j=n.mul(A,P),V=n.add(z,z),V=n.add(V,z),Q=n.mul(k,Q),Z=n.mul(U,Z),V=n.add(V,Q),Q=n.sub(z,Q),Q=n.mul(k,Q),Z=n.add(Z,Q),z=n.mul(V,Z),j=n.add(j,z),z=n.mul(se,Z),A=n.mul(Y,A),A=n.sub(A,z),z=n.mul(Y,V),P=n.mul(se,P),P=n.add(P,z),new E(A,j,P)}subtract(C){return this.add(C.negate())}is0(){return this.equals(E.ZERO)}multiply(C){const{endo:O}=e;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let R,B;const W=M=>S.wNAFCached(this,M,E.normalizeZ);if(O){const{k1neg:M,k1:I,k2neg:A,k2:j}=O.splitScalar(C),{p:P,f:k}=W(I),{p:U,f:z}=W(j);B=k.add(z),R=_(O.beta,P,U,M,A)}else{const{p:M,f:I}=W(C);R=M,B=I}return E.normalizeZ([R,B])[0]}multiplyUnsafe(C){const{endo:O}=e,R=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===sp||R.is0())return E.ZERO;if(C===ip)return R;if(S.hasPrecomputes(this))return this.multiply(C);if(O){const{k1neg:B,k1:W,k2neg:M,k2:I}=O.splitScalar(C),{p1:A,p2:j}=rue(E,R,W,I);return _(O.beta,A,j,B,M)}else return S.wNAFCachedUnsafe(R,C)}multiplyAndAddUnsafe(C,O,R){const B=this.multiplyUnsafe(O).add(C.multiplyUnsafe(R));return B.is0()?void 0:B}toAffine(C){return b(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return s===ip?!0:C?C(E,this):S.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:C}=e;return s===ip?this:C?C(E,this):this.multiplyUnsafe(s)}toBytes(C=!0){return d0("isCompressed",C),this.assertValidity(),u(E,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return mg(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}E.BASE=new E(t.Gx,t.Gy,n.ONE),E.ZERO=new E(n.ZERO,n.ONE,n.ZERO),E.Fp=n,E.Fn=r;const x=r.BITS,S=nue(E,e.endo?Math.ceil(x/2):x);return E}function i4(t){return Uint8Array.of(t?2:3)}function wue(t,e,n={}){$v(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Oh,s=e.hmac||((R,...B)=>Pv(e.hash,R,wl(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const B=a>>ip;return R>B}function u(R){return l(R)?o.neg(R):R}function d(R,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(B,W,M){d("r",B),d("s",W),this.r=B,this.s=W,M!=null&&(this.recovery=M),Object.freeze(this)}static fromCompact(B){const W=o.BYTES,M=Wr("compactSignature",B,W*2);return new h(o.fromBytes(M.subarray(0,W)),o.fromBytes(M.subarray(W,W*2)))}static fromDER(B){const{r:W,s:M}=To.toSig(Wr("DER",B));return new h(W,M)}assertValidity(){}addRecoveryBit(B){return new h(this.r,this.s,B)}recoverPublicKey(B){const W=i.ORDER,{r:M,s:I,recovery:A}=this;if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");if(a*pue<W&&A>1)throw new Error("recovery id is ambiguous for h>1 curve");const j=A===2||A===3?M+a:M;if(!i.isValid(j))throw new Error("recovery id 2 or 3 invalid");const P=i.toBytes(j),k=t.fromHex(wl(i4((A&1)===0),P)),U=o.inv(j),z=v(Wr("msgHash",B)),V=o.create(-z*U),Q=o.create(I*U),Y=t.BASE.multiplyUnsafe(V).add(k.multiplyUnsafe(Q));if(Y.is0())throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return wl(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return KA(To.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return mg(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return mg(this.toBytes("compact"))}}const f=s4(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return Zle(r(e4(R)),R)},precompute(R=8,B=t.BASE){return B.precompute(R,!1)}};function g(R,B=!0){return t.fromPrivateKey(R).toBytes(B)}function w(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const B=Wr("key",R).length,W=i.BYTES,M=W+1,I=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===M))return B===M||B===I}function y(R,B,W=!0){if(w(R)===!0)throw new Error("first arg must be private key");if(w(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(f(R)).toBytes(W)}const b=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const B=Ov(R),W=R.length*8-c;return W>0?B>>BigInt(W):B},v=e.bits2int_modN||function(R){return o.create(b(R))},_=Rv(c);function E(R){return YC("num < 2^"+c,R,sp,_),o.toBytes(R)}function x(R,B,W=S){if(["recovered","canonical"].some(Y=>Y in W))throw new Error("sign() legacy options not supported");const{hash:M}=e;let{lowS:I,prehash:A,extraEntropy:j}=W;I==null&&(I=!0),R=Wr("msgHash",R),GP(W),A&&(R=Wr("prehashed msgHash",M(R)));const P=v(R),k=f(B),U=[E(k),E(P)];if(j!=null&&j!==!1){const Y=j===!0?r(i.BYTES):j;U.push(Wr("extraEntropy",Y))}const z=wl(...U),V=P;function Q(Y){const Z=b(Y);if(!o.isValidNot0(Z))return;const se=o.inv(Z),Ne=t.BASE.multiply(Z).toAffine(),ke=o.create(Ne.x);if(ke===sp)return;const $e=o.create(se*o.create(V+ke*k));if($e===sp)return;let Ke=(Ne.x===ke?0:2)|Number(Ne.y&ip),Yt=$e;return I&&l($e)&&(Yt=u($e),Ke^=1),new h(ke,Yt,Ke)}return{seed:z,k2sig:Q}}const S={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function C(R,B,W=S){const{seed:M,k2sig:I}=x(R,B,W);return Wle(e.hash.outputLen,o.BYTES,s)(M,I)}t.BASE.precompute(8);function O(R,B,W,M=T){const I=R;B=Wr("msgHash",B),W=Wr("publicKey",W),GP(M);const{lowS:A,prehash:j,format:P}=M;if("strict"in M)throw new Error("options.strict was renamed to lowS");if(P!==void 0&&!["compact","der","js"].includes(P))throw new Error('format must be "compact", "der" or "js"');const k=typeof I=="string"||HA(I),U=!k&&!P&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!k&&!U)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let z,V;try{if(U)if(P===void 0||P==="js")z=new h(I.r,I.s);else throw new Error("invalid format");if(k){try{P!=="compact"&&(z=h.fromDER(I))}catch(Ke){if(!(Ke instanceof To.Err))throw Ke}!z&&P!=="der"&&(z=h.fromCompact(I))}V=t.fromHex(W)}catch{return!1}if(!z||A&&z.hasHighS())return!1;j&&(B=e.hash(B));const{r:Q,s:Y}=z,Z=v(B),se=o.inv(Y),Ne=o.create(Z*se),ke=o.create(Q*se),$e=t.BASE.multiplyUnsafe(Ne).add(V.multiplyUnsafe(ke));return $e.is0()?!1:o.create($e.x)===Q}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:C,verify:O,utils:p,Point:t,Signature:h})}function vue(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Rh(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function bue(t){const{CURVE:e,curveOpts:n}=vue(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Eue(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function _ue(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=bue(t),s=yue(e,n),i=wue(s,r,n);return Eue(t,i)}function QC(t,e){const n=r=>_ue({...t,hash:r});return{...n(e),create:n}}const o4={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},a4={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},c4={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Cue=Rh(o4.p),xue=Rh(a4.p),Sue=Rh(c4.p),Aue=QC({...o4,Fp:Cue,lowS:!1},Nv);QC({...a4,Fp:xue,lowS:!1},$ce),QC({...c4,Fp:Sue,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Rce);const Iue=Aue,l4="base10",_r="base16",mi="base64pad",Ma="base64url",pm="utf8",u4=0,Lo=1,gm=2,Tue=0,KP=1,op=12,eI=32;function Nue(){const t=JC.utils.randomPrivateKey(),e=JC.getPublicKey(t);return{privateKey:Xr(t,_r),publicKey:Xr(e,_r)}}function ZC(){const t=Oh(eI);return Xr(t,_r)}function Pue(t,e){const n=JC.getSharedSecret(Bs(t,_r),Bs(e,_r)),r=Ble(kv,n,void 0,void 0,eI);return Xr(r,_r)}function cw(t){const e=kv(Bs(t,_r));return Xr(e,_r)}function Hi(t){const e=kv(Bs(t,pm));return Xr(e,_r)}function d4(t){return Bs(`${t}`,l4)}function ru(t){return Number(Xr(t,l4))}function h4(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function f4(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function kue(t){const e=d4(typeof t.type<"u"?t.type:u4);if(ru(e)===Lo&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Bs(t.senderPublicKey,_r):void 0,r=typeof t.iv<"u"?Bs(t.iv,_r):Oh(op),s=Bs(t.symKey,_r),i=Hj(s,r).encrypt(Bs(t.message,pm)),o=p4({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Ma?h4(o):o}function Oue(t){const e=Bs(t.symKey,_r),{sealed:n,iv:r}=wg({encoded:t.encoded,encoding:t.encoding}),s=Hj(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Xr(s,pm)}function Rue(t,e){const n=d4(gm),r=Oh(op),s=Bs(t,pm),i=p4({type:n,sealed:s,iv:r});return e===Ma?h4(i):i}function $ue(t,e){const{sealed:n}=wg({encoded:t,encoding:e});return Xr(n,pm)}function p4(t){if(ru(t.type)===gm)return Xr(np([t.type,t.sealed]),mi);if(ru(t.type)===Lo){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Xr(np([t.type,t.senderPublicKey,t.iv,t.sealed]),mi)}return Xr(np([t.type,t.iv,t.sealed]),mi)}function wg(t){const e=(t.encoding||mi)===Ma?f4(t.encoded):t.encoded,n=Bs(e,mi),r=n.slice(Tue,KP),s=KP;if(ru(r)===Lo){const c=s+eI,l=c+op,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(ru(r)===gm){const c=n.slice(s),l=Oh(op);return{type:r,sealed:c,iv:l}}const i=s+op,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Due(t,e){const n=wg({encoded:t,encoding:e==null?void 0:e.encoding});return g4({type:ru(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Xr(n.senderPublicKey,_r):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function g4(t){const e=(t==null?void 0:t.type)||u4;if(e===Lo){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function YP(t){return t.type===Lo&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function JP(t){return t.type===gm}function jue(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return np([new Uint8Array([4]),e,n])}function Uue(t,e){const[n,r,s]=t.split("."),i=Buffer.from(f4(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=kv(c),u=jue(e);if(!Iue.verify(np([o,a]),l,u))throw new Error("Invalid signature");return $C(t).payload}const Lue="irn";function f0(t){return(t==null?void 0:t.relay)||{protocol:Lue}}function Uf(t){const e=fae[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Mue(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function QP(t){if(!t.includes("wc:")){const l=Aj(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Bue(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:Mue(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Bue(t){return t.startsWith("//")?t.substring(2):t}function Fue(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function ZP(t){const e=new URLSearchParams,n=Fue(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Cy(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var zue=Object.defineProperty,Wue=Object.defineProperties,que=Object.getOwnPropertyDescriptors,XP=Object.getOwnPropertySymbols,Hue=Object.prototype.hasOwnProperty,Vue=Object.prototype.propertyIsEnumerable,ek=(t,e,n)=>e in t?zue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gue=(t,e)=>{for(var n in e||(e={}))Hue.call(e,n)&&ek(t,n,e[n]);if(XP)for(var n of XP(e))Vue.call(e,n)&&ek(t,n,e[n]);return t},Kue=(t,e)=>Wue(t,que(e));function $h(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function Yue(t){const e=[];return Object.values(t).forEach(n=>{e.push(...$h(n.accounts))}),e}function Jue(t,e){const n=[];return Object.values(t).forEach(r=>{$h(r.accounts).includes(e)&&n.push(...r.methods)}),n}function Que(t,e){const n=[];return Object.values(t).forEach(r=>{$h(r.accounts).includes(e)&&n.push(...r.events)}),n}function Dv(t){return t.includes(":")}function wd(t){return Dv(t)?t.split(":")[0]:t}function tk(t){var e,n,r;const s={};if(!Ec(t))return s;for(const[i,o]of Object.entries(t)){const a=Dv(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=wd(i);s[u]=Kue(Gue({},s[u]),{chains:eo(a,(e=s[u])==null?void 0:e.chains),methods:eo(c,(n=s[u])==null?void 0:n.methods),events:eo(l,(r=s[u])==null?void 0:r.events)})}return s}function Zue(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function nk(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Zue(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=eo(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function Xue(t,e){var n,r,s,i,o,a;const c=tk(t),l=tk(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:eo((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:eo((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:eo((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const ede={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},tde={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ae(t,e){const{message:n,code:r}=tde[t];return{message:e?`${n} ${e}`:n,code:r}}function Bt(t,e){const{message:n,code:r}=ede[t];return{message:e?`${n} ${e}`:n,code:r}}function Mo(t,e){return!!Array.isArray(t)}function Ec(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function zn(t){return typeof t>"u"}function un(t,e){return e&&zn(t)?!0:typeof t=="string"&&!!t.trim().length}function tI(t,e){return e&&zn(t)?!0:typeof t=="number"&&!isNaN(t)}function nde(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return yl(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=$h(a),d=n[o];(!yl(Ej(o,d),u)||!yl(d.methods,c)||!yl(d.events,l))&&(i=!1)}),i):!1}function p0(t){return un(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function rde(t){if(un(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&p0(n)}}return!1}function sde(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(un(t,!1)){if(e(t))return!0;const n=Aj(t);return e(n)}}catch{}return!1}function ide(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function ode(t){return t==null?void 0:t.topic}function ade(t,e){let n=null;return un(t==null?void 0:t.publicKey,!1)||(n=ae("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function rk(t){let e=!0;return Mo(t)?t.length&&(e=t.every(n=>un(n,!1))):e=!1,e}function cde(t,e,n){let r=null;return Mo(e)&&e.length?e.forEach(s=>{r||p0(s)||(r=Bt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):p0(t)||(r=Bt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function lde(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=cde(s,Ej(s,i),`${e} ${n}`);o&&(r=o)}),r}function ude(t,e){let n=null;return Mo(t)?t.forEach(r=>{n||rde(r)||(n=Bt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Bt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function dde(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=ude(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function hde(t,e){let n=null;return rk(t==null?void 0:t.methods)?rk(t==null?void 0:t.events)||(n=Bt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Bt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function m4(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=hde(r,`${e}, namespace`);s&&(n=s)}),n}function fde(t,e,n){let r=null;if(t&&Ec(t)){const s=m4(t,e);s&&(r=s);const i=lde(t,e,n);i&&(r=i)}else r=ae("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function Y1(t,e){let n=null;if(t&&Ec(t)){const r=m4(t,e);r&&(n=r);const s=dde(t,e);s&&(n=s)}else n=ae("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function y4(t){return un(t.protocol,!0)}function pde(t,e){let n=!1;return t?t&&Mo(t)&&t.length&&t.forEach(r=>{n=y4(r)}):n=!0,n}function gde(t){return typeof t=="number"}function Lr(t){return typeof t<"u"&&typeof t!==null}function mde(t){return!(!t||typeof t!="object"||!t.code||!tI(t.code,!1)||!t.message||!un(t.message,!1))}function yde(t){return!(zn(t)||!un(t.method,!1))}function wde(t){return!(zn(t)||zn(t.result)&&zn(t.error)||!tI(t.id,!1)||!un(t.jsonrpc,!1))}function vde(t){return!(zn(t)||!un(t.name,!1))}function sk(t,e){return!(!p0(e)||!Yue(t).includes(e))}function bde(t,e,n){return un(n,!1)?Jue(t,e).includes(n):!1}function Ede(t,e,n){return un(n,!1)?Que(t,e).includes(n):!1}function ik(t,e,n){let r=null;const s=_de(t),i=Cde(e),o=Object.keys(s),a=Object.keys(i),c=ok(Object.keys(t)),l=ok(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),yl(o,a)||(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=$h(e[d].accounts);h.includes(d)||(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(yl(s[d].methods,i[d].methods)?yl(s[d].events,i[d].events)||(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function _de(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function ok(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Cde(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=$h(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function xde(t,e){return tI(t,!1)&&t<=e.max&&t>=e.min}function ak(){const t=hm();return new Promise(e=>{switch(t){case ps.browser:e(Sde());break;case ps.reactNative:e(Ade());break;case ps.node:e(Ide());break;default:e(!0)}})}function Sde(){return kh()&&(navigator==null?void 0:navigator.onLine)}async function Ade(){if(Fc()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Ide(){return!0}function Tde(t){switch(hm()){case ps.browser:Nde(t);break;case ps.reactNative:Pde(t);break}}function Nde(t){!Fc()&&kh()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Pde(t){Fc()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function kde(){var t;return kh()&&eu()?((t=eu())==null?void 0:t.visibilityState)==="visible":!0}const J1={};class pf{static get(e){return J1[e]}static set(e,n){J1[e]=n}static delete(e){delete J1[e]}}function Ode(t){const e=Ph.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Rde({publicKey:t,signature:e,payload:n}){var r;const s=XC(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=jde(n.address),a=n.era==="00"?new Uint8Array([0]):XC(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${Dde(n.tip)}`),d=Lde(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=Ude(h.length+1);return new Uint8Array([...f,i,...h])}function $de(t){const e=XC(t),n=Sae.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function XC(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Dde(t){return t.startsWith("0x")?t.slice(2):t}function jde(t){const e=Ph.decode(t)[0];return e===42?0:e===60?2:1}function Ude(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Lde(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Mde(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=Ode(t.transaction.address),r=Rde({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return $de(s)}const Bde="PARSE_ERROR",Fde="INVALID_REQUEST",zde="METHOD_NOT_FOUND",Wde="INVALID_PARAMS",w4="INTERNAL_ERROR",nI="SERVER_ERROR",qde=[-32700,-32600,-32601,-32602,-32603],ap={[Bde]:{code:-32700,message:"Parse error"},[Fde]:{code:-32600,message:"Invalid Request"},[zde]:{code:-32601,message:"Method not found"},[Wde]:{code:-32602,message:"Invalid params"},[w4]:{code:-32603,message:"Internal error"},[nI]:{code:-32e3,message:"Server error"}},v4=nI;function Hde(t){return qde.includes(t)}function ck(t){return Object.keys(ap).includes(t)?ap[t]:ap[v4]}function Vde(t){const e=Object.values(ap).find(n=>n.code===t);return e||ap[v4]}function b4(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var E4={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ex=function(t,e){return ex=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},ex(t,e)};function Gde(t,e){ex(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tx=function(){return tx=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},tx.apply(this,arguments)};function Kde(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Yde(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Jde(t,e){return function(n,r){e(n,r,t)}}function Qde(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Zde(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Xde(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ehe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function the(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function nx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _4(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function nhe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_4(arguments[e]));return t}function rhe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function vg(t){return this instanceof vg?(this.v=t,this):new vg(t)}function she(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof vg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function ihe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:vg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function ohe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof nx=="function"?nx(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function ahe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function che(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function lhe(t){return t&&t.__esModule?t:{default:t}}function uhe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function dhe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const hhe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return tx},__asyncDelegator:ihe,__asyncGenerator:she,__asyncValues:ohe,__await:vg,__awaiter:Zde,__classPrivateFieldGet:uhe,__classPrivateFieldSet:dhe,__createBinding:ehe,__decorate:Yde,__exportStar:the,__extends:Gde,__generator:Xde,__importDefault:lhe,__importStar:che,__makeTemplateObject:ahe,__metadata:Qde,__param:Jde,__read:_4,__rest:Kde,__spread:nhe,__spreadArrays:rhe,__values:nx},Symbol.toStringTag,{value:"Module"})),fhe=T0(hhe);var wo={},lk;function phe(){if(lk)return wo;lk=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.isBrowserCryptoAvailable=wo.getSubtleCrypto=wo.getBrowerCrypto=void 0;function t(){return(en==null?void 0:en.crypto)||(en==null?void 0:en.msCrypto)||{}}wo.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}wo.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return wo.isBrowserCryptoAvailable=n,wo}var vo={},uk;function ghe(){if(uk)return vo;uk=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.isBrowser=vo.isNode=vo.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}vo.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}vo.isNode=e;function n(){return!t()&&!e()}return vo.isBrowser=n,vo}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fhe;e.__exportStar(phe(),t),e.__exportStar(ghe(),t)})(E4);function Li(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function El(t=6){return BigInt(Li(t))}function sc(t,e,n){return{id:n||Li(),jsonrpc:"2.0",method:t,params:e}}function jv(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Uv(t,e,n){return{id:t,jsonrpc:"2.0",error:mhe(e)}}function mhe(t,e){return typeof t>"u"?ck(w4):(typeof t=="string"&&(t=Object.assign(Object.assign({},ck(nI)),{message:t})),Hde(t.code)&&(t=Vde(t.code)),t)}let yhe=class{},whe=class extends yhe{constructor(){super()}},vhe=class extends whe{constructor(e){super()}};const bhe="^https?:",Ehe="^wss?:";function _he(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function C4(t,e){const n=_he(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function dk(t){return C4(t,bhe)}function hk(t){return C4(t,Ehe)}function Che(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function x4(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function rI(t){return x4(t)&&"method"in t}function Lv(t){return x4(t)&&(Mi(t)||Ds(t))}function Mi(t){return"result"in t}function Ds(t){return"error"in t}let Ks=class extends vhe{constructor(e){super(e),this.events=new Gs.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(sc(e.method,e.params||[],e.id||El().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ds(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Lv(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const xhe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),She=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",fk=t=>t.split("?")[0],pk=10,Ahe=xhe();let Ihe=class{constructor(e){if(this.url=e,this.events=new Gs.EventEmitter,this.registering=!1,!hk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Yo(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!hk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=E4.isReactNative()?void 0:{rejectUnauthorized:!Che(e)},i=new Ahe(e,[],s);She()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Xl(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Uv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return b4(e,fk(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>pk&&this.events.setMaxListeners(pk)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${fk(this.url)}`));return this.events.emit("register_error",n),n}};var The={};const S4="wc",A4=2,rx="core",ro=`${S4}@2:${rx}:`,Nhe={logger:"error"},Phe={database:":memory:"},khe="crypto",gk="client_ed25519_seed",Ohe=oe.ONE_DAY,Rhe="keychain",$he="0.3",Dhe="messages",jhe="0.3",mk=oe.SIX_HOURS,Uhe="publisher",I4="irn",Lhe="error",T4="wss://relay.walletconnect.org",Mhe="relayer",Tn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Bhe="_subscription",Ns={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Fhe=.1,sx="2.21.3",Ut={link_mode:"link_mode",relay:"relay"},lw={inbound:"inbound",outbound:"outbound"},zhe="0.3",Whe="WALLETCONNECT_CLIENT_ID",yk="WALLETCONNECT_LINK_MODE_APPS",cs={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},qhe="subscription",Hhe="0.3",Vhe="pairing",Ghe="0.3",gf={wc_pairingDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:0},res:{ttl:oe.ONE_DAY,prompt:!1,tag:0}}},cl={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Zs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Khe="history",Yhe="0.3",Jhe="expirer",Rs={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Qhe="0.3",Zhe="verify-api",Xhe="https://verify.walletconnect.com",N4="https://verify.walletconnect.org",cp=N4,efe=`${cp}/v3`,tfe=[Xhe,N4],nfe="echo",rfe="https://echo.walletconnect.com",ji={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},_o={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Xs={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Qc={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Zc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},mf={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},sfe=.1,ife="event-client",ofe=86400,afe="https://pulse.walletconnect.org/batch";function cfe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,_=new Uint8Array(v);y!==b;){for(var E=p[y],x=0,S=v-1;(E!==0||x<w)&&S!==-1;S--,x++)E+=256*_[S]>>>0,_[S]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=x,y++}for(var T=v-w;T!==v&&_[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(_[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var E=0,x=b-1;(_!==0||E<y)&&x!==-1;x--,E++)_+=a*v[x]>>>0,v[x]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var S=b-y;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(w+(b-S)),C=w;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var lfe=cfe,ufe=lfe;const P4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},dfe=t=>new TextEncoder().encode(t),hfe=t=>new TextDecoder().decode(t);class ffe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class pfe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return k4(this,e)}}class gfe{constructor(e){this.decoders=e}or(e){return k4(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const k4=(t,e)=>new gfe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class mfe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new ffe(e,n,r),this.decoder=new pfe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Mv=({name:t,prefix:e,encode:n,decode:r})=>new mfe(t,e,n,r),mm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=ufe(n,e);return Mv({prefix:t,name:e,encode:r,decode:i=>P4(s(i))})},yfe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},wfe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Jn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Mv({prefix:e,name:t,encode(s){return wfe(s,r,n)},decode(s){return yfe(s,r,n,t)}}),vfe=Mv({prefix:"\0",name:"identity",encode:t=>hfe(t),decode:t=>dfe(t)});var bfe=Object.freeze({__proto__:null,identity:vfe});const Efe=Jn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var _fe=Object.freeze({__proto__:null,base2:Efe});const Cfe=Jn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var xfe=Object.freeze({__proto__:null,base8:Cfe});const Sfe=mm({prefix:"9",name:"base10",alphabet:"0123456789"});var Afe=Object.freeze({__proto__:null,base10:Sfe});const Ife=Jn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Tfe=Jn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Nfe=Object.freeze({__proto__:null,base16:Ife,base16upper:Tfe});const Pfe=Jn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),kfe=Jn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ofe=Jn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rfe=Jn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),$fe=Jn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dfe=Jn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jfe=Jn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ufe=Jn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Lfe=Jn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Mfe=Object.freeze({__proto__:null,base32:Pfe,base32upper:kfe,base32pad:Ofe,base32padupper:Rfe,base32hex:$fe,base32hexupper:Dfe,base32hexpad:jfe,base32hexpadupper:Ufe,base32z:Lfe});const Bfe=mm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ffe=mm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zfe=Object.freeze({__proto__:null,base36:Bfe,base36upper:Ffe});const Wfe=mm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qfe=mm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Hfe=Object.freeze({__proto__:null,base58btc:Wfe,base58flickr:qfe});const Vfe=Jn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Gfe=Jn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Kfe=Jn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Yfe=Jn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Jfe=Object.freeze({__proto__:null,base64:Vfe,base64pad:Gfe,base64url:Kfe,base64urlpad:Yfe});const O4=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Qfe=O4.reduce((t,e,n)=>(t[n]=e,t),[]),Zfe=O4.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Xfe(t){return t.reduce((e,n)=>(e+=Qfe[n],e),"")}function epe(t){const e=[];for(const n of t){const r=Zfe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const tpe=Mv({prefix:"🚀",name:"base256emoji",encode:Xfe,decode:epe});var npe=Object.freeze({__proto__:null,base256emoji:tpe}),rpe=R4,wk=128,spe=-128,ipe=Math.pow(2,31);function R4(t,e,n){e=e||[],n=n||0;for(var r=n;t>=ipe;)e[n++]=t&255|wk,t/=128;for(;t&spe;)e[n++]=t&255|wk,t>>>=7;return e[n]=t|0,R4.bytes=n-r+1,e}var ope=ix,ape=128,vk=127;function ix(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw ix.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&vk)<<s:(o&vk)*Math.pow(2,s),s+=7}while(o>=ape);return ix.bytes=i-r,n}var cpe=Math.pow(2,7),lpe=Math.pow(2,14),upe=Math.pow(2,21),dpe=Math.pow(2,28),hpe=Math.pow(2,35),fpe=Math.pow(2,42),ppe=Math.pow(2,49),gpe=Math.pow(2,56),mpe=Math.pow(2,63),ype=function(t){return t<cpe?1:t<lpe?2:t<upe?3:t<dpe?4:t<hpe?5:t<fpe?6:t<ppe?7:t<gpe?8:t<mpe?9:10},wpe={encode:rpe,decode:ope,encodingLength:ype},$4=wpe;const bk=(t,e,n=0)=>($4.encode(t,e,n),e),Ek=t=>$4.encodingLength(t),ox=(t,e)=>{const n=e.byteLength,r=Ek(t),s=r+Ek(n),i=new Uint8Array(s+n);return bk(t,i,0),bk(n,i,r),i.set(e,s),new vpe(t,n,e,i)};class vpe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const D4=({name:t,code:e,encode:n})=>new bpe(t,e,n);class bpe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?ox(this.code,n):n.then(r=>ox(this.code,r))}else throw Error("Unknown type, must be binary type")}}const j4=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Epe=D4({name:"sha2-256",code:18,encode:j4("SHA-256")}),_pe=D4({name:"sha2-512",code:19,encode:j4("SHA-512")});var Cpe=Object.freeze({__proto__:null,sha256:Epe,sha512:_pe});const U4=0,xpe="identity",L4=P4,Spe=t=>ox(U4,L4(t)),Ape={code:U4,name:xpe,encode:L4,digest:Spe};var Ipe=Object.freeze({__proto__:null,identity:Ape});new TextEncoder,new TextDecoder;const _k={...bfe,..._fe,...xfe,...Afe,...Nfe,...Mfe,...zfe,...Hfe,...Jfe,...npe};({...Cpe,...Ipe});function M4(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Tpe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?M4(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function B4(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Ck=B4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Q1=B4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Tpe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Npe={utf8:Ck,"utf-8":Ck,hex:_k.base16,latin1:Q1,ascii:Q1,binary:Q1,..._k};function Ppe(t,e="utf8"){const n=Npe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?M4(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var kpe=Object.defineProperty,Ope=(t,e,n)=>e in t?kpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$i=(t,e,n)=>Ope(t,typeof e!="symbol"?e+"":e,n);class Rpe{constructor(e,n){this.core=e,this.logger=n,$i(this,"keychain",new Map),$i(this,"name",Rhe),$i(this,"version",$he),$i(this,"initialized",!1),$i(this,"storagePrefix",ro),$i(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),$i(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),$i(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),$i(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=ae("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),$i(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=dr(n,this.name)}get context(){return ts(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,FC(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?zC(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $pe=Object.defineProperty,Dpe=(t,e,n)=>e in t?$pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ln=(t,e,n)=>Dpe(t,typeof e!="symbol"?e+"":e,n);class jpe{constructor(e,n,r){this.core=e,this.logger=n,Ln(this,"name",khe),Ln(this,"keychain"),Ln(this,"randomSessionIdentifier",ZC()),Ln(this,"initialized",!1),Ln(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ln(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Ln(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=nP(s);return L6(i.publicKey)}),Ln(this,"generateKeyPair",()=>{this.isInitialized();const s=Nue();return this.setPrivateKey(s.publicKey,s.privateKey)}),Ln(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=nP(i),a=this.randomSessionIdentifier;return await Dse(a,s,Ohe,o)}),Ln(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Pue(a,i);return this.setSymKey(c,o)}),Ln(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||cw(s);return await this.keychain.set(o,s),o}),Ln(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ln(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ln(this,"encode",async(s,i,o)=>{this.isInitialized();const a=g4(o),c=Yo(i);if(JP(a))return Rue(c,o==null?void 0:o.encoding);if(YP(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return kue({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Ln(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Due(i,o);if(JP(a)){const c=$ue(i,o==null?void 0:o.encoding);return Xl(c)}if(YP(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=Oue({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Xl(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Ln(this,"getPayloadType",(s,i=mi)=>{const o=wg({encoded:s,encoding:i});return ru(o.type)}),Ln(this,"getPayloadSenderPublicKey",(s,i=mi)=>{const o=wg({encoded:s,encoding:i});return o.senderPublicKey?Xr(o.senderPublicKey,_r):void 0}),this.core=e,this.logger=dr(n,this.name),this.keychain=r||new Rpe(this.core,this.logger)}get context(){return ts(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(gk)}catch{e=ZC(),await this.keychain.set(gk,e)}return Ppe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Upe=Object.defineProperty,Lpe=Object.defineProperties,Mpe=Object.getOwnPropertyDescriptors,xk=Object.getOwnPropertySymbols,Bpe=Object.prototype.hasOwnProperty,Fpe=Object.prototype.propertyIsEnumerable,ax=(t,e,n)=>e in t?Upe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zpe=(t,e)=>{for(var n in e||(e={}))Bpe.call(e,n)&&ax(t,n,e[n]);if(xk)for(var n of xk(e))Fpe.call(e,n)&&ax(t,n,e[n]);return t},Wpe=(t,e)=>Lpe(t,Mpe(e)),is=(t,e,n)=>ax(t,typeof e!="symbol"?e+"":e,n);class qpe extends Rte{constructor(e,n){super(e,n),this.logger=e,this.core=n,is(this,"messages",new Map),is(this,"messagesWithoutClientAck",new Map),is(this,"name",Dhe),is(this,"version",jhe),is(this,"initialized",!1),is(this,"storagePrefix",ro),is(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),is(this,"set",async(r,s,i)=>{this.isInitialized();const o=Hi(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===lw.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Wpe(zpe({},c),{[o]:s}))}return await this.persist(),o}),is(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),is(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),is(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Hi(s);return typeof i[o]<"u"}),is(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Hi(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),is(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=dr(e,this.name),this.core=n}get context(){return ts(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,FC(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,FC(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?zC(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?zC(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Hpe=Object.defineProperty,Vpe=Object.defineProperties,Gpe=Object.getOwnPropertyDescriptors,Sk=Object.getOwnPropertySymbols,Kpe=Object.prototype.hasOwnProperty,Ype=Object.prototype.propertyIsEnumerable,cx=(t,e,n)=>e in t?Hpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xy=(t,e)=>{for(var n in e||(e={}))Kpe.call(e,n)&&cx(t,n,e[n]);if(Sk)for(var n of Sk(e))Ype.call(e,n)&&cx(t,n,e[n]);return t},Z1=(t,e)=>Vpe(t,Gpe(e)),ei=(t,e,n)=>cx(t,typeof e!="symbol"?e+"":e,n);class Jpe extends $te{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,ei(this,"events",new Gs.EventEmitter),ei(this,"name",Uhe),ei(this,"queue",new Map),ei(this,"publishTimeout",oe.toMiliseconds(oe.ONE_MINUTE)),ei(this,"initialPublishTimeout",oe.toMiliseconds(oe.ONE_SECOND*15)),ei(this,"needsTransportRestart",!1),ei(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||mk,c=f0(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||El().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(Tn.publish,w),g(h))};this.relayer.events.on(Tn.publish,w);const y=rc(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(_=>{this.logger.warn(_,_==null?void 0:_.message),v(_)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Tn.publish,w)}catch(b){this.queue.set(d,Z1(xy({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await rc(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),ei(this,"on",(r,s)=>{this.events.on(r,s)}),ei(this,"once",(r,s)=>{this.events.once(r,s)}),ei(this,"off",(r,s)=>{this.events.off(r,s)}),ei(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=dr(n,this.name),this.registerEventListeners()}get context(){return ts(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=mk,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Uf(f0().protocol).publish,params:xy({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};zn((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),zn((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Tn.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,Z1(xy({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Z1(xy({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(yu.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Tn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Tn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Qpe=Object.defineProperty,Zpe=(t,e,n)=>e in t?Qpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ju=(t,e,n)=>Zpe(t,typeof e!="symbol"?e+"":e,n);class Xpe{constructor(){ju(this,"map",new Map),ju(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),ju(this,"get",e=>this.map.get(e)||[]),ju(this,"exists",(e,n)=>this.get(e).includes(n)),ju(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),ju(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var ege=Object.defineProperty,tge=Object.defineProperties,nge=Object.getOwnPropertyDescriptors,Ak=Object.getOwnPropertySymbols,rge=Object.prototype.hasOwnProperty,sge=Object.prototype.propertyIsEnumerable,lx=(t,e,n)=>e in t?ege(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yf=(t,e)=>{for(var n in e||(e={}))rge.call(e,n)&&lx(t,n,e[n]);if(Ak)for(var n of Ak(e))sge.call(e,n)&&lx(t,n,e[n]);return t},X1=(t,e)=>tge(t,nge(e)),At=(t,e,n)=>lx(t,typeof e!="symbol"?e+"":e,n);class ige extends Ute{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,At(this,"subscriptions",new Map),At(this,"topicMap",new Xpe),At(this,"events",new Gs.EventEmitter),At(this,"name",qhe),At(this,"version",Hhe),At(this,"pending",new Map),At(this,"cached",[]),At(this,"initialized",!1),At(this,"storagePrefix",ro),At(this,"subscribeTimeout",oe.toMiliseconds(oe.ONE_MINUTE)),At(this,"initialSubscribeTimeout",oe.toMiliseconds(oe.ONE_SECOND*15)),At(this,"clientId"),At(this,"batchSubscribeTopicsLimit",500),At(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),At(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=f0(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),At(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),At(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),At(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),At(this,"on",(r,s)=>{this.events.on(r,s)}),At(this,"once",(r,s)=>{this.events.once(r,s)}),At(this,"off",(r,s)=>{this.events.off(r,s)}),At(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),At(this,"start",async()=>{await this.onConnect()}),At(this,"stop",async()=>{await this.onDisconnect()}),At(this,"restart",async()=>{await this.restore(),await this.onRestart()}),At(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),At(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(yu.pulse,async()=>{await this.checkPending()}),this.events.on(cs.created,async r=>{const s=cs.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(cs.deleted,async r=>{const s=cs.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=dr(n,this.name),this.clientId=""}get context(){return ts(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=f0(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Bt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Ut.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Uf(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Ut.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},oe.toMiliseconds(oe.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(cs.created,d),u(h.id))};this.events.on(cs.created,d);try{const h=await rc(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(cs.created,d),u(h)}catch{}}),l=await rc(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Tn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Uf(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await rc(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Tn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Uf(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await rc(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Tn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Uf(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,X1(yf({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,yf({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,yf({},n)),this.topicMap.set(n.topic,e),this.events.emit(cs.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(cs.deleted,X1(yf({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(cs.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(cs.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>X1(yf({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await Zae(oe.toMiliseconds(oe.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Hi(e+await this.getClientId())}}var oge=Object.defineProperty,Ik=Object.getOwnPropertySymbols,age=Object.prototype.hasOwnProperty,cge=Object.prototype.propertyIsEnumerable,ux=(t,e,n)=>e in t?oge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tk=(t,e)=>{for(var n in e||(e={}))age.call(e,n)&&ux(t,n,e[n]);if(Ik)for(var n of Ik(e))cge.call(e,n)&&ux(t,n,e[n]);return t},at=(t,e,n)=>ux(t,typeof e!="symbol"?e+"":e,n);class lge extends Dte{constructor(e){super(e),at(this,"protocol","wc"),at(this,"version",2),at(this,"core"),at(this,"logger"),at(this,"events",new Gs.EventEmitter),at(this,"provider"),at(this,"messages"),at(this,"subscriber"),at(this,"publisher"),at(this,"name",Mhe),at(this,"transportExplicitlyClosed",!1),at(this,"initialized",!1),at(this,"connectionAttemptInProgress",!1),at(this,"relayUrl"),at(this,"projectId"),at(this,"packageName"),at(this,"bundleId"),at(this,"hasExperiencedNetworkDisruption",!1),at(this,"pingTimeout"),at(this,"heartBeatTimeout",oe.toMiliseconds(oe.THIRTY_SECONDS+oe.FIVE_SECONDS)),at(this,"reconnectTimeout"),at(this,"connectPromise"),at(this,"reconnectInProgress",!1),at(this,"requestsInFlight",[]),at(this,"connectTimeout",oe.toMiliseconds(oe.ONE_SECOND*15)),at(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||El().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),at(this,"resetPingTimeout",()=>{l0()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),at(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),at(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Tn.connect)}),at(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),at(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Tn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),at(this,"registerProviderListeners",()=>{this.provider.on(Ns.payload,this.onPayloadHandler),this.provider.on(Ns.connect,this.onConnectHandler),this.provider.on(Ns.disconnect,this.onDisconnectHandler),this.provider.on(Ns.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?dr(e.logger,this.name):cm(Sh({level:e.logger||Lhe})),this.messages=new qpe(this.logger,e.core),this.subscriber=new ige(this,this.logger),this.publisher=new Jpe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||T4,this.projectId=e.projectId,jae()?this.packageName=yP():Uae()&&(this.bundleId=yP()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return ts(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Ut.relay},lw.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(cs.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(cs.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Tk({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await rc(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ak())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=gn(oe.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Tn.message,e),await this.recordMessageEvent(e,lw.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ns.disconnect,i),await rc(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ns.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ns.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ns.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,oe.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(l0())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ks(new Ihe(zae({sdkVersion:sx,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),rI(e)){if(!e.method.endsWith(Bhe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Ut.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Tk({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Lv(e)&&this.events.emit(Tn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,lw.inbound),this.events.emit(Tn.message,e))}async acknowledgePayload(e){const n=jv(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ns.payload,this.onPayloadHandler),this.provider.off(Ns.connect,this.onConnectHandler),this.provider.off(Ns.disconnect,this.onDisconnectHandler),this.provider.off(Ns.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await ak();Tde(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(yu.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&kde())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Tn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},oe.toMiliseconds(Fhe)))))}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function uge(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Nk(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Pk(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const dge="[object RegExp]",hge="[object String]",fge="[object Number]",pge="[object Boolean]",kk="[object Arguments]",gge="[object Symbol]",mge="[object Date]",yge="[object Map]",wge="[object Set]",vge="[object Array]",bge="[object Function]",Ege="[object ArrayBuffer]",eE="[object Object]",_ge="[object Error]",Cge="[object DataView]",xge="[object Uint8Array]",Sge="[object Uint8ClampedArray]",Age="[object Uint16Array]",Ige="[object Uint32Array]",Tge="[object BigUint64Array]",Nge="[object Int8Array]",Pge="[object Int16Array]",kge="[object Int32Array]",Oge="[object BigInt64Array]",Rge="[object Float32Array]",$ge="[object Float64Array]";function Dge(){}function Ok(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function jge(t,e,n){return Lf(t,e,void 0,void 0,void 0,void 0,n)}function Lf(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return lp(t,e,i,o)}return lp(t,e,i,o)}function lp(t,e,n,r){if(Object.is(t,e))return!0;let s=Pk(t),i=Pk(e);if(s===kk&&(s=eE),i===kk&&(i=eE),s!==i)return!1;switch(s){case hge:return t.toString()===e.toString();case fge:{const c=t.valueOf(),l=e.valueOf();return uge(c,l)}case pge:case mge:case gge:return Object.is(t.valueOf(),e.valueOf());case dge:return t.source===e.source&&t.flags===e.flags;case bge:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case yge:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Lf(l,e.get(c),c,t,e,n,r))return!1;return!0}case wge:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Lf(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case vge:case xge:case Sge:case Age:case Ige:case Tge:case Nge:case Pge:case kge:case Oge:case Rge:case $ge:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Lf(t[c],e[c],c,t,e,n,r))return!1;return!0}case Ege:return t.byteLength!==e.byteLength?!1:lp(new Uint8Array(t),new Uint8Array(e),n,r);case Cge:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:lp(new Uint8Array(t),new Uint8Array(e),n,r);case _ge:return t.name===e.name&&t.message===e.message;case eE:{if(!(lp(t.constructor,e.constructor,n,r)||Ok(t)&&Ok(e)))return!1;const c=[...Object.keys(t),...Nk(t)],l=[...Object.keys(e),...Nk(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Lf(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Uge(t,e){return jge(t,e,Dge)}var Lge=Object.defineProperty,Rk=Object.getOwnPropertySymbols,Mge=Object.prototype.hasOwnProperty,Bge=Object.prototype.propertyIsEnumerable,dx=(t,e,n)=>e in t?Lge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$k=(t,e)=>{for(var n in e||(e={}))Mge.call(e,n)&&dx(t,n,e[n]);if(Rk)for(var n of Rk(e))Bge.call(e,n)&&dx(t,n,e[n]);return t},Rr=(t,e,n)=>dx(t,typeof e!="symbol"?e+"":e,n);class bu extends jte{constructor(e,n,r,s=ro,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Rr(this,"map",new Map),Rr(this,"version",zhe),Rr(this,"cached",[]),Rr(this,"initialized",!1),Rr(this,"getKey"),Rr(this,"storagePrefix",ro),Rr(this,"recentlyDeleted",[]),Rr(this,"recentlyDeletedLimit",200),Rr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!zn(o)?this.map.set(this.getKey(o),o):ide(o)?this.map.set(o.id,o):ode(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Rr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Rr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Rr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Uge(a[c],o[c]))):this.values)),Rr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=$k($k({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Rr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=dr(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return ts(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=ae("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Fge=Object.defineProperty,zge=(t,e,n)=>e in t?Fge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qe=(t,e,n)=>zge(t,typeof e!="symbol"?e+"":e,n);class Wge{constructor(e,n){this.core=e,this.logger=n,Qe(this,"name",Vhe),Qe(this,"version",Ghe),Qe(this,"events",new SA),Qe(this,"pairings"),Qe(this,"initialized",!1),Qe(this,"storagePrefix",ro),Qe(this,"ignoredPayloadTypes",[Lo]),Qe(this,"registeredMethods",[]),Qe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Qe(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Qe(this,"create",async r=>{this.isInitialized();const s=ZC(),i=await this.core.crypto.setSymKey(s),o=gn(oe.FIVE_MINUTES),a={protocol:I4},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=ZP({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(cl.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Qe(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ji.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=QP(r.uri);s.props.properties.topic=i,s.addTrace(ji.pairing_uri_validation_success),s.addTrace(ji.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(ji.existing_pairing),u.active)throw s.setError(_o.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ji.pairing_not_expired)}const d=c||gn(oe.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(ji.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(cl.create,h),s.addTrace(ji.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ji.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(_o.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(_o.subscribe_pairing_topic_failure),f}return s.addTrace(ji.subscribe_pairing_topic_success),h}),Qe(this,"activate",async({topic:r})=>{this.isInitialized();const s=gn(oe.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Qe(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=sl();this.events.once(ft("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Qe(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Qe(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Qe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Qe(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Bt("USER_DISCONNECTED")),await this.deletePairing(s))}),Qe(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return ZP({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Qe(this,"sendRequest",async(r,s,i)=>{const o=sc(s,i),a=await this.core.crypto.encode(r,o),c=gf[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Qe(this,"sendResult",async(r,s,i)=>{const o=jv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=gf[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Qe(this,"sendError",async(r,s,i)=>{const o=Uv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=gf[c]?gf[c].res:gf.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Qe(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Bt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Qe(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Oa(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Qe(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Qe(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Qe(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(cl.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Qe(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Mi(s)?this.events.emit(ft("pairing_ping",i),{}):Ds(s)&&this.events.emit(ft("pairing_ping",i),{error:s.error})},500)}),Qe(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(cl.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Qe(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Bt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Qe(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Bt("WC_METHOD_UNSUPPORTED",r))}),Qe(this,"isValidPair",(r,s)=>{var i;if(!Lr(r)){const{message:a}=ae("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(_o.malformed_pairing_uri),new Error(a)}if(!sde(r.uri)){const{message:a}=ae("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(_o.malformed_pairing_uri),new Error(a)}const o=QP(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=ae("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(_o.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ae("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(_o.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&oe.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(_o.pairing_expired);const{message:a}=ae("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Qe(this,"isValidPing",async r=>{if(!Lr(r)){const{message:i}=ae("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Qe(this,"isValidDisconnect",async r=>{if(!Lr(r)){const{message:i}=ae("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Qe(this,"isValidPairingTopic",async r=>{if(!un(r,!1)){const{message:s}=ae("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Oa(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=ae("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=dr(n,this.name),this.pairings=new bu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ts(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Tn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Ut.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);rI(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):Lv(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Rs.expired,async e=>{const{topic:n}=Sj(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(cl.expire,{topic:n}))})}}var qge=Object.defineProperty,Hge=(t,e,n)=>e in t?qge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mn=(t,e,n)=>Hge(t,typeof e!="symbol"?e+"":e,n);class Vge extends Ote{constructor(e,n){super(e,n),this.core=e,this.logger=n,Mn(this,"records",new Map),Mn(this,"events",new Gs.EventEmitter),Mn(this,"name",Khe),Mn(this,"version",Yhe),Mn(this,"cached",[]),Mn(this,"initialized",!1),Mn(this,"storagePrefix",ro),Mn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Mn(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:gn(oe.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Zs.created,o)}),Mn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ds(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Zs.updated,s))}),Mn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Mn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Zs.deleted,i)}}),this.persist()}),Mn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Mn(this,"on",(r,s)=>{this.events.on(r,s)}),Mn(this,"once",(r,s)=>{this.events.once(r,s)}),Mn(this,"off",(r,s)=>{this.events.off(r,s)}),Mn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=dr(n,this.name)}get context(){return ts(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:sc(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Zs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Zs.created,e=>{const n=Zs.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Zs.updated,e=>{const n=Zs.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Zs.deleted,e=>{const n=Zs.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(yu.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{oe.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Zs.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Gge=Object.defineProperty,Kge=(t,e,n)=>e in t?Gge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ir=(t,e,n)=>Kge(t,typeof e!="symbol"?e+"":e,n);class Yge extends Lte{constructor(e,n){super(e,n),this.core=e,this.logger=n,ir(this,"expirations",new Map),ir(this,"events",new Gs.EventEmitter),ir(this,"name",Jhe),ir(this,"version",Qhe),ir(this,"cached",[]),ir(this,"initialized",!1),ir(this,"storagePrefix",ro),ir(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ir(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ir(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Rs.created,{target:i,expiration:o})}),ir(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ir(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Rs.deleted,{target:s,expiration:i})}}),ir(this,"on",(r,s)=>{this.events.on(r,s)}),ir(this,"once",(r,s)=>{this.events.once(r,s)}),ir(this,"off",(r,s)=>{this.events.off(r,s)}),ir(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=dr(n,this.name)}get context(){return ts(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Wae(e);if(typeof e=="number")return qae(e);const{message:n}=ae("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Rs.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;oe.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Rs.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(yu.pulse,()=>this.checkExpirations()),this.events.on(Rs.created,e=>{const n=Rs.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Rs.expired,e=>{const n=Rs.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Rs.deleted,e=>{const n=Rs.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Jge=Object.defineProperty,Qge=(t,e,n)=>e in t?Jge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cn=(t,e,n)=>Qge(t,typeof e!="symbol"?e+"":e,n);class Zge extends Mte{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,cn(this,"name",Zhe),cn(this,"abortController"),cn(this,"isDevEnv"),cn(this,"verifyUrlV3",efe),cn(this,"storagePrefix",ro),cn(this,"version",A4),cn(this,"publicKey"),cn(this,"fetchPromise"),cn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&oe.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),cn(this,"register",async s=>{if(!kh()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=eu(),u=this.startAbortTimer(oe.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if($C(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),cn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if($C(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),cn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(oe.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),cn(this,"getVerifyUrl",s=>{let i=s||cp;return tfe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${cp}`),i=cp),i}),cn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(oe.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),cn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),cn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),cn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),cn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),cn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),cn(this,"validateAttestation",(s,i)=>{const o=Uue(s,i.publicKey),a={hasExpired:oe.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=dr(n,this.name),this.abortController=new AbortController,this.isDevEnv=zA(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ts(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),oe.toMiliseconds(e))}}var Xge=Object.defineProperty,eme=(t,e,n)=>e in t?Xge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dk=(t,e,n)=>eme(t,typeof e!="symbol"?e+"":e,n);class tme extends Bte{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Dk(this,"context",nfe),Dk(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${rfe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=dr(n,this.context)}}var nme=Object.defineProperty,jk=Object.getOwnPropertySymbols,rme=Object.prototype.hasOwnProperty,sme=Object.prototype.propertyIsEnumerable,hx=(t,e,n)=>e in t?nme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wf=(t,e)=>{for(var n in e||(e={}))rme.call(e,n)&&hx(t,n,e[n]);if(jk)for(var n of jk(e))sme.call(e,n)&&hx(t,n,e[n]);return t},Cn=(t,e,n)=>hx(t,typeof e!="symbol"?e+"":e,n);class ime extends Fte{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Cn(this,"context",ife),Cn(this,"storagePrefix",ro),Cn(this,"storageVersion",sfe),Cn(this,"events",new Map),Cn(this,"shouldPersist",!1),Cn(this,"init",async()=>{if(!zA())try{const s={eventId:vP(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Cj(this.core.relayer.protocol,this.core.relayer.version,sx)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Cn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=vP(),u=this.core.projectId||"",d=Date.now(),h=wf({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Cn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return wf(wf({},a),this.setMethods(a.eventId))}),Cn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Cn(this,"setEventListeners",()=>{this.core.heartbeat.on(yu.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{oe.fromMiliseconds(Date.now())-oe.fromMiliseconds(s.timestamp)>ofe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Cn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Cn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Cn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Cn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Cn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,wf(wf({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Cn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Cn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${afe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${sx}${i}`,{method:"POST",body:JSON.stringify(s)})}),Cn(this,"getAppDomain",()=>_j().url),this.logger=dr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var ome=Object.defineProperty,Uk=Object.getOwnPropertySymbols,ame=Object.prototype.hasOwnProperty,cme=Object.prototype.propertyIsEnumerable,fx=(t,e,n)=>e in t?ome(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lk=(t,e)=>{for(var n in e||(e={}))ame.call(e,n)&&fx(t,n,e[n]);if(Uk)for(var n of Uk(e))cme.call(e,n)&&fx(t,n,e[n]);return t},Tt=(t,e,n)=>fx(t,typeof e!="symbol"?e+"":e,n);let lme=class F4 extends Tte{constructor(e){var n;super(e),Tt(this,"protocol",S4),Tt(this,"version",A4),Tt(this,"name",rx),Tt(this,"relayUrl"),Tt(this,"projectId"),Tt(this,"customStoragePrefix"),Tt(this,"events",new Gs.EventEmitter),Tt(this,"logger"),Tt(this,"heartbeat"),Tt(this,"relayer"),Tt(this,"crypto"),Tt(this,"storage"),Tt(this,"history"),Tt(this,"expirer"),Tt(this,"pairing"),Tt(this,"verify"),Tt(this,"echoClient"),Tt(this,"linkModeSupportedApps"),Tt(this,"eventClient"),Tt(this,"initialized",!1),Tt(this,"logChunkController"),Tt(this,"on",(a,c)=>this.events.on(a,c)),Tt(this,"once",(a,c)=>this.events.once(a,c)),Tt(this,"off",(a,c)=>this.events.off(a,c)),Tt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Tt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Ut.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||T4,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Sh({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:Nhe.logger,name:rx}),{logger:i,chunkLoggerController:o}=IA({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=dr(i,this.name),this.heartbeat=new mee,this.crypto=new jpe(this,this.logger,e==null?void 0:e.keychain),this.history=new Vge(this,this.logger),this.expirer=new Yge(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Zee(Lk(Lk({},Phe),e==null?void 0:e.storageOptions)),this.relayer=new lge({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Wge(this,this.logger),this.verify=new Zge(this,this.logger,this.storage),this.echoClient=new tme(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new ime(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new F4(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Whe,r),n}get context(){return ts(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(yk,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(yk)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&The.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const ume=lme,z4="wc",W4=2,q4="client",sI=`${z4}@${W4}:${q4}:`,tE={name:q4,logger:"error"},Mk="WALLETCONNECT_DEEPLINK_CHOICE",dme="proposal",Bk="Proposal expired",hme="session",Uu=oe.SEVEN_DAYS,fme="engine",xn={wc_sessionPropose:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:oe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:oe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1119}}},nE={min:oe.FIVE_MINUTES,max:oe.SEVEN_DAYS},Di={idle:"IDLE",active:"ACTIVE"},pme={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},gme="request",mme=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],yme="wc",wme="auth",vme="authKeys",bme="pairingTopics",Eme="requests",Bv=`${yme}@${1.5}:${wme}:`,uw=`${Bv}:PUB_KEY`;var _me=Object.defineProperty,Cme=Object.defineProperties,xme=Object.getOwnPropertyDescriptors,Fk=Object.getOwnPropertySymbols,Sme=Object.prototype.hasOwnProperty,Ame=Object.prototype.propertyIsEnumerable,px=(t,e,n)=>e in t?_me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dt=(t,e)=>{for(var n in e||(e={}))Sme.call(e,n)&&px(t,n,e[n]);if(Fk)for(var n of Fk(e))Ame.call(e,n)&&px(t,n,e[n]);return t},$r=(t,e)=>Cme(t,xme(e)),te=(t,e,n)=>px(t,typeof e!="symbol"?e+"":e,n);class Ime extends Hte{constructor(e){super(e),te(this,"name",fme),te(this,"events",new SA),te(this,"initialized",!1),te(this,"requestQueue",{state:Di.idle,queue:[]}),te(this,"sessionRequestQueue",{state:Di.idle,queue:[]}),te(this,"requestQueueDelay",oe.ONE_SECOND),te(this,"expectedPairingMethodMap",new Map),te(this,"recentlyDeletedMap",new Map),te(this,"recentlyDeletedLimit",200),te(this,"relayMessageCache",[]),te(this,"pendingSessions",new Map),te(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(xn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay)))}),te(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=$r(Dt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Xue(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const x=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=x.active}}catch(x){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),x}if(!u||!h){const{topic:x,uri:S}=await this.client.core.pairing.create();u=x,d=S}if(!u){const{message:x}=ae("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(x)}const f=await this.client.core.crypto.generateKeyPair(),p=xn.wc_sessionPropose.req.ttl||oe.FIVE_MINUTES,g=gn(p),w=$r(Dt(Dt({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:I4}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Li()}),y=ft("session_connect",w.id),{reject:b,resolve:v,done:_}=sl(p,Bk),E=({id:x})=>{x===w.id&&(this.client.events.off("proposal_expire",E),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:Bk,code:0}}))};return this.client.events.on("proposal_expire",E),this.events.once(y,({error:x,session:S})=>{this.client.events.off("proposal_expire",E),x?b(x):S&&v(S)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:_}}),te(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),te(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Xs.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(Qc.no_internet_connection),C}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Qc.proposal_not_found),C}try{await this.isValidApprove(n)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Qc.session_approve_namespace_validation_failure),C}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Xs.session_approve_started,properties:{topic:p,trace:[Xs.session_approve_started,Xs.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,E=await this.client.core.crypto.generateSharedKey(v,_),x=Dt(Dt(Dt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:gn(Uu)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),S=Ut.relay;b.addTrace(Xs.subscribing_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:S})}catch(C){throw b.setError(Qc.subscribe_session_topic_failure),C}b.addTrace(Xs.subscribe_session_topic_success);const T=$r(Dt({},x),{topic:E,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:x.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Ut.relay});await this.client.session.set(E,T),b.addTrace(Xs.store_session);try{b.addTrace(Xs.publishing_session_settle),await this.sendRequest({topic:E,method:"wc_sessionSettle",params:x,throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(Qc.session_settle_publish_failure),C}),b.addTrace(Xs.session_settle_publish_success),b.addTrace(Xs.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(Qc.session_approve_publish_failure),C}),b.addTrace(Xs.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(E,Bt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(E),C}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(E,gn(Uu)),{topic:E,acknowledged:()=>Promise.resolve(this.client.session.get(E))}}),te(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:xn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),te(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=sl(),c=Li(),l=El().toString(),u=this.client.session.get(r).namespaces;return this.events.once(ft("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),te(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Li(),{done:i,resolve:o,reject:a}=sl();return this.events.once(ft("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,gn(Uu)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),te(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:r,request:s,topic:i,expiry:o=xn.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Ut.relay&&await this.confirmOnlineStateOrThrow();const c=Li(),l=El().toString(),{done:u,resolve:d,reject:h}=sl(o,"Request expired. Please try again.");this.events.once(ft("session_request",c),({error:w,result:y})=>{w?h(w):d(y)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:$r(Dt({},s),{expiryTimestamp:gn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:$r(Dt({},s),{expiryTimestamp:gn(o)}),chainId:r};return await Promise.all([new Promise(async w=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),w()}),new Promise(async w=>{var y;if(!((y=a.sessionConfig)!=null&&y.disableDeepLink)){const b=await Kae(this.client.core.storage,Mk);await Hae({id:c,topic:i,wcDeepLink:b})}w()}),u()]).then(w=>w[2])}),te(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Ut.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Mi(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ds(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),te(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Li(),i=El().toString(),{done:o,resolve:a,reject:c}=sl();this.events.once(ft("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),te(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=El().toString(),a=Li();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),te(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Bt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=ae("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),te(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>nde(r,n)))),te(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),te(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Ut.link_mode:Ut.relay;o===Ut.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const _=await this.client.core.crypto.generateKeyPair(),E=cw(_);if(await Promise.all([this.client.auth.authKeys.set(uw,{responseTopic:E,publicKey:_}),this.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:b})]),await this.client.core.relayer.subscribe(E,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:k}=Pd(a[0]);let U=lle(k,"request",g);aw(y)&&(U=dle(U,y.pop())),y.push(U)}const x=w&&w>xn.wc_sessionAuthenticate.req.ttl?w:xn.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:gn(x)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},C={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:gn(xn.wc_sessionPropose.req.ttl),id:Li()},{done:O,resolve:R,reject:B}=sl(x,"Request expired"),W=Li(),M=ft("session_connect",C.id),I=ft("session_request",W),A=async({error:k,session:U})=>{this.events.off(I,j),k?B(k):U&&R({session:U})},j=async k=>{var U,z,V;if(await this.deletePendingAuthRequest(W,{message:"fulfilled",code:0}),k.error){const $e=Bt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===$e.code?void 0:(this.events.off(M,A),B(k.error.message))}await this.deleteProposal(C.id),this.events.off(M,A);const{cacaos:Q,responder:Y}=k.result,Z=[],se=[];for(const $e of Q){await PP({cacao:$e,projectId:this.client.core.projectId})||(this.client.logger.error($e,"Signature verification failed"),B(Bt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ke}=$e,Yt=aw(Ke.resources),As=[WC(Ke.iss)],st=u0(Ke.iss);if(Yt){const Le=kP(Yt),Rt=OP(Yt);Z.push(...Le),As.push(...Rt)}for(const Le of As)se.push(`${Le}:${st}`)}const Ne=await this.client.core.crypto.generateSharedKey(_,Y.publicKey);let ke;Z.length>0&&(ke={topic:Ne,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:Y,controller:Y.publicKey,expiry:gn(Uu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:nk([...new Set(Z)],[...new Set(se)]),transportType:o},await this.client.core.relayer.subscribe(Ne,{transportType:o}),await this.client.session.set(Ne,ke),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:Y.metadata}),ke=this.client.session.get(Ne)),(U=this.client.metadata.redirect)!=null&&U.linkMode&&(z=Y.metadata.redirect)!=null&&z.linkMode&&(V=Y.metadata.redirect)!=null&&V.universal&&r&&(this.client.core.addLinkModeSupportedApp(Y.metadata.redirect.universal),this.client.session.update(Ne,{transportType:Ut.link_mode})),R({auths:Q,session:ke})};this.events.once(M,A),this.events.once(I,j);let P;try{if(i){const k=sc("wc_sessionAuthenticate",S,W);this.client.core.history.set(b,k);const U=await this.client.core.crypto.encode("",k,{type:gm,encoding:Ma});P=Cy(r,b,U)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:S,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:W}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:C,expiry:xn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch(k){throw this.events.off(M,A),this.events.off(I,j),k}return await this.setProposal(C.id,C),await this.setAuthRequest(W,{request:$r(Dt({},S),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:P??v,response:O}}),te(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Zc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(mf.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(mf.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Ut.relay;a===Ut.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=cw(c),d={type:Lo,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await PP({cacao:w,projectId:this.client.core.projectId})){i.setError(mf.invalid_cacao);const E=Bt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:E,encodeOpts:d}),new Error(E.message)}i.addTrace(Zc.cacaos_verified);const{p:y}=w,b=aw(y.resources),v=[WC(y.iss)],_=u0(y.iss);if(b){const E=kP(b),x=OP(b);h.push(...E),v.push(...x)}for(const E of v)f.push(`${E}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Zc.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:gn(Uu),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:nk([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Zc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(mf.subscribe_authenticated_session_topic_failure),w}i.addTrace(Zc.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Zc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Zc.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(mf.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),te(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Ut.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=cw(o),l={type:Lo,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:xn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),te(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return Bj(r,s)}),te(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),te(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),te(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Bt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Mk).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Bt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Di.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),te(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Qc.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Bt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),te(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Di.idle,this.client.events.emit("session_request_expire",{id:n}))}),te(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),te(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),te(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,gn(xn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),te(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Ut.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),te(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||gn(xn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),te(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=sc(s,i,c);let f;const p=!!u;try{const y=p?Ma:mi;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(mme.includes(s)){const y=Hi(JSON.stringify(h)),b=Hi(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=xn[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=Cy(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=xn[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=$r(Dt({},d),{correlationId:h.id}),l?(y.internal=$r(Dt({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),te(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=jv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Ma:mi;u=await this.client.core.crypto.encode(s,l,$r(Dt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Cy(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=xn[p].res;g.tvf=$r(Dt({},f),{correlationId:r}),o?(g.internal=$r(Dt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),te(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=Uv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Ma:mi;u=await this.client.core.crypto.encode(s,l,$r(Dt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Cy(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||xn[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),te(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Oa(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Oa(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),te(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),te(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),te(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Di.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Di.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Di.idle}),te(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),te(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),te(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=ae("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),te(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),te(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(_o.proposal_listener_not_found)),this.isValidConnect(Dt({},s.params));const u=a.expiryTimestamp||gn(xn.wc_sessionPropose.req.ttl),d=Dt({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Hi(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(ji.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:xn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),te(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Mi(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ds(r)){await this.deleteProposal(i);const o=ft("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),te(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=$r(Dt(Dt(Dt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Ut.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(ft("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),te(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Mi(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(ft("session_approve",s),{})):Ds(r)&&(await this.client.session.delete(n,Bt("USER_DISCONNECTED")),this.events.emit(ft("session_approve",s),{error:r.error}))}),te(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=pf.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Bt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Dt({topic:n},s));try{pf.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw pf.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),te(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),te(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=ft("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Mi(r)?this.events.emit(ft("session_update",s),{}):Ds(r)&&this.events.emit(ft("session_update",s),{error:r.error})}),te(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,gn(Uu)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),te(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=ft("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Mi(r)?this.events.emit(ft("session_extend",s),{}):Ds(r)&&this.events.emit(ft("session_extend",s),{error:r.error})}),te(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),te(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=ft("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Mi(r)?this.events.emit(ft("session_ping",s),{}):Ds(r)&&this.events.emit(ft("session_ping",s),{error:r.error})},500)}),te(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Tn.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Bt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),te(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Dt({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Hi(JSON.stringify(sc("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Ut.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),te(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=ft("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Mi(r)?this.events.emit(ft("session_request",s),{result:r.result}):Ds(r)&&this.events.emit(ft("session_request",s),{error:r.error})}),te(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=pf.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Dt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),pf.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),te(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Mi(r)?this.events.emit(ft("session_request",s),{result:r.result}):Ds(r)&&this.events.emit(ft("session_request",s),{error:r.error})}),te(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Hi(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Ut.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Lo,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:xn.wc_sessionAuthenticate.autoReject,appLink:h})}}),te(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),te(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Di.idle,this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay))}),te(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=ft("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(ft("session_request",i.request.id),{error:r})})}),te(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Di.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Di.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),te(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),te(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:sc("wc_sessionPropose",$r(Dt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),te(this,"isValidConnect",async n=>{if(!Lr(n)){const{message:l}=ae("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(zn(r)||await this.isValidPairingTopic(r),!pde(c)){const{message:l}=ae("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!zn(s)&&Ec(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!zn(i)&&Ec(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),zn(o)||this.validateSessionProps(o,"sessionProperties"),!zn(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),te(this,"validateNamespaces",(n,r)=>{const s=fde(n,"connect()",r);if(s)throw new Error(s.message)}),te(this,"isValidApprove",async n=>{if(!Lr(n))throw new Error(ae("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=Y1(s,"approve()");if(l)throw new Error(l.message);const u=ik(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!un(i,!0)){const{message:d}=ae("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(zn(o)||this.validateSessionProps(o,"sessionProperties"),!zn(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),te(this,"isValidReject",async n=>{if(!Lr(n)){const{message:i}=ae("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!mde(s)){const{message:i}=ae("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),te(this,"isValidSessionSettleRequest",n=>{if(!Lr(n)){const{message:l}=ae("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!y4(r)){const{message:l}=ae("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=ade(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Y1(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Oa(o)){const{message:l}=ae("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),te(this,"isValidUpdate",async n=>{if(!Lr(n)){const{message:c}=ae("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=Y1(s,"update()");if(o)throw new Error(o.message);const a=ik(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),te(this,"isValidExtend",async n=>{if(!Lr(n)){const{message:s}=ae("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),te(this,"isValidRequest",async n=>{if(!Lr(n)){const{message:c}=ae("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!sk(a,i)){const{message:c}=ae("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!yde(s)){const{message:c}=ae("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!bde(a,i,s.method)){const{message:c}=ae("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!xde(o,nE)){const{message:c}=ae("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${nE.min} and ${nE.max}`);throw new Error(c)}}),te(this,"isValidRespond",async n=>{var r;if(!Lr(n)){const{message:o}=ae("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!wde(i)){const{message:o}=ae("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),te(this,"isValidPing",async n=>{if(!Lr(n)){const{message:s}=ae("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),te(this,"isValidEmit",async n=>{if(!Lr(n)){const{message:a}=ae("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!sk(o,i)){const{message:a}=ae("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!vde(s)){const{message:a}=ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Ede(o,i,s.name)){const{message:a}=ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),te(this,"isValidDisconnect",async n=>{if(!Lr(n)){const{message:s}=ae("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),te(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!un(s,!1))throw new Error("uri is required parameter");if(!un(i,!1))throw new Error("domain is required parameter");if(!un(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Pd(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Pd(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),te(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||cp,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Ut.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),te(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=ae("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),te(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),te(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),te(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=ae("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),te(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Ut.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),te(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),te(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=wP(n,"topic")||"",s=decodeURIComponent(wP(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Ut.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),te(this,"registerLinkModeListeners",async()=>{var n;if(zA()||Fc()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),te(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),te(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),te(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=pme[i];if(i==="sui_signTransaction")return[Gce(r.transactionBytes)];if(i==="near_signTransaction")return[AP(r)];if(i==="near_signTransactions")return r.map(c=>AP(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Mde({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Mo(r)?r.map(c=>IP(c)):[IP(r)];if(i==="cosmos_signDirect")return[Yce(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Mo(a))return i==="solana_signAllTransactions"?a.map(c=>Vce(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Tn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(uw)?this.client.auth.authKeys.get(uw):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Ut.link_mode?Ma:mi});rI(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Hi(r)})):Lv(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Rs.expired,async e=>{const{topic:n,id:r}=Sj(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ae("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ae("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(cl.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(cl.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!un(e,!1)){const{message:n}=ae("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Oa(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ae("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!un(e,!1)){const{message:n}=ae("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ae("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Oa(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ae("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ae("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(un(e,!1)){const{message:n}=ae("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ae("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!gde(e)){const{message:n}=ae("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ae("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Oa(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ae("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class Tme extends bu{constructor(e,n){super(e,n,dme,sI),this.core=e,this.logger=n}}let Nme=class extends bu{constructor(e,n){super(e,n,hme,sI),this.core=e,this.logger=n}};class Pme extends bu{constructor(e,n){super(e,n,gme,sI,r=>r.id),this.core=e,this.logger=n}}class kme extends bu{constructor(e,n){super(e,n,vme,Bv,()=>uw),this.core=e,this.logger=n}}class Ome extends bu{constructor(e,n){super(e,n,bme,Bv),this.core=e,this.logger=n}}class Rme extends bu{constructor(e,n){super(e,n,Eme,Bv,r=>r.id),this.core=e,this.logger=n}}var $me=Object.defineProperty,Dme=(t,e,n)=>e in t?$me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rE=(t,e,n)=>Dme(t,typeof e!="symbol"?e+"":e,n);class jme{constructor(e,n){this.core=e,this.logger=n,rE(this,"authKeys"),rE(this,"pairingTopics"),rE(this,"requests"),this.authKeys=new kme(this.core,this.logger),this.pairingTopics=new Ome(this.core,this.logger),this.requests=new Rme(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Ume=Object.defineProperty,Lme=(t,e,n)=>e in t?Ume(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ze=(t,e,n)=>Lme(t,typeof e!="symbol"?e+"":e,n);let Mme=class H4 extends qte{constructor(e){super(e),Ze(this,"protocol",z4),Ze(this,"version",W4),Ze(this,"name",tE.name),Ze(this,"metadata"),Ze(this,"core"),Ze(this,"logger"),Ze(this,"events",new Gs.EventEmitter),Ze(this,"engine"),Ze(this,"session"),Ze(this,"proposal"),Ze(this,"pendingRequest"),Ze(this,"auth"),Ze(this,"signConfig"),Ze(this,"on",(r,s)=>this.events.on(r,s)),Ze(this,"once",(r,s)=>this.events.once(r,s)),Ze(this,"off",(r,s)=>this.events.off(r,s)),Ze(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Ze(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Ze(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Ze(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Ze(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||tE.name,this.metadata=Mae(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:cm(Sh({level:(e==null?void 0:e.logger)||tE.logger}));this.core=(e==null?void 0:e.core)||new ume(e),this.logger=dr(n,this.name),this.session=new Nme(this.core,this.logger),this.proposal=new Tme(this.core,this.logger),this.pendingRequest=new Pme(this.core,this.logger),this.engine=new Ime(this),this.auth=new jme(this.core,this.logger)}static async init(e){const n=new H4(e);return await n.initialize(),n}get context(){return ts(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},oe.toMiliseconds(oe.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var gx={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof en<"u"&&en,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof en<"u"&&en||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var A={next:function(){var j=I.shift();return{done:j===void 0,value:j}}};return c.iterable&&(A[Symbol.iterator]=function(){return A}),A}function g(I){this.map={},I instanceof g?I.forEach(function(A,j){this.append(j,A)},this):Array.isArray(I)?I.forEach(function(A){if(A.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+A.length);this.append(A[0],A[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(A){this.append(A,I[A])},this)}g.prototype.append=function(I,A){I=h(I),A=f(A);var j=this.map[I];this.map[I]=j?j+", "+A:A},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,A){this.map[h(I)]=f(A)},g.prototype.forEach=function(I,A){for(var j in this.map)this.map.hasOwnProperty(j)&&I.call(A,this.map[j],j,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(A,j){I.push(j)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(A){I.push(A)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(A,j){I.push([j,A])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function y(I){return new Promise(function(A,j){I.onload=function(){A(I.result)},I.onerror=function(){j(I.error)}})}function b(I){var A=new FileReader,j=y(A);return A.readAsArrayBuffer(I),j}function v(I){var A=new FileReader,j=y(A),P=/charset=([A-Za-z0-9_-]+)/.exec(I.type),k=P?P[1]:"utf-8";return A.readAsText(I,k),j}function _(I){for(var A=new Uint8Array(I),j=new Array(A.length),P=0;P<A.length;P++)j[P]=String.fromCharCode(A[P]);return j.join("")}function E(I){if(I.slice)return I.slice(0);var A=new Uint8Array(I.byteLength);return A.set(new Uint8Array(I)),A.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=E(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=E(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=w(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(I){var A=I.toUpperCase();return S.indexOf(A)>-1?A:I}function C(I,A){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');A=A||{};var j=A.body;if(I instanceof C){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,A.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!j&&I._bodyInit!=null&&(j=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new g(A.headers)),this.method=T(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal||function(){if("AbortController"in a){var U=new AbortController;return U.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(j),(this.method==="GET"||this.method==="HEAD")&&(A.cache==="no-store"||A.cache==="no-cache")){var P=/([?&])_=[^&]*/;if(P.test(this.url))this.url=this.url.replace(P,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function O(I){var A=new FormData;return I.trim().split("&").forEach(function(j){if(j){var P=j.split("="),k=P.shift().replace(/\+/g," "),U=P.join("=").replace(/\+/g," ");A.append(decodeURIComponent(k),decodeURIComponent(U))}}),A}function R(I){var A=new g,j=I.replace(/\r?\n[\t ]+/g," ");return j.split("\r").map(function(P){return P.indexOf(`
`)===0?P.substr(1,P.length):P}).forEach(function(P){var k=P.split(":"),U=k.shift().trim();if(U){var z=k.join(":").trim();try{A.append(U,z)}catch(V){console.warn("Response "+V.message)}}}),A}x.call(C.prototype);function B(I,A){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=A.statusText===void 0?"":""+A.statusText,this.headers=new g(A.headers),this.url=A.url||"",this._initBody(I)}x.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var I=new B(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var W=[301,302,303,307,308];B.redirect=function(I,A){if(W.indexOf(A)===-1)throw new RangeError("Invalid status code");return new B(null,{status:A,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(A,j){this.message=A,this.name=j;var P=Error(A);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function M(I,A){return new Promise(function(j,P){var k=new C(I,A);if(k.signal&&k.signal.aborted)return P(new o.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function z(){U.abort()}U.onload=function(){var Y={statusText:U.statusText,headers:R(U.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(U.status<200||U.status>599)?Y.status=200:Y.status=U.status,Y.url="responseURL"in U?U.responseURL:Y.headers.get("X-Request-URL");var Z="response"in U?U.response:U.responseText;setTimeout(function(){j(new B(Z,Y))},0)},U.onerror=function(){setTimeout(function(){P(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){P(new TypeError("Network request timed out"))},0)},U.onabort=function(){setTimeout(function(){P(new o.DOMException("Aborted","AbortError"))},0)};function V(Y){try{return Y===""&&a.location.href?a.location.href:Y}catch{return Y}}if(U.open(k.method,V(k.url),!0),k.credentials==="include"?U.withCredentials=!0:k.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(c.blob?U.responseType="blob":c.arrayBuffer&&(U.responseType="arraybuffer")),A&&typeof A.headers=="object"&&!(A.headers instanceof g||a.Headers&&A.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(A.headers).forEach(function(Y){Q.push(h(Y)),U.setRequestHeader(Y,f(A.headers[Y]))}),k.headers.forEach(function(Y,Z){Q.indexOf(Z)===-1&&U.setRequestHeader(Z,Y)})}else k.headers.forEach(function(Y,Z){U.setRequestHeader(Z,Y)});k.signal&&(k.signal.addEventListener("abort",z),U.onreadystatechange=function(){U.readyState===4&&k.signal.removeEventListener("abort",z)}),U.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return M.polyfill=!0,a.fetch||(a.fetch=M,a.Headers=g,a.Request=C,a.Response=B),o.Headers=g,o.Request=C,o.Response=B,o.fetch=M,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(gx,gx.exports);var Bme=gx.exports;const zk=cu(Bme);var Fme=Object.defineProperty,zme=Object.defineProperties,Wme=Object.getOwnPropertyDescriptors,Wk=Object.getOwnPropertySymbols,qme=Object.prototype.hasOwnProperty,Hme=Object.prototype.propertyIsEnumerable,qk=(t,e,n)=>e in t?Fme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hk=(t,e)=>{for(var n in e||(e={}))qme.call(e,n)&&qk(t,n,e[n]);if(Wk)for(var n of Wk(e))Hme.call(e,n)&&qk(t,n,e[n]);return t},Vk=(t,e)=>zme(t,Wme(e));const Vme={Accept:"application/json","Content-Type":"application/json"},Gme="POST",Gk={headers:Vme,method:Gme},Kk=10;let Ti=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Gs.EventEmitter,this.isAvailable=!1,this.registering=!1,!dk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Yo(e),r=await(await zk(this.url,Vk(Hk({},Gk),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!dk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Yo({id:1,jsonrpc:"2.0",method:"test",params:[]});await zk(e,Vk(Hk({},Gk),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Xl(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Uv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return b4(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Kk&&this.events.setMaxListeners(Kk)}};const Yk="error",Kme="wss://relay.walletconnect.org",Yme="wc",Jme="universal_provider",Sy=`${Yme}@2:${Jme}:`,V4="https://rpc.walletconnect.org/v1/",td="generic",Qme=`${V4}bundler`,Ys={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function iI(t){return t==null||typeof t!="object"&&typeof t!="function"}function G4(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function K4(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Zme="[object RegExp]",Y4="[object String]",J4="[object Number]",Q4="[object Boolean]",Z4="[object Arguments]",Xme="[object Symbol]",eye="[object Date]",tye="[object Map]",nye="[object Set]",rye="[object Array]",sye="[object ArrayBuffer]",iye="[object Object]",oye="[object DataView]",aye="[object Uint8Array]",cye="[object Uint8ClampedArray]",lye="[object Uint16Array]",uye="[object Uint32Array]",dye="[object Int8Array]",hye="[object Int16Array]",fye="[object Int32Array]",pye="[object Float32Array]",gye="[object Float64Array]";function oI(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mye(t,e){return vd(t,void 0,t,new Map,e)}function vd(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(iI(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=vd(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,vd(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(vd(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(oI(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=vd(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),ll(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),ll(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),ll(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ll(o,t,n,r,s),o}if(typeof t=="object"&&yye(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),ll(o,t,n,r,s),o}return t}function ll(t,e,n=t,r,s){const i=[...Object.keys(e),...G4(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=vd(e[a],a,n,r,s))}}function yye(t){switch(K4(t)){case Z4:case rye:case sye:case oye:case Q4:case eye:case pye:case gye:case dye:case hye:case fye:case tye:case J4:case iye:case Zme:case nye:case Y4:case Xme:case aye:case cye:case lye:case uye:return!0;default:return!1}}function wye(t,e){return mye(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case J4:case Y4:case Q4:{const o=new t.constructor(t==null?void 0:t.valueOf());return ll(o,t),o}case Z4:{const o={};return ll(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Jk(t){return wye(t)}function Qk(t){return t!==null&&typeof t=="object"&&K4(t)==="[object Arguments]"}function Zk(t){return typeof t=="object"&&t!==null}function vye(){}function bye(t){return oI(t)}function Eye(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function _ye(t){if(iI(t))return t;if(Array.isArray(t)||oI(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Cye(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=mx(s,o,r,new Map)}return s}function mx(t,e,n,r){if(iI(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return _ye(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...G4(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Qk(a)&&(a={...a}),Qk(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Jk(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Zk(c)&&Zk(a)?t[o]=mx(c,a,n,r):c==null&&Eye(a)?t[o]=mx({},a,n,r):c==null&&bye(a)?t[o]=Jk(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function xye(t,...e){return Cye(t,...e,vye)}var Sye=Object.defineProperty,Aye=Object.defineProperties,Iye=Object.getOwnPropertyDescriptors,Xk=Object.getOwnPropertySymbols,Tye=Object.prototype.hasOwnProperty,Nye=Object.prototype.propertyIsEnumerable,eO=(t,e,n)=>e in t?Sye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ay=(t,e)=>{for(var n in e||(e={}))Tye.call(e,n)&&eO(t,n,e[n]);if(Xk)for(var n of Xk(e))Nye.call(e,n)&&eO(t,n,e[n]);return t},Pye=(t,e)=>Aye(t,Iye(e));function bs(t,e,n){var r;const s=Pd(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${V4}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Eu(t){return t.includes(":")?t.split(":")[1]:t}function X4(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function kye(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Iy(t={},e={}){const n=tO(t),r=tO(e);return xye(n,r)}function tO(t){var e,n,r,s,i;const o={};if(!Ec(t))return o;for(const[a,c]of Object.entries(t)){const l=Dv(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=wd(a);o[f]=Pye(Ay(Ay({},o[f]),c),{chains:eo(l,(e=o[f])==null?void 0:e.chains),methods:eo(u,(n=o[f])==null?void 0:n.methods),events:eo(d,(r=o[f])==null?void 0:r.events)}),(Ec(h)||Ec(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Ay(Ay({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function nO(t){return t.includes(":")?t.split(":")[2]:t}function rO(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=Dv(n)?[n]:r.chains?r.chains:X4(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function sE(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const eU={},ut=t=>eU[t],iE=(t,e)=>{eU[t]=e};var Oye=Object.defineProperty,Rye=(t,e,n)=>e in t?Oye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lu=(t,e,n)=>Rye(t,typeof e!="symbol"?e+"":e,n);class $ye{constructor(e){Lu(this,"name","polkadot"),Lu(this,"client"),Lu(this,"httpProviders"),Lu(this,"events"),Lu(this,"namespace"),Lu(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Eu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||bs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ks(new Ti(r,ut("disableProviderPing")))}}var Dye=Object.defineProperty,jye=Object.defineProperties,Uye=Object.getOwnPropertyDescriptors,sO=Object.getOwnPropertySymbols,Lye=Object.prototype.hasOwnProperty,Mye=Object.prototype.propertyIsEnumerable,yx=(t,e,n)=>e in t?Dye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iO=(t,e)=>{for(var n in e||(e={}))Lye.call(e,n)&&yx(t,n,e[n]);if(sO)for(var n of sO(e))Mye.call(e,n)&&yx(t,n,e[n]);return t},oO=(t,e)=>jye(t,Uye(e)),Mu=(t,e,n)=>yx(t,typeof e!="symbol"?e+"":e,n);class Bye{constructor(e){Mu(this,"name","eip155"),Mu(this,"client"),Mu(this,"chainId"),Mu(this,"namespace"),Mu(this,"httpProviders"),Mu(this,"events"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||bs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ks(new Ti(r,ut("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Eu(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:oO(iO({},u.sessionProperties||{}),{capabilities:oO(iO({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(sc("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${Qme}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var Fye=Object.defineProperty,zye=(t,e,n)=>e in t?Fye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bu=(t,e,n)=>zye(t,typeof e!="symbol"?e+"":e,n);class Wye{constructor(e){Bu(this,"name","solana"),Bu(this,"client"),Bu(this,"httpProviders"),Bu(this,"events"),Bu(this,"namespace"),Bu(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Eu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||bs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ks(new Ti(r,ut("disableProviderPing")))}}var qye=Object.defineProperty,Hye=(t,e,n)=>e in t?qye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fu=(t,e,n)=>Hye(t,typeof e!="symbol"?e+"":e,n);class Vye{constructor(e){Fu(this,"name","cosmos"),Fu(this,"client"),Fu(this,"httpProviders"),Fu(this,"events"),Fu(this,"namespace"),Fu(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Eu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||bs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ks(new Ti(r,ut("disableProviderPing")))}}var Gye=Object.defineProperty,Kye=(t,e,n)=>e in t?Gye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zu=(t,e,n)=>Kye(t,typeof e!="symbol"?e+"":e,n);class Yye{constructor(e){zu(this,"name","algorand"),zu(this,"client"),zu(this,"httpProviders"),zu(this,"events"),zu(this,"namespace"),zu(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||bs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||bs(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ks(new Ti(r,ut("disableProviderPing")))}}var Jye=Object.defineProperty,Qye=(t,e,n)=>e in t?Jye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wu=(t,e,n)=>Qye(t,typeof e!="symbol"?e+"":e,n);class Zye{constructor(e){Wu(this,"name","cip34"),Wu(this,"client"),Wu(this,"httpProviders"),Wu(this,"events"),Wu(this,"namespace"),Wu(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Eu(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ks(new Ti(r,ut("disableProviderPing")))}}var Xye=Object.defineProperty,ewe=(t,e,n)=>e in t?Xye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qu=(t,e,n)=>ewe(t,typeof e!="symbol"?e+"":e,n);class twe{constructor(e){qu(this,"name","elrond"),qu(this,"client"),qu(this,"httpProviders"),qu(this,"events"),qu(this,"namespace"),qu(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Eu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||bs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ks(new Ti(r,ut("disableProviderPing")))}}var nwe=Object.defineProperty,rwe=(t,e,n)=>e in t?nwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hu=(t,e,n)=>rwe(t,typeof e!="symbol"?e+"":e,n);class swe{constructor(e){Hu(this,"name","multiversx"),Hu(this,"client"),Hu(this,"httpProviders"),Hu(this,"events"),Hu(this,"namespace"),Hu(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Eu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||bs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ks(new Ti(r,ut("disableProviderPing")))}}var iwe=Object.defineProperty,owe=(t,e,n)=>e in t?iwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vu=(t,e,n)=>owe(t,typeof e!="symbol"?e+"":e,n);class awe{constructor(e){Vu(this,"name","near"),Vu(this,"client"),Vu(this,"httpProviders"),Vu(this,"events"),Vu(this,"namespace"),Vu(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||bs(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||bs(e,this.namespace);return typeof r>"u"?void 0:new Ks(new Ti(r,ut("disableProviderPing")))}}var cwe=Object.defineProperty,lwe=(t,e,n)=>e in t?cwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gu=(t,e,n)=>lwe(t,typeof e!="symbol"?e+"":e,n);class uwe{constructor(e){Gu(this,"name","tezos"),Gu(this,"client"),Gu(this,"httpProviders"),Gu(this,"events"),Gu(this,"namespace"),Gu(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||bs(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||bs(e,this.namespace);return typeof r>"u"?void 0:new Ks(new Ti(r))}}var dwe=Object.defineProperty,hwe=(t,e,n)=>e in t?dwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ku=(t,e,n)=>hwe(t,typeof e!="symbol"?e+"":e,n);class fwe{constructor(e){Ku(this,"name",td),Ku(this,"client"),Ku(this,"httpProviders"),Ku(this,"events"),Ku(this,"namespace"),Ku(this,"chainId"),this.namespace=e.namespace,this.events=ut("events"),this.client=ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ys.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Pd(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||bs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ks(new Ti(r,ut("disableProviderPing")))}}var pwe=Object.defineProperty,gwe=Object.defineProperties,mwe=Object.getOwnPropertyDescriptors,aO=Object.getOwnPropertySymbols,ywe=Object.prototype.hasOwnProperty,wwe=Object.prototype.propertyIsEnumerable,wx=(t,e,n)=>e in t?pwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ty=(t,e)=>{for(var n in e||(e={}))ywe.call(e,n)&&wx(t,n,e[n]);if(aO)for(var n of aO(e))wwe.call(e,n)&&wx(t,n,e[n]);return t},oE=(t,e)=>gwe(t,mwe(e)),Ps=(t,e,n)=>wx(t,typeof e!="symbol"?e+"":e,n);let vwe=class tU{constructor(e){Ps(this,"client"),Ps(this,"namespaces"),Ps(this,"optionalNamespaces"),Ps(this,"sessionProperties"),Ps(this,"scopedProperties"),Ps(this,"events",new SA),Ps(this,"rpcProviders",{}),Ps(this,"session"),Ps(this,"providerOpts"),Ps(this,"logger"),Ps(this,"uri"),Ps(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:cm(Sh({level:(e==null?void 0:e.logger)||Yk})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new tU(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ty({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,jv(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Bt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=rO(this.session.namespaces);this.namespaces=Iy(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=rO(s.namespaces);return this.namespaces=Iy(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===td?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Mo(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Mme.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Yk,relayUrl:this.providerOpts.relayUrl||Kme,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>wd(n)))];iE("client",this.client),iE("events",this.events),iE("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=kye(n,this.session),s=X4(r),i=Iy(this.namespaces,this.optionalNamespaces),o=oE(Ty({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new Bye({namespace:o});break;case"algorand":this.rpcProviders[n]=new Yye({namespace:o});break;case"solana":this.rpcProviders[n]=new Wye({namespace:o});break;case"cosmos":this.rpcProviders[n]=new Vye({namespace:o});break;case"polkadot":this.rpcProviders[n]=new $ye({namespace:o});break;case"cip34":this.rpcProviders[n]=new Zye({namespace:o});break;case"elrond":this.rpcProviders[n]=new twe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new swe({namespace:o});break;case"near":this.rpcProviders[n]=new awe({namespace:o});break;case"tezos":this.rpcProviders[n]=new uwe({namespace:o});break;default:this.rpcProviders[td]?this.rpcProviders[td].updateNamespace(o):this.rpcProviders[td]=new fwe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Mo(o)&&this.events.emit("accountsChanged",o.map(nO))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=wd(o),l=sE(o)!==sE(a)?`${c}:${sE(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=oE(Ty({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",oE(Ty({},Bt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Ys.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[td]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Iy(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>wd(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=wd(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(nO);if(!Mo(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Sy}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Sy}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Sy}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Sy)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const up={getSIWX(){return ne.state.siwx},async initializeIfEnabled(){var i;const t=ne.state.siwx,e=$.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if($.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await pt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),wt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ve._getClient())==null?void 0:i.disconnect().catch(console.error)),Pe.reset("Connect"),gi.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ne.state.siwx,e=Ce.getPlainAddress($.getActiveCaipAddress()),n=$.getActiveCaipNetwork(),r=ve._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();ue.getConnectorId(n.chainNamespace)===X.CONNECTOR_ID.AUTH&&Pe.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),$.setLastConnectedSIWECaipNetwork(n),pt.close(),wt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!pt.state.open||Pe.state.view==="ApproveTransaction")&&await pt.open({view:"SIWXSignMessage"}),i.isSmartAccount?gi.showError("This application might not support Smart Accounts"):gi.showError("Signature declined"),wt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=$.getLastConnectedSIWECaipNetwork();r?$.switchActiveNetwork(r):await ve.disconnect()}else pt.close();Pe.reset("Connect"),wt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=$.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Ce.getPlainAddress($.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=ne.state.siwx,e=Ce.getPlainAddress($.getActiveCaipAddress()),n=$.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Pe.state.view==="ApproveTransaction",r=Pe.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=up.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=$.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(gi.showLoading("Authenticating...",{autoClose:!1}),ce.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),wt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:up.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),wt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:up.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{gi.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=$.state.activeChain;return{network:((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=ce.state.preferredAccountTypes)==null?void 0:n[t])===On.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Lt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},ic={ConnectorExplorerIds:{[X.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[X.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[X.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Lt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Lt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Lt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Lt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Lt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Lt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Lt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Lt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Lt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Lt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Lt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[X.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[X.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[X.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[X.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[X.CONNECTOR_ID.INJECTED]:"Browser Wallet",[X.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[X.CONNECTOR_ID.COINBASE]:"Coinbase",[X.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[X.CONNECTOR_ID.LEDGER]:"Ledger",[X.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[X.CONNECTOR_ID.INJECTED]:"INJECTED",[X.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[X.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[X.CONNECTOR_ID.AUTH]:"AUTH"}},bg={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Lt.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=$.state.activeChain;return X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ue.getConnectorId(e)===X.CONNECTOR_ID.AUTH&&e===t)}},bwe=new AbortController,Wt={EmbeddedWalletAbortController:bwe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Ewe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function Ewe(){return typeof window<"u"}const _we={createLogger(t,e="error"){const n=Sh({level:e}),{logger:r}=IA({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},Cwe="rpc.walletconnect.org";function cO(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const aE=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ki={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Cwe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:X.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${X.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return aE.includes(e)?cO(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:ic.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ki.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ym(a.url,a.config))}),aE.includes(t.caipNetworkId)&&r.push(Ym(cO(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ym(a))}),cT(r)},extendWagmiTransports(t,e,n){if(aE.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return cT([n,Ym(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:X.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=le.getActiveCaipNetworkId(),n=$.getAllRequestedCaipNetworks(),r=Array.from(((c=$.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},g0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Dr=Ot({providers:{...g0},providerIds:{...g0}}),Ct={state:Dr,subscribeKey(t,e){return Gn(Dr,t,e)},subscribe(t){return Vn(Dr,()=>{t(Dr)})},subscribeProviders(t){return Vn(Dr.providers,()=>t(Dr.providers))},setProvider(t,e){e&&(Dr.providers[t]=Ql(e))},getProvider(t){return Dr.providers[t]},setProviderId(t,e){e&&(Dr.providerIds[t]=e)},getProviderId(t){if(t)return Dr.providerIds[t]},reset(){Dr.providers={...g0},Dr.providerIds={...g0}},resetChain(t){Dr.providers[t]=void 0,Dr.providerIds[t]=void 0}},lO={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Bn={set(t,e){hs.isClient&&localStorage.setItem(`${Ee.STORAGE_KEY}${t}`,e)},get(t){return hs.isClient?localStorage.getItem(`${Ee.STORAGE_KEY}${t}`):null},delete(t,e){hs.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ee.STORAGE_KEY}${t}`))}},Ny=30*1e3,hs={checkIfAllowedToTriggerEmail(){const t=Bn.get(Ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ny){const n=Math.ceil((Ny-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Bn.get(Ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ny)return Math.ceil((Ny-e)/1e3)}return 0},checkIfRequestExists(t){return On.NOT_SAFE_RPC_METHODS.includes(t.method)||On.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(lO.transactionHash))||(t==null?void 0:t.match(lO.signedMessage)))?Ee.RPC_RESPONSE_TYPE_TX:Ee.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return On.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var lt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(lt||(lt={}));var vx;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(vx||(vx={}));const ge=lt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ba=t=>{switch(typeof t){case"undefined":return ge.undefined;case"string":return ge.string;case"number":return isNaN(t)?ge.nan:ge.number;case"boolean":return ge.boolean;case"function":return ge.function;case"bigint":return ge.bigint;case"symbol":return ge.symbol;case"object":return Array.isArray(t)?ge.array:t===null?ge.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ge.promise:typeof Map<"u"&&t instanceof Map?ge.map:typeof Set<"u"&&t instanceof Set?ge.set:typeof Date<"u"&&t instanceof Date?ge.date:ge.object;default:return ge.unknown}},ie=lt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xwe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ei extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,lt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ei.create=t=>new Ei(t);const Eg=(t,e)=>{let n;switch(t.code){case ie.invalid_type:t.received===ge.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,lt.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:n=`Unrecognized key(s) in object: ${lt.joinValues(t.keys,", ")}`;break;case ie.invalid_union:n="Invalid input";break;case ie.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${lt.joinValues(t.options)}`;break;case ie.invalid_enum_value:n=`Invalid enum value. Expected ${lt.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:n="Invalid function arguments";break;case ie.invalid_return_type:n="Invalid function return type";break;case ie.invalid_date:n="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:lt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ie.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ie.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ie.custom:n="Invalid input";break;case ie.invalid_intersection_types:n="Intersection results could not be merged";break;case ie.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:n="Number must be finite";break;default:n=e.defaultError,lt.assertNever(t)}return{message:n}};let nU=Eg;function Swe(t){nU=t}function m0(){return nU}const y0=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},Awe=[];function be(t,e){const n=y0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,m0(),Eg].filter(r=>!!r)});t.common.issues.push(n)}class ur{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Me;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ur.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Me;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Me=Object.freeze({status:"aborted"}),rU=t=>({status:"dirty",value:t}),xr=t=>({status:"valid",value:t}),bx=t=>t.status==="aborted",Ex=t=>t.status==="dirty",_g=t=>t.status==="valid",w0=t=>typeof Promise<"u"&&t instanceof Promise;var Ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ae||(Ae={}));class so{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const uO=(t,e)=>{if(_g(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ei(t.common.issues);return this._error=n,this._error}}};function qe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ge{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ba(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ba(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ur,ctx:{common:e.parent.common,data:e.data,parsedType:Ba(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(w0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ba(e)},i=this._parseSync({data:e,path:s.path,parent:s});return uO(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ba(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(w0(s)?s:Promise.resolve(s));return uO(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ie.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Si({schema:this,typeName:Re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Bo.create(this,this._def)}nullable(){return ou.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _i.create(this,this._def)}promise(){return uh.create(this,this._def)}or(e){return Ag.create([this,e],this._def)}and(e){return Ig.create(this,e,this._def)}transform(e){return new Si({...qe(this._def),schema:this,typeName:Re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Og({...qe(this._def),innerType:this,defaultValue:n,typeName:Re.ZodDefault})}brand(){return new iU({typeName:Re.ZodBranded,type:this,...qe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new _0({...qe(this._def),innerType:this,catchValue:n,typeName:Re.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ym.create(this,e)}readonly(){return x0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Iwe=/^c[^\s-]{8,}$/i,Twe=/^[a-z][a-z0-9]*$/,Nwe=/^[0-9A-HJKMNP-TV-Z]{26}$/,Pwe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,kwe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Owe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let cE;const Rwe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,$we=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Dwe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function jwe(t,e){return!!((e==="v4"||!e)&&Rwe.test(t)||(e==="v6"||!e)&&$we.test(t))}class yi extends Ge{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ge.string){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:ge.string,received:i.parsedType}),Me}const r=new ur;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?be(s,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&be(s,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")kwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"email",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")cE||(cE=new RegExp(Owe,"u")),cE.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"emoji",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Pwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"uuid",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Iwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"cuid",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Twe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"cuid2",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Nwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"ulid",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),be(s,{validation:"url",code:ie.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"regex",code:ie.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Dwe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?jwe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"ip",code:ie.invalid_string,message:i.message}),r.dirty()):lt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ie.invalid_string,...Ae.errToObj(r)})}_addCheck(e){return new yi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ae.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ae.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ae.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ae.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ae.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ae.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ae.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ae.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ae.errToObj(n)})}nonempty(e){return this.min(1,Ae.errToObj(e))}trim(){return new yi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new yi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new yi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}yi.create=t=>{var e;return new yi({checks:[],typeName:Re.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};function Uwe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Rc extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ge.number){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:ge.number,received:i.parsedType}),Me}let r;const s=new ur;for(const i of this._def.checks)i.kind==="int"?lt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ie.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Uwe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ie.not_finite,message:i.message}),s.dirty()):lt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,r,s){return new Rc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ae.toString(s)}]})}_addCheck(e){return new Rc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&lt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Rc.create=t=>new Rc({checks:[],typeName:Re.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class $c extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ge.bigint){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:ge.bigint,received:i.parsedType}),Me}let r;const s=new ur;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):lt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,r,s){return new $c({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ae.toString(s)}]})}_addCheck(e){return new $c({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$c.create=t=>{var e;return new $c({checks:[],typeName:Re.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};class Cg extends Ge{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ge.boolean){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:ge.boolean,received:r.parsedType}),Me}return xr(e.data)}}Cg.create=t=>new Cg({typeName:Re.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class su extends Ge{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ge.date){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:ge.date,received:i.parsedType}),Me}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_date}),Me}const r=new ur;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):lt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new su({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ae.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ae.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}su.create=t=>new su({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Re.ZodDate,...qe(t)});class v0 extends Ge{_parse(e){if(this._getType(e)!==ge.symbol){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:ge.symbol,received:r.parsedType}),Me}return xr(e.data)}}v0.create=t=>new v0({typeName:Re.ZodSymbol,...qe(t)});class xg extends Ge{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:ge.undefined,received:r.parsedType}),Me}return xr(e.data)}}xg.create=t=>new xg({typeName:Re.ZodUndefined,...qe(t)});class Sg extends Ge{_parse(e){if(this._getType(e)!==ge.null){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:ge.null,received:r.parsedType}),Me}return xr(e.data)}}Sg.create=t=>new Sg({typeName:Re.ZodNull,...qe(t)});class lh extends Ge{constructor(){super(...arguments),this._any=!0}_parse(e){return xr(e.data)}}lh.create=t=>new lh({typeName:Re.ZodAny,...qe(t)});class Dl extends Ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xr(e.data)}}Dl.create=t=>new Dl({typeName:Re.ZodUnknown,...qe(t)});class Qo extends Ge{_parse(e){const n=this._getOrReturnCtx(e);return be(n,{code:ie.invalid_type,expected:ge.never,received:n.parsedType}),Me}}Qo.create=t=>new Qo({typeName:Re.ZodNever,...qe(t)});class b0 extends Ge{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:ge.void,received:r.parsedType}),Me}return xr(e.data)}}b0.create=t=>new b0({typeName:Re.ZodVoid,...qe(t)});class _i extends Ge{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ge.array)return be(n,{code:ie.invalid_type,expected:ge.array,received:n.parsedType}),Me;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(be(n,{code:o?ie.too_big:ie.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(be(n,{code:ie.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(be(n,{code:ie.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new so(n,o,n.path,a)))).then(o=>ur.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new so(n,o,n.path,a)));return ur.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new _i({...this._def,minLength:{value:e,message:Ae.toString(n)}})}max(e,n){return new _i({...this._def,maxLength:{value:e,message:Ae.toString(n)}})}length(e,n){return new _i({...this._def,exactLength:{value:e,message:Ae.toString(n)}})}nonempty(e){return this.min(1,e)}}_i.create=(t,e)=>new _i({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Re.ZodArray,...qe(e)});function nd(t){if(t instanceof qt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Bo.create(nd(r))}return new qt({...t._def,shape:()=>e})}else return t instanceof _i?new _i({...t._def,type:nd(t.element)}):t instanceof Bo?Bo.create(nd(t.unwrap())):t instanceof ou?ou.create(nd(t.unwrap())):t instanceof io?io.create(t.items.map(e=>nd(e))):t}class qt extends Ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=lt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ge.object){const l=this._getOrReturnCtx(e);return be(l,{code:ie.invalid_type,expected:ge.object,received:l.parsedType}),Me}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Qo&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new so(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Qo){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(be(s,{code:ie.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new so(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ur.mergeObjectSync(r,l)):ur.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ae.errToObj,new qt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ae.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new qt({...this._def,unknownKeys:"strip"})}passthrough(){return new qt({...this._def,unknownKeys:"passthrough"})}extend(e){return new qt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new qt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Re.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new qt({...this._def,catchall:e})}pick(e){const n={};return lt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new qt({...this._def,shape:()=>n})}omit(e){const n={};return lt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new qt({...this._def,shape:()=>n})}deepPartial(){return nd(this)}partial(e){const n={};return lt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new qt({...this._def,shape:()=>n})}required(e){const n={};return lt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Bo;)i=i._def.innerType;n[r]=i}}),new qt({...this._def,shape:()=>n})}keyof(){return sU(lt.objectKeys(this.shape))}}qt.create=(t,e)=>new qt({shape:()=>t,unknownKeys:"strip",catchall:Qo.create(),typeName:Re.ZodObject,...qe(e)});qt.strictCreate=(t,e)=>new qt({shape:()=>t,unknownKeys:"strict",catchall:Qo.create(),typeName:Re.ZodObject,...qe(e)});qt.lazycreate=(t,e)=>new qt({shape:t,unknownKeys:"strip",catchall:Qo.create(),typeName:Re.ZodObject,...qe(e)});class Ag extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Ei(a.ctx.common.issues));return be(n,{code:ie.invalid_union,unionErrors:o}),Me}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Ei(c));return be(n,{code:ie.invalid_union,unionErrors:a}),Me}}get options(){return this._def.options}}Ag.create=(t,e)=>new Ag({options:t,typeName:Re.ZodUnion,...qe(e)});const dw=t=>t instanceof Ng?dw(t.schema):t instanceof Si?dw(t.innerType()):t instanceof Pg?[t.value]:t instanceof Dc?t.options:t instanceof kg?Object.keys(t.enum):t instanceof Og?dw(t._def.innerType):t instanceof xg?[void 0]:t instanceof Sg?[null]:null;class Fv extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ge.object)return be(n,{code:ie.invalid_type,expected:ge.object,received:n.parsedType}),Me;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(be(n,{code:ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=dw(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Fv({typeName:Re.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...qe(r)})}}function _x(t,e){const n=Ba(t),r=Ba(e);if(t===e)return{valid:!0,data:t};if(n===ge.object&&r===ge.object){const s=lt.objectKeys(e),i=lt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=_x(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ge.array&&r===ge.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=_x(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ge.date&&r===ge.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ig extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(bx(i)||bx(o))return Me;const a=_x(i.value,o.value);return a.valid?((Ex(i)||Ex(o))&&n.dirty(),{status:n.value,value:a.data}):(be(r,{code:ie.invalid_intersection_types}),Me)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ig.create=(t,e,n)=>new Ig({left:t,right:e,typeName:Re.ZodIntersection,...qe(n)});class io extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.array)return be(r,{code:ie.invalid_type,expected:ge.array,received:r.parsedType}),Me;if(r.data.length<this._def.items.length)return be(r,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Me;!this._def.rest&&r.data.length>this._def.items.length&&(be(r,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new so(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ur.mergeArray(n,o)):ur.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new io({...this._def,rest:e})}}io.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new io({items:t,typeName:Re.ZodTuple,rest:null,...qe(e)})};class Tg extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.object)return be(r,{code:ie.invalid_type,expected:ge.object,received:r.parsedType}),Me;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new so(r,a,r.path,a)),value:o._parse(new so(r,r.data[a],r.path,a))});return r.common.async?ur.mergeObjectAsync(n,s):ur.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ge?new Tg({keyType:e,valueType:n,typeName:Re.ZodRecord,...qe(r)}):new Tg({keyType:yi.create(),valueType:e,typeName:Re.ZodRecord,...qe(n)})}}class E0 extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.map)return be(r,{code:ie.invalid_type,expected:ge.map,received:r.parsedType}),Me;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new so(r,a,r.path,[l,"key"])),value:i._parse(new so(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Me;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Me;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}E0.create=(t,e,n)=>new E0({valueType:e,keyType:t,typeName:Re.ZodMap,...qe(n)});class iu extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.set)return be(r,{code:ie.invalid_type,expected:ge.set,received:r.parsedType}),Me;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(be(r,{code:ie.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(be(r,{code:ie.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Me;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new so(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new iu({...this._def,minSize:{value:e,message:Ae.toString(n)}})}max(e,n){return new iu({...this._def,maxSize:{value:e,message:Ae.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}iu.create=(t,e)=>new iu({valueType:t,minSize:null,maxSize:null,typeName:Re.ZodSet,...qe(e)});class kd extends Ge{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ge.function)return be(n,{code:ie.invalid_type,expected:ge.function,received:n.parsedType}),Me;function r(a,c){return y0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,m0(),Eg].filter(l=>!!l),issueData:{code:ie.invalid_arguments,argumentsError:c}})}function s(a,c){return y0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,m0(),Eg].filter(l=>!!l),issueData:{code:ie.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof uh){const a=this;return xr(async function(...c){const l=new Ei([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return xr(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Ei([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Ei([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new kd({...this._def,args:io.create(e).rest(Dl.create())})}returns(e){return new kd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new kd({args:e||io.create([]).rest(Dl.create()),returns:n||Dl.create(),typeName:Re.ZodFunction,...qe(r)})}}class Ng extends Ge{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ng.create=(t,e)=>new Ng({getter:t,typeName:Re.ZodLazy,...qe(e)});class Pg extends Ge{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return be(n,{received:n.data,code:ie.invalid_literal,expected:this._def.value}),Me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Pg.create=(t,e)=>new Pg({value:t,typeName:Re.ZodLiteral,...qe(e)});function sU(t,e){return new Dc({values:t,typeName:Re.ZodEnum,...qe(e)})}class Dc extends Ge{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return be(n,{expected:lt.joinValues(r),received:n.parsedType,code:ie.invalid_type}),Me}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return be(n,{received:n.data,code:ie.invalid_enum_value,options:r}),Me}return xr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Dc.create(e)}exclude(e){return Dc.create(this.options.filter(n=>!e.includes(n)))}}Dc.create=sU;class kg extends Ge{_parse(e){const n=lt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ge.string&&r.parsedType!==ge.number){const s=lt.objectValues(n);return be(r,{expected:lt.joinValues(s),received:r.parsedType,code:ie.invalid_type}),Me}if(n.indexOf(e.data)===-1){const s=lt.objectValues(n);return be(r,{received:r.data,code:ie.invalid_enum_value,options:s}),Me}return xr(e.data)}get enum(){return this._def.values}}kg.create=(t,e)=>new kg({values:t,typeName:Re.ZodNativeEnum,...qe(e)});class uh extends Ge{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ge.promise&&n.common.async===!1)return be(n,{code:ie.invalid_type,expected:ge.promise,received:n.parsedType}),Me;const r=n.parsedType===ge.promise?n.data:Promise.resolve(n.data);return xr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}uh.create=(t,e)=>new uh({type:t,typeName:Re.ZodPromise,...qe(e)});class Si extends Ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{be(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!_g(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>_g(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);lt.assertNever(s)}}Si.create=(t,e,n)=>new Si({schema:t,typeName:Re.ZodEffects,effect:e,...qe(n)});Si.createWithPreprocess=(t,e,n)=>new Si({schema:e,effect:{type:"preprocess",transform:t},typeName:Re.ZodEffects,...qe(n)});class Bo extends Ge{_parse(e){return this._getType(e)===ge.undefined?xr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bo.create=(t,e)=>new Bo({innerType:t,typeName:Re.ZodOptional,...qe(e)});class ou extends Ge{_parse(e){return this._getType(e)===ge.null?xr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ou.create=(t,e)=>new ou({innerType:t,typeName:Re.ZodNullable,...qe(e)});class Og extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ge.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Og.create=(t,e)=>new Og({innerType:t,typeName:Re.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...qe(e)});class _0 extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return w0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ei(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ei(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}_0.create=(t,e)=>new _0({innerType:t,typeName:Re.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...qe(e)});class C0 extends Ge{_parse(e){if(this._getType(e)!==ge.nan){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:ge.nan,received:r.parsedType}),Me}return{status:"valid",value:e.data}}}C0.create=t=>new C0({typeName:Re.ZodNaN,...qe(t)});const Lwe=Symbol("zod_brand");class iU extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ym extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Me:i.status==="dirty"?(n.dirty(),rU(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Me:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new ym({in:e,out:n,typeName:Re.ZodPipeline})}}class x0 extends Ge{_parse(e){const n=this._def.innerType._parse(e);return _g(n)&&(n.value=Object.freeze(n.value)),n}}x0.create=(t,e)=>new x0({innerType:t,typeName:Re.ZodReadonly,...qe(e)});const oU=(t,e={},n)=>t?lh.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):lh.create(),Mwe={object:qt.lazycreate};var Re;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Re||(Re={}));const Bwe=(t,e={message:`Input not instance of ${t.name}`})=>oU(n=>n instanceof t,e),aU=yi.create,cU=Rc.create,Fwe=C0.create,zwe=$c.create,lU=Cg.create,Wwe=su.create,qwe=v0.create,Hwe=xg.create,Vwe=Sg.create,Gwe=lh.create,Kwe=Dl.create,Ywe=Qo.create,Jwe=b0.create,Qwe=_i.create,Zwe=qt.create,Xwe=qt.strictCreate,e0e=Ag.create,t0e=Fv.create,n0e=Ig.create,r0e=io.create,s0e=Tg.create,i0e=E0.create,o0e=iu.create,a0e=kd.create,c0e=Ng.create,l0e=Pg.create,u0e=Dc.create,d0e=kg.create,h0e=uh.create,dO=Si.create,f0e=Bo.create,p0e=ou.create,g0e=Si.createWithPreprocess,m0e=ym.create,y0e=()=>aU().optional(),w0e=()=>cU().optional(),v0e=()=>lU().optional(),b0e={string:t=>yi.create({...t,coerce:!0}),number:t=>Rc.create({...t,coerce:!0}),boolean:t=>Cg.create({...t,coerce:!0}),bigint:t=>$c.create({...t,coerce:!0}),date:t=>su.create({...t,coerce:!0})},E0e=Me;var N=Object.freeze({__proto__:null,defaultErrorMap:Eg,setErrorMap:Swe,getErrorMap:m0,makeIssue:y0,EMPTY_PATH:Awe,addIssueToContext:be,ParseStatus:ur,INVALID:Me,DIRTY:rU,OK:xr,isAborted:bx,isDirty:Ex,isValid:_g,isAsync:w0,get util(){return lt},get objectUtil(){return vx},ZodParsedType:ge,getParsedType:Ba,ZodType:Ge,ZodString:yi,ZodNumber:Rc,ZodBigInt:$c,ZodBoolean:Cg,ZodDate:su,ZodSymbol:v0,ZodUndefined:xg,ZodNull:Sg,ZodAny:lh,ZodUnknown:Dl,ZodNever:Qo,ZodVoid:b0,ZodArray:_i,ZodObject:qt,ZodUnion:Ag,ZodDiscriminatedUnion:Fv,ZodIntersection:Ig,ZodTuple:io,ZodRecord:Tg,ZodMap:E0,ZodSet:iu,ZodFunction:kd,ZodLazy:Ng,ZodLiteral:Pg,ZodEnum:Dc,ZodNativeEnum:kg,ZodPromise:uh,ZodEffects:Si,ZodTransformer:Si,ZodOptional:Bo,ZodNullable:ou,ZodDefault:Og,ZodCatch:_0,ZodNaN:C0,BRAND:Lwe,ZodBranded:iU,ZodPipeline:ym,ZodReadonly:x0,custom:oU,Schema:Ge,ZodSchema:Ge,late:Mwe,get ZodFirstPartyTypeKind(){return Re},coerce:b0e,any:Gwe,array:Qwe,bigint:zwe,boolean:lU,date:Wwe,discriminatedUnion:t0e,effect:dO,enum:u0e,function:a0e,instanceof:Bwe,intersection:n0e,lazy:c0e,literal:l0e,map:i0e,nan:Fwe,nativeEnum:d0e,never:Ywe,null:Vwe,nullable:p0e,number:cU,object:Zwe,oboolean:v0e,onumber:w0e,optional:f0e,ostring:y0e,pipeline:m0e,preprocess:g0e,promise:h0e,record:s0e,set:o0e,strictObject:Xwe,string:aU,symbol:qwe,transformer:dO,tuple:r0e,undefined:Hwe,union:e0e,unknown:Kwe,void:Jwe,NEVER:E0e,ZodIssueCode:ie,quotelessJson:xwe,ZodError:Ei});const Qt=N.object({message:N.string()});function ye(t){return N.literal(Ee[t])}N.object({accessList:N.array(N.string()),blockHash:N.string().nullable(),blockNumber:N.string().nullable(),chainId:N.string().or(N.number()),from:N.string(),gas:N.string(),hash:N.string(),input:N.string().nullable(),maxFeePerGas:N.string(),maxPriorityFeePerGas:N.string(),nonce:N.string(),r:N.string(),s:N.string(),to:N.string(),transactionIndex:N.string().nullable(),type:N.string(),v:N.string(),value:N.string()});const _0e=N.object({chainId:N.string().or(N.number())}),C0e=N.object({email:N.string().email()}),x0e=N.object({otp:N.string()}),S0e=N.object({uri:N.string(),preferredAccountType:N.optional(N.string()),chainId:N.optional(N.string().or(N.number()))}),A0e=N.object({chainId:N.optional(N.string().or(N.number())),preferredAccountType:N.optional(N.string()),socialUri:N.optional(N.string())}),I0e=N.object({provider:N.enum(["google","github","apple","facebook","x","discord"])}),T0e=N.object({email:N.string().email()}),N0e=N.object({otp:N.string()}),P0e=N.object({otp:N.string()}),k0e=N.object({themeMode:N.optional(N.enum(["light","dark"])),themeVariables:N.optional(N.record(N.string(),N.string().or(N.number()))),w3mThemeVariables:N.optional(N.record(N.string(),N.string()))}),O0e=N.object({metadata:N.object({name:N.string(),description:N.string(),url:N.string(),icons:N.array(N.string())}).optional(),sdkVersion:N.string().optional(),sdkType:N.string().optional(),projectId:N.string()}),R0e=N.object({type:N.string()}),$0e=N.object({action:N.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),D0e=N.object({url:N.string()}),j0e=N.object({userName:N.string()}),U0e=N.object({email:N.string().optional().nullable(),address:N.string(),chainId:N.string().or(N.number()),accounts:N.array(N.object({address:N.string(),type:N.enum([On.ACCOUNT_TYPES.EOA,On.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:N.string().optional().nullable(),preferredAccountType:N.optional(N.string())}),L0e=N.object({action:N.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),M0e=N.object({email:N.string().email().optional().nullable(),address:N.string(),chainId:N.string().or(N.number()),smartAccountDeployed:N.optional(N.boolean()),accounts:N.array(N.object({address:N.string(),type:N.enum([On.ACCOUNT_TYPES.EOA,On.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:N.optional(N.string())}),B0e=N.object({uri:N.string()}),F0e=N.object({isConnected:N.boolean()}),z0e=N.object({chainId:N.string().or(N.number())}),W0e=N.object({chainId:N.string().or(N.number())}),q0e=N.object({newEmail:N.string().email()}),H0e=N.object({smartAccountEnabledNetworks:N.array(N.number())});N.object({address:N.string(),isDeployed:N.boolean()});const V0e=N.object({version:N.string().optional()}),G0e=N.object({type:N.string(),address:N.string()}),K0e=N.any(),Y0e=N.object({method:N.literal("eth_accounts")}),J0e=N.object({method:N.literal("eth_blockNumber")}),Q0e=N.object({method:N.literal("eth_call"),params:N.array(N.any())}),Z0e=N.object({method:N.literal("eth_chainId")}),X0e=N.object({method:N.literal("eth_estimateGas"),params:N.array(N.any())}),eve=N.object({method:N.literal("eth_feeHistory"),params:N.array(N.any())}),tve=N.object({method:N.literal("eth_gasPrice")}),nve=N.object({method:N.literal("eth_getAccount"),params:N.array(N.any())}),rve=N.object({method:N.literal("eth_getBalance"),params:N.array(N.any())}),sve=N.object({method:N.literal("eth_getBlockByHash"),params:N.array(N.any())}),ive=N.object({method:N.literal("eth_getBlockByNumber"),params:N.array(N.any())}),ove=N.object({method:N.literal("eth_getBlockReceipts"),params:N.array(N.any())}),ave=N.object({method:N.literal("eth_getBlockTransactionCountByHash"),params:N.array(N.any())}),cve=N.object({method:N.literal("eth_getBlockTransactionCountByNumber"),params:N.array(N.any())}),lve=N.object({method:N.literal("eth_getCode"),params:N.array(N.any())}),uve=N.object({method:N.literal("eth_getFilterChanges"),params:N.array(N.any())}),dve=N.object({method:N.literal("eth_getFilterLogs"),params:N.array(N.any())}),hve=N.object({method:N.literal("eth_getLogs"),params:N.array(N.any())}),fve=N.object({method:N.literal("eth_getProof"),params:N.array(N.any())}),pve=N.object({method:N.literal("eth_getStorageAt"),params:N.array(N.any())}),gve=N.object({method:N.literal("eth_getTransactionByBlockHashAndIndex"),params:N.array(N.any())}),mve=N.object({method:N.literal("eth_getTransactionByBlockNumberAndIndex"),params:N.array(N.any())}),yve=N.object({method:N.literal("eth_getTransactionByHash"),params:N.array(N.any())}),wve=N.object({method:N.literal("eth_getTransactionCount"),params:N.array(N.any())}),vve=N.object({method:N.literal("eth_getTransactionReceipt"),params:N.array(N.any())}),bve=N.object({method:N.literal("eth_getUncleCountByBlockHash"),params:N.array(N.any())}),Eve=N.object({method:N.literal("eth_getUncleCountByBlockNumber"),params:N.array(N.any())}),_ve=N.object({method:N.literal("eth_maxPriorityFeePerGas")}),Cve=N.object({method:N.literal("eth_newBlockFilter")}),xve=N.object({method:N.literal("eth_newFilter"),params:N.array(N.any())}),Sve=N.object({method:N.literal("eth_newPendingTransactionFilter")}),Ave=N.object({method:N.literal("eth_sendRawTransaction"),params:N.array(N.any())}),Ive=N.object({method:N.literal("eth_syncing"),params:N.array(N.any())}),Tve=N.object({method:N.literal("eth_uninstallFilter"),params:N.array(N.any())}),hO=N.object({method:N.literal("personal_sign"),params:N.array(N.any())}),Nve=N.object({method:N.literal("eth_signTypedData_v4"),params:N.array(N.any())}),Pve=N.object({method:N.literal("eth_sendTransaction"),params:N.array(N.any())}),kve=N.object({method:N.literal("solana_signMessage"),params:N.object({message:N.string(),pubkey:N.string()})}),Ove=N.object({method:N.literal("solana_signTransaction"),params:N.object({transaction:N.string()})}),Rve=N.object({method:N.literal("solana_signAllTransactions"),params:N.object({transactions:N.array(N.string())})}),$ve=N.object({method:N.literal("solana_signAndSendTransaction"),params:N.object({transaction:N.string(),options:N.object({skipPreflight:N.boolean().optional(),preflightCommitment:N.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:N.number().optional(),minContextSlot:N.number().optional()}).optional()})}),Dve=N.object({method:N.literal("wallet_sendCalls"),params:N.array(N.object({chainId:N.string().or(N.number()).optional(),from:N.string().optional(),version:N.string().optional(),capabilities:N.any().optional(),calls:N.array(N.object({to:N.string().startsWith("0x"),data:N.string().startsWith("0x").optional(),value:N.string().optional()}))}))}),jve=N.object({method:N.literal("wallet_getCallsStatus"),params:N.array(N.string())}),Uve=N.object({method:N.literal("wallet_getCapabilities")}),Lve=N.object({method:N.literal("wallet_grantPermissions"),params:N.array(N.any())}),Mve=N.object({method:N.literal("wallet_revokePermissions"),params:N.any()}),Bve=N.object({method:N.literal("wallet_getAssets"),params:N.any()}),fO=N.object({token:N.string()}),we=N.object({id:N.string().optional()}),vf={appEvent:we.extend({type:ye("APP_SWITCH_NETWORK"),payload:_0e}).or(we.extend({type:ye("APP_CONNECT_EMAIL"),payload:C0e})).or(we.extend({type:ye("APP_CONNECT_DEVICE")})).or(we.extend({type:ye("APP_CONNECT_OTP"),payload:x0e})).or(we.extend({type:ye("APP_CONNECT_SOCIAL"),payload:S0e})).or(we.extend({type:ye("APP_GET_FARCASTER_URI")})).or(we.extend({type:ye("APP_CONNECT_FARCASTER")})).or(we.extend({type:ye("APP_GET_USER"),payload:N.optional(A0e)})).or(we.extend({type:ye("APP_GET_SOCIAL_REDIRECT_URI"),payload:I0e})).or(we.extend({type:ye("APP_SIGN_OUT")})).or(we.extend({type:ye("APP_IS_CONNECTED"),payload:N.optional(fO)})).or(we.extend({type:ye("APP_GET_CHAIN_ID")})).or(we.extend({type:ye("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(we.extend({type:ye("APP_INIT_SMART_ACCOUNT")})).or(we.extend({type:ye("APP_SET_PREFERRED_ACCOUNT"),payload:R0e})).or(we.extend({type:ye("APP_RPC_REQUEST"),payload:hO.or(Bve).or(Y0e).or(J0e).or(Q0e).or(Z0e).or(X0e).or(eve).or(tve).or(nve).or(rve).or(sve).or(ive).or(ove).or(ave).or(cve).or(lve).or(uve).or(dve).or(hve).or(fve).or(pve).or(gve).or(mve).or(yve).or(wve).or(vve).or(bve).or(Eve).or(_ve).or(Cve).or(xve).or(Sve).or(Ave).or(Ive).or(Tve).or(hO).or(Nve).or(Pve).or(kve).or(Ove).or(Rve).or($ve).or(jve).or(Dve).or(Uve).or(Lve).or(Mve)})).or(we.extend({type:ye("APP_UPDATE_EMAIL"),payload:T0e})).or(we.extend({type:ye("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:N0e})).or(we.extend({type:ye("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:P0e})).or(we.extend({type:ye("APP_SYNC_THEME"),payload:k0e})).or(we.extend({type:ye("APP_SYNC_DAPP_DATA"),payload:O0e})).or(we.extend({type:ye("APP_RELOAD")})),frameEvent:we.extend({type:ye("FRAME_SWITCH_NETWORK_ERROR"),payload:Qt}).or(we.extend({type:ye("FRAME_SWITCH_NETWORK_SUCCESS"),payload:W0e})).or(we.extend({type:ye("FRAME_CONNECT_EMAIL_SUCCESS"),payload:$0e})).or(we.extend({type:ye("FRAME_CONNECT_EMAIL_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:D0e})).or(we.extend({type:ye("FRAME_GET_FARCASTER_URI_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:j0e})).or(we.extend({type:ye("FRAME_CONNECT_FARCASTER_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_CONNECT_OTP_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_CONNECT_OTP_SUCCESS")})).or(we.extend({type:ye("FRAME_CONNECT_DEVICE_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_CONNECT_DEVICE_SUCCESS")})).or(we.extend({type:ye("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:U0e})).or(we.extend({type:ye("FRAME_CONNECT_SOCIAL_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_GET_USER_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_GET_USER_SUCCESS"),payload:M0e})).or(we.extend({type:ye("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:B0e})).or(we.extend({type:ye("FRAME_SIGN_OUT_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_SIGN_OUT_SUCCESS")})).or(we.extend({type:ye("FRAME_IS_CONNECTED_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_IS_CONNECTED_SUCCESS"),payload:F0e})).or(we.extend({type:ye("FRAME_GET_CHAIN_ID_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_GET_CHAIN_ID_SUCCESS"),payload:z0e})).or(we.extend({type:ye("FRAME_RPC_REQUEST_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_RPC_REQUEST_SUCCESS"),payload:K0e})).or(we.extend({type:ye("FRAME_SESSION_UPDATE"),payload:fO})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SUCCESS"),payload:L0e})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:q0e})).or(we.extend({type:ye("FRAME_SYNC_THEME_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_SYNC_THEME_SUCCESS")})).or(we.extend({type:ye("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(we.extend({type:ye("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:H0e})).or(we.extend({type:ye("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:G0e})).or(we.extend({type:ye("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_READY"),payload:V0e})).or(we.extend({type:ye("FRAME_RELOAD_ERROR"),payload:Qt})).or(we.extend({type:ye("FRAME_RELOAD_SUCCESS")}))};function lE(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class Fve{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=X.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!lE(Ee.FRAME_EVENT_KEY,l))return;const u=vf.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}hs.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{hs.isClient&&window.addEventListener("message",({data:o})=>{if(!lE(Ee.FRAME_EVENT_KEY,o))return;const a=vf.frameEvent.parse(o);i(a)})},onAppEvent:i=>{hs.isClient&&window.addEventListener("message",({data:o})=>{if(!lE(Ee.APP_EVENT_KEY,o))return;const a=vf.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(hs.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");vf.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(hs.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");vf.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),hs.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${mX}?projectId=${e}&chainId=${r}&version=${wX}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class zve{constructor(e){var i;const n=Sh({level:yX}),{logger:r,chunkLoggerController:s}=IA({opts:n});this.logger=dr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Wve{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new zve(e)),this.abortController=i,this.w3mFrame=new Fve({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Bn.get(Ee.EMAIL_LOGIN_USED_KEY)}getEmail(){return Bn.get(Ee.EMAIL)}getUsername(){return Bn.get(Ee.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ee.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{hs.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ee.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ee.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ee.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ee.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ee.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ee.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ee.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ee.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ee.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ee.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ee.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ee.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ee.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ee.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ee.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ee.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ee.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ee.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ee.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ee.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(On.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ee.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ee.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ee.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:On.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{On.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ee.APP_SYNC_DAPP_DATA,Ee.APP_SYNC_THEME,Ee.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ee.APP_CONNECT_EMAIL,Ee.APP_CONNECT_DEVICE,Ee.APP_CONNECT_OTP,Ee.APP_CONNECT_SOCIAL,Ee.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,_;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((_=w.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Bn.set(Ee.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Bn.set(Ee.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Bn.set(Ee.EMAIL,e),Bn.set(Ee.EMAIL_LOGIN_USED_KEY,"true"),Bn.delete(Ee.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Bn.delete(Ee.EMAIL_LOGIN_USED_KEY),Bn.delete(Ee.EMAIL),Bn.delete(Ee.LAST_USED_CHAIN_KEY),Bn.delete(Ee.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Bn.set(Ee.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Bn.get(Ee.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Bn.set(Ee.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class jl{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return jl.instance||(jl.instance=new Wve({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),jl.instance}}var pO={};const qve={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof pO<"u"?pO.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},Cx={filterOutDuplicatesByRDNS(t){const e=ne.state.enableEIP6963?ue.state.connectors:[],n=le.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ce.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=ue.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=le.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ue.state,{featuredWalletIds:n}=ne.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ne.state.features)==null?void 0:c.connectMethodsOrder),r=e||ue.state.connectors;if(n)return n;const{injected:s,announced:i}=hw.getConnectorsByType(r,xe.state.recommended,xe.state.featured),o=s.filter(hw.showConnector),a=i.filter(hw.showConnector);return o.length||a.length?["wallet","email","social"]:qve.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&xe.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&xe.state.excludedWallets.some(r=>bg.isLowerCaseMatch(r.name,t.name));return e||n}},hw={getConnectorsByType(t,e,n){const{customWallets:r}=ne.state,s=le.getRecentWallets(),i=Cx.filterOutDuplicateWallets(e),o=Cx.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&xe.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&xe.state.excludedWallets.some(i=>bg.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ce.isMobile()||Ce.isMobile()&&!e&&!ve.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from($.state.chains.values()).some(n=>ue.getConnectorId(n.namespace)===X.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ne.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=hw.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ne.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:v})=>v===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Ce.isMobile())return{accounts:[],chainId:void 0};if(t.id===X.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fw=globalThis,aI=fw.ShadowRoot&&(fw.ShadyCSS===void 0||fw.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,cI=Symbol(),gO=new WeakMap;let uU=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==cI)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(aI&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=gO.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&gO.set(n,e))}return e}toString(){return this.cssText}};const ks=t=>new uU(typeof t=="string"?t:t+"",void 0,cI),Od=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new uU(n,t,cI)},Hve=(t,e)=>{if(aI)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=fw.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},mO=aI?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return ks(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Vve,defineProperty:Gve,getOwnPropertyDescriptor:Kve,getOwnPropertyNames:Yve,getOwnPropertySymbols:Jve,getPrototypeOf:Qve}=Object,_c=globalThis,yO=_c.trustedTypes,Zve=yO?yO.emptyScript:"",uE=_c.reactiveElementPolyfillSupport,dp=(t,e)=>t,xx={toAttribute(t,e){switch(e){case Boolean:t=t?Zve:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},dU=(t,e)=>!Vve(t,e),wO={attribute:!0,type:String,converter:xx,reflect:!1,useDefault:!1,hasChanged:dU};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),_c.litPropertyMetadata??(_c.litPropertyMetadata=new WeakMap);let rd=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=wO){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Gve(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=Kve(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??wO}static _$Ei(){if(this.hasOwnProperty(dp("elementProperties")))return;const e=Qve(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(dp("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(dp("properties"))){const n=this.properties,r=[...Yve(n),...Jve(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(mO(s))}else e!==void 0&&n.push(mO(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Hve(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:xx).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:xx;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??dU)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};rd.elementStyles=[],rd.shadowRootOptions={mode:"open"},rd[dp("elementProperties")]=new Map,rd[dp("finalized")]=new Map,uE==null||uE({ReactiveElement:rd}),(_c.reactiveElementVersions??(_c.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hp=globalThis,S0=hp.trustedTypes,vO=S0?S0.createPolicy("lit-html",{createHTML:t=>t}):void 0,hU="$lit$",Fa=`lit$${Math.random().toFixed(9).slice(2)}$`,fU="?"+Fa,Xve=`<${fU}>`,au=document,Rg=()=>au.createComment(""),$g=t=>t===null||typeof t!="object"&&typeof t!="function",lI=Array.isArray,ebe=t=>lI(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",dE=`[ 	
\f\r]`,bf=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,bO=/-->/g,EO=/>/g,Xc=RegExp(`>|${dE}(?:([^\\s"'>=/]+)(${dE}*=${dE}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),_O=/'/g,CO=/"/g,pU=/^(?:script|style|textarea|title)$/i,gU=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),vxe=gU(1),bxe=gU(2),dh=Symbol.for("lit-noChange"),Nn=Symbol.for("lit-nothing"),xO=new WeakMap,_l=au.createTreeWalker(au,129);function mU(t,e){if(!lI(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return vO!==void 0?vO.createHTML(e):e}const tbe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=bf;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===bf?u[1]==="!--"?o=bO:u[1]!==void 0?o=EO:u[2]!==void 0?(pU.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Xc):u[3]!==void 0&&(o=Xc):o===Xc?u[0]===">"?(o=s??bf,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Xc:u[3]==='"'?CO:_O):o===CO||o===_O?o=Xc:o===bO||o===EO?o=bf:(o=Xc,s=void 0);const f=o===Xc&&t[a+1].startsWith("/>")?" ":"";i+=o===bf?c+Xve:d>=0?(r.push(l),c.slice(0,d)+hU+c.slice(d)+Fa+f):c+Fa+(d===-2?a:f)}return[mU(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Dg{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=tbe(e,n);if(this.el=Dg.createElement(l,r),_l.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=_l.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(hU)){const h=u[o++],f=s.getAttribute(d).split(Fa),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?rbe:p[1]==="?"?sbe:p[1]==="@"?ibe:zv}),s.removeAttribute(d)}else d.startsWith(Fa)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(pU.test(s.tagName)){const d=s.textContent.split(Fa),h=d.length-1;if(h>0){s.textContent=S0?S0.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Rg()),_l.nextNode(),c.push({type:2,index:++i});s.append(d[h],Rg())}}}else if(s.nodeType===8)if(s.data===fU)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Fa,d+1))!==-1;)c.push({type:7,index:i}),d+=Fa.length-1}i++}}static createElement(e,n){const r=au.createElement("template");return r.innerHTML=e,r}}function hh(t,e,n=t,r){var o,a;if(e===dh)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=$g(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=hh(t,s._$AS(t,e.values),s,r)),e}class nbe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??au).importNode(n,!0);_l.currentNode=s;let i=_l.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new wm(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new obe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=_l.nextNode(),o++)}return _l.currentNode=au,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class wm{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Nn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=hh(this,e,n),$g(e)?e===Nn||e==null||e===""?(this._$AH!==Nn&&this._$AR(),this._$AH=Nn):e!==this._$AH&&e!==dh&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):ebe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Nn&&$g(this._$AH)?this._$AA.nextSibling.data=e:this.T(au.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Dg.createElement(mU(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new nbe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=xO.get(e.strings);return n===void 0&&xO.set(e.strings,n=new Dg(e)),n}k(e){lI(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new wm(this.O(Rg()),this.O(Rg()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class zv{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Nn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Nn}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=hh(this,e,n,0),o=!$g(e)||e!==this._$AH&&e!==dh,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=hh(this,a[r+c],n,c),l===dh&&(l=this._$AH[c]),o||(o=!$g(l)||l!==this._$AH[c]),l===Nn?e=Nn:e!==Nn&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Nn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class rbe extends zv{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Nn?void 0:e}}class sbe extends zv{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Nn)}}class ibe extends zv{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=hh(this,e,n,0)??Nn)===dh)return;const r=this._$AH,s=e===Nn&&r!==Nn||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Nn&&(r===Nn||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class obe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){hh(this,e)}}const hE=hp.litHtmlPolyfillSupport;hE==null||hE(Dg,wm),(hp.litHtmlVersions??(hp.litHtmlVersions=[])).push("3.3.0");const abe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new wm(e.insertBefore(Rg(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ul=globalThis;class pw extends rd{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=abe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return dh}}var fR;pw._$litElement$=!0,pw.finalized=!0,(fR=Ul.litElementHydrateSupport)==null||fR.call(Ul,{LitElement:pw});const fE=Ul.litElementPolyfillSupport;fE==null||fE({LitElement:pw});(Ul.litElementVersions??(Ul.litElementVersions=[])).push("4.2.0");let fp,Cc,xc;function Exe(t,e){fp=document.createElement("style"),Cc=document.createElement("style"),xc=document.createElement("style"),fp.textContent=Rd(t).core.cssText,Cc.textContent=Rd(t).dark.cssText,xc.textContent=Rd(t).light.cssText,document.head.appendChild(fp),document.head.appendChild(Cc),document.head.appendChild(xc),yU(e)}function yU(t){Cc&&xc&&(t==="light"?(Cc.removeAttribute("media"),xc.media="enabled"):(xc.removeAttribute("media"),Cc.media="enabled"))}function cbe(t){fp&&Cc&&xc&&(fp.textContent=Rd(t).core.cssText,Cc.textContent=Rd(t).dark.cssText,xc.textContent=Rd(t).light.cssText)}function Rd(t){return{core:Od`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ks(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ks((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ks((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ks((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ks((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Od`
      :root {
        --w3m-color-mix: ${ks((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ks(Do(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ks(Do(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Od`
      :root {
        --w3m-color-mix: ${ks((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ks(Do(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ks(Do(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const _xe=Od`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Cxe=Od`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,xxe=Od`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Mf={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},wU=aW({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function vm(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const SO=vm({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),AO=vm({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});vm({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});vm({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});vm({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const lbe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},pp={getMethodsByChainNamespace(t){return lbe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case SO.caipNetworkId:u.chains.push(SO.deprecatedCaipNetworkId);break;case AO.caipNetworkId:u.chains.push(AO.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await ep.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class uI{constructor({provider:e,namespace:n}){this.id=X.CONNECTOR_ID.WALLET_CONNECT,this.name=ic.ConnectorNamesMap[X.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=ic.ConnectorImageIds[X.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=$.getCaipNetworks.bind($),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ne.state.universalProviderConfigOverride,s=pp.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return up.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:ube})}}const ube=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class vU{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>$.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:X.CONNECTOR_ID.AUTH,type:"AUTH",name:X.CONNECTOR_NAMES.AUTH,provider:e,imageId:ic.ConnectorImageIds[X.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){ce.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=ce.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof uI);if(!e)throw new Error("WalletConnectConnector not found");return e}}class dbe extends vU{setUniversalProvider(e){this.addConnector(new uI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Ce.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&yt.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(ce.state.balanceLoading&&e.chainId===((c=$.state.activeCaipNetwork)==null?void 0:c.id))return{balance:ce.state.balance||"0.00",symbol:ce.state.balanceSymbol||""};const s=(await ce.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===X.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Ph.encode(new TextEncoder().encode(r)),pubkey:s}},(a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=$.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===X.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:ql(n.id)}]}))}catch(u){if(u.code===Mf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Mf.ERROR_INVALID_CHAIN_ID||u.code===Mf.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Mf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:ql(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const hbe=["email","socials","swaps","onramp","activity","reownBranding"],Py={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},fbe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Py[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Py[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Py[t].processApi(e)},processFallbackFeature(t,e){return Py[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await xe.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?yt.DEFAULT_REMOTE_FEATURES:yt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of hbe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),yt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;ln.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class pbe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=$.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=$.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=$.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return $.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>$.getCaipNetworks(n),this.getActiveChainNamespace=()=>$.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{$.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>$.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>$.state.activeChain===n||!n?$.state.activeCaipAddress:$.getAccountProp("caipAddress",n),this.setClientId=n=>{Te.setClientId(n)},this.getProvider=n=>Ct.getProvider(n),this.getProviderType=n=>Ct.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=ce.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{ce.setCaipAddress(n,r),n&&ne.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{ce.setBalance(n,r,s)},this.setProfileName=(n,r)=>{ce.setProfileName(n,r)},this.setProfileImage=(n,r)=>{ce.setProfileImage(n,r)},this.setUser=(n,r)=>{ce.setUser(n,r)},this.resetAccount=n=>{ce.resetAccount(n)},this.setCaipNetwork=n=>{$.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{$.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{ce.setAllAccounts(n,r),ne.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{ce.setStatus(n,r),ue.isConnected()?le.setConnectionStatus("connected"):le.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>$.getAccountProp("address",n),this.setConnectors=n=>{const r=[...ue.state.allConnectors,...n];ue.setConnectors(r)},this.setConnections=(n,r)=>{ve.setConnections(n,r)},this.fetchIdentity=n=>Te.fetchIdentity(n),this.getReownName=n=>ep.getNamesForAddress(n),this.getConnectors=()=>ue.getConnectors(),this.getConnectorImage=n=>H8.getConnectorImage(n),this.getConnections=n=>ug.getConnectionsData(n).connections,this.getRecentConnections=n=>ug.getConnectionsData(n).recentConnections,this.switchConnection=n=>ve.switchConnection(n),this.deleteConnection=n=>le.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=Ct.getProviderId(r),i=n?{...n,type:s}:void 0;ce.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!$.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{ce.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{ce.removeAddressLabel(n,r)},this.getAddress=n=>$.state.activeChain===n||!n?ce.state.address:$.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>$.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{$.resetNetwork(n)},this.addConnector=n=>{ue.addConnector(n)},this.resetWcConnection=()=>{ve.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{ce.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{ce.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{$.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{ce.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ne.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await fbe.fetchRemoteFeatures(e),ne.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&CC.setOnrampProviders(this.remoteFeatures.onramp),((n=ne.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ne.state.remoteFeatures)==null?void 0:r.socials)&&((s=ne.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await xe.fetchAllowedOrigins();if(!e||!Ce.isClient()){ln.open(Wt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;pp.isOriginAllowed(n,e,Mf.DEFAULT_ALLOWED_ANCESTORS)||ln.open(Wt.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){ln.open(Wt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":ln.open(Wt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;ln.open({shortMessage:Wt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Wt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:ln.open(Wt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,wt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&zr.setThemeMode(e.themeMode),e.themeVariables&&zr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");$.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&$.setActiveCaipNetwork(n)}initializeConnectionController(e){ve.initialize(e.adapters??[]),ve.setWcBasic(e.basic??!1)}initializeConnectorController(){ue.initialize(this.chainNamespaces)}initializeProjectSettings(e){ne.setProjectId(e.projectId),ne.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ne.setDebug(e.debug!==!1),ne.setEnableWalletConnect(e.enableWalletConnect!==!1),ne.setEnableWalletGuide(e.enableWalletGuide!==!1),ne.setEnableWallets(e.enableWallets!==!1),ne.setEIP6963Enabled(e.enableEIP6963!==!1),ne.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ne.setEnableAuthLogger(e.enableAuthLogger!==!1),ne.setCustomRpcUrls(e.customRpcUrls),ne.setEnableEmbedded(e.enableEmbedded),ne.setAllWallets(e.allWallets),ne.setIncludeWalletIds(e.includeWalletIds),ne.setExcludeWalletIds(e.excludeWalletIds),ne.setFeaturedWalletIds(e.featuredWalletIds),ne.setTokens(e.tokens),ne.setTermsConditionsUrl(e.termsConditionsUrl),ne.setPrivacyPolicyUrl(e.privacyPolicyUrl),ne.setCustomWallets(e.customWallets),ne.setFeatures(e.features),ne.setAllowUnsupportedChain(e.allowUnsupportedChain),ne.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ne.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ne.setDefaultAccountTypes(e.defaultAccountTypes);const n=le.getPreferredAccountTypes()||{},r={...ne.state.defaultAccountTypes,...n};ce.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ne.setMetadata(e.metadata),ne.setDisableAppend(e.disableAppend),ne.setEnableEmbedded(e.enableEmbedded),ne.setSIWX(e.siwx),!e.projectId){ln.open(Wt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===X.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ne.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Ce.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Ki.getUnsupportedNetwork(`${n}:${e}`);$.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Ki.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Ki.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Ki.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Ki.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Ct.getProvider(e),s=Ct.getProviderId(e),{caipAddress:i}=$.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),le.removeConnectedNamespace(e),Ct.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),ue.removeConnectorId(e),$.resetAccount(e),$.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=$.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),le.setConnectedNamespaces([...$.state.chains.keys()]),this.chainNamespaces.forEach(o=>{ue.setConnectorId(Lt.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,v,_;const c=$.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const E=this.getCaipNetworks().find(x=>x.chainNamespace===i);E&&this.setCaipNetwork(E)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((_=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:_[0])});if(!h)return;le.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=ce.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=$.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),le.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=CX(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));dt.resetSend(),ve.resetWcConnection(),await up.clearSessions(),ue.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));le.deleteConnectedSocialProvider(),wt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter($.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:ce.state.address,provider:Ct.getProvider($.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(yt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter($.state.activeChain),s=Ct.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===X.CHAIN.EVM){const n=this.getAdapter($.state.activeChain),r=Ct.getProvider($.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:ce.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:$.state.activeChain}),ce.state.profileImage||!1},getEnsAddress:async e=>await pp.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter($.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Ct.getProvider($.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter($.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter($.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter($.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter($.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter($.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter($.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!ce.state.address||this.updateNativeBalance(ce.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ve.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Ct.getProviderId($.state.activeChain)===Lt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Ct.getProvider(n),i=Ct.getProviderId(n);if(e.chainNamespace===$.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Lt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=us.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new dbe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=le.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(le.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=$.state.activeChain===e,c=$.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=ce.state.address,i=$.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=$.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=$.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=$.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===X.CHAIN.EVM&&Ce.isSafeApp()&&ue.setConnectorId(X.CONNECTOR_ID.SAFE,e);const n=ue.getConnectorId(e);switch(this.setStatus("connecting",e),n){case X.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case X.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=ue.getConnectorId(e),s=this.getCaipNetwork(e),o=ue.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Ce.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=$.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:w}=us.parseCaipAddress(g);return w===(c==null?void 0:c.toString())})||a[0];if(l){const g=us.validateCaipAddress(l),{chainId:w,address:y}=us.parseCaipAddress(g);if(Ct.setProviderId(i,Lt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&$.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==X.CHAIN.EVM){const b=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:$.state.activeCaipNetwork});Ct.setProvider(i,b)}else Ct.setProvider(i,this.universalProvider);ue.setConnectorId(X.CONNECTOR_ID.WALLET_CONNECT,i),le.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:y,chainId:w,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await $.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=us.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Ce.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Ct.setProviderId(s,e),Ct.setProvider(s,n),ue.setConnectorId(r,s)}async syncAllAccounts(e){const n=ue.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===$.state.activeChain,r=$.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=le.getActiveNetworkProps(),c=i||a,l=((d=$.state.activeCaipNetwork)==null?void 0:d.name)===X.UNSUPPORTED_NETWORK_NAME,u=$.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(v=>{var _;return((_=us.parseCaipNetworkId(v))==null?void 0:_.chainId)===c.toString()}),b=w.find(v=>{var _;return((_=us.parseCaipNetworkId(v))==null?void 0:_.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===y),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===$.state.activeChain?ne.state.enableNetworkSwitch&&!ne.state.allowUnsupportedChain&&((h=$.state.activeCaipNetwork)==null?void 0:h.name)===X.UNSUPPORTED_NETWORK_NAME?$.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),bg.isLowerCaseMatch(s,ce.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=ue.getConnectorId(e),r=Ct.getProviderId(e);if(r===Lt.CONNECTOR_TYPE_ANNOUNCED||r===Lt.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Lt.CONNECTOR_TYPE_WALLET_CONNECT){const i=Ct.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===X.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===X.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!lg.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=$.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=_we.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ne.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await vwe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{ve.setUri(e)}),this.universalProvider.on("connect",ve.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),ve.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(pp.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Ce.isCaipAddress(r[0])&&this.syncAccount(us.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ce.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){wt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Wt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Wt.ALERT_ERRORS[o];a&&(ln.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ve.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return pt.open({...e,data:{swap:e.arguments}})}return pt.open(e)}async close(){await this.injectModalUi(),pt.close()}setLoading(e,n){pt.setLoading(e,n)}async disconnect(e){await ve.disconnect({namespace:e})}getSIWX(){return ne.state.siwx}getError(){return""}getChainId(){var e;return(e=$.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){ln.open(Wt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await $.switchActiveNetwork(n)}getWalletProvider(){return $.state.activeChain?Ct.state.providers[$.state.activeChain]:null}getWalletProviderType(){return Ct.getProviderId($.state.activeChain)}subscribeProviders(e){return Ct.subscribeProviders(e)}getThemeMode(){return zr.state.themeMode}getThemeVariables(){return zr.state.themeVariables}setThemeMode(e){zr.setThemeMode(e),yU(zr.state.themeMode)}setTermsConditionsUrl(e){ne.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ne.setPrivacyPolicyUrl(e)}setThemeVariables(e){zr.setThemeVariables(e),cbe(zr.state.themeVariables)}subscribeTheme(e){return zr.subscribe(e)}subscribeConnections(e){return ve.subscribe(e)}getWalletInfo(e){return e?$.getAccountProp("connectedWalletInfo",e):ce.state.connectedWalletInfo}getAccount(e){var o;const n=ue.getAuthConnector(e),r=$.getAccountData(e),s=$.state.activeChain,i=le.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Ce.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===X.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:le.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?$.subscribeChainProp("accountState",r,n):$.subscribe(r),ue.subscribe(r)}subscribeNetwork(e){return $.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?ce.subscribeKey("connectedWalletInfo",e,n):ce.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ce.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){$.subscribeKey("activeCaipNetwork",e)}getState(){return Zi.state}subscribeState(e){return Zi.subscribe(e)}showErrorMessage(e){gi.showError(e)}showSuccessMessage(e){gi.showSuccess(e)}getEvent(){return{...wt.state}}subscribeEvents(e){return wt.subscribe(e)}replace(e){Pe.replace(e)}redirect(e){Pe.push(e)}popTransactionStack(e){Pe.popTransactionStack(e)}isOpen(){return pt.state.open}isTransactionStackEmpty(){return Pe.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ne.setFeatures(e)}updateRemoteFeatures(e){ne.setRemoteFeatures(e)}updateOptions(e){const r={...ne.state||{},...e};ne.setOptions(r)}setConnectMethodsOrder(e){ne.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ne.setWalletFeaturesOrder(e)}setCollapseWallets(e){ne.setCollapseWallets(e)}setSocialsOrder(e){ne.setSocialsOrder(e)}getConnectMethodsOrder(){return Cx.getConnectOrderMethod(ne.state.features,ue.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||$.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&$.removeNetwork(e,n)}}let IO=!1;class gbe extends pbe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{hs.checkIfRequestExists(n)?hs.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(On.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(On.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=hs.checkIfRequestIsSafe(r),i=ce.state.address,o=$.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=$.state.activeChain;ue.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=$.state.activeChain,s=r===X.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ne.state.defaultAccountTypes[r],o=(l=ce.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;bg.isLowerCaseMatch(n.address,ce.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...ce.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Ce.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Ce.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...ce.state.user||{},username:n},$.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,$.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,$.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===$.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=ce.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=zr.getSnapshot(),u=ne.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:Do(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:X.CONNECTOR_ID.AUTH,info:{name:X.CONNECTOR_ID.AUTH},type:Lt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=$.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):ue.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),le.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Ce.isTelegram())return;const r=le.getTelegramSocialProvider();if(!r||!Ce.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;ce.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=ue.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ve.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),le.setConnectedSocialProvider(r),le.removeTelegramSocialProvider(),wt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=bg.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=jl.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:Wt.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?ln.open(Wt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?ln.open(Wt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&ln.open(Wt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Zi.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===$.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&xe.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=$.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Ct.getProvider(r),u=Ct.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Ct.getProviderId(n)===Lt.CONNECTOR_TYPE_AUTH,u=Ct.getProviderId(r),d=u===Lt.CONNECTOR_TYPE_AUTH,h=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if($.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:X.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Lt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Lt.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Zi.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==X.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Ct.getProviderId(e);if(n===Lt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=le.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Ce.isClient()&&!IO)try{const e={...yt.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Ce.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ne.state.disableAppend&&!ne.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}IO=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Ce.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(rn(()=>import("./embedded-wallet-C3biWeAu.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(rn(()=>import("./email-BrbP-rdK.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(rn(()=>import("./socials-5oeCwp5A.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(rn(()=>import("./swaps-CEgEa65T.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(rn(()=>import("./send-C84diajF.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(rn(()=>import("./receive-BsEGCOkE.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(rn(()=>import("./onramp-B_9SRqcK.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(rn(()=>import("./transactions-Byg19UW-.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(rn(()=>import("./index-CJQimvzx.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,rn(()=>import("./index-DX2X8cNY.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),rn(()=>import("./w3m-modal-BA8pBHif.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let Aa;function mbe(t){t&&(Aa=t)}function bm(){if(!Aa)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Aa==null?void 0:Aa.open(n))}async function e(){await(Aa==null?void 0:Aa.close())}return{open:t,close:e}}const ybe="1.7.10";let ky;function wbe(t){return ky||(ky=new gbe({...t,sdkVersion:Ce.generateSdkVersion(t.adapters??[],"react",ybe)}),mbe(ky)),ky}const vbe=Ii({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),TO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],bbe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=vbe({isOpen:t}),{open:i}=bm(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,w]=D.useState(1),[y,b]=D.useState(1),[v,_]=D.useState(0),[E,x]=D.useState(null),[S,T]=D.useState(TO[0]),[C,O]=D.useState(!1),[R,B]=D.useState(null),W=D.useCallback(async()=>{var k,U;try{if((k=window.solana)!=null&&k.isPhantom){const z=await window.solana.connect();B(z.publicKey.toString());return}if((U=window.solflare)!=null&&U.isSolflare){const z=await window.solflare.connect();B(z.publicKey.toString());return}i()}catch(z){console.error("Failed to connect Solana wallet:",z),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);D.useEffect(()=>{var k,U;(k=window.solana)!=null&&k.publicKey?B(window.solana.publicKey.toString()):(U=window.solflare)!=null&&U.publicKey&&B(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var U;u(!0),h(null);try{let z,V=f==="owned"&&r||void 0;if(S.api==="opensea-solana"){if(f==="owned"&&!R){O(!0),u(!1);return}V=R||void 0,z=await F8(S.slug,50),console.log("Fetched Solana NFTs from collection:",z.data.length),f==="owned"&&R&&(console.log("Filtering for owner:",R),console.log("Sample NFT owner data:",(U=z.data[0])==null?void 0:U.owners),console.log("All NFTs owner data:",z.data.map(Y=>({name:Y.name,owners:Y.owners,owner_of:Y.owner_of}))),z.data.some(Y=>Y.owners&&Y.owners.length>0)?(z.data=z.data.filter(Y=>{const Z=Y.owners.some(se=>se.owner_of&&se.owner_of.toLowerCase()===R.toLowerCase());return Z&&console.log("Found owned NFT:",Y.name),Z}),console.log("NFTs after filtering:",z.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else S.api==="opensea"?z=await _A(S.slug,50,V):z=await EA(S.slug,g,50,V);c(z.data),b(z.totalPages),_(z.totalCount)}catch(z){z instanceof Error?h(z.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,S,R]),D.useEffect(()=>{C&&W()},[C,W]);const M=k=>new Date(k).toLocaleDateString(),I=k=>S.api==="opensea-solana"&&(!k.owners||k.owners.length===0)?"Owner data unavailable":k.owners.length>0?`${k.owners[0].owner_of.substring(0,6)}...`:"N/A",A=()=>{n&&n()},j=async k=>{if(S.api==="opensea"&&S.chain)try{const U=await B8(S.chain,k.address,k.token_id.toString()),z={...k,attributes:JSON.stringify(U.traits||[])};x(z)}catch(U){console.error("Failed to fetch full NFT details",U),x(k)}else x(k)},P=k=>{T(k),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(sm,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:A,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:TO.map(k=>m.jsx("button",{className:`${s.collectionButton} ${S.slug===k.slug?"active":""}`,onClick:()=>P(k),children:k.name},k.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!R,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||R?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||R?1:.6},children:"My NFTs"}),S.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{W()},style:{background:R?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:R?"white":"black",marginLeft:"auto"},children:R?`Solana: ${R.slice(0,4)}...${R.slice(-4)}`:"Connect Solana"})]}),S.api==="opensea-solana"&&!R&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(k=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{j(k)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${k.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",k.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I(k)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",M(k.created_at)]})]},k.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(k=>Math.max(1,k-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(k=>Math.min(y,k+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),E&&m.jsx(PZ,{nft:E,onClose:()=>x(null)})]}):null},Ebe=Ii({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),_be=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}];function bU(){const t=Ebe(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(36),[u,d]=D.useState(36),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[w,y]=D.useState(!1),[b,v]=D.useState(!1),[_,E]=D.useState(!1),x=D.useCallback(()=>{const M=P=>{const k=e.current;if(!k)return;P.textAlign="center";const U=(z,V)=>{const Q=z.split(" "),Y=[];let Z="";for(let se=0;se<Q.length;se++){const Ne=Z?Z+" "+Q[se]:Q[se];P.measureText(Ne).width<=V?Z=Ne:(Z&&Y.push(Z),Z=Q[se])}return Z&&Y.push(Z),Y};if(s){P.font=`bold ${c}px Impact`;const z=k.width*.9;(function(){return P.font=`bold ${c}px Impact`,U(s,z)})().forEach((Q,Y)=>{const Z=c+10+Y*c*1.2;P.strokeStyle="#000",P.lineWidth=4,P.strokeText(Q,k.width/2,Z),P.fillStyle="#fff",P.fillText(Q,k.width/2,Z)})}if(o){P.font=`bold ${u}px Impact`;const z=k.width*.9,V=function(){return P.font=`bold ${u}px Impact`,U(o,z)}(),Q=12;V.forEach((Y,Z)=>{const se=k.height-Q-(V.length-1-Z)*u*1.2;P.strokeStyle="#000",P.lineWidth=4,P.strokeText(Y,k.width/2,se),P.fillStyle="#fff",P.fillText(Y,k.width/2,se)})}},I=P=>{try{h&&S(P),p&&T(P),w&&C(P)}catch{console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead."),f(!1),g(!1),y(!1)}},A=e.current;if(!A)return;const j=A.getContext("2d");if(j)if(j.clearRect(0,0,A.width,A.height),n){console.log("Loading image:",n);const P=new Image;P.crossOrigin="anonymous",P.onload=()=>{console.log("Image loaded successfully:",P.width,"x",P.height);const k=e.current;if(!k||k!==A)return;const U=k.getContext("2d");if(!U)return;U.clearRect(0,0,k.width,k.height);const z=Math.min(k.width/P.width,k.height/P.height),V=(k.width-P.width*z)/2,Q=(k.height-P.height*z)/2;console.log("Drawing image at:",V,Q,"with scale:",z),U.drawImage(P,V,Q,P.width*z,P.height*z),M(U),I(k)},P.onerror=k=>{console.error("Failed to load image:",n,k);const U=e.current;if(!U||U!==A)return;const z=U.getContext("2d");z&&(z.clearRect(0,0,U.width,U.height),z.fillStyle="#333",z.fillRect(0,0,U.width,U.height),M(z),I(U))},P.src=n}else j.fillStyle="#333",j.fillRect(0,0,A.width,A.height),M(j),I(A)},[n,s,c,o,u,h,p,w]),S=M=>{const I=M.getContext("2d");if(!I)return;const A=I.getImageData(0,0,M.width,M.height),j=A.data;for(let P=0;P<j.length;P+=4){const k=j[P],U=j[P+1],z=j[P+2],V=(k+U+z)/3,Q=1.8;j[P]=Math.min(255,V+(k-V)*Q),j[P+1]=Math.min(255,V+(U-V)*Q*.7),j[P+2]=Math.min(255,V+(z-V)*Q*.4);const Y=1.3;j[P]=Math.min(255,Math.max(0,j[P]*Y)),j[P+1]=Math.min(255,Math.max(0,j[P+1]*Y)),j[P+2]=Math.min(255,Math.max(0,j[P+2]*Y))}I.putImageData(A,0,0)},T=M=>{const I=M.getContext("2d");if(!I)return;const A=4,P=I.getImageData(0,0,M.width,M.height).data,k=new Uint8ClampedArray(P);for(let U=0;U<M.height;U+=A)for(let z=0;z<M.width;z+=A){const V=(U*M.width+z)*4,Q=P[V],Y=P[V+1],Z=P[V+2],se=P[V+3];for(let Ne=0;Ne<A&&U+Ne<M.height;Ne++)for(let ke=0;ke<A&&z+ke<M.width;ke++){const $e=((U+Ne)*M.width+(z+ke))*4;k[$e]=Q,k[$e+1]=Y,k[$e+2]=Z,k[$e+3]=se}}I.putImageData(new ImageData(k,M.width,M.height),0,0)},C=M=>{const I=M.getContext("2d");if(!I)return;const A=I.getImageData(0,0,M.width,M.height),j=A.data;for(let P=0;P<j.length;P+=4){const k=(Math.random()-.5)*50;j[P]=Math.max(0,Math.min(255,j[P]+k)),j[P+1]=Math.max(0,Math.min(255,j[P+1]+k)),j[P+2]=Math.max(0,Math.min(255,j[P+2]+k))}I.putImageData(A,0,0)};D.useEffect(()=>{x()},[x]);const O=M=>{var A;const I=(A=M.target.files)==null?void 0:A[0];I&&r(URL.createObjectURL(I))},R=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),y(!1)},B=()=>{const M=e.current;if(!M)return;const I=document.createElement("a");I.download="meme.png",I.href=M.toDataURL("image/png"),document.body.appendChild(I),I.click(),document.body.removeChild(I)},W=async M=>{E(!0),v(!1);try{console.log("Fetching NFTs for collection:",M);let I;if(M.api==="opensea"){console.log("Using OpenSea API for:",M.slug);const A=await _A(M.slug,50);I=A.data,console.log("OpenSea response:",A)}else if(M.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",M.slug);const A=await F8(M.slug,50);I=A.data,console.log("OpenSea Solana response:",A)}else{console.log("Using Scatter API for:",M.slug);const A=await EA(M.slug,1,50);I=A.data,console.log("Scatter response:",A)}if(I&&I.length>0){const A=I[Math.floor(Math.random()*I.length)],j=A.image||A.image_url||A.image_url_shrunk;console.log("Selected NFT:",A),console.log("Image URL:",j),r(j)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(I){console.error("Error fetching NFTs:",I),alert("Failed to fetch NFT images. Check console for details.")}finally{E(!1)}};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(M=>!M),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:_be.map(M=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{W(M)},children:M.name},M.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:O})]}),_&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:M=>i(M.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:M=>l(Number(M.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:M=>a(M.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:M=>d(Number(M.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(M=>!M),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(M=>!M),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(M=>!M),children:"Grain"})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:B,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:R,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:320,height:320,className:t.canvas})})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jg(){return jg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jg.apply(this,arguments)}var oc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(oc||(oc={}));const NO="popstate";function Cbe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Sx("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_U(s)}return Sbe(e,n,null,t)}function En(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function EU(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xbe(){return Math.random().toString(36).substr(2,8)}function PO(t,e){return{usr:t.state,key:t.key,idx:e}}function Sx(t,e,n,r){return n===void 0&&(n=null),jg({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Dh(e):e,{state:n,key:e&&e.key||r||xbe()})}function _U(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Dh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Sbe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=oc.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(jg({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=oc.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=oc.Push;let b=Sx(g.location,w,y);l=u()+1;let v=PO(b,l),_=g.createHref(b);try{o.pushState(v,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(_)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=oc.Replace;let b=Sx(g.location,w,y);l=u();let v=PO(b,l),_=g.createHref(b);o.replaceState(v,"",_),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:_U(w);return b=b.replace(/ $/,"%20"),En(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(NO,d),c=w,()=>{s.removeEventListener(NO,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var kO;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(kO||(kO={}));function Abe(t,e,n){return n===void 0&&(n="/"),Ibe(t,e,n)}function Ibe(t,e,n,r){let s=typeof e=="string"?Dh(e):e,i=SU(s.pathname||"/",n);if(i==null)return null;let o=CU(t);Tbe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=Bbe(i);a=Ube(o[c],l)}return a}function CU(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(En(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Ll([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(En(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),CU(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:Dbe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of xU(i.path))s(i,o,c)}),e}function xU(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=xU(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function Tbe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jbe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Nbe=/^:[\w-]+$/,Pbe=3,kbe=2,Obe=1,Rbe=10,$be=-2,OO=t=>t==="*";function Dbe(t,e){let n=t.split("/"),r=n.length;return n.some(OO)&&(r+=$be),e&&(r+=kbe),n.filter(s=>!OO(s)).reduce((s,i)=>s+(Nbe.test(i)?Pbe:i===""?Obe:Rbe),r)}function jbe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ube(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=Lbe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Ll([i,d.pathname]),pathnameBase:Vbe(Ll([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Ll([i,d.pathnameBase]))}return o}function Lbe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Mbe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function Mbe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),EU(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Bbe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return EU(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function SU(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Fbe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Dh(t):t;return{pathname:n?n.startsWith("/")?n:zbe(n,e):e,search:Gbe(r),hash:Kbe(s)}}function zbe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Wbe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qbe(t,e){let n=Wbe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Hbe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Dh(t):(s=jg({},t),En(!s.pathname||!s.pathname.includes("?"),pE("?","pathname","search",s)),En(!s.pathname||!s.pathname.includes("#"),pE("#","pathname","hash",s)),En(!s.search||!s.search.includes("#"),pE("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=Fbe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Ll=t=>t.join("/").replace(/\/\/+/g,"/"),Vbe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Gbe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Kbe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ybe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const AU=["post","put","patch","delete"];new Set(AU);const Jbe=["get",...AU];new Set(Jbe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ug(){return Ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ug.apply(this,arguments)}const dI=D.createContext(null),Qbe=D.createContext(null),Wv=D.createContext(null),qv=D.createContext(null),jh=D.createContext({outlet:null,matches:[],isDataRoute:!1}),IU=D.createContext(null);function Hv(){return D.useContext(qv)!=null}function TU(){return Hv()||En(!1),D.useContext(qv).location}function NU(t){D.useContext(Wv).static||D.useLayoutEffect(t)}function Zbe(){let{isDataRoute:t}=D.useContext(jh);return t?d1e():Xbe()}function Xbe(){Hv()||En(!1);let t=D.useContext(dI),{basename:e,future:n,navigator:r}=D.useContext(Wv),{matches:s}=D.useContext(jh),{pathname:i}=TU(),o=JSON.stringify(qbe(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return NU(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=Hbe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ll([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function e1e(t,e){return t1e(t,e)}function t1e(t,e,n,r){Hv()||En(!1);let{navigator:s}=D.useContext(Wv),{matches:i}=D.useContext(jh),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=TU(),u;if(e){var d;let w=typeof e=="string"?Dh(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||En(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=Abe(t,{pathname:f}),g=o1e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ll([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ll([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?D.createElement(qv.Provider,{value:{location:Ug({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:oc.Pop}},g):g}function n1e(){let t=u1e(),e=Ybe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const r1e=D.createElement(n1e,null);class s1e extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(jh.Provider,{value:this.props.routeContext},D.createElement(IU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i1e(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(dI);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(jh.Provider,{value:e},r)}function o1e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||En(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||r1e,c&&(l<0&&h===0?(h1e("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(i1e,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(s1e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var PU=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(PU||{}),kU=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kU||{});function a1e(t){let e=D.useContext(dI);return e||En(!1),e}function c1e(t){let e=D.useContext(Qbe);return e||En(!1),e}function l1e(t){let e=D.useContext(jh);return e||En(!1),e}function OU(t){let e=l1e(),n=e.matches[e.matches.length-1];return n.route.id||En(!1),n.route.id}function u1e(){var t;let e=D.useContext(IU),n=c1e(),r=OU();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function d1e(){let{router:t}=a1e(PU.UseNavigateStable),e=OU(kU.UseNavigateStable),n=D.useRef(!1);return NU(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ug({fromRouteId:e},i)))},[t,e])}const RO={};function h1e(t,e,n){RO[t]||(RO[t]=!0)}function f1e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gw(t){En(!1)}function p1e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=oc.Pop,navigator:i,static:o=!1,future:a}=t;Hv()&&En(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:Ug({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Dh(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let w=SU(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(Wv.Provider,{value:l},D.createElement(qv.Provider,{children:n,value:g}))}function g1e(t){let{children:e,location:n}=t;return e1e(Ax(e),n)}new Promise(()=>{});function Ax(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Ax(r.props.children,i));return}r.type!==gw&&En(!1),!r.props.index||!r.props.children||En(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ax(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const m1e="6";try{window.__reactRouterVersion=m1e}catch{}const y1e="startTransition",$O=zL[y1e];function w1e(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=Cbe({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&$O?$O(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>f1e(r),[r]),D.createElement(p1e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var DO;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DO||(DO={}));var jO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jO||(jO={}));const v1e=Ii({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function b1e(){const t=v1e(),{open:e}=bm(),{address:n,isConnected:r}=nm(),{isPending:s}=O5(),{disconnect:i}=R5(),{data:o}=$5({address:n}),[a,c]=D.useState("pixelawbs-popup"),[l,u]=D.useState(new Set),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),v=Zbe(),_=D.useRef(null);D.useEffect(()=>{if(a==="halloween-popup"&&_.current){const A=_.current.querySelector("script[data-tiktok-embed]");A&&A.remove();const j=document.createElement("script");j.src="https://www.tiktok.com/embed.js",j.async=!0,j.setAttribute("data-tiktok-embed","true"),_.current.appendChild(j)}},[a]);const E=(A,j,P)=>{if(A==="url"&&P)window.open(P,"_blank");else if(A==="popup"&&j)c(j),u(k=>{const U=new Set(k);return U.delete(j),U}),document.body.offsetWidth;else if(A==="wallet")r?i():e();else if(A==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else A==="nft-gallery"?p(!0):A==="meme-generator"?w(!0):A==="chess"&&(r?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):e().then(()=>{const k=()=>{window.ethereum&&window.ethereum.selectedAddress?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):setTimeout(k,200)};k()}))},x=()=>c(null),S=A=>{u(j=>new Set(j).add(A)),c(null)},T=A=>{A==="mint-popup"?h(!0):A==="nft-gallery-popup"?p(!0):A==="meme-generator-popup"?w(!0):c(A),u(j=>{const P=new Set(j);return P.delete(A),P})},C=()=>h(!1),O=()=>p(!1),R=()=>w(!1),B=()=>{h(!1),u(A=>new Set(A).add("mint-popup"))},W=()=>{p(!1),u(A=>new Set(A).add("nft-gallery-popup"))},M=()=>{w(!1),u(A=>new Set(A).add("meme-generator-popup"))},I=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[y&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(_Z,{onIconClick:E}),m.jsx(xZ,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:I,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(Os,{id:"chat-popup",isOpen:a==="chat-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Os,{id:"purity-popup",isOpen:a==="purity-popup",onClose:x,onMinimize:S,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Os,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Os,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Os,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(Os,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(zK,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(Os,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:x,onMinimize:S,children:(()=>{const A=j=>{j.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:A,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(Os,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:x,onMinimize:S,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:_,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(Os,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:x,onMinimize:S,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{src:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&theme=dark&info=0",title:"DexScreener",style:{width:"100%",height:"100%",border:"none"}})})]}),m.jsx(IZ,{isOpen:d,onClose:C,onMinimize:B,walletAddress:n||""}),m.jsx(bbe,{isOpen:f,onClose:O,onMinimize:W,walletAddress:n}),m.jsx(Os,{id:"meme-generator-popup",isOpen:g,onClose:R,onMinimize:M,children:m.jsx(bU,{})})]})}const E1e=Ii({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),UO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],_1e=({onBack:t,walletAddress:e})=>{const n=E1e(),{open:r}=bm(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(UO[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[w,y]=D.useState("all"),[b,v]=D.useState(null),_=D.useCallback(async()=>{var T,C;try{if((T=window.solana)!=null&&T.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((C=window.solflare)!=null&&C.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var T,C;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(C=window.solflare)!=null&&C.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let C,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,C=await SZ(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",C.data.length)}else u.api==="opensea"?C=await _A(u.slug,100,O):C=await EA(u.slug,1,100,O);w==="owned"&&p&&(console.log("Filtering for owner:",p),C.data.some(B=>B.owners&&B.owners.length>0)?C.data=C.data.filter(B=>B.owners.some(M=>M.owner_of&&M.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(C.data)}catch(C){console.error(C)}finally{a(!1)}})()},[e,u,p,w]),D.useEffect(()=>{h&&_()},[h,_]);const E=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const C=await B8(u.chain,T.address,T.token_id.toString()),O={...T,attributes:JSON.stringify(C.traits||[])};l(O)}catch(C){console.error("Failed to fetch full NFT details",C),l(T)}else l(T);a(!1)},x=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(C){console.error("Failed to parse NFT attributes:",C)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:T.map((C,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[C.trait_type,":"]})," ",C.value]},O))})]})},S=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:UO.map(T=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{_()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(T=>{let C=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void E(T),children:[m.jsx("img",{src:C,alt:T.name,onError:O=>{O.currentTarget.src!==T.image_url&&T.image_url?O.currentTarget.src=T.image_url:O.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?O.currentTarget.src=T.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:T.name})]},T.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?x():S()})]})},C1e=Ii({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),ri=({isOpen:t,onClose:e,title:n,children:r})=>{const s=C1e();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},x1e=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=D5();D.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const _=await L8(n);s(_);const E={};_.forEach(x=>{E[x.id]=0}),u(E)}catch(_){h(_.message)}finally{o(!1)}},g=(_,E)=>{u(x=>({...x,[_]:Math.max(0,E)}))},w=async()=>{const _=Object.entries(l).filter(([,E])=>E>0).map(([E,x])=>({id:E,quantity:x}));if(_.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const E=await M8(n,_);if(E.success&&E.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const x=await f.sendTransaction({to:E.mintTransaction.to,value:BigInt(E.mintTransaction.value),data:E.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${x}`),e()}catch(x){h("Transaction failed: "+x.message)}}else throw new Error(E.message||"Could not retrieve minting transaction.")}catch(E){h("Minting failed: "+E.message)}finally{c(!1)}},y=(_,E)=>`${parseFloat(_)} ${E}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(ri,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:v,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(_=>m.jsxs("div",{style:b,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:_.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(_.token_price,_.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",_.wallet_limit===4294967295?"Unlimited":_.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:_.wallet_limit===4294967295?void 0:_.wallet_limit,value:l[_.id]||"",onChange:E=>g(_.id,parseInt(E.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},_.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},S1e=Ii({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),A1e=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],I1e=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],T1e=()=>{const t=S1e(),{open:e}=bm(),{address:n,isConnected:r}=nm(),{isPending:s}=O5(),{disconnect:i}=R5(),{data:o}=$5({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),[v,_]=D.useState(!1),[E,x]=D.useState(!1),[S,T]=D.useState(!1),[C,O]=D.useState(!1),[R,B]=D.useState(!1),[W,M]=D.useState(!1),[I,A]=D.useState(!1),[j,P]=D.useState(!1),[k,U]=D.useState(!1),z=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>_(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>x(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],V=Z=>{Z.disabled||Z.action()};if(D.useEffect(()=>{const Z=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(Z)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(_1e,{onBack:()=>c("main"),walletAddress:n||void 0});function Q({open:Z,onClose:se,title:Ne,nfts:ke}){const $e=Ke=>{switch(Ke){case"lawbsters":T(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":B(!0);break;case"halloween":M(!0);break;case"lawbstation":A(!0);break;case"nexus":P(!0);break}};return m.jsx(ri,{isOpen:Z,onClose:se,title:Ne,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:ke.map(Ke=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>$e(Ke.id),children:[m.jsx("img",{src:Ke.image,alt:Ke.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:Ke.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:Ke.description})]},Ke.id))})})}function Y({open:Z,onClose:se}){return Z?m.jsxs(ri,{isOpen:Z,onClose:se,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:z.map(Z=>m.jsxs("div",{className:t.icon,onClick:()=>V(Z),children:[m.jsx("img",{src:Z.icon,alt:Z.label}),m.jsx("span",{children:Z.label})]},Z.label))}),l&&m.jsxs(ri,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:Z=>Z.stopPropagation(),children:[m.jsx("a",{href:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Dexscreener"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),U(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(x1e,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(Q,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:A1e}),m.jsx(Q,{open:v,onClose:()=>_(!1),title:"SOL NFTS FOLDER",nfts:I1e}),m.jsx(Y,{open:E,onClose:()=>x(!1)}),m.jsxs(ri,{isOpen:S,onClose:()=>T(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(ri,{isOpen:C,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(ri,{isOpen:R,onClose:()=>B(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{B(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(ri,{isOpen:W,onClose:()=>M(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(ri,{isOpen:I,onClose:()=>A(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(ri,{isOpen:j,onClose:()=>P(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(ri,{isOpen:k,onClose:()=>U(!1),title:"Meme Generator",children:m.jsx(bU,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function N1e(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function P1e(t){let e=[],n,r;function s(a){return lg.parseEvmChainId(a)||1}function i(){var a;return n||(n=jl.getInstance({projectId:t.options.projectId,chainId:(a=$.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?ln.open(Wt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?ln.open(Wt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&ln.open(Wt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Wt.EmbeddedWalletAbortController})),n}async function o(a={}){var g,w;const c=i();let l=a.chainId;if(a.isReconnecting){const y=lg.parseEvmChainId(c.getLastUsedChainId()||""),b=(g=t.chains)==null?void 0:g[0].id;if(l=y||b,!l)throw new Error("ChainId not found in provider")}const u=(w=ce.state.preferredAccountTypes)==null?void 0:w.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:X.CONNECTOR_ID.AUTH,name:X.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:X.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=jl.getInstance({projectId:t.options.projectId,chainId:(c=$.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Wt.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?ln.open(Wt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?ln.open(Wt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&ln.open(Wt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=$.state.activeChain===X.CHAIN.EVM;if(X.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>ue.getConnectorId(h)===X.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new no(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=ce.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(g=>g.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new no(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(tc)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}hI.type="walletConnect";function hI(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:hI.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=$.getCaipNetworks(),w=await this.getProvider();if(!w)throw new Pa;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=ne.state.universalProviderConfigOverride;if(!w.session||y){const C=pp.createNamespaces(g,b);await w.connect({optionalNamespaces:C,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),_=await this.getChainId(),E=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,x=E==null?void 0:E.some(C=>Number(C.split(":")[1])===_);let S=1;x?S=_:E!=null&&E[0]&&(S=Number(E[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const T=b==null?void 0:b.defaultChain;return w.setDefaultChain(T??`eip155:${S}`),{accounts:v,chainId:S}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new mn(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,g,w;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(w=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[X.CHAIN.EVM])==null?void 0:w.accounts;return(h==null?void 0:h.map(y=>y.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=le.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=le.getStoredActiveCaipNetworkId(),y=e.getCaipNetworks(h),b=y==null?void 0:y.find(v=>v.id===w);b&&b.chainNamespace===X.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(X.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[X.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=$.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new Pa;const p=$.getCaipNetworks().find(v=>v.id===h);if(!p)throw new no(new ng);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:je(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const _=v;if(/(?:user rejected)/iu.test(_.message))throw new mn(_);try{let E;d!=null&&d.blockExplorerUrls?E=d.blockExplorerUrls:E=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const x=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],S={blockExplorerUrls:E,chainId:je(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:x};await f.request({method:"wallet_addEthereumChain",params:[S]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(E){throw new mn(E)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>tc(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds($.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[X.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Ef=Ot({pendingTransactions:0}),LO={state:Ef,subscribeKey(t,e){return Gn(Ef,t,e)},increase(t){Ef[t]+=1},decrease(t){Ef[t]-=1},reset(t){Ef[t]=0}};function k1e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function O1e(t){if(Ce.isSafeApp()){const{safe:e}=await rn(async()=>{const{safe:n}=await import("./index-BoccvWip.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function R1e(t){try{const{coinbaseWallet:e}=await rn(async()=>{const{coinbaseWallet:n}=await import("./index-BoccvWip.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const $1e={enable:!1,pollingInterval:3e4};class D1e extends vU{constructor(e){const n=Ki.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=X.CHAIN.EVM,this.adapterType=X.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...$1e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===X.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Ce.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Td(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Ce.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Td(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===X.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Ki.getCaipNetworkId(s);i?n[s.id]=Ki.extendWagmiTransports(s,e.projectId,i):n[s.id]=Ki.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Nq({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=cq(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),LO.increase("pendingTransactions")}});const e=LO.subscribeKey("pendingTransactions",n=>{var r;n>=X.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){o5(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await R1e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await O1e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(hI(e,n)),e.enableInjected!==!1&&r.push(nv({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(P1e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await sq(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Td(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await nq(this.wagmiConfig,s);const i=await rq(this.wagmiConfig,s);return await lq(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(lg.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await uq(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await YW(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return wW(e.value,e.decimals)}formatUnits(e){return bh(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===X.CONNECTOR_ID.AUTH||e.id===X.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:ic.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:ic.ConnectorNamesMap[e.id]??e.name,imageId:ic.ConnectorImageIds[e.id],type:ic.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===X.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){a5(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Bi(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Ce.isSafeApp()&&n===X.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await Zy(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Zy(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await hT(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===X.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:r,type:s,id:n}}const l=await Zy(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await U_(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=le.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await XW(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});le.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=Bi(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await s5(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await hT(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Bi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=k1e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Bi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Bi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Bi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=Bi(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if($.state.activeChain==="eip155")return;U_(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new uI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const RU="7c65f27254d6ddd24cf7eedf2685c4fb",j1e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},$U=new D1e({networks:[wU],projectId:RU,ssr:!1});wbe({adapters:[$U],networks:[wU],projectId:RU,metadata:j1e,features:{analytics:!1}});const U1e=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Uh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class fI extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class L1e extends fI{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class M1e extends fI{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class B1e extends fI{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ix;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ix||(Ix={}));var F1e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class z1e{constructor(e,{headers:n={},customFetch:r,region:s=Ix.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=U1e(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return F1e(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new L1e(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new M1e(u);if(!u.ok)throw new B1e(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var Vr={},pI={},Vv={},Em={},Gv={},Kv={},W1e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},fh=W1e();const q1e=fh.fetch,DU=fh.fetch.bind(fh),jU=fh.Headers,H1e=fh.Request,V1e=fh.Response,Uh=Object.freeze(Object.defineProperty({__proto__:null,Headers:jU,Request:H1e,Response:V1e,default:DU,fetch:q1e},Symbol.toStringTag,{value:"Module"})),G1e=T0(Uh);var Yv={};Object.defineProperty(Yv,"__esModule",{value:!0});let K1e=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Yv.default=K1e;var UU=en&&en.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kv,"__esModule",{value:!0});const Y1e=UU(G1e),J1e=UU(Yv);let Q1e=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Y1e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new J1e.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Kv.default=Q1e;var Z1e=en&&en.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gv,"__esModule",{value:!0});const X1e=Z1e(Kv);let eEe=class extends X1e.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Gv.default=eEe;var tEe=en&&en.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Em,"__esModule",{value:!0});const nEe=tEe(Gv);let rEe=class extends nEe.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Em.default=rEe;var sEe=en&&en.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vv,"__esModule",{value:!0});const _f=sEe(Em);let iEe=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new _f.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new _f.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new _f.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new _f.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new _f.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Vv.default=iEe;var Jv={},Qv={};Object.defineProperty(Qv,"__esModule",{value:!0});Qv.version=void 0;Qv.version="0.0.0-automated";Object.defineProperty(Jv,"__esModule",{value:!0});Jv.DEFAULT_HEADERS=void 0;const oEe=Qv;Jv.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${oEe.version}`};var LU=en&&en.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pI,"__esModule",{value:!0});const aEe=LU(Vv),cEe=LU(Em),lEe=Jv;let uEe=class MU{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},lEe.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new aEe.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new MU(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new cEe.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};pI.default=uEe;var Lh=en&&en.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.PostgrestError=Vr.PostgrestBuilder=Vr.PostgrestTransformBuilder=Vr.PostgrestFilterBuilder=Vr.PostgrestQueryBuilder=Vr.PostgrestClient=void 0;const BU=Lh(pI);Vr.PostgrestClient=BU.default;const FU=Lh(Vv);Vr.PostgrestQueryBuilder=FU.default;const zU=Lh(Em);Vr.PostgrestFilterBuilder=zU.default;const WU=Lh(Gv);Vr.PostgrestTransformBuilder=WU.default;const qU=Lh(Kv);Vr.PostgrestBuilder=qU.default;const HU=Lh(Yv);Vr.PostgrestError=HU.default;var dEe=Vr.default={PostgrestClient:BU.default,PostgrestQueryBuilder:FU.default,PostgrestFilterBuilder:zU.default,PostgrestTransformBuilder:WU.default,PostgrestBuilder:qU.default,PostgrestError:HU.default};const{PostgrestClient:hEe,PostgrestQueryBuilder:Pxe,PostgrestFilterBuilder:kxe,PostgrestTransformBuilder:Oxe,PostgrestBuilder:Rxe,PostgrestError:$xe}=dEe;function fEe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const pEe=fEe(),gEe="2.11.13",mEe={"X-Client-Info":`realtime-js/${gEe}`},yEe="1.0.0",VU=1e4,wEe=1e3;var gp;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(gp||(gp={}));var or;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(or||(or={}));var ui;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ui||(ui={}));var Tx;(function(t){t.websocket="websocket"})(Tx||(Tx={}));var ul;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ul||(ul={}));class vEe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class GU{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Nt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Nt||(Nt={}));const MO=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=bEe(o,t,e,s),i),{})},bEe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?KU(i,o):Nx(o)},KU=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return xEe(e,n)}switch(t){case Nt.bool:return EEe(e);case Nt.float4:case Nt.float8:case Nt.int2:case Nt.int4:case Nt.int8:case Nt.numeric:case Nt.oid:return _Ee(e);case Nt.json:case Nt.jsonb:return CEe(e);case Nt.timestamp:return SEe(e);case Nt.abstime:case Nt.date:case Nt.daterange:case Nt.int4range:case Nt.int8range:case Nt.money:case Nt.reltime:case Nt.text:case Nt.time:case Nt.timestamptz:case Nt.timetz:case Nt.tsrange:case Nt.tstzrange:return Nx(e);default:return Nx(e)}},Nx=t=>t,EEe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},_Ee=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},CEe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},xEe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>KU(e,a))}return t},SEe=t=>typeof t=="string"?t.replace(" ","T"):t,YU=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class gE{constructor(e,n,r={},s=VU){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var BO;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(BO||(BO={}));class mp{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=mp.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=mp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),p=u.filter(w=>f.indexOf(w.presence_ref)<0),g=d.filter(w=>h.indexOf(w.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var FO;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(FO||(FO={}));var zO;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zO||(zO={}));var So;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(So||(So={}));class gI{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=or.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new gE(this,ui.join,this.params,this.timeout),this.rejoinTimer=new GU(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=or.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=or.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=or.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=or.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ui.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new mp(this),this.broadcastEndpointURL=YU(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==or.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(So.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(So.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(So.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const w=h[g],{filter:{event:y,schema:b,table:v,filter:_}}=w,E=u&&u[g];if(E&&E.event===y&&E.schema===b&&E.table===v&&E.filter===_)p.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=or.errored,e==null||e(So.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(So.SUBSCRIBED);return}}).receive("error",u=>{this.state=or.errored,e==null||e(So.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(So.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=or.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ui.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new gE(this,ui.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new gE(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=ui;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,w;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(g=f.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,w,y,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,E=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((g=n.ids)===null||g===void 0?void 0:g.includes(_))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(b=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:w,commit_timestamp:y,type:b,errors:v}=p;h=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:y,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===or.closed}_isJoined(){return this.state===or.joined}_isJoining(){return this.state===or.joining}_isLeaving(){return this.state===or.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&gI.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ui.close,{},e)}_onError(e){this._on(ui.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=or.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=MO(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=MO(e.columns,e.old_record)),n}}const WO=()=>{},AEe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class IEe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=mEe,this.params={},this.timeout=VU,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=WO,this.ref=0,this.logger=WO,this.conn=null,this.sendBuffer=[],this.serializer=new vEe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>rn(async()=>{const{default:c}=await Promise.resolve().then(()=>Uh);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Tx.websocket}`,this.httpEndpoint=YU(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new GU(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=pEe),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yEe}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case gp.connecting:return ul.Connecting;case gp.open:return ul.Open;case gp.closing:return ul.Closing;default:return ul.Closed}}isConnected(){return this.connectionState()===ul.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new gI(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(ui.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(wEe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ui.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([AEe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class mI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function An(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class TEe extends mI{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Px extends mI{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var NEe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const JU=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Uh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},PEe=()=>NEe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rn(()=>Promise.resolve().then(()=>Uh),void 0)).Response:Response}),kx=t=>{if(Array.isArray(t))return t.map(n=>kx(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=kx(r)}),e};var _u=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const mE=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kEe=(t,e,n)=>_u(void 0,void 0,void 0,function*(){const r=yield PEe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new TEe(mE(s),t.status||500))}).catch(s=>{e(new Px(mE(s),s))}):e(new Px(mE(t),t))}),OEe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function _m(t,e,n,r,s,i){return _u(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,OEe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>kEe(c,a,r))})})}function A0(t,e,n,r){return _u(this,void 0,void 0,function*(){return _m(t,"GET",e,n,r)})}function ja(t,e,n,r,s){return _u(this,void 0,void 0,function*(){return _m(t,"POST",e,r,s,n)})}function REe(t,e,n,r,s){return _u(this,void 0,void 0,function*(){return _m(t,"PUT",e,r,s,n)})}function $Ee(t,e,n,r){return _u(this,void 0,void 0,function*(){return _m(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function QU(t,e,n,r,s){return _u(this,void 0,void 0,function*(){return _m(t,"DELETE",e,r,s,n)})}var jr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const DEe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jEe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=JU(s)}uploadOrUpdate(e,n,r,s){return jr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},qO),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(An(i))return{data:null,error:i};throw i}})}upload(e,n,r){return jr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return jr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:qO.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(An(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return jr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield ja(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new mI("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(An(r))return{data:null,error:r};throw r}})}update(e,n,r){return jr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return jr(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(An(s))return{data:null,error:s};throw s}})}copy(e,n,r){return jr(this,void 0,void 0,function*(){try{return{data:{path:(yield ja(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(An(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return jr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ja(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(An(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return jr(this,void 0,void 0,function*(){try{const s=yield ja(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(An(s))return{data:null,error:s};throw s}})}download(e,n){return jr(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield A0(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(An(a))return{data:null,error:a};throw a}})}info(e){return jr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield A0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:kx(r),error:null}}catch(r){if(An(r))return{data:null,error:r};throw r}})}exists(e){return jr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield $Ee(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(An(r)&&r instanceof Px){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return jr(this,void 0,void 0,function*(){try{return{data:yield QU(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(An(n))return{data:null,error:n};throw n}})}list(e,n,r){return jr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},DEe),n),{prefix:e||""});return{data:yield ja(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(An(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const UEe="2.7.1",LEe={"X-Client-Info":`storage-js/${UEe}`};var Yu=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class MEe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},LEe),n),this.fetch=JU(r)}listBuckets(){return Yu(this,void 0,void 0,function*(){try{return{data:yield A0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(An(e))return{data:null,error:e};throw e}})}getBucket(e){return Yu(this,void 0,void 0,function*(){try{return{data:yield A0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(An(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Yu(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(An(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Yu(this,void 0,void 0,function*(){try{return{data:yield REe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(An(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Yu(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(An(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Yu(this,void 0,void 0,function*(){try{return{data:yield QU(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(An(n))return{data:null,error:n};throw n}})}}class BEe extends MEe{constructor(e,n={},r){super(e,n,r)}from(e){return new jEe(this.url,this.headers,e,this.fetch)}}const FEe="2.50.1";let Bf="";typeof Deno<"u"?Bf="deno":typeof document<"u"?Bf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bf="react-native":Bf="node";const zEe={"X-Client-Info":`supabase-js-${Bf}/${FEe}`},WEe={headers:zEe},qEe={schema:"public"},HEe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},VEe={};var GEe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const KEe=t=>{let e;return t?e=t:typeof fetch>"u"?e=DU:e=fetch,(...n)=>e(...n)},YEe=()=>typeof Headers>"u"?jU:Headers,JEe=(t,e,n)=>{const r=KEe(n),s=YEe();return(i,o)=>GEe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var QEe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function ZEe(t){return t.endsWith("/")?t:t+"/"}function XEe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>QEe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const ZU="2.70.0",sd=30*1e3,Ox=3,yE=Ox*sd,e_e="http://localhost:9999",t_e="supabase.auth.token",n_e={"X-Client-Info":`gotrue-js/${ZU}`},Rx="X-Supabase-Api-Version",XU={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},r_e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,s_e=6e5;class yI extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ze(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class i_e extends yI{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function o_e(t){return ze(t)&&t.name==="AuthApiError"}class eL extends yI{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class zc extends yI{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ia extends zc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function a_e(t){return ze(t)&&t.name==="AuthSessionMissingError"}class Oy extends zc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ry extends zc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $y extends zc{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function c_e(t){return ze(t)&&t.name==="AuthImplicitGrantRedirectError"}class HO extends zc{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $x extends zc{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function wE(t){return ze(t)&&t.name==="AuthRetryableFetchError"}class VO extends zc{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class yp extends zc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const I0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),GO=` 	
\r=`.split(""),l_e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<GO.length;e+=1)t[GO[e].charCodeAt(0)]=-2;for(let e=0;e<I0.length;e+=1)t[I0[e].charCodeAt(0)]=e;return t})();function KO(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(I0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(I0[r]),e.queuedBits-=6}}function tL(t,e,n){const r=l_e[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function YO(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{h_e(o,r,n)};for(let o=0;o<t.length;o+=1)tL(t.charCodeAt(o),s,i);return e.join("")}function u_e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function d_e(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}u_e(r,e)}}function h_e(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function f_e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)tL(t.charCodeAt(s),n,r);return new Uint8Array(e)}function p_e(t){const e=[];return d_e(t,n=>e.push(n)),new Uint8Array(e)}function g_e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>KO(s,n,r)),KO(null,n,r),e.join("")}function m_e(t){return Math.round(Date.now()/1e3)+t}function y_e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const si=()=>typeof window<"u"&&typeof document<"u",el={tested:!1,writable:!1},wp=()=>{if(!si())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(el.tested)return el.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),el.tested=!0,el.writable=!0}catch{el.tested=!0,el.writable=!1}return el.writable};function w_e(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const nL=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Uh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},v_e=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",rL=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Dy=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},jy=async(t,e)=>{await t.removeItem(e)};class Zv{constructor(){this.promise=new Zv.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Zv.promiseConstructor=Promise;function vE(t){const e=t.split(".");if(e.length!==3)throw new yp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!r_e.test(e[r]))throw new yp("JWT not in base64url format");return{header:JSON.parse(YO(e[0])),payload:JSON.parse(YO(e[1])),signature:f_e(e[2]),raw:{header:e[0],payload:e[1]}}}async function b_e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function E_e(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function __e(t){return("0"+t.toString(16)).substr(-2)}function C_e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,__e).join("")}async function x_e(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function S_e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await x_e(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ju(t,e,n=!1){const r=C_e();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await rL(t,`${e}-code-verifier`,s);const i=await S_e(r);return[i,r===i?"plain":"s256"]}const A_e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function I_e(t){const e=t.headers.get(Rx);if(!e||!e.match(A_e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function T_e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function N_e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const P_e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qu(t){if(!P_e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var k_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const il=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),O_e=[502,503,504];async function JO(t){var e;if(!v_e(t))throw new $x(il(t),0);if(O_e.includes(t.status))throw new $x(il(t),t.status);let n;try{n=await t.json()}catch(i){throw new eL(il(i),i)}let r;const s=I_e(t);if(s&&s.getTime()>=XU["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new VO(il(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ia}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new VO(il(n),t.status,n.weak_password.reasons);throw new i_e(il(n),t.status||500,r)}const R_e=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ye(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Rx]||(i[Rx]=XU["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await $_e(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function $_e(t,e,n,r,s,i){const o=R_e(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new $x(il(c),0)}if(a.ok||await JO(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await JO(c)}}function Co(t){var e;let n=null;L_e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=m_e(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function QO(t){const e=Co(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function za(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function D_e(t){return{data:t,error:null}}function j_e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=k_e(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function U_e(t){return t}function L_e(t){return t.access_token&&t.refresh_token&&t.expires_in}const bE=["global","local","others"];var M_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class B_e{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=nL(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=bE[0]){if(bE.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bE.join(", ")}`);try{return await Ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:za})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=M_e(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:j_e,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ze(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:za})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await Ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:U_e});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);l[`${w}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(ze(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Qu(e);try{return await Ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:za})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Qu(e);try{return await Ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:za})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Qu(e);try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:za})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Qu(e.userId);try{const{data:n,error:r}=await Ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Qu(e.userId),Qu(e.id);try{return{data:await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}}const F_e={getItem:t=>wp()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{wp()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{wp()&&globalThis.localStorage.removeItem(t)}};function ZO(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function z_e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zu={debug:!!(globalThis&&wp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class W_e extends sL{}async function q_e(t,e,n){Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new W_e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Zu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}z_e();const H_e={url:e_e,storageKey:t_e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:n_e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function XO(t,e,n){return await n()}class Lg{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Lg.nextInstanceID,Lg.nextInstanceID+=1,this.instanceID>0&&si()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},H_e),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new B_e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=nL(s.fetch),this.lock=s.lock||XO,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:si()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=q_e:this.lock=XO,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:wp()?this.storage=F_e:(this.memoryStorage={},this.storage=ZO(this.memoryStorage)):(this.memoryStorage={},this.storage=ZO(this.memoryStorage)),si()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ZU}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=w_e(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),si()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),c_e(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ze(n)?{error:n}:{error:new eL("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Co}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Ju(this.storage,this.storageKey)),i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:Co})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Co})}else throw new Ry("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:QO})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:QO})}else throw new Ry("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Oy}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:w,wallet:y,statement:b,options:v}=e;let _;if(si())if(typeof y=="object")_=y;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))_=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const E=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const x=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),b?{statement:b}:null));let S;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")S=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)S=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const x=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=x}}try{const{data:w,error:y}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:g_e(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Co});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Oy}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(ze(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await Dy(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Co});if(await jy(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Oy}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ze(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Co}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Oy}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Ju(this.storage,this.storageKey));const{error:d}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Ry("You must provide either an email or phone number.")}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Co});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(ze(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ju(this.storage,this.storageKey)),await Ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:D_e})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ia;const{error:s}=await Ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ze(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Ry("You must provide either an email or phone number and a type")}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Dy(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<yE:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:za}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ia}:await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:za})})}catch(n){if(ze(n))return a_e(n)&&(await this._removeSession(),await jy(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ia;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Ju(this.storage,this.storageKey));const{data:l,error:u}=await Ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:za});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ia;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=vE(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ze(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ia;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!si())throw new $y("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $y(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new HO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $y("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new HO("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new $y("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=sd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(ze(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Dy(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(o_e(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await jy(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=y_e(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ju(this.storage,this.storageKey,!0));try{return await Ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ye(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return si()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ze(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await E_e(async s=>(s>0&&await b_e(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Co})),(s,i)=>{const o=200*Math.pow(2,s);return i&&wE(i)&&Date.now()+o-r<sd})}catch(r){if(this._debug(n,"error",r),ze(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),si()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Dy(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<yE;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${yE}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),wE(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ia;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Zv;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ia;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),ze(i)){const o={session:null,error:i};return wE(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await rL(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await jy(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&si()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),sd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/sd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${sd}ms, refresh threshold is ${Ox} ticks`),s<=Ox&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!si()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ju(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await Ye(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(ze(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ze(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=vE(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+s_e>Date.now()))return r;const{data:s,error:i}=await Ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new yp("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new yp("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=vE(r);if(T_e(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=N_e(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,p_e(`${a}.${c}`)))throw new yp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}}Lg.nextInstanceID=0;const V_e=Lg;class G_e extends V_e{constructor(e){super(e)}}var K_e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class Y_e{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=ZEe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:qEe,realtime:VEe,auth:Object.assign(Object.assign({},HEe),{storageKey:l}),global:WEe},d=XEe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=JEe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new hEe(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new z1e(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new BEe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return K_e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new G_e({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new IEe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iL=(t,e,n)=>new Y_e(t,e,n),oL="https://roxwocgknkiqnsgiojgz.supabase.co",J_e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",Q_e=iL(oL,J_e),EE=iL(oL,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMDc2MzExMiwiZXhwIjoyMDQ2MzM5MTEyfQ.US6YTQfWVWNAfmEopBpD580jsaevKv_Ev7dGFeqFptA"),Cf={AI:"ai"},Uy={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},eR=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],Z_e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],X_e=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=document.createElement("script");a.src="/stockfish.js",a.onload=()=>{if(console.log("[DEBUG] LawbBot script loaded, initializing..."),typeof window<"u"&&window.Stockfish){const c=window.Stockfish;c().then(l=>{console.log("[DEBUG] LawbBot initialized successfully"),n.current=l,e(!0),r.current=!1,l.postMessage("setoption name Threads value 4"),l.postMessage("setoption name Hash value 128"),l.postMessage("setoption name MultiPV value 1")}).catch(l=>{console.error("[DEBUG] LawbBot initialization failed:",l),e(!1),r.current=!1})}else console.error("[DEBUG] LawbBot not found in window object"),e(!1),r.current=!1},a.onerror=c=>{console.error("[DEBUG] Failed to load LawbBot script:",c),e(!1),r.current=!1},document.head.appendChild(a)}catch(a){console.error("[DEBUG] Failed to create LawbBot script:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var f;console.log("[DEBUG] Stockfish message:",h),typeof h=="string"&&h.startsWith("bestmove ")&&(l=h.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(f=n.current)==null||f.removeMessageListener(d),c(l)))};try{n.current.addMessageListener(d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeMessageListener(d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c="/api/stockfish";let l=null;for(let u=1;u<=3;u++)try{console.log(`[DEBUG] Attempting API call ${u}/3`);const d=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(d.ok){const h=await d.json();return console.log(`[DEBUG] API call successful on attempt ${u}`),h.bestmove||null}else console.warn(`[DEBUG] Cloudflare API failed with status ${d.status} on attempt ${u}`),l=new Error(`HTTP ${d.status}`)}catch(d){console.warn(`[DEBUG] Cloudflare API error on attempt ${u}:`,d),l=d,u<3&&await new Promise(h=>setTimeout(h,500))}return console.warn("[DEBUG] All API attempts failed, falling back to client-side Stockfish"),null}catch(c){return console.warn("[DEBUG] Cloudflare API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},eCe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},tCe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=nm(),[s,i]=D.useState(Cf.AI),[o,a]=D.useState(()=>JSON.parse(JSON.stringify(eR))),[c,l]=D.useState("blue"),[u,d]=D.useState(null),[h,f]=D.useState("active"),[p,g]=D.useState("intermediate"),[w,y]=D.useState("Connect wallet to play"),[b,v]=D.useState([]),[_,E]=D.useState([]),[x,S]=D.useState([]),[T,C]=D.useState(null),[O,R]=D.useState(!1),[B,W]=D.useState(!1),[M,I]=D.useState(null),[A,j]=D.useState(null),[P]=D.useState(""),[k]=D.useState(.1),[U,z]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),V=D.useRef(null),Q=D.useRef(!1),Y=D.useRef(o),Z=D.useRef(null),se=D.useRef(null),Ne=D.useRef(!1),ke=D.useRef(!1),[$e,Ke]=D.useState(!1),[Yt,As]=D.useState(!1),[st,Le]=D.useState(!1),[Rt,$t]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),hr=()=>{$t(F=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!F)),!F))},{stockfishReady:ns,getCloudflareStockfishMove:Jt}=X_e(),{getOpeningData:nn}=eCe(),[$n,ta]=D.useState("loading"),[Wc,na]=D.useState(!1),[_n,Ir]=D.useState([]),[qc,Cu]=D.useState("/images/chessboard1.png"),ra=()=>{const F=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],q=Math.floor(Math.random()*F.length),H=F[q];return console.log("[DEBUG] Random chessboard selected:",H,"(index:",q,")"),H};D.useEffect(()=>{if(ns)ta("ready");else{const F=window.setTimeout(()=>{ns||(ta("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(F)}},[ns]),D.useEffect(()=>{Y.current=o},[o]),D.useEffect(()=>{r?y("Select game mode"):(y("Connect wallet to play"),R(!1))},[r]),D.useEffect(()=>(!V.current&&typeof Worker<"u"&&(V.current=new Worker("/aiWorker.js"),V.current.onmessage=F=>{console.log("[DEBUG] AI worker response received:",F.data);const{move:q,nodes:H}=F.data;q&&Q.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",q),console.log("[DEBUG] AI searched",H,"nodes"),Q.current=!1,se.current&&(window.clearTimeout(se.current),se.current=null),Z.current&&Z.current(q.from,q.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},V.current.onerror=F=>{console.error("[DEBUG] AI worker error:",F),y("AI worker error - using fallback mode"),Q.current=!1}),()=>{V.current&&(V.current.terminate(),V.current=null),se.current&&(window.clearTimeout(se.current),se.current=null)}),[]),D.useEffect(()=>{Cm()},[]);const Cm=async()=>{try{const F=new Promise((K,G)=>window.setTimeout(()=>G(new Error("Database timeout")),1e4)),q=Q_e.from("leaderboard").select("*").order("points",{ascending:!1}),H=await Promise.race([q,F]);if(H.error)throw H.error;H.data&&E(H.data),console.log("Leaderboard data loaded:",H.data)}catch(F){y("Failed to load leaderboard"),console.error("Leaderboard error:",F)}},Mh=async F=>{if(console.log("[DEBUG] updateScore called with:",F),!r){console.log("[DEBUG] No wallet address, returning");return}try{const q=r.toLowerCase(),{data:H}=await EE.from("leaderboard").select("*").eq("username",q).maybeSingle();console.log("[DEBUG] Existing record:",H);const K=H!=null&&H.wins?Number(H.wins):0,G=H!=null&&H.losses?Number(H.losses):0,de=H!=null&&H.draws?Number(H.draws):0,me=H!=null&&H.total_games?Number(H.total_games):0,De=H!=null&&H.points?Number(H.points):0;console.log("[DEBUG] Score calculation:",{currentWins:K,currentLosses:G,currentDraws:de,currentTotalGames:me,currentPoints:De,gameResult:F});const ht=K+(F==="win"?1:0),hn=G+(F==="loss"?1:0),co=de+(F==="draw"?1:0),rs=me+1;let sa=0;if(F==="win")switch(p){case"novice":sa=1;break;case"intermediate":sa=3;break;case"world-class":sa=5;break;case"master-class":sa=10;break;default:sa=1}else F==="draw"&&(sa=1);const Xv=De+sa;if(console.log("[DEBUG] New values:",{newWins:ht,newLosses:hn,newDraws:co,newTotalGames:rs,newPoints:Xv,pointsToAdd:sa}),H){const{error:Bh}=await EE.from("leaderboard").update({wins:ht,losses:hn,draws:co,total_games:rs,points:Xv,updated_at:new Date().toISOString()}).eq("username",q);if(Bh){console.error("[DEBUG] Error updating leaderboard:",Bh);return}}else{const{error:Bh}=await EE.from("leaderboard").insert({username:q,chain_type:"ethereum",wins:ht,losses:hn,draws:co,total_games:rs,points:Xv,updated_at:new Date().toISOString()});if(Bh){console.error("[DEBUG] Error inserting leaderboard record:",Bh);return}}console.log("[DEBUG] Leaderboard updated successfully"),await Cm()}catch(q){console.error("[DEBUG] Error in updateScore:",q)}},zt=F=>F&&F===F.toUpperCase()?"red":"blue",aL=(F,q)=>F>=0&&F<8&&q>=0&&q<8,wI=(F,q)=>`${String.fromCharCode(97+q)}${8-F}`,Hc=(F,q)=>{const H=q==="blue"?"k":"K";let K=null;for(let me=0;me<8;me++){for(let De=0;De<8;De++)if(F[me][De]===H){K={row:me,col:De};break}if(K)break}if(!K)return console.log(`King not found for ${q}`),!1;const G=q==="blue"?"red":"blue",de=cL(K.row,K.col,G,F);return console.log(`${q} king at ${K.row},${K.col} under attack: ${de}`),de},cL=(F,q,H,K)=>{for(let G=0;G<8;G++)for(let de=0;de<8;de++){const me=K[G][de];if(me&&zt(me)===H&&xm(me,G,de,F,q,!1,H,K,!0))return!0}return!1},lL=(F,q,H,K,G,de=o)=>{const me=de.map(ht=>[...ht]),De=me[F][q];return me[H][K]=De,me[F][q]=null,Hc(me,G)},uL=(F,q,H,K,G,de)=>{const me=F==="blue"?-1:1,De=F==="blue"?6:1;if(H===G&&K===q+me)return de[K][G]===null;if(H===G&&q===De&&K===q+2*me)return de[q+me][H]===null&&de[K][G]===null;if(Math.abs(H-G)===1&&K===q+me){const ht=de[K][G];return ht!==null&&zt(ht)!==F}if(Math.abs(H-G)===1&&K===q+me){const ht=de[q][G];if(ht&&zt(ht)!==F&&ht.toLowerCase()==="p"&&U.lastPawnDoubleMove&&U.lastPawnDoubleMove.row===q&&U.lastPawnDoubleMove.col===G)return!0}return!1},vI=(F,q,H,K,G)=>F!==H&&q!==K?!1:EI(F,q,H,K,G),dL=(F,q,H,K)=>{const G=Math.abs(F-H),de=Math.abs(q-K);return G===2&&de===1||G===1&&de===2},bI=(F,q,H,K,G)=>Math.abs(F-H)!==Math.abs(q-K)?!1:EI(F,q,H,K,G),hL=(F,q,H,K,G)=>vI(F,q,H,K,G)||bI(F,q,H,K,G),fL=(F,q,H,K,G)=>{const de=Math.abs(q-K),me=Math.abs(H-G);if(de<=1&&me<=1)return!0;if(de===0&&me===2){if(F==="blue"&&!U.blueKingMoved){if(G===6&&!U.blueRooksMove.right||G===2&&!U.blueRooksMove.left)return!0}else if(F==="red"&&!U.redKingMoved&&(G===6&&!U.redRooksMove.right||G===2&&!U.redRooksMove.left))return!0}return!1},EI=(F,q,H,K,G)=>{const de=F===H?0:(H-F)/Math.abs(H-F),me=q===K?0:(K-q)/Math.abs(K-q);let De=F+de,ht=q+me;for(;De!==H||ht!==K;){if(G[De][ht]!==null)return!1;De+=de,ht+=me}return!0},xm=(F,q,H,K,G,de=!0,me=zt(F),De=o,ht=!1)=>{if(!aL(K,G))return ht||console.log("[ILLEGAL MOVE] Out of board:",{piece:F,startRow:q,startCol:H,endRow:K,endCol:G}),!1;const hn=De[K][G];if(hn&&zt(hn)===me)return ht||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:F,startRow:q,startCol:H,endRow:K,endCol:G}),!1;const co=F.toLowerCase();let rs=!1;switch(co){case"p":rs=uL(me,q,H,K,G,De);break;case"r":rs=vI(q,H,K,G,De);break;case"n":rs=dL(q,H,K,G);break;case"b":rs=bI(q,H,K,G,De);break;case"q":rs=hL(q,H,K,G,De);break;case"k":rs=fL(me,q,H,K,G);break}return rs?rs&&de&&lL(q,H,K,G,me,De)?(ht||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:F,startRow:q,startCol:H,endRow:K,endCol:G}),!1):rs:(ht||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:F,startRow:q,startCol:H,endRow:K,endCol:G}),!1)},Sm=(F,q=o,H=c)=>{const K=[],G=q[F.row][F.col];if(!G||zt(G)!==H)return K;for(let de=0;de<8;de++)for(let me=0;me<8;me++)xm(G,F.row,F.col,de,me,!0,H,q,!0)&&K.push({row:de,col:me});return K},pL=(F,q=o)=>{if(!Hc(q,F))return!1;for(let H=0;H<8;H++)for(let K=0;K<8;K++){const G=q[H][K];if(G&&zt(G)===F&&Sm({row:H,col:K},q,F).length>0)return!1}return!0},gL=(F,q=o)=>{if(Hc(q,F))return!1;for(let H=0;H<8;H++)for(let K=0;K<8;K++){const G=q[H][K];if(G&&zt(G)===F&&Sm({row:H,col:K},q,F).length>0)return!1}return!0},mL=(F,q)=>{if(h!=="active"||Q.current)return;const H=o[F][q],K=H?zt(H):null;if(u&&x.some(G=>G.row===F&&G.col===q)){Ni(u,{row:F,col:q});return}if(H&&K===c){const G=Sm({row:F,col:q});d({row:F,col:q}),S(G);return}d(null),S([])},Ni=(F,q,H=!1)=>{const K=o[F.row][F.col];if(console.log("[MOVE ATTEMPT]",{from:F,to:q,piece:K,isAIMove:H,board:JSON.parse(JSON.stringify(o)),moveHistory:b}),!!K){if(K.toLowerCase()==="p"&&(zt(K)==="blue"&&q.row===0||zt(K)==="red"&&q.row===7)){I({from:F,to:q}),W(!0);return}AI(F,q,"q",H)}};Z.current=Ni;const _I=D.useCallback((F,q,H=!1)=>{console.log("[DEBUG] executeMoveAfterAnimation called:",{from:F,to:q,isAIMove:H});const K=o.map(me=>[...me]),G=K[F.row][F.col];if(!G)return;K[q.row][q.col]=G,K[F.row][F.col]=null,CL(K,F,q,G),console.log("[DEBUG] Board state after move:",K),a(K);const de=xL(F,q);if(v(me=>{const De=[...me,de];return console.log("[MOVE HISTORY UPDATED]",De),De}),C({from:F,to:q}),d(null),S([]),b.length<10&&!H){const me=tR(K,c==="blue"?"red":"blue");nn(me).then(De=>{De&&De.moves&&De.moves.length>0&&(Ir(De.moves.slice(0,3)),na(!0),setTimeout(()=>na(!1),5e3))})}SL(F,q,G),console.log("[DEBUG] State updated, currentPlayer before switch:",c),l(me=>{const De=me==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",De),De}),yL(K,c==="blue"?"red":"blue"),Q.current=!1,Ne.current=!1,ke.current=!1},[o,c,b,nn]);D.useEffect(()=>{if(!Q.current&&s===Cf.AI&&c==="red"&&!Ne.current)if(console.log("[DEBUG] Starting AI move for difficulty:",p),Q.current=!0,p==="world-class"||p==="master-class"){const F=p==="master-class"?12e3:8e3;y(`${p==="master-class"?"Master-class":"World-class"} AI is calculating...`),console.log(`[DEBUG] Using Cloudflare Worker API for ${p} difficulty`);const q=tR(o,c);if(console.log("[DEBUG] Sending FEN to API:",q),console.log("[DEBUG] Current board state:",JSON.stringify(o)),console.log("[DEBUG] Current player:",c),ke.current){console.log("[DEBUG] API call already in progress, skipping");return}ke.current=!0,Jt(q,F).then(K=>{if(console.log("[DEBUG] API returned move:",K),K&&K!=="(none)"&&K.length===4){const G=K.charCodeAt(0)-97,de=8-parseInt(K[1]),me=K.charCodeAt(2)-97,De=8-parseInt(K[3]);if(G>=0&&G<8&&de>=0&&de<8&&me>=0&&me<8&&De>=0&&De<8){const ht={from:{row:de,col:G},to:{row:De,col:me}};console.log("[DEBUG] Stockfish move:",K,"converted to:",ht);const hn=o[de][G];if(console.log("[DEBUG] Validating move:",{piece:hn,fromRow:de,fromCol:G,toRow:De,toCol:me,pieceColor:hn?zt(hn):"null",isRedPiece:hn&&zt(hn)==="red",canMove:hn?xm(hn,de,G,De,me,!0,"red",o):!1}),hn&&zt(hn)==="red"&&xm(hn,de,G,De,me,!0,"red",o))console.log("[DEBUG] Move is legal, executing..."),Ni(ht.from,ht.to,!0);else{console.log("[DEBUG] Move is not legal, using fallback");const co=Vc(o);co&&Ni(co.from,co.to,!0),Q.current=!1,ke.current=!1}}else{console.log("[DEBUG] Invalid move coordinates, using fallback");const ht=Vc(o);ht&&Ni(ht.from,ht.to,!0),Q.current=!1,ke.current=!1}}else{console.log("[DEBUG] Stockfish returned no valid move, using fallback");const G=Vc(o);G&&Ni(G.from,G.to,!0),Q.current=!1,ke.current=!1}}).catch(K=>{console.error("[DEBUG] Stockfish error:",K),console.log("[DEBUG] Falling back to simple AI for",p,"difficulty");const G=Vc(o);G&&Ni(G.from,G.to,!0),Q.current=!1,ke.current=!1})}else if(p==="intermediate"&&V.current)console.log("[DEBUG] Using AI worker for intermediate difficulty"),y("Intermediate AI is calculating..."),V.current.postMessage({board:o,currentPlayer:c,difficulty:p,pieceState:U}),se.current=window.setTimeout(()=>{console.log("[DEBUG] AI worker timeout, using simple fallback"),Q.current=!1,se.current=null;const F=Vc(o);F&&Ni(F.from,F.to,!0)},5e3);else if(p==="novice")console.log("[DEBUG] Using simple AI for novice difficulty"),y("Novice AI is thinking..."),setTimeout(()=>{const F=Vc(o);F&&Ni(F.from,F.to,!0),Q.current=!1},1e3);else{console.log("[DEBUG] No AI method available, using simple fallback");const F=Vc(o);F&&Ni(F.from,F.to,!0),Q.current=!1}},[c,s,p,o,U,ns]);const yL=(F,q)=>{console.log("Checking game end for player:",q);const H=F.some(G=>G.some(de=>de==="k")),K=F.some(G=>G.some(de=>de==="K"));if(!H)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),y("King captured! Red wins!"),Mh("loss"),Le(!0),setTimeout(()=>Le(!1),3e3),"checkmate";if(!K)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),y("King captured! You win!"),Mh("win"),Le(!0),setTimeout(()=>Le(!1),3e3),"checkmate";if(console.log("Is king in check:",Hc(F,q)),pL(q,F)){console.log("[GAME END] CHECKMATE",{winner:q==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(F)),moveHistory:b}),f("checkmate");const G=q==="blue"?"red":"blue";return G==="blue"?(y("Checkmate! You win!"),Mh("win"),Le(!0),setTimeout(()=>Le(!1),3e3)):(y(`Checkmate! ${G==="red"?"AI":"Opponent"} wins!`),Mh("loss"),Le(!0),setTimeout(()=>Le(!1),3e3)),"checkmate"}return gL(q,F)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(F)),moveHistory:b}),f("stalemate"),y("Stalemate! Game is a draw."),Mh("draw"),Le(!0),setTimeout(()=>Le(!1),3e3),"stalemate"):(Hc(F,q)?(console.log("CHECK detected!"),y(`${q==="blue"?"Blue":"Red"} is in check!`)):y("Your turn"),null)},Vc=F=>{const q=[];for(let G=0;G<8;G++)for(let de=0;de<8;de++){const me=F[G][de];me&&zt(me)==="red"&&q.push({row:G,col:de})}for(let G=q.length-1;G>0;G--){const de=Math.floor(Math.random()*(G+1));[q[G],q[de]]=[q[de],q[G]]}const H=[],K=[];for(const G of q){const de=Sm(G,F,"red");for(const me of de){const De=F[me.row][me.col];if(De&&zt(De)==="blue"){const hn={p:100,n:320,b:330,r:500,q:900,k:2e4}[De.toLowerCase()]||0;H.push({from:G,to:me,value:hn})}else K.push({from:G,to:me})}}if(H.sort((G,de)=>de.value-G.value),H.length>0){const G=H[0],de=F.map(De=>[...De]),me=de[G.from.row][G.from.col];if(de[G.to.row][G.to.col]=me,de[G.from.row][G.from.col]=null,!Hc(de,"red"))return{from:G.from,to:G.to}}for(const G of K){const de=F.map(De=>[...De]),me=de[G.from.row][G.from.col];if(de[G.to.row][G.to.col]=me,de[G.from.row][G.from.col]=null,!Hc(de,"red"))return G}return null},CI=()=>{a(JSON.parse(JSON.stringify(eR))),l("blue"),d(null),f("active"),v([]),S([]),C(null),R(!1),y("Select game mode"),z({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Cu(ra()),Q.current&&(Q.current=!1)},Am=()=>{console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),R(!0),Ke(!1),y("Game started! Your turn");const F=ra();Cu(F),console.log("[DEBUG] Game started with chessboard:",F)},xI=F=>`${F.slice(0,6)}...${F.slice(-4)}`,wL=(F,q)=>{const H=o[F][q],K=(u==null?void 0:u.row)===F&&(u==null?void 0:u.col)===q,G=x.some(me=>me.row===F&&me.col===q),de=T&&(T.from.row===F&&T.from.col===q||T.to.row===F&&T.to.col===q);return m.jsxs("div",{className:`square ${K?"selected":""} ${G?"legal-move":""} ${de?"last-move":""}`,onClick:()=>mL(F,q),children:[H&&m.jsx("div",{className:"piece",style:{backgroundImage:Uy[H]?`url(${Uy[H]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),G&&m.jsx("div",{className:"legal-move-indicator"})]},`${F}-${q}`)},vL=()=>{if(!B||!M)return null;const F=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:F.map(q=>m.jsx("div",{className:"promotion-piece",onClick:()=>{AI(M.from,M.to,q),W(!1),I(null)},style:{backgroundImage:Uy[q]?`url(${Uy[q]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},q))})]})})},[bL,EL]=D.useState(null),SI=(F=!1,q="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${F?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:Z_e.map(H=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>EL(H.key),children:[m.jsx("img",{src:H.img,alt:H.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:H.name}),bL===H.key&&m.jsx("div",{className:"piece-gallery-desc",children:H.desc})]},H.key))}),m.jsx("div",{className:"piece-gallery-tip",children:q})]}),_L=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",children:[m.jsx("h3",{children:"Select Difficulty"}),m.jsx("button",{className:`difficulty-btn${p==="novice"?" selected":""}`,onClick:()=>{g("novice"),Am()},children:"Novice"}),m.jsx("button",{className:`difficulty-btn${p==="intermediate"?" selected":""}`,onClick:()=>{g("intermediate"),Am()},children:"Intermediate"}),m.jsx("button",{className:`difficulty-btn${p==="world-class"?" selected":""}`,onClick:()=>{g("world-class"),Am()},children:"World-Class"}),m.jsx("button",{className:`difficulty-btn${p==="master-class"?" selected":""}`,onClick:()=>{g("master-class"),Am()},children:"Master-Class"})]})})}),CL=(F,q,H,K)=>{if(K.toLowerCase()==="p"&&(zt(K)==="blue"&&H.row===0||zt(K)==="red"&&H.row===7)){const G=zt(K)==="blue"?"q":"Q";F[H.row][H.col]=G}K.toLowerCase()==="k"&&Math.abs(q.col-H.col)===2&&(H.col===6?(F[q.row][7]=null,F[q.row][5]=zt(K)==="blue"?"r":"R"):H.col===2&&(F[q.row][0]=null,F[q.row][3]=zt(K)==="blue"?"r":"R"))},xL=(F,q,H,K)=>{const G=wI(F.row,F.col),de=wI(q.row,q.col);return`${G}-${de}`},SL=(F,q,H)=>{const K={...U};H.toLowerCase()==="k"?zt(H)==="blue"?K.blueKingMoved=!0:K.redKingMoved=!0:H.toLowerCase()==="r"&&(zt(H)==="blue"?(F.col===0&&(K.blueRooksMove.left=!0),F.col===7&&(K.blueRooksMove.right=!0)):(F.col===0&&(K.redRooksMove.left=!0),F.col===7&&(K.redRooksMove.right=!0))),H.toLowerCase()==="p"&&Math.abs(F.row-q.row)===2?K.lastPawnDoubleMove={row:q.row,col:q.col}:K.lastPawnDoubleMove=null,z(K)},AI=(F,q,H="q",K=!1)=>{if(o[F.row][F.col],o[q.row][q.col]!==null){j({row:q.row,col:q.col,show:!0}),setTimeout(()=>{_I(F,q,K),j(null)},500);return}_I(F,q,K)};return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Rt?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"}),m.jsx("button",{className:"dark-mode-toggle",onClick:hr,title:Rt?"Switch to light mode":"Switch to dark mode","aria-label":Rt?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:Rt?"☀️":"🌙"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[O&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"move-history-status",children:w}),m.jsxs("div",{className:"move-history",children:[m.jsx("div",{className:"move-history-title",children:"Move History"}),m.jsx("ul",{className:"move-history-list",children:b.slice().reverse().map((F,q)=>m.jsx("li",{children:F},b.length-1-q))})]})]}),!O&&m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,10).map((F,q)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const H=F;return m.jsxs("tr",{children:[m.jsx("td",{children:q+1}),m.jsx("td",{children:xI(H.username)}),m.jsx("td",{children:H.wins}),m.jsx("td",{children:H.losses}),m.jsx("td",{children:H.draws}),m.jsx("td",{children:H.points})]},H.username)}return null})})]})})]})]}),m.jsxs("div",{className:"center-area",children:[m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:s===Cf.AI?"NA":`${k} ETH`}),O&&!$e&&m.jsxs("span",{className:p==="novice"?"mode-novice":p==="intermediate"?"mode-intermediate":p==="world-class"?"mode-world-class":"mode-master-class",children:["Mode: ",p==="novice"?"Novice":p==="intermediate"?"Intermediate":p==="world-class"?"World-Class":"Master-Class"]}),(p==="world-class"||p==="master-class")&&m.jsxs("span",{className:`stockfish-status ${$n}`,children:["LawbBot: ",$n==="loading"?"Loading...":$n==="ready"?"Ready":"Failed"]}),Wc&&_n.length>0&&m.jsxs("div",{className:"opening-suggestions",children:[m.jsx("span",{className:"opening-label",children:"Opening:"}),_n.map((F,q)=>m.jsxs("span",{className:"opening-move",children:[F.san," (",Math.round(F.white+F.draws+F.black)," games)"]},q))]})]})}),O?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${qc})`},children:[Array.from({length:8},(F,q)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(H,K)=>wL(q,K))},q)),A&&A.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${A.row*12.5}%`,left:`${A.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>As(!0),children:"Chess Piece Info"}),m.jsx("button",{onClick:CI,children:"New Game"}),m.jsx("button",{onClick:CI,children:"Back to Menu"})]})]}):$e?_L():m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${s===Cf.AI?"selected":""}`,onClick:()=>i(Cf.AI),children:"VS THE HOUSE"}),m.jsxs("div",{className:"pvp-under-construction",children:[m.jsx("button",{className:"mode-btn",disabled:!0,children:"PVP UNDER CONSTRUCTION"}),m.jsx("img",{src:"/images/chessboard4.png",alt:"Chessboard",style:{display:"block",margin:"16px auto 0 auto",width:"180px",maxWidth:"90%"}})]}),m.jsx("button",{className:"start-btn continue-btn",onClick:()=>Ke(!0),children:"Continue"}),m.jsxs("div",{className:"how-to-section",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"how-to-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Points System:"})," Win points by defeating the AI - Novice (1pt), Intermediate (3pts), World-Class (5pts), Master-Class (10pts). Draws earn 1 point regardless of difficulty."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"AI Difficulty:"})," Novice=Easy, Intermediate=kinda harder, World-Class= harder than Intermediate, Master-Class=currently most difficult lawbBot."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:O?m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,10).map((F,q)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const H=F;return m.jsxs("tr",{children:[m.jsx("td",{children:q+1}),m.jsx("td",{children:xI(H.username)}),m.jsx("td",{children:H.wins}),m.jsx("td",{children:H.losses}),m.jsx("td",{children:H.draws}),m.jsx("td",{children:H.points})]},H.username)}return null})})]})})]}):m.jsx("div",{className:"piece-gallery-panel",children:SI(!1)})})]}),Yt&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>As(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:F=>F.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>As(!1),children:"×"}),SI(!1)]})}),vL(),st&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"})]})};function tR(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const nR=()=>{const[t,e]=D.useState(!1),{address:n,isConnected:r}=nm(),{open:s}=bm(),[i,o]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),a=()=>{o(l=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!l)),!l))};D.useEffect(()=>{typeof document<"u"&&(i?document.body.classList.add("chess-dark-mode"):document.body.classList.remove("chess-dark-mode"))},[i]);const c=()=>{t?window.location.href="https://lawb.xyz":(e(!0),window.setTimeout(()=>e(!1),4e3))};return m.jsxs("div",{className:`chess98-main-window${i?" chess-dark-mode":""}`,children:[m.jsxs("div",{className:"chess98-header",children:[m.jsx("button",{className:"chess98-back-btn",onClick:c,children:t?"warning this will end current game":"Back to Desktop"}),m.jsx("span",{className:"chess98-title",children:"LAWB CHESS"}),m.jsxs("span",{className:"chess98-wallet-status",children:[r&&n?m.jsxs("span",{title:n,children:[n.slice(0,6),"...",n.slice(-4)]}):m.jsx("span",{style:{color:"#fff",cursor:"pointer"},onClick:()=>{s()},children:"Connect Wallet"}),m.jsx("button",{className:"dark-mode-toggle",onClick:a,title:i?"Switch to light mode":"Switch to dark mode","aria-label":i?"Switch to light mode":"Switch to dark mode",style:{marginLeft:16},children:i?"☀️":"🌙"})]})]}),m.jsx("div",{className:"chess98-content",children:r&&n?m.jsx(tCe,{fullscreen:!0,onClose:()=>{},onMinimize:()=>{}}):m.jsxs("div",{className:"wallet-required",style:{marginTop:80},children:[m.jsx("h3",{style:{marginBottom:12,color:i?"#00ff00":"#0a2a7a"},children:"Wallet Required"}),m.jsxs("p",{style:{color:i?"#00ff00":"#222"},children:["You must connect your wallet to play chess and appear on the leaderboard.",m.jsx("br",{}),m.jsx("span",{style:{fontSize:13,opacity:.8},children:"(Wallet address is your username.)"})]}),m.jsx("button",{className:"start-btn",style:{marginTop:18,background:i?"#222":"#008000",color:i?"#00ff00":"#fff",border:i?"2px solid #00ff00":void 0},onClick:()=>{s()},children:"Connect Wallet"})]})})]})},nCe=new wH,rCe=typeof window<"u"&&window.location.hostname.startsWith("chess."),sCe=()=>N1e("(max-width: 768px)")?m.jsx(T1e,{}):m.jsx(b1e,{});_E.createRoot(document.getElementById("root")).render(m.jsx(gs.StrictMode,{children:m.jsx(Oq,{config:$U.wagmiConfig,children:m.jsx(kH,{client:nCe,children:m.jsx(w1e,{children:m.jsx(g1e,{children:rCe?m.jsx(gw,{path:"/*",element:m.jsx(nR,{})}):m.jsxs(m.Fragment,{children:[m.jsx(gw,{path:"/",element:m.jsx(sCe,{})}),m.jsx(gw,{path:"/chess",element:m.jsx(nR,{})})]})})})})})}));export{bxe as $,ce as A,Te as B,ue as C,Gn as D,ep as E,Vn as F,xe as G,CC as H,Rf as I,fi as J,YZ as K,Ct as L,pt as M,HZ as N,ne as O,us as P,hw as Q,Pe as R,gi as S,zr as T,ug as U,bg as V,On as W,xxe as X,Cx as Y,NX as Z,up as _,pw as a,vh as a$,Nn as a0,cu as a1,en as a2,Exe as a3,dU as a4,xx as a5,dh as a6,rn as a7,_Ce as a8,tc as a9,WD as aA,zD as aB,Tc as aC,Jf as aD,Vo as aE,gCe as aF,TF as aG,Hl as aH,pCe as aI,mCe as aJ,Fw as aK,yCe as aL,Q9 as aM,M$ as aN,fCe as aO,Q0 as aP,jp as aQ,zw as aR,T0 as aS,wCe as aT,Z9 as aU,UT as aV,bq as aW,KK as aX,Gs as aY,gW as aZ,pW as a_,no as aa,ng as ab,je as ac,mn as ad,Pa as ae,GD as af,nv as ag,Ww as ah,qS as ai,Ic as aj,dCe as ak,tv as al,HS as am,uCe as an,lCe as ao,Q$ as ap,Y0 as aq,Bw as ar,pF as as,vF as at,vCe as au,fz as av,ee as aw,US as ax,br as ay,gz as az,yt as b,ql as b0,V0 as b1,Cr as b2,an as b3,em as b4,X as c,Ce as d,$ as e,wt as f,Do as g,Cxe as h,Od as i,hs as j,ve as k,Lt as l,Wve as m,ln as n,qve as o,le as p,Wt as q,_xe as r,dt as s,H8 as t,Ot as u,xX as v,Ss as w,vxe as x,CA as y,G8 as z};
