const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-Dxe_JV90.js","assets/if-defined-BeqiMS07.js","assets/index-DVxbSRcC.js","assets/index-CrA1OqAL.js","assets/ref-Wr46fz2m.js","assets/index-BcqAjUkO.js","assets/index-BdOr9fJt.js","assets/index-C-DWpr7E.js","assets/index-DeKxIIJJ.js","assets/index-Db0C4ytl.js","assets/index-H_5XAoGu.js","assets/index-r5xja-H5.js","assets/email-D3I_VG6L.js","assets/index-I5h3gt5M.js","assets/socials-CakF0tWv.js","assets/index-D-BYrs1F.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-kIW3rxzi.js","assets/index-DnUFBPSE.js","assets/index-DNJPWgaj.js","assets/index-CBMnj_DI.js","assets/swaps-B9AaCp6m.js","assets/index-B4cmQlDT.js","assets/index-DgfE55aj.js","assets/index-DzhhEMEW.js","assets/send-DA2GYnRb.js","assets/index-BB58t1IL.js","assets/index-DZuCm8NU.js","assets/receive-CCq2q3BU.js","assets/index-CvEcj9MI.js","assets/onramp-C1_mOXnG.js","assets/index--WX-R_mo.js","assets/index-B3c-N4BK.js","assets/index-qJH9avQq.js","assets/transactions-BDdvVMGq.js","assets/index-Bub2yXlZ.js","assets/index-wRZ_4izq.js","assets/index-BC-qDi60.js","assets/index-C2v0CmPY.js","assets/index-DyMun6tg.js","assets/w3m-modal-DjQv8fs6.js"])))=>i.map(i=>d[i]);
var ese=Object.defineProperty;var gB=t=>{throw TypeError(t)};var tse=(t,e,n)=>e in t?ese(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ee=(t,e,n)=>tse(t,typeof e!="symbol"?e+"":e,n),$R=(t,e,n)=>e.has(t)||gB("Cannot "+n);var _=(t,e,n)=>($R(t,e,"read from private field"),n?n.call(t):e.get(t)),G=(t,e,n)=>e.has(t)?gB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),$=(t,e,n,r)=>($R(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),he=(t,e,n)=>($R(t,e,"access private method"),n);var vd=(t,e,n,r)=>({set _(s){$(t,e,s,n)},get _(){return _(t,e,r)}});function nse(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var _r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yL(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var QW={exports:{}},mN={},JW={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YC=Symbol.for("react.element"),rse=Symbol.for("react.portal"),sse=Symbol.for("react.fragment"),ise=Symbol.for("react.strict_mode"),ose=Symbol.for("react.profiler"),ase=Symbol.for("react.provider"),cse=Symbol.for("react.context"),lse=Symbol.for("react.forward_ref"),use=Symbol.for("react.suspense"),dse=Symbol.for("react.memo"),hse=Symbol.for("react.lazy"),mB=Symbol.iterator;function fse(t){return t===null||typeof t!="object"?null:(t=mB&&t[mB]||t["@@iterator"],typeof t=="function"?t:null)}var ZW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XW=Object.assign,eH={};function cb(t,e,n){this.props=t,this.context=e,this.refs=eH,this.updater=n||ZW}cb.prototype.isReactComponent={};cb.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cb.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tH(){}tH.prototype=cb.prototype;function wL(t,e,n){this.props=t,this.context=e,this.refs=eH,this.updater=n||ZW}var bL=wL.prototype=new tH;bL.constructor=wL;XW(bL,cb.prototype);bL.isPureReactComponent=!0;var yB=Array.isArray,nH=Object.prototype.hasOwnProperty,vL={current:null},rH={key:!0,ref:!0,__self:!0,__source:!0};function sH(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)nH.call(e,r)&&!rH.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:YC,type:t,key:i,ref:o,props:s,_owner:vL.current}}function pse(t,e){return{$$typeof:YC,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function EL(t){return typeof t=="object"&&t!==null&&t.$$typeof===YC}function gse(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wB=/\/+/g;function LR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gse(""+t.key):e.toString(36)}function NS(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case YC:case rse:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+LR(o,0):r,yB(s)?(n="",t!=null&&(n=t.replace(wB,"$&/")+"/"),NS(s,e,n,"",function(l){return l})):s!=null&&(EL(s)&&(s=pse(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(wB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",yB(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+LR(i,a);o+=NS(i,e,n,c,s)}else if(c=fse(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+LR(i,a++),o+=NS(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sA(t,e,n){if(t==null)return t;var r=[],s=0;return NS(t,r,"","",function(i){return e.call(n,i,s++)}),r}function mse(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ni={current:null},TS={transition:null},yse={ReactCurrentDispatcher:Ni,ReactCurrentBatchConfig:TS,ReactCurrentOwner:vL};function iH(){throw Error("act(...) is not supported in production builds of React.")}zt.Children={map:sA,forEach:function(t,e,n){sA(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sA(t,function(){e++}),e},toArray:function(t){return sA(t,function(e){return e})||[]},only:function(t){if(!EL(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};zt.Component=cb;zt.Fragment=sse;zt.Profiler=ose;zt.PureComponent=wL;zt.StrictMode=ise;zt.Suspense=use;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yse;zt.act=iH;zt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=XW({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=vL.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)nH.call(e,c)&&!rH.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:YC,type:t.type,key:s,ref:i,props:r,_owner:o}};zt.createContext=function(t){return t={$$typeof:cse,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ase,_context:t},t.Consumer=t};zt.createElement=sH;zt.createFactory=function(t){var e=sH.bind(null,t);return e.type=t,e};zt.createRef=function(){return{current:null}};zt.forwardRef=function(t){return{$$typeof:lse,render:t}};zt.isValidElement=EL;zt.lazy=function(t){return{$$typeof:hse,_payload:{_status:-1,_result:t},_init:mse}};zt.memo=function(t,e){return{$$typeof:dse,type:t,compare:e===void 0?null:e}};zt.startTransition=function(t){var e=TS.transition;TS.transition={};try{t()}finally{TS.transition=e}};zt.unstable_act=iH;zt.useCallback=function(t,e){return Ni.current.useCallback(t,e)};zt.useContext=function(t){return Ni.current.useContext(t)};zt.useDebugValue=function(){};zt.useDeferredValue=function(t){return Ni.current.useDeferredValue(t)};zt.useEffect=function(t,e){return Ni.current.useEffect(t,e)};zt.useId=function(){return Ni.current.useId()};zt.useImperativeHandle=function(t,e,n){return Ni.current.useImperativeHandle(t,e,n)};zt.useInsertionEffect=function(t,e){return Ni.current.useInsertionEffect(t,e)};zt.useLayoutEffect=function(t,e){return Ni.current.useLayoutEffect(t,e)};zt.useMemo=function(t,e){return Ni.current.useMemo(t,e)};zt.useReducer=function(t,e,n){return Ni.current.useReducer(t,e,n)};zt.useRef=function(t){return Ni.current.useRef(t)};zt.useState=function(t){return Ni.current.useState(t)};zt.useSyncExternalStore=function(t,e,n){return Ni.current.useSyncExternalStore(t,e,n)};zt.useTransition=function(){return Ni.current.useTransition()};zt.version="18.3.1";JW.exports=zt;var L=JW.exports;const Wo=sm(L),wse=nse({__proto__:null,default:Wo},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bse=L,vse=Symbol.for("react.element"),Ese=Symbol.for("react.fragment"),_se=Object.prototype.hasOwnProperty,Cse=bse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ase={key:!0,ref:!0,__self:!0,__source:!0};function oH(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_se.call(e,r)&&!Ase.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:vse,type:t,key:i,ref:o,props:s,_owner:Cse.current}}mN.Fragment=Ese;mN.jsx=oH;mN.jsxs=oH;QW.exports=mN;var w=QW.exports,bB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe=function(t,e){if(!t)throw lb(e)},lb=function(t){return new Error("Firebase Database ("+aH.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Sse=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},_L={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cH(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Sse(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new xse;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xse extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lH=function(t){const e=cH(t);return _L.encodeByteArray(e,!0)},_x=function(t){return lH(t).replace(/\./g,"")},GO=function(t){try{return _L.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ise(t){return uH(void 0,t)}function uH(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Nse(n)||(t[n]=uH(t[n],e[n]));return t}function Nse(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tse(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rse=()=>Tse().__FIREBASE_DEFAULTS__,Pse=()=>{if(typeof process>"u"||typeof bB>"u")return;const t=bB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kse=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GO(t[1]);return e&&JSON.parse(e)},dH=()=>{try{return Rse()||Pse()||kse()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ose=t=>{var e,n;return(n=(e=dH())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Dse=t=>{const e=Ose(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hH=()=>{var t;return(t=dH())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yN=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $se(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_x(JSON.stringify(n)),_x(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lse(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lse())}function Mse(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Use(){return aH.NODE_ADMIN===!0}function Bse(){try{return typeof indexedDB=="object"}catch{return!1}}function jse(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fse="FirebaseError";class QC extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Fse,Object.setPrototypeOf(this,QC.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pH.prototype.create)}}class pH{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?zse(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new QC(s,a,r)}}function zse(t,e){return t.replace(Wse,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Wse=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t){return JSON.parse(t)}function Vr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=qE(GO(i[0])||""),n=qE(GO(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Hse=function(t){const e=gH(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},qse=function(t){const e=gH(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function m0(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function vB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cx(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function VO(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(EB(i)&&EB(o)){if(!VO(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function EB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gse(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vse{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function CL(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kse=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,xe(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},wN=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){return t&&t._delegate?t._delegate:t}class GE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yse{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jse(e))try{this.getOrInitializeService({instanceIdentifier:Zf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Zf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zf){return this.instances.has(e)}getOptions(e=Zf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Qse(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zf){return this.component?this.component.multipleInstances?e:Zf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qse(t){return t===Zf?void 0:t}function Jse(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Yse(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Hn||(Hn={}));const Xse={debug:Hn.DEBUG,verbose:Hn.VERBOSE,info:Hn.INFO,warn:Hn.WARN,error:Hn.ERROR,silent:Hn.SILENT},eie=Hn.INFO,tie={[Hn.DEBUG]:"log",[Hn.VERBOSE]:"log",[Hn.INFO]:"info",[Hn.WARN]:"warn",[Hn.ERROR]:"error"},nie=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tie[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mH{constructor(e){this.name=e,this._logLevel=eie,this._logHandler=nie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Hn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Hn.DEBUG,...e),this._logHandler(this,Hn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Hn.VERBOSE,...e),this._logHandler(this,Hn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Hn.INFO,...e),this._logHandler(this,Hn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Hn.WARN,...e),this._logHandler(this,Hn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Hn.ERROR,...e),this._logHandler(this,Hn.ERROR,...e)}}const rie=(t,e)=>e.some(n=>t instanceof n);let _B,CB;function sie(){return _B||(_B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iie(){return CB||(CB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yH=new WeakMap,KO=new WeakMap,wH=new WeakMap,MR=new WeakMap,AL=new WeakMap;function oie(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Fh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&yH.set(n,t)}).catch(()=>{}),AL.set(e,t),e}function aie(t){if(KO.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});KO.set(t,e)}let YO={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return KO.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wH.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cie(t){YO=t(YO)}function lie(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(UR(this),e,...n);return wH.set(r,e.sort?e.sort():[e]),Fh(r)}:iie().includes(t)?function(...e){return t.apply(UR(this),e),Fh(yH.get(this))}:function(...e){return Fh(t.apply(UR(this),e))}}function uie(t){return typeof t=="function"?lie(t):(t instanceof IDBTransaction&&aie(t),rie(t,sie())?new Proxy(t,YO):t)}function Fh(t){if(t instanceof IDBRequest)return oie(t);if(MR.has(t))return MR.get(t);const e=uie(t);return e!==t&&(MR.set(t,e),AL.set(e,t)),e}const UR=t=>AL.get(t);function die(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Fh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Fh(o.result),c.oldVersion,c.newVersion,Fh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const hie=["get","getKey","getAll","getAllKeys","count"],fie=["put","add","delete","clear"],BR=new Map;function AB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(BR.get(e))return BR.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hie.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return BR.set(e,i),i}cie(t=>({...t,get:(e,n,r)=>AB(e,n)||t.get(e,n,r),has:(e,n)=>!!AB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gie(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gie(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const QO="@firebase/app",SB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new mH("@firebase/app"),mie="@firebase/app-compat",yie="@firebase/analytics-compat",wie="@firebase/analytics",bie="@firebase/app-check-compat",vie="@firebase/app-check",Eie="@firebase/auth",_ie="@firebase/auth-compat",Cie="@firebase/database",Aie="@firebase/data-connect",Sie="@firebase/database-compat",xie="@firebase/functions",Iie="@firebase/functions-compat",Nie="@firebase/installations",Tie="@firebase/installations-compat",Rie="@firebase/messaging",Pie="@firebase/messaging-compat",kie="@firebase/performance",Oie="@firebase/performance-compat",Die="@firebase/remote-config",$ie="@firebase/remote-config-compat",Lie="@firebase/storage",Mie="@firebase/storage-compat",Uie="@firebase/firestore",Bie="@firebase/vertexai-preview",jie="@firebase/firestore-compat",Fie="firebase",zie="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="[DEFAULT]",Wie={[QO]:"fire-core",[mie]:"fire-core-compat",[wie]:"fire-analytics",[yie]:"fire-analytics-compat",[vie]:"fire-app-check",[bie]:"fire-app-check-compat",[Eie]:"fire-auth",[_ie]:"fire-auth-compat",[Cie]:"fire-rtdb",[Aie]:"fire-data-connect",[Sie]:"fire-rtdb-compat",[xie]:"fire-fn",[Iie]:"fire-fn-compat",[Nie]:"fire-iid",[Tie]:"fire-iid-compat",[Rie]:"fire-fcm",[Pie]:"fire-fcm-compat",[kie]:"fire-perf",[Oie]:"fire-perf-compat",[Die]:"fire-rc",[$ie]:"fire-rc-compat",[Lie]:"fire-gcs",[Mie]:"fire-gcs-compat",[Uie]:"fire-fst",[jie]:"fire-fst-compat",[Bie]:"fire-vertex","fire-js":"fire-js",[Fie]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=new Map,Hie=new Map,ZO=new Map;function xB(t,e){try{t.container.addComponent(e)}catch(n){nd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ax(t){const e=t.name;if(ZO.has(e))return nd.debug(`There were multiple attempts to register component ${e}.`),!1;ZO.set(e,t);for(const n of VE.values())xB(n,t);for(const n of Hie.values())xB(n,t);return!0}function qie(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zh=new pH("app","Firebase",Gie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vie{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new GE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kie=zie;function bH(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:JO,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw zh.create("bad-app-name",{appName:String(s)});if(n||(n=hH()),!n)throw zh.create("no-options");const i=VE.get(s);if(i){if(VO(n,i.options)&&VO(r,i.config))return i;throw zh.create("duplicate-app",{appName:s})}const o=new Zse(s);for(const c of ZO.values())o.addComponent(c);const a=new Vie(n,r,o);return VE.set(s,a),a}function vH(t=JO){const e=VE.get(t);if(!e&&t===JO&&hH())return bH();if(!e)throw zh.create("no-app",{appName:t});return e}function Yie(){return Array.from(VE.values())}function Jy(t,e,n){var r;let s=(r=Wie[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nd.warn(a.join(" "));return}Ax(new GE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qie="firebase-heartbeat-database",Jie=1,KE="firebase-heartbeat-store";let jR=null;function EH(){return jR||(jR=die(Qie,Jie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(KE)}catch(n){console.warn(n)}}}}).catch(t=>{throw zh.create("idb-open",{originalErrorMessage:t.message})})),jR}async function Zie(t){try{const n=(await EH()).transaction(KE),r=await n.objectStore(KE).get(_H(t));return await n.done,r}catch(e){if(e instanceof QC)nd.warn(e.message);else{const n=zh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nd.warn(n.message)}}}async function IB(t,e){try{const r=(await EH()).transaction(KE,"readwrite");await r.objectStore(KE).put(e,_H(t)),await r.done}catch(n){if(n instanceof QC)nd.warn(n.message);else{const r=zh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nd.warn(r.message)}}}function _H(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xie=1024,eoe=30*24*60*60*1e3;class toe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new roe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=NB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=eoe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=NB(),{heartbeatsToSend:r,unsentEntries:s}=noe(this._heartbeatsCache.heartbeats),i=_x(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nd.warn(n),""}}}function NB(){return new Date().toISOString().substring(0,10)}function noe(t,e=Xie){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),TB(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),TB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class roe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bse()?jse().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Zie(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return IB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return IB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function TB(t){return _x(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function soe(t){Ax(new GE("platform-logger",e=>new pie(e),"PRIVATE")),Ax(new GE("heartbeat",e=>new toe(e),"PRIVATE")),Jy(QO,SB,t),Jy(QO,SB,"esm2017"),Jy("fire-js","")}soe("");var ioe="firebase",ooe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jy(ioe,ooe,"app");var RB={};const PB="@firebase/database",kB="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CH="";function aoe(t){CH=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class coe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Vr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:qE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class loe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return pd(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new coe(e)}}catch{}return new loe},vp=AH("localStorage"),uoe=AH("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=new mH("@firebase/database"),doe=function(){let t=1;return function(){return t++}}(),SH=function(t){const e=Kse(t),n=new Vse;n.update(e);const r=n.digest();return _L.encodeByteArray(r)},JC=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=JC.apply(null,r):typeof r=="object"?e+=Vr(r):e+=r,e+=" "}return e};let cE=null,OB=!0;const hoe=function(t,e){xe(!0,"Can't turn on custom loggers persistently."),Zy.logLevel=Hn.VERBOSE,cE=Zy.log.bind(Zy)},Xs=function(...t){if(OB===!0&&(OB=!1,cE===null&&uoe.get("logging_enabled")===!0&&hoe()),cE){const e=JC.apply(null,t);cE(e)}},ZC=function(t){return function(...e){Xs(t,...e)}},XO=function(...t){const e="FIREBASE INTERNAL ERROR: "+JC(...t);Zy.error(e)},rd=function(...t){const e=`FIREBASE FATAL ERROR: ${JC(...t)}`;throw Zy.error(e),new Error(e)},ao=function(...t){const e="FIREBASE WARNING: "+JC(...t);Zy.warn(e)},foe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ao("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xH=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},poe=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},y0="[MIN_NAME]",Cg="[MAX_NAME]",db=function(t,e){if(t===e)return 0;if(t===y0||e===Cg)return-1;if(e===y0||t===Cg)return 1;{const n=DB(t),r=DB(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},goe=function(t,e){return t===e?0:t<e?-1:1},Zb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Vr(e))},SL=function(t){if(typeof t!="object"||t===null)return Vr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Vr(e[r]),n+=":",n+=SL(t[e[r]]);return n+="}",n},IH=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function go(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const NH=function(t){xe(!xH(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},moe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},yoe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function woe(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const boe=new RegExp("^-?(0*)\\d{1,10}$"),voe=-2147483648,Eoe=2147483647,DB=function(t){if(boe.test(t)){const e=Number(t);if(e>=voe&&e<=Eoe)return e}return null},hb=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ao("Exception was thrown by user callback.",n),e},Math.floor(0))}},_oe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},lE=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Coe{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ao(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aoe{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ao(e)}}class RS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}RS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL="5",TH="v",RH="s",PH="r",kH="f",OH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,DH="ls",$H="p",e2="ac",LH="websocket",MH="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Soe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function BH(t,e,n){xe(typeof e=="string","typeof type must == string"),xe(typeof n=="object","typeof params must == object");let r;if(e===LH)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===MH)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Soe(t)&&(n.ns=t.namespace);const s=[];return go(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xoe{constructor(){this.counters_={}}incrementCounter(e,n=1){pd(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ise(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR={},zR={};function IL(t){const e=t.toString();return FR[e]||(FR[e]=new xoe),FR[e]}function Ioe(t,e){const n=t.toString();return zR[n]||(zR[n]=e()),zR[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Noe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&hb(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B="start",Toe="close",Roe="pLPCommand",Poe="pRTLPCB",jH="id",FH="pw",zH="ser",koe="cb",Ooe="seg",Doe="ts",$oe="d",Loe="dframe",WH=1870,HH=30,Moe=WH-HH,Uoe=25e3,Boe=3e4;class xy{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ZC(e),this.stats_=IL(n),this.urlFn=c=>(this.appCheckToken&&(c[e2]=this.appCheckToken),BH(n,MH,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Noe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Boe)),poe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new NL((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===$B)this.id=a,this.password=c;else if(o===Toe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[$B]="t",r[zH]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[koe]=this.scriptTagHolder.uniqueCallbackIdentifier),r[TH]=xL,this.transportSessionId&&(r[RH]=this.transportSessionId),this.lastSessionId&&(r[DH]=this.lastSessionId),this.applicationId&&(r[$H]=this.applicationId),this.appCheckToken&&(r[e2]=this.appCheckToken),typeof location<"u"&&location.hostname&&OH.test(location.hostname)&&(r[PH]=kH);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xy.forceAllow_=!0}static forceDisallow(){xy.forceDisallow_=!0}static isAvailable(){return xy.forceAllow_?!0:!xy.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!moe()&&!yoe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Vr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=lH(n),s=IH(r,Moe);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Loe]="t",r[jH]=e,r[FH]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Vr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class NL{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=doe(),window[Roe+this.uniqueCallbackIdentifier]=e,window[Poe+this.uniqueCallbackIdentifier]=n,this.myIFrame=NL.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Xs("frame writing exception"),a.stack&&Xs(a.stack),Xs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[jH]=this.myID,e[FH]=this.myPW,e[zH]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+HH+r.length<=WH;){const o=this.pendingSegs.shift();r=r+"&"+Ooe+s+"="+o.seg+"&"+Doe+s+"="+o.ts+"&"+$oe+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Uoe)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Xs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const joe=16384,Foe=45e3;let Sx=null;typeof MozWebSocket<"u"?Sx=MozWebSocket:typeof WebSocket<"u"&&(Sx=WebSocket);class bc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ZC(this.connId),this.stats_=IL(n),this.connURL=bc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[TH]=xL,typeof location<"u"&&location.hostname&&OH.test(location.hostname)&&(o[PH]=kH),n&&(o[RH]=n),r&&(o[DH]=r),s&&(o[e2]=s),i&&(o[$H]=i),BH(e,LH,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vp.set("previous_websocket_failure",!0);try{let r;Use(),this.mySock=new Sx(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){bc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Sx!==null&&!bc.forceDisallow_}static previouslyFailed(){return vp.isInMemoryStorage||vp.get("previous_websocket_failure")===!0}markConnectionHealthy(){vp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=qE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(xe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Vr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=IH(n,joe);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Foe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}bc.responsesRequiredToBeHealthy=2;bc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[xy,bc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=bc&&bc.isAvailable();let r=n&&!bc.previouslyFailed();if(e.webSocketOnly&&(n||ao("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[bc];else{const s=this.transports_=[];for(const i of YE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);YE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}YE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zoe=6e4,Woe=5e3,Hoe=10*1024,qoe=100*1024,WR="t",LB="d",Goe="s",MB="r",Voe="e",UB="o",BB="a",jB="n",FB="p",Koe="h";class Yoe{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ZC("c:"+this.id+":"),this.transportManager_=new YE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=lE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>qoe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Hoe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(WR in e){const n=e[WR];n===BB?this.upgradeIfSecondaryHealthy_():n===MB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===UB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Zb("t",e),r=Zb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:FB,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:BB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Zb("t",e),r=Zb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Zb(WR,e);if(LB in e){const r=e[LB];if(n===Koe){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===jB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Goe?this.onConnectionShutdown_(r):n===MB?this.onReset_(r):n===Voe?XO("Server Error: "+r):n===UB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):XO("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),xL!==r&&ao("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),lE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zoe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Woe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:FB,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GH=class{constructor(e){this.allowedEvents_=e,this.listeners_={},xe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){xe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx extends GH{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!fH()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xx}getInitialEvent(e){return xe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB=32,WB=768;class Mn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function cn(){return new Mn("")}function Lt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function hf(t){return t.pieces_.length-t.pieceNum_}function Gn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Mn(t.pieces_,e)}function VH(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Qoe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function KH(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function YH(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Mn(e,0)}function Kr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Mn(n,0)}function Ft(t){return t.pieceNum_>=t.pieces_.length}function bi(t,e){const n=Lt(t),r=Lt(e);if(n===null)return e;if(n===r)return bi(Gn(t),Gn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function TL(t,e){if(hf(t)!==hf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Cc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(hf(t)>hf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Joe{constructor(e,n){this.errorPrefix_=n,this.parts_=KH(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=wN(this.parts_[r]);QH(this)}}function Zoe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=wN(e),QH(t)}function Xoe(t){const e=t.parts_.pop();t.byteLength_-=wN(e),t.parts_.length>0&&(t.byteLength_-=1)}function QH(t){if(t.byteLength_>WB)throw new Error(t.errorPrefix_+"has a key path longer than "+WB+" bytes ("+t.byteLength_+").");if(t.parts_.length>zB)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+zB+") or object contains a cycle "+Xf(t))}function Xf(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL extends GH{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new RL}getInitialEvent(e){return xe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=1e3,eae=60*5*1e3,HB=30*1e3,tae=1.3,nae=3e4,rae="server_kill",qB=3;class Gu extends qH{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Gu.nextPersistentConnectionId_++,this.log_=ZC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xb,this.maxReconnectDelay_=eae,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RL.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&xx.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Vr(i)),xe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new yN,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),xe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),xe(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Gu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&pd(e,"w")){const r=m0(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();ao(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||qse(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=HB)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Hse(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),xe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Vr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):XO("Unrecognized action received from server: "+Vr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){xe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Xb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>nae&&(this.reconnectDelay_=Xb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*tae)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Gu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){xe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Xs("getToken() completed but was canceled"):(Xs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Yoe(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{ao(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(rae)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ao(d),c())}}}interrupt(e){Xs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vB(this.interruptReasons_)&&(this.reconnectDelay_=Xb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>SL(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Mn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Xs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qB&&(this.reconnectDelay_=HB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Xs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+CH.replace(/\./g,"-")]=1,fH()?e["framework.cordova"]=1:Mse()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=xx.getInstance().currentlyOnline();return vB(this.interruptReasons_)&&e}}Gu.nextPersistentConnectionId_=0;Gu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Mt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Mt(y0,e),s=new Mt(y0,n);return this.compare(r,s)!==0}minPost(){return Mt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iA;class JH extends bN{static get __EMPTY_NODE(){return iA}static set __EMPTY_NODE(e){iA=e}compare(e,n){return db(e.name,n.name)}isDefinedOn(e){throw lb("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Mt.MIN}maxPost(){return new Mt(Cg,iA)}makePost(e,n){return xe(typeof e=="string","KeyIndex indexValue must always be a string."),new Mt(e,iA)}toString(){return".key"}}const Xy=new JH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class cs{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??cs.RED,this.left=s??so.EMPTY_NODE,this.right=i??so.EMPTY_NODE}copy(e,n,r,s,i){return new cs(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return so.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return so.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}cs.RED=!0;cs.BLACK=!1;class sae{copy(e,n,r,s,i){return this}insert(e,n,r){return new cs(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class so{constructor(e,n=so.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new so(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,cs.BLACK,null,null))}remove(e){return new so(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cs.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new oA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new oA(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new oA(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new oA(this.root_,null,this.comparator_,!0,e)}}so.EMPTY_NODE=new sae;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iae(t,e){return db(t.name,e.name)}function PL(t,e){return db(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t2;function oae(t){t2=t}const ZH=function(t){return typeof t=="number"?"number:"+NH(t):"string:"+t},XH=function(t){if(t.isLeafNode()){const e=t.val();xe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&pd(e,".sv"),"Priority must be a string or number.")}else xe(t===t2||t.isEmpty(),"priority of unexpected type.");xe(t===t2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GB;class as{constructor(e,n=as.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,xe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),XH(this.priorityNode_)}static set __childrenNodeConstructor(e){GB=e}static get __childrenNodeConstructor(){return GB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new as(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:as.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ft(e)?this:Lt(e)===".priority"?this.priorityNode_:as.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:as.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Lt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(xe(r!==".priority"||hf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,as.__childrenNodeConstructor.EMPTY_NODE.updateChild(Gn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ZH(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=NH(this.value_):e+=this.value_,this.lazyHash_=SH(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===as.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof as.__childrenNodeConstructor?-1:(xe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=as.VALUE_TYPE_ORDER.indexOf(n),i=as.VALUE_TYPE_ORDER.indexOf(r);return xe(s>=0,"Unknown leaf type: "+n),xe(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}as.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eq,tq;function aae(t){eq=t}function cae(t){tq=t}class lae extends bN{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?db(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Mt.MIN}maxPost(){return new Mt(Cg,new as("[PRIORITY-POST]",tq))}makePost(e,n){const r=eq(e);return new Mt(n,new as("[PRIORITY-POST]",r))}toString(){return".priority"}}const Cr=new lae;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uae=Math.log(2);class dae{constructor(e){const n=i=>parseInt(Math.log(i)/uae,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ix=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new cs(h,d.node,cs.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new cs(h,d.node,cs.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const y=d-p,m=d;d-=p;const b=s(y+1,m),v=t[y],C=n?n(v):v;f(new cs(C,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));g?h(y,cs.BLACK):(h(y,cs.BLACK),h(y,cs.RED))}return u},o=new dae(t.length),a=i(o);return new so(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HR;const Dm={};class ju{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return xe(Dm&&Cr,"ChildrenNode.ts has not been loaded"),HR=HR||new ju({".priority":Dm},{".priority":Cr}),HR}get(e){const n=m0(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof so?n:null}hasIndex(e){return pd(this.indexSet_,e.toString())}addIndex(e,n){xe(e!==Xy,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Mt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Ix(r,e.getCompare()):a=Dm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new ju(u,l)}addToIndexes(e,n){const r=Cx(this.indexes_,(s,i)=>{const o=m0(this.indexSet_,i);if(xe(o,"Missing index implementation for "+i),s===Dm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Mt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Ix(a,o.getCompare())}else return Dm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Mt(e.name,a))),c.insert(e,e.node)}});return new ju(r,this.indexSet_)}removeFromIndexes(e,n){const r=Cx(this.indexes_,s=>{if(s===Dm)return s;{const i=n.get(e.name);return i?s.remove(new Mt(e.name,i)):s}});return new ju(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ev;class mt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&XH(this.priorityNode_),this.children_.isEmpty()&&xe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ev||(ev=new mt(new so(PL),null,ju.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ev}updatePriority(e){return this.children_.isEmpty()?this:new mt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ev:n}}getChild(e){const n=Lt(e);return n===null?this:this.getImmediateChild(n).getChild(Gn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(xe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Mt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?ev:this.priorityNode_;return new mt(s,o,i)}}updateChild(e,n){const r=Lt(e);if(r===null)return n;{xe(Lt(e)!==".priority"||hf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Gn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Cr,(o,a)=>{n[o]=a.val(e),r++,i&&mt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ZH(this.getPriority().val())+":"),this.forEachChild(Cr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":SH(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Mt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Mt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Mt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Mt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Mt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===XC?-1:0}withIndex(e){if(e===Xy||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new mt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Xy||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Cr),s=n.getIterator(Cr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Xy?null:this.indexMap_.get(e.toString())}}mt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class hae extends mt{constructor(){super(new so(PL),mt.EMPTY_NODE,ju.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return mt.EMPTY_NODE}isEmpty(){return!1}}const XC=new hae;Object.defineProperties(Mt,{MIN:{value:new Mt(y0,mt.EMPTY_NODE)},MAX:{value:new Mt(Cg,XC)}});JH.__EMPTY_NODE=mt.EMPTY_NODE;as.__childrenNodeConstructor=mt;oae(XC);cae(XC);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fae=!0;function ds(t,e=null){if(t===null)return mt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),xe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new as(n,ds(e))}if(!(t instanceof Array)&&fae){const n=[];let r=!1;if(go(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=ds(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Mt(o,c)))}}),n.length===0)return mt.EMPTY_NODE;const i=Ix(n,iae,o=>o.name,PL);if(r){const o=Ix(n,Cr.getCompare());return new mt(i,ds(e),new ju({".priority":o},{".priority":Cr}))}else return new mt(i,ds(e),ju.Default)}else{let n=mt.EMPTY_NODE;return go(t,(r,s)=>{if(pd(t,r)&&r.substring(0,1)!=="."){const i=ds(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ds(e))}}aae(ds);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pae extends bN{constructor(e){super(),this.indexPath_=e,xe(!Ft(e)&&Lt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?db(e.name,n.name):i}makePost(e,n){const r=ds(e),s=mt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Mt(n,s)}maxPost(){const e=mt.EMPTY_NODE.updateChild(this.indexPath_,XC);return new Mt(Cg,e)}toString(){return KH(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gae extends bN{compare(e,n){const r=e.node.compareTo(n.node);return r===0?db(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Mt.MIN}maxPost(){return Mt.MAX}makePost(e,n){const r=ds(e);return new Mt(n,r)}toString(){return".value"}}const mae=new gae;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t){return{type:"value",snapshotNode:t}}function w0(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function QE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function JE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function yae(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){xe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(QE(n,a)):xe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(w0(n,r)):o.trackChildChange(JE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Cr,(s,i)=>{n.hasChild(s)||r.trackChildChange(QE(s,i))}),n.isLeafNode()||n.forEachChild(Cr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(JE(s,i,o))}else r.trackChildChange(w0(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?mt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e){this.indexedFilter_=new kL(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ZE.getStartPost_(e),this.endPost_=ZE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Mt(n,r))||(r=mt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=mt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(mt.EMPTY_NODE);const i=this;return n.forEachChild(Cr,(o,a)=>{i.matches(new Mt(o,a))||(s=s.updateImmediateChild(o,mt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wae{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ZE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Mt(n,r))||(r=mt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=mt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=mt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(mt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,mt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;xe(a.numChildren()===this.limit_,"");const c=new Mt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(JE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(QE(n,d));const g=a.updateImmediateChild(n,mt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(w0(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(QE(l.name,l.node)),i.trackChildChange(w0(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,mt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Cr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return xe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return xe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:y0}hasEnd(){return this.endSet_}getIndexEndValue(){return xe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return xe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return xe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Cr}copy(){const e=new OL;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bae(t){return t.loadsAllData()?new kL(t.getIndex()):t.hasLimit()?new wae(t):new ZE(t)}function VB(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Cr?n="$priority":t.index_===mae?n="$value":t.index_===Xy?n="$key":(xe(t.index_ instanceof pae,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Vr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Vr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Vr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Vr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Vr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function KB(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Cr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx extends qH{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=ZC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(xe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Nx.getListenId_(e,r),a={};this.listens_[o]=a;const c=VB(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),m0(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=Nx.getListenId_(e,n);delete this.listens_[r]}get(e){const n=VB(e._queryParams),r=e._path.toString(),s=new yN;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Gse(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=qE(a.responseText)}catch{ao("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ao("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(){this.rootNode_=mt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(){return{value:null,children:new Map}}function rq(t,e,n){if(Ft(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Lt(e);t.children.has(r)||t.children.set(r,Tx());const s=t.children.get(r);e=Gn(e),rq(s,e,n)}}function n2(t,e,n){t.value!==null?n(e,t.value):Eae(t,(r,s)=>{const i=new Mn(e.toString()+"/"+r);n2(s,i,n)})}function Eae(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ae{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&go(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=10*1e3,Cae=30*1e3,Aae=5*60*1e3;class Sae{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new _ae(e);const r=YB+(Cae-YB)*Math.random();lE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;go(e,(s,i)=>{i>0&&pd(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),lE(this.reportStats_.bind(this),Math.floor(Math.random()*2*Aae))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ac;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ac||(Ac={}));function sq(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function DL(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $L(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ac.ACK_USER_WRITE,this.source=sq()}operationForChild(e){if(Ft(this.path)){if(this.affectedTree.value!=null)return xe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Mn(e));return new Rx(cn(),n,this.revert)}}else return xe(Lt(this.path)===e,"operationForChild called for unrelated child."),new Rx(Gn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.source=e,this.path=n,this.type=Ac.LISTEN_COMPLETE}operationForChild(e){return Ft(this.path)?new XE(this.source,cn()):new XE(this.source,Gn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ac.OVERWRITE}operationForChild(e){return Ft(this.path)?new Ag(this.source,cn(),this.snap.getImmediateChild(e)):new Ag(this.source,Gn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ac.MERGE}operationForChild(e){if(Ft(this.path)){const n=this.children.subtree(new Mn(e));return n.isEmpty()?null:n.value?new Ag(this.source,cn(),n.value):new e_(this.source,cn(),n)}else return xe(Lt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new e_(this.source,Gn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ft(e))return this.isFullyInitialized()&&!this.filtered_;const n=Lt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xae{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Iae(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(yae(o.childName,o.snapshotNode))}),tv(t,s,"child_removed",e,r,n),tv(t,s,"child_added",e,r,n),tv(t,s,"child_moved",i,r,n),tv(t,s,"child_changed",e,r,n),tv(t,s,"value",e,r,n),s}function tv(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Tae(t,a,c)),o.forEach(a=>{const c=Nae(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Nae(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Tae(t,e,n){if(e.childName==null||n.childName==null)throw lb("Should only compare child_ events.");const r=new Mt(e.childName,e.snapshotNode),s=new Mt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t,e){return{eventCache:t,serverCache:e}}function uE(t,e,n,r){return vN(new ff(e,n,r),t.serverCache)}function iq(t,e,n,r){return vN(t.eventCache,new ff(e,n,r))}function Px(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Sg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qR;const Rae=()=>(qR||(qR=new so(goe)),qR);class Zn{constructor(e,n=Rae()){this.value=e,this.children=n}static fromObject(e){let n=new Zn(null);return go(e,(r,s)=>{n=n.set(new Mn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:cn(),value:this.value};if(Ft(e))return null;{const r=Lt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Gn(e),n);return i!=null?{path:Kr(new Mn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ft(e))return this;{const n=Lt(e),r=this.children.get(n);return r!==null?r.subtree(Gn(e)):new Zn(null)}}set(e,n){if(Ft(e))return new Zn(n,this.children);{const r=Lt(e),i=(this.children.get(r)||new Zn(null)).set(Gn(e),n),o=this.children.insert(r,i);return new Zn(this.value,o)}}remove(e){if(Ft(e))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const n=Lt(e),r=this.children.get(n);if(r){const s=r.remove(Gn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Zn(null):new Zn(this.value,i)}else return this}}get(e){if(Ft(e))return this.value;{const n=Lt(e),r=this.children.get(n);return r?r.get(Gn(e)):null}}setTree(e,n){if(Ft(e))return n;{const r=Lt(e),i=(this.children.get(r)||new Zn(null)).setTree(Gn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Zn(this.value,o)}}fold(e){return this.fold_(cn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Kr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,cn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ft(e))return null;{const i=Lt(e),o=this.children.get(i);return o?o.findOnPath_(Gn(e),Kr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,cn(),n)}foreachOnPath_(e,n,r){if(Ft(e))return this;{this.value&&r(n,this.value);const s=Lt(e),i=this.children.get(s);return i?i.foreachOnPath_(Gn(e),Kr(n,s),r):new Zn(null)}}foreach(e){this.foreach_(cn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Kr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.writeTree_=e}static empty(){return new Ic(new Zn(null))}}function dE(t,e,n){if(Ft(e))return new Ic(new Zn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=bi(s,e);return i=i.updateChild(o,n),new Ic(t.writeTree_.set(s,i))}else{const s=new Zn(n),i=t.writeTree_.setTree(e,s);return new Ic(i)}}}function QB(t,e,n){let r=t;return go(n,(s,i)=>{r=dE(r,Kr(e,s),i)}),r}function JB(t,e){if(Ft(e))return Ic.empty();{const n=t.writeTree_.setTree(e,new Zn(null));return new Ic(n)}}function r2(t,e){return im(t,e)!=null}function im(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(bi(n.path,e)):null}function ZB(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Cr,(r,s)=>{e.push(new Mt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Mt(r,s.value))}),e}function Wh(t,e){if(Ft(e))return t;{const n=im(t,e);return n!=null?new Ic(new Zn(n)):new Ic(t.writeTree_.subtree(e))}}function s2(t){return t.writeTree_.isEmpty()}function b0(t,e){return oq(cn(),t.writeTree_,e)}function oq(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(xe(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=oq(Kr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Kr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t,e){return uq(e,t)}function Pae(t,e,n,r,s){xe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=dE(t.visibleWrites,e,n)),t.lastWriteId=r}function kae(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Oae(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);xe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Dae(a,r.path)?s=!1:Cc(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return $ae(t),!0;if(r.snap)t.visibleWrites=JB(t.visibleWrites,r.path);else{const a=r.children;go(a,c=>{t.visibleWrites=JB(t.visibleWrites,Kr(r.path,c))})}return!0}else return!1}function Dae(t,e){if(t.snap)return Cc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Cc(Kr(t.path,n),e))return!0;return!1}function $ae(t){t.visibleWrites=aq(t.allWrites,Lae,cn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Lae(t){return t.visible}function aq(t,e,n){let r=Ic.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Cc(n,o)?(a=bi(n,o),r=dE(r,a,i.snap)):Cc(o,n)&&(a=bi(o,n),r=dE(r,cn(),i.snap.getChild(a)));else if(i.children){if(Cc(n,o))a=bi(n,o),r=QB(r,a,i.children);else if(Cc(o,n))if(a=bi(o,n),Ft(a))r=QB(r,cn(),i.children);else{const c=m0(i.children,Lt(a));if(c){const l=c.getChild(Gn(a));r=dE(r,cn(),l)}}}else throw lb("WriteRecord should have .snap or .children")}}return r}function cq(t,e,n,r,s){if(!r&&!s){const i=im(t.visibleWrites,e);if(i!=null)return i;{const o=Wh(t.visibleWrites,e);if(s2(o))return n;if(n==null&&!r2(o,cn()))return null;{const a=n||mt.EMPTY_NODE;return b0(o,a)}}}else{const i=Wh(t.visibleWrites,e);if(!s&&s2(i))return n;if(!s&&n==null&&!r2(i,cn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Cc(l.path,e)||Cc(e,l.path))},a=aq(t.allWrites,o,e),c=n||mt.EMPTY_NODE;return b0(a,c)}}}function Mae(t,e,n){let r=mt.EMPTY_NODE;const s=im(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Cr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Wh(t.visibleWrites,e);return n.forEachChild(Cr,(o,a)=>{const c=b0(Wh(i,new Mn(o)),a);r=r.updateImmediateChild(o,c)}),ZB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Wh(t.visibleWrites,e);return ZB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Uae(t,e,n,r,s){xe(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Kr(e,n);if(r2(t.visibleWrites,i))return null;{const o=Wh(t.visibleWrites,i);return s2(o)?s.getChild(n):b0(o,s.getChild(n))}}function Bae(t,e,n,r){const s=Kr(e,n),i=im(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Wh(t.visibleWrites,s);return b0(o,r.getNode().getImmediateChild(n))}else return null}function jae(t,e){return im(t.visibleWrites,e)}function Fae(t,e,n,r,s,i,o){let a;const c=Wh(t.visibleWrites,e),l=im(c,cn());if(l!=null)a=l;else if(n!=null)a=b0(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function zae(){return{visibleWrites:Ic.empty(),allWrites:[],lastWriteId:-1}}function kx(t,e,n,r){return cq(t.writeTree,t.treePath,e,n,r)}function LL(t,e){return Mae(t.writeTree,t.treePath,e)}function XB(t,e,n,r){return Uae(t.writeTree,t.treePath,e,n,r)}function Ox(t,e){return jae(t.writeTree,Kr(t.treePath,e))}function Wae(t,e,n,r,s,i){return Fae(t.writeTree,t.treePath,e,n,r,s,i)}function ML(t,e,n){return Bae(t.writeTree,t.treePath,e,n)}function lq(t,e){return uq(Kr(t.treePath,e),t.writeTree)}function uq(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hae{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;xe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),xe(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,JE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,QE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,w0(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,JE(r,e.snapshotNode,s.oldSnap));else throw lb("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qae{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const dq=new qae;class UL{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ff(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ML(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Sg(this.viewCache_),i=Wae(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gae(t){return{filter:t}}function Vae(t,e){xe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),xe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Kae(t,e,n,r,s){const i=new Hae;let o,a;if(n.type===Ac.OVERWRITE){const l=n;l.source.fromUser?o=i2(t,e,l.path,l.snap,r,s,i):(xe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ft(l.path),o=Dx(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Ac.MERGE){const l=n;l.source.fromUser?o=Qae(t,e,l.path,l.children,r,s,i):(xe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=o2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Ac.ACK_USER_WRITE){const l=n;l.revert?o=Xae(t,e,l.path,r,s,i):o=Jae(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Ac.LISTEN_COMPLETE)o=Zae(t,e,n.path,r,i);else throw lb("Unknown operation type: "+n.type);const c=i.getChanges();return Yae(e,o,c),{viewCache:o,changes:c}}function Yae(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Px(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(nq(Px(e)))}}function hq(t,e,n,r,s,i){const o=e.eventCache;if(Ox(r,n)!=null)return e;{let a,c;if(Ft(n))if(xe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Sg(e),u=l instanceof mt?l:mt.EMPTY_NODE,d=LL(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=kx(r,Sg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Lt(n);if(l===".priority"){xe(hf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=XB(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Gn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=XB(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=ML(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return uE(e,a,o.isFullyInitialized()||Ft(n),t.filter.filtersNodes())}}function Dx(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Ft(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Lt(n);if(!c.isCompleteForPath(n)&&hf(n)>1)return e;const p=Gn(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),f,y,p,dq,null)}const d=iq(e,l,c.isFullyInitialized()||Ft(n),u.filtersNodes()),h=new UL(s,d,i);return hq(t,d,n,s,h,a)}function i2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new UL(s,e,i);if(Ft(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=uE(e,l,!0,t.filter.filtersNodes());else{const d=Lt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=uE(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=Gn(n),f=a.getNode().getImmediateChild(d);let p;if(Ft(h))p=r;else{const g=u.getCompleteChild(d);g!=null?VH(h)===".priority"&&g.getChild(YH(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=mt.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=uE(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function e6(t,e){return t.eventCache.isCompleteForChild(e)}function Qae(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Kr(n,c);e6(e,Lt(u))&&(a=i2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Kr(n,c);e6(e,Lt(u))||(a=i2(t,a,u,l,s,i,o))}),a}function t6(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function o2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ft(n)?l=r:l=new Zn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=t6(t,f,h);c=Dx(t,c,new Mn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=t6(t,p,h);c=Dx(t,c,new Mn(d),g,s,i,o,a)}}),c}function Jae(t,e,n,r,s,i,o){if(Ox(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ft(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Dx(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Ft(n)){let l=new Zn(null);return c.getNode().forEachChild(Xy,(u,d)=>{l=l.set(new Mn(u),d)}),o2(t,e,n,l,s,i,a,o)}else return e}else{let l=new Zn(null);return r.foreach((u,d)=>{const h=Kr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),o2(t,e,n,l,s,i,a,o)}}function Zae(t,e,n,r,s){const i=e.serverCache,o=iq(e,i.getNode(),i.isFullyInitialized()||Ft(n),i.isFiltered());return hq(t,o,n,r,dq,s)}function Xae(t,e,n,r,s,i){let o;if(Ox(r,n)!=null)return e;{const a=new UL(r,e,s),c=e.eventCache.getNode();let l;if(Ft(n)||Lt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=kx(r,Sg(e));else{const d=e.serverCache.getNode();xe(d instanceof mt,"serverChildren would be complete if leaf node"),u=LL(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Lt(n);let d=ML(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Gn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,mt.EMPTY_NODE,Gn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=kx(r,Sg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||Ox(r,cn())!=null,uE(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ece{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new kL(r.getIndex()),i=bae(r);this.processor_=Gae(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(mt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(mt.EMPTY_NODE,a.getNode(),null),u=new ff(c,o.isFullyInitialized(),s.filtersNodes()),d=new ff(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=vN(d,u),this.eventGenerator_=new xae(this.query_)}get query(){return this.query_}}function tce(t){return t.viewCache_.serverCache.getNode()}function nce(t){return Px(t.viewCache_)}function rce(t,e){const n=Sg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ft(e)&&!n.getImmediateChild(Lt(e)).isEmpty())?n.getChild(e):null}function n6(t){return t.eventRegistrations_.length===0}function sce(t,e){t.eventRegistrations_.push(e)}function r6(t,e,n){const r=[];if(n){xe(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function s6(t,e,n,r){e.type===Ac.MERGE&&e.source.queryId!==null&&(xe(Sg(t.viewCache_),"We should always have a full cache before handling merges"),xe(Px(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Kae(t.processor_,s,e,n,r);return Vae(t.processor_,i.viewCache),xe(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,fq(t,i.changes,i.viewCache.eventCache.getNode(),null)}function ice(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Cr,(i,o)=>{r.push(w0(i,o))}),n.isFullyInitialized()&&r.push(nq(n.getNode())),fq(t,r,n.getNode(),e)}function fq(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Iae(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $x;class pq{constructor(){this.views=new Map}}function oce(t){xe(!$x,"__referenceConstructor has already been defined"),$x=t}function ace(){return xe($x,"Reference.ts has not been loaded"),$x}function cce(t){return t.views.size===0}function BL(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return xe(i!=null,"SyncTree gave us an op for an invalid query."),s6(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(s6(o,e,n,r));return i}}function gq(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=kx(n,s?r:null),c=!1;a?c=!0:r instanceof mt?(a=LL(n,r),c=!1):(a=mt.EMPTY_NODE,c=!1);const l=vN(new ff(a,c,!1),new ff(r,s,!1));return new ece(e,l)}return o}function lce(t,e,n,r,s,i){const o=gq(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),sce(o,n),ice(o,n)}function uce(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=pf(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(r6(l,n,r)),n6(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(r6(c,n,r)),n6(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!pf(t)&&i.push(new(ace())(e._repo,e._path)),{removed:i,events:o}}function mq(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Hh(t,e){let n=null;for(const r of t.views.values())n=n||rce(r,e);return n}function yq(t,e){if(e._queryParams.loadsAllData())return _N(t);{const r=e._queryIdentifier;return t.views.get(r)}}function wq(t,e){return yq(t,e)!=null}function pf(t){return _N(t)!=null}function _N(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lx;function dce(t){xe(!Lx,"__referenceConstructor has already been defined"),Lx=t}function hce(){return xe(Lx,"Reference.ts has not been loaded"),Lx}let fce=1;class i6{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zn(null),this.pendingWriteTree_=zae(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bq(t,e,n,r,s){return Pae(t.pendingWriteTree_,e,n,r,s),s?t1(t,new Ag(sq(),e,n)):[]}function Ep(t,e,n=!1){const r=kae(t.pendingWriteTree_,e);if(Oae(t.pendingWriteTree_,e)){let i=new Zn(null);return r.snap!=null?i=i.set(cn(),!0):go(r.children,o=>{i=i.set(new Mn(o),!0)}),t1(t,new Rx(r.path,i,n))}else return[]}function e1(t,e,n){return t1(t,new Ag(DL(),e,n))}function pce(t,e,n){const r=Zn.fromObject(n);return t1(t,new e_(DL(),e,r))}function gce(t,e){return t1(t,new XE(DL(),e))}function mce(t,e,n){const r=FL(t,n);if(r){const s=zL(r),i=s.path,o=s.queryId,a=bi(i,e),c=new XE($L(o),a);return WL(t,i,c)}else return[]}function Mx(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||wq(o,e))){const c=uce(o,e,n,r);cce(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>pf(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=bce(h);for(let p=0;p<f.length;++p){const g=f[p],y=g.query,m=Cq(t,g);t.listenProvider_.startListening(hE(y),t_(t,y),m.hashFn,m.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(hE(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(CN(h));t.listenProvider_.stopListening(hE(h),f)}))}vce(t,l)}return a}function vq(t,e,n,r){const s=FL(t,r);if(s!=null){const i=zL(s),o=i.path,a=i.queryId,c=bi(o,e),l=new Ag($L(a),c,n);return WL(t,o,l)}else return[]}function yce(t,e,n,r){const s=FL(t,r);if(s){const i=zL(s),o=i.path,a=i.queryId,c=bi(o,e),l=Zn.fromObject(n),u=new e_($L(a),c,l);return WL(t,o,u)}else return[]}function a2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=bi(h,s);i=i||Hh(f,p),o=o||pf(f)});let a=t.syncPointTree_.get(s);a?(o=o||pf(a),i=i||Hh(a,cn())):(a=new pq,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=mt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Hh(p,cn());g&&(i=i.updateImmediateChild(f,g))}));const l=wq(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=CN(e);xe(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Ece();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=EN(t.pendingWriteTree_,s);let d=lce(a,e,n,u,i,c);if(!l&&!o&&!r){const h=yq(a,e);d=d.concat(_ce(t,e,h))}return d}function jL(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=bi(o,e),l=Hh(a,c);if(l)return l});return cq(s,e,i,n,!0)}function wce(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=bi(l,n);r=r||Hh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Hh(s,cn()):(s=new pq,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new ff(r,!0,!1):null,a=EN(t.pendingWriteTree_,e._path),c=gq(s,e,a,i?o.getNode():mt.EMPTY_NODE,i);return nce(c)}function t1(t,e){return Eq(e,t.syncPointTree_,null,EN(t.pendingWriteTree_,cn()))}function Eq(t,e,n,r){if(Ft(t.path))return _q(t,e,n,r);{const s=e.get(cn());n==null&&s!=null&&(n=Hh(s,cn()));let i=[];const o=Lt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=lq(r,o);i=i.concat(Eq(a,c,l,u))}return s&&(i=i.concat(BL(s,t,r,n))),i}}function _q(t,e,n,r){const s=e.get(cn());n==null&&s!=null&&(n=Hh(s,cn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=lq(r,o),u=t.operationForChild(o);u&&(i=i.concat(_q(u,a,c,l)))}),s&&(i=i.concat(BL(s,t,r,n))),i}function Cq(t,e){const n=e.query,r=t_(t,n);return{hashFn:()=>(tce(e)||mt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?mce(t,n._path,r):gce(t,n._path);{const i=woe(s,n);return Mx(t,n,null,i)}}}}function t_(t,e){const n=CN(e);return t.queryToTagMap.get(n)}function CN(t){return t._path.toString()+"$"+t._queryIdentifier}function FL(t,e){return t.tagToQueryMap.get(e)}function zL(t){const e=t.indexOf("$");return xe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Mn(t.substr(0,e))}}function WL(t,e,n){const r=t.syncPointTree_.get(e);xe(r,"Missing sync point for query tag that we're tracking");const s=EN(t.pendingWriteTree_,e);return BL(r,n,s,null)}function bce(t){return t.fold((e,n,r)=>{if(n&&pf(n))return[_N(n)];{let s=[];return n&&(s=mq(n)),go(r,(i,o)=>{s=s.concat(o)}),s}})}function hE(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(hce())(t._repo,t._path):t}function vce(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=CN(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Ece(){return fce++}function _ce(t,e,n){const r=e._path,s=t_(t,e),i=Cq(t,n),o=t.listenProvider_.startListening(hE(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)xe(!pf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Ft(l)&&u&&pf(u))return[_N(u).query];{let h=[];return u&&(h=h.concat(mq(u).map(f=>f.query))),go(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(hE(u),t_(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new HL(n)}node(){return this.node_}}class qL{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Kr(this.path_,e);return new qL(this.syncTree_,n)}node(){return jL(this.syncTree_,this.path_)}}const Cce=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},o6=function(t,e,n){if(!t||typeof t!="object")return t;if(xe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Ace(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Sce(t[".sv"],e);xe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Ace=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:xe(!1,"Unexpected server value: "+t)}},Sce=function(t,e,n){t.hasOwnProperty("increment")||xe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&xe(!1,"Unexpected increment value: "+r);const s=e.node();if(xe(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},xce=function(t,e,n,r){return GL(e,new qL(n,t),r)},Aq=function(t,e,n){return GL(t,new HL(e),n)};function GL(t,e,n){const r=t.getPriority().val(),s=o6(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=o6(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new as(a,ds(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new as(s))),o.forEachChild(Cr,(a,c)=>{const l=GL(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function KL(t,e){let n=e instanceof Mn?e:new Mn(e),r=t,s=Lt(n);for(;s!==null;){const i=m0(r.node.children,s)||{children:{},childCount:0};r=new VL(s,r,i),n=Gn(n),s=Lt(n)}return r}function fb(t){return t.node.value}function Sq(t,e){t.node.value=e,c2(t)}function xq(t){return t.node.childCount>0}function Ice(t){return fb(t)===void 0&&!xq(t)}function AN(t,e){go(t.node.children,(n,r)=>{e(new VL(n,t,r))})}function Iq(t,e,n,r){n&&e(t),AN(t,s=>{Iq(s,e,!0)})}function Nce(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function n1(t){return new Mn(t.parent===null?t.name:n1(t.parent)+"/"+t.name)}function c2(t){t.parent!==null&&Tce(t.parent,t.name,t)}function Tce(t,e,n){const r=Ice(n),s=pd(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,c2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,c2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rce=/[\[\].#$\/\u0000-\u001F\u007F]/,Pce=/[\[\].#$\u0000-\u001F\u007F]/,GR=10*1024*1024,Nq=function(t){return typeof t=="string"&&t.length!==0&&!Rce.test(t)},Tq=function(t){return typeof t=="string"&&t.length!==0&&!Pce.test(t)},kce=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Tq(t)},Oce=function(t,e,n,r){YL(CL(t,"value"),e,n)},YL=function(t,e,n){const r=n instanceof Mn?new Joe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Xf(r));if(typeof e=="function")throw new Error(t+"contains a function "+Xf(r)+" with contents = "+e.toString());if(xH(e))throw new Error(t+"contains "+e.toString()+" "+Xf(r));if(typeof e=="string"&&e.length>GR/3&&wN(e)>GR)throw new Error(t+"contains a string greater than "+GR+" utf8 bytes "+Xf(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(go(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Nq(o)))throw new Error(t+" contains an invalid key ("+o+") "+Xf(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Zoe(r,o),YL(t,a,r),Xoe(r)}),s&&i)throw new Error(t+' contains ".value" child '+Xf(r)+" in addition to actual children.")}},Rq=function(t,e,n,r){if(!Tq(n))throw new Error(CL(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Dce=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Rq(t,e,n)},Pq=function(t,e){if(Lt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},$ce=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Nq(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!kce(n))throw new Error(CL(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lce{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function QL(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!TL(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function kq(t,e,n){QL(t,n),Oq(t,r=>TL(r,e))}function Ml(t,e,n){QL(t,n),Oq(t,r=>Cc(r,e)||Cc(e,r))}function Oq(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Mce(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Mce(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();cE&&Xs("event: "+n.toString()),hb(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uce="repo_interrupt",Bce=25;class jce{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Lce,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Tx(),this.transactionQueueTree_=new VL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Fce(t,e,n){if(t.stats_=IL(t.repoInfo_),t.forceRestClient_||_oe())t.server_=new Nx(t.repoInfo_,(r,s,i,o)=>{a6(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>c6(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Vr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Gu(t.repoInfo_,e,(r,s,i,o)=>{a6(t,r,s,i,o)},r=>{c6(t,r)},r=>{Wce(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Ioe(t.repoInfo_,()=>new Sae(t.stats_,t.server_)),t.infoData_=new vae,t.infoSyncTree_=new i6({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=e1(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ZL(t,"connected",!1),t.serverSyncTree_=new i6({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Ml(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function zce(t){const n=t.infoData_.getNode(new Mn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function JL(t){return Cce({timestamp:zce(t)})}function a6(t,e,n,r,s){t.dataUpdateCount++;const i=new Mn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Cx(n,l=>ds(l));o=yce(t.serverSyncTree_,i,c,s)}else{const c=ds(n);o=vq(t.serverSyncTree_,i,c,s)}else if(r){const c=Cx(n,l=>ds(l));o=pce(t.serverSyncTree_,i,c)}else{const c=ds(n);o=e1(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=xN(t,i)),Ml(t.eventQueue_,a,o)}function c6(t,e){ZL(t,"connected",e),e===!1&&Gce(t)}function Wce(t,e){go(e,(n,r)=>{ZL(t,n,r)})}function ZL(t,e,n){const r=new Mn("/.info/"+e),s=ds(n);t.infoData_.updateSnapshot(r,s);const i=e1(t.infoSyncTree_,r,s);Ml(t.eventQueue_,r,i)}function Dq(t){return t.nextWriteId_++}function Hce(t,e,n){const r=wce(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ds(s).withIndex(e._queryParams.getIndex());a2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=e1(t.serverSyncTree_,e._path,i);else{const a=t_(t.serverSyncTree_,e);o=vq(t.serverSyncTree_,e._path,i,a)}return Ml(t.eventQueue_,e._path,o),Mx(t.serverSyncTree_,e,n,null,!0),i},s=>(SN(t,"get for query "+Vr(e)+" failed: "+s),Promise.reject(new Error(s))))}function qce(t,e,n,r,s){SN(t,"set",{path:e.toString(),value:n,priority:r});const i=JL(t),o=ds(n,r),a=jL(t.serverSyncTree_,e),c=Aq(o,a,i),l=Dq(t),u=bq(t.serverSyncTree_,e,c,l,!0);QL(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||ao("set at "+e+" failed: "+h);const g=Ep(t.serverSyncTree_,l,!p);Ml(t.eventQueue_,e,g),Qce(t,s,h,f)});const d=Bq(t,e);xN(t,d),Ml(t.eventQueue_,d,[])}function Gce(t){SN(t,"onDisconnectEvents");const e=JL(t),n=Tx();n2(t.onDisconnect_,cn(),(s,i)=>{const o=xce(s,i,t.serverSyncTree_,e);rq(n,s,o)});let r=[];n2(n,cn(),(s,i)=>{r=r.concat(e1(t.serverSyncTree_,s,i));const o=Bq(t,s);xN(t,o)}),t.onDisconnect_=Tx(),Ml(t.eventQueue_,cn(),r)}function Vce(t,e,n){let r;Lt(e._path)===".info"?r=a2(t.infoSyncTree_,e,n):r=a2(t.serverSyncTree_,e,n),kq(t.eventQueue_,e._path,r)}function Kce(t,e,n){let r;Lt(e._path)===".info"?r=Mx(t.infoSyncTree_,e,n):r=Mx(t.serverSyncTree_,e,n),kq(t.eventQueue_,e._path,r)}function Yce(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Uce)}function SN(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Xs(n,...e)}function Qce(t,e,n,r){e&&hb(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function $q(t,e,n){return jL(t.serverSyncTree_,e,n)||mt.EMPTY_NODE}function XL(t,e=t.transactionQueueTree_){if(e||IN(t,e),fb(e)){const n=Mq(t,e);xe(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Jce(t,n1(e),n)}else xq(e)&&AN(e,n=>{XL(t,n)})}function Jce(t,e,n){const r=n.map(l=>l.currentWriteId),s=$q(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];xe(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=bi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{SN(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Ep(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();IN(t,KL(t.transactionQueueTree_,e)),XL(t,t.transactionQueueTree_),Ml(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)hb(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ao("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}xN(t,e)}},o)}function xN(t,e){const n=Lq(t,e),r=n1(n),s=Mq(t,n);return Zce(t,s,r),r}function Zce(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=bi(n,c.path);let u=!1,d;if(xe(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(Ep(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Bce)u=!0,d="maxretry",s=s.concat(Ep(t.serverSyncTree_,c.currentWriteId,!0));else{const h=$q(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){YL("transaction failed: Data returned ",f,c.path);let p=ds(f);typeof f=="object"&&f!=null&&pd(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=c.currentWriteId,m=JL(t),b=Aq(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=Dq(t),o.splice(o.indexOf(y),1),s=s.concat(bq(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(Ep(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",s=s.concat(Ep(t.serverSyncTree_,c.currentWriteId,!0))}Ml(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}IN(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)hb(r[a]);XL(t,t.transactionQueueTree_)}function Lq(t,e){let n,r=t.transactionQueueTree_;for(n=Lt(e);n!==null&&fb(r)===void 0;)r=KL(r,n),e=Gn(e),n=Lt(e);return r}function Mq(t,e){const n=[];return Uq(t,e,n),n.sort((r,s)=>r.order-s.order),n}function Uq(t,e,n){const r=fb(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);AN(e,s=>{Uq(t,s,n)})}function IN(t,e){const n=fb(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Sq(e,n.length>0?n:void 0)}AN(e,r=>{IN(t,r)})}function Bq(t,e){const n=n1(Lq(t,e)),r=KL(t.transactionQueueTree_,e);return Nce(r,s=>{VR(t,s)}),VR(t,r),Iq(r,s=>{VR(t,s)}),n}function VR(t,e){const n=fb(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(xe(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(xe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Ep(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Sq(e,void 0):n.length=i+1,Ml(t.eventQueue_,n1(e),s);for(let o=0;o<r.length;o++)hb(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xce(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function ele(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ao(`Invalid query segment '${n}' in query '${t}'`)}return e}const l6=function(t,e){const n=tle(t),r=n.namespace;n.domain==="firebase.com"&&rd(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&rd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||foe();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new UH(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Mn(n.pathString)}},tle=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=Xce(t.substring(u,d)));const h=ele(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nle{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Vr(this.snapshot.exportVal())}}class rle{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return xe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ft(this._path)?null:VH(this._path)}get ref(){return new gd(this._repo,this._path)}get _queryIdentifier(){const e=KB(this._queryParams),n=SL(e);return n==="{}"?"default":n}get _queryObject(){return KB(this._queryParams)}isEqual(e){if(e=ub(e),!(e instanceof e5))return!1;const n=this._repo===e._repo,r=TL(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Qoe(this._path)}}class gd extends e5{constructor(e,n){super(e,n,new OL,!1)}get parent(){const e=YH(this._path);return e===null?null:new gd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class n_{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Mn(e),r=l2(this.ref,e);return new n_(this._node.getChild(n),r,Cr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new n_(s,l2(this.ref,r),Cr)))}hasChild(e){const n=new Mn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function To(t,e){return t=ub(t),t._checkNotDeleted("ref"),e!==void 0?l2(t._root,e):t._root}function l2(t,e){return t=ub(t),Lt(t._path)===null?Dce("child","path",e):Rq("child","path",e),new gd(t._repo,Kr(t._path,e))}function sle(t){return Pq("remove",t._path),Iy(t,null)}function Iy(t,e){t=ub(t),Pq("set",t._path),Oce("set",e,t._path);const n=new yN;return qce(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Ny(t){t=ub(t);const e=new jq(()=>{}),n=new NN(e);return Hce(t._repo,t,n).then(r=>new n_(r,new gd(t._repo,t._path),t._queryParams.getIndex()))}class NN{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new nle("value",this,new n_(e.snapshotNode,new gd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new rle(this,e,n):null}matches(e){return e instanceof NN?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function ile(t,e,n,r,s){const i=new jq(n,void 0),o=new NN(i);return Vce(t._repo,t,o),()=>Kce(t._repo,t,o)}function u6(t,e,n,r){return ile(t,"value",e)}oce(gd);dce(gd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ole="FIREBASE_DATABASE_EMULATOR_HOST",u2={};let ale=!1;function cle(t,e,n,r){t.repoInfo_=new UH(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function lle(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||rd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=l6(i,s),a=o.repoInfo,c;typeof process<"u"&&RB&&(c=RB[ole]),c?(i=`http://${c}?ns=${a.namespace}`,o=l6(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Aoe(t.name,t.options,e);$ce("Invalid Firebase Database URL",o),Ft(o.path)||rd("Database URL must point to the root of a Firebase Database (not including a child path).");const u=dle(a,t,l,new Coe(t.name,n));return new hle(u,t)}function ule(t,e){const n=u2[e];(!n||n[t.key]!==t)&&rd(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Yce(t),delete n[t.key]}function dle(t,e,n,r){let s=u2[e.name];s||(s={},u2[e.name]=s);let i=s[t.toURLString()];return i&&rd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new jce(t,ale,n,r),s[t.toURLString()]=i,i}class hle{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Fce(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gd(this._repo,cn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ule(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&rd("Cannot call "+e+" on a deleted database.")}}function fle(t=vH(),e){const n=qie(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Dse("database");r&&ple(n,...r)}return n}function ple(t,e,n,r={}){t=ub(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&rd("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&rd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new RS(RS.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:$se(r.mockUserToken,t.app.options.projectId);i=new RS(o)}cle(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gle(t){aoe(Kie),Ax(new GE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return lle(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Jy(PB,kB,t),Jy(PB,kB,"esm2017")}Gu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Gu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};gle();const mle={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},yle=Yie().length?vH():bH(mle),Ux=fle(yle);var d2={},Fq={exports:{}},Qo={},zq={exports:{}},Wq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,D){var U=k.length;k.push(D);e:for(;0<U;){var q=U-1>>>1,X=k[q];if(0<s(X,D))k[q]=D,k[U]=X,U=q;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var D=k[0],U=k.pop();if(U!==D){k[0]=U;e:for(var q=0,X=k.length,ae=X>>>1;q<ae;){var oe=2*(q+1)-1,le=k[oe],Ee=oe+1,Z=k[Ee];if(0>s(le,U))Ee<X&&0>s(Z,le)?(k[q]=Z,k[Ee]=U,q=Ee):(k[q]=le,k[oe]=U,q=oe);else if(Ee<X&&0>s(Z,U))k[q]=Z,k[Ee]=U,q=Ee;else break e}}return D}function s(k,D){var U=k.sortIndex-D.sortIndex;return U!==0?U:k.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(k){for(var D=n(l);D!==null;){if(D.callback===null)r(l);else if(D.startTime<=k)r(l),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(l)}}function C(k){if(g=!1,v(k),!p)if(n(c)!==null)p=!0,N(A);else{var D=n(l);D!==null&&M(C,D.startTime-k)}}function A(k,D){p=!1,g&&(g=!1,m(R),R=-1),f=!0;var U=h;try{for(v(D),d=n(c);d!==null&&(!(d.expirationTime>D)||k&&!P());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var X=q(d.expirationTime<=D);D=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(c)&&r(c),v(D)}else r(c);d=n(c)}if(d!==null)var ae=!0;else{var oe=n(l);oe!==null&&M(C,oe.startTime-D),ae=!1}return ae}finally{d=null,h=U,f=!1}}var S=!1,x=null,R=-1,I=5,O=-1;function P(){return!(t.unstable_now()-O<I)}function B(){if(x!==null){var k=t.unstable_now();O=k;var D=!0;try{D=x(!0,k)}finally{D?H():(S=!1,x=null)}}else S=!1}var H;if(typeof b=="function")H=function(){b(B)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,T=j.port2;j.port1.onmessage=B,H=function(){T.postMessage(null)}}else H=function(){y(B,0)};function N(k){x=k,S||(S=!0,H())}function M(k,D){R=y(function(){k(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(A))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(k){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var U=h;h=D;try{return k()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,D){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var U=h;h=k;try{return D()}finally{h=U}},t.unstable_scheduleCallback=function(k,D,U){var q=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?q+U:q):U=q,k){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=U+X,k={id:u++,callback:D,priorityLevel:k,startTime:U,expirationTime:X,sortIndex:-1},U>q?(k.sortIndex=U,e(l,k),n(c)===null&&k===n(l)&&(g?(m(R),R=-1):g=!0,M(C,U-q))):(k.sortIndex=X,e(c,k),p||f||(p=!0,N(A))),k},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(k){var D=h;return function(){var U=h;h=D;try{return k.apply(this,arguments)}finally{h=U}}}})(Wq);zq.exports=Wq;var wle=zq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ble=L,Vo=wle;function Ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hq=new Set,r_={};function om(t,e){v0(t,e),v0(t+"Capture",e)}function v0(t,e){for(r_[t]=e,t=0;t<e.length;t++)Hq.add(e[t])}var sd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h2=Object.prototype.hasOwnProperty,vle=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d6={},h6={};function Ele(t){return h2.call(h6,t)?!0:h2.call(d6,t)?!1:vle.test(t)?h6[t]=!0:(d6[t]=!0,!1)}function _le(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Cle(t,e,n,r){if(e===null||typeof e>"u"||_le(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ti(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ms={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ms[t]=new Ti(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ms[e]=new Ti(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ms[t]=new Ti(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ms[t]=new Ti(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ms[t]=new Ti(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ms[t]=new Ti(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ms[t]=new Ti(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ms[t]=new Ti(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ms[t]=new Ti(t,5,!1,t.toLowerCase(),null,!1,!1)});var t5=/[\-:]([a-z])/g;function n5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(t5,n5);Ms[e]=new Ti(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(t5,n5);Ms[e]=new Ti(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(t5,n5);Ms[e]=new Ti(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ms[t]=new Ti(t,1,!1,t.toLowerCase(),null,!1,!1)});Ms.xlinkHref=new Ti("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ms[t]=new Ti(t,1,!1,t.toLowerCase(),null,!0,!0)});function r5(t,e,n,r){var s=Ms.hasOwnProperty(e)?Ms[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Cle(e,n,s,r)&&(n=null),r||s===null?Ele(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var md=ble.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aA=Symbol.for("react.element"),Ty=Symbol.for("react.portal"),Ry=Symbol.for("react.fragment"),s5=Symbol.for("react.strict_mode"),f2=Symbol.for("react.profiler"),qq=Symbol.for("react.provider"),Gq=Symbol.for("react.context"),i5=Symbol.for("react.forward_ref"),p2=Symbol.for("react.suspense"),g2=Symbol.for("react.suspense_list"),o5=Symbol.for("react.memo"),Gd=Symbol.for("react.lazy"),Vq=Symbol.for("react.offscreen"),f6=Symbol.iterator;function nv(t){return t===null||typeof t!="object"?null:(t=f6&&t[f6]||t["@@iterator"],typeof t=="function"?t:null)}var gr=Object.assign,KR;function Uv(t){if(KR===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);KR=e&&e[1]||""}return`
`+KR+t}var YR=!1;function QR(t,e){if(!t||YR)return"";YR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{YR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Uv(t):""}function Ale(t){switch(t.tag){case 5:return Uv(t.type);case 16:return Uv("Lazy");case 13:return Uv("Suspense");case 19:return Uv("SuspenseList");case 0:case 2:case 15:return t=QR(t.type,!1),t;case 11:return t=QR(t.type.render,!1),t;case 1:return t=QR(t.type,!0),t;default:return""}}function m2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ry:return"Fragment";case Ty:return"Portal";case f2:return"Profiler";case s5:return"StrictMode";case p2:return"Suspense";case g2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gq:return(t.displayName||"Context")+".Consumer";case qq:return(t._context.displayName||"Context")+".Provider";case i5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case o5:return e=t.displayName||null,e!==null?e:m2(t.type)||"Memo";case Gd:e=t._payload,t=t._init;try{return m2(t(e))}catch{}}return null}function Sle(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return m2(e);case 8:return e===s5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kq(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xle(t){var e=Kq(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cA(t){t._valueTracker||(t._valueTracker=xle(t))}function Yq(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Kq(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function y2(t,e){var n=e.checked;return gr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function p6(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qq(t,e){e=e.checked,e!=null&&r5(t,"checked",e,!1)}function w2(t,e){Qq(t,e);var n=gf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?b2(t,e.type,n):e.hasOwnProperty("defaultValue")&&b2(t,e.type,gf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g6(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function b2(t,e,n){(e!=="number"||Bx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bv=Array.isArray;function ew(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gf(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function v2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return gr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function m6(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ce(92));if(Bv(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gf(n)}}function Jq(t,e){var n=gf(e.value),r=gf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function y6(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zq(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zq(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lA,Xq=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lA=lA||document.createElement("div"),lA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lA.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function s_(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ile=["Webkit","ms","Moz","O"];Object.keys(fE).forEach(function(t){Ile.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fE[e]=fE[t]})});function eG(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fE.hasOwnProperty(t)&&fE[t]?(""+e).trim():e+"px"}function tG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=eG(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Nle=gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _2(t,e){if(e){if(Nle[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function C2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A2=null;function a5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var S2=null,tw=null,nw=null;function w6(t){if(t=i1(t)){if(typeof S2!="function")throw Error(Ce(280));var e=t.stateNode;e&&(e=ON(e),S2(t.stateNode,t.type,e))}}function nG(t){tw?nw?nw.push(t):nw=[t]:tw=t}function rG(){if(tw){var t=tw,e=nw;if(nw=tw=null,w6(t),e)for(t=0;t<e.length;t++)w6(e[t])}}function sG(t,e){return t(e)}function iG(){}var JR=!1;function oG(t,e,n){if(JR)return t(e,n);JR=!0;try{return sG(t,e,n)}finally{JR=!1,(tw!==null||nw!==null)&&(iG(),rG())}}function i_(t,e){var n=t.stateNode;if(n===null)return null;var r=ON(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ce(231,e,typeof n));return n}var x2=!1;if(sd)try{var rv={};Object.defineProperty(rv,"passive",{get:function(){x2=!0}}),window.addEventListener("test",rv,rv),window.removeEventListener("test",rv,rv)}catch{x2=!1}function Tle(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var pE=!1,jx=null,Fx=!1,I2=null,Rle={onError:function(t){pE=!0,jx=t}};function Ple(t,e,n,r,s,i,o,a,c){pE=!1,jx=null,Tle.apply(Rle,arguments)}function kle(t,e,n,r,s,i,o,a,c){if(Ple.apply(this,arguments),pE){if(pE){var l=jx;pE=!1,jx=null}else throw Error(Ce(198));Fx||(Fx=!0,I2=l)}}function am(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b6(t){if(am(t)!==t)throw Error(Ce(188))}function Ole(t){var e=t.alternate;if(!e){if(e=am(t),e===null)throw Error(Ce(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return b6(s),t;if(i===r)return b6(s),e;i=i.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?t:e}function cG(t){return t=Ole(t),t!==null?lG(t):null}function lG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lG(t);if(e!==null)return e;t=t.sibling}return null}var uG=Vo.unstable_scheduleCallback,v6=Vo.unstable_cancelCallback,Dle=Vo.unstable_shouldYield,$le=Vo.unstable_requestPaint,Rr=Vo.unstable_now,Lle=Vo.unstable_getCurrentPriorityLevel,c5=Vo.unstable_ImmediatePriority,dG=Vo.unstable_UserBlockingPriority,zx=Vo.unstable_NormalPriority,Mle=Vo.unstable_LowPriority,hG=Vo.unstable_IdlePriority,TN=null,Tl=null;function Ule(t){if(Tl&&typeof Tl.onCommitFiberRoot=="function")try{Tl.onCommitFiberRoot(TN,t,void 0,(t.current.flags&128)===128)}catch{}}var Nc=Math.clz32?Math.clz32:Fle,Ble=Math.log,jle=Math.LN2;function Fle(t){return t>>>=0,t===0?32:31-(Ble(t)/jle|0)|0}var uA=64,dA=4194304;function jv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=jv(a):(i&=o,i!==0&&(r=jv(i)))}else o=n&~s,o!==0?r=jv(o):i!==0&&(r=jv(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nc(e),s=1<<n,r|=t[n],e&=~s;return r}function zle(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wle(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Nc(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=zle(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function N2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fG(){var t=uA;return uA<<=1,!(uA&4194240)&&(uA=64),t}function ZR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function r1(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nc(e),t[e]=n}function Hle(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Nc(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function l5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nc(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var En=0;function pG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gG,u5,mG,yG,wG,T2=!1,hA=[],qh=null,Gh=null,Vh=null,o_=new Map,a_=new Map,Xd=[],qle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E6(t,e){switch(t){case"focusin":case"focusout":qh=null;break;case"dragenter":case"dragleave":Gh=null;break;case"mouseover":case"mouseout":Vh=null;break;case"pointerover":case"pointerout":o_.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":a_.delete(e.pointerId)}}function sv(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=i1(e),e!==null&&u5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Gle(t,e,n,r,s){switch(e){case"focusin":return qh=sv(qh,t,e,n,r,s),!0;case"dragenter":return Gh=sv(Gh,t,e,n,r,s),!0;case"mouseover":return Vh=sv(Vh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return o_.set(i,sv(o_.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,a_.set(i,sv(a_.get(i)||null,t,e,n,r,s)),!0}return!1}function bG(t){var e=_p(t.target);if(e!==null){var n=am(e);if(n!==null){if(e=n.tag,e===13){if(e=aG(n),e!==null){t.blockedOn=e,wG(t.priority,function(){mG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function PS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=R2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);A2=r,n.target.dispatchEvent(r),A2=null}else return e=i1(n),e!==null&&u5(e),t.blockedOn=n,!1;e.shift()}return!0}function _6(t,e,n){PS(t)&&n.delete(e)}function Vle(){T2=!1,qh!==null&&PS(qh)&&(qh=null),Gh!==null&&PS(Gh)&&(Gh=null),Vh!==null&&PS(Vh)&&(Vh=null),o_.forEach(_6),a_.forEach(_6)}function iv(t,e){t.blockedOn===e&&(t.blockedOn=null,T2||(T2=!0,Vo.unstable_scheduleCallback(Vo.unstable_NormalPriority,Vle)))}function c_(t){function e(s){return iv(s,t)}if(0<hA.length){iv(hA[0],t);for(var n=1;n<hA.length;n++){var r=hA[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qh!==null&&iv(qh,t),Gh!==null&&iv(Gh,t),Vh!==null&&iv(Vh,t),o_.forEach(e),a_.forEach(e),n=0;n<Xd.length;n++)r=Xd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xd.length&&(n=Xd[0],n.blockedOn===null);)bG(n),n.blockedOn===null&&Xd.shift()}var rw=md.ReactCurrentBatchConfig,Hx=!0;function Kle(t,e,n,r){var s=En,i=rw.transition;rw.transition=null;try{En=1,d5(t,e,n,r)}finally{En=s,rw.transition=i}}function Yle(t,e,n,r){var s=En,i=rw.transition;rw.transition=null;try{En=4,d5(t,e,n,r)}finally{En=s,rw.transition=i}}function d5(t,e,n,r){if(Hx){var s=R2(t,e,n,r);if(s===null)cP(t,e,r,qx,n),E6(t,r);else if(Gle(s,t,e,n,r))r.stopPropagation();else if(E6(t,r),e&4&&-1<qle.indexOf(t)){for(;s!==null;){var i=i1(s);if(i!==null&&gG(i),i=R2(t,e,n,r),i===null&&cP(t,e,r,qx,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cP(t,e,r,null,n)}}var qx=null;function R2(t,e,n,r){if(qx=null,t=a5(r),t=_p(t),t!==null)if(e=am(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qx=t,null}function vG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lle()){case c5:return 1;case dG:return 4;case zx:case Mle:return 16;case hG:return 536870912;default:return 16}default:return 16}}var kh=null,h5=null,kS=null;function EG(){if(kS)return kS;var t,e=h5,n=e.length,r,s="value"in kh?kh.value:kh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return kS=s.slice(t,1<r?1-r:void 0)}function OS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fA(){return!0}function C6(){return!1}function Jo(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fA:C6,this.isPropagationStopped=C6,this}return gr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fA)},persist:function(){},isPersistent:fA}),e}var pb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},f5=Jo(pb),s1=gr({},pb,{view:0,detail:0}),Qle=Jo(s1),XR,eP,ov,RN=gr({},s1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ov&&(ov&&t.type==="mousemove"?(XR=t.screenX-ov.screenX,eP=t.screenY-ov.screenY):eP=XR=0,ov=t),XR)},movementY:function(t){return"movementY"in t?t.movementY:eP}}),A6=Jo(RN),Jle=gr({},RN,{dataTransfer:0}),Zle=Jo(Jle),Xle=gr({},s1,{relatedTarget:0}),tP=Jo(Xle),eue=gr({},pb,{animationName:0,elapsedTime:0,pseudoElement:0}),tue=Jo(eue),nue=gr({},pb,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rue=Jo(nue),sue=gr({},pb,{data:0}),S6=Jo(sue),iue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cue(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aue[t])?!!e[t]:!1}function p5(){return cue}var lue=gr({},s1,{key:function(t){if(t.key){var e=iue[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=OS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oue[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p5,charCode:function(t){return t.type==="keypress"?OS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?OS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uue=Jo(lue),due=gr({},RN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x6=Jo(due),hue=gr({},s1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p5}),fue=Jo(hue),pue=gr({},pb,{propertyName:0,elapsedTime:0,pseudoElement:0}),gue=Jo(pue),mue=gr({},RN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yue=Jo(mue),wue=[9,13,27,32],g5=sd&&"CompositionEvent"in window,gE=null;sd&&"documentMode"in document&&(gE=document.documentMode);var bue=sd&&"TextEvent"in window&&!gE,_G=sd&&(!g5||gE&&8<gE&&11>=gE),I6=" ",N6=!1;function CG(t,e){switch(t){case"keyup":return wue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Py=!1;function vue(t,e){switch(t){case"compositionend":return AG(e);case"keypress":return e.which!==32?null:(N6=!0,I6);case"textInput":return t=e.data,t===I6&&N6?null:t;default:return null}}function Eue(t,e){if(Py)return t==="compositionend"||!g5&&CG(t,e)?(t=EG(),kS=h5=kh=null,Py=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _G&&e.locale!=="ko"?null:e.data;default:return null}}var _ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_ue[t.type]:e==="textarea"}function SG(t,e,n,r){nG(r),e=Gx(e,"onChange"),0<e.length&&(n=new f5("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mE=null,l_=null;function Cue(t){LG(t,0)}function PN(t){var e=Dy(t);if(Yq(e))return t}function Aue(t,e){if(t==="change")return e}var xG=!1;if(sd){var nP;if(sd){var rP="oninput"in document;if(!rP){var R6=document.createElement("div");R6.setAttribute("oninput","return;"),rP=typeof R6.oninput=="function"}nP=rP}else nP=!1;xG=nP&&(!document.documentMode||9<document.documentMode)}function P6(){mE&&(mE.detachEvent("onpropertychange",IG),l_=mE=null)}function IG(t){if(t.propertyName==="value"&&PN(l_)){var e=[];SG(e,l_,t,a5(t)),oG(Cue,e)}}function Sue(t,e,n){t==="focusin"?(P6(),mE=e,l_=n,mE.attachEvent("onpropertychange",IG)):t==="focusout"&&P6()}function xue(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return PN(l_)}function Iue(t,e){if(t==="click")return PN(e)}function Nue(t,e){if(t==="input"||t==="change")return PN(e)}function Tue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kc=typeof Object.is=="function"?Object.is:Tue;function u_(t,e){if(kc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h2.call(e,s)||!kc(t[s],e[s]))return!1}return!0}function k6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O6(t,e){var n=k6(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=k6(n)}}function NG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function TG(){for(var t=window,e=Bx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bx(t.document)}return e}function m5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rue(t){var e=TG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NG(n.ownerDocument.documentElement,n)){if(r!==null&&m5(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=O6(n,i);var o=O6(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pue=sd&&"documentMode"in document&&11>=document.documentMode,ky=null,P2=null,yE=null,k2=!1;function D6(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;k2||ky==null||ky!==Bx(r)||(r=ky,"selectionStart"in r&&m5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yE&&u_(yE,r)||(yE=r,r=Gx(P2,"onSelect"),0<r.length&&(e=new f5("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ky)))}function pA(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oy={animationend:pA("Animation","AnimationEnd"),animationiteration:pA("Animation","AnimationIteration"),animationstart:pA("Animation","AnimationStart"),transitionend:pA("Transition","TransitionEnd")},sP={},RG={};sd&&(RG=document.createElement("div").style,"AnimationEvent"in window||(delete Oy.animationend.animation,delete Oy.animationiteration.animation,delete Oy.animationstart.animation),"TransitionEvent"in window||delete Oy.transitionend.transition);function kN(t){if(sP[t])return sP[t];if(!Oy[t])return t;var e=Oy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in RG)return sP[t]=e[n];return t}var PG=kN("animationend"),kG=kN("animationiteration"),OG=kN("animationstart"),DG=kN("transitionend"),$G=new Map,$6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nf(t,e){$G.set(t,e),om(e,[t])}for(var iP=0;iP<$6.length;iP++){var oP=$6[iP],kue=oP.toLowerCase(),Oue=oP[0].toUpperCase()+oP.slice(1);Nf(kue,"on"+Oue)}Nf(PG,"onAnimationEnd");Nf(kG,"onAnimationIteration");Nf(OG,"onAnimationStart");Nf("dblclick","onDoubleClick");Nf("focusin","onFocus");Nf("focusout","onBlur");Nf(DG,"onTransitionEnd");v0("onMouseEnter",["mouseout","mouseover"]);v0("onMouseLeave",["mouseout","mouseover"]);v0("onPointerEnter",["pointerout","pointerover"]);v0("onPointerLeave",["pointerout","pointerover"]);om("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));om("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));om("onBeforeInput",["compositionend","keypress","textInput","paste"]);om("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));om("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));om("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Due=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fv));function L6(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kle(r,e,void 0,t),t.currentTarget=null}function LG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;L6(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;L6(s,a,l),i=c}}}if(Fx)throw t=I2,Fx=!1,I2=null,t}function Qn(t,e){var n=e[M2];n===void 0&&(n=e[M2]=new Set);var r=t+"__bubble";n.has(r)||(MG(e,t,2,!1),n.add(r))}function aP(t,e,n){var r=0;e&&(r|=4),MG(n,t,r,e)}var gA="_reactListening"+Math.random().toString(36).slice(2);function d_(t){if(!t[gA]){t[gA]=!0,Hq.forEach(function(n){n!=="selectionchange"&&(Due.has(n)||aP(n,!1,t),aP(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gA]||(e[gA]=!0,aP("selectionchange",!1,e))}}function MG(t,e,n,r){switch(vG(e)){case 1:var s=Kle;break;case 4:s=Yle;break;default:s=d5}n=s.bind(null,e,n,t),s=void 0,!x2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cP(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=_p(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}oG(function(){var l=i,u=a5(n),d=[];e:{var h=$G.get(t);if(h!==void 0){var f=f5,p=t;switch(t){case"keypress":if(OS(n)===0)break e;case"keydown":case"keyup":f=uue;break;case"focusin":p="focus",f=tP;break;case"focusout":p="blur",f=tP;break;case"beforeblur":case"afterblur":f=tP;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=A6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Zle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=fue;break;case PG:case kG:case OG:f=tue;break;case DG:f=gue;break;case"scroll":f=Qle;break;case"wheel":f=yue;break;case"copy":case"cut":case"paste":f=rue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=x6}var g=(e&4)!==0,y=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,m!==null&&(C=i_(b,m),C!=null&&g.push(h_(b,C,v)))),y)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==A2&&(p=n.relatedTarget||n.fromElement)&&(_p(p)||p[id]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?_p(p):null,p!==null&&(y=am(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=A6,C="onMouseLeave",m="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=x6,C="onPointerLeave",m="onPointerEnter",b="pointer"),y=f==null?h:Dy(f),v=p==null?h:Dy(p),h=new g(C,b+"leave",f,n,u),h.target=y,h.relatedTarget=v,C=null,_p(u)===l&&(g=new g(m,b+"enter",p,n,u),g.target=v,g.relatedTarget=y,C=g),y=C,f&&p)t:{for(g=f,m=p,b=0,v=g;v;v=$m(v))b++;for(v=0,C=m;C;C=$m(C))v++;for(;0<b-v;)g=$m(g),b--;for(;0<v-b;)m=$m(m),v--;for(;b--;){if(g===m||m!==null&&g===m.alternate)break t;g=$m(g),m=$m(m)}g=null}else g=null;f!==null&&M6(d,h,f,g,!1),p!==null&&y!==null&&M6(d,y,p,g,!0)}}e:{if(h=l?Dy(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var A=Aue;else if(T6(h))if(xG)A=Nue;else{A=xue;var S=Sue}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=Iue);if(A&&(A=A(t,l))){SG(d,A,n,u);break e}S&&S(t,h,l),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&b2(h,"number",h.value)}switch(S=l?Dy(l):window,t){case"focusin":(T6(S)||S.contentEditable==="true")&&(ky=S,P2=l,yE=null);break;case"focusout":yE=P2=ky=null;break;case"mousedown":k2=!0;break;case"contextmenu":case"mouseup":case"dragend":k2=!1,D6(d,n,u);break;case"selectionchange":if(Pue)break;case"keydown":case"keyup":D6(d,n,u)}var x;if(g5)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Py?CG(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(_G&&n.locale!=="ko"&&(Py||R!=="onCompositionStart"?R==="onCompositionEnd"&&Py&&(x=EG()):(kh=u,h5="value"in kh?kh.value:kh.textContent,Py=!0)),S=Gx(l,R),0<S.length&&(R=new S6(R,t,null,n,u),d.push({event:R,listeners:S}),x?R.data=x:(x=AG(n),x!==null&&(R.data=x)))),(x=bue?vue(t,n):Eue(t,n))&&(l=Gx(l,"onBeforeInput"),0<l.length&&(u=new S6("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}LG(d,e)})}function h_(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=i_(t,n),i!=null&&r.unshift(h_(t,i,s)),i=i_(t,e),i!=null&&r.push(h_(t,i,s))),t=t.return}return r}function $m(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function M6(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=i_(n,i),c!=null&&o.unshift(h_(n,c,a))):s||(c=i_(n,i),c!=null&&o.push(h_(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $ue=/\r\n?/g,Lue=/\u0000|\uFFFD/g;function U6(t){return(typeof t=="string"?t:""+t).replace($ue,`
`).replace(Lue,"")}function mA(t,e,n){if(e=U6(e),U6(t)!==e&&n)throw Error(Ce(425))}function Vx(){}var O2=null,D2=null;function $2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var L2=typeof setTimeout=="function"?setTimeout:void 0,Mue=typeof clearTimeout=="function"?clearTimeout:void 0,B6=typeof Promise=="function"?Promise:void 0,Uue=typeof queueMicrotask=="function"?queueMicrotask:typeof B6<"u"?function(t){return B6.resolve(null).then(t).catch(Bue)}:L2;function Bue(t){setTimeout(function(){throw t})}function lP(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),c_(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);c_(e)}function Kh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function j6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gb=Math.random().toString(36).slice(2),El="__reactFiber$"+gb,f_="__reactProps$"+gb,id="__reactContainer$"+gb,M2="__reactEvents$"+gb,jue="__reactListeners$"+gb,Fue="__reactHandles$"+gb;function _p(t){var e=t[El];if(e)return e;for(var n=t.parentNode;n;){if(e=n[id]||n[El]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=j6(t);t!==null;){if(n=t[El])return n;t=j6(t)}return e}t=n,n=t.parentNode}return null}function i1(t){return t=t[El]||t[id],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ce(33))}function ON(t){return t[f_]||null}var U2=[],$y=-1;function Tf(t){return{current:t}}function Xn(t){0>$y||(t.current=U2[$y],U2[$y]=null,$y--)}function Vn(t,e){$y++,U2[$y]=t.current,t.current=e}var mf={},ni=Tf(mf),co=Tf(!1),xg=mf;function E0(t,e){var n=t.type.contextTypes;if(!n)return mf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function lo(t){return t=t.childContextTypes,t!=null}function Kx(){Xn(co),Xn(ni)}function F6(t,e,n){if(ni.current!==mf)throw Error(Ce(168));Vn(ni,e),Vn(co,n)}function UG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ce(108,Sle(t)||"Unknown",s));return gr({},n,r)}function Yx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mf,xg=ni.current,Vn(ni,t),Vn(co,co.current),!0}function z6(t,e,n){var r=t.stateNode;if(!r)throw Error(Ce(169));n?(t=UG(t,e,xg),r.__reactInternalMemoizedMergedChildContext=t,Xn(co),Xn(ni),Vn(ni,t)):Xn(co),Vn(co,n)}var vu=null,DN=!1,uP=!1;function BG(t){vu===null?vu=[t]:vu.push(t)}function zue(t){DN=!0,BG(t)}function Rf(){if(!uP&&vu!==null){uP=!0;var t=0,e=En;try{var n=vu;for(En=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vu=null,DN=!1}catch(s){throw vu!==null&&(vu=vu.slice(t+1)),uG(c5,Rf),s}finally{En=e,uP=!1}}return null}var Ly=[],My=0,Qx=null,Jx=0,Aa=[],Sa=0,Ig=null,Fu=1,zu="";function ep(t,e){Ly[My++]=Jx,Ly[My++]=Qx,Qx=t,Jx=e}function jG(t,e,n){Aa[Sa++]=Fu,Aa[Sa++]=zu,Aa[Sa++]=Ig,Ig=t;var r=Fu;t=zu;var s=32-Nc(r)-1;r&=~(1<<s),n+=1;var i=32-Nc(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fu=1<<32-Nc(e)+s|n<<s|r,zu=i+t}else Fu=1<<i|n<<s|r,zu=t}function y5(t){t.return!==null&&(ep(t,1),jG(t,1,0))}function w5(t){for(;t===Qx;)Qx=Ly[--My],Ly[My]=null,Jx=Ly[--My],Ly[My]=null;for(;t===Ig;)Ig=Aa[--Sa],Aa[Sa]=null,zu=Aa[--Sa],Aa[Sa]=null,Fu=Aa[--Sa],Aa[Sa]=null}var Ho=null,Fo=null,ir=!1,gc=null;function FG(t,e){var n=xa(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function W6(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ho=t,Fo=Kh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ho=t,Fo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ig!==null?{id:Fu,overflow:zu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xa(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ho=t,Fo=null,!0):!1;default:return!1}}function B2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function j2(t){if(ir){var e=Fo;if(e){var n=e;if(!W6(t,e)){if(B2(t))throw Error(Ce(418));e=Kh(n.nextSibling);var r=Ho;e&&W6(t,e)?FG(r,n):(t.flags=t.flags&-4097|2,ir=!1,Ho=t)}}else{if(B2(t))throw Error(Ce(418));t.flags=t.flags&-4097|2,ir=!1,Ho=t}}}function H6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ho=t}function yA(t){if(t!==Ho)return!1;if(!ir)return H6(t),ir=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$2(t.type,t.memoizedProps)),e&&(e=Fo)){if(B2(t))throw zG(),Error(Ce(418));for(;e;)FG(t,e),e=Kh(e.nextSibling)}if(H6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fo=Kh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fo=null}}else Fo=Ho?Kh(t.stateNode.nextSibling):null;return!0}function zG(){for(var t=Fo;t;)t=Kh(t.nextSibling)}function _0(){Fo=Ho=null,ir=!1}function b5(t){gc===null?gc=[t]:gc.push(t)}var Wue=md.ReactCurrentBatchConfig;function av(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,t))}return t}function wA(t,e){throw t=Object.prototype.toString.call(e),Error(Ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function q6(t){var e=t._init;return e(t._payload)}function WG(t){function e(m,b){if(t){var v=m.deletions;v===null?(m.deletions=[b],m.flags|=16):v.push(b)}}function n(m,b){if(!t)return null;for(;b!==null;)e(m,b),b=b.sibling;return null}function r(m,b){for(m=new Map;b!==null;)b.key!==null?m.set(b.key,b):m.set(b.index,b),b=b.sibling;return m}function s(m,b){return m=Zh(m,b),m.index=0,m.sibling=null,m}function i(m,b,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<b?(m.flags|=2,b):v):(m.flags|=2,b)):(m.flags|=1048576,b)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,b,v,C){return b===null||b.tag!==6?(b=yP(v,m.mode,C),b.return=m,b):(b=s(b,v),b.return=m,b)}function c(m,b,v,C){var A=v.type;return A===Ry?u(m,b,v.props.children,C,v.key):b!==null&&(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Gd&&q6(A)===b.type)?(C=s(b,v.props),C.ref=av(m,b,v),C.return=m,C):(C=jS(v.type,v.key,v.props,null,m.mode,C),C.ref=av(m,b,v),C.return=m,C)}function l(m,b,v,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=wP(v,m.mode,C),b.return=m,b):(b=s(b,v.children||[]),b.return=m,b)}function u(m,b,v,C,A){return b===null||b.tag!==7?(b=fg(v,m.mode,C,A),b.return=m,b):(b=s(b,v),b.return=m,b)}function d(m,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=yP(""+b,m.mode,v),b.return=m,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case aA:return v=jS(b.type,b.key,b.props,null,m.mode,v),v.ref=av(m,null,b),v.return=m,v;case Ty:return b=wP(b,m.mode,v),b.return=m,b;case Gd:var C=b._init;return d(m,C(b._payload),v)}if(Bv(b)||nv(b))return b=fg(b,m.mode,v,null),b.return=m,b;wA(m,b)}return null}function h(m,b,v,C){var A=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return A!==null?null:a(m,b,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case aA:return v.key===A?c(m,b,v,C):null;case Ty:return v.key===A?l(m,b,v,C):null;case Gd:return A=v._init,h(m,b,A(v._payload),C)}if(Bv(v)||nv(v))return A!==null?null:u(m,b,v,C,null);wA(m,v)}return null}function f(m,b,v,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(v)||null,a(b,m,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case aA:return m=m.get(C.key===null?v:C.key)||null,c(b,m,C,A);case Ty:return m=m.get(C.key===null?v:C.key)||null,l(b,m,C,A);case Gd:var S=C._init;return f(m,b,v,S(C._payload),A)}if(Bv(C)||nv(C))return m=m.get(v)||null,u(b,m,C,A,null);wA(b,C)}return null}function p(m,b,v,C){for(var A=null,S=null,x=b,R=b=0,I=null;x!==null&&R<v.length;R++){x.index>R?(I=x,x=null):I=x.sibling;var O=h(m,x,v[R],C);if(O===null){x===null&&(x=I);break}t&&x&&O.alternate===null&&e(m,x),b=i(O,b,R),S===null?A=O:S.sibling=O,S=O,x=I}if(R===v.length)return n(m,x),ir&&ep(m,R),A;if(x===null){for(;R<v.length;R++)x=d(m,v[R],C),x!==null&&(b=i(x,b,R),S===null?A=x:S.sibling=x,S=x);return ir&&ep(m,R),A}for(x=r(m,x);R<v.length;R++)I=f(x,m,R,v[R],C),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?R:I.key),b=i(I,b,R),S===null?A=I:S.sibling=I,S=I);return t&&x.forEach(function(P){return e(m,P)}),ir&&ep(m,R),A}function g(m,b,v,C){var A=nv(v);if(typeof A!="function")throw Error(Ce(150));if(v=A.call(v),v==null)throw Error(Ce(151));for(var S=A=null,x=b,R=b=0,I=null,O=v.next();x!==null&&!O.done;R++,O=v.next()){x.index>R?(I=x,x=null):I=x.sibling;var P=h(m,x,O.value,C);if(P===null){x===null&&(x=I);break}t&&x&&P.alternate===null&&e(m,x),b=i(P,b,R),S===null?A=P:S.sibling=P,S=P,x=I}if(O.done)return n(m,x),ir&&ep(m,R),A;if(x===null){for(;!O.done;R++,O=v.next())O=d(m,O.value,C),O!==null&&(b=i(O,b,R),S===null?A=O:S.sibling=O,S=O);return ir&&ep(m,R),A}for(x=r(m,x);!O.done;R++,O=v.next())O=f(x,m,R,O.value,C),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?R:O.key),b=i(O,b,R),S===null?A=O:S.sibling=O,S=O);return t&&x.forEach(function(B){return e(m,B)}),ir&&ep(m,R),A}function y(m,b,v,C){if(typeof v=="object"&&v!==null&&v.type===Ry&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case aA:e:{for(var A=v.key,S=b;S!==null;){if(S.key===A){if(A=v.type,A===Ry){if(S.tag===7){n(m,S.sibling),b=s(S,v.props.children),b.return=m,m=b;break e}}else if(S.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Gd&&q6(A)===S.type){n(m,S.sibling),b=s(S,v.props),b.ref=av(m,S,v),b.return=m,m=b;break e}n(m,S);break}else e(m,S);S=S.sibling}v.type===Ry?(b=fg(v.props.children,m.mode,C,v.key),b.return=m,m=b):(C=jS(v.type,v.key,v.props,null,m.mode,C),C.ref=av(m,b,v),C.return=m,m=C)}return o(m);case Ty:e:{for(S=v.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(m,b.sibling),b=s(b,v.children||[]),b.return=m,m=b;break e}else{n(m,b);break}else e(m,b);b=b.sibling}b=wP(v,m.mode,C),b.return=m,m=b}return o(m);case Gd:return S=v._init,y(m,b,S(v._payload),C)}if(Bv(v))return p(m,b,v,C);if(nv(v))return g(m,b,v,C);wA(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(m,b.sibling),b=s(b,v),b.return=m,m=b):(n(m,b),b=yP(v,m.mode,C),b.return=m,m=b),o(m)):n(m,b)}return y}var C0=WG(!0),HG=WG(!1),Zx=Tf(null),Xx=null,Uy=null,v5=null;function E5(){v5=Uy=Xx=null}function _5(t){var e=Zx.current;Xn(Zx),t._currentValue=e}function F2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sw(t,e){Xx=t,v5=Uy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(io=!0),t.firstContext=null)}function Ta(t){var e=t._currentValue;if(v5!==t)if(t={context:t,memoizedValue:e,next:null},Uy===null){if(Xx===null)throw Error(Ce(308));Uy=t,Xx.dependencies={lanes:0,firstContext:t}}else Uy=Uy.next=t;return e}var Cp=null;function C5(t){Cp===null?Cp=[t]:Cp.push(t)}function qG(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,C5(e)):(n.next=s.next,s.next=n),e.interleaved=n,od(t,r)}function od(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vd=!1;function A5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Xt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,od(t,n)}return s=r.interleaved,s===null?(e.next=e,C5(r)):(e.next=s.next,s.next=e),r.interleaved=e,od(t,n)}function DS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,l5(t,n)}}function G6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function eI(t,e,n,r){var s=t.updateQueue;Vd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=gr({},d,h);break e;case 2:Vd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Tg|=o,t.lanes=o,t.memoizedState=d}}function V6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ce(191,s));s.call(r)}}}var o1={},Rl=Tf(o1),p_=Tf(o1),g_=Tf(o1);function Ap(t){if(t===o1)throw Error(Ce(174));return t}function S5(t,e){switch(Vn(g_,e),Vn(p_,t),Vn(Rl,o1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:E2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=E2(e,t)}Xn(Rl),Vn(Rl,e)}function A0(){Xn(Rl),Xn(p_),Xn(g_)}function VG(t){Ap(g_.current);var e=Ap(Rl.current),n=E2(e,t.type);e!==n&&(Vn(p_,t),Vn(Rl,n))}function x5(t){p_.current===t&&(Xn(Rl),Xn(p_))}var ur=Tf(0);function tI(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dP=[];function I5(){for(var t=0;t<dP.length;t++)dP[t]._workInProgressVersionPrimary=null;dP.length=0}var $S=md.ReactCurrentDispatcher,hP=md.ReactCurrentBatchConfig,Ng=0,pr=null,Hr=null,ls=null,nI=!1,wE=!1,m_=0,Hue=0;function Hs(){throw Error(Ce(321))}function N5(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kc(t[n],e[n]))return!1;return!0}function T5(t,e,n,r,s,i){if(Ng=i,pr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$S.current=t===null||t.memoizedState===null?Kue:Yue,t=n(r,s),wE){i=0;do{if(wE=!1,m_=0,25<=i)throw Error(Ce(301));i+=1,ls=Hr=null,e.updateQueue=null,$S.current=Que,t=n(r,s)}while(wE)}if($S.current=rI,e=Hr!==null&&Hr.next!==null,Ng=0,ls=Hr=pr=null,nI=!1,e)throw Error(Ce(300));return t}function R5(){var t=m_!==0;return m_=0,t}function el(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?pr.memoizedState=ls=t:ls=ls.next=t,ls}function Ra(){if(Hr===null){var t=pr.alternate;t=t!==null?t.memoizedState:null}else t=Hr.next;var e=ls===null?pr.memoizedState:ls.next;if(e!==null)ls=e,Hr=t;else{if(t===null)throw Error(Ce(310));Hr=t,t={memoizedState:Hr.memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},ls===null?pr.memoizedState=ls=t:ls=ls.next=t}return ls}function y_(t,e){return typeof e=="function"?e(t):e}function fP(t){var e=Ra(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=Hr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Ng&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,pr.lanes|=u,Tg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,kc(r,e.memoizedState)||(io=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,pr.lanes|=i,Tg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pP(t){var e=Ra(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);kc(i,e.memoizedState)||(io=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function KG(){}function YG(t,e){var n=pr,r=Ra(),s=e(),i=!kc(r.memoizedState,s);if(i&&(r.memoizedState=s,io=!0),r=r.queue,P5(ZG.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ls!==null&&ls.memoizedState.tag&1){if(n.flags|=2048,w_(9,JG.bind(null,n,r,s,e),void 0,null),ws===null)throw Error(Ce(349));Ng&30||QG(n,e,s)}return s}function QG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pr.updateQueue,e===null?(e={lastEffect:null,stores:null},pr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function JG(t,e,n,r){e.value=n,e.getSnapshot=r,XG(e)&&eV(t)}function ZG(t,e,n){return n(function(){XG(e)&&eV(t)})}function XG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kc(t,n)}catch{return!0}}function eV(t){var e=od(t,1);e!==null&&Tc(e,t,1,-1)}function K6(t){var e=el();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y_,lastRenderedState:t},e.queue=t,t=t.dispatch=Vue.bind(null,pr,t),[e.memoizedState,t]}function w_(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pr.updateQueue,e===null?(e={lastEffect:null,stores:null},pr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tV(){return Ra().memoizedState}function LS(t,e,n,r){var s=el();pr.flags|=t,s.memoizedState=w_(1|e,n,void 0,r===void 0?null:r)}function $N(t,e,n,r){var s=Ra();r=r===void 0?null:r;var i=void 0;if(Hr!==null){var o=Hr.memoizedState;if(i=o.destroy,r!==null&&N5(r,o.deps)){s.memoizedState=w_(e,n,i,r);return}}pr.flags|=t,s.memoizedState=w_(1|e,n,i,r)}function Y6(t,e){return LS(8390656,8,t,e)}function P5(t,e){return $N(2048,8,t,e)}function nV(t,e){return $N(4,2,t,e)}function rV(t,e){return $N(4,4,t,e)}function sV(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iV(t,e,n){return n=n!=null?n.concat([t]):null,$N(4,4,sV.bind(null,e,t),n)}function k5(){}function oV(t,e){var n=Ra();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&N5(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aV(t,e){var n=Ra();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&N5(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cV(t,e,n){return Ng&21?(kc(n,e)||(n=fG(),pr.lanes|=n,Tg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,io=!0),t.memoizedState=n)}function que(t,e){var n=En;En=n!==0&&4>n?n:4,t(!0);var r=hP.transition;hP.transition={};try{t(!1),e()}finally{En=n,hP.transition=r}}function lV(){return Ra().memoizedState}function Gue(t,e,n){var r=Jh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uV(t))dV(e,n);else if(n=qG(t,e,n,r),n!==null){var s=Ai();Tc(n,t,r,s),hV(n,e,r)}}function Vue(t,e,n){var r=Jh(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uV(t))dV(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,kc(a,o)){var c=e.interleaved;c===null?(s.next=s,C5(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=qG(t,e,s,r),n!==null&&(s=Ai(),Tc(n,t,r,s),hV(n,e,r))}}function uV(t){var e=t.alternate;return t===pr||e!==null&&e===pr}function dV(t,e){wE=nI=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hV(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,l5(t,n)}}var rI={readContext:Ta,useCallback:Hs,useContext:Hs,useEffect:Hs,useImperativeHandle:Hs,useInsertionEffect:Hs,useLayoutEffect:Hs,useMemo:Hs,useReducer:Hs,useRef:Hs,useState:Hs,useDebugValue:Hs,useDeferredValue:Hs,useTransition:Hs,useMutableSource:Hs,useSyncExternalStore:Hs,useId:Hs,unstable_isNewReconciler:!1},Kue={readContext:Ta,useCallback:function(t,e){return el().memoizedState=[t,e===void 0?null:e],t},useContext:Ta,useEffect:Y6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,LS(4194308,4,sV.bind(null,e,t),n)},useLayoutEffect:function(t,e){return LS(4194308,4,t,e)},useInsertionEffect:function(t,e){return LS(4,2,t,e)},useMemo:function(t,e){var n=el();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=el();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gue.bind(null,pr,t),[r.memoizedState,t]},useRef:function(t){var e=el();return t={current:t},e.memoizedState=t},useState:K6,useDebugValue:k5,useDeferredValue:function(t){return el().memoizedState=t},useTransition:function(){var t=K6(!1),e=t[0];return t=que.bind(null,t[1]),el().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pr,s=el();if(ir){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=e(),ws===null)throw Error(Ce(349));Ng&30||QG(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Y6(ZG.bind(null,r,i,t),[t]),r.flags|=2048,w_(9,JG.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=el(),e=ws.identifierPrefix;if(ir){var n=zu,r=Fu;n=(r&~(1<<32-Nc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=m_++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hue++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yue={readContext:Ta,useCallback:oV,useContext:Ta,useEffect:P5,useImperativeHandle:iV,useInsertionEffect:nV,useLayoutEffect:rV,useMemo:aV,useReducer:fP,useRef:tV,useState:function(){return fP(y_)},useDebugValue:k5,useDeferredValue:function(t){var e=Ra();return cV(e,Hr.memoizedState,t)},useTransition:function(){var t=fP(y_)[0],e=Ra().memoizedState;return[t,e]},useMutableSource:KG,useSyncExternalStore:YG,useId:lV,unstable_isNewReconciler:!1},Que={readContext:Ta,useCallback:oV,useContext:Ta,useEffect:P5,useImperativeHandle:iV,useInsertionEffect:nV,useLayoutEffect:rV,useMemo:aV,useReducer:pP,useRef:tV,useState:function(){return pP(y_)},useDebugValue:k5,useDeferredValue:function(t){var e=Ra();return Hr===null?e.memoizedState=t:cV(e,Hr.memoizedState,t)},useTransition:function(){var t=pP(y_)[0],e=Ra().memoizedState;return[t,e]},useMutableSource:KG,useSyncExternalStore:YG,useId:lV,unstable_isNewReconciler:!1};function rc(t,e){if(t&&t.defaultProps){e=gr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function z2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:gr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var LN={isMounted:function(t){return(t=t._reactInternals)?am(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ai(),s=Jh(t),i=Vu(r,s);i.payload=e,n!=null&&(i.callback=n),e=Yh(t,i,s),e!==null&&(Tc(e,t,s,r),DS(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ai(),s=Jh(t),i=Vu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Yh(t,i,s),e!==null&&(Tc(e,t,s,r),DS(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ai(),r=Jh(t),s=Vu(n,r);s.tag=2,e!=null&&(s.callback=e),e=Yh(t,s,r),e!==null&&(Tc(e,t,r,n),DS(e,t,r))}};function Q6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!u_(n,r)||!u_(s,i):!0}function fV(t,e,n){var r=!1,s=mf,i=e.contextType;return typeof i=="object"&&i!==null?i=Ta(i):(s=lo(e)?xg:ni.current,r=e.contextTypes,i=(r=r!=null)?E0(t,s):mf),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=LN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function J6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&LN.enqueueReplaceState(e,e.state,null)}function W2(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},A5(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ta(i):(i=lo(e)?xg:ni.current,s.context=E0(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(z2(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&LN.enqueueReplaceState(s,s.state,null),eI(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function S0(t,e){try{var n="",r=e;do n+=Ale(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function gP(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function H2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Jue=typeof WeakMap=="function"?WeakMap:Map;function pV(t,e,n){n=Vu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){iI||(iI=!0,eD=r),H2(t,e)},n}function gV(t,e,n){n=Vu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){H2(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){H2(t,e),typeof r!="function"&&(Qh===null?Qh=new Set([this]):Qh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Z6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Jue;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dde.bind(null,t,e,n),e.then(t,t))}function X6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function e8(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vu(-1,1),e.tag=2,Yh(n,e,1))),n.lanes|=1),t)}var Zue=md.ReactCurrentOwner,io=!1;function fi(t,e,n,r){e.child=t===null?HG(e,null,n,r):C0(e,t.child,n,r)}function t8(t,e,n,r,s){n=n.render;var i=e.ref;return sw(e,s),r=T5(t,e,n,r,i,s),n=R5(),t!==null&&!io?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ad(t,e,s)):(ir&&n&&y5(e),e.flags|=1,fi(t,e,r,s),e.child)}function n8(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!j5(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mV(t,e,i,r,s)):(t=jS(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:u_,n(o,r)&&t.ref===e.ref)return ad(t,e,s)}return e.flags|=1,t=Zh(i,r),t.ref=e.ref,t.return=e,e.child=t}function mV(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(u_(i,r)&&t.ref===e.ref)if(io=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(io=!0);else return e.lanes=t.lanes,ad(t,e,s)}return q2(t,e,n,r,s)}function yV(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(jy,Lo),Lo|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Vn(jy,Lo),Lo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Vn(jy,Lo),Lo|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Vn(jy,Lo),Lo|=r;return fi(t,e,s,n),e.child}function wV(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function q2(t,e,n,r,s){var i=lo(n)?xg:ni.current;return i=E0(e,i),sw(e,s),n=T5(t,e,n,r,i,s),r=R5(),t!==null&&!io?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ad(t,e,s)):(ir&&r&&y5(e),e.flags|=1,fi(t,e,n,s),e.child)}function r8(t,e,n,r,s){if(lo(n)){var i=!0;Yx(e)}else i=!1;if(sw(e,s),e.stateNode===null)MS(t,e),fV(e,n,r),W2(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ta(l):(l=lo(n)?xg:ni.current,l=E0(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&J6(e,o,r,l),Vd=!1;var h=e.memoizedState;o.state=h,eI(e,r,o,s),c=e.memoizedState,a!==r||h!==c||co.current||Vd?(typeof u=="function"&&(z2(e,n,u,r),c=e.memoizedState),(a=Vd||Q6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,GG(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:rc(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ta(c):(c=lo(n)?xg:ni.current,c=E0(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&J6(e,o,r,c),Vd=!1,h=e.memoizedState,o.state=h,eI(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||co.current||Vd?(typeof f=="function"&&(z2(e,n,f,r),p=e.memoizedState),(l=Vd||Q6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return G2(t,e,n,r,i,s)}function G2(t,e,n,r,s,i){wV(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&z6(e,n,!1),ad(t,e,i);r=e.stateNode,Zue.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=C0(e,t.child,null,i),e.child=C0(e,null,a,i)):fi(t,e,a,i),e.memoizedState=r.state,s&&z6(e,n,!0),e.child}function bV(t){var e=t.stateNode;e.pendingContext?F6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&F6(t,e.context,!1),S5(t,e.containerInfo)}function s8(t,e,n,r,s){return _0(),b5(s),e.flags|=256,fi(t,e,n,r),e.child}var V2={dehydrated:null,treeContext:null,retryLane:0};function K2(t){return{baseLanes:t,cachePool:null,transitions:null}}function vV(t,e,n){var r=e.pendingProps,s=ur.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Vn(ur,s&1),t===null)return j2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=BN(o,r,0,null),t=fg(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=K2(n),e.memoizedState=V2,t):O5(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Xue(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Zh(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Zh(a,i):(i=fg(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?K2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=V2,r}return i=t.child,t=i.sibling,r=Zh(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function O5(t,e){return e=BN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bA(t,e,n,r){return r!==null&&b5(r),C0(e,t.child,null,n),t=O5(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xue(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=gP(Error(Ce(422))),bA(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=BN({mode:"visible",children:r.children},s,0,null),i=fg(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&C0(e,t.child,null,o),e.child.memoizedState=K2(o),e.memoizedState=V2,i);if(!(e.mode&1))return bA(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ce(419)),r=gP(i,r,void 0),bA(t,e,o,r)}if(a=(o&t.childLanes)!==0,io||a){if(r=ws,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,od(t,s),Tc(r,t,s,-1))}return B5(),r=gP(Error(Ce(421))),bA(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=hde.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fo=Kh(s.nextSibling),Ho=e,ir=!0,gc=null,t!==null&&(Aa[Sa++]=Fu,Aa[Sa++]=zu,Aa[Sa++]=Ig,Fu=t.id,zu=t.overflow,Ig=e),e=O5(e,r.children),e.flags|=4096,e)}function i8(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),F2(t.return,e,n)}function mP(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function EV(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(fi(t,e,r.children,n),r=ur.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i8(t,n,e);else if(t.tag===19)i8(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Vn(ur,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&tI(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),mP(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&tI(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}mP(e,!0,n,null,i);break;case"together":mP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function MS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ad(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Tg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ce(153));if(e.child!==null){for(t=e.child,n=Zh(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zh(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ede(t,e,n){switch(e.tag){case 3:bV(e),_0();break;case 5:VG(e);break;case 1:lo(e.type)&&Yx(e);break;case 4:S5(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Vn(Zx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vn(ur,ur.current&1),e.flags|=128,null):n&e.child.childLanes?vV(t,e,n):(Vn(ur,ur.current&1),t=ad(t,e,n),t!==null?t.sibling:null);Vn(ur,ur.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return EV(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vn(ur,ur.current),r)break;return null;case 22:case 23:return e.lanes=0,yV(t,e,n)}return ad(t,e,n)}var _V,Y2,CV,AV;_V=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Y2=function(){};CV=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ap(Rl.current);var i=null;switch(n){case"input":s=y2(t,s),r=y2(t,r),i=[];break;case"select":s=gr({},s,{value:void 0}),r=gr({},r,{value:void 0}),i=[];break;case"textarea":s=v2(t,s),r=v2(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vx)}_2(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(r_.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(r_.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Qn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};AV=function(t,e,n,r){n!==r&&(e.flags|=4)};function cv(t,e){if(!ir)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tde(t,e,n){var r=e.pendingProps;switch(w5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(e),null;case 1:return lo(e.type)&&Kx(),qs(e),null;case 3:return r=e.stateNode,A0(),Xn(co),Xn(ni),I5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yA(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gc!==null&&(rD(gc),gc=null))),Y2(t,e),qs(e),null;case 5:x5(e);var s=Ap(g_.current);if(n=e.type,t!==null&&e.stateNode!=null)CV(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ce(166));return qs(e),null}if(t=Ap(Rl.current),yA(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[El]=e,r[f_]=i,t=(e.mode&1)!==0,n){case"dialog":Qn("cancel",r),Qn("close",r);break;case"iframe":case"object":case"embed":Qn("load",r);break;case"video":case"audio":for(s=0;s<Fv.length;s++)Qn(Fv[s],r);break;case"source":Qn("error",r);break;case"img":case"image":case"link":Qn("error",r),Qn("load",r);break;case"details":Qn("toggle",r);break;case"input":p6(r,i),Qn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Qn("invalid",r);break;case"textarea":m6(r,i),Qn("invalid",r)}_2(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&mA(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&mA(r.textContent,a,t),s=["children",""+a]):r_.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qn("scroll",r)}switch(n){case"input":cA(r),g6(r,i,!0);break;case"textarea":cA(r),y6(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vx)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zq(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[El]=e,t[f_]=r,_V(t,e,!1,!1),e.stateNode=t;e:{switch(o=C2(n,r),n){case"dialog":Qn("cancel",t),Qn("close",t),s=r;break;case"iframe":case"object":case"embed":Qn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Fv.length;s++)Qn(Fv[s],t);s=r;break;case"source":Qn("error",t),s=r;break;case"img":case"image":case"link":Qn("error",t),Qn("load",t),s=r;break;case"details":Qn("toggle",t),s=r;break;case"input":p6(t,r),s=y2(t,r),Qn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=gr({},r,{value:void 0}),Qn("invalid",t);break;case"textarea":m6(t,r),s=v2(t,r),Qn("invalid",t);break;default:s=r}_2(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?tG(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Xq(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&s_(t,c):typeof c=="number"&&s_(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(r_.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Qn("scroll",t):c!=null&&r5(t,i,c,o))}switch(n){case"input":cA(t),g6(t,r,!1);break;case"textarea":cA(t),y6(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gf(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ew(t,!!r.multiple,i,!1):r.defaultValue!=null&&ew(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qs(e),null;case 6:if(t&&e.stateNode!=null)AV(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ce(166));if(n=Ap(g_.current),Ap(Rl.current),yA(e)){if(r=e.stateNode,n=e.memoizedProps,r[El]=e,(i=r.nodeValue!==n)&&(t=Ho,t!==null))switch(t.tag){case 3:mA(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mA(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[El]=e,e.stateNode=r}return qs(e),null;case 13:if(Xn(ur),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ir&&Fo!==null&&e.mode&1&&!(e.flags&128))zG(),_0(),e.flags|=98560,i=!1;else if(i=yA(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ce(317));i[El]=e}else _0(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qs(e),i=!1}else gc!==null&&(rD(gc),gc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ur.current&1?Yr===0&&(Yr=3):B5())),e.updateQueue!==null&&(e.flags|=4),qs(e),null);case 4:return A0(),Y2(t,e),t===null&&d_(e.stateNode.containerInfo),qs(e),null;case 10:return _5(e.type._context),qs(e),null;case 17:return lo(e.type)&&Kx(),qs(e),null;case 19:if(Xn(ur),i=e.memoizedState,i===null)return qs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)cv(i,!1);else{if(Yr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tI(t),o!==null){for(e.flags|=128,cv(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Vn(ur,ur.current&1|2),e.child}t=t.sibling}i.tail!==null&&Rr()>x0&&(e.flags|=128,r=!0,cv(i,!1),e.lanes=4194304)}else{if(!r)if(t=tI(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cv(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ir)return qs(e),null}else 2*Rr()-i.renderingStartTime>x0&&n!==1073741824&&(e.flags|=128,r=!0,cv(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Rr(),e.sibling=null,n=ur.current,Vn(ur,r?n&1|2:n&1),e):(qs(e),null);case 22:case 23:return U5(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lo&1073741824&&(qs(e),e.subtreeFlags&6&&(e.flags|=8192)):qs(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function nde(t,e){switch(w5(e),e.tag){case 1:return lo(e.type)&&Kx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return A0(),Xn(co),Xn(ni),I5(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x5(e),null;case 13:if(Xn(ur),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));_0()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xn(ur),null;case 4:return A0(),null;case 10:return _5(e.type._context),null;case 22:case 23:return U5(),null;case 24:return null;default:return null}}var vA=!1,ei=!1,rde=typeof WeakSet=="function"?WeakSet:Set,He=null;function By(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Er(t,e,r)}else n.current=null}function Q2(t,e,n){try{n()}catch(r){Er(t,e,r)}}var o8=!1;function sde(t,e){if(O2=Hx,t=TG(),m5(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(D2={focusedElem:t,selectionRange:n},Hx=!1,He=e;He!==null;)if(e=He,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,He=t;else for(;He!==null;){e=He;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,m=e.stateNode,b=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:rc(e.type,g),y);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(C){Er(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}return p=o8,o8=!1,p}function bE(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Q2(e,n,i)}s=s.next}while(s!==r)}}function MN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function J2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SV(t){var e=t.alternate;e!==null&&(t.alternate=null,SV(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[El],delete e[f_],delete e[M2],delete e[jue],delete e[Fue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xV(t){return t.tag===5||t.tag===3||t.tag===4}function a8(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Z2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vx));else if(r!==4&&(t=t.child,t!==null))for(Z2(t,e,n),t=t.sibling;t!==null;)Z2(t,e,n),t=t.sibling}function X2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(X2(t,e,n),t=t.sibling;t!==null;)X2(t,e,n),t=t.sibling}var Ns=null,fc=!1;function Ed(t,e,n){for(n=n.child;n!==null;)IV(t,e,n),n=n.sibling}function IV(t,e,n){if(Tl&&typeof Tl.onCommitFiberUnmount=="function")try{Tl.onCommitFiberUnmount(TN,n)}catch{}switch(n.tag){case 5:ei||By(n,e);case 6:var r=Ns,s=fc;Ns=null,Ed(t,e,n),Ns=r,fc=s,Ns!==null&&(fc?(t=Ns,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ns.removeChild(n.stateNode));break;case 18:Ns!==null&&(fc?(t=Ns,n=n.stateNode,t.nodeType===8?lP(t.parentNode,n):t.nodeType===1&&lP(t,n),c_(t)):lP(Ns,n.stateNode));break;case 4:r=Ns,s=fc,Ns=n.stateNode.containerInfo,fc=!0,Ed(t,e,n),Ns=r,fc=s;break;case 0:case 11:case 14:case 15:if(!ei&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Q2(n,e,o),s=s.next}while(s!==r)}Ed(t,e,n);break;case 1:if(!ei&&(By(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Er(n,e,a)}Ed(t,e,n);break;case 21:Ed(t,e,n);break;case 22:n.mode&1?(ei=(r=ei)||n.memoizedState!==null,Ed(t,e,n),ei=r):Ed(t,e,n);break;default:Ed(t,e,n)}}function c8(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rde),e.forEach(function(r){var s=fde.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qa(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ns=a.stateNode,fc=!1;break e;case 3:Ns=a.stateNode.containerInfo,fc=!0;break e;case 4:Ns=a.stateNode.containerInfo,fc=!0;break e}a=a.return}if(Ns===null)throw Error(Ce(160));IV(i,o,s),Ns=null,fc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Er(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NV(e,t),e=e.sibling}function NV(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qa(e,t),Hc(t),r&4){try{bE(3,t,t.return),MN(3,t)}catch(g){Er(t,t.return,g)}try{bE(5,t,t.return)}catch(g){Er(t,t.return,g)}}break;case 1:qa(e,t),Hc(t),r&512&&n!==null&&By(n,n.return);break;case 5:if(qa(e,t),Hc(t),r&512&&n!==null&&By(n,n.return),t.flags&32){var s=t.stateNode;try{s_(s,"")}catch(g){Er(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Qq(s,i),C2(a,o);var l=C2(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?tG(s,d):u==="dangerouslySetInnerHTML"?Xq(s,d):u==="children"?s_(s,d):r5(s,u,d,l)}switch(a){case"input":w2(s,i);break;case"textarea":Jq(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ew(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?ew(s,!!i.multiple,i.defaultValue,!0):ew(s,!!i.multiple,i.multiple?[]:"",!1))}s[f_]=i}catch(g){Er(t,t.return,g)}}break;case 6:if(qa(e,t),Hc(t),r&4){if(t.stateNode===null)throw Error(Ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Er(t,t.return,g)}}break;case 3:if(qa(e,t),Hc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{c_(e.containerInfo)}catch(g){Er(t,t.return,g)}break;case 4:qa(e,t),Hc(t);break;case 13:qa(e,t),Hc(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(L5=Rr())),r&4&&c8(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ei=(l=ei)||u,qa(e,t),ei=l):qa(e,t),Hc(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(He=t,u=t.child;u!==null;){for(d=He=u;He!==null;){switch(h=He,f=h.child,h.tag){case 0:case 11:case 14:case 15:bE(4,h,h.return);break;case 1:By(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Er(r,n,g)}}break;case 5:By(h,h.return);break;case 22:if(h.memoizedState!==null){u8(d);continue}}f!==null?(f.return=h,He=f):u8(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=eG("display",o))}catch(g){Er(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Er(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:qa(e,t),Hc(t),r&4&&c8(t);break;case 21:break;default:qa(e,t),Hc(t)}}function Hc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xV(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(s_(s,""),r.flags&=-33);var i=a8(t);X2(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=a8(t);Z2(t,a,o);break;default:throw Error(Ce(161))}}catch(c){Er(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ide(t,e,n){He=t,TV(t)}function TV(t,e,n){for(var r=(t.mode&1)!==0;He!==null;){var s=He,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||vA;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ei;a=vA;var l=ei;if(vA=o,(ei=c)&&!l)for(He=s;He!==null;)o=He,c=o.child,o.tag===22&&o.memoizedState!==null?d8(s):c!==null?(c.return=o,He=c):d8(s);for(;i!==null;)He=i,TV(i),i=i.sibling;He=s,vA=a,ei=l}l8(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,He=i):l8(t)}}function l8(t){for(;He!==null;){var e=He;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ei||MN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ei)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rc(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&V6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}V6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&c_(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}ei||e.flags&512&&J2(e)}catch(h){Er(e,e.return,h)}}if(e===t){He=null;break}if(n=e.sibling,n!==null){n.return=e.return,He=n;break}He=e.return}}function u8(t){for(;He!==null;){var e=He;if(e===t){He=null;break}var n=e.sibling;if(n!==null){n.return=e.return,He=n;break}He=e.return}}function d8(t){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{MN(4,e)}catch(c){Er(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Er(e,s,c)}}var i=e.return;try{J2(e)}catch(c){Er(e,i,c)}break;case 5:var o=e.return;try{J2(e)}catch(c){Er(e,o,c)}}}catch(c){Er(e,e.return,c)}if(e===t){He=null;break}var a=e.sibling;if(a!==null){a.return=e.return,He=a;break}He=e.return}}var ode=Math.ceil,sI=md.ReactCurrentDispatcher,D5=md.ReactCurrentOwner,Na=md.ReactCurrentBatchConfig,Xt=0,ws=null,Ur=null,Os=0,Lo=0,jy=Tf(0),Yr=0,b_=null,Tg=0,UN=0,$5=0,vE=null,eo=null,L5=0,x0=1/0,mu=null,iI=!1,eD=null,Qh=null,EA=!1,Oh=null,oI=0,EE=0,tD=null,US=-1,BS=0;function Ai(){return Xt&6?Rr():US!==-1?US:US=Rr()}function Jh(t){return t.mode&1?Xt&2&&Os!==0?Os&-Os:Wue.transition!==null?(BS===0&&(BS=fG()),BS):(t=En,t!==0||(t=window.event,t=t===void 0?16:vG(t.type)),t):1}function Tc(t,e,n,r){if(50<EE)throw EE=0,tD=null,Error(Ce(185));r1(t,n,r),(!(Xt&2)||t!==ws)&&(t===ws&&(!(Xt&2)&&(UN|=n),Yr===4&&eh(t,Os)),uo(t,r),n===1&&Xt===0&&!(e.mode&1)&&(x0=Rr()+500,DN&&Rf()))}function uo(t,e){var n=t.callbackNode;Wle(t,e);var r=Wx(t,t===ws?Os:0);if(r===0)n!==null&&v6(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&v6(n),e===1)t.tag===0?zue(h8.bind(null,t)):BG(h8.bind(null,t)),Uue(function(){!(Xt&6)&&Rf()}),n=null;else{switch(pG(r)){case 1:n=c5;break;case 4:n=dG;break;case 16:n=zx;break;case 536870912:n=hG;break;default:n=zx}n=MV(n,RV.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function RV(t,e){if(US=-1,BS=0,Xt&6)throw Error(Ce(327));var n=t.callbackNode;if(iw()&&t.callbackNode!==n)return null;var r=Wx(t,t===ws?Os:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=aI(t,r);else{e=r;var s=Xt;Xt|=2;var i=kV();(ws!==t||Os!==e)&&(mu=null,x0=Rr()+500,hg(t,e));do try{lde();break}catch(a){PV(t,a)}while(!0);E5(),sI.current=i,Xt=s,Ur!==null?e=0:(ws=null,Os=0,e=Yr)}if(e!==0){if(e===2&&(s=N2(t),s!==0&&(r=s,e=nD(t,s))),e===1)throw n=b_,hg(t,0),eh(t,r),uo(t,Rr()),n;if(e===6)eh(t,r);else{if(s=t.current.alternate,!(r&30)&&!ade(s)&&(e=aI(t,r),e===2&&(i=N2(t),i!==0&&(r=i,e=nD(t,i))),e===1))throw n=b_,hg(t,0),eh(t,r),uo(t,Rr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ce(345));case 2:tp(t,eo,mu);break;case 3:if(eh(t,r),(r&130023424)===r&&(e=L5+500-Rr(),10<e)){if(Wx(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ai(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=L2(tp.bind(null,t,eo,mu),e);break}tp(t,eo,mu);break;case 4:if(eh(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Nc(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Rr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ode(r/1960))-r,10<r){t.timeoutHandle=L2(tp.bind(null,t,eo,mu),r);break}tp(t,eo,mu);break;case 5:tp(t,eo,mu);break;default:throw Error(Ce(329))}}}return uo(t,Rr()),t.callbackNode===n?RV.bind(null,t):null}function nD(t,e){var n=vE;return t.current.memoizedState.isDehydrated&&(hg(t,e).flags|=256),t=aI(t,e),t!==2&&(e=eo,eo=n,e!==null&&rD(e)),t}function rD(t){eo===null?eo=t:eo.push.apply(eo,t)}function ade(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!kc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function eh(t,e){for(e&=~$5,e&=~UN,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nc(e),r=1<<n;t[n]=-1,e&=~r}}function h8(t){if(Xt&6)throw Error(Ce(327));iw();var e=Wx(t,0);if(!(e&1))return uo(t,Rr()),null;var n=aI(t,e);if(t.tag!==0&&n===2){var r=N2(t);r!==0&&(e=r,n=nD(t,r))}if(n===1)throw n=b_,hg(t,0),eh(t,e),uo(t,Rr()),n;if(n===6)throw Error(Ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,tp(t,eo,mu),uo(t,Rr()),null}function M5(t,e){var n=Xt;Xt|=1;try{return t(e)}finally{Xt=n,Xt===0&&(x0=Rr()+500,DN&&Rf())}}function Rg(t){Oh!==null&&Oh.tag===0&&!(Xt&6)&&iw();var e=Xt;Xt|=1;var n=Na.transition,r=En;try{if(Na.transition=null,En=1,t)return t()}finally{En=r,Na.transition=n,Xt=e,!(Xt&6)&&Rf()}}function U5(){Lo=jy.current,Xn(jy)}function hg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mue(n)),Ur!==null)for(n=Ur.return;n!==null;){var r=n;switch(w5(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kx();break;case 3:A0(),Xn(co),Xn(ni),I5();break;case 5:x5(r);break;case 4:A0();break;case 13:Xn(ur);break;case 19:Xn(ur);break;case 10:_5(r.type._context);break;case 22:case 23:U5()}n=n.return}if(ws=t,Ur=t=Zh(t.current,null),Os=Lo=e,Yr=0,b_=null,$5=UN=Tg=0,eo=vE=null,Cp!==null){for(e=0;e<Cp.length;e++)if(n=Cp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Cp=null}return t}function PV(t,e){do{var n=Ur;try{if(E5(),$S.current=rI,nI){for(var r=pr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}nI=!1}if(Ng=0,ls=Hr=pr=null,wE=!1,m_=0,D5.current=null,n===null||n.return===null){Yr=1,b_=e,Ur=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Os,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=X6(o);if(f!==null){f.flags&=-257,e8(f,o,a,i,e),f.mode&1&&Z6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){Z6(i,l,e),B5();break e}c=Error(Ce(426))}}else if(ir&&a.mode&1){var y=X6(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),e8(y,o,a,i,e),b5(S0(c,a));break e}}i=c=S0(c,a),Yr!==4&&(Yr=2),vE===null?vE=[i]:vE.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=pV(i,c,e);G6(i,m);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Qh===null||!Qh.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=gV(i,a,e);G6(i,C);break e}}i=i.return}while(i!==null)}DV(n)}catch(A){e=A,Ur===n&&n!==null&&(Ur=n=n.return);continue}break}while(!0)}function kV(){var t=sI.current;return sI.current=rI,t===null?rI:t}function B5(){(Yr===0||Yr===3||Yr===2)&&(Yr=4),ws===null||!(Tg&268435455)&&!(UN&268435455)||eh(ws,Os)}function aI(t,e){var n=Xt;Xt|=2;var r=kV();(ws!==t||Os!==e)&&(mu=null,hg(t,e));do try{cde();break}catch(s){PV(t,s)}while(!0);if(E5(),Xt=n,sI.current=r,Ur!==null)throw Error(Ce(261));return ws=null,Os=0,Yr}function cde(){for(;Ur!==null;)OV(Ur)}function lde(){for(;Ur!==null&&!Dle();)OV(Ur)}function OV(t){var e=LV(t.alternate,t,Lo);t.memoizedProps=t.pendingProps,e===null?DV(t):Ur=e,D5.current=null}function DV(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nde(n,e),n!==null){n.flags&=32767,Ur=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yr=6,Ur=null;return}}else if(n=tde(n,e,Lo),n!==null){Ur=n;return}if(e=e.sibling,e!==null){Ur=e;return}Ur=e=t}while(e!==null);Yr===0&&(Yr=5)}function tp(t,e,n){var r=En,s=Na.transition;try{Na.transition=null,En=1,ude(t,e,n,r)}finally{Na.transition=s,En=r}return null}function ude(t,e,n,r){do iw();while(Oh!==null);if(Xt&6)throw Error(Ce(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ce(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Hle(t,i),t===ws&&(Ur=ws=null,Os=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||EA||(EA=!0,MV(zx,function(){return iw(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Na.transition,Na.transition=null;var o=En;En=1;var a=Xt;Xt|=4,D5.current=null,sde(t,n),NV(n,t),Rue(D2),Hx=!!O2,D2=O2=null,t.current=n,ide(n),$le(),Xt=a,En=o,Na.transition=i}else t.current=n;if(EA&&(EA=!1,Oh=t,oI=s),i=t.pendingLanes,i===0&&(Qh=null),Ule(n.stateNode),uo(t,Rr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(iI)throw iI=!1,t=eD,eD=null,t;return oI&1&&t.tag!==0&&iw(),i=t.pendingLanes,i&1?t===tD?EE++:(EE=0,tD=t):EE=0,Rf(),null}function iw(){if(Oh!==null){var t=pG(oI),e=Na.transition,n=En;try{if(Na.transition=null,En=16>t?16:t,Oh===null)var r=!1;else{if(t=Oh,Oh=null,oI=0,Xt&6)throw Error(Ce(331));var s=Xt;for(Xt|=4,He=t.current;He!==null;){var i=He,o=i.child;if(He.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(He=l;He!==null;){var u=He;switch(u.tag){case 0:case 11:case 15:bE(8,u,i)}var d=u.child;if(d!==null)d.return=u,He=d;else for(;He!==null;){u=He;var h=u.sibling,f=u.return;if(SV(u),u===l){He=null;break}if(h!==null){h.return=f,He=h;break}He=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}He=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,He=o;else e:for(;He!==null;){if(i=He,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bE(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,He=m;break e}He=i.return}}var b=t.current;for(He=b;He!==null;){o=He;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,He=v;else e:for(o=b;He!==null;){if(a=He,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:MN(9,a)}}catch(A){Er(a,a.return,A)}if(a===o){He=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,He=C;break e}He=a.return}}if(Xt=s,Rf(),Tl&&typeof Tl.onPostCommitFiberRoot=="function")try{Tl.onPostCommitFiberRoot(TN,t)}catch{}r=!0}return r}finally{En=n,Na.transition=e}}return!1}function f8(t,e,n){e=S0(n,e),e=pV(t,e,1),t=Yh(t,e,1),e=Ai(),t!==null&&(r1(t,1,e),uo(t,e))}function Er(t,e,n){if(t.tag===3)f8(t,t,n);else for(;e!==null;){if(e.tag===3){f8(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qh===null||!Qh.has(r))){t=S0(n,t),t=gV(e,t,1),e=Yh(e,t,1),t=Ai(),e!==null&&(r1(e,1,t),uo(e,t));break}}e=e.return}}function dde(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ai(),t.pingedLanes|=t.suspendedLanes&n,ws===t&&(Os&n)===n&&(Yr===4||Yr===3&&(Os&130023424)===Os&&500>Rr()-L5?hg(t,0):$5|=n),uo(t,e)}function $V(t,e){e===0&&(t.mode&1?(e=dA,dA<<=1,!(dA&130023424)&&(dA=4194304)):e=1);var n=Ai();t=od(t,e),t!==null&&(r1(t,e,n),uo(t,n))}function hde(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$V(t,n)}function fde(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(e),$V(t,n)}var LV;LV=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||co.current)io=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return io=!1,ede(t,e,n);io=!!(t.flags&131072)}else io=!1,ir&&e.flags&1048576&&jG(e,Jx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;MS(t,e),t=e.pendingProps;var s=E0(e,ni.current);sw(e,n),s=T5(null,e,r,t,s,n);var i=R5();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lo(r)?(i=!0,Yx(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,A5(e),s.updater=LN,e.stateNode=s,s._reactInternals=e,W2(e,r,t,n),e=G2(null,e,r,!0,i,n)):(e.tag=0,ir&&i&&y5(e),fi(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(MS(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gde(r),t=rc(r,t),s){case 0:e=q2(null,e,r,t,n);break e;case 1:e=r8(null,e,r,t,n);break e;case 11:e=t8(null,e,r,t,n);break e;case 14:e=n8(null,e,r,rc(r.type,t),n);break e}throw Error(Ce(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rc(r,s),q2(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rc(r,s),r8(t,e,r,s,n);case 3:e:{if(bV(e),t===null)throw Error(Ce(387));r=e.pendingProps,i=e.memoizedState,s=i.element,GG(t,e),eI(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=S0(Error(Ce(423)),e),e=s8(t,e,r,n,s);break e}else if(r!==s){s=S0(Error(Ce(424)),e),e=s8(t,e,r,n,s);break e}else for(Fo=Kh(e.stateNode.containerInfo.firstChild),Ho=e,ir=!0,gc=null,n=HG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_0(),r===s){e=ad(t,e,n);break e}fi(t,e,r,n)}e=e.child}return e;case 5:return VG(e),t===null&&j2(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,$2(r,s)?o=null:i!==null&&$2(r,i)&&(e.flags|=32),wV(t,e),fi(t,e,o,n),e.child;case 6:return t===null&&j2(e),null;case 13:return vV(t,e,n);case 4:return S5(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=C0(e,null,r,n):fi(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rc(r,s),t8(t,e,r,s,n);case 7:return fi(t,e,e.pendingProps,n),e.child;case 8:return fi(t,e,e.pendingProps.children,n),e.child;case 12:return fi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Vn(Zx,r._currentValue),r._currentValue=o,i!==null)if(kc(i.value,o)){if(i.children===s.children&&!co.current){e=ad(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Vu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),F2(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),F2(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}fi(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,sw(e,n),s=Ta(s),r=r(s),e.flags|=1,fi(t,e,r,n),e.child;case 14:return r=e.type,s=rc(r,e.pendingProps),s=rc(r.type,s),n8(t,e,r,s,n);case 15:return mV(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rc(r,s),MS(t,e),e.tag=1,lo(r)?(t=!0,Yx(e)):t=!1,sw(e,n),fV(e,r,s),W2(e,r,s,n),G2(null,e,r,!0,t,n);case 19:return EV(t,e,n);case 22:return yV(t,e,n)}throw Error(Ce(156,e.tag))};function MV(t,e){return uG(t,e)}function pde(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(t,e,n,r){return new pde(t,e,n,r)}function j5(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gde(t){if(typeof t=="function")return j5(t)?1:0;if(t!=null){if(t=t.$$typeof,t===i5)return 11;if(t===o5)return 14}return 2}function Zh(t,e){var n=t.alternate;return n===null?(n=xa(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jS(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")j5(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ry:return fg(n.children,s,i,e);case s5:o=8,s|=8;break;case f2:return t=xa(12,n,e,s|2),t.elementType=f2,t.lanes=i,t;case p2:return t=xa(13,n,e,s),t.elementType=p2,t.lanes=i,t;case g2:return t=xa(19,n,e,s),t.elementType=g2,t.lanes=i,t;case Vq:return BN(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qq:o=10;break e;case Gq:o=9;break e;case i5:o=11;break e;case o5:o=14;break e;case Gd:o=16,r=null;break e}throw Error(Ce(130,t==null?t:typeof t,""))}return e=xa(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function fg(t,e,n,r){return t=xa(7,t,r,e),t.lanes=n,t}function BN(t,e,n,r){return t=xa(22,t,r,e),t.elementType=Vq,t.lanes=n,t.stateNode={isHidden:!1},t}function yP(t,e,n){return t=xa(6,t,null,e),t.lanes=n,t}function wP(t,e,n){return e=xa(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mde(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ZR(0),this.expirationTimes=ZR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ZR(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function F5(t,e,n,r,s,i,o,a,c){return t=new mde(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=xa(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},A5(i),t}function yde(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ty,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function UV(t){if(!t)return mf;t=t._reactInternals;e:{if(am(t)!==t||t.tag!==1)throw Error(Ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(t.tag===1){var n=t.type;if(lo(n))return UG(t,n,e)}return e}function BV(t,e,n,r,s,i,o,a,c){return t=F5(n,r,!0,t,s,i,o,a,c),t.context=UV(null),n=t.current,r=Ai(),s=Jh(n),i=Vu(r,s),i.callback=e??null,Yh(n,i,s),t.current.lanes=s,r1(t,s,r),uo(t,r),t}function jN(t,e,n,r){var s=e.current,i=Ai(),o=Jh(s);return n=UV(n),e.context===null?e.context=n:e.pendingContext=n,e=Vu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yh(s,e,o),t!==null&&(Tc(t,s,o,i),DS(t,s,o)),o}function cI(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function p8(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function z5(t,e){p8(t,e),(t=t.alternate)&&p8(t,e)}function wde(){return null}var jV=typeof reportError=="function"?reportError:function(t){console.error(t)};function W5(t){this._internalRoot=t}FN.prototype.render=W5.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ce(409));jN(t,e,null,null)};FN.prototype.unmount=W5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rg(function(){jN(null,t,null,null)}),e[id]=null}};function FN(t){this._internalRoot=t}FN.prototype.unstable_scheduleHydration=function(t){if(t){var e=yG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xd.length&&e!==0&&e<Xd[n].priority;n++);Xd.splice(n,0,t),n===0&&bG(t)}};function H5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function g8(){}function bde(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=cI(o);i.call(l)}}var o=BV(e,r,t,0,null,!1,!1,"",g8);return t._reactRootContainer=o,t[id]=o.current,d_(t.nodeType===8?t.parentNode:t),Rg(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=cI(c);a.call(l)}}var c=F5(t,0,!1,null,null,!1,!1,"",g8);return t._reactRootContainer=c,t[id]=c.current,d_(t.nodeType===8?t.parentNode:t),Rg(function(){jN(e,c,n,r)}),c}function WN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=cI(o);a.call(c)}}jN(e,o,t,s)}else o=bde(n,e,t,s,r);return cI(o)}gG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jv(e.pendingLanes);n!==0&&(l5(e,n|1),uo(e,Rr()),!(Xt&6)&&(x0=Rr()+500,Rf()))}break;case 13:Rg(function(){var r=od(t,1);if(r!==null){var s=Ai();Tc(r,t,1,s)}}),z5(t,1)}};u5=function(t){if(t.tag===13){var e=od(t,134217728);if(e!==null){var n=Ai();Tc(e,t,134217728,n)}z5(t,134217728)}};mG=function(t){if(t.tag===13){var e=Jh(t),n=od(t,e);if(n!==null){var r=Ai();Tc(n,t,e,r)}z5(t,e)}};yG=function(){return En};wG=function(t,e){var n=En;try{return En=t,e()}finally{En=n}};S2=function(t,e,n){switch(e){case"input":if(w2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ON(r);if(!s)throw Error(Ce(90));Yq(r),w2(r,s)}}}break;case"textarea":Jq(t,n);break;case"select":e=n.value,e!=null&&ew(t,!!n.multiple,e,!1)}};sG=M5;iG=Rg;var vde={usingClientEntryPoint:!1,Events:[i1,Dy,ON,nG,rG,M5]},lv={findFiberByHostInstance:_p,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ede={bundleType:lv.bundleType,version:lv.version,rendererPackageName:lv.rendererPackageName,rendererConfig:lv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:md.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cG(t),t===null?null:t.stateNode},findFiberByHostInstance:lv.findFiberByHostInstance||wde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _A=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_A.isDisabled&&_A.supportsFiber)try{TN=_A.inject(Ede),Tl=_A}catch{}}Qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vde;Qo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H5(e))throw Error(Ce(200));return yde(t,e,null,n)};Qo.createRoot=function(t,e){if(!H5(t))throw Error(Ce(299));var n=!1,r="",s=jV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=F5(t,1,!1,null,null,n,!1,r,s),t[id]=e.current,d_(t.nodeType===8?t.parentNode:t),new W5(e)};Qo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ce(188)):(t=Object.keys(t).join(","),Error(Ce(268,t)));return t=cG(e),t=t===null?null:t.stateNode,t};Qo.flushSync=function(t){return Rg(t)};Qo.hydrate=function(t,e,n){if(!zN(e))throw Error(Ce(200));return WN(null,t,e,!0,n)};Qo.hydrateRoot=function(t,e,n){if(!H5(t))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=jV;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=BV(e,null,t,1,n??null,s,!1,i,o),t[id]=e.current,d_(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new FN(e)};Qo.render=function(t,e,n){if(!zN(e))throw Error(Ce(200));return WN(null,t,e,!1,n)};Qo.unmountComponentAtNode=function(t){if(!zN(t))throw Error(Ce(40));return t._reactRootContainer?(Rg(function(){WN(null,null,t,!1,function(){t._reactRootContainer=null,t[id]=null})}),!0):!1};Qo.unstable_batchedUpdates=M5;Qo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zN(n))throw Error(Ce(200));if(t==null||t._reactInternals===void 0)throw Error(Ce(38));return WN(t,e,n,!1,r)};Qo.version="18.3.1-next-f1338f8080-20240426";function FV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FV)}catch(t){console.error(t)}}FV(),Fq.exports=Qo;var q5=Fq.exports,m8=q5;d2.createRoot=m8.createRoot,d2.hydrateRoot=m8.hydrateRoot;const zV="2.31.7";let uv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${zV}`},ge=class sD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof sD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof sD&&n.cause.docsPath||n.docsPath,i=(a=uv.getDocsUrl)==null?void 0:a.call(uv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...uv.version?[`Version: ${uv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=zV}walk(e){return WV(this,e)}};function WV(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?WV(t.cause,e):e?null:t}let HV=class extends ge{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class _de extends ge{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Cde extends ge{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Ade=class extends ge{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},qV=class extends ge{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},GV=class extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class y8 extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function mb(t,{dir:e,size:n=32}={}){return typeof t=="string"?Xh(t,{dir:e,size:n}):Sde(t,{dir:e,size:n})}function Xh(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new GV({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Sde(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new GV({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Ul(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Ar(t){return Ul(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Pl(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const xde=new TextEncoder;function yb(t,e={}){return typeof t=="number"||typeof t=="bigint"?Nde(t,e):typeof t=="boolean"?Ide(t,e):Ul(t)?Pa(t,e):pg(t,e)}function Ide(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(La(n,{size:e.size}),mb(n,{size:e.size})):n}const Zl={zero:48,nine:57,A:65,F:70,a:97,f:102};function w8(t){if(t>=Zl.zero&&t<=Zl.nine)return t-Zl.zero;if(t>=Zl.A&&t<=Zl.F)return t-(Zl.A-10);if(t>=Zl.a&&t<=Zl.f)return t-(Zl.a-10)}function Pa(t,e={}){let n=t;e.size&&(La(n,{size:e.size}),n=mb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=w8(r.charCodeAt(a++)),l=w8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ge(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Nde(t,e){const n=Ze(t,e);return Pa(n)}function pg(t,e={}){const n=xde.encode(t);return typeof e.size=="number"?(La(n,{size:e.size}),mb(n,{dir:"right",size:e.size})):n}function La(t,{size:e}){if(Ar(t)>e)throw new Ade({givenSize:Ar(t),maxSize:e})}function Ko(t,e={}){const{signed:n}=e;e.size&&La(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Tde(t,e={}){let n=t;if(e.size&&(La(n,{size:e.size}),n=Pl(n)),Pl(n)==="0x00")return!1;if(Pl(n)==="0x01")return!0;throw new Cde(n)}function Oc(t,e={}){return Number(Ko(t,e))}function VV(t,e={}){let n=Pa(t);return e.size&&(La(n,{size:e.size}),n=Pl(n,{dir:"right"})),new TextDecoder().decode(n)}const Rde=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ka(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ze(t,e):typeof t=="string"?I0(t,e):typeof t=="boolean"?KV(t,e):Xr(t,e)}function KV(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(La(n,{size:e.size}),mb(n,{size:e.size})):n}function Xr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Rde[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(La(r,{size:e.size}),mb(r,{dir:"right",size:e.size})):r}function Ze(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new HV({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?mb(a,{size:r}):a}const Pde=new TextEncoder;function I0(t,e={}){const n=Pde.encode(t);return Xr(n,e)}async function kde(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Ze(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Dc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new qde(t.type);return`${t.name}(${HN(t.inputs,{includeName:e})})`}function HN(t,{includeName:e=!1}={}){return t?t.map(n=>Ode(n,{includeName:e})).join(e?", ":","):""}function Ode(t,{includeName:e}){return t.type.startsWith("tuple")?`(${HN(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class Dde extends ge{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class b8 extends ge{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class YV extends ge{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${HN(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class a1 extends ge{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class $de extends ge{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Lde extends ge{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ar(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Mde extends ge{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Ude extends ge{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class v8 extends ge{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class QV extends ge{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Bde extends ge{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class JV extends ge{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class E8 extends ge{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class N0 extends ge{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class ZV extends ge{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class jde extends ge{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Fde extends ge{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Dc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Dc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let zde=class extends ge{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class v_ extends ge{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${HN(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class qN extends ge{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Dc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Wde extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Hde extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let XV=class extends ge{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class qde extends ge{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Oa(t){return typeof t[0]=="string"?wb(t):Gde(t)}function Gde(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function wb(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let yf=class extends ge{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},GN=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const CA=BigInt(2**32-1),_8=BigInt(32);function Vde(t,e=!1){return e?{h:Number(t&CA),l:Number(t>>_8&CA)}:{h:Number(t>>_8&CA)|0,l:Number(t&CA)|0}}function Kde(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Vde(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const Yde=(t,e,n)=>t<<n|e>>>32-n,Qde=(t,e,n)=>e<<n|t>>>32-n,Jde=(t,e,n)=>e<<n-32|t>>>64-n,Zde=(t,e,n)=>t<<n-32|e>>>64-n,Lm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function G5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function E_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function $c(t,...e){if(!G5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Xde(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");E_(t.outputLen),E_(t.blockLen)}function T0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function eK(t,e){$c(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ehe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function R0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function bP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function qc(t,e){return t<<32-e|t>>>e}const the=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function nhe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function rhe(t){for(let e=0;e<t.length;e++)t[e]=nhe(t[e]);return t}const C8=the?t=>t:rhe,tK=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",she=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function __(t){if($c(t),tK)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=she[t[n]];return e}const Xl={_0:48,_9:57,A:65,F:70,a:97,f:102};function A8(t){if(t>=Xl._0&&t<=Xl._9)return t-Xl._0;if(t>=Xl.A&&t<=Xl.F)return t-(Xl.A-10);if(t>=Xl.a&&t<=Xl.f)return t-(Xl.a-10)}function V5(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(tK)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=A8(t.charCodeAt(i)),a=A8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function ihe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function c1(t){return typeof t=="string"&&(t=ihe(t)),$c(t),t}function Sp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];$c(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let K5=class{};function nK(t){const e=r=>t().update(c1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ohe(t){const e=(r,s)=>t(s).update(c1(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function ahe(t=32){if(Lm&&typeof Lm.getRandomValues=="function")return Lm.getRandomValues(new Uint8Array(t));if(Lm&&typeof Lm.randomBytes=="function")return Uint8Array.from(Lm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const che=BigInt(0),dv=BigInt(1),lhe=BigInt(2),uhe=BigInt(7),dhe=BigInt(256),hhe=BigInt(113),rK=[],sK=[],iK=[];for(let t=0,e=dv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],rK.push(2*(5*r+n)),sK.push((t+1)*(t+2)/2%64);let s=che;for(let i=0;i<7;i++)e=(e<<dv^(e>>uhe)*hhe)%dhe,e&lhe&&(s^=dv<<(dv<<BigInt(i))-dv);iK.push(s)}const oK=Kde(iK,!0),fhe=oK[0],phe=oK[1],S8=(t,e,n)=>n>32?Jde(t,e,n):Yde(t,e,n),x8=(t,e,n)=>n>32?Zde(t,e,n):Qde(t,e,n);function aK(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=S8(l,u,1)^n[a],h=x8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=sK[o],c=S8(s,i,a),l=x8(s,i,a),u=rK[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=fhe[r],t[1]^=phe[r]}R0(n)}let Y5=class cK extends K5{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,E_(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ehe(this.state)}clone(){return this._cloneInto()}keccak(){C8(this.state32),aK(this.state32,this.rounds),C8(this.state32),this.posOut=0,this.pos=0}update(e){T0(this),e=c1(e),$c(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){T0(this,!1),$c(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return E_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,R0(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new cK(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Pf=(t,e,n)=>nK(()=>new Y5(e,t,n)),ghe=Pf(6,144,224/8),mhe=Pf(6,136,256/8),yhe=Pf(6,104,384/8),whe=Pf(6,72,512/8),bhe=Pf(1,144,224/8),Q5=Pf(1,136,256/8),vhe=Pf(1,104,384/8),Ehe=Pf(1,72,512/8),lK=(t,e,n)=>ohe((r={})=>new Y5(e,t,r.dkLen===void 0?n:r.dkLen,!0)),_he=lK(31,168,128/8),Che=lK(31,136,256/8),ZYe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Y5,keccakP:aK,keccak_224:bhe,keccak_256:Q5,keccak_384:vhe,keccak_512:Ehe,sha3_224:ghe,sha3_256:mhe,sha3_384:yhe,sha3_512:whe,shake128:_he,shake256:Che},Symbol.toStringTag,{value:"Module"}));function ks(t,e){const n=e||"hex",r=Q5(Ul(t,{strict:!1})?yb(t):t);return n==="bytes"?r:ka(r)}const vP=new GN(8192);function l1(t,e){if(vP.has(`${t}.${e}`))return vP.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=ks(pg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return vP.set(`${t}.${e}`,i),i}function Wu(t,e){if(!Da(t,{strict:!1}))throw new yf({address:t});return l1(t,e)}const Ahe=/^0x[a-fA-F0-9]{40}$/,EP=new GN(8192);function Da(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(EP.has(r))return EP.get(r);const s=Ahe.test(t)?t.toLowerCase()===t?!0:n?l1(t)===t:!0:!1;return EP.set(r,s),s}function P0(t,e,n,{strict:r}={}){return Ul(t,{strict:!1})?lI(t,e,n,{strict:r}):hK(t,e,n,{strict:r})}function uK(t,e){if(typeof e=="number"&&e>0&&e>Ar(t)-1)throw new qV({offset:e,position:"start",size:Ar(t)})}function dK(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ar(t)!==n-e)throw new qV({offset:n,position:"end",size:Ar(t)})}function hK(t,e,n,{strict:r}={}){uK(t,e);const s=t.slice(e,n);return r&&dK(s,e,n),s}function lI(t,e,n,{strict:r}={}){uK(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&dK(s,e,n),s}const She=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,fK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function kf(t,e){if(t.length!==e.length)throw new Mde({expectedLength:t.length,givenLength:e.length});const n=xhe({params:t,values:e}),r=Z5(n);return r.length===0?"0x":r}function xhe({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(J5({param:t[r],value:e[r]}));return n}function J5({param:t,value:e}){const n=X5(t.type);if(n){const[r,s]=n;return Nhe(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return Ohe(e,{param:t});if(t.type==="address")return Ihe(e);if(t.type==="bool")return Rhe(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=fK.exec(t.type)??[];return Phe(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return The(e,{param:t});if(t.type==="string")return khe(e);throw new Wde(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Z5(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ar(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ze(e+s,{size:32})),r.push(a),s+=Ar(a)):n.push(a)}return Oa([...n,...r])}function Ihe(t){if(!Da(t))throw new yf({address:t});return{dynamic:!1,encoded:Xh(t.toLowerCase())}}function Nhe(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new XV(t);if(!r&&t.length!==e)throw new $de({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=J5({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=Z5(i);if(r){const a=Ze(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Oa([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Oa(i.map(({encoded:o})=>o))}}function The(t,{param:e}){const[,n]=e.type.split("bytes"),r=Ar(t);if(!n){let s=t;return r%32!==0&&(s=Xh(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Oa([Xh(Ze(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Lde({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Xh(t,{dir:"right"})}}function Rhe(t){if(typeof t!="boolean")throw new ge(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Xh(KV(t))}}function Phe(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new HV({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ze(t,{size:32,signed:e})}}function khe(t){const e=I0(t),n=Math.ceil(Ar(e)/32),r=[];for(let s=0;s<n;s++)r.push(Xh(P0(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Oa([Xh(Ze(Ar(e),{size:32})),...r])}}function Ohe(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=J5({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Z5(r):Oa(r.map(({encoded:s})=>s))}}function X5(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const _P="/docs/contract/encodeDeployData";function VN(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Dde({docsPath:_P});if(!("inputs"in s))throw new b8({docsPath:_P});if(!s.inputs||s.inputs.length===0)throw new b8({docsPath:_P});const i=kf(s.inputs,n);return wb([r,i])}function xr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class cm extends ge{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class FS extends ge{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function Dhe(t){const e=ks(`0x${t.substring(4)}`).substring(26);return l1(`0x${e}`)}const $he="modulepreload",Lhe=function(t){return"/"+t},I8={},Nr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Lhe(c),c in I8)return;I8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":$he,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function Mhe({hash:t,signature:e}){const n=Ul(t)?t:ka(t),{secp256k1:r}=await Nr(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>ewe);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=N8(f);return new r.Signature(Ko(l),Ko(u)).addRecoveryBit(p)}const o=Ul(e)?e:ka(e);if(Ar(o)!==65)throw new Error("invalid signature length");const a=Oc(`0x${o.slice(130)}`),c=N8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function N8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function pK({hash:t,signature:e}){return Dhe(await Mhe({hash:t,signature:e}))}class T8 extends ge{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class gK extends ge{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Uhe extends ge{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Bhe={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Uhe({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new gK({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new T8({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new T8({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function eM(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Bhe);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function jhe(t,e="hex"){const n=mK(t),r=eM(new Uint8Array(n.length));return n.encode(r),e==="hex"?Xr(r.bytes):r.bytes}function mK(t){return Array.isArray(t)?Fhe(t.map(e=>mK(e))):zhe(t)}function Fhe(t){const e=t.reduce((s,i)=>s+i.length,0),n=yK(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function zhe(t){const e=typeof t=="string"?Pa(t):t,n=yK(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function yK(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ge("Length is too large.")}function Whe(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=ks(wb(["0x05",jhe([e?Ze(e):"0x",s,n?Ze(n):"0x"])]));return r==="bytes"?Pa(i):i}async function wK(t){const{authorization:e,signature:n}=t;return pK({hash:Whe(e),signature:n??e})}class iD extends ge{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Hhe extends ge{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class qhe extends ge{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class bK extends ge{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function vK({chain:t,currentChainId:e}){if(!t)throw new qhe;if(e!==t.id)throw new Hhe({chain:t,currentChainId:e})}const Ghe={gwei:9,wei:18},Vhe={ether:-9,wei:9},Khe={ether:-18,gwei:-9};function lm(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function ho(t,e="wei"){return lm(t,Vhe[e])}class xp extends ge{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(xp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(xp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class uI extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ho(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(uI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class oD extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ho(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(oD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class aD extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(aD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class cD extends ge{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(cD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class lD extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(lD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class uD extends ge{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(uD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class dD extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(dD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class hD extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(hD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class fD extends ge{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(fD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class dI extends ge{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ho(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ho(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(dI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class u1 extends ge{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function tM(t,e="wei"){return lm(t,Ghe[e])}function d1(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class Yhe extends ge{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class Qhe extends ge{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",d1(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Jhe extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=d1({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${tM(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ho(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ho(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ho(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class EK extends ge{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class _K extends ge{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class Zhe extends ge{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Jr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),Xhe=t=>t,nM=t=>t;class _E extends ge{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${nM(o)}`,e&&`Request body: ${Jr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class rM extends ge{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${nM(r)}`,`Request body: ${Jr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class R8 extends ge{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${nM(n)}`,`Request body: ${Jr(e)}`],name:"TimeoutError"})}}const efe=-1;class wo extends ge{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof rM?e.code:n??efe}}class Zo extends wo{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class C_ extends wo{constructor(e){super(e,{code:C_.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(C_,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class A_ extends wo{constructor(e){super(e,{code:A_.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(A_,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class S_ extends wo{constructor(e,{method:n}={}){super(e,{code:S_.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(S_,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class x_ extends wo{constructor(e){super(e,{code:x_.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(x_,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Pg extends wo{constructor(e){super(e,{code:Pg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Pg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class kg extends wo{constructor(e){super(e,{code:kg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(kg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class I_ extends wo{constructor(e){super(e,{code:I_.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(I_,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ef extends wo{constructor(e){super(e,{code:ef.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(ef,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class k0 extends wo{constructor(e){super(e,{code:k0.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(k0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ip extends wo{constructor(e,{method:n}={}){super(e,{code:Ip.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Ip,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class O0 extends wo{constructor(e){super(e,{code:O0.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(O0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class N_ extends wo{constructor(e){super(e,{code:N_.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(N_,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Wr extends Zo{constructor(e){super(e,{code:Wr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Wr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class T_ extends Zo{constructor(e){super(e,{code:T_.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(T_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class R_ extends Zo{constructor(e,{method:n}={}){super(e,{code:R_.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(R_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class P_ extends Zo{constructor(e){super(e,{code:P_.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(P_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class k_ extends Zo{constructor(e){super(e,{code:k_.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(k_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Bl extends Zo{constructor(e){super(e,{code:Bl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Bl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class D0 extends Zo{constructor(e){super(e,{code:D0.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(D0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class O_ extends Zo{constructor(e){super(e,{code:O_.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(O_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class D_ extends Zo{constructor(e){super(e,{code:D_.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(D_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class $_ extends Zo{constructor(e){super(e,{code:$_.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty($_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class L_ extends Zo{constructor(e){super(e,{code:L_.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(L_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class M_ extends Zo{constructor(e){super(e,{code:M_.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(M_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class $0 extends Zo{constructor(e){super(e,{code:$0.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty($0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class tfe extends wo{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function KN(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ge?t.walk(s=>(s==null?void 0:s.code)===xp.code):t;return r instanceof ge?new xp({cause:t,message:r.details}):xp.nodeMessage.test(n)?new xp({cause:t,message:t.details}):uI.nodeMessage.test(n)?new uI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):oD.nodeMessage.test(n)?new oD({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):aD.nodeMessage.test(n)?new aD({cause:t,nonce:e==null?void 0:e.nonce}):cD.nodeMessage.test(n)?new cD({cause:t,nonce:e==null?void 0:e.nonce}):lD.nodeMessage.test(n)?new lD({cause:t,nonce:e==null?void 0:e.nonce}):uD.nodeMessage.test(n)?new uD({cause:t}):dD.nodeMessage.test(n)?new dD({cause:t,gas:e==null?void 0:e.gas}):hD.nodeMessage.test(n)?new hD({cause:t,gas:e==null?void 0:e.gas}):fD.nodeMessage.test(n)?new fD({cause:t}):dI.nodeMessage.test(n)?new dI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new u1({cause:t})}function CK(t,{docsPath:e,...n}){const r=(()=>{const s=KN(t,n);return s instanceof u1?t:s})();return new Jhe(r,{docsPath:e,...n})}function YN(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const nfe={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function bb(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=rfe(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Xr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ze(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ze(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ze(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ze(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ze(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ze(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=nfe[t.type]),typeof t.value<"u"&&(e.value=Ze(t.value)),e}function rfe(t){return t.map(e=>({address:e.address,r:e.r?Ze(BigInt(e.r)):e.r,s:e.s?Ze(BigInt(e.s)):e.s,chainId:Ze(e.chainId),nonce:Ze(e.nonce),...typeof e.yParity<"u"?{yParity:Ze(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ze(e.v)}:{}}))}function at(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const sfe=2n**256n-1n;function um(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?xr(e):void 0;if(o&&!Da(o.address))throw new yf({address:o.address});if(i&&!Da(i))throw new yf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Yhe;if(r&&r>sfe)throw new uI({maxFeePerGas:r});if(s&&r&&s>r)throw new dI({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function vb(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Oc(e)}class ife extends ge{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class sM extends ge{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class ofe extends ge{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ho(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class AK extends ge{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const SK={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function xK(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Oc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Oc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?SK[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=afe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function afe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function IK(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:xK(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Il(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?Ze(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new AK({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||IK)(c)}async function iM(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function cfe(t,e){return NK(t,e)}async function NK(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await at(t,Il,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Ko(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):at(t,Il,"getBlock")({}),at(t,iM,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new sM;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function lfe(t,e){return pD(t,e)}async function pD(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new ife;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await at(t,Il,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new sM;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await NK(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await at(t,iM,"getGasPrice")({}))}}class ufe extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=d1({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${tM(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ho(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ho(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ho(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function dfe(t,{docsPath:e,...n}){const r=(()=>{const s=KN(t,n);return s instanceof u1?t:s})();return new ufe(r,{docsPath:e,...n})}class hfe extends ge{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class ffe extends ge{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function P8(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function pfe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=P8(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=P8(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function k8(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new y8({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new y8({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function gfe(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ze(e)),n!==void 0&&(o.nonce=Ze(n)),r!==void 0&&(o.state=k8(r)),s!==void 0){if(o.state)throw new ffe;o.stateDiff=k8(s)}return o}function oM(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Da(n,{strict:!1}))throw new yf({address:n});if(e[n])throw new hfe({address:n});e[n]=gfe(r)}return e}async function aM(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?Ze(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function QN(t,e){var s,i,o;const{account:n=t.account}=e,r=n?xr(n):void 0;try{let j=function(N){const{block:M,request:k,rpcStateOverride:D}=N;return t.request({method:"eth_estimateGas",params:D?[k,M??"latest",D]:M?[k,M]:[k]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,value:C,stateOverride:A,...S}=await h1(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),R=(typeof d=="bigint"?Ze(d):void 0)||h,I=oM(A),O=await(async()=>{if(S.to)return S.to;if(c&&c.length>0)return await wK({authorization:c[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`")})})();um(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,H=(P||bb)({...YN(S,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:O,value:C});let T=BigInt(await j({block:R,request:H,rpcStateOverride:I}));if(c){const N=await aM(t,{address:H.from}),M=await Promise.all(c.map(async k=>{const{address:D}=k,U=await j({block:R,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:D,value:Ze(N)},rpcStateOverride:I}).catch(()=>100000n);return 2n*BigInt(U)}));T+=M.reduce((k,D)=>k+D,0n)}return T}catch(a){throw dfe(a,{...e,account:r,chain:t.chain})}}async function cM(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ze(r):n]},{dedupe:!!r});return Oc(s)}function TK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Pa(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Xr(i))}function RK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Pa(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Pa(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Xr(o))}function mfe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function yfe(t,e,n){return t&e^~t&n}function wfe(t,e,n){return t&e^t&n^e&n}class bfe extends K5{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=bP(this.buffer)}update(e){T0(this),e=c1(e),$c(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=bP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){T0(this),eK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,R0(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;mfe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=bP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const _d=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vfe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cd=new Uint32Array(64);let Efe=class extends bfe{constructor(e=32){super(64,e,8,!1),this.A=_d[0]|0,this.B=_d[1]|0,this.C=_d[2]|0,this.D=_d[3]|0,this.E=_d[4]|0,this.F=_d[5]|0,this.G=_d[6]|0,this.H=_d[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Cd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Cd[d-15],f=Cd[d-2],p=qc(h,7)^qc(h,18)^h>>>3,g=qc(f,17)^qc(f,19)^f>>>10;Cd[d]=g+Cd[d-7]+p+Cd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=qc(a,6)^qc(a,11)^qc(a,25),f=u+h+yfe(a,c,l)+vfe[d]+Cd[d]|0,g=(qc(r,2)^qc(r,13)^qc(r,22))+wfe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){R0(Cd)}destroy(){this.set(0,0,0,0,0,0,0,0),R0(this.buffer)}};const PK=nK(()=>new Efe),_fe=PK;function Cfe(t,e){return _fe(Ul(t,{strict:!1})?yb(t):t)}function Afe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Cfe(e);return s.set([n],0),r==="bytes"?s:Xr(s)}function Sfe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Afe({commitment:i,to:r,version:n}));return s}const O8=6,kK=32,lM=4096,OK=kK*lM,D8=OK*O8-1-1*lM*O8;class xfe extends ge{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Ife extends ge{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Nfe(t){const e=typeof t.data=="string"?Pa(t.data):t.data,n=Ar(e);if(!n)throw new Ife;if(n>D8)throw new xfe({maxSize:D8,size:n});const r=[];let s=!0,i=0;for(;s;){const o=eM(new Uint8Array(OK));let a=0;for(;a<lM;){const c=e.slice(i,i+(kK-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Xr(o.bytes))}function Tfe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Nfe({data:e}),i=t.commitments??TK({blobs:s,kzg:n,to:r}),o=t.proofs??RK({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Rfe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new Qhe({transaction:t})}const DK=["blobVersionedHashes","chainId","fees","gas","nonce","type"],$8=new Map;async function h1(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=DK,type:u}=e,d=n&&xr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await at(t,Il,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await at(t,vb,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const m=await y();h.nonce=await c.consume({address:d.address,chainId:m,client:t})}else h.nonce=await at(t,cM,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const m=TK({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=Sfe({commitments:m,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=RK({blobs:r,commitments:m,kzg:o}),v=Tfe({blobs:r,commitments:m,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Rfe(h)}catch{let m=$8.get(t.uid);if(typeof m>"u"){const b=await p();m=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",$8.set(t.uid,m)}h.type=m?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const m=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await pD(t,{block:m,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new ofe({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new sM;if(typeof e.gasPrice>"u"){const m=await p(),{gasPrice:b}=await pD(t,{block:m,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await at(t,QN,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),um(h),delete h.parameters,h}async function uM(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const CP=new GN(128);async function f1(t,e){var b,v,C,A;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new cm({docsPath:"/docs/actions/wallet/sendTransaction"});const m=n?xr(n):null;try{um(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await wK({authorization:i[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`.")})})();if((m==null?void 0:m.type)==="json-rpc"||m===null){let x;r!==null&&(x=await at(t,vb,"getChainId")({}),vK({currentChainId:x,chain:r}));const R=(C=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:C.format,O=(R||bb)({...YN(y,{format:R}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:m==null?void 0:m.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:S,type:p,value:g}),P=CP.get(t.uid),B=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:B,params:[O]},{retryCount:0})}catch(H){if(P===!1)throw H;const j=H;if(j.name==="InvalidInputRpcError"||j.name==="InvalidParamsRpcError"||j.name==="MethodNotFoundRpcError"||j.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(T=>(CP.set(t.uid,!0),T)).catch(T=>{const N=T;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(CP.set(t.uid,!1),j):N});throw j}}if((m==null?void 0:m.type)==="local"){const x=await at(t,h1,"prepareTransactionRequest")({account:m,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:m.nonceManager,parameters:[...DK,"sidecars"],type:p,value:g,...y,to:S}),R=(A=r==null?void 0:r.serializers)==null?void 0:A.transaction,I=await m.signTransaction(x,{serializer:R});return await at(t,uM,"sendRawTransaction")({serializedTransaction:I})}throw(m==null?void 0:m.type)==="smart"?new FS({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new FS({docsPath:"/docs/actions/wallet/sendTransaction",type:m==null?void 0:m.type})}catch(S){throw S instanceof FS?S:CK(S,{...e,account:m,chain:e.chain||void 0})}}function Pfe(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=VN({abi:n,args:r,bytecode:s});return f1(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const gD=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],mD=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],$K=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],LK=[...$K,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],kfe=[...$K,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],L8=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],M8=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],U8=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function Ofe(t,e={}){typeof e.size<"u"&&La(t,{size:e.size});const n=Xr(t,e);return Ko(n,e)}function Dfe(t,e={}){let n=t;if(typeof e.size<"u"&&(La(n,{size:e.size}),n=Pl(n)),n.length>1||n[0]>1)throw new _de(n);return!!n[0]}function Ku(t,e={}){typeof e.size<"u"&&La(t,{size:e.size});const n=Xr(t,e);return Oc(n,e)}function $fe(t,e={}){let n=t;return typeof e.size<"u"&&(La(n,{size:e.size}),n=Pl(n,{dir:"right"})),new TextDecoder().decode(n)}function p1(t,e){const n=typeof e=="string"?Pa(e):e,r=eM(n);if(Ar(n)===0&&t.length>0)throw new a1;if(Ar(e)&&Ar(e)<32)throw new YV({data:typeof e=="string"?e:Xr(e),params:t,size:Ar(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=ow(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function ow(t,e,{staticPosition:n}){const r=X5(e.type);if(r){const[s,i]=r;return Mfe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Ffe(t,e,{staticPosition:n});if(e.type==="address")return Lfe(t);if(e.type==="bool")return Ufe(t);if(e.type.startsWith("bytes"))return Bfe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return jfe(t,e);if(e.type==="string")return zfe(t,{staticPosition:n});throw new Hde(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const B8=32,yD=32;function Lfe(t){const e=t.readBytes(32);return[l1(Xr(hK(e,-20))),32]}function Mfe(t,e,{length:n,staticPosition:r}){if(!n){const o=Ku(t.readBytes(yD)),a=r+o,c=a+B8;t.setPosition(a);const l=Ku(t.readBytes(B8)),u=U_(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=ow(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(U_(e)){const o=Ku(t.readBytes(yD)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=ow(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=ow(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Ufe(t){return[Dfe(t.readBytes(32),{size:32}),32]}function Bfe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Ku(t.readBytes(32));t.setPosition(n+o);const a=Ku(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Xr(c),32]}return[Xr(t.readBytes(Number.parseInt(s),32)),32]}function jfe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Ofe(s,{signed:n}):Ku(s,{signed:n}),32]}function Ffe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(U_(e)){const o=Ku(t.readBytes(yD)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=ow(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=ow(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function zfe(t,{staticPosition:e}){const n=Ku(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Ku(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=$fe(Pl(i));return t.setPosition(e+32),[o,32]}function U_(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(U_);const n=X5(t.type);return!!(n&&U_({...t,type:n[1]}))}const Wfe=t=>ks(yb(t));function Hfe(t){return Wfe(t)}const qfe="1.0.8";let Xo=class wD extends Error{constructor(e,n={}){var o;const r=n.cause instanceof wD?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof wD&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${qfe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function yd(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const MK=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,UK=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,BK=/^\(.+?\).*?$/,j8=/^tuple(?<array>(\[(\d*)\])*)$/;function bD(t){let e=t.type;if(j8.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=bD(i),s<n-1&&(e+=", ")}const r=yd(j8,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,bD({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function hv(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=bD(s),r!==n-1&&(e+=", ")}return e}function hI(t){var e;return t.type==="function"?`function ${t.name}(${hv(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${hv(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${hv(t.inputs)})`:t.type==="error"?`error ${t.name}(${hv(t.inputs)})`:t.type==="constructor"?`constructor(${hv(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const jK=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Gfe(t){return jK.test(t)}function Vfe(t){return yd(jK,t)}const FK=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Kfe(t){return FK.test(t)}function Yfe(t){return yd(FK,t)}const zK=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Qfe(t){return zK.test(t)}function Jfe(t){return yd(zK,t)}const WK=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function dM(t){return WK.test(t)}function Zfe(t){return yd(WK,t)}const HK=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Xfe(t){return HK.test(t)}function epe(t){return yd(HK,t)}const qK=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function tpe(t){return qK.test(t)}function npe(t){return yd(qK,t)}const rpe=/^receive\(\) external payable$/;function spe(t){return rpe.test(t)}const ipe=new Set(["indexed"]),vD=new Set(["calldata","memory","storage"]);class ope extends Xo{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class ape extends Xo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class cpe extends Xo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class lpe extends Xo{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class upe extends Xo{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class dpe extends Xo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class hpe extends Xo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class fpe extends Xo{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Eb extends Xo{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class ppe extends Xo{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class gpe extends Xo{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class mpe extends Xo{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class ype extends Xo{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function wpe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const AP=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function ED(t,e={}){if(Qfe(t))return bpe(t,e);if(Kfe(t))return vpe(t,e);if(Gfe(t))return Epe(t,e);if(Xfe(t))return _pe(t,e);if(tpe(t))return Cpe(t);if(spe(t))return{type:"receive",stateMutability:"payable"};throw new ppe({signature:t})}function bpe(t,e={}){const n=Jfe(t);if(!n)throw new Eb({signature:t,type:"function"});const r=vc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Og(r[a],{modifiers:vD,structs:e,type:"function"}));const o=[];if(n.returns){const a=vc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Og(a[l],{modifiers:vD,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function vpe(t,e={}){const n=Yfe(t);if(!n)throw new Eb({signature:t,type:"event"});const r=vc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Og(r[o],{modifiers:ipe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Epe(t,e={}){const n=Vfe(t);if(!n)throw new Eb({signature:t,type:"error"});const r=vc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Og(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function _pe(t,e={}){const n=epe(t);if(!n)throw new Eb({signature:t,type:"constructor"});const r=vc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Og(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Cpe(t){const e=npe(t);if(!e)throw new Eb({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Ape=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Spe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,xpe=/^u?int$/;function Og(t,e){var d,h;const n=wpe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(AP.has(n))return AP.get(n);const r=BK.test(t),s=yd(r?Spe:Ape,t);if(!s)throw new lpe({param:t});if(s.name&&Npe(s.name))throw new upe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=vc(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(Og(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(xpe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!GK(c))throw new cpe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new dpe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(vD.has(s.modifier)&&!Tpe(c,!!s.array))throw new hpe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return AP.set(n,u),u}function vc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?vc(a,[...e,n.trim()]):vc(a,e,`${n}${o}`,r);case"(":return vc(a,e,`${n}${o}`,r+1);case")":return vc(a,e,`${n}${o}`,r-1);default:return vc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new ype({current:n,depth:r});return e.push(n.trim()),e}function GK(t){return t==="address"||t==="bool"||t==="function"||t==="string"||MK.test(t)||UK.test(t)}const Ipe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Npe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||MK.test(t)||UK.test(t)||Ipe.test(t)}function Tpe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function VK(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!dM(a))continue;const c=Zfe(a);if(!c)throw new Eb({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Og(p,{type:"struct"});u.push(g)}if(!u.length)throw new gpe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=KK(c,e)}return r}const Rpe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function KK(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(BK.test(o.type))r.push(o);else{const c=yd(Rpe,o.type);if(!(c!=null&&c.type))throw new fpe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new mpe({type:u});r.push({...o,type:`tuple${l??""}`,components:KK(e[u]??[],e,new Set([...n,u]))})}else if(GK(u))r.push(o);else throw new ape({type:u})}}return r}function YK(t){const e=VK(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];dM(i)||n.push(ED(i,e))}return n}function F8(t){let e;if(typeof t=="string")e=ED(t);else{const n=VK(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!dM(i)){e=ED(i,n);break}}}if(!e)throw new ope({signature:t});return e}function Ppe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ge("Unable to normalize signature.");return s}const kpe=t=>{const e=typeof t=="string"?t:hI(t);return Ppe(e)};function QK(t){return Hfe(kpe(t))}const JN=QK,g1=t=>P0(QK(t),0,4);function dm(t){const{abi:e,args:n=[],name:r}=t,s=Ul(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?g1(a)===r:a.type==="event"?JN(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?_D(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=JK(a.inputs,o.inputs,n);if(l)throw new Fde({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function _D(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Da(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>_D(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>_D(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function JK(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return JK(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Da(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Da(n[r],{strict:!1}):!1)return o}}const SP="/docs/contract/decodeFunctionResult";function hm(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=dm({abi:e,args:n,name:r});if(!a)throw new N0(r,{docsPath:SP});i=a}if(i.type!=="function")throw new N0(void 0,{docsPath:SP});if(!i.outputs)throw new ZV(i.name,{docsPath:SP});const o=p1(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const z8="/docs/contract/encodeFunctionData";function Ope(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=dm({abi:e,args:n,name:r});if(!i)throw new N0(r,{docsPath:z8});s=i}if(s.type!=="function")throw new N0(void 0,{docsPath:z8});return{abi:[s],functionName:g1(Dc(s))}}function Ma(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Ope(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?kf(s.inputs,e??[]):void 0;return wb([i,o??"0x"])}function _b({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new iD({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new iD({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const ZK={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},XK={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Dpe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function $pe(t){const{abi:e,data:n}=t,r=P0(n,0,4);if(r==="0x")throw new a1;const i=[...e||[],XK,Dpe].find(o=>o.type==="error"&&r===g1(Dc(o)));if(!i)throw new QV(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?p1(i.inputs,P0(n,4)):void 0,errorName:i.name}}function eY({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Jr(e[i]):e[i]}`).join(", ")})`}class tY extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?xr(n):void 0;let g=d1({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${tM(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ho(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ho(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ho(l)} gwei`,nonce:u});f&&(g+=`
${pfe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class nY extends ge{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=dm({abi:n,args:r,name:o}),l=c?eY({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Dc(c,{includeName:!0}):void 0,d=d1({address:s&&Xhe(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class CD extends ge{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=$pe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=ZK[f]}else{const f=u?Dc(u,{includeName:!0}):void 0,p=u&&h?eY({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof QV&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Lpe extends ge{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Mpe extends ge{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class ZN extends ge{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function hM(t,e){var r,s,i,o,a,c;if(!(t instanceof ge))return!1;const n=t.walk(l=>l instanceof CD);return n instanceof CD?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===ZK[50]):!1}function Upe(t){const{abi:e,data:n}=t,r=P0(n,0,4),s=e.find(i=>i.type==="function"&&r===g1(Dc(i)));if(!s)throw new jde(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?p1(s.inputs,P0(n,4)):void 0}}const xP="/docs/contract/encodeErrorResult";function W8(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=dm({abi:e,args:r,name:n});if(!c)throw new v8(n,{docsPath:xP});s=c}if(s.type!=="error")throw new v8(void 0,{docsPath:xP});const i=Dc(s),o=g1(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Ude(s.name,{docsPath:xP});a=kf(s.inputs,r)}return wb([o,a])}const IP="/docs/contract/encodeFunctionResult";function Bpe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=dm({abi:e,name:n});if(!o)throw new N0(n,{docsPath:IP});s=o}if(s.type!=="function")throw new N0(void 0,{docsPath:IP});if(!s.outputs)throw new ZV(s.name,{docsPath:IP});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new XV(r)})();return kf(s.outputs,i)}const fM="x-batch-gateway:true";async function jpe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Upe({abi:mD,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(fM)?await jpe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=Fpe(c)}})),Bpe({abi:mD,functionName:"query",result:[s,i]})}function Fpe(t){return t.name==="HttpRequestError"&&t.status?W8({abi:mD,errorName:"HttpError",args:[t.status,t.shortMessage]}):W8({abi:[XK],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function rY(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ul(e)?e:null}function zS(t){let e=new Uint8Array(32).fill(0);if(!t)return Xr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=rY(n[r]),i=s?yb(s):ks(pg(n[r]),"bytes");e=ks(Oa([e,i]),"bytes")}return Xr(e)}function zpe(t){return`[${t.slice(2)}]`}function Wpe(t){const e=new Uint8Array(32).fill(0);return t?rY(t)||ks(pg(t)):Xr(e)}function XN(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(pg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=pg(s[i]);o.byteLength>255&&(o=pg(zpe(Wpe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Hpe=3;function Dg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof ZN?t:t instanceof ge?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof a1?new Lpe({functionName:i}):[Hpe,Pg.code].includes(c)&&(l||u||d||h)?new CD({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof rM?u:h??d}):t;return new nY(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pM=BigInt(0),AD=BigInt(1);function fI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function AA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function sY(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?pM:BigInt("0x"+t)}function eT(t){return sY(__(t))}function iY(t){return $c(t),sY(__(Uint8Array.from(t).reverse()))}function gM(t,e){return V5(t.toString(16).padStart(e*2,"0"))}function oY(t,e){return gM(t,e).reverse()}function pa(t,e,n){let r;if(typeof e=="string")try{r=V5(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(G5(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const NP=t=>typeof t=="bigint"&&pM<=t;function qpe(t,e,n){return NP(t)&&NP(e)&&NP(n)&&e<=t&&t<n}function Gpe(t,e,n,r){if(!qpe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Vpe(t){let e;for(e=0;t>pM;t>>=AD,e+=1);return e}const tT=t=>(AD<<BigInt(t))-AD;function Kpe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return Sp(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function mM(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function H8(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Ype="0.1.1";function Qpe(){return Ype}let Dr=class SD extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof SD){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof SD&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Qpe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return aY(this,e)}};function aY(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?aY(t.cause,e):e?null:t}const Jpe="#__bigint";function Zpe(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Jpe:s,n)}function Xpe(t,e){if(G8(t)>e)throw new lge({givenSize:G8(t),maxSize:e})}const eu={zero:48,nine:57,A:65,F:70,a:97,f:102};function q8(t){if(t>=eu.zero&&t<=eu.nine)return t-eu.zero;if(t>=eu.A&&t<=eu.F)return t-(eu.A-10);if(t>=eu.a&&t<=eu.f)return t-(eu.a-10)}function ege(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new uge({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function yM(t,e){if($a(t)>e)throw new gge({givenSize:$a(t),maxSize:e})}function tge(t,e){if(typeof e=="number"&&e>0&&e>$a(t)-1)throw new hY({offset:e,position:"start",size:$a(t)})}function nge(t,e,n){if(typeof e=="number"&&typeof n=="number"&&$a(t)!==n-e)throw new hY({offset:n,position:"end",size:$a(t)})}function cY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new mge({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const rge=new TextEncoder;function sge(t){return t instanceof Uint8Array?t:typeof t=="string"?oge(t):ige(t)}function ige(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function oge(t,e={}){const{size:n}=e;let r=t;n&&(yM(t,n),r=Lg(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=q8(s.charCodeAt(c++)),u=q8(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Dr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function age(t,e={}){const{size:n}=e,r=rge.encode(t);return typeof n=="number"?(Xpe(r,n),cge(r,n)):r}function cge(t,e){return ege(t,{dir:"right",size:e})}function G8(t){return t.length}let lge=class extends Dr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},uge=class extends Dr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const dge=new TextEncoder,hge=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function fge(t,e={}){const{strict:n=!1}=e;if(!t)throw new V8(t);if(typeof t!="string")throw new V8(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new K8(t);if(!t.startsWith("0x"))throw new K8(t)}function jl(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function lY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(yM(n,e.size),$g(n,e.size)):n}function uY(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=hge[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(yM(r,e.size),Lg(r,e.size)):r}function mi(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new dY({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?$g(c,r):c}function wM(t,e={}){return uY(dge.encode(t),e)}function $g(t,e){return cY(t,{dir:"left",size:e})}function Lg(t,e){return cY(t,{dir:"right",size:e})}function bM(t,e,n,r={}){const{strict:s}=r;tge(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&nge(i,e,n),i}function $a(t){return Math.ceil((t.length-2)/2)}function pge(t,e={}){const{strict:n=!1}=e;try{return fge(t,{strict:n}),!0}catch{return!1}}let dY=class extends Dr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class V8 extends Dr{constructor(e){super(`Value \`${typeof e=="object"?Zpe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class K8 extends Dr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let gge=class extends Dr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class hY extends Dr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let mge=class extends Dr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function yge(t){return{address:t.address,amount:mi(t.amount),index:mi(t.index),validatorIndex:mi(t.validatorIndex)}}function fY(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:mi(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:mi(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:mi(t.gasLimit)},...typeof t.number=="bigint"&&{number:mi(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:mi(t.prevRandao)},...typeof t.time=="bigint"&&{time:mi(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(yge)}}}const wge="0x82ad56cb",pY="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",bge="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",vge="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function gY(t,{docsPath:e,...n}){const r=(()=>{const s=KN(t,n);return s instanceof u1?t:s})();return new tY(r,{docsPath:e,...n})}function vM(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const TP=new Map;function mY({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>TP.delete(e),a=()=>c().map(({args:u})=>u),c=()=>TP.get(e)||[],l=u=>TP.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=vM();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function m1(t,e){var H,j,T,N;const{account:n=t.account,authorizationList:r,batch:s=!!((H=t.batch)!=null&&H.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:C,value:A,stateOverride:S,...x}=e,R=n?xr(n):void 0;if(u&&(h||f))throw new ge("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&C)throw new ge("Cannot provide both `code` & `to` as parameters.");const I=u&&d,O=h&&f&&C&&d,P=I||O,B=I?Cge({code:u,data:d}):O?Age({data:d,factory:h,factoryData:f,to:C}):d;try{um(e);const k=(typeof i=="bigint"?Ze(i):void 0)||o,D=l?fY(l):void 0,U=oM(S),q=(N=(T=(j=t.chain)==null?void 0:j.formatters)==null?void 0:T.transactionRequest)==null?void 0:N.format,ae=(q||bb)({...YN(x,{format:q}),from:R==null?void 0:R.address,accessList:a,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:P?void 0:C,value:A});if(s&&Ege({request:ae})&&!U&&!D)try{return await _ge(t,{...ae,blockNumber:i,blockTag:o})}catch(Ee){if(!(Ee instanceof bK)&&!(Ee instanceof iD))throw Ee}const oe=(()=>{const Ee=[ae,k];return U&&D?[...Ee,U,D]:U?[...Ee,U]:D?[...Ee,{},D]:Ee})(),le=await t.request({method:"eth_call",params:oe});return le==="0x"?{data:void 0}:{data:le}}catch(M){const k=Sge(M),{offchainLookup:D,offchainLookupSignature:U}=await Nr(async()=>{const{offchainLookup:q,offchainLookupSignature:X}=await import("./ccip-BuYPduX8.js");return{offchainLookup:q,offchainLookupSignature:X}},[]);if(t.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===U&&C)return{data:await D(t,{data:k,to:C})};throw P&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new Mpe({factory:h}):gY(M,{...e,account:R,chain:t.chain})}}function Ege({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(wge)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function _ge(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new bK;l=_b({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Ze(s):void 0)||i,{schedule:h}=mY({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async y=>{const m=y.map(C=>({allowFailure:!0,callData:C.data,target:C.to})),b=Ma({abi:gD,args:[m],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return hm({abi:gD,args:[m],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new ZN({data:f});return f==="0x"?{data:void 0}:{data:f}}function Cge(t){const{code:e,data:n}=t;return VN({abi:YK(["constructor(bytes, bytes)"]),bytecode:pY,args:[e,n]})}function Age(t){const{data:e,factory:n,factoryData:r,to:s}=t;return VN({abi:YK(["constructor(address, bytes, address, bytes)"]),bytecode:bge,args:[s,e,n,r]})}function Sge(t){var n;if(!(t instanceof ge))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Fl(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Ma({abi:n,args:s,functionName:i});try{const{data:c}=await at(t,m1,"call")({...o,data:a,to:r});return hm({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Dg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function xge(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return _b({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Ma({abi:M8,functionName:"addr",...s!=null?{args:[zS(i),BigInt(s)]}:{args:[zS(i)]}}),h={address:l,abi:LK,functionName:"resolve",args:[ka(XN(i)),d,o??[fM]],blockNumber:n,blockTag:r},p=await at(t,Fl,"readContract")(h);if(p[0]==="0x")return null;const g=hm({abi:M8,args:s!=null?[zS(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Pl(g)==="0x00"?null:g}catch(d){if(a)throw d;if(hM(d,"resolve"))return null;throw d}}class Ige extends ge{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class fv extends ge{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class EM extends ge{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Nge extends ge{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Tge=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Rge=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Pge=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,kge=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Oge(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function Y8(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function yY({uri:t,gatewayUrls:e}){const n=Pge.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=Y8(e==null?void 0:e.ipfs,"https://ipfs.io"),s=Y8(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Tge),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||Rge.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(kge,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new EM({uri:t})}function wY(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Ige({data:t});return t.image||t.image_url||t.image_data}async function Dge({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await _M({gatewayUrls:t,uri:wY(n)})}catch{throw new EM({uri:e})}}async function _M({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=yY({uri:e,gatewayUrls:t});if(r||await Oge(n))return n;throw new EM({uri:e})}function $ge(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new fv({reason:"Only EIP-155 supported"});if(!o)throw new fv({reason:"Chain ID not found"});if(!c)throw new fv({reason:"Contract address not found"});if(!s)throw new fv({reason:"Token ID not found"});if(!a)throw new fv({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Lge(t,{nft:e}){if(e.namespace==="erc721")return Fl(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Fl(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Nge({namespace:e.namespace})}async function Mge(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Uge(t,{gatewayUrls:e,record:n}):_M({uri:n,gatewayUrls:e})}async function Uge(t,{gatewayUrls:e,record:n}){const r=$ge(n),s=await Lge(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=yY({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return _M({uri:wY(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Dge({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function bY(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return _b({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:LK,functionName:"resolve",args:[ka(XN(i)),Ma({abi:L8,functionName:"text",args:[zS(i),s]}),o??[fM]],blockNumber:n,blockTag:r},f=await at(t,Fl,"readContract")(d);if(f[0]==="0x")return null;const p=hm({abi:L8,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(hM(d,"resolve"))return null;throw d}}async function Bge(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await at(t,bY,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await Mge(t,{record:c,gatewayUrls:r})}catch{return null}}async function vY(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=_b({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:kfe,functionName:"reverse",args:[ka(XN(c))],blockNumber:n,blockTag:r},u=at(t,Fl,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(hM(l,"reverse"))return null;throw l}}async function jge(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return _b({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await at(t,Fl,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[ka(XN(s))],blockNumber:n,blockTag:r});return c}async function EY(t,e){var y,m,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?xr(n):void 0;try{um(e);const C=(typeof r=="bigint"?Ze(r):void 0)||s,A=(b=(m=(y=t.chain)==null?void 0:y.formatters)==null?void 0:m.transactionRequest)==null?void 0:b.format,x=(A||bb)({...YN(p,{format:A}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),R=await t.request({method:"eth_createAccessList",params:[x,C]});return{accessList:R.accessList,gasUsed:BigInt(R.gasUsed)}}catch(v){throw gY(v,{...e,account:g,chain:t.chain})}}function nT(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function Fge(t){const e=nT(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class zge extends ge{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const Q8="/docs/contract/encodeEventTopics";function y1(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=dm({abi:e,name:n});if(!l)throw new E8(n,{docsPath:Q8});s=l}if(s.type!=="event")throw new E8(void 0,{docsPath:Q8});const i=Dc(s),o=JN(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>J8({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?J8({param:d,value:u[h]}):null))??[])}return[o,...a]}function J8({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return ks(yb(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new zge(t.type);return kf([t],[e])}async function _Y(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=nT(t,{method:"eth_newFilter"}),u=i?y1({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?Ze(o):o,toBlock:typeof c=="bigint"?Ze(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function CY(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=nT(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>y1({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?Ze(i):i,toBlock:typeof a=="bigint"?Ze(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function AY(t){const e=nT(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Wge(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Ma({abi:n,args:s,functionName:i});try{return await at(t,QN,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?xr(a.account):void 0;throw Dg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Hge(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const qge=new Map,Gge=new Map;function Vge(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,qge),r=e(t,Gge);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Kge(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Vge(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Yge=t=>`blockNumber.${t}`;async function w1(t,{cacheTime:e=t.cacheTime}={}){const n=await Kge(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Yge(t.uid),cacheTime:e});return BigInt(n)}async function Qge(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?Ze(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Oc(i)}async function Z8(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?Ze(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function rT(t,e){if(!Da(t,{strict:!1}))throw new yf({address:t});if(!Da(e,{strict:!1}))throw new yf({address:e});return t.toLowerCase()===e.toLowerCase()}const X8="/docs/contract/decodeEventLog";function CM(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Bde({docsPath:X8});const c=e.find(g=>g.type==="event"&&o===JN(Dc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new JV(o,{docsPath:X8});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,m]=f[g],b=a[g];if(!b)throw new qN({abiItem:c,param:y});h[d?m:y.name||m]=Jge({param:y,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=p1(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof YV||g instanceof gK?new v_({abiItem:c,data:n,params:p,size:Ar(n)}):g}else if(i)throw new v_({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Jge({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(p1([t],e)||[])[0]}function AM(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===JN(u));if(!c)return null;const l=CM({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!Zge({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof JV)return null;if(c instanceof v_||c instanceof qN){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function Zge(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?rT(o,a):i.type==="string"||i.type==="bytes"?ks(yb(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function cd(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function SM(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>y1({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?Ze(r):r,toBlock:typeof s=="bigint"?Ze(s):s}]});const f=h.map(p=>cd(p));return u?AM({abi:u,args:a,logs:f,strict:l}):f}async function SY(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?dm({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return at(t,SM,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class Xge extends ge{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function eme(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await at(t,Fl,"readContract")({abi:tme,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Xge({address:n}):o}}const tme=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function nme(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function rme(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?Ze(n):void 0,o=await t.request({method:"eth_feeHistory",params:[Ze(e),i||r,s]},{dedupe:!!i});return nme(o)}async function sT(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>cd(i));return!("abi"in e)||!e.abi?s:AM({abi:e.abi,logs:s,strict:n})}async function sme(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>cd(i));return e.abi?AM({abi:e.abi,logs:s,strict:n}):s}async function ime(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?Ze(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function iT(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?Ze(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ze(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ze(i)]},{dedupe:!!a}),!c)throw new EK({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||xK)(c)}async function ome(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([at(t,w1,"getBlockNumber")({}),e?at(t,iT,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const xY={"0x0":"reverted","0x1":"success"};function ame(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>cd(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Oc(t.transactionIndex):null,status:t.status?xY[t.status]:null,type:t.type?SK[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function xD(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new _K({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||ame)(n)}async function IY(t,e){var m;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((m=t.batch)==null?void 0:m.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=_b({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:C,args:A,functionName:S}=l[b];try{const x=Ma({abi:v,args:A,functionName:S});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:C}]}catch(x){const R=Dg(x,{abi:v,address:C,args:A,docsPath:"/docs/contract/multicall",functionName:S,sender:n});if(!r)throw R;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:C}]}}const g=await Promise.allSettled(h.map(b=>at(t,Fl,"readContract")({abi:gD,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let A=0;A<h[b].length;A++)y.push({status:"failure",error:v.reason,result:void 0});continue}const C=v.value;for(let A=0;A<C.length;A++){const{returnData:S,success:x}=C[A],{callData:R}=h[b][A],{abi:I,address:O,functionName:P,args:B}=l[y.length];try{if(R==="0x")throw new a1;if(!x)throw new ZN({data:S});const H=hm({abi:I,args:B,data:S,functionName:P});y.push(r?{result:H,status:"success"}:H)}catch(H){const j=Dg(H,{abi:I,address:O,args:B,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw j;y.push({error:j,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new ge("multicall results mismatch");return y}async function ID(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?fY(h.blockOverrides):void 0,p=h.calls.map(y=>{const m=y,b=m.account?xr(m.account):void 0,v=m.abi?Ma(m):m.data,C={...m,data:m.dataSuffix?Oa([v||"0x",m.dataSuffix]):v,from:m.from??(b==null?void 0:b.address)};return um(C),bb(C)}),g=h.stateOverrides?oM(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?Ze(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...IK(h),calls:h.calls.map((p,g)=>{var O,P;const{abi:y,args:m,functionName:b,to:v}=s[f].calls[g],C=((O=p.error)==null?void 0:O.data)??p.returnData,A=BigInt(p.gasUsed),S=(P=p.logs)==null?void 0:P.map(B=>cd(B)),x=p.status==="0x1"?"success":"failure",R=y&&x==="success"&&C!=="0x"?hm({abi:y,data:C,functionName:b}):null,I=(()=>{var H;if(x==="success")return;let B;if(((H=p.error)==null?void 0:H.data)==="0x"?B=new a1:p.error&&(B=new ZN(p.error)),!!B)return Dg(B,{abi:y??[],address:v??"0x",args:m,functionName:b??"<unknown>"})})();return{data:C,gasUsed:A,logs:S,status:x,...x==="success"?{result:R}:{error:I}}})}))}catch(c){const l=c,u=KN(l,{});throw u instanceof u1?l:u}}function NY(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=Q5(sge(t));return n==="Bytes"?r:uY(r)}let cme=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const lme={checksum:new cme(8192)},RP=lme.checksum,ume=/^0x[a-fA-F0-9]{40}$/;function oT(t,e={}){const{strict:n=!0}=e;if(!ume.test(t))throw new e4({address:t,cause:new hme});if(n){if(t.toLowerCase()===t)return;if(dme(t)!==t)throw new e4({address:t,cause:new fme})}}function dme(t){if(RP.has(t))return RP.get(t);oT(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=NY(age(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return RP.set(t,s),s}function ND(t,e={}){const{strict:n=!0}=e??{};try{return oT(t,{strict:n}),!0}catch{return!1}}class e4 extends Dr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class hme extends Dr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class fme extends Dr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function TD(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Dr("Unable to normalize signature.");return s}function RD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return ND(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>RD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>RD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function TY(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return TY(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?ND(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?ND(n[r],{strict:!1}):!1)return o}}function RY(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?F8(t):t;return{...r,...n?{hash:Fy(r)}:{}}}function pme(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=pge(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?PY(l)===bM(e,0,4):l.type==="event"?Fy(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new PD({name:e});if(o.length===1)return{...o[0],...s?{hash:Fy(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Fy(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?RD(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=TY(l.inputs,a.inputs,r);if(d)throw new mme({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new PD({name:e});return{...c,...s?{hash:Fy(c)}:{}}}function PY(t){return bM(Fy(t),0,4)}function gme(t){const e=typeof t=="string"?t:hI(t);return TD(e)}function Fy(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:NY(wM(gme(t)))}class mme extends Dr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${TD(hI(e.abiItem))}\`, and`,`\`${n.type}\` in \`${TD(hI(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class PD extends Dr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const yme=/^(.*)\[([0-9]*)\]$/,wme=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,kY=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function bme({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(xM({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function xM({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=Ime(r.type);if(s){const[i,o]=s;return Eme(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return xme(n,{checksumAddress:t,parameter:r});if(r.type==="address")return vme(n,{checksum:t});if(r.type==="bool")return Cme(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=kY.exec(r.type)??[];return Ame(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return _me(n,{type:r.type});if(r.type==="string")return Sme(n);throw new LY(r.type)}function IM(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=$a(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(mi(e+s,{size:32})),r.push(a),s+=$a(a)):n.push(a)}return jl(...n,...r)}function vme(t,e){const{checksum:n=!1}=e;return oT(t,{strict:n}),{dynamic:!1,encoded:$g(t.toLowerCase())}}function Eme(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Tme(t);if(!i&&t.length!==r)throw new Nme({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=xM({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=IM(a);if(i){const l=mi(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?jl(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:jl(...a.map(({encoded:c})=>c))}}function _me(t,{type:e}){const[,n]=e.split("bytes"),r=$a(t);if(!n){let s=t;return r%32!==0&&(s=Lg(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:jl($g(mi(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new DY({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Lg(t)}}function Cme(t){if(typeof t!="boolean")throw new Dr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:$g(lY(t))}}function Ame(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new dY({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:mi(t,{size:32,signed:e})}}function Sme(t){const e=wM(t),n=Math.ceil($a(e)/32),r=[];for(let s=0;s<n;s++)r.push(Lg(bM(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:jl(Lg(mi($a(e),{size:32})),...r)}}function xme(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=xM({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?IM(i):jl(...i.map(({encoded:o})=>o))}}function Ime(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function OY(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new $Y({expectedLength:t.length,givenLength:e.length});const s=bme({checksumAddress:r,parameters:t,values:e}),i=IM(s);return i.length===0?"0x":i}function kD(t,e){if(t.length!==e.length)throw new $Y({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(kD.encode(s,i))}return jl(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return oT(c),$g(c.toLowerCase(),s?32:0)}if(n==="string")return wM(r);if(n==="bytes")return r;if(n==="bool")return $g(lY(r),s?32:1);const i=n.match(kY);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return mi(r,{size:s?32:d,signed:l==="int"})}const o=n.match(wme);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new DY({expectedSize:Number.parseInt(l),value:r});return Lg(r,s?32:0)}const a=n.match(yme);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":jl(...u)}throw new LY(n)}t.encode=e})(kD||(kD={}));class Nme extends Dr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class DY extends Dr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${$a(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class $Y extends Dr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Tme extends Dr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class LY extends Dr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function Rme(t,e){var s;const{bytecode:n,args:r}=e;return jl(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?OY(t.inputs,r):"0x")}function Pme(t){return RY(t)}function kme(t,...e){const{overloads:n}=t,r=n?Ome([t,...n],t.name,{args:e[0]}):t,s=Dme(r),i=e.length>0?OY(r.inputs,e[0]):void 0;return i?jl(s,i):s}function Mm(t,e={}){return RY(t,e)}function Ome(t,e,n){const r=pme(t,e,n);if(r.type!=="function")throw new PD({name:e,type:"function"});return r}function Dme(t){return PY(t)}const $me="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Gc="0x0000000000000000000000000000000000000000",SA=new GN(8192);function Lme(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(SA.get(n))return SA.get(n);const r=t().finally(()=>SA.delete(n));return SA.set(n,r),r}async function pI(t){return new Promise(e=>setTimeout(e,t))}function gI(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await pI(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function Mme(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Ip(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Ip(new Error("method not supported"),{method:l});const u=s?I0(`${c}.${Jr(n)}`):void 0;return Lme(()=>gI(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case C_.code:throw new C_(f);case A_.code:throw new A_(f);case S_.code:throw new S_(f,{method:n.method});case x_.code:throw new x_(f);case Pg.code:throw new Pg(f);case kg.code:throw new kg(f);case I_.code:throw new I_(f);case ef.code:throw new ef(f);case k0.code:throw new k0(f);case Ip.code:throw new Ip(f,{method:n.method});case O0.code:throw new O0(f);case N_.code:throw new N_(f);case Wr.code:throw new Wr(f);case T_.code:throw new T_(f);case R_.code:throw new R_(f);case P_.code:throw new P_(f);case k_.code:throw new k_(f);case Bl.code:throw new Bl(f);case D0.code:throw new D0(f);case O_.code:throw new O_(f);case D_.code:throw new D_(f);case $_.code:throw new $_(f);case L_.code:throw new L_(f);case M_.code:throw new M_(f);case $0.code:throw new $0(f);case 5e3:throw new Wr(f);default:throw h instanceof ge?h:new tfe(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof _E){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Ume(h)}),{enabled:s,id:u})}}function Ume(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===O0.code||t.code===Pg.code:t instanceof _E&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Bme(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function MY(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function jme(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const t4=jme();function Fme(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await MY(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Jr(r.map(v=>({jsonrpc:"2.0",id:v.id??t4.take(),...v}))):Jr({jsonrpc:"2.0",id:r.id??t4.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),m=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(m.url??t,m)},{errorInstance:new R8({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new _E({body:r,details:Jr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof _E||h instanceof R8?h:new _E({body:r,cause:h,url:t})}}}}class zme extends ge{constructor({domain:e}){super(`Invalid domain "${Jr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Wme extends ge{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Hme extends ge{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function qme(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:WY({domain:e}),...t.types};zY({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(Gme({domain:e,types:s})),r!=="EIP712Domain"&&i.push(UY({data:n,primaryType:r,types:s})),ks(Oa(i))}function Gme({domain:t,types:e}){return UY({data:t,primaryType:"EIP712Domain",types:e})}function UY({data:t,primaryType:e,types:n}){const r=BY({data:t,primaryType:e,types:n});return ks(r)}function BY({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[Vme({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=FY({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return kf(r,s)}function Vme({primaryType:t,types:e}){const n=ka(Kme({primaryType:t,types:e}));return ks(n)}function Kme({primaryType:t,types:e}){let n="";const r=jY({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function jY({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])jY({primaryType:i.type,types:e},n);return n}function FY({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},ks(BY({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ks(r)];if(n==="string")return[{type:"bytes32"},ks(ka(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>FY({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},ks(kf(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function Yme(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Jr({domain:o,message:a,primaryType:r,types:s})}function zY(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(fK);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,m]=h;Ze(d,{signed:y==="int",size:Number.parseInt(m)/8})}if(u==="address"&&typeof d=="string"&&!Da(d))throw new yf({address:d});const f=u.match(She);if(f){const[g,y]=f;if(y&&Ar(d)!==Number.parseInt(y))throw new zde({expectedSize:Number.parseInt(y),givenSize:Ar(d)})}const p=s[u];p&&(Qme(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new zme({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Wme({primaryType:r,types:s})}function WY({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Qme(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Hme({type:t})}const Jme=`Ethereum Signed Message:
`;function Zme(t){const e=typeof t=="string"?I0(t):typeof t.raw=="string"?t.raw:Xr(t.raw),n=I0(`${Jme}${Ar(e)}`);return Oa([n,e])}function HY(t,e){return ks(Zme(t),e)}const qY="0x6492649264926492649264926492649264926492649264926492649264926492";function Xme(t){return lI(t,-32)===qY}function eye(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=wb([kf([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),qY]);return s==="hex"?i:Pa(i)}class tye extends ge{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function nye(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new tye({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const rye="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function sye(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?xr(e.account):void 0;if(o&&!l)throw new ge("`account` is required when `traceAssetChanges` is true");const u=l?Rme(Pme("constructor(bytes, bytes)"),{bytecode:pY,args:[rye,kme(Mm("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async k=>{if(!k.data&&!k.abi)return;const{accessList:D}=await EY(t,{account:l.address,...k,data:k.abi?Ma(k):k.data});return D.map(({address:U,storageKeys:q})=>q.length>0?U:null)})).then(k=>k.flat().filter(Boolean)):[],h=await ID(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((k,D)=>({abi:[Mm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:Gc,nonce:D})),stateOverrides:[{address:Gc,nonce:0}]}]:[],{calls:[...s,{}].map(k=>({...k,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((k,D)=>({abi:[Mm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:Gc,nonce:D})),stateOverrides:[{address:Gc,nonce:0}]},{calls:d.map((k,D)=>({to:k,abi:[Mm("function decimals() returns (uint256)")],functionName:"decimals",from:Gc,nonce:D})),stateOverrides:[{address:Gc,nonce:0}]},{calls:d.map((k,D)=>({to:k,abi:[Mm("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Gc,nonce:D})),stateOverrides:[{address:Gc,nonce:0}]},{calls:d.map((k,D)=>({to:k,abi:[Mm("function symbol() returns (string)")],functionName:"symbol",from:Gc,nonce:D})),stateOverrides:[{address:Gc,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,y,m,b,v,C]=o?h:[],{calls:A,...S}=f,x=A.slice(0,-1)??[],R=(p==null?void 0:p.calls)??[],I=(g==null?void 0:g.calls)??[],O=[...R,...I].map(k=>k.status==="success"?Ko(k.data):null),P=(y==null?void 0:y.calls)??[],B=(m==null?void 0:m.calls)??[],H=[...P,...B].map(k=>k.status==="success"?Ko(k.data):null),j=((b==null?void 0:b.calls)??[]).map(k=>k.status==="success"?k.result:null),T=((C==null?void 0:C.calls)??[]).map(k=>k.status==="success"?k.result:null),N=((v==null?void 0:v.calls)??[]).map(k=>k.status==="success"?k.result:null),M=[];for(const[k,D]of H.entries()){const U=O[k];if(typeof D!="bigint"||typeof U!="bigint")continue;const q=j[k-1],X=T[k-1],ae=N[k-1],oe=k===0?{address:$me,decimals:18,symbol:"ETH"}:{address:d[k-1],decimals:ae||q?Number(q??1):void 0,symbol:X??void 0};M.some(le=>le.token.address===oe.address)||M.push({token:oe,value:{pre:U,post:D,diff:D-U}})}return{assetChanges:M,block:S,results:x}}const PP=new Map,n4=new Map;let iye=0;function ld(t,e,n){const r=++iye,s=()=>PP.get(t)||[],i=()=>{const u=s();PP.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=n4.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(PP.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&n4.set(t,l),o}function Cb(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await pI(c);const l=async()=>{s&&(await t({unpoll:i}),await pI(r),l())};l()})(),i}function oye(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Jr(["watchBlocks",t.uid,e,n,r,u,c]);return ld(p,{onBlock:s,onError:i},g=>Cb(async()=>{var y;try{const m=await at(t,Il,"getBlock")({blockTag:e,includeTransactions:u});if(m.number!==null&&(d==null?void 0:d.number)!=null){if(m.number===d.number)return;if(m.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<m.number;b++){const v=await at(t,Il,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>d.number)&&(g.onBlock(m,d),d=m)}catch(m){(y=g.onError)==null||y.call(g,m)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,y=()=>p=!1;return(async()=>{try{r&&at(t,Il,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const m=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(C=>C.config.type==="webSocket"||C.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await m.subscribe({params:["newHeads"],async onData(v){var A;if(!p)return;const C=await at(t,Il,"getBlock")({blockNumber:(A=v.result)==null?void 0:A.number,includeTransactions:u}).catch(()=>{});p&&(s(C,d),g=!1,d=C)},onError(v){i==null||i(v)}});y=b,p||y()}catch(m){i==null||i(m)}})(),()=>y()})()}function GY(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Jr(["watchBlockNumber",t.uid,e,n,o]);return ld(d,{onBlockNumber:r,onError:s},h=>Cb(async()=>{var f;try{const p=await at(t,w1,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Jr(["watchBlockNumber",t.uid,e,n]);return ld(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return m?m.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(m){var v;if(!f)return;const b=Ko((v=m.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(m){var b;(b=h.onError)==null||b.call(h,m)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function aT(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function aye(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const y=Jr(["watchEvent",e,n,r,t.uid,s,u,o]);return ld(y,{onLogs:c,onError:a},m=>{let b;o!==void 0&&(b=o-1n);let v,C=!1;const A=Cb(async()=>{var S;if(!C){try{v=await at(t,CY,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}C=!0;return}try{let x;if(v)x=await at(t,sT,"getFilterChanges")({filter:v});else{const R=await at(t,w1,"getBlockNumber")({});b&&b!==R?x=await at(t,SM,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:R}):x=[],b=R}if(x.length===0)return;if(r)m.onLogs(x);else for(const R of x)m.onLogs([R])}catch(x){v&&x instanceof kg&&(C=!1),(S=m.onError)==null||S.call(m,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await at(t,aT,"uninstallFilter")({filter:v}),A()}})})():(()=>{let y=!0,m=()=>y=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const S=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return S?S.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let C=[];v&&(C=[v.flatMap(x=>y1({abi:[x],eventName:x.name,args:n}))],s&&(C=C[0]));const{unsubscribe:A}=await b.subscribe({params:["logs",{address:e,topics:C}],onData(S){var R;if(!y)return;const x=S.result;try{const{eventName:I,args:O}=CM({abi:v??[],data:x.data,topics:x.topics,strict:f}),P=cd(x,{args:O,eventName:I});c([P])}catch(I){let O,P;if(I instanceof v_||I instanceof qN){if(d)return;O=I.abiItem.name,P=(R=I.abiItem.inputs)==null?void 0:R.some(H=>!("name"in H&&H.name))}const B=cd(x,{args:P?[]:{},eventName:O});c([B])}},onError(S){a==null||a(S)}});m=A,y||m()}catch(b){a==null||a(b)}})(),()=>m()})()}function VY(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Jr(["watchPendingTransactions",t.uid,e,i]);return ld(l,{onTransactions:r,onError:n},u=>{let d;const h=Cb(async()=>{var f;try{if(!d)try{d=await at(t,AY,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await at(t,sT,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await at(t,aT,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function cye(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>l1(r))}async function lye(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function uye(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?xr(n):void 0,i=r?[s==null?void 0:s.address,[Ze(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const KY="0x5792579257925792579257925792579257925792579257925792579257925792",YY=Ze(0,{size:32});async function dye(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?xr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Ma({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Oa([p,f.dataSuffix]):p,to:f.to,value:f.value?Ze(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:Ze(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new D0(new ge(b,{details:b}))}if(a&&d.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new $0(new ge(m,{details:m}))}const p=[];for(const m of d){const b=f1(t,{account:u,chain:s,data:m.data,to:m.to,value:m.value?Ko(m.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(m=>m.status==="rejected"))throw g[0].reason;const y=g.map(m=>m.status==="fulfilled"?m.value:YY);return{id:Oa([...y,Ze(s.id,{size:32}),KY])}}throw CK(h,{...e,account:u,chain:e.chain})}}async function QY(t,e){async function n(u){if(u.endsWith(KY.slice(2))){const h=Pl(lI(u,-64,-32)),f=lI(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>YY.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:Oc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Oc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Ko(u.blockNumber),gasUsed:Ko(u.gasUsed),status:xY[u.status]})))??[],statusCode:l,status:c,version:o}}async function hye(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function fye(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Jr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=vM();let u;const d=ld(o,{resolve:c,reject:l},h=>{const f=Cb(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await QY(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new pye({id:n}))},i):void 0,await a}class pye extends ge{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function gye(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function mye(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Oc(t.nonce):void 0,storageProof:t.storageProof?gye(t.storageProof):void 0}}async function yye(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?Ze(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return mye(a)}async function JY(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Jr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:m}=vM(),b=a?setTimeout(()=>{p(),f(),m(new Zhe({hash:n}))},a):void 0;return f=ld(c,{onReplaced:r,resolve:y,reject:m},v=>{p=at(t,GY,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(C){const A=x=>{clearTimeout(b),p(),x(),f()};let S=C;if(!h)try{if(d){if(e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;A(()=>v.resolve(d));return}if(l||(h=!0,await gI(async()=>{l=await at(t,iT,"getTransaction")({hash:n}),l.blockNumber&&(S=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await at(t,xD,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;A(()=>v.resolve(d))}catch(x){if(x instanceof EK||x instanceof _K){if(!l){h=!1;return}try{u=l,h=!0;const R=await gI(()=>at(t,Il,"getBlock")({blockNumber:S,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof AK});h=!1;const I=R.transactions.find(({from:P,nonce:B})=>P===u.from&&B===u.nonce);if(!I||(d=await at(t,xD,"getTransactionReceipt")({hash:I.hash}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e)))return;let O="replaced";I.to===u.to&&I.value===u.value&&I.input===u.input?O="repriced":I.from===I.to&&I.value===0n&&(O="cancelled"),A(()=>{var P;(P=v.onReplaced)==null||P.call(v,{reason:O,replacedTransaction:u,transaction:I,transactionReceipt:d}),v.resolve(d)})}catch(R){A(()=>v.reject(R))}}else A(()=>v.reject(x))}}})}),g}async function wye(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Wu(n))}async function bye(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function ZY(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new cm({docsPath:"/docs/eip7702/prepareAuthorization"});const i=xr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:xr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await at(t,vb,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await at(t,cM,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&rT(o.address,i.address))&&(a.nonce+=1)),a}async function vye(t,e){const{account:n=t.account}=e;if(!n)throw new cm({docsPath:"/docs/eip7702/signAuthorization"});const r=xr(n);if(!r.signAuthorization)throw new FS({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await ZY(t,e);return r.signAuthorization(s)}async function Eye(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new cm({docsPath:"/docs/actions/wallet/signTransaction"});const i=xr(n);um({account:i,...e});const o=await at(t,vb,"getChainId")({});r!==null&&vK({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||bb;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:Ze(o),from:i.address}]},{retryCount:0})}async function XY(t,{account:e=t.account,message:n}){if(!e)throw new cm({docsPath:"/docs/actions/wallet/signMessage"});const r=xr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?I0(n):n.raw instanceof Uint8Array?ka(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function _ye(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new cm({docsPath:"/docs/actions/wallet/signTypedData"});const o=xr(n),a={EIP712Domain:WY({domain:r}),...e.types};if(zY({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=Yme({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Cye(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?xr(a.account):t.account,l=Ma({abi:n,args:s,functionName:o});try{const{data:u}=await at(t,m1,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=hm({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Dg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function Aye(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Ze(e)}]},{retryCount:0})}let eQ=class extends K5{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Xde(e);const r=c1(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),R0(i)}update(e){return T0(this),this.iHash.update(e),this}digestInto(e){T0(this),$c(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const tQ=(t,e,n)=>new eQ(t,e).update(n).digest();tQ.create=(t,e)=>new eQ(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oo=BigInt(0),Si=BigInt(1),Np=BigInt(2),Sye=BigInt(3),nQ=BigInt(4),rQ=BigInt(5),sQ=BigInt(8);function _a(t,e){const n=t%e;return n>=oo?n:e+n}function na(t,e,n){let r=t;for(;e-- >oo;)r*=r,r%=n;return r}function r4(t,e){if(t===oo)throw new Error("invert: expected non-zero number");if(e<=oo)throw new Error("invert: expected positive modulus, got "+e);let n=_a(t,e),r=e,s=oo,i=Si;for(;n!==oo;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Si)throw new Error("invert: does not exist");return _a(s,e)}function iQ(t,e){const n=(t.ORDER+Si)/nQ,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function xye(t,e){const n=(t.ORDER-rQ)/sQ,r=t.mul(e,Np),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Np),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Iye(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Si,n=0;for(;e%Np===oo;)e/=Np,n++;let r=Np;const s=cT(t);for(;s4(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return iQ;let i=s.pow(r,e);const o=(e+Si)/Np;return function(c,l){if(c.is0(l))return l;if(s4(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const y=Si<<BigInt(u-p-1),m=c.pow(d,y);u=p,d=c.sqr(m),h=c.mul(h,d),f=c.mul(f,m)}return f}}function Nye(t){return t%nQ===Sye?iQ:t%sQ===rQ?xye:Iye(t)}const Tye=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Rye(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Tye.reduce((r,s)=>(r[s]="function",r),e);return mM(t,n),t}function Pye(t,e,n){if(n<oo)throw new Error("invalid exponent, negatives unsupported");if(n===oo)return t.ONE;if(n===Si)return e;let r=t.ONE,s=e;for(;n>oo;)n&Si&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Si;return r}function oQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function s4(t,e){const n=(t.ORDER-Si)/Np,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function kye(t,e){e!==void 0&&E_(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function cT(t,e,n=!1,r={}){if(t<=oo)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=kye(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:tT(o),ZERO:oo,ONE:Si,create:u=>_a(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return oo<=u&&u<t},is0:u=>u===oo,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Si)===Si,neg:u=>_a(-u,t),eql:(u,d)=>u===d,sqr:u=>_a(u*u,t),add:(u,d)=>_a(u+d,t),sub:(u,d)=>_a(u-d,t),mul:(u,d)=>_a(u*d,t),pow:(u,d)=>Pye(l,u,d),div:(u,d)=>_a(u*r4(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>r4(u,t),sqrt:i||(u=>(c||(c=Nye(t)),c(l,u))),toBytes:u=>n?oY(u,a):gM(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?iY(u):eT(u)},invertBatch:u=>oQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function aQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function cQ(t){const e=aQ(t);return e+Math.ceil(e/2)}function Oye(t,e,n=!1){const r=t.length,s=aQ(e),i=cQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?iY(t):eT(t),a=_a(o,e-Si)+Si;return n?oY(a,s):gM(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const L0=BigInt(0),Tp=BigInt(1);function CE(t,e){const n=e.negate();return t?n:e}function Dye(t,e,n){const r=o=>o.pz,s=oQ(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function lQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kP(t,e){lQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=tT(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function i4(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Tp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function $ye(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Lye(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const OP=new WeakMap,uQ=new WeakMap;function DP(t){return uQ.get(t)||1}function o4(t){if(t!==L0)throw new Error("invalid wNAF")}function Mye(t,e){return{constTimeNegate:CE,hasPrecomputes(n){return DP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>L0;)r&Tp&&(s=s.add(i)),i=i.double(),r>>=Tp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=kP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=kP(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=i4(s,c,a);s=l,d?o=o.add(CE(f,r[p])):i=i.add(CE(h,r[u]))}return o4(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=kP(n,e);for(let a=0;a<o.windows&&s!==L0;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=i4(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return o4(s),i},getPrecomputes(n,r,s){let i=OP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),OP.set(r,i))),i},wNAFCached(n,r,s){const i=DP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=DP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){lQ(r,e),uQ.set(n,r),OP.delete(n)}}}function Uye(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>L0||r>L0;)n&Tp&&(i=i.add(s)),r&Tp&&(o=o.add(s)),s=s.double(),n>>=Tp,r>>=Tp;return{p1:i,p2:o}}function Bye(t,e,n,r){$ye(n,t),Lye(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Vpe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=tT(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],m=Number(y>>BigInt(f)&l);u[m]=u[m].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function a4(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Rye(e),e}else return cT(t)}function jye(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>L0))throw new Error(`CURVE.${a} must be positive bigint`)}const r=a4(e.p,n.Fp),s=a4(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function c4(t){t.lowS!==void 0&&fI("lowS",t.lowS),t.prehash!==void 0&&fI("prehash",t.prehash)}class Fye extends Error{constructor(e=""){super(e)}}const Eu={Err:Fye,_tlv:{encode:(t,e)=>{const{Err:n}=Eu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=AA(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?AA(s.length/2|128):"";return AA(t)+i+s+e},decode(t,e){const{Err:n}=Eu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Eu;if(t<AE)throw new e("integer: negative integers are not allowed");let n=AA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Eu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return eT(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Eu,s=pa("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Eu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},AE=BigInt(0),SE=BigInt(1),zye=BigInt(2),xA=BigInt(3),Wye=BigInt(4);function Hye(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function dQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=pa("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function qye(t,e={}){const{Fp:n,Fn:r}=jye("weierstrass",t,e),{h:s,n:i}=t;mM(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(R,I,O){const{x:P,y:B}=I.toAffine(),H=n.toBytes(P);if(fI("isCompressed",O),O){a();const j=!n.isOdd(B);return Sp(hQ(j),H)}else return Sp(Uint8Array.of(4),H,n.toBytes(B))}function l(R){$c(R);const I=n.BYTES,O=I+1,P=2*I+1,B=R.length,H=R[0],j=R.subarray(1);if(B===O&&(H===2||H===3)){const T=n.fromBytes(j);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const N=h(T);let M;try{M=n.sqrt(N)}catch(U){const q=U instanceof Error?": "+U.message:"";throw new Error("bad point: is not on curve, sqrt error"+q)}a();const k=n.isOdd(M);return(H&1)===1!==k&&(M=n.neg(M)),{x:T,y:M}}else if(B===P&&H===4){const T=n.fromBytes(j.subarray(I*0,I*1)),N=n.fromBytes(j.subarray(I*1,I*2));if(!f(T,N))throw new Error("bad point: is not on curve");return{x:T,y:N}}else throw new Error(`bad point: got length ${B}, expected compressed=${O} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Hye(n,t.a,t.b);function f(R,I){const O=n.sqr(I),P=h(R);return n.eql(O,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,xA),Wye),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(R,I,O=!1){if(!n.isValid(I)||O&&n.is0(I))throw new Error(`bad point coordinate ${R}`);return I}function m(R){if(!(R instanceof A))throw new Error("ProjectivePoint expected")}const b=H8((R,I)=>{const{px:O,py:P,pz:B}=R;if(n.eql(B,n.ONE))return{x:O,y:P};const H=R.is0();I==null&&(I=H?n.ONE:n.inv(B));const j=n.mul(O,I),T=n.mul(P,I),N=n.mul(B,I);if(H)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:j,y:T}}),v=H8(R=>{if(R.is0()){if(e.allowInfinityPoint&&!n.is0(R.py))return;throw new Error("bad point: ZERO")}const{x:I,y:O}=R.toAffine();if(!n.isValid(I)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(I,O))throw new Error("bad point: equation left != right");if(!R.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function C(R,I,O,P,B){return O=new A(n.mul(O.px,R),O.py,O.pz),I=CE(P,I),O=CE(B,O),I.add(O)}class A{constructor(I,O,P){this.px=y("x",I),this.py=y("y",O,!0),this.pz=y("z",P),Object.freeze(this)}static fromAffine(I){const{x:O,y:P}=I||{};if(!I||!n.isValid(O)||!n.isValid(P))throw new Error("invalid affine point");if(I instanceof A)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(P)?A.ZERO:new A(O,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){return Dye(A,"pz",I)}static fromBytes(I){return $c(I),A.fromHex(I)}static fromHex(I){const O=A.fromAffine(d(pa("pointHex",I)));return O.assertValidity(),O}static fromPrivateKey(I){const O=dQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return A.BASE.multiply(O(I))}static msm(I,O){return Bye(A,r,I,O)}precompute(I=8,O=!0){return x.setWindowSize(this,I),O||this.multiply(xA),this}_setWindowSize(I){this.precompute(I)}assertValidity(){v(this)}hasEvenY(){const{y:I}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(I)}equals(I){m(I);const{px:O,py:P,pz:B}=this,{px:H,py:j,pz:T}=I,N=n.eql(n.mul(O,T),n.mul(H,B)),M=n.eql(n.mul(P,T),n.mul(j,B));return N&&M}negate(){return new A(this.px,n.neg(this.py),this.pz)}double(){const{a:I,b:O}=t,P=n.mul(O,xA),{px:B,py:H,pz:j}=this;let T=n.ZERO,N=n.ZERO,M=n.ZERO,k=n.mul(B,B),D=n.mul(H,H),U=n.mul(j,j),q=n.mul(B,H);return q=n.add(q,q),M=n.mul(B,j),M=n.add(M,M),T=n.mul(I,M),N=n.mul(P,U),N=n.add(T,N),T=n.sub(D,N),N=n.add(D,N),N=n.mul(T,N),T=n.mul(q,T),M=n.mul(P,M),U=n.mul(I,U),q=n.sub(k,U),q=n.mul(I,q),q=n.add(q,M),M=n.add(k,k),k=n.add(M,k),k=n.add(k,U),k=n.mul(k,q),N=n.add(N,k),U=n.mul(H,j),U=n.add(U,U),k=n.mul(U,q),T=n.sub(T,k),M=n.mul(U,D),M=n.add(M,M),M=n.add(M,M),new A(T,N,M)}add(I){m(I);const{px:O,py:P,pz:B}=this,{px:H,py:j,pz:T}=I;let N=n.ZERO,M=n.ZERO,k=n.ZERO;const D=t.a,U=n.mul(t.b,xA);let q=n.mul(O,H),X=n.mul(P,j),ae=n.mul(B,T),oe=n.add(O,P),le=n.add(H,j);oe=n.mul(oe,le),le=n.add(q,X),oe=n.sub(oe,le),le=n.add(O,B);let Ee=n.add(H,T);return le=n.mul(le,Ee),Ee=n.add(q,ae),le=n.sub(le,Ee),Ee=n.add(P,B),N=n.add(j,T),Ee=n.mul(Ee,N),N=n.add(X,ae),Ee=n.sub(Ee,N),k=n.mul(D,le),N=n.mul(U,ae),k=n.add(N,k),N=n.sub(X,k),k=n.add(X,k),M=n.mul(N,k),X=n.add(q,q),X=n.add(X,q),ae=n.mul(D,ae),le=n.mul(U,le),X=n.add(X,ae),ae=n.sub(q,ae),ae=n.mul(D,ae),le=n.add(le,ae),q=n.mul(X,le),M=n.add(M,q),q=n.mul(Ee,le),N=n.mul(oe,N),N=n.sub(N,q),q=n.mul(oe,X),k=n.mul(Ee,k),k=n.add(k,q),new A(N,M,k)}subtract(I){return this.add(I.negate())}is0(){return this.equals(A.ZERO)}multiply(I){const{endo:O}=e;if(!r.isValidNot0(I))throw new Error("invalid scalar: out of range");let P,B;const H=j=>x.wNAFCached(this,j,A.normalizeZ);if(O){const{k1neg:j,k1:T,k2neg:N,k2:M}=O.splitScalar(I),{p:k,f:D}=H(T),{p:U,f:q}=H(M);B=D.add(q),P=C(O.beta,k,U,j,N)}else{const{p:j,f:T}=H(I);P=j,B=T}return A.normalizeZ([P,B])[0]}multiplyUnsafe(I){const{endo:O}=e,P=this;if(!r.isValid(I))throw new Error("invalid scalar: out of range");if(I===AE||P.is0())return A.ZERO;if(I===SE)return P;if(x.hasPrecomputes(this))return this.multiply(I);if(O){const{k1neg:B,k1:H,k2neg:j,k2:T}=O.splitScalar(I),{p1:N,p2:M}=Uye(A,P,H,T);return C(O.beta,N,M,B,j)}else return x.wNAFCachedUnsafe(P,I)}multiplyAndAddUnsafe(I,O,P){const B=this.multiplyUnsafe(O).add(I.multiplyUnsafe(P));return B.is0()?void 0:B}toAffine(I){return b(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return s===SE?!0:I?I(A,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:I}=e;return s===SE?this:I?I(A,this):this.multiplyUnsafe(s)}toBytes(I=!0){return fI("isCompressed",I),this.assertValidity(),u(A,this,I)}toRawBytes(I=!0){return this.toBytes(I)}toHex(I=!0){return __(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}A.BASE=new A(t.Gx,t.Gy,n.ONE),A.ZERO=new A(n.ZERO,n.ONE,n.ZERO),A.Fp=n,A.Fn=r;const S=r.BITS,x=Mye(A,e.endo?Math.ceil(S/2):S);return A}function hQ(t){return Uint8Array.of(t?2:3)}function Gye(t,e,n={}){mM(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||ahe,s=e.hmac||((P,...B)=>tQ(e.hash,P,Sp(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const B=a>>SE;return P>B}function u(P){return l(P)?o.neg(P):P}function d(P,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor(B,H,j){d("r",B),d("s",H),this.r=B,this.s=H,j!=null&&(this.recovery=j),Object.freeze(this)}static fromCompact(B){const H=o.BYTES,j=pa("compactSignature",B,H*2);return new h(o.fromBytes(j.subarray(0,H)),o.fromBytes(j.subarray(H,H*2)))}static fromDER(B){const{r:H,s:j}=Eu.toSig(pa("DER",B));return new h(H,j)}assertValidity(){}addRecoveryBit(B){return new h(this.r,this.s,B)}recoverPublicKey(B){const H=i.ORDER,{r:j,s:T,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*zye<H&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const k=N===2||N===3?j+a:j;if(!i.isValid(k))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(k),U=t.fromHex(Sp(hQ((N&1)===0),D)),q=o.inv(k),X=v(pa("msgHash",B)),ae=o.create(-X*q),oe=o.create(T*q),le=t.BASE.multiplyUnsafe(ae).add(U.multiplyUnsafe(oe));if(le.is0())throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return Sp(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return V5(Eu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return __(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return __(this.toBytes("compact"))}}const f=dQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return Oye(r(cQ(P)),P)},precompute(P=8,B=t.BASE){return B.precompute(P,!1)}};function g(P,B=!0){return t.fromPrivateKey(P).toBytes(B)}function y(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const H=pa("key",P).length,j=i.BYTES,T=j+1,N=2*j+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===T))return H===T||H===N}function m(P,B,H=!0){if(y(P)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(f(P)).toBytes(H)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const B=eT(P),H=P.length*8-c;return H>0?B>>BigInt(H):B},v=e.bits2int_modN||function(P){return o.create(b(P))},C=tT(c);function A(P){return Gpe("num < 2^"+c,P,AE,C),o.toBytes(P)}function S(P,B,H=x){if(["recovered","canonical"].some(oe=>oe in H))throw new Error("sign() legacy options not supported");const{hash:j}=e;let{lowS:T,prehash:N,extraEntropy:M}=H;T==null&&(T=!0),P=pa("msgHash",P),c4(H),N&&(P=pa("prehashed msgHash",j(P)));const k=v(P),D=f(B),U=[A(D),A(k)];if(M!=null&&M!==!1){const oe=M===!0?r(i.BYTES):M;U.push(pa("extraEntropy",oe))}const q=Sp(...U),X=k;function ae(oe){const le=b(oe);if(!o.isValidNot0(le))return;const Ee=o.inv(le),Z=t.BASE.multiply(le).toAffine(),ce=o.create(Z.x);if(ce===AE)return;const fe=o.create(Ee*o.create(X+ce*D));if(fe===AE)return;let ne=(Z.x===ce?0:2)|Number(Z.y&SE),ye=fe;return T&&l(fe)&&(ye=u(fe),ne^=1),new h(ce,ye,ne)}return{seed:q,k2sig:ae}}const x={lowS:e.lowS,prehash:!1},R={lowS:e.lowS,prehash:!1};function I(P,B,H=x){const{seed:j,k2sig:T}=S(P,B,H);return Kpe(e.hash.outputLen,o.BYTES,s)(j,T)}t.BASE.precompute(8);function O(P,B,H,j=R){const T=P;B=pa("msgHash",B),H=pa("publicKey",H),c4(j);const{lowS:N,prehash:M,format:k}=j;if("strict"in j)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&!["compact","der","js"].includes(k))throw new Error('format must be "compact", "der" or "js"');const D=typeof T=="string"||G5(T),U=!D&&!k&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!D&&!U)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,X;try{if(U)if(k===void 0||k==="js")q=new h(T.r,T.s);else throw new Error("invalid format");if(D){try{k!=="compact"&&(q=h.fromDER(T))}catch(ye){if(!(ye instanceof Eu.Err))throw ye}!q&&k!=="der"&&(q=h.fromCompact(T))}X=t.fromHex(H)}catch{return!1}if(!q||N&&q.hasHighS())return!1;M&&(B=e.hash(B));const{r:ae,s:oe}=q,le=v(B),Ee=o.inv(oe),Z=o.create(le*Ee),ce=o.create(ae*Ee),fe=t.BASE.multiplyUnsafe(Z).add(X.multiplyUnsafe(ce));return fe.is0()?!1:o.create(fe.x)===ae}return Object.freeze({getPublicKey:g,getSharedSecret:m,sign:I,verify:O,utils:p,Point:t,Signature:h})}function Vye(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=cT(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Kye(t){const{CURVE:e,curveOpts:n}=Vye(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Yye(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Qye(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Kye(t),s=qye(e,n),i=Gye(s,r,n);return Yye(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jye(t,e){const n=r=>Qye({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Zye=BigInt(1),OD=BigInt(2),l4=(t,e)=>(t+e/OD)/e;function Xye(t){const e=mI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=na(u,n,e)*u%e,h=na(d,n,e)*u%e,f=na(h,OD,e)*l%e,p=na(f,s,e)*f%e,g=na(p,i,e)*p%e,y=na(g,a,e)*g%e,m=na(y,c,e)*y%e,b=na(m,a,e)*g%e,v=na(b,n,e)*u%e,C=na(v,o,e)*p%e,A=na(C,r,e)*l%e,S=na(A,OD,e);if(!DD.eql(DD.sqr(S),t))throw new Error("Cannot find square root");return S}const DD=cT(mI.p,void 0,void 0,{sqrt:Xye}),fQ=Jye({...mI,Fp:DD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=mI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Zye*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=l4(i*t,e),c=l4(-r*t,e);let l=_a(t-a*n-c*s,e),u=_a(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},PK),ewe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:fQ},Symbol.toStringTag,{value:"Module"}));function twe({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new fQ.Signature(Ko(t),Ko(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Pa(o)}async function NM(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Ul(o)?o:typeof o=="object"&&"r"in o&&"s"in o?twe(o):Xr(o),u=await(async()=>!r&&!s||Xme(l)?l:eye({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Ma({abi:U8,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:VN({abi:U8,args:[n,i,u],bytecode:vge}),...c},{data:g}=await at(t,m1,"call")(p);return Tde(g??"0x0")}catch(p){try{if(rT(Wu(n),await pK({hash:i,signature:o})))return!0}catch{}if(p instanceof tY)return!1;throw p}}async function nwe(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=HY(n);return NM(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function rwe(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=qme({message:o,primaryType:a,types:c,domain:l});return NM(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function swe(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function iwe(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const y=h??!1,m=Jr(["watchContractEvent",r,s,i,t.uid,o,d,y,a]);return ld(m,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let C,A=!1;const S=Cb(async()=>{var x;if(!A){try{C=await at(t,_Y,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:y,fromBlock:a})}catch{}A=!0;return}try{let R;if(C)R=await at(t,sT,"getFilterChanges")({filter:C});else{const I=await at(t,w1,"getBlockNumber")({});v&&v<I?R=await at(t,SY,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:I,strict:y}):R=[],v=I}if(R.length===0)return;if(i)b.onLogs(R);else for(const I of R)b.onLogs([I])}catch(R){C&&R instanceof kg&&(A=!1),(x=b.onError)==null||x.call(b,R)}},{emitOnBegin:!0,interval:d});return async()=>{C&&await at(t,aT,"uninstallFilter")({filter:C}),S()}})})():(()=>{const y=h??!1,m=Jr(["watchContractEvent",r,s,i,t.uid,o,d,y]);let b=!0,v=()=>b=!1;return ld(m,{onLogs:l,onError:c},C=>((async()=>{try{const A=(()=>{if(t.transport.type==="fallback"){const R=t.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return R?R.value:t.transport}return t.transport})(),S=o?y1({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await A.subscribe({params:["logs",{address:r,topics:S}],onData(R){var O;if(!b)return;const I=R.result;try{const{eventName:P,args:B}=CM({abi:n,data:I.data,topics:I.topics,strict:h}),H=cd(I,{args:B,eventName:P});C.onLogs([H])}catch(P){let B,H;if(P instanceof v_||P instanceof qN){if(h)return;B=P.abiItem.name,H=(O=P.abiItem.inputs)==null?void 0:O.some(T=>!("name"in T&&T.name))}const j=cd(I,{args:H?[]:{},eventName:B});C.onLogs([j])}},onError(R){var I;(I=C.onError)==null||I.call(C,R)}});v=x,b||v()}catch(A){c==null||c(A)}})(),()=>v()))})()}async function pQ(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new cm({docsPath:"/docs/contract/writeContract"});const l=r?xr(r):null,u=Ma({abi:n,args:i,functionName:a});try{return await at(t,f1,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Dg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function qo(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const WS="2.17.3",owe=()=>`@wagmi/core@${WS}`;var gQ=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},yI,mQ;let wd=class $D extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return owe()}constructor(e,n={}){var i;super(),yI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof $D?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof $D&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return gQ(this,yI,"m",mQ).call(this,this,e)}};yI=new WeakSet,mQ=function t(e,n){return n!=null&&n(e)?e:e.cause?gQ(this,yI,"m",t).call(this,e.cause,n):e};class B_ extends wd{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class awe extends wd{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class cwe extends wd{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class lwe extends wd{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class uwe extends wd{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class dwe extends wd{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function HS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new awe;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const LD=256;let IA=LD,NA;function yQ(t=11){if(!NA||IA+t>LD*2){NA="",IA=0;for(let e=0;e<LD;e++)NA+=(256+Math.random()*256|0).toString(16).substring(1)}return NA.substring(IA,IA+++t)}function wQ(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?xr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:yQ()};function m(b){return v=>{const C=v(b);for(const S in y)delete C[S];const A={...b,...C};return Object.assign(A,{extend:m(A)})}}return Object.assign(y,{extend:m(y)})}function TM({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=yQ();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:Mme(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function hwe(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>TM({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function wI(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=fwe,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=TM({key:n,name:r,async request({method:g,params:y}){let m;const b=async(v=0)=>{const C=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const A=await C.request({method:g,params:y});return f({method:g,params:y,response:A,transport:C,status:"success"}),A}catch(A){if(f({error:A,method:g,params:y,transport:C,status:"error"}),i(A)||v===h.length-1||(m??(m=h.slice(v+1).some(S=>{const{include:x,exclude:R}=S({chain:c}).config.methods||{};return x?x.includes(g):R?!R.includes(g):!0})),!m))throw A;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};pwe({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function fwe(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===k0.code||t.code===Wr.code||xp.nodeMessage.test(t.message)||t.code===5e3))}function pwe({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),m=Date.now();let b,v;try{await(r?r({transport:y}):y.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-m,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const m=u.map(S=>S[y].latency),v=1-m.reduce((S,x)=>S+x,0)/m.length/f,C=u.map(S=>S[y].success),A=C.reduce((S,x)=>S+x,0)/C.length;return A===0?[0,y]:[l*v+c*A,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await pI(e),d()};d()}class gwe extends ge{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Dh(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,m=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new gwe;const v=Fme(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:m});return TM({key:s,methods:i,name:o,async request({method:C,params:A}){const S={method:C,params:A},{schedule:x}=mY({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>v.request({body:P}),sort:(P,B)=>P.id-B.id}),R=async P=>n?x(P):[await v.request({body:P})],[{error:I,result:O}]=await R(S);if(u)return{error:I,result:O};if(I)throw new rM({body:S,error:I,url:b});return O},retryCount:y,retryDelay:l,timeout:m,type:"http"},{fetchOptions:r,url:b})}}function mwe(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(ywe))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(wwe))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const ywe=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,wwe=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function bwe(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Da(r.address,{strict:!1})||e&&!rT(r.address,e))return!1}catch{return!1}return!0}async function vwe(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=mwe(s);if(!u.address||!bwe({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=HY(s);return NM(t,{address:u.address,hash:h,signature:a,...l})}function Ewe(t){return{call:e=>m1(t,e),createAccessList:e=>EY(t,e),createBlockFilter:()=>Fge(t),createContractEventFilter:e=>_Y(t,e),createEventFilter:e=>CY(t,e),createPendingTransactionFilter:()=>AY(t),estimateContractGas:e=>Wge(t,e),estimateGas:e=>QN(t,e),getBalance:e=>aM(t,e),getBlobBaseFee:()=>Hge(t),getBlock:e=>Il(t,e),getBlockNumber:e=>w1(t,e),getBlockTransactionCount:e=>Qge(t,e),getBytecode:e=>Z8(t,e),getChainId:()=>vb(t),getCode:e=>Z8(t,e),getContractEvents:e=>SY(t,e),getEip712Domain:e=>eme(t,e),getEnsAddress:e=>xge(t,e),getEnsAvatar:e=>Bge(t,e),getEnsName:e=>vY(t,e),getEnsResolver:e=>jge(t,e),getEnsText:e=>bY(t,e),getFeeHistory:e=>rme(t,e),estimateFeesPerGas:e=>lfe(t,e),getFilterChanges:e=>sT(t,e),getFilterLogs:e=>sme(t,e),getGasPrice:()=>iM(t),getLogs:e=>SM(t,e),getProof:e=>yye(t,e),estimateMaxPriorityFeePerGas:e=>cfe(t,e),getStorageAt:e=>ime(t,e),getTransaction:e=>iT(t,e),getTransactionConfirmations:e=>ome(t,e),getTransactionCount:e=>cM(t,e),getTransactionReceipt:e=>xD(t,e),multicall:e=>IY(t,e),prepareTransactionRequest:e=>h1(t,e),readContract:e=>Fl(t,e),sendRawTransaction:e=>uM(t,e),simulate:e=>ID(t,e),simulateBlocks:e=>ID(t,e),simulateCalls:e=>sye(t,e),simulateContract:e=>Cye(t,e),verifyMessage:e=>nwe(t,e),verifySiweMessage:e=>vwe(t,e),verifyTypedData:e=>rwe(t,e),uninstallFilter:e=>aT(t,e),waitForTransactionReceipt:e=>JY(t,e),watchBlocks:e=>oye(t,e),watchBlockNumber:e=>GY(t,e),watchContractEvent:e=>iwe(t,e),watchEvent:e=>aye(t,e),watchPendingTransactions:e=>VY(t,e)}}function _we(t){return{addChain:e=>kde(t,e),deployContract:e=>Pfe(t,e),getAddresses:()=>cye(t),getCallsStatus:e=>QY(t,e),getCapabilities:e=>uye(t,e),getChainId:()=>vb(t),getPermissions:()=>lye(t),prepareAuthorization:e=>ZY(t,e),prepareTransactionRequest:e=>h1(t,e),requestAddresses:()=>wye(t),requestPermissions:e=>bye(t,e),sendCalls:e=>dye(t,e),sendRawTransaction:e=>uM(t,e),sendTransaction:e=>f1(t,e),showCallsStatus:e=>hye(t,e),signAuthorization:e=>vye(t,e),signMessage:e=>XY(t,e),signTransaction:e=>Eye(t,e),signTypedData:e=>_ye(t,e),switchChain:e=>Aye(t,e),waitForCallsStatus:e=>fye(t,e),watchAsset:e=>swe(t,e),writeContract:e=>pQ(t,e)}}async function b1(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new dwe({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new cwe;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new uwe({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=xr(e.account??n.accounts[0]);if(o&&(o.address=Wu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new lwe({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return wQ({account:o,chain:a,name:"Connector Client",transport:l=>hwe(c)({...l,retryCount:0})})}async function MD(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function Cwe(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await b1(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return qo(o,QN,"estimateGas")({...s,account:i})}function bQ(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(Khe[t])}function aw(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Awe(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return qo(o,IY,"multicall")({allowFailure:n,contracts:s,...i})}function vQ(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return qo(s,Fl,"readContract")(r)}async function Swe(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>Awe(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof nY)throw c;const l=()=>o.map(u=>vQ(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function xwe(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await u4(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await u4(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=VV(Pl(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await qo(c,aM,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:lm(u,bQ(a)),symbol:d.nativeCurrency.symbol,value:u}}async function u4(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Swe(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=lm(c??"0",bQ(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function d4(t){return t.state.chainId}function Mg(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Mg(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Mg(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Iwe(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let TA=[];function sc(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Mg(TA,e)?TA:(TA=e,e)}let $P=[];function h4(t){const e=t.connectors;return Mg($P,e)?$P:($P=e,e)}function Nwe(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return qo(s,vY,"getEnsName")(r)}function UD(t,e={}){const n=Iwe(t,e);return n==null?void 0:n.extend(Ewe)}async function Twe(t,e={}){return(await b1(t,e)).extend(_we)}async function Rwe(t,e){const{account:n,chainId:r,...s}=e,i=n??aw(t).address,o=t.getClient({chainId:r});return qo(o,h1,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let LP=!1;async function BD(t,e={}){var l,u;if(LP)return[];LP=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),LP=!1,a}async function Pwe(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await b1(t,{account:n??void 0,chainId:r,connector:s}),await qo(o,f1,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function kwe(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await b1(t,{account:n,connector:r}),qo(i,XY,"signMessage")({...s,...n?{account:n}:{}})}class Kd extends wd{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Owe extends wd{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function f4(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Owe({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new B_;return t.setState(a=>({...a,chainId:r})),i}function EQ(t,e){const{onChange:n}=e;return t.subscribe(()=>aw(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Mg(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Dwe(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function _Q(t,e){const{onChange:n}=e;return t.subscribe(()=>sc(t),n,{equalityFn:Mg})}function CQ(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function $we(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=qo(l,VY,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function Lwe(t,e){const{onChange:n}=e;return t.subscribe(()=>UD(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function AQ(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await qo(i,JY,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await qo(i,iT,"getTransaction")({hash:a.transactionHash}),d=await qo(i,m1,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?VV(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function SQ(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await b1(t,{account:n??void 0,chainId:r,connector:s}),await qo(o,pQ,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function aQe(t){return t}lT.type="injected";function lT(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Mwe[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:lT.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,m,b;const d=await this.getProvider();if(!d)throw new Kd;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(C=>Wu(C)),h.length>0&&(h=await this.getAccounts())}catch(v){const C=v;if(C.code===Wr.code)throw new Wr(C);if(C.code===ef.code)throw C}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(A=>Wu(A))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const C=await this.switchChain({chainId:l}).catch(A=>{if(A.code===Wr.code)throw A;return{id:v}});v=(C==null?void 0:C.id)??v}return e&&await((m=c.storage)==null?void 0:m.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const C=v;throw C.code===Wr.code?new Wr(C):C.code===ef.code?new ef(C):C}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Kd;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await MY(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Kd;return(await l.request({method:"eth_accounts"})).map(d=>Wu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Kd;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=qS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(p()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(p()),g))]))return!0}throw new Kd}return!!(await gI(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,m;const d=await this.getProvider();if(!d)throw new Kd;const h=c.chains.find(b=>b.id===u);if(!h)throw new Bl(new B_);const f=new Promise(b=>{const v=C=>{"chainId"in C&&C.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ze(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:C,...A}=h.blockExplorers??{};let S;l!=null&&l.blockExplorerUrls?S=l.blockExplorerUrls:C&&(S=[C.url,...Object.values(A).map(I=>I.url)]);let x;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?x=l.rpcUrls:x=[((m=h.rpcUrls.default)==null?void 0:m.http[0])??""];const R={blockExplorerUrls:S,chainId:Ze(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[R]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Wr(new Error("User rejected switch after adding network."))}),f]),h}catch(C){throw new Wr(C)}throw v.code===Wr.code?new Wr(v):new Bl(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Wu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Mwe={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:qS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return qS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:qS(t,"isPhantom")}}};function qS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Uwe(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Bwe(){const t=new Set;let e=[];const n=()=>Uwe(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const jwe=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Fwe=jwe;function zwe(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const jD=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return jD(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return jD(r)(n)}}}},Wwe=(t,e)=>(n,r,s)=>{let i={storage:zwe(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const m=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return jD(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[C,A]=b;if(f=i.merge(A,(v=r())!=null?v:h),n(f,!0),C)return u()}).then(()=>{m==null||m(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{m==null||m(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Hwe=Wwe,p4=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},MP=t=>t?p4(t):p4;var xQ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],m=arguments.length,b,v;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),m){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(v=1,b=new Array(m-1);v<m;v++)b[v-1]=arguments[v];y.fn.apply(y.context,b)}else{var C=y.length,A;for(v=0;v<C;v++)switch(y[v].once&&this.removeListener(l,y[v].fn,void 0,!0),m){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,u);break;case 3:y[v].fn.call(y[v].context,u,d);break;case 4:y[v].fn.call(y[v].context,u,d,h);break;default:if(!b)for(A=1,b=new Array(m-1);A<m;A++)b[A-1]=arguments[A];y[v].fn.apply(y[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(xQ);var qwe=xQ.exports;const Gwe=sm(qwe);class Vwe{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Gwe})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Kwe(t){return new Vwe(t)}function Ywe(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function g4(t,e){return t.slice(0,e).join(".")||"."}function m4(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Qwe(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=m4(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=m4(s,c);if(u!==0)return r?e.call(this,a,c,g4(i,u)):`[ref=${g4(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Jwe(t,e,n,r){return JSON.stringify(t,Qwe((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Zwe(t){const{deserialize:e=Ywe,key:n="wagmi",serialize:r=Jwe,storage:s=IQ}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const IQ={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Xwe(){const t=typeof window<"u"&&window.localStorage?window.localStorage:IQ;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const FD=256;let RA=FD,PA;function e0e(t=11){if(!PA||RA+t>FD*2){PA="",RA=0;for(let e=0;e<FD;e++)PA+=(256+Math.random()*256|0).toString(16).substring(1)}return PA.substring(RA,RA+++t)}function t0e(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Zwe({storage:Xwe()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Bwe():void 0,a=MP(()=>i.chains),c=MP(()=>{const A=[],S=new Set;for(const x of i.connectors??[]){const R=l(x);if(A.push(R),!s&&R.rdns){const I=typeof R.rdns=="string"?[R.rdns]:R.rdns;for(const O of I)S.add(O)}}if(!s&&o){const x=o.getProviders();for(const R of x)S.has(R.info.rdns)||A.push(l(u(R)))}return A});function l(A){var R;const S=Kwe(e0e()),x={...A({emitter:S,chains:a.getState(),storage:n,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",v),(R=x.setup)==null||R.call(x),x}function u(A){const{info:S}=A,x=A.provider;return lT({target:{...S,id:S.rdns,provider:x}})}const d=new Map;function h(A={}){const S=A.chainId??y.getState().chainId,x=a.getState().find(I=>I.id===S);if(A.chainId&&!x)throw new B_;{const I=d.get(y.getState().chainId);if(I&&!x)return I;if(!x)throw new B_}{const I=d.get(S);if(I)return I}let R;if(i.client)R=i.client({chain:x});else{const I=x.id,O=a.getState().map(H=>H.id),P={},B=Object.entries(i);for(const[H,j]of B)if(!(H==="chains"||H==="client"||H==="connectors"||H==="transports"))if(typeof j=="object")if(I in j)P[H]=j[I];else{if(O.some(N=>N in j))continue;P[H]=j}else P[H]=j;R=wQ({...P,chain:x,batch:P.batch??{multicall:!0},transport:H=>i.transports[I]({...H,connectors:c})})}return d.set(S,R),R}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";WS.startsWith(g)?p=Number.parseInt(WS.replace(g,"")):p=Number.parseInt(WS.split(".")[0]??"0");const y=MP(Fwe(n?Hwe(f,{migrate(A,S){if(S===p)return A;const x=f(),R=m(A,x.chainId);return{...x,chainId:R}},name:"store",partialize(A){return{connections:{__type:"Map",value:Array.from(A.connections.entries()).map(([S,x])=>{const{id:R,name:I,type:O,uid:P}=x.connector;return[S,{...x,connector:{id:R,name:I,type:O,uid:P}}]})},chainId:A.chainId,current:A.current}},merge(A,S){typeof A=="object"&&A&&"status"in A&&delete A.status;const x=m(A,S.chainId);return{...S,...A,chainId:x}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function m(A,S){return A&&typeof A=="object"&&"chainId"in A&&typeof A.chainId=="number"&&a.getState().some(x=>x.id===A.chainId)?A.chainId:S}r&&y.subscribe(({connections:A,current:S})=>{var x;return S?(x=A.get(S))==null?void 0:x.chainId:void 0},A=>{if(a.getState().some(x=>x.id===A))return y.setState(x=>({...x,chainId:A??x.chainId}))}),o==null||o.subscribe(A=>{const S=new Set,x=new Set;for(const I of c.getState())if(S.add(I.id),I.rdns){const O=typeof I.rdns=="string"?[I.rdns]:I.rdns;for(const P of O)x.add(P)}const R=[];for(const I of A){if(x.has(I.info.rdns))continue;const O=l(u(I));S.has(O.id)||R.push(O)}n&&!y.persist.hasHydrated()||c.setState(I=>[...I,...R],!0)});function b(A){y.setState(S=>{const x=S.connections.get(A.uid);return x?{...S,connections:new Map(S.connections).set(A.uid,{accounts:A.accounts??x.accounts,chainId:A.chainId??x.chainId,connector:x.connector})}:S})}function v(A){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(S=>{const x=c.getState().find(R=>R.uid===A.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",C),{...S,connections:new Map(S.connections).set(A.uid,{accounts:A.accounts,chainId:A.chainId,connector:x}),current:A.uid,status:"connected"}):S})}function C(A){y.setState(S=>{const x=S.connections.get(A.uid);if(x){const I=x.connector;I.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),I.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",C),I.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(S.connections.delete(A.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const R=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:R.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(A){let S;typeof A=="function"?S=A(y.getState()):S=A;const x=f();typeof S!="object"&&(S=x),Object.keys(x).some(I=>!(I in S))&&(S=x),y.setState(S,!0)},subscribe(A,S,x){return y.subscribe(A,S,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(A){const S=typeof A=="function"?A(a.getState()):A;if(S.length!==0)return a.setState(S,!0)},subscribe(A){return a.subscribe(A)}},connectors:{providerDetailToConnector:u,setup:l,setState(A){return c.setState(typeof A=="function"?A(c.getState()):A,!0)},subscribe(A){return c.subscribe(A)}},events:{change:b,connect:v,disconnect:C}}}}function n0e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?BD(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function r0e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=n0e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=L.useRef(!0);return L.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const NQ=L.createContext(void 0);function s0e(t){const{children:e,config:n}=t,r={value:n};return L.createElement(r0e,t,L.createElement(NQ.Provider,r,e))}const i0e="2.15.6",o0e=()=>`wagmi@${i0e}`;let a0e=class extends wd{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return o0e()}};class c0e extends a0e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Ua(t={}){const e=t.config??L.useContext(NQ);if(!e)throw new c0e;return e}var TQ={exports:{}},RQ={},PQ={exports:{}},kQ={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0=L;function l0e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var u0e=typeof Object.is=="function"?Object.is:l0e,d0e=M0.useState,h0e=M0.useEffect,f0e=M0.useLayoutEffect,p0e=M0.useDebugValue;function g0e(t,e){var n=e(),r=d0e({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return f0e(function(){s.value=n,s.getSnapshot=e,UP(s)&&i({inst:s})},[t,n,e]),h0e(function(){return UP(s)&&i({inst:s}),t(function(){UP(s)&&i({inst:s})})},[t]),p0e(n),n}function UP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!u0e(t,n)}catch{return!0}}function m0e(t,e){return e()}var y0e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m0e:g0e;kQ.useSyncExternalStore=M0.useSyncExternalStore!==void 0?M0.useSyncExternalStore:y0e;PQ.exports=kQ;var OQ=PQ.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT=L,w0e=OQ;function b0e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var v0e=typeof Object.is=="function"?Object.is:b0e,E0e=w0e.useSyncExternalStore,_0e=uT.useRef,C0e=uT.useEffect,A0e=uT.useMemo,S0e=uT.useDebugValue;RQ.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=_0e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=A0e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,v0e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=E0e(t,i[0],i[1]);return C0e(function(){o.hasValue=!0,o.value=a},[a]),S0e(a),a};TQ.exports=RQ;var DQ=TQ.exports;const BP=t=>typeof t=="object"&&!Array.isArray(t);function x0e(t,e,n=e,r=Mg){const s=L.useRef([]),i=DQ.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(BP(o)&&BP(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return L.useMemo(()=>{if(BP(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function v1(t={}){const e=Ua(t);return x0e(n=>EQ(e,{onChange:n}),()=>aw(e))}var Ab=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ug=typeof window>"u"||"Deno"in globalThis;function gi(){}function I0e(t,e){return typeof t=="function"?t(e):t}function zD(t){return typeof t=="number"&&t>=0&&t!==1/0}function $Q(t,e){return Math.max(t+(e||0)-Date.now(),0)}function tf(t,e){return typeof t=="function"?t(e):t}function Ca(t,e){return typeof t=="function"?t(e):t}function y4(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==RM(o,e.options))return!1}else if(!j_(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function w4(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Bg(e.options.mutationKey)!==Bg(i))return!1}else if(!j_(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function RM(t,e){return((e==null?void 0:e.queryKeyHashFn)||Bg)(t)}function Bg(t){return JSON.stringify(t,(e,n)=>WD(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function j_(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>j_(t[n],e[n])):!1}function PM(t,e){if(t===e)return t;const n=b4(t)&&b4(e);if(n||WD(t)&&WD(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=PM(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function bI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function b4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function WD(t){if(!v4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!v4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function v4(t){return Object.prototype.toString.call(t)==="[object Object]"}function N0e(t){return new Promise(e=>{setTimeout(e,t)})}function HD(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?PM(t,e):e}function T0e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function R0e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var kM=Symbol();function LQ(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===kM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function MQ(t,e){return typeof t=="function"?t(...e):!!t}var Mp,ih,ww,UW,P0e=(UW=class extends Ab{constructor(){super();G(this,Mp);G(this,ih);G(this,ww);$(this,ww,e=>{if(!Ug&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){_(this,ih)||this.setEventListener(_(this,ww))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,ih))==null||e.call(this),$(this,ih,void 0))}setEventListener(e){var n;$(this,ww,e),(n=_(this,ih))==null||n.call(this),$(this,ih,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,Mp)!==e&&($(this,Mp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof _(this,Mp)=="boolean"?_(this,Mp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Mp=new WeakMap,ih=new WeakMap,ww=new WeakMap,UW),OM=new P0e,bw,oh,vw,BW,k0e=(BW=class extends Ab{constructor(){super();G(this,bw,!0);G(this,oh);G(this,vw);$(this,vw,e=>{if(!Ug&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,oh)||this.setEventListener(_(this,vw))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,oh))==null||e.call(this),$(this,oh,void 0))}setEventListener(e){var n;$(this,vw,e),(n=_(this,oh))==null||n.call(this),$(this,oh,e(this.setOnline.bind(this)))}setOnline(e){_(this,bw)!==e&&($(this,bw,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,bw)}},bw=new WeakMap,oh=new WeakMap,vw=new WeakMap,BW),vI=new k0e;function qD(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function O0e(t){return Math.min(1e3*2**t,3e4)}function UQ(t){return(t??"online")==="online"?vI.isOnline():!0}var BQ=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function jP(t){return t instanceof BQ}function jQ(t){let e=!1,n=0,r=!1,s;const i=qD(),o=g=>{var y;r||(h(new BQ(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>OM.isFocused()&&(t.networkMode==="always"||vI.isOnline())&&t.canRun(),u=()=>UQ(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=m=>{(r||l())&&g(m)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(d).catch(m=>{var S;if(r)return;const b=t.retry??(Ug?0:3),v=t.retryDelay??O0e,C=typeof v=="function"?v(n,m):v,A=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,m);if(e||!A){h(m);return}n++,(S=t.onFail)==null||S.call(t,n,m),N0e(C).then(()=>l()?void 0:f()).then(()=>{e?h(m):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var D0e=t=>setTimeout(t,0);function $0e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=D0e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Gr=$0e(),Up,jW,FQ=(jW=class{constructor(){G(this,Up)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zD(this.gcTime)&&$(this,Up,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ug?1/0:5*60*1e3))}clearGcTimeout(){_(this,Up)&&(clearTimeout(_(this,Up)),$(this,Up,void 0))}},Up=new WeakMap,jW),Ew,Bp,ga,jp,Ys,OC,Fp,oc,hu,FW,L0e=(FW=class extends FQ{constructor(e){super();G(this,oc);G(this,Ew);G(this,Bp);G(this,ga);G(this,jp);G(this,Ys);G(this,OC);G(this,Fp);$(this,Fp,!1),$(this,OC,e.defaultOptions),this.setOptions(e.options),this.observers=[],$(this,jp,e.client),$(this,ga,_(this,jp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,$(this,Ew,M0e(this.options)),this.state=e.state??_(this,Ew),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,Ys))==null?void 0:e.promise}setOptions(e){this.options={..._(this,OC),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,ga).remove(this)}setData(e,n){const r=HD(this.state.data,e,this.options);return he(this,oc,hu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){he(this,oc,hu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=_(this,Ys))==null?void 0:r.promise;return(s=_(this,Ys))==null||s.cancel(e),n?n.then(gi).catch(gi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,Ew))}isActive(){return this.observers.some(e=>Ca(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>tf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!$Q(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Ys))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Ys))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,ga).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(_(this,Ys)&&(_(this,Fp)?_(this,Ys).cancel({revert:!0}):_(this,Ys).cancelRetry()),this.scheduleGc()),_(this,ga).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||he(this,oc,hu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(_(this,Ys))return _(this,Ys).continueRetry(),_(this,Ys).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>($(this,Fp,!0),r.signal)})},i=()=>{const h=LQ(this.options,n),p=(()=>{const g={client:_(this,jp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return $(this,Fp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:_(this,jp),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),$(this,Bp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&he(this,oc,hu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;jP(h)&&h.silent||he(this,oc,hu).call(this,{type:"error",error:h}),jP(h)||((p=(f=_(this,ga).config).onError)==null||p.call(f,h,this),(y=(g=_(this,ga).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return $(this,Ys,jQ({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(m){c(m);return}(p=(f=_(this,ga).config).onSuccess)==null||p.call(f,h,this),(y=(g=_(this,ga).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{he(this,oc,hu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{he(this,oc,hu).call(this,{type:"pause"})},onContinue:()=>{he(this,oc,hu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),_(this,Ys).start()}},Ew=new WeakMap,Bp=new WeakMap,ga=new WeakMap,jp=new WeakMap,Ys=new WeakMap,OC=new WeakMap,Fp=new WeakMap,oc=new WeakSet,hu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...zQ(r.data,this.options),fetchMeta:e.meta??null};case"success":return $(this,Bp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return jP(s)&&s.revert&&_(this,Bp)?{..._(this,Bp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Gr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,ga).notify({query:this,type:"updated",action:e})})},FW);function zQ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:UQ(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function M0e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var sl,zW,U0e=(zW=class extends Ab{constructor(e={}){super();G(this,sl);this.config=e,$(this,sl,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??RM(s,n);let o=this.get(i);return o||(o=new L0e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){_(this,sl).has(e.queryHash)||(_(this,sl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=_(this,sl).get(e.queryHash);n&&(e.destroy(),n===e&&_(this,sl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Gr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,sl).get(e)}getAll(){return[..._(this,sl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>y4(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>y4(e,r)):n}notify(e){Gr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Gr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Gr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},sl=new WeakMap,zW),il,ui,zp,ol,Fd,WW,B0e=(WW=class extends FQ{constructor(e){super();G(this,ol);G(this,il);G(this,ui);G(this,zp);this.mutationId=e.mutationId,$(this,ui,e.mutationCache),$(this,il,[]),this.state=e.state||WQ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,il).includes(e)||(_(this,il).push(e),this.clearGcTimeout(),_(this,ui).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){$(this,il,_(this,il).filter(n=>n!==e)),this.scheduleGc(),_(this,ui).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,il).length||(this.state.status==="pending"?this.scheduleGc():_(this,ui).remove(this))}continue(){var e;return((e=_(this,zp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,m,b,v,C,A,S,x,R;const n=()=>{he(this,ol,Fd).call(this,{type:"continue"})};$(this,zp,jQ({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,O)=>{he(this,ol,Fd).call(this,{type:"failed",failureCount:I,error:O})},onPause:()=>{he(this,ol,Fd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,ui).canRun(this)}));const r=this.state.status==="pending",s=!_(this,zp).canStart();try{if(r)n();else{he(this,ol,Fd).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=_(this,ui).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&he(this,ol,Fd).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const I=await _(this,zp).start();return await((u=(l=_(this,ui).config).onSuccess)==null?void 0:u.call(l,I,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,I,e,this.state.context)),await((p=(f=_(this,ui).config).onSettled)==null?void 0:p.call(f,I,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,I,null,e,this.state.context)),he(this,ol,Fd).call(this,{type:"success",data:I}),I}catch(I){try{throw await((b=(m=_(this,ui).config).onError)==null?void 0:b.call(m,I,e,this.state.context,this)),await((C=(v=this.options).onError)==null?void 0:C.call(v,I,e,this.state.context)),await((S=(A=_(this,ui).config).onSettled)==null?void 0:S.call(A,void 0,I,this.state.variables,this.state.context,this)),await((R=(x=this.options).onSettled)==null?void 0:R.call(x,void 0,I,e,this.state.context)),I}finally{he(this,ol,Fd).call(this,{type:"error",error:I})}}finally{_(this,ui).runNext(this)}}},il=new WeakMap,ui=new WeakMap,zp=new WeakMap,ol=new WeakSet,Fd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Gr.batch(()=>{_(this,il).forEach(r=>{r.onMutationUpdate(e)}),_(this,ui).notify({mutation:this,type:"updated",action:e})})},WW);function WQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Au,ac,DC,HW,j0e=(HW=class extends Ab{constructor(e={}){super();G(this,Au);G(this,ac);G(this,DC);this.config=e,$(this,Au,new Set),$(this,ac,new Map),$(this,DC,0)}build(e,n,r){const s=new B0e({mutationCache:this,mutationId:++vd(this,DC)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){_(this,Au).add(e);const n=kA(e);if(typeof n=="string"){const r=_(this,ac).get(n);r?r.push(e):_(this,ac).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,Au).delete(e)){const n=kA(e);if(typeof n=="string"){const r=_(this,ac).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&_(this,ac).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=kA(e);if(typeof n=="string"){const r=_(this,ac).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=kA(e);if(typeof n=="string"){const s=(r=_(this,ac).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Gr.batch(()=>{_(this,Au).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,Au).clear(),_(this,ac).clear()})}getAll(){return Array.from(_(this,Au))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>w4(n,r))}findAll(e={}){return this.getAll().filter(n=>w4(e,n))}notify(e){Gr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Gr.batch(()=>Promise.all(e.map(n=>n.continue().catch(gi))))}},Au=new WeakMap,ac=new WeakMap,DC=new WeakMap,HW);function kA(t){var e;return(e=t.options.scope)==null?void 0:e.id}function E4(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=LQ(e.options,e.fetchOptions),b=async(v,C,A)=>{if(g)return Promise.reject();if(C==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:C,direction:A?"backward":"forward",meta:e.options.meta};return y(P),P})(),R=await m(x),{maxPages:I}=e.options,O=A?R0e:T0e;return{pages:O(v.pages,R,I),pageParams:O(v.pageParams,C,I)}};if(s&&i.length){const v=s==="backward",C=v?F0e:_4,A={pages:i,pageParams:o},S=C(r,A);a=await b(A,S,v)}else{const v=t??i.length;do{const C=c===0?o[0]??r.initialPageParam:_4(r,a);if(c>0&&C==null)break;a=await b(a,C),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function _4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function F0e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var br,ah,ch,_w,Cw,lh,Aw,Sw,qW,z0e=(qW=class{constructor(t={}){G(this,br);G(this,ah);G(this,ch);G(this,_w);G(this,Cw);G(this,lh);G(this,Aw);G(this,Sw);$(this,br,t.queryCache||new U0e),$(this,ah,t.mutationCache||new j0e),$(this,ch,t.defaultOptions||{}),$(this,_w,new Map),$(this,Cw,new Map),$(this,lh,0)}mount(){vd(this,lh)._++,_(this,lh)===1&&($(this,Aw,OM.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,br).onFocus())})),$(this,Sw,vI.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,br).onOnline())})))}unmount(){var t,e;vd(this,lh)._--,_(this,lh)===0&&((t=_(this,Aw))==null||t.call(this),$(this,Aw,void 0),(e=_(this,Sw))==null||e.call(this),$(this,Sw,void 0))}isFetching(t){return _(this,br).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,ah).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,br).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=_(this,br).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(tf(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,br).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=_(this,br).get(r.queryHash),i=s==null?void 0:s.state.data,o=I0e(e,i);if(o!==void 0)return _(this,br).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Gr.batch(()=>_(this,br).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,br).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=_(this,br);Gr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=_(this,br);return Gr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Gr.batch(()=>_(this,br).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(gi).catch(gi)}invalidateQueries(t,e={}){return Gr.batch(()=>(_(this,br).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Gr.batch(()=>_(this,br).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(gi)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(gi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=_(this,br).build(this,e);return n.isStaleByTime(tf(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gi).catch(gi)}fetchInfiniteQuery(t){return t.behavior=E4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gi).catch(gi)}ensureInfiniteQueryData(t){return t.behavior=E4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return vI.isOnline()?_(this,ah).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,br)}getMutationCache(){return _(this,ah)}getDefaultOptions(){return _(this,ch)}setDefaultOptions(t){$(this,ch,t)}setQueryDefaults(t,e){_(this,_w).set(Bg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,_w).values()],n={};return e.forEach(r=>{j_(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){_(this,Cw).set(Bg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,Cw).values()],n={};return e.forEach(r=>{j_(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,ch).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=RM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===kM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,ch).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,br).clear(),_(this,ah).clear()}},br=new WeakMap,ah=new WeakMap,ch=new WeakMap,_w=new WeakMap,Cw=new WeakMap,lh=new WeakMap,Aw=new WeakMap,Sw=new WeakMap,qW),qi,Gt,$C,di,Wp,xw,uh,dh,LC,Iw,Nw,Hp,qp,hh,Tw,yn,zv,GD,VD,KD,YD,QD,JD,ZD,HQ,GW,W0e=(GW=class extends Ab{constructor(e,n){super();G(this,yn);G(this,qi);G(this,Gt);G(this,$C);G(this,di);G(this,Wp);G(this,xw);G(this,uh);G(this,dh);G(this,LC);G(this,Iw);G(this,Nw);G(this,Hp);G(this,qp);G(this,hh);G(this,Tw,new Set);this.options=n,$(this,qi,e),$(this,dh,null),$(this,uh,qD()),this.options.experimental_prefetchInRender||_(this,uh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,Gt).addObserver(this),C4(_(this,Gt),this.options)?he(this,yn,zv).call(this):this.updateResult(),he(this,yn,YD).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return XD(_(this,Gt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return XD(_(this,Gt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,he(this,yn,QD).call(this),he(this,yn,JD).call(this),_(this,Gt).removeObserver(this)}setOptions(e){const n=this.options,r=_(this,Gt);if(this.options=_(this,qi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ca(this.options.enabled,_(this,Gt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");he(this,yn,ZD).call(this),_(this,Gt).setOptions(this.options),n._defaulted&&!bI(this.options,n)&&_(this,qi).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,Gt),observer:this});const s=this.hasListeners();s&&A4(_(this,Gt),r,this.options,n)&&he(this,yn,zv).call(this),this.updateResult(),s&&(_(this,Gt)!==r||Ca(this.options.enabled,_(this,Gt))!==Ca(n.enabled,_(this,Gt))||tf(this.options.staleTime,_(this,Gt))!==tf(n.staleTime,_(this,Gt)))&&he(this,yn,GD).call(this);const i=he(this,yn,VD).call(this);s&&(_(this,Gt)!==r||Ca(this.options.enabled,_(this,Gt))!==Ca(n.enabled,_(this,Gt))||i!==_(this,hh))&&he(this,yn,KD).call(this,i)}getOptimisticResult(e){const n=_(this,qi).getQueryCache().build(_(this,qi),e),r=this.createResult(n,e);return q0e(this,r)&&($(this,di,r),$(this,xw,this.options),$(this,Wp,_(this,Gt).state)),r}getCurrentResult(){return _(this,di)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){_(this,Tw).add(e)}getCurrentQuery(){return _(this,Gt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=_(this,qi).defaultQueryOptions(e),r=_(this,qi).getQueryCache().build(_(this,qi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return he(this,yn,zv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,di)))}createResult(e,n){var I;const r=_(this,Gt),s=this.options,i=_(this,di),o=_(this,Wp),a=_(this,xw),l=e!==r?e.state:_(this,$C),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),P=!O&&C4(e,n),B=O&&A4(e,r,n,s);(P||B)&&(d={...d,...zQ(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let m=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,m=!0):O=typeof n.placeholderData=="function"?n.placeholderData((I=_(this,Nw))==null?void 0:I.state.data,_(this,Nw)):n.placeholderData,O!==void 0&&(y="success",f=HD(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!m)if(i&&f===(o==null?void 0:o.data)&&n.select===_(this,LC))f=_(this,Iw);else try{$(this,LC,n.select),f=n.select(f),f=HD(i==null?void 0:i.data,f,n),$(this,Iw,f),$(this,dh,null)}catch(O){$(this,dh,O)}_(this,dh)&&(p=_(this,dh),f=_(this,Iw),g=Date.now(),y="error");const b=d.fetchStatus==="fetching",v=y==="pending",C=y==="error",A=v&&b,S=f!==void 0,R={status:y,fetchStatus:d.fetchStatus,isPending:v,isSuccess:y==="success",isError:C,isInitialLoading:A,isLoading:A,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:C&&!S,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:C&&S,isStale:DM(e,n),refetch:this.refetch,promise:_(this,uh),isEnabled:Ca(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=H=>{R.status==="error"?H.reject(R.error):R.data!==void 0&&H.resolve(R.data)},P=()=>{const H=$(this,uh,R.promise=qD());O(H)},B=_(this,uh);switch(B.status){case"pending":e.queryHash===r.queryHash&&O(B);break;case"fulfilled":(R.status==="error"||R.data!==B.value)&&P();break;case"rejected":(R.status!=="error"||R.error!==B.reason)&&P();break}}return R}updateResult(){const e=_(this,di),n=this.createResult(_(this,Gt),this.options);if($(this,Wp,_(this,Gt).state),$(this,xw,this.options),_(this,Wp).data!==void 0&&$(this,Nw,_(this,Gt)),bI(n,e))return;$(this,di,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,Tw).size)return!0;const o=new Set(i??_(this,Tw));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,di)).some(a=>{const c=a;return _(this,di)[c]!==e[c]&&o.has(c)})};he(this,yn,HQ).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&he(this,yn,YD).call(this)}},qi=new WeakMap,Gt=new WeakMap,$C=new WeakMap,di=new WeakMap,Wp=new WeakMap,xw=new WeakMap,uh=new WeakMap,dh=new WeakMap,LC=new WeakMap,Iw=new WeakMap,Nw=new WeakMap,Hp=new WeakMap,qp=new WeakMap,hh=new WeakMap,Tw=new WeakMap,yn=new WeakSet,zv=function(e){he(this,yn,ZD).call(this);let n=_(this,Gt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(gi)),n},GD=function(){he(this,yn,QD).call(this);const e=tf(this.options.staleTime,_(this,Gt));if(Ug||_(this,di).isStale||!zD(e))return;const r=$Q(_(this,di).dataUpdatedAt,e)+1;$(this,Hp,setTimeout(()=>{_(this,di).isStale||this.updateResult()},r))},VD=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,Gt)):this.options.refetchInterval)??!1},KD=function(e){he(this,yn,JD).call(this),$(this,hh,e),!(Ug||Ca(this.options.enabled,_(this,Gt))===!1||!zD(_(this,hh))||_(this,hh)===0)&&$(this,qp,setInterval(()=>{(this.options.refetchIntervalInBackground||OM.isFocused())&&he(this,yn,zv).call(this)},_(this,hh)))},YD=function(){he(this,yn,GD).call(this),he(this,yn,KD).call(this,he(this,yn,VD).call(this))},QD=function(){_(this,Hp)&&(clearTimeout(_(this,Hp)),$(this,Hp,void 0))},JD=function(){_(this,qp)&&(clearInterval(_(this,qp)),$(this,qp,void 0))},ZD=function(){const e=_(this,qi).getQueryCache().build(_(this,qi),this.options);if(e===_(this,Gt))return;const n=_(this,Gt);$(this,Gt,e),$(this,$C,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},HQ=function(e){Gr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(_(this,di))}),_(this,qi).getQueryCache().notify({query:_(this,Gt),type:"observerResultsUpdated"})})},GW);function H0e(t,e){return Ca(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function C4(t,e){return H0e(t,e)||t.state.data!==void 0&&XD(t,e,e.refetchOnMount)}function XD(t,e,n){if(Ca(e.enabled,t)!==!1&&tf(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&DM(t,e)}return!1}function A4(t,e,n,r){return(t!==e||Ca(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&DM(t,n)}function DM(t,e){return Ca(e.enabled,t)!==!1&&t.isStaleByTime(tf(e.staleTime,t))}function q0e(t,e){return!bI(t.getCurrentResult(),e)}var fh,ph,Gi,Su,td,GS,e3,VW,G0e=(VW=class extends Ab{constructor(n,r){super();G(this,td);G(this,fh);G(this,ph);G(this,Gi);G(this,Su);$(this,fh,n),this.setOptions(r),this.bindMethods(),he(this,td,GS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=_(this,fh).defaultMutationOptions(n),bI(this.options,r)||_(this,fh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,Gi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Bg(r.mutationKey)!==Bg(this.options.mutationKey)?this.reset():((s=_(this,Gi))==null?void 0:s.state.status)==="pending"&&_(this,Gi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=_(this,Gi))==null||n.removeObserver(this)}onMutationUpdate(n){he(this,td,GS).call(this),he(this,td,e3).call(this,n)}getCurrentResult(){return _(this,ph)}reset(){var n;(n=_(this,Gi))==null||n.removeObserver(this),$(this,Gi,void 0),he(this,td,GS).call(this),he(this,td,e3).call(this)}mutate(n,r){var s;return $(this,Su,r),(s=_(this,Gi))==null||s.removeObserver(this),$(this,Gi,_(this,fh).getMutationCache().build(_(this,fh),this.options)),_(this,Gi).addObserver(this),_(this,Gi).execute(n)}},fh=new WeakMap,ph=new WeakMap,Gi=new WeakMap,Su=new WeakMap,td=new WeakSet,GS=function(){var r;const n=((r=_(this,Gi))==null?void 0:r.state)??WQ();$(this,ph,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},e3=function(n){Gr.batch(()=>{var r,s,i,o,a,c,l,u;if(_(this,Su)&&this.hasListeners()){const d=_(this,ph).variables,h=_(this,ph).context;(n==null?void 0:n.type)==="success"?((s=(r=_(this,Su)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=_(this,Su)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=_(this,Su)).onError)==null||c.call(a,n.error,d,h),(u=(l=_(this,Su)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(_(this,ph))})})},VW);function V0e(t,e){return PM(t,e)}function K0e(t){return JSON.stringify(t,(e,n)=>Y0e(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function Y0e(t){if(!S4(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!S4(n)||!n.hasOwnProperty("isPrototypeOf"))}function S4(t){return Object.prototype.toString.call(t)==="[object Object]"}function dT(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:m,initialPageParam:b,_optimisticResults:v,enabled:C,notifyOnChangeProps:A,placeholderData:S,refetchInterval:x,refetchIntervalInBackground:R,refetchOnMount:I,refetchOnReconnect:O,refetchOnWindowFocus:P,retryOnMount:B,select:H,staleTime:j,suspense:T,throwOnError:N,config:M,connector:k,query:D,...U}=t;return U}function Q0e(t){return{mutationFn(e){return HS(t,e)},mutationKey:["connect"]}}function J0e(t){return{mutationFn(e){return MD(t,e)},mutationKey:["disconnect"]}}function Z0e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Nwe(t,{...i,address:r})},queryKey:X0e(e)}}function X0e(t={}){return["ensName",dT(t)]}function ebe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Twe(t,{...o,connector:r})},queryKey:tbe(e)}}function tbe(t={}){const{connector:e,...n}=t;return["walletClient",{...dT(n),connectorUid:e==null?void 0:e.uid}]}function nbe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return vQ(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:rbe(e)}}function rbe(t={}){const{abi:e,...n}=t;return["readContract",dT(n)]}function sbe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return AQ(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:ibe(e)}}function ibe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",dT(n)]}function obe(t){return{mutationFn(e){return SQ(t,e)},mutationKey:["writeContract"]}}var qQ=L.createContext(void 0),$M=t=>{const e=L.useContext(qQ);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},abe=({client:t,children:e})=>(L.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(qQ.Provider,{value:t,children:e})),GQ=L.createContext(!1),cbe=()=>L.useContext(GQ);GQ.Provider;function lbe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ube=L.createContext(lbe()),dbe=()=>L.useContext(ube),hbe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},fbe=t=>{L.useEffect(()=>{t.clearReset()},[t])},pbe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||MQ(n,[t.error,r])),gbe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},mbe=(t,e)=>t.isLoading&&t.isFetching&&!e,ybe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,x4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function wbe(t,e,n){var d,h,f,p,g;const r=cbe(),s=dbe(),i=$M(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",gbe(o),hbe(o,s),fbe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=L.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(y=>{const m=u?c.subscribe(Gr.batchCalls(y)):gi;return c.updateResult(),m},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),L.useEffect(()=>{c.setOptions(o)},[o,c]),ybe(o,l))throw x4(o,c,s);if(pbe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Ug&&mbe(l,r)){const y=a?x4(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(gi).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function bbe(t,e){return wbe(t,W0e)}function LM(t,e){const n=$M(),[r]=L.useState(()=>new G0e(n,t));L.useEffect(()=>{r.setOptions(t)},[r,t]);const s=L.useSyncExternalStore(L.useCallback(o=>r.subscribe(Gr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=L.useCallback((o,a)=>{r.mutate(o,a).catch(gi)},[r]);if(s.error&&MQ(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function hT(t){const e=bbe({...t,queryKeyHashFn:K0e});return e.queryKey=t.queryKey,e}function fT(t={}){const e=Ua(t);return L.useSyncExternalStore(n=>Dwe(e,{onChange:n}),()=>d4(e),()=>d4(e))}function vbe(t={}){const e=Ua(t);return L.useSyncExternalStore(n=>CQ(e,{onChange:n}),()=>h4(e),()=>h4(e))}function VQ(t={}){const{mutation:e}=t,n=Ua(t),r=Q0e(n),{mutate:s,mutateAsync:i,...o}=LM({...e,...r});return L.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:vbe({config:n})}}function Ebe(t={}){const e=Ua(t);return L.useSyncExternalStore(n=>_Q(e,{onChange:n}),()=>sc(e),()=>sc(e))}function KQ(t={}){const{mutation:e}=t,n=Ua(t),r=J0e(n),{mutate:s,mutateAsync:i,...o}=LM({...e,...r});return{...o,connectors:Ebe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function YQ(t={}){const{address:e,query:n={}}=t,r=Ua(t),s=fT({config:r}),i=Z0e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return hT({...n,...i,enabled:o})}function _be(t={}){const e=Ua(t);return DQ.useSyncExternalStoreWithSelector(n=>Lwe(e,{onChange:n}),()=>UD(e,t),()=>UD(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function I4(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Ua(t),a=fT({config:o}),c=nbe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return hT({...s,...c,enabled:l,structuralSharing:s.structuralSharing??V0e})}function QQ(t={}){const{query:e={},...n}=t,r=Ua(n),s=$M(),{address:i,connector:o,status:a}=v1({config:r}),c=fT({config:r}),l=t.connector??o,{queryKey:u,...d}=ebe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=L.useRef(i);return L.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),hT({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function FP(t={}){const{hash:e,query:n={}}=t,r=Ua(t),s=fT({config:r}),i=sbe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return hT({...n,...i,enabled:o})}function zP(t={}){const{mutation:e}=t,n=Ua(t),r=obe(n),{mutate:s,mutateAsync:i,...o}=LM({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const Cbe="_verified_lvyh0_1",MM={verified:Cbe},Abe=()=>w.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:MM.verified,children:w.jsx("g",{children:w.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Sbe=()=>w.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:MM.verified,children:w.jsxs("g",{children:[w.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[w.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),w.jsx("stop",{offset:".539",stopColor:"#cd8105"}),w.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),w.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),w.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),w.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[w.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),w.jsx("stop",{offset:".406",stopColor:"#e2b719"}),w.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),w.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[w.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),w.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),w.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),xbe=()=>w.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:MM.verified,children:w.jsx("g",{children:w.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function JQ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=JQ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nf(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=JQ(t))&&(r&&(r+=" "),r+=e);return r}const Ibe="_root_98iqw_1",Nbe="_article_98iqw_21",N4={root:Ibe,article:Nbe},UM=({className:t,children:e})=>w.jsx("div",{className:nf("react-tweet-theme",N4.root,t),children:w.jsx("article",{className:N4.article,children:e})}),ZQ=t=>w.jsx("img",{...t}),Tbe="_header_nqq4j_1",Rbe="_avatar_nqq4j_11",Pbe="_avatarOverflow_nqq4j_16",kbe="_avatarSquare_nqq4j_23",Obe="_avatarShadow_nqq4j_26",Dbe="_author_nqq4j_37",$be="_authorLink_nqq4j_44",Lbe="_authorVerified_nqq4j_53",Mbe="_authorLinkText_nqq4j_56",Ube="_authorMeta_nqq4j_63",Bbe="_authorFollow_nqq4j_66",jbe="_username_nqq4j_69",Fbe="_follow_nqq4j_74",zbe="_separator_nqq4j_82",Wbe="_brand_nqq4j_86",Hbe="_twitterIcon_nqq4j_90",vs={header:Tbe,avatar:Rbe,avatarOverflow:Pbe,avatarSquare:kbe,avatarShadow:Obe,author:Dbe,authorLink:$be,authorVerified:Lbe,authorLinkText:Mbe,authorMeta:Ube,authorFollow:Bbe,username:jbe,follow:Fbe,separator:zbe,brand:Wbe,twitterIcon:Hbe},qbe="_verifiedOld_lcna5_1",Gbe="_verifiedBlue_lcna5_4",Vbe="_verifiedGovernment_lcna5_7",WP={verifiedOld:qbe,verifiedBlue:Gbe,verifiedGovernment:Vbe},XQ=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=w.jsx(Abe,{}),s=WP.verifiedBlue;if(n)switch(t.is_blue_verified||(s=WP.verifiedOld),t.verified_type){case"Government":r=w.jsx(xbe,{}),s=WP.verifiedGovernment;break;case"Business":r=w.jsx(Sbe,{}),s=null;break}return n?w.jsx("div",{className:nf(e,s),children:r}):null},Kbe=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:ZQ,{user:s}=t;return w.jsxs("div",{className:vs.header,children:[w.jsxs("a",{href:t.url,className:vs.avatar,target:"_blank",rel:"noopener noreferrer",children:[w.jsx("div",{className:nf(vs.avatarOverflow,s.profile_image_shape==="Square"&&vs.avatarSquare),children:w.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),w.jsx("div",{className:vs.avatarOverflow,children:w.jsx("div",{className:vs.avatarShadow})})]}),w.jsxs("div",{className:vs.author,children:[w.jsxs("a",{href:t.url,className:vs.authorLink,target:"_blank",rel:"noopener noreferrer",children:[w.jsx("div",{className:vs.authorLinkText,children:w.jsx("span",{title:s.name,children:s.name})}),w.jsx(XQ,{user:s,className:vs.authorVerified})]}),w.jsxs("div",{className:vs.authorMeta,children:[w.jsx("a",{href:t.url,className:vs.username,target:"_blank",rel:"noopener noreferrer",children:w.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),w.jsxs("div",{className:vs.authorFollow,children:[w.jsx("span",{className:vs.separator,children:""}),w.jsx("a",{href:s.follow_url,className:vs.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),w.jsx("a",{href:t.url,className:vs.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:w.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:vs.twitterIcon,children:w.jsx("g",{children:w.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},Ybe="_root_1ec15_1",Qbe={root:Ybe},Jbe=({tweet:t})=>w.jsxs("a",{href:t.in_reply_to_url,className:Qbe.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),Zbe="_root_eihfa_1",Xbe={root:Zbe},eve=({href:t,children:e})=>w.jsx("a",{href:t,className:Xbe.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),tve="_root_1xq52_1",nve={root:tve},rve=({tweet:t})=>w.jsx("p",{className:nve.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return w.jsx(eve,{href:e.href,children:e.text},n);case"media":return;default:return w.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),T4=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,eJ=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,sve=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,ive=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,ove=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,ave=t=>`https://x.com/hashtag/${t.text}`,cve=t=>`https://x.com/search?q=%24${t.text}`,lve=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,tJ=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},uve=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},dve=t=>{const e=uve(t);return e.length>1?e[1]:e[0]},t3=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function R4(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return pv(n,"hashtag",t.entities.hashtags),pv(n,"mention",t.entities.user_mentions),pv(n,"url",t.entities.urls),pv(n,"symbol",t.entities.symbols),t.entities.media&&pv(n,"media",t.entities.media),hve(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:ave(r),text:s});case"mention":return Object.assign(r,{href:eJ(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:cve(r),text:s});default:return Object.assign(r,{text:s})}})}function pv(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function hve(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const fve=t=>({...t,url:T4(t),user:{...t.user,url:eJ(t),follow_url:ove(t)},like_url:sve(t),reply_url:ive(t),in_reply_to_url:t.in_reply_to_screen_name?lve(t):void 0,entities:R4(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:T4(t.quoted_tweet),entities:R4(t.quoted_tweet)}:void 0}),pve="_root_g9tkv_1",gve="_rounded_g9tkv_6",mve="_mediaWrapper_g9tkv_10",yve="_grid2Columns_g9tkv_17",wve="_grid3_g9tkv_20",bve="_grid2x2_g9tkv_23",vve="_mediaContainer_g9tkv_26",Eve="_mediaLink_g9tkv_34",_ve="_skeleton_g9tkv_38",Cve="_image_g9tkv_43",So={root:pve,rounded:gve,mediaWrapper:mve,grid2Columns:yve,grid3:wve,grid2x2:bve,mediaContainer:vve,mediaLink:Eve,skeleton:_ve,image:Cve},Ave="_anchor_fp31d_1",Sve="_videoButton_fp31d_17",xve="_videoButtonIcon_fp31d_35",Ive="_watchOnTwitter_fp31d_44",Nve="_viewReplies_fp31d_60",Um={anchor:Ave,videoButton:Sve,videoButtonIcon:xve,watchOnTwitter:Ive,viewReplies:Nve},Tve=({tweet:t,media:e})=>{const[n,r]=L.useState(!0),[s,i]=L.useState(!1),[o,a]=L.useState(!1),c=dve(e);let l=0;return w.jsxs(w.Fragment,{children:[w.jsx("video",{className:So.image,poster:tJ(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:w.jsx("source",{src:c.url,type:c.content_type})}),n&&w.jsx("button",{type:"button",className:Um.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:w.jsx("svg",{viewBox:"0 0 24 24",className:Um.videoButtonIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&w.jsx("div",{className:Um.watchOnTwitter,children:w.jsx("a",{href:t.url,className:Um.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&w.jsx("a",{href:t.url,className:nf(Um.anchor,Um.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Rve=t=>w.jsx("img",{...t}),P4=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},nJ=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Rve;return w.jsx("div",{className:nf(So.root,!n&&So.rounded),children:w.jsx("div",{className:nf(So.mediaWrapper,o>1&&So.grid2Columns,o===3&&So.grid3,o>4&&So.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>w.jsx(L.Fragment,{children:l.type==="photo"?w.jsxs("a",{href:t.url,className:nf(So.mediaContainer,So.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[w.jsx("div",{className:So.skeleton,style:P4(l,o)}),w.jsx(c,{src:tJ(l,"small"),alt:l.ext_alt_text||"Image",className:So.image,draggable:!0})]},l.media_url_https):w.jsxs("div",{className:So.mediaContainer,children:[w.jsx("div",{className:So.skeleton,style:P4(l,o)}),w.jsx(Tve,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Pve={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},kve=new Intl.DateTimeFormat("en-US",Pve),Ove=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Dve=t=>{const e=Ove(kve.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},$ve="_root_i24yn_1",Lve={root:$ve},Mve=({tweet:t})=>{const e=new Date(t.created_at),n=Dve(e);return w.jsx("a",{className:Lve.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:w.jsx("time",{dateTime:e.toISOString(),children:n})})},Uve="_info_19qcj_1",Bve="_infoLink_19qcj_10",jve="_infoIcon_19qcj_30",HP={info:Uve,infoLink:Bve,infoIcon:jve},Fve=({tweet:t})=>w.jsxs("div",{className:HP.info,children:[w.jsx(Mve,{tweet:t}),w.jsx("a",{className:HP.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:w.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:HP.infoIcon,children:w.jsx("g",{children:w.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),zve="_actions_n2anf_1",Wve="_like_n2anf_13",Hve="_reply_n2anf_14",qve="_copy_n2anf_15",Gve="_likeIconWrapper_n2anf_27",Vve="_likeCount_n2anf_30",Kve="_replyIconWrapper_n2anf_35",Yve="_copyIconWrapper_n2anf_36",Qve="_likeIcon_n2anf_27",Jve="_replyIcon_n2anf_35",Zve="_copyIcon_n2anf_36",Xve="_replyText_n2anf_56",eEe="_copyText_n2anf_57",Yi={actions:zve,like:Wve,reply:Hve,copy:qve,likeIconWrapper:Gve,likeCount:Vve,replyIconWrapper:Kve,copyIconWrapper:Yve,likeIcon:Qve,replyIcon:Jve,copyIcon:Zve,replyText:Xve,copyText:eEe},tEe=({tweet:t})=>{const[e,n]=L.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return L.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),w.jsxs("button",{type:"button",className:Yi.copy,"aria-label":"Copy link",onClick:r,children:[w.jsx("div",{className:Yi.copyIconWrapper,children:e?w.jsx("svg",{viewBox:"0 0 24 24",className:Yi.copyIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):w.jsx("svg",{viewBox:"0 0 24 24",className:Yi.copyIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),w.jsx("span",{className:Yi.copyText,children:e?"Copied!":"Copy link"})]})},nEe=({tweet:t})=>{const e=t3(t.favorite_count);return w.jsxs("div",{className:Yi.actions,children:[w.jsxs("a",{className:Yi.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[w.jsx("div",{className:Yi.likeIconWrapper,children:w.jsx("svg",{viewBox:"0 0 24 24",className:Yi.likeIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),w.jsx("span",{className:Yi.likeCount,children:e})]}),w.jsxs("a",{className:Yi.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[w.jsx("div",{className:Yi.replyIconWrapper,children:w.jsx("svg",{viewBox:"0 0 24 24",className:Yi.replyIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),w.jsx("span",{className:Yi.replyText,children:"Reply"})]}),w.jsx(tEe,{tweet:t})]})},rEe="_replies_1cutb_1",sEe="_link_1cutb_4",iEe="_text_1cutb_23",qP={replies:rEe,link:sEe,text:iEe},oEe=({tweet:t})=>w.jsx("div",{className:qP.replies,children:w.jsx("a",{className:qP.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:w.jsx("span",{className:qP.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${t3(t.conversation_count)} reply`:`Read ${t3(t.conversation_count)} replies`})})}),aEe="_root_q5799_1",cEe="_article_q5799_16",k4={root:aEe,article:cEe},lEe=({tweet:t,children:e})=>w.jsx("div",{className:k4.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:w.jsx("article",{className:k4.article,children:e})}),uEe="_header_r31i5_1",dEe="_avatar_r31i5_11",hEe="_avatarSquare_r31i5_17",fEe="_author_r31i5_21",pEe="_authorText_r31i5_26",gEe="_username_r31i5_33",Ff={header:uEe,avatar:dEe,avatarSquare:hEe,author:fEe,authorText:pEe,username:gEe},mEe=({tweet:t})=>{const{user:e}=t;return w.jsxs("div",{className:Ff.header,children:[w.jsx("a",{href:t.url,className:Ff.avatar,target:"_blank",rel:"noopener noreferrer",children:w.jsx("div",{className:nf(Ff.avatarOverflow,e.profile_image_shape==="Square"&&Ff.avatarSquare),children:w.jsx(ZQ,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),w.jsxs("div",{className:Ff.author,children:[w.jsx("div",{className:Ff.authorText,children:w.jsx("span",{title:e.name,children:e.name})}),w.jsx(XQ,{user:e}),w.jsx("div",{className:Ff.username,children:w.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},yEe="_root_175ot_1",wEe={root:yEe},bEe=({tweet:t})=>w.jsx("p",{className:wEe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>w.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),vEe=({tweet:t})=>{var e;return w.jsxs(lEe,{tweet:t,children:[w.jsx(mEe,{tweet:t}),w.jsx(bEe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?w.jsx(nJ,{quoted:!0,tweet:t}):null]})},EEe=({tweet:t,components:e})=>{var n;const r=L.useMemo(()=>fve(t),[t]);return w.jsxs(UM,{children:[w.jsx(Kbe,{tweet:r,components:e}),r.in_reply_to_status_id_str&&w.jsx(Jbe,{tweet:r}),w.jsx(rve,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?w.jsx(nJ,{tweet:r,components:e}):null,r.quoted_tweet&&w.jsx(vEe,{tweet:r.quoted_tweet}),w.jsx(Fve,{tweet:r}),w.jsx(nEe,{tweet:r}),w.jsx(oEe,{tweet:r})]})},_Ee="_root_16yxa_1",CEe={root:_Ee},AEe=t=>w.jsx(UM,{children:w.jsxs("div",{className:CEe.root,children:[w.jsx("h3",{children:"Tweet not found"}),w.jsx("p",{children:"The embedded tweet could not be found"})]})}),SEe="_skeleton_oi7hr_1",xEe={skeleton:SEe},OA=({style:t})=>w.jsx("span",{className:xEe.skeleton,style:t}),IEe="_root_17qqv_1",NEe={root:IEe},TEe=()=>w.jsxs(UM,{className:NEe.root,children:[w.jsx(OA,{style:{height:"3rem",marginBottom:"0.75rem"}}),w.jsx(OA,{style:{height:"6rem",margin:"0.5rem 0"}}),w.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),w.jsx(OA,{style:{height:"2rem"}}),w.jsx(OA,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),rJ=0,sJ=1,iJ=2,O4=3;var D4=Object.prototype.hasOwnProperty;function n3(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&n3(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(D4.call(t,n)&&++r&&!D4.call(e,n)||!(n in e)||!n3(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Mu=new WeakMap,$h=()=>{},yi=$h(),r3=Object,Zt=t=>t===yi,_l=t=>typeof t=="function",wf=(t,e)=>({...t,...e}),oJ=t=>_l(t.then),GP={},DA={},BM="undefined",E1=typeof window!=BM,s3=typeof document!=BM,REe=E1&&"Deno"in window,PEe=()=>E1&&typeof window.requestAnimationFrame!=BM,aJ=(t,e)=>{const n=Mu.get(t);return[()=>!Zt(e)&&t.get(e)||GP,r=>{if(!Zt(e)){const s=t.get(e);e in DA||(DA[e]=s),n[5](e,wf(s,r),s||GP)}},n[6],()=>!Zt(e)&&e in DA?DA[e]:!Zt(e)&&t.get(e)||GP]};let i3=!0;const kEe=()=>i3,[o3,a3]=E1&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[$h,$h],OEe=()=>{const t=s3&&document.visibilityState;return Zt(t)||t!=="hidden"},DEe=t=>(s3&&document.addEventListener("visibilitychange",t),o3("focus",t),()=>{s3&&document.removeEventListener("visibilitychange",t),a3("focus",t)}),$Ee=t=>{const e=()=>{i3=!0,t()},n=()=>{i3=!1};return o3("online",e),o3("offline",n),()=>{a3("online",e),a3("offline",n)}},LEe={isOnline:kEe,isVisible:OEe},MEe={initFocus:DEe,initReconnect:$Ee},$4=!Wo.useId,F_=!E1||REe,UEe=t=>PEe()?window.requestAnimationFrame(t):setTimeout(t,1),VP=F_?L.useEffect:L.useLayoutEffect,KP=typeof navigator<"u"&&navigator.connection,L4=!F_&&KP&&(["slow-2g","2g"].includes(KP.effectiveType)||KP.saveData),$A=new WeakMap,BEe=t=>r3.prototype.toString.call(t),YP=(t,e)=>t===`[object ${e}]`;let jEe=0;const c3=t=>{const e=typeof t,n=BEe(t),r=YP(n,"Date"),s=YP(n,"RegExp"),i=YP(n,"Object");let o,a;if(r3(t)===t&&!r&&!s){if(o=$A.get(t),o)return o;if(o=++jEe+"~",$A.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=c3(t[a])+",";$A.set(t,o)}if(i){o="#";const c=r3.keys(t).sort();for(;!Zt(a=c.pop());)Zt(t[a])||(o+=a+":"+c3(t[a])+",");$A.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},jM=t=>{if(_l(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?c3(t):"",[t,e]};let FEe=0;const l3=()=>++FEe;async function cJ(...t){const[e,n,r,s]=t,i=wf({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(_l(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=jM(h);if(!f)return;const[p,g]=aJ(e,f),[y,m,b,v]=Mu.get(e),C=()=>{const j=y[f];return(_l(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],j&&j[0])?j[0](iJ).then(()=>p().data):p().data};if(t.length<3)return C();let A=r,S,x=!1;const R=l3();m[f]=[R,0];const I=!Zt(c),O=p(),P=O.data,B=O._c,H=Zt(B)?P:B;if(I&&(c=_l(c)?c(H,P):c,g({data:c,_c:H})),_l(A))try{A=A(H)}catch(j){S=j,x=!0}if(A&&oJ(A))if(A=await A.catch(j=>{S=j,x=!0}),R!==m[f][0]){if(x)throw S;return A}else x&&I&&l(S)&&(o=!0,g({data:H,_c:yi}));if(o&&!x)if(_l(o)){const j=o(A,H);g({data:j,error:yi,_c:yi})}else g({data:A,error:yi,_c:yi});if(m[f][1]=l3(),Promise.resolve(C()).then(()=>{g({_c:yi})}),x){if(u)throw S;return}return A}}const M4=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},zEe=(t,e)=>{if(!Mu.has(t)){const n=wf(MEe,e),r=Object.create(null),s=cJ.bind(yi,t);let i=$h;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Mu.has(t)&&(Mu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!F_)){const u=n.initFocus(setTimeout.bind(yi,M4.bind(yi,r,rJ))),d=n.initReconnect(setTimeout.bind(yi,M4.bind(yi,r,sJ)));i=()=>{u&&u(),d&&d(),Mu.delete(t)}}};return l(),[t,s,l,i]}return[t,Mu.get(t)[4]]},WEe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Zt(i)&&o>i||setTimeout(r,a,s)},HEe=n3,[lJ,qEe]=zEe(new Map),GEe=wf({onLoadingSlow:$h,onSuccess:$h,onError:$h,onErrorRetry:WEe,onDiscarded:$h,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:L4?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:L4?5e3:3e3,compare:HEe,isPaused:()=>!1,cache:lJ,mutate:qEe,fallback:{}},LEe),VEe=(t,e)=>{const n=wf(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=wf(s,o))}return n},KEe=L.createContext({}),YEe="$inf$",uJ=E1&&window.__SWR_DEVTOOLS_USE__,QEe=uJ?window.__SWR_DEVTOOLS_USE__:[],JEe=()=>{uJ&&(window.__SWR_DEVTOOLS_REACT__=Wo)},ZEe=t=>_l(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],XEe=()=>wf(GEe,L.useContext(KEe)),e_e=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=jM(e),[,,,a]=Mu.get(lJ);if(o.startsWith(YEe))return n(...i);const c=a[o];return Zt(c)?n(...i):(delete a[o],c)}),r),t_e=QEe.concat(e_e),n_e=t=>function(...n){const r=XEe(),[s,i,o]=ZEe(n),a=VEe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(t_e);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},r_e=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};JEe();const QP=Wo.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),JP={dedupe:!0},s_e=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=Mu.get(r),[m,b]=jM(t),v=L.useRef(!1),C=L.useRef(!1),A=L.useRef(m),S=L.useRef(e),x=L.useRef(n),R=()=>x.current,I=()=>R().isVisible()&&R().isOnline(),[O,P,B,H]=aJ(r,m),j=L.useRef({}).current,T=Zt(o)?Zt(n.fallback)?yi:n.fallback[m]:o,N=(de,_e)=>{for(const Ye in j){const rt=Ye;if(rt==="data"){if(!s(de[rt],_e[rt])&&(!Zt(de[rt])||!s(le,_e[rt])))return!1}else if(_e[rt]!==de[rt])return!1}return!0},M=L.useMemo(()=>{const de=!m||!e?!1:Zt(a)?R().isPaused()||i?!1:c!==!1:a,_e=en=>{const nr=wf(en);return delete nr._k,de?{isValidating:!0,isLoading:!0,...nr}:nr},Ye=O(),rt=H(),un=_e(Ye),An=Ye===rt?un:_e(rt);let wn=un;return[()=>{const en=_e(O());return N(en,wn)?(wn.data=en.data,wn.isLoading=en.isLoading,wn.isValidating=en.isValidating,wn.error=en.error,wn):(wn=en,en)},()=>An]},[r,m]),k=OQ.useSyncExternalStore(L.useCallback(de=>B(m,(_e,Ye)=>{N(Ye,_e)||de()}),[r,m]),M[0],M[1]),D=!v.current,U=f[m]&&f[m].length>0,q=k.data,X=Zt(q)?T&&oJ(T)?QP(T):T:q,ae=k.error,oe=L.useRef(X),le=h?Zt(q)?Zt(oe.current)?X:oe.current:q:X,Ee=U&&!Zt(ae)?!1:D&&!Zt(a)?a:R().isPaused()?!1:i?Zt(X)?!1:c:Zt(X)||c,Z=!!(m&&e&&D&&Ee),ce=Zt(k.isValidating)?Z:k.isValidating,fe=Zt(k.isLoading)?Z:k.isLoading,ne=L.useCallback(async de=>{const _e=S.current;if(!m||!_e||C.current||R().isPaused())return!1;let Ye,rt,un=!0;const An=de||{},wn=!g[m]||!An.dedupe,en=()=>$4?!C.current&&m===A.current&&v.current:m===A.current,nr={isValidating:!1,isLoading:!1},mr=()=>{P(nr)},zs=()=>{const es=g[m];es&&es[1]===rt&&delete g[m]},vo={isValidating:!0};Zt(O().data)&&(vo.isLoading=!0);try{if(wn&&(P(vo),n.loadingTimeout&&Zt(O().data)&&setTimeout(()=>{un&&en()&&R().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[_e(b),l3()]),[Ye,rt]=g[m],Ye=await Ye,wn&&setTimeout(zs,n.dedupingInterval),!g[m]||g[m][1]!==rt)return wn&&en()&&R().onDiscarded(m),!1;nr.error=yi;const es=p[m];if(!Zt(es)&&(rt<=es[0]||rt<=es[1]||es[1]===0))return mr(),wn&&en()&&R().onDiscarded(m),!1;const oi=O().data;nr.data=s(oi,Ye)?oi:Ye,wn&&en()&&R().onSuccess(Ye,m,n)}catch(es){zs();const oi=R(),{shouldRetryOnError:Ws}=oi;oi.isPaused()||(nr.error=es,wn&&en()&&(oi.onError(es,m,oi),(Ws===!0||_l(Ws)&&Ws(es))&&(!R().revalidateOnFocus||!R().revalidateOnReconnect||I())&&oi.onErrorRetry(es,m,oi,Lf=>{const Wa=f[m];Wa&&Wa[0]&&Wa[0](O4,Lf)},{retryCount:(An.retryCount||0)+1,dedupe:!0})))}return un=!1,mr(),!0},[m,r]),ye=L.useCallback((...de)=>cJ(r,A.current,...de),[]);if(VP(()=>{S.current=e,x.current=n,Zt(q)||(oe.current=q)}),VP(()=>{if(!m)return;const de=ne.bind(yi,JP);let _e=0;R().revalidateOnFocus&&(_e=Date.now()+R().focusThrottleInterval);const rt=r_e(m,f,(un,An={})=>{if(un==rJ){const wn=Date.now();R().revalidateOnFocus&&wn>_e&&I()&&(_e=wn+R().focusThrottleInterval,de())}else if(un==sJ)R().revalidateOnReconnect&&I()&&de();else{if(un==iJ)return ne();if(un==O4)return ne(An)}});return C.current=!1,A.current=m,v.current=!0,P({_k:b}),Ee&&(g[m]||(Zt(X)||F_?de():UEe(de))),()=>{C.current=!0,rt()}},[m]),VP(()=>{let de;function _e(){const rt=_l(l)?l(O().data):l;rt&&de!==-1&&(de=setTimeout(Ye,rt))}function Ye(){!O().error&&(u||R().isVisible())&&(d||R().isOnline())?ne(JP).then(_e):_e()}return _e(),()=>{de&&(clearTimeout(de),de=-1)}},[l,u,d,m]),L.useDebugValue(le),i&&Zt(X)&&m){if(!$4&&F_)throw new Error("Fallback data is required when using Suspense in SSR.");S.current=e,x.current=n,C.current=!1;const de=y[m];if(!Zt(de)){const _e=ye(de);QP(_e)}if(Zt(ae)){const _e=ne(JP);Zt(le)||(_e.status="fulfilled",_e.value=!0),QP(_e)}else throw ae}return{mutate:ye,get data(){return j.data=!0,le},get error(){return j.error=!0,ae},get isValidating(){return j.isValidating=!0,ce},get isLoading(){return j.isLoading=!0,fe}}},U4=n_e(s_e);class i_e extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const o_e=U4.default||U4,a_e="https://react-tweet.vercel.app";async function c_e([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new i_e({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const l_e=(t,e,n)=>{const{isLoading:r,data:s,error:i}=o_e(()=>e||t?[e||t&&`${a_e}/api/tweet/${t}`,n]:null,c_e,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},u_e=({id:t,apiUrl:e,fallback:n=w.jsx(TEe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=l_e(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||AEe;return w.jsx(l,{error:i?i(a):a})}return w.jsx(EEe,{tweet:o,components:r})};var pT={exports:{}},dJ={},hJ={exports:{}},d_e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",h_e=d_e,f_e=h_e;function fJ(){}function pJ(){}pJ.resetWarningCache=fJ;var p_e=function(){function t(r,s,i,o,a,c){if(c!==f_e){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:pJ,resetWarningCache:fJ};return n.PropTypes=n,n};hJ.exports=p_e();var gJ=hJ.exports,u3={exports:{}};function mJ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=mJ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function B4(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=mJ(t))&&(r&&(r+=" "),r+=e);return r}u3.exports=B4,u3.exports.clsx=B4;var g_e=u3.exports,Ir={},Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.dontSetMe=v_e;Gl.findInArray=m_e;Gl.int=b_e;Gl.isFunction=y_e;Gl.isNum=w_e;function m_e(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function y_e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function w_e(t){return typeof t=="number"&&!isNaN(t)}function b_e(t){return parseInt(t,10)}function v_e(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var fm={};Object.defineProperty(fm,"__esModule",{value:!0});fm.browserPrefixToKey=wJ;fm.browserPrefixToStyle=E_e;fm.default=void 0;fm.getPrefix=yJ;const ZP=["Moz","Webkit","O","ms"];function yJ(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<ZP.length;s++)if(wJ(t,ZP[s])in e)return ZP[s];return""}function wJ(t,e){return e?`${e}${__e(t)}`:t}function E_e(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function __e(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}fm.default=yJ();Object.defineProperty(Ir,"__esModule",{value:!0});Ir.addClassName=EJ;Ir.addEvent=A_e;Ir.addUserSelectStyles=$_e;Ir.createCSSTransform=P_e;Ir.createSVGTransform=k_e;Ir.getTouch=O_e;Ir.getTouchIdentifier=D_e;Ir.getTranslation=FM;Ir.innerHeight=N_e;Ir.innerWidth=T_e;Ir.matchesSelector=vJ;Ir.matchesSelectorAndParentsTo=C_e;Ir.offsetXYFromParent=R_e;Ir.outerHeight=x_e;Ir.outerWidth=I_e;Ir.removeClassName=_J;Ir.removeEvent=S_e;Ir.scheduleRemoveUserSelectStyles=L_e;var Go=Gl,j4=bJ(fm);function bJ(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(bJ=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let LA="";function vJ(t,e){return LA||(LA=(0,Go.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Go.isFunction)(t[n])})),(0,Go.isFunction)(t[LA])?t[LA](e):!1}function C_e(t,e,n){let r=t;do{if(vJ(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function A_e(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function S_e(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function x_e(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Go.int)(n.borderTopWidth),e+=(0,Go.int)(n.borderBottomWidth),e}function I_e(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Go.int)(n.borderLeftWidth),e+=(0,Go.int)(n.borderRightWidth),e}function N_e(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Go.int)(n.paddingTop),e-=(0,Go.int)(n.paddingBottom),e}function T_e(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Go.int)(n.paddingLeft),e-=(0,Go.int)(n.paddingRight),e}function R_e(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function P_e(t,e){const n=FM(t,e,"px");return{[(0,j4.browserPrefixToKey)("transform",j4.default)]:n}}function k_e(t,e){return FM(t,e,"")}function FM(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function O_e(t,e){return t.targetTouches&&(0,Go.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Go.findInArray)(t.changedTouches,n=>e===n.identifier)}function D_e(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function $_e(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&EJ(t.body,"react-draggable-transparent-selection")}function L_e(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{F4(t)}):F4(t)}function F4(t){if(t)try{if(t.body&&_J(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function EJ(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function _J(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.canDragX=B_e;Vl.canDragY=j_e;Vl.createCoreData=z_e;Vl.createDraggableData=W_e;Vl.getBoundPosition=M_e;Vl.getControlPosition=F_e;Vl.snapToGrid=U_e;var xo=Gl,zy=Ir;function M_e(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:H_e(r);const s=zM(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,xo.int)(u.paddingLeft)+(0,xo.int)(l.marginLeft),top:-s.offsetTop+(0,xo.int)(u.paddingTop)+(0,xo.int)(l.marginTop),right:(0,zy.innerWidth)(c)-(0,zy.outerWidth)(s)-s.offsetLeft+(0,xo.int)(u.paddingRight)-(0,xo.int)(l.marginRight),bottom:(0,zy.innerHeight)(c)-(0,zy.outerHeight)(s)-s.offsetTop+(0,xo.int)(u.paddingBottom)-(0,xo.int)(l.marginBottom)}}return(0,xo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,xo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,xo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,xo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function U_e(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function B_e(t){return t.props.axis==="both"||t.props.axis==="x"}function j_e(t){return t.props.axis==="both"||t.props.axis==="y"}function F_e(t,e,n){const r=typeof e=="number"?(0,zy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=zM(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,zy.offsetXYFromParent)(r||t,i,n.props.scale)}function z_e(t,e,n){const r=!(0,xo.isNum)(t.lastX),s=zM(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function W_e(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function H_e(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function zM(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var gT={},mT={};Object.defineProperty(mT,"__esModule",{value:!0});mT.default=q_e;function q_e(){}Object.defineProperty(gT,"__esModule",{value:!0});gT.default=void 0;var XP=CJ(L),ai=WM(gJ),G_e=WM(q5),Gs=Ir,Ad=Vl,ek=Gl,gv=WM(mT);function WM(t){return t&&t.__esModule?t:{default:t}}function CJ(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(CJ=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function li(t,e,n){return(e=V_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V_e(t){var e=K_e(t,"string");return typeof e=="symbol"?e:e+""}function K_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Za={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Sd=Za.mouse,yT=class extends XP.Component{constructor(){super(...arguments),li(this,"dragging",!1),li(this,"lastX",NaN),li(this,"lastY",NaN),li(this,"touchIdentifier",null),li(this,"mounted",!1),li(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Gs.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Gs.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,Gs.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Ad.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Ad.createCoreData)(this,o,a);(0,gv.default)("DraggableCore: handleDragStart: %j",c),(0,gv.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Gs.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Gs.addEvent)(r,Sd.move,this.handleDrag),(0,Gs.addEvent)(r,Sd.stop,this.handleDragStop))}),li(this,"handleDrag",e=>{const n=(0,Ad.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Ad.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Ad.createCoreData)(this,r,s);if((0,gv.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),li(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Ad.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Ad.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Ad.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Gs.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,gv.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,gv.default)("DraggableCore: Removing handlers"),(0,Gs.removeEvent)(a.ownerDocument,Sd.move,this.handleDrag),(0,Gs.removeEvent)(a.ownerDocument,Sd.stop,this.handleDragStop))}),li(this,"onMouseDown",e=>(Sd=Za.mouse,this.handleDragStart(e))),li(this,"onMouseUp",e=>(Sd=Za.mouse,this.handleDragStop(e))),li(this,"onTouchStart",e=>(Sd=Za.touch,this.handleDragStart(e))),li(this,"onTouchEnd",e=>(Sd=Za.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Gs.addEvent)(e,Za.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Gs.removeEvent)(n,Za.mouse.move,this.handleDrag),(0,Gs.removeEvent)(n,Za.touch.move,this.handleDrag),(0,Gs.removeEvent)(n,Za.mouse.stop,this.handleDragStop),(0,Gs.removeEvent)(n,Za.touch.stop,this.handleDragStop),(0,Gs.removeEvent)(e,Za.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Gs.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:G_e.default.findDOMNode(this)}render(){return XP.cloneElement(XP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};gT.default=yT;li(yT,"displayName","DraggableCore");li(yT,"propTypes",{allowAnyClick:ai.default.bool,allowMobileScroll:ai.default.bool,children:ai.default.node.isRequired,disabled:ai.default.bool,enableUserSelectHack:ai.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:ai.default.arrayOf(ai.default.number),handle:ai.default.string,cancel:ai.default.string,nodeRef:ai.default.object,onStart:ai.default.func,onDrag:ai.default.func,onStop:ai.default.func,onMouseDown:ai.default.func,scale:ai.default.number,className:ek.dontSetMe,style:ek.dontSetMe,transform:ek.dontSetMe});li(yT,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(L),n=u(gJ),r=u(q5),s=g_e,i=Ir,o=Vl,a=Gl,c=u(gT),l=u(mT);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,b){if(typeof WeakMap=="function")var v=new WeakMap,C=new WeakMap;return(d=function(A,S){if(!S&&A&&A.__esModule)return A;var x,R,I={__proto__:null,default:A};if(A===null||typeof A!="object"&&typeof A!="function")return I;if(x=S?C:v){if(x.has(A))return x.get(A);x.set(A,I)}for(const O in A)O!=="default"&&{}.hasOwnProperty.call(A,O)&&((R=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(A,O))&&(R.get||R.set)?x(I,O,R):I[O]=A[O]);return I})(m,b)}function h(){return h=Object.assign?Object.assign.bind():function(m){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var C in v)({}).hasOwnProperty.call(v,C)&&(m[C]=v[C])}return m},h.apply(null,arguments)}function f(m,b,v){return(b=p(b))in m?Object.defineProperty(m,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[b]=v,m}function p(m){var b=g(m,"string");return typeof b=="symbol"?b:b+""}function g(m,b){if(typeof m!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var C=v.call(m,b);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(m)}class y extends e.Component{static getDerivedStateFromProps(b,v){let{position:C}=b,{prevPropsPosition:A}=v;return C&&(!A||C.x!==A.x||C.y!==A.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:C,prevPropsPosition:A}),{x:C.x,y:C.y,prevPropsPosition:{...C}}):null}constructor(b){super(b),f(this,"onDragStart",(v,C)=>{if((0,l.default)("Draggable: onDragStart: %j",C),this.props.onStart(v,(0,o.createDraggableData)(this,C))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,C)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",C);const A=(0,o.createDraggableData)(this,C),S={x:A.x,y:A.y,slackX:0,slackY:0};if(this.props.bounds){const{x:R,y:I}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[O,P]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=O,S.y=P,S.slackX=this.state.slackX+(R-S.x),S.slackY=this.state.slackY+(I-S.y),A.x=S.x,A.y=S.y,A.deltaX=S.x-this.state.x,A.deltaY=S.y-this.state.y}if(this.props.onDrag(v,A)===!1)return!1;this.setState(S)}),f(this,"onDragStop",(v,C)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,C))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",C);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:R,y:I}=this.props.position;S.x=R,S.y=I}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:C,defaultPosition:A,defaultClassName:S,defaultClassNameDragging:x,defaultClassNameDragged:R,position:I,positionOffset:O,scale:P,...B}=this.props;let H={},j=null;const N=!!!I||this.state.dragging,M=I||A,k={x:(0,o.canDragX)(this)&&N?this.state.x:M.x,y:(0,o.canDragY)(this)&&N?this.state.y:M.y};this.state.isElementSVG?j=(0,i.createSVGTransform)(k,O):H=(0,i.createCSSTransform)(k,O);const D=(0,s.clsx)(C.props.className||"",S,{[x]:this.state.dragging,[R]:this.state.dragged});return e.createElement(c.default,h({},B,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(C),{className:D,style:{...C.props.style,...H},transform:j}))}}t.default=y,f(y,"displayName","Draggable"),f(y,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(dJ);const{default:AJ,DraggableCore:Y_e}=dJ;pT.exports=AJ;pT.exports.default=AJ;pT.exports.DraggableCore=Y_e;var Q_e=pT.exports;const _1=sm(Q_e);function fr(){return fr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fr.apply(null,arguments)}function SJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xJ={exports:{}},Cn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=typeof Symbol=="function"&&Symbol.for,HM=bs?Symbol.for("react.element"):60103,qM=bs?Symbol.for("react.portal"):60106,wT=bs?Symbol.for("react.fragment"):60107,bT=bs?Symbol.for("react.strict_mode"):60108,vT=bs?Symbol.for("react.profiler"):60114,ET=bs?Symbol.for("react.provider"):60109,_T=bs?Symbol.for("react.context"):60110,GM=bs?Symbol.for("react.async_mode"):60111,CT=bs?Symbol.for("react.concurrent_mode"):60111,AT=bs?Symbol.for("react.forward_ref"):60112,ST=bs?Symbol.for("react.suspense"):60113,J_e=bs?Symbol.for("react.suspense_list"):60120,xT=bs?Symbol.for("react.memo"):60115,IT=bs?Symbol.for("react.lazy"):60116,Z_e=bs?Symbol.for("react.block"):60121,X_e=bs?Symbol.for("react.fundamental"):60117,eCe=bs?Symbol.for("react.responder"):60118,tCe=bs?Symbol.for("react.scope"):60119;function ea(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case HM:switch(t=t.type,t){case GM:case CT:case wT:case vT:case bT:case ST:return t;default:switch(t=t&&t.$$typeof,t){case _T:case AT:case IT:case xT:case ET:return t;default:return e}}case qM:return e}}}function IJ(t){return ea(t)===CT}Cn.AsyncMode=GM;Cn.ConcurrentMode=CT;Cn.ContextConsumer=_T;Cn.ContextProvider=ET;Cn.Element=HM;Cn.ForwardRef=AT;Cn.Fragment=wT;Cn.Lazy=IT;Cn.Memo=xT;Cn.Portal=qM;Cn.Profiler=vT;Cn.StrictMode=bT;Cn.Suspense=ST;Cn.isAsyncMode=function(t){return IJ(t)||ea(t)===GM};Cn.isConcurrentMode=IJ;Cn.isContextConsumer=function(t){return ea(t)===_T};Cn.isContextProvider=function(t){return ea(t)===ET};Cn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===HM};Cn.isForwardRef=function(t){return ea(t)===AT};Cn.isFragment=function(t){return ea(t)===wT};Cn.isLazy=function(t){return ea(t)===IT};Cn.isMemo=function(t){return ea(t)===xT};Cn.isPortal=function(t){return ea(t)===qM};Cn.isProfiler=function(t){return ea(t)===vT};Cn.isStrictMode=function(t){return ea(t)===bT};Cn.isSuspense=function(t){return ea(t)===ST};Cn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wT||t===CT||t===vT||t===bT||t===ST||t===J_e||typeof t=="object"&&t!==null&&(t.$$typeof===IT||t.$$typeof===xT||t.$$typeof===ET||t.$$typeof===_T||t.$$typeof===AT||t.$$typeof===X_e||t.$$typeof===eCe||t.$$typeof===tCe||t.$$typeof===Z_e)};Cn.typeOf=ea;xJ.exports=Cn;var nCe=xJ.exports,VM=nCe,rCe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},sCe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},iCe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},NJ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},KM={};KM[VM.ForwardRef]=iCe;KM[VM.Memo]=NJ;function z4(t){return VM.isMemo(t)?NJ:KM[t.$$typeof]||rCe}var oCe=Object.defineProperty,aCe=Object.getOwnPropertyNames,W4=Object.getOwnPropertySymbols,cCe=Object.getOwnPropertyDescriptor,lCe=Object.getPrototypeOf,H4=Object.prototype;function TJ(t,e,n){if(typeof e!="string"){if(H4){var r=lCe(e);r&&r!==H4&&TJ(t,r,n)}var s=aCe(e);W4&&(s=s.concat(W4(e)));for(var i=z4(t),o=z4(e),a=0;a<s.length;++a){var c=s[a];if(!sCe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=cCe(e,c);try{oCe(t,c,l)}catch{}}}}return t}var uCe=TJ;const dCe=sm(uCe);var RJ={};Object.defineProperty(RJ,"__esModule",{value:!0});RJ.default=hCe;function hCe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function MA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EI(){return EI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI.apply(this,arguments)}function fCe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function xd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pCe(t){var e=function(n){fCe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,MA(xd(xd(i)),"cachedTheme",void 0),MA(xd(xd(i)),"lastOuterTheme",void 0),MA(xd(xd(i)),"lastTheme",void 0),MA(xd(xd(i)),"renderProvider",function(l){var u=i.props.children;return Wo.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?EI({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Wo.createElement(t.Consumer,null,this.renderProvider):null},r}(Wo.Component);return e}function gCe(t){return function(n){var r=Wo.forwardRef(function(s,i){return Wo.createElement(t.Consumer,null,function(o){return Wo.createElement(n,EI({theme:o,ref:i},s))})});return dCe(r,n),r}}function mCe(t){var e=function(){var r=Wo.useContext(t);return r};return e}function yCe(t){return{context:t,withTheme:gCe(t),useTheme:mCe(t),ThemeProvider:pCe(t)}}var PJ=L.createContext();yCe(PJ);var q4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sb=(typeof window>"u"?"undefined":q4(window))==="object"&&(typeof document>"u"?"undefined":q4(document))==="object"&&document.nodeType===9;function z_(t){"@babel/helpers - typeof";return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z_(t)}function wCe(t,e){if(z_(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(z_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function bCe(t){var e=wCe(t,"string");return z_(e)=="symbol"?e:e+""}function vCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bCe(r.key),r)}}function YM(t,e,n){return e&&vCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function d3(t,e){return d3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},d3(t,e)}function kJ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,d3(t,e)}function G4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ECe={}.constructor;function h3(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(h3);if(t.constructor!==ECe)return t;var e={};for(var n in t)e[n]=h3(t[n]);return e}function NT(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=h3(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var V4=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},gg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=V4(e[r]," ");else n=V4(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function xb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function mv(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function W_(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=xb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=mv(f+":"+u+gg(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=mv(g+":"+u+gg(y)+";",o))}for(var m in e){var b=e[m];b!=null&&m!=="fallbacks"&&(r&&(r+=l),r+=mv(m+":"+u+gg(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),mv(""+t+u+"{"+r,o)+mv("}",o))}var _Ce=/([[\].#*$><+~=|^:(),"'`\s])/g,K4=typeof CSS<"u"&&CSS.escape,QM=function(t){return K4?K4(t):t.replace(_Ce,"\\$1")},OJ=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),f3=function(t){kJ(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(G4(G4(o)),l),o.selectorText="."+QM(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=gg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?fr({},s,{allowEmpty:!0}):s;return W_(this.selectorText,this.style,a)},YM(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(OJ),CCe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new f3(e,n,r)}},tk={indent:1,children:!0},ACe=/@([\w-]+)/,SCe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(ACe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new TT(fr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=tk);var s=xb(r),i=s.linebreak;if(r.indent==null&&(r.indent=tk.indent),r.children==null&&(r.children=tk.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),xCe=/@container|@media|@supports\s+/,ICe={onCreateRule:function(e,n,r){return xCe.test(e)?new SCe(e,n,r):null}},nk={indent:1,children:!0},NCe=/@keyframes\s+([\w-]+)/,p3=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(NCe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:QM(c(this,a)),this.rules=new TT(fr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],fr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=nk);var s=xb(r),i=s.linebreak;if(r.indent==null&&(r.indent=nk.indent),r.children==null&&(r.children=nk.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),TCe=/@keyframes\s+/,RCe=/\$([\w-]+)/g,g3=function(e,n){return typeof e=="string"?e.replace(RCe,function(r,s){return s in n?n[s]:r}):e},Y4=function(e,n,r){var s=e[n],i=g3(s,r);i!==s&&(e[n]=i)},PCe={onCreateRule:function(e,n,r){return typeof e=="string"&&TCe.test(e)?new p3(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&Y4(e,"animation-name",r.keyframes),"animation"in e&&Y4(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return g3(e,s.keyframes);case"animation-name":return g3(e,s.keyframes);default:return e}}},kCe=function(t){kJ(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?fr({},s,{allowEmpty:!0}):s;return W_(this.key,this.style,a)},e}(OJ),OCe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new kCe(e,n,r):null}},DCe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=xb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=W_(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return W_(this.at,this.style,r)},t}(),$Ce=/@font-face/,LCe={onCreateRule:function(e,n,r){return $Ce.test(e)?new DCe(e,n,r):null}},MCe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return W_(this.key,this.style,r)},t}(),UCe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new MCe(e,n,r):null}},BCe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),jCe={"@charset":!0,"@import":!0,"@namespace":!0},FCe={onCreateRule:function(e,n,r){return e in jCe?new BCe(e,n,r):null}},Q4=[CCe,ICe,PCe,OCe,LCe,UCe,FCe],zCe={process:!0},J4={force:!0,process:!0},TT=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=fr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+QM(this.classes[p]));var g=NT(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=fr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof f3?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof p3&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof f3?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof p3&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=zCe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,J4)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,J4)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=xb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),DJ=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=fr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new TT(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),WCe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),HCe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=SJ(s,["attached"]),a=xb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},YM(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),xE=new HCe,m3=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),y3="2f1acc6c3a606b082e5eef5e54414ffb";m3[y3]==null&&(m3[y3]=0);var Z4=m3[y3]++,X4=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+Z4+a+n:c+i.key+"-"+Z4+(a?"-"+a:"")+"-"+n};return r},$J=function(e){var n;return function(){return n||(n=e()),n}},qCe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},GCe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=gg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},VCe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},KCe=function(e,n){return e.selectorText=n,e.selectorText===n},LJ=$J(function(){return document.querySelector("head")});function YCe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function QCe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function JCe(t){for(var e=LJ(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function ZCe(t){var e=xE.registry;if(e.length>0){var n=YCe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=QCe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=JCe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function XCe(t,e){var n=e.insertionPoint,r=ZCe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}LJ().appendChild(t)}var e1e=$J(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),ej=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},tj=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},t1e=function(){var e=document.createElement("style");return e.textContent=`
`,e},n1e=function(){function t(n){this.getPropertyValue=qCe,this.setProperty=GCe,this.removeProperty=VCe,this.setSelector=KCe,this.hasInsertedRules=!1,this.cssRules=[],n&&xE.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||t1e(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=e1e();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){XCe(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=tj(i,s);if(a=ej(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=tj(i,s),d=ej(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof DJ&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),r1e=0,s1e=function(){function t(n){this.id=r1e++,this.version="10.10.0",this.plugins=new WCe,this.options={id:{minify:!1},createGenerateId:X4,Renderer:Sb?n1e:null,plugins:[]},this.generateId=X4({minify:!1});for(var r=0;r<Q4.length;r++)this.plugins.use(Q4[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=fr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=xE.index===0?0:xE.index+1);var a=new DJ(r,fr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),xE.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=fr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=NT(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),MJ=function(e){return new s1e(e)},nj=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},YM(t,[{key:"size",get:function(){return this.length}}]),t}(),JM=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function UJ(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=UJ(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */MJ();var BJ=Date.now(),rk="fnValues"+BJ,sk="fnStyle"+ ++BJ,i1e=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=NT(n,{},s);return i[sk]=r,i},onProcessStyle:function(n,r){if(rk in r||sk in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[rk]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[sk];a&&(o.style=a(n)||{});var c=o[rk];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function o1e(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var my;typeof self<"u"?my=self:typeof window<"u"?my=window:typeof global<"u"?my=global:typeof module<"u"?my=module:my=Function("return this")();var rj=o1e(my),sj=function(e){return e&&e[rj]&&e===e[rj]()},a1e=function(e){return{onCreateRule:function(r,s,i){if(!sj(s))return null;var o=s,a=NT(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!sj(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},c1e=/;\n/,l1e=function(e){for(var n={},r=e.split(c1e),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},u1e=function(e){typeof e.style=="string"&&(e.style=l1e(e.style))};function d1e(){return{onProcessRule:u1e}}var rf="@global",w3="@global ",h1e=function(){function t(n,r,s){this.type="global",this.at=rf,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new TT(fr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),f1e=function(){function t(n,r,s){this.type="global",this.at=rf,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(w3.length);this.rule=s.jss.createRule(i,r,fr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),p1e=/\s*,\s*/g;function jJ(t,e){for(var n=t.split(p1e),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function g1e(t,e){var n=t.options,r=t.style,s=r?r[rf]:null;if(s){for(var i in s)e.addRule(i,s[i],fr({},n,{selector:jJ(i,t.selector)}));delete r[rf]}}function m1e(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,rf.length)!==rf)){var i=jJ(s.substr(rf.length),t.selector);e.addRule(i,r[s],fr({},n,{selector:i})),delete r[s]}}function y1e(){function t(n,r,s){if(!n)return null;if(n===rf)return new h1e(n,r,s);if(n[0]==="@"&&n.substr(0,w3.length)===w3)return new f1e(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(g1e(n,r),m1e(n,r))}return{onCreateRule:t,onProcessRule:e}}var VS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},ik="extendCurrValue"+Date.now();function w1e(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Rp(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?fr({},t,{extend:l}):t.extend[c];Rp(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Rp(t.extend.extend,e,n,r);continue}if(VS(t.extend[d])){d in r||(r[d]={}),Rp(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function b1e(t,e,n,r){for(var s in t)if(s!=="extend"){if(VS(r[s])&&VS(t[s])){Rp(t[s],e,n,r[s]);continue}if(VS(t[s])){r[s]=Rp(t[s],e,n);continue}r[s]=t[s]}}function Rp(t,e,n,r){return r===void 0&&(r={}),w1e(t,e,n,r),b1e(t,e,n,r),r}function v1e(){function t(n,r,s){return"extend"in n?Rp(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[ik])s.prop(i,null);return s[ik]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[ik]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var ij=/\s*,\s*/g,E1e=/&/g,_1e=/\$([\w-]+)/g;function C1e(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(ij),a=s.split(ij),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(E1e,u):u+" "+h}return c}function n(s,i,o){if(o)return fr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=fr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(_1e,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],fr({},l,{selector:p})):c.addRule(g,s[d],fr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function b3(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=b3(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return b3(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function A1e(){function t(e,n){return"composes"in e&&(b3(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var S1e=/[A-Z]/g,x1e=/^ms-/,ok={};function I1e(t){return"-"+t.toLowerCase()}function FJ(t){if(ok.hasOwnProperty(t))return ok[t];var e=t.replace(S1e,I1e);return ok[t]=x1e.test(e)?"-"+e:e}function _I(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:FJ(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(_I):e.fallbacks=_I(t.fallbacks)),e}function N1e(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=_I(n[r]);return n}return _I(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=FJ(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ue=JM&&CSS?CSS.px:"px",UA=JM&&CSS?CSS.ms:"ms",Bm=JM&&CSS?CSS.percent:"%",T1e={"animation-delay":UA,"animation-duration":UA,"background-position":ue,"background-position-x":ue,"background-position-y":ue,"background-size":ue,border:ue,"border-bottom":ue,"border-bottom-left-radius":ue,"border-bottom-right-radius":ue,"border-bottom-width":ue,"border-left":ue,"border-left-width":ue,"border-radius":ue,"border-right":ue,"border-right-width":ue,"border-top":ue,"border-top-left-radius":ue,"border-top-right-radius":ue,"border-top-width":ue,"border-width":ue,"border-block":ue,"border-block-end":ue,"border-block-end-width":ue,"border-block-start":ue,"border-block-start-width":ue,"border-block-width":ue,"border-inline":ue,"border-inline-end":ue,"border-inline-end-width":ue,"border-inline-start":ue,"border-inline-start-width":ue,"border-inline-width":ue,"border-start-start-radius":ue,"border-start-end-radius":ue,"border-end-start-radius":ue,"border-end-end-radius":ue,margin:ue,"margin-bottom":ue,"margin-left":ue,"margin-right":ue,"margin-top":ue,"margin-block":ue,"margin-block-end":ue,"margin-block-start":ue,"margin-inline":ue,"margin-inline-end":ue,"margin-inline-start":ue,padding:ue,"padding-bottom":ue,"padding-left":ue,"padding-right":ue,"padding-top":ue,"padding-block":ue,"padding-block-end":ue,"padding-block-start":ue,"padding-inline":ue,"padding-inline-end":ue,"padding-inline-start":ue,"mask-position-x":ue,"mask-position-y":ue,"mask-size":ue,height:ue,width:ue,"min-height":ue,"max-height":ue,"min-width":ue,"max-width":ue,bottom:ue,left:ue,top:ue,right:ue,inset:ue,"inset-block":ue,"inset-block-end":ue,"inset-block-start":ue,"inset-inline":ue,"inset-inline-end":ue,"inset-inline-start":ue,"box-shadow":ue,"text-shadow":ue,"column-gap":ue,"column-rule":ue,"column-rule-width":ue,"column-width":ue,"font-size":ue,"font-size-delta":ue,"letter-spacing":ue,"text-decoration-thickness":ue,"text-indent":ue,"text-stroke":ue,"text-stroke-width":ue,"word-spacing":ue,motion:ue,"motion-offset":ue,outline:ue,"outline-offset":ue,"outline-width":ue,perspective:ue,"perspective-origin-x":Bm,"perspective-origin-y":Bm,"transform-origin":Bm,"transform-origin-x":Bm,"transform-origin-y":Bm,"transform-origin-z":Bm,"transition-delay":UA,"transition-duration":UA,"vertical-align":ue,"flex-basis":ue,"shape-margin":ue,size:ue,gap:ue,grid:ue,"grid-gap":ue,"row-gap":ue,"grid-row-gap":ue,"grid-column-gap":ue,"grid-template-rows":ue,"grid-template-columns":ue,"grid-auto-rows":ue,"grid-auto-columns":ue,"box-shadow-x":ue,"box-shadow-y":ue,"box-shadow-blur":ue,"box-shadow-spread":ue,"font-line-height":ue,"text-shadow-x":ue,"text-shadow-y":ue,"text-shadow-blur":ue};function zJ(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var R1e=zJ(T1e);function IE(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=IE(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=IE(s,e[s],n);else for(var i in e)e[i]=IE(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||R1e[t];return o&&!(e===0&&o===ue)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function P1e(t){t===void 0&&(t={});var e=zJ(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=IE(o,s[o],e);return s}function r(s,i){return IE(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var k1e={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},O1e={position:!0,size:!0},BA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},ak={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function D1e(t,e,n){return t.map(function(r){return HJ(r,e,n,!1,!0)})}function WJ(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?WJ(t[0],e,n,r):typeof t[0]=="object"?D1e(t,e,r):[t]}function HJ(t,e,n,r,s){if(!(BA[e]||ak[e]))return[];var i=[];if(ak[e]&&(t=$1e(t,n,ak[e],r)),Object.keys(t).length)for(var o in BA[e]){if(t[o]){Array.isArray(t[o])?i.push(O1e[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}BA[e][o]!=null&&i.push(BA[e][o])}return!i.length||s?i:[i]}function $1e(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=H_((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function H_(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=H_(t.fallbacks[i],e,!0);continue}t[r]=WJ(s,r,k1e,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=H_(t.fallbacks,e,!0);continue}t[r]=HJ(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function L1e(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=H_(e[r],n);return e}return H_(e,n)}return{onProcessStyle:t}}function v3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function M1e(t){if(Array.isArray(t))return v3(t)}function U1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function B1e(t,e){if(t){if(typeof t=="string")return v3(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v3(t,e):void 0}}function j1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F1e(t){return M1e(t)||U1e(t)||B1e(t)||j1e()}var Wv="",E3="",qJ="",GJ="",z1e=Sb&&"ontouchstart"in document.documentElement;if(Sb){var ck={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},W1e=document.createElement("p"),lk=W1e.style,H1e="Transform";for(var uk in ck)if(uk+H1e in lk){Wv=uk,E3=ck[uk];break}Wv==="Webkit"&&"msHyphens"in lk&&(Wv="ms",E3=ck.ms,GJ="edge"),Wv==="Webkit"&&"-apple-trailing-word"in lk&&(qJ="apple")}var Tt={js:Wv,css:E3,vendor:qJ,browser:GJ,isTouch:z1e};function q1e(t){return t[1]==="-"||Tt.js==="ms"?t:"@"+Tt.css+"keyframes"+t.substr(10)}var G1e={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Tt.js==="ms"?"-webkit-"+e:Tt.css+e}},V1e={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Tt.js==="Webkit"?Tt.css+"print-"+e:e}},K1e=/[-\s]+(.)?/g;function Y1e(t,e){return e?e.toUpperCase():""}function ZM(t){return t.replace(K1e,Y1e)}function bf(t){return ZM("-"+t)}var Q1e={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Tt.js==="Webkit"){var r="mask-image";if(ZM(r)in n)return e;if(Tt.js+bf(r)in n)return Tt.css+e}return e}},J1e={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Tt.vendor==="apple"&&!Tt.isTouch?Tt.css+e:e}},Z1e={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Tt.css+e}},X1e={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Tt.css+e}},eAe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Tt.js==="Webkit"||Tt.js==="ms"&&Tt.browser!=="edge"?Tt.css+e:e}},tAe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Tt.js==="Moz"||Tt.js==="ms"||Tt.vendor==="apple"?Tt.css+e:e}},nAe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Tt.js==="Webkit"){var r="WebkitColumn"+bf(e);return r in n?Tt.css+"column-"+e:!1}if(Tt.js==="Moz"){var s="page"+bf(e);return s in n?"page-"+e:!1}return!1}},rAe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Tt.js==="Moz")return e;var r=e.replace("-inline","");return Tt.js+bf(r)in n?Tt.css+r:!1}},sAe={supportedProperty:function(e,n){return ZM(e)in n?e:!1}},iAe={supportedProperty:function(e,n){var r=bf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Tt.js+r in n?Tt.css+e:Tt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},oAe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Tt.js==="ms"?""+Tt.css+e:e}},aAe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Tt.js==="ms"?Tt.css+"scroll-chaining":e}},cAe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},lAe={supportedProperty:function(e,n){var r=cAe[e];return r&&Tt.js+bf(r)in n?Tt.css+r:!1}},VJ={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},uAe=Object.keys(VJ),dAe=function(e){return Tt.css+e},hAe={supportedProperty:function(e,n,r){var s=r.multiple;if(uAe.indexOf(e)>-1){var i=VJ[e];if(!Array.isArray(i))return Tt.js+bf(i)in n?Tt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Tt.js+bf(i[0])in n))return!1;return i.map(dAe)}return!1}},KJ=[G1e,V1e,Q1e,J1e,Z1e,X1e,eAe,tAe,nAe,rAe,sAe,iAe,oAe,aAe,lAe,hAe],oj=KJ.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),fAe=KJ.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,F1e(e.noPrefill)),t},[]),Hv,lp={};if(Sb){Hv=document.createElement("p");var dk=window.getComputedStyle(document.documentElement,"");for(var hk in dk)isNaN(hk)||(lp[dk[hk]]=dk[hk]);fAe.forEach(function(t){return delete lp[t]})}function _3(t,e){if(e===void 0&&(e={}),!Hv)return t;if(lp[t]!=null)return lp[t];(t==="transition"||t==="transform")&&(e[t]=t in Hv.style);for(var n=0;n<oj.length&&(lp[t]=oj[n](t,Hv.style,e),!lp[t]);n++);try{Hv.style[t]=""}catch{return!1}return lp[t]}var jm={},pAe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},gAe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,zd;function mAe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?_3(e):", "+_3(n);return r||e||n}Sb&&(zd=document.createElement("p"));function aj(t,e){var n=e;if(!zd||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(jm[r]!=null)return jm[r];try{zd.style[t]=n}catch{return jm[r]=!1,!1}if(pAe[t])n=n.replace(gAe,mAe);else if(zd.style[t]===""&&(n=Tt.css+n,n==="-ms-flex"&&(zd.style[t]="-ms-flexbox"),zd.style[t]=n,zd.style[t]===""))return jm[r]=!1,!1;return zd.style[t]="",jm[r]=n,jm[r]}function yAe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=q1e(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=_3(i);c&&c!==i&&(a=!0);var l=!1,u=aj(c,gg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return aj(i,gg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function wAe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var bAe=function(e){return e===void 0&&(e={}),{plugins:[i1e(),a1e(e.observable),d1e(),y1e(),v1e(),C1e(),A1e(),N1e(),P1e(e.defaultUnit),L1e(),yAe(),wAe()]}},vAe=Number.MIN_SAFE_INTEGER||-1e9,EAe=function(){return vAe++},_Ae=L.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Sb}),cj=new Map,XM=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new nj),r[n];var s=cj.get(n);return s||(s=new nj,cj.set(n,s)),s},lj=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=XM(r,s);o.manage(i),r.registry&&r.registry.add(n)}},CAe=function(e){if(e.sheet){var n=XM(e.context,e.index);n.unmanage(e.theme)}},AAe=MJ(bAe()),YJ=new WeakMap,QJ=function(e){return YJ.get(e)},SAe=function(e,n){YJ.set(e,n)},xAe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function IAe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",fr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var NAe=function(e){if(!e.context.disableStylesGeneration){var n=XM(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||AAe,i=xAe(e),o=UJ(i),a=s.createStyleSheet(i,IAe(e,o!==null));return SAe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},TAe=function(e,n){for(var r in n)e.deleteRule(n[r])},RAe=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},PAe=function(e,n){var r=QJ(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},kAe=function(e,n){if(!n)return e.classes;var r=QJ(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function uj(t){return t?L.useEffect:Wo.useInsertionEffect||L.useLayoutEffect}var fk={},Uc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?EAe():s,o=r.theming,a=r.name,c=SJ(r,["index","theming","name"]),l=o&&o.context||PJ,u=function(f){return typeof e=="function"&&(f||L.useContext(l))||fk},d={};return function(f){var p=L.useRef(!0),g=L.useContext(_Ae),y=u(f&&f.theme),m=L.useMemo(function(){var A=NAe({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return A&&g.isSSR&&lj({index:i,context:g,sheet:A,theme:y}),[A,A?PAe(A,f):null]},[g,y]),b=m[0],v=m[1];uj(g.isSSR)(function(){b&&v&&!p.current&&RAe(f,b,v)},[f]),uj(g.isSSR)(function(){return b&&lj({index:i,context:g,sheet:b,theme:y}),function(){b&&(CAe({index:i,context:g,sheet:b,theme:y}),v&&TAe(b,v))}},[b]);var C=L.useMemo(function(){return b&&v?kAe(b,v):d},[b,v]);return L.useDebugValue(C),L.useDebugValue(y===fk?"No theme":y),L.useEffect(function(){p.current=!1}),C}};const OAe=Uc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function pk({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=OAe(),d=L.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=w.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[w.jsx("img",{src:t,alt:e,className:u.iconImage}),w.jsx("span",{className:u.iconLabel,children:e})]});return o?f:w.jsx(_1,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const DAe=Uc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function ua({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=DAe({isOpen:e}),u=L.useRef(null),d=()=>{r&&r(t)};return w.jsx(_1,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:w.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[w.jsxs("div",{className:l.header,children:[w.jsx("span",{children:i||t.replace("-popup","")}),w.jsxs("div",{className:l.titleBarButtons,children:[w.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),w.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),w.jsx("div",{className:l.content,children:s})]})})}const gk=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],$Ae=80,LAe=80,MAe=10,UAe=10,BAe=10,jAe=10,FAe=({onIconClick:t})=>{const e=gk.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:BAe+d*($Ae+MAe),y:jAe+u*(LAe+UAe)},u++,u>=4&&(u=0,d++)}),l},[r,s]=L.useState(n()),[i,o]=L.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return w.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:w.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>w.jsx(pk,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&w.jsx(ua,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:w.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:gk.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>w.jsx(pk,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&w.jsx(ua,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:w.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:gk.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>w.jsx(pk,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},zAe=Uc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),WAe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=L.useState(!1),[o,a]=L.useState(new Date),c=zAe({isOpen:s});L.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return w.jsxs("div",{className:c.taskbar,children:[w.jsxs("div",{className:c.leftSection,children:[w.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),w.jsx("div",{className:c.windows,children:t.map(h=>w.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),w.jsxs("div",{className:c.rightSection,children:[w.jsxs("div",{className:c.statusSection,children:[w.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:w.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),w.jsx("div",{className:c.clock,children:l(o)})]}),s&&w.jsxs("div",{className:c.menu,children:[w.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),w.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),w.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),w.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),w.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),w.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),w.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),w.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function JJ(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function eU(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function ZJ(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function tU(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function XJ(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function eZ(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function HAe(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const qAe=Uc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),GAe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=qAe({isOpen:t}),i=L.useRef(null),[o,a]=L.useState([]),[c,l]=L.useState(!1),[u,d]=L.useState(!1),[h,f]=L.useState({}),[p,g]=L.useState(null),{data:y}=QQ();L.useEffect(()=>{t&&r&&m()},[t,r]);const m=async()=>{l(!0),g(null);try{const S=await JJ(r);a(S);const x={};S.forEach(R=>{x[R.id]=0}),f(x)}catch(S){g(S.message)}finally{l(!1)}},b=(S,x)=>{f(R=>({...R,[S]:Math.max(0,x)}))},v=async()=>{const S=Object.entries(h).filter(([,x])=>x>0).map(([x,R])=>({id:x,quantity:R}));if(S.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const x=await ZJ(r,S);if(console.log("Mint API result:",x),x.success&&x.mintTransaction){console.log("Got mint transaction:",x.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const R=await y.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});console.log("Transaction sent successfully:",R),alert(`NFT Minted Successfully: Transaction Hash - ${R}`),e()}catch(R){console.error("Transaction sending failed:",R),g("Transaction failed: "+R.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){console.error("Minting failed:",x),g("Minting failed: "+x.message)}finally{d(!1)}},C=(S,x)=>`${parseFloat(S)} ${x}`,A=()=>{n&&n()};return t?w.jsx(_1,{nodeRef:i,handle:`.${s.header}`,children:w.jsxs("div",{ref:i,className:s.popup,children:[w.jsxs("div",{className:s.header,children:[w.jsx("span",{children:"Mint Pixelawbster"}),w.jsxs("div",{className:s.titleBarButtons,children:[w.jsx("button",{className:s.titleBarButton,onClick:A,title:"Minimize",children:"_"}),w.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),w.jsxs("div",{className:s.content,children:[p&&w.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?w.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?w.jsx("div",{children:"No eligible invite lists found for your wallet."}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{marginBottom:"20px"},children:[w.jsx("h3",{children:"Available Lists:"}),o.map(S=>w.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[w.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),w.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",C(S.token_price,S.currency_symbol)]}),w.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[w.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),w.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:x=>b(S.id,parseInt(x.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),w.jsx("button",{onClick:()=>void v(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},VAe=Uc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),KAe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},YAe=({nft:t,onClose:e})=>{const n=VAe(),r=L.useRef(null),s=KAe(t.attributes);return w.jsx(_1,{nodeRef:r,handle:`.${n.header}`,children:w.jsxs("div",{className:n.popup,ref:r,children:[w.jsxs("div",{className:n.header,children:[w.jsxs("span",{children:[t.name," - Details"]}),w.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),w.jsxs("div",{className:n.content,children:[w.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),w.jsx("h3",{children:"Traits"}),w.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>w.jsxs("li",{children:[w.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):w.jsx("li",{children:"No traits found."})})]})]})})},QAe=Symbol(),dj=Object.getPrototypeOf,C3=new WeakMap,JAe=t=>t&&(C3.has(t)?C3.get(t):dj(t)===Object.prototype||dj(t)===Array.prototype),ZAe=t=>JAe(t)&&t[QAe]||null,hj=(t,e=!0)=>{C3.set(t,e)},CI={},mk=t=>typeof t=="object"&&t!==null,Yd=new WeakMap,qv=new WeakSet,XAe=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>mk(l)&&!qv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return hj(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),m={value:g,enumerable:y,configurable:!0};if(qv.has(g))hj(g,!1);else if(g instanceof Promise)delete m.value,m.get=()=>d(g);else if(Yd.has(g)){const[b,v]=Yd.get(g);m.value=i(b,v(),d)}Object.defineProperty(f,p,m)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!mk(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(I,O=++a[0])=>{d!==O&&(d=O,h.forEach(P=>P(I,O)))};let p=a[1];const g=(I=++a[1])=>(p!==I&&!h.size&&(p=I,m.forEach(([O])=>{const P=O[1](I);P>d&&(d=P)})),d),y=I=>(O,P)=>{const B=[...O];B[1]=[I,...B[1]],f(B,P)},m=new Map,b=(I,O)=>{if((CI?"production":void 0)!=="production"&&m.has(I))throw new Error("prop listener already exists");if(h.size){const P=O[3](y(I));m.set(I,[O,P])}else m.set(I,[O])},v=I=>{var O;const P=m.get(I);P&&(m.delete(I),(O=P[1])==null||O.call(P))},C=I=>(h.add(I),h.size===1&&m.forEach(([P,B],H)=>{if((CI?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const j=P[3](y(H));m.set(H,[P,j])}),()=>{h.delete(I),h.size===0&&m.forEach(([P,B],H)=>{B&&(B(),m.set(H,[P]))})}),A=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(A,{deleteProperty(I,O){const P=Reflect.get(I,O);v(O);const B=Reflect.deleteProperty(I,O);return B&&f(["delete",[O],P]),B},set(I,O,P,B){const H=Reflect.has(I,O),j=Reflect.get(I,O,B);if(H&&(t(j,P)||o.has(P)&&t(j,o.get(P))))return!0;v(O),mk(P)&&(P=ZAe(P)||P);let T=P;if(P instanceof Promise)P.then(N=>{P.status="fulfilled",P.value=N,f(["resolve",[O],N])}).catch(N=>{P.status="rejected",P.reason=N,f(["reject",[O],N])});else{!Yd.has(P)&&n(P)&&(T=c(P));const N=!qv.has(T)&&Yd.get(T);N&&b(O,N)}return Reflect.set(I,O,T,B),f(["set",[O],P,j]),!0}});o.set(l,x);const R=[A,g,i,C];return Yd.set(x,R),Reflect.ownKeys(l).forEach(I=>{const O=Object.getOwnPropertyDescriptor(l,I);"value"in O&&(x[I]=l[I],delete O.value,delete O.writable),Object.defineProperty(A,I,O)}),x})=>[c,Yd,qv,t,e,n,r,s,i,o,a],[eSe]=XAe();function er(t={}){return eSe(t)}function ri(t,e,n){const r=Yd.get(t);(CI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function q_(t,e){const n=Yd.get(t);(CI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function jg(t){return qv.add(t),t}function ii(t,e,n,r){let s=t[e];return ri(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function tSe(t){const e=er({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var fj={};const Ue={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof fj<"u"?fj.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},tZ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Ue.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var nSe=20,rSe=1,Fg=1e6,pj=1e6,sSe=-7,iSe=21,oSe=!1,C1="[big.js] ",pm=C1+"Invalid ",RT=pm+"decimal places",aSe=pm+"rounding mode",nZ=C1+"Division by zero",_n={},kl=void 0,cSe=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function rZ(){function t(e){var n=this;if(!(n instanceof t))return e===kl?rZ():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(pm+"value");e=e===0&&1/e<0?"-0":String(e)}lSe(n,e)}n.constructor=t}return t.prototype=_n,t.DP=nSe,t.RM=rSe,t.NE=sSe,t.PE=iSe,t.strict=oSe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function lSe(t,e){var n,r,s;if(!cSe.test(e))throw Error(pm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function gm(t,e,n,r){var s=t.c;if(n===kl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(aSe);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==kl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==kl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function mm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}_n.abs=function(){var t=new this.constructor(this);return t.s=1,t};_n.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};_n.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Fg)throw Error(RT);if(!s[0])throw Error(nZ);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,m=t,b=m.c=[],v=0,C=o+(m.e=e.e-t.e)+1;for(m.s=i,i=C<0?0:C,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==kl)&&i--);return!b[0]&&v!=1&&(b.shift(),m.e--,C--),v>C&&gm(m,C,n.RM,g[0]!==kl),m};_n.eq=function(t){return this.cmp(t)===0};_n.gt=function(t){return this.cmp(t)>0};_n.gte=function(t){return this.cmp(t)>-1};_n.lt=function(t){return this.cmp(t)<0};_n.lte=function(t){return this.cmp(t)<1};_n.minus=_n.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};_n.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(nZ);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};_n.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};_n.plus=_n.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};_n.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-pj||t>pj)throw Error(pm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};_n.prec=function(t,e){if(t!==~~t||t<1||t>Fg)throw Error(pm+"precision");return gm(new this.constructor(this),t,e)};_n.round=function(t,e){if(t===kl)t=0;else if(t!==~~t||t<-Fg||t>Fg)throw Error(RT);return gm(new this.constructor(this),t+this.e+1,e)};_n.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(C1+"No square root");i=Math.sqrt(+mm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return gm(t,(s.DP-=4)+t.e+1,s.RM)};_n.times=_n.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};_n.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==kl){if(t!==~~t||t<0||t>Fg)throw Error(RT);for(n=gm(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return mm(n,!0,!!r)};_n.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==kl){if(t!==~~t||t<0||t>Fg)throw Error(RT);for(n=gm(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return mm(n,!1,!!r)};_n[Symbol.for("nodejs.util.inspect.custom")]=_n.toJSON=_n.toString=function(){var t=this,e=t.constructor;return mm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};_n.toNumber=function(){var t=+mm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(C1+"Imprecise conversion");return t};_n.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==kl){if(t!==~~t||t<1||t>Fg)throw Error(pm+"precision");for(n=gm(new r(n),t,e);n.c.length<t;)n.c.push(0)}return mm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};_n.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(C1+"valueOf disallowed");return mm(t,t.e<=e.NE||t.e>=e.PE,!0)};var Cl=rZ();const uSe={bigNumber(t){return t?new Cl(t):new Cl(0)},multiply(t,e){if(t===void 0||e===void 0)return new Cl(0);const n=new Cl(t),r=new Cl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},dSe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],hSe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],fSe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],pSe={getERC20Abi:t=>Ue.USDT_CONTRACT_ADDRESSES.includes(t)?fSe:dSe,getSwapAbi:()=>hSe},Id={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},St={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function yk(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Et={setItem(t,e){Gv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Gv())return localStorage.getItem(t)||void 0},removeItem(t){Gv()&&localStorage.removeItem(t)},clear(){Gv()&&localStorage.clear()}};function Gv(){return typeof window<"u"&&typeof localStorage<"u"}function Hu(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var gj={};const wk=(typeof process<"u"&&typeof gj<"u"?gj.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",sZ=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],gSe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Rn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:wk,SECURE_SITE_DASHBOARD:`${wk}/dashboard`,SECURE_SITE_FAVICON:`${wk}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Ge={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ge.getActiveNamespace(),e=Ge.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Et.setItem(St.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Et.getItem(St.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Et.removeItem(St.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Et.setItem(St.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Et.setItem(St.ACTIVE_CAIP_NETWORK_ID,t),Ge.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Et.getItem(St.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Et.removeItem(St.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=yk(t);Et.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ge.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Et.setItem(St.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Et.getItem(St.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=yk(t);Et.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Et.getItem(St.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=yk(t);return Et.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Et.setItem(St.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Et.getItem(St.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Et.removeItem(St.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Et.getItem(St.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Et.getItem(St.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Et.setItem(St.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Et.getItem(St.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Et.getItem(St.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Et.setItem(St.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ge.getConnectedNamespaces();e.includes(t)||(e.push(t),Ge.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ge.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ge.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Et.getItem(St.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Et.setItem(St.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Et.removeItem(St.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Et.getItem(St.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ge.getBalanceCache();Et.setItem(St.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ge.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ge.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ge.getBalanceCache();e[t.caipAddress]=t,Et.setItem(St.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Et.getItem(St.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ge.getBalanceCache();Et.setItem(St.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ge.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ge.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ge.getNativeBalanceCache();e[t.caipAddress]=t,Et.setItem(St.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Et.getItem(St.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ge.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ge.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ge.getEnsCache();e[t.address]=t,Et.setItem(St.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ge.getEnsCache();Et.setItem(St.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Et.getItem(St.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ge.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ge.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ge.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Et.setItem(St.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ge.getIdentityCache();Et.setItem(St.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Et.removeItem(St.PORTFOLIO_CACHE),Et.removeItem(St.NATIVE_BALANCE_CACHE),Et.removeItem(St.ENS_CACHE),Et.removeItem(St.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Et.setItem(St.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Et.getItem(St.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Ge.getConnections(),[e]:t};Et.setItem(St.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Et.getItem(St.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},nt={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return nt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Rn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Rn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(nt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Rn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(nt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!nt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ge.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,nt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Ue.W3M_API_URL},getBlockchainApiUrl(){return Ue.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Ue.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Rn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Ue.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function yv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let A1=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await yv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await yv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await yv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await yv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await yv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const mSe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Rn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(nt.isTelegram()){if(nt.isIos())return t.filter(e=>e!=="google");if(nt.isMac())return t.filter(e=>e!=="x");if(nt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},lt=er({features:Rn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Rn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ve={state:lt,subscribeKey(t,e){return ii(lt,t,e)},setOptions(t){Object.assign(lt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...lt.remoteFeatures,...t};lt.remoteFeatures=e,(n=lt.remoteFeatures)!=null&&n.socials&&(lt.remoteFeatures.socials=mSe.filterSocialsByPlatform(lt.remoteFeatures.socials))},setFeatures(t){if(!t)return;lt.features||(lt.features=Rn.DEFAULT_FEATURES);const e={...lt.features,...t};lt.features=e},setProjectId(t){lt.projectId=t},setCustomRpcUrls(t){lt.customRpcUrls=t},setAllWallets(t){lt.allWallets=t},setIncludeWalletIds(t){lt.includeWalletIds=t},setExcludeWalletIds(t){lt.excludeWalletIds=t},setFeaturedWalletIds(t){lt.featuredWalletIds=t},setTokens(t){lt.tokens=t},setTermsConditionsUrl(t){lt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){lt.privacyPolicyUrl=t},setCustomWallets(t){lt.customWallets=t},setIsSiweEnabled(t){lt.isSiweEnabled=t},setIsUniversalProvider(t){lt.isUniversalProvider=t},setSdkVersion(t){lt.sdkVersion=t},setMetadata(t){lt.metadata=t},setDisableAppend(t){lt.disableAppend=t},setEIP6963Enabled(t){lt.enableEIP6963=t},setDebug(t){lt.debug=t},setEnableWalletConnect(t){lt.enableWalletConnect=t},setEnableWalletGuide(t){lt.enableWalletGuide=t},setEnableAuthLogger(t){lt.enableAuthLogger=t},setEnableWallets(t){lt.enableWallets=t},setPreferUniversalLinks(t){lt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){lt.hasMultipleAddresses=t},setSIWX(t){lt.siwx=t},setConnectMethodsOrder(t){lt.features={...lt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){lt.features={...lt.features,walletFeaturesOrder:t}},setSocialsOrder(t){lt.remoteFeatures={...lt.remoteFeatures,socials:t}},setCollapseWallets(t){lt.features={...lt.features,collapseWallets:t}},setEnableEmbedded(t){lt.enableEmbedded=t},setAllowUnsupportedChain(t){lt.allowUnsupportedChain=t},setManualWCControl(t){lt.manualWCControl=t},setEnableNetworkSwitch(t){lt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(lt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){lt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return lt.universalProviderConfigOverride},getSnapshot(){return q_(lt)}},ySe=Object.freeze({enabled:!0,events:[]}),wSe=new A1({baseUrl:nt.getAnalyticsUrl(),clientId:null}),bSe=5,vSe=60*1e3,Nd=er({...ySe}),ESe={state:Nd,subscribeKey(t,e){return ii(Nd,t,e)},async sendError(t,e){if(!Nd.enabled)return;const n=Date.now();if(Nd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<vSe}).length>=bSe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Nd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ve.state;await wSe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:nt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Nd.enabled=!0},disable(){Nd.enabled=!1},clearEvents(){Nd.events=[]}};let A3=class S3 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,S3.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,S3):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function mj(t,e){const n=t instanceof A3?t:new A3(t instanceof Error?t.message:String(t),e,t);throw ESe.sendError(n,n.category),n}function ta(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return mj(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return mj(a,e)}},n[r]=i}else n[r]=s}),n}const ml={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},_Se={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===ml.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${ml.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===ml.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ml.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Ue.CHAIN.SOLANA&&t===ml.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ml.COINBASE.url}/dapp?cb_url=${r}`)}},Eo=er({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),CSe={state:Eo,subscribeNetworkImages(t){return ri(Eo.networkImages,()=>t(Eo.networkImages))},subscribeKey(t,e){return ii(Eo,t,e)},subscribe(t){return ri(Eo,()=>t(Eo))},setWalletImage(t,e){Eo.walletImages[t]=e},setNetworkImage(t,e){Eo.networkImages[t]=e},setChainImage(t,e){Eo.chainImages[t]=e},setConnectorImage(t,e){Eo.connectorImages={...Eo.connectorImages,[t]:e}},setTokenImage(t,e){Eo.tokenImages[t]=e},setCurrencyImage(t,e){Eo.currencyImages[t]=e}},mc=ta(CSe),ASe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},bk=er({networkImagePromises:{}}),iZ={async fetchWalletImage(t){if(t)return await it._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(bk.networkImagePromises[t]||(bk.networkImagePromises[t]=it._fetchNetworkImage(t)),await bk.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return mc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return mc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return mc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return mc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return mc.state.connectorImages[t.imageId]},getChainImage(t){return mc.state.networkImages[ASe[t]]}},Td=er({message:"",variant:"info",open:!1}),SSe={state:Td,subscribeKey(t,e){return ii(Td,t,e)},open(t,e){const{debug:n}=ve.state,{shortMessage:r,longMessage:s}=t;n&&(Td.message=r,Td.variant=e,Td.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Td.open=!1,Td.message="",Td.variant="info"}},Al=ta(SSe),xSe=nt.getAnalyticsUrl(),ISe=new A1({baseUrl:xSe,clientId:null}),NSe=["MODAL_CREATED"],tu=er({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),or={state:tu,subscribe(t){return ri(tu,()=>t(tu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=qe.state.address;if(NSe.includes(t.data.event)||typeof window>"u")return;await ISe.post({path:"/e",params:or.getSdkProperties(),body:{eventId:nt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),tu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Ue.HTTP_STATUS_CODES.FORBIDDEN&&!tu.reportedErrors.FORBIDDEN&&(Al.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Gv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),tu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;tu.timestamp=Date.now(),tu.data=t,(e=ve.state.features)!=null&&e.analytics&&or._sendAnalyticsEvent(tu)}},TSe=nt.getApiUrl(),Oi=new A1({baseUrl:TSe,clientId:null}),RSe=40,yj=4,PSe=20,xt=er({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),it={state:xt,subscribeKey(t,e){return ii(xt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ve.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Oi.baseUrl}/getWalletImage/${t}`,n=await Oi.getBlob({path:e,params:it._getSdkProperties()});mc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Oi.baseUrl}/public/getAssetImage/${t}`,n=await Oi.getBlob({path:e,params:it._getSdkProperties()});mc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Oi.baseUrl}/public/getAssetImage/${t}`,n=await Oi.getBlob({path:e,params:it._getSdkProperties()});mc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Oi.baseUrl}/public/getCurrencyImage/${t}`,n=await Oi.getBlob({path:e,params:it._getSdkProperties()});mc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Oi.baseUrl}/public/getTokenImage/${t}`,n=await Oi.getBlob({path:e,params:it._getSdkProperties()});mc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return nt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===ml.COINBASE.id?!0:z.state.activeChain==="solana"&&(n.id===ml.SOLFLARE.id||n.id===ml.PHANTOM.id)):t},async fetchProjectConfig(){return(await Oi.get({path:"/appkit/v1/config",params:it._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Oi.get({path:"/projects/v1/origins",params:it._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=z.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!iZ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>it._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Me.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>it._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>it._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>it._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];it._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(ml).map(o=>o.id));const r=await Oi.get({path:"/getWallets",params:{...it._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:it._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ve.state;if(t!=null&&t.length){const e={...it._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??yj,include:t},{data:n}=await it.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>it._fetchWalletImage(i))),xt.featured=r,xt.allFeatured=r}},async fetchRecommendedWallets(){try{xt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ve.state,r=[...e??[],...n??[]].filter(Boolean),s=z.getRequestedCaipNetworkIds().join(","),i={page:1,entries:yj,include:t,exclude:r,chains:s},{data:o,count:a}=await it.fetchWallets(i),c=Ge.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>it._fetchWalletImage(d))),xt.recommended=o,xt.allRecommended=o,xt.count=a??0}catch{}finally{xt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ve.state,s=z.getRequestedCaipNetworkIds().join(","),i=[...xt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:RSe,include:e,exclude:i,chains:s},{data:a,count:c}=await it.fetchWallets(o),l=a.slice(0,PSe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>it._fetchWalletImage(u))),xt.wallets=nt.uniqueBy([...xt.wallets,...it._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),xt.count=c>xt.count?c:xt.count,xt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await it.fetchWallets(e);n&&n.forEach(r=>{xt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ve.state,s=z.getRequestedCaipNetworkIds().join(",");xt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await it.fetchWallets(i);or.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>it._fetchWalletImage(c)),nt.wait(300)]),xt.search=it._filterOutExtensions(o)},initPromise(t,e){const n=xt.promises[t];return n||(xt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&it.initPromise("connectorImages",it.fetchConnectorImages),e&&it.initPromise("featuredWallets",it.fetchFeaturedWallets),n&&it.initPromise("recommendedWallets",it.fetchRecommendedWallets),r&&it.initPromise("networkImages",it.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ve.state.features)!=null&&t.analytics&&it.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Oi.get({path:"/getAnalyticsConfig",params:it._getSdkProperties()});ve.setFeatures({analytics:t})}catch{ve.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){xt.featured=xt.allFeatured,xt.recommended=xt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");xt.featured=xt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),xt.recommended=xt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),xt.filteredWallets=xt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){xt.filteredWallets=[]},setFilterByNamespace(t){if(!t){xt.featured=xt.allFeatured,xt.recommended=xt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");xt.featured=xt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),xt.recommended=xt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),xt.filteredWallets=xt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},xn=er({view:"Connect",history:["Connect"],transactionStack:[]}),kSe={state:xn,subscribeKey(t,e){return ii(xn,t,e)},pushTransactionStack(t){xn.transactionStack.push(t)},popTransactionStack(t){const e=xn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ot.goBack();break;case"cancel":s==null||s(),Ot.goBack();break}},push(t,e){t!==xn.view&&(xn.view=t,xn.history.push(t),xn.data=e)},reset(t,e){xn.view=t,xn.history=[t],xn.data=e},replace(t,e){xn.history.at(-1)===t||(xn.view=t,xn.history[xn.history.length-1]=t,xn.data=e)},goBack(){var r;const t=z.state.activeCaipAddress,e=Ot.state.view==="ConnectingFarcaster",n=!t&&e;if(xn.history.length>1){xn.history.pop();const[s]=xn.history.slice(-1);s&&(t&&s==="Connect"?xn.view="Account":xn.view=s)}else ps.close();(r=xn.data)!=null&&r.wallet&&(xn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){qe.setFarcasterUrl(void 0,z.state.activeChain);const a=Me.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=q_(ve.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(xn.history.length>1){xn.history=xn.history.slice(0,t+1);const[e]=xn.history.slice(-1);e&&(xn.view=e)}},goBackOrCloseModal(){Ot.state.history.length>1?Ot.goBack():ps.close()}},Ot=ta(kSe),nu=er({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),x3={state:nu,subscribe(t){return ri(nu,()=>t(nu))},setThemeMode(t){nu.themeMode=t;try{const e=Me.getAuthConnector();if(e){const n=x3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Hu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){nu.themeVariables={...nu.themeVariables,...t};try{const e=Me.getAuthConnector();if(e){const n=x3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Hu(nu.themeVariables,nu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return q_(nu)}},Qi=ta(x3),oZ={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},tn=er({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...oZ},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),OSe={state:tn,subscribe(t){return ri(tn,()=>{t(tn)})},subscribeKey(t,e){return ii(tn,t,e)},initialize(t){t.forEach(e=>{const n=Ge.getConnectedConnectorId(e);n&&Me.setConnectorId(n,e)})},setActiveConnector(t){t&&(tn.activeConnector=jg(t))},setConnectors(t){t.filter(s=>!tn.allConnectors.some(i=>i.id===s.id&&Me.getConnectorName(i.name)===Me.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&tn.allConnectors.push(jg(s))});const n=Me.getEnabledNamespaces(),r=Me.getEnabledConnectors(n);tn.connectors=Me.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(tn.filterByNamespaceMap).forEach(e=>{tn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{tn.filterByNamespaceMap[e]=!0}),Me.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){tn.filterByNamespaceMap[t]=e,Me.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Me.getEnabledNamespaces(),e=Me.getEnabledConnectors(t),n=Me.areAllNamespacesEnabled();tn.connectors=Me.mergeMultiChainConnectors(e),n?it.clearFilterByNamespaces():it.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(tn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return tn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(tn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Me.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Ue.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Me.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Ue.CONNECTOR_ID.AUTH){const s=t,i=q_(ve.state),o=Qi.getSnapshot().themeMode,a=Qi.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Hu(a,o)}),Me.setConnectors([t])}else Me.setConnectors([t])},getAuthConnector(t){var r;const e=t||z.state.activeChain,n=tn.connectors.find(s=>s.id===Ue.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return tn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return tn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return tn.allConnectors.filter(r=>r.chain===z.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=q_(ve.state),r=Qi.getSnapshot().themeMode,s=Qi.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Hu(s,r)})},getConnectorsByNamespace(t){const e=tn.allConnectors.filter(n=>n.chain===t);return Me.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Me.getConnector(t.id,t.rdns),n=z.state.activeChain;_Se.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Ot.push("ConnectingExternal",{connector:e}):Ot.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Me.getConnectorsByNamespace(t):Me.mergeMultiChainConnectors(tn.allConnectors)},setFilterByNamespace(t){tn.filterByNamespace=t,tn.connectors=Me.getConnectors(t),it.setFilterByNamespace(t)},setConnectorId(t,e){t&&(tn.activeConnectorIds={...tn.activeConnectorIds,[e]:t},Ge.setConnectedConnectorId(e,t))},removeConnectorId(t){tn.activeConnectorIds={...tn.activeConnectorIds,[t]:void 0},Ge.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return tn.activeConnectorIds[t]},isConnected(t){return t?!!tn.activeConnectorIds[t]:Object.values(tn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){tn.activeConnectorIds={...oZ}}},Me=ta(OSe);var U0={};const DSe="https://secure.walletconnect.org/sdk",$Se=(typeof process<"u"&&typeof U0<"u"?U0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||DSe,LSe=(typeof process<"u"&&typeof U0<"u"?U0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",MSe=(typeof process<"u"&&typeof U0<"u"?U0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",We={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ds={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},np=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),jr=er({...np}),USe={state:jr,subscribeKey(t,e){return ii(jr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=nt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){jr.message=np.message,jr.variant=np.variant,jr.svg=np.svg,jr.open=np.open,jr.autoClose=np.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=np.autoClose}){jr.open?(jr.open=!1,setTimeout(()=>{jr.message=t,jr.variant=n,jr.svg=e,jr.open=!0,jr.autoClose=r},150)):(jr.message=t,jr.variant=n,jr.svg=e,jr.open=!0,jr.autoClose=r)}},Ec=USe,Bn=er({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),BSe={state:Bn,subscribe(t){return ri(Bn,()=>t(Bn))},setLastNetworkInView(t){Bn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Bn.loading=!0;try{const s=await dt.fetchTransactions({account:t,cursor:Bn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Vv.filterSpamTransactions(s.data),o=Vv.filterByConnectedChain(i),a=[...Bn.transactions,...o];Bn.loading=!1,e==="coinbase"?Bn.coinbaseTransactions=Vv.groupTransactionsByYearAndMonth(Bn.coinbaseTransactions,s.data):(Bn.transactions=a,Bn.transactionsByYear=Vv.groupTransactionsByYearAndMonth(Bn.transactionsByYear,o)),Bn.empty=a.length===0,Bn.next=s.next?s.next:void 0}catch{const i=z.state.activeChain;or.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ve.state.projectId,cursor:Bn.next,isSmartAccount:((r=qe.state.preferredAccountTypes)==null?void 0:r[i])===Ds.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ec.showError("Failed to fetch transactions"),Bn.loading=!1,Bn.empty=!0,Bn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Bn.next=void 0},resetTransactions(){Bn.transactions=[],Bn.transactionsByYear={},Bn.lastNetworkInView=void 0,Bn.loading=!1,Bn.empty=!1,Bn.next=void 0}},Vv=ta(BSe,"API_ERROR"),Dn=er({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let zf;const jSe={state:Dn,subscribeKey(t,e){return ii(Dn,t,e)},_getClient(){return Dn._client},setClient(t){Dn._client=jg(t)},async connectWalletConnect(){var t,e,n,r;if(nt.isTelegram()||nt.isSafari()&&nt.isIos()){if(zf){await zf,zf=void 0;return}if(!nt.isPairingExpired(Dn==null?void 0:Dn.wcPairingExpiry)){const s=Dn.wcUri;Dn.wcUri=s;return}zf=(e=(t=ht._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ht.state.status="connecting",await zf,zf=void 0,Dn.wcPairingExpiry=void 0,ht.state.status="connected"}else await((r=(n=ht._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=ht._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&z.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=ht._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||z.state.activeChain;e&&Me.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;ps.setLoading(!0,z.state.activeChain);const n=Me.getAuthConnector();n&&(qe.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ge.setPreferredAccountTypes(qe.state.preferredAccountTypes??{[e]:t}),await ht.reconnectExternal(n),ps.setLoading(!1,z.state.activeChain),or.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ht._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ht._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ht._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ht._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ht._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ht._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ht._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ht._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ht._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ht._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ht._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ht._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Dn.wcUri=void 0,Dn.wcPairingExpiry=void 0,Dn.wcLinking=void 0,Dn.recentWallet=void 0,Dn.status="disconnected",Vv.resetTransactions(),Ge.deleteWalletConnectDeepLink()},resetUri(){Dn.wcUri=void 0,Dn.wcPairingExpiry=void 0,zf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ht.state;t&&Ge.setWalletConnectDeepLink(t),e&&Ge.setAppKitRecent(e),or.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ot.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Dn.wcBasic=t},setUri(t){Dn.wcUri=t,Dn.wcPairingExpiry=nt.getPairingExpiry()},setWcLinking(t){Dn.wcLinking=t},setWcError(t){Dn.wcError=t,Dn.buffering=!1},setRecentWallet(t){Dn.recentWallet=t},setBuffering(t){Dn.buffering=t},setStatus(t){Dn.status=t},async disconnect(t){var e;try{await((e=ht._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new A3("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Dn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Me.state.activeConnectorIds[n]===t.connectorId){const i=z.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;qe.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Me.getConnector(t.connectorId);i?ht.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},ht=ta(jSe),Fm=er({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ol={state:Fm,subscribe(t){return ri(Fm,()=>t(Fm))},subscribeOpen(t){return ii(Fm,"open",t)},set(t){Object.assign(Fm,{...Fm,...t})}},vk={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return lm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},wj={async getMyTokensWithBalance(t){const e=qe.state.address,n=z.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await dt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=vk.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ht.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ht.walletGetAssets({account:t,chainFilter:[s]});return vk.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>vk.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:z.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},bn=er({tokenBalances:[],loading:!1}),FSe={state:bn,subscribe(t){return ri(bn,()=>t(bn))},subscribeKey(t,e){return ii(bn,t,e)},setToken(t){t&&(bn.token=jg(t))},setTokenAmount(t){bn.sendTokenAmount=t},setReceiverAddress(t){bn.receiverAddress=t},setReceiverProfileImageUrl(t){bn.receiverProfileImageUrl=t},setReceiverProfileName(t){bn.receiverProfileName=t},setNetworkBalanceInUsd(t){bn.networkBalanceInUSD=t},setLoading(t){bn.loading=t},async sendToken(){var t;try{switch(dn.setLoading(!0),(t=z.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await dn.sendEvmToken();return;case"solana":await dn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{dn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=z.state.activeChain,e=(n=qe.state.preferredAccountTypes)==null?void 0:n[t];if(!dn.state.sendTokenAmount||!dn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!dn.state.token)throw new Error("A token is required");(r=dn.state.token)!=null&&r.address?(or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ds.ACCOUNT_TYPES.SMART_ACCOUNT,token:dn.state.token.address,amount:dn.state.sendTokenAmount,network:((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await dn.sendERC20Token({receiverAddress:dn.state.receiverAddress,tokenAddress:dn.state.token.address,sendTokenAmount:dn.state.sendTokenAmount,decimals:dn.state.token.quantity.decimals})):(or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ds.ACCOUNT_TYPES.SMART_ACCOUNT,token:dn.state.token.symbol||"",amount:dn.state.sendTokenAmount,network:((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await dn.sendNativeToken({receiverAddress:dn.state.receiverAddress,sendTokenAmount:dn.state.sendTokenAmount,decimals:dn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;bn.loading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?nt.getPlainAddress(r):void 0;if(bn.lastRetry&&!nt.isAllowedRetry(bn.lastRetry,30*Rn.ONE_SEC_MS))return bn.loading=!1,[];try{if(s&&e&&n){const a=await wj.getMyTokensWithBalance();return bn.tokenBalances=a,bn.lastRetry=void 0,a}}catch(a){bn.lastRetry=Date.now(),t==null||t(a),Ec.showError("Token Balance Unavailable")}finally{bn.loading=!1}return[]},fetchNetworkBalance(){if(bn.tokenBalances.length===0)return;const t=wj.mapBalancesToSwapTokens(bn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===z.getActiveNetworkTokenAddress());e&&(bn.networkBalanceInUSD=e?uSe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Ot.pushTransactionStack({});const e=t.receiverAddress,n=qe.state.address,r=ht.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ht.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),or.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=qe.state.preferredAccountTypes)==null?void 0:i.eip155)===Ds.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=dn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=ht._getClient())==null||c.updateBalance("eip155"),dn.resetSend()},async sendERC20Token(t){Ot.pushTransactionStack({onSuccess(){Ot.replace("Account")}});const e=ht.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(qe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=nt.getPlainAddress(t.tokenAddress);await ht.writeContract({fromAddress:qe.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:pSe.getERC20Abi(n),chainNamespace:"eip155"}),dn.resetSend()}},async sendSolanaToken(){var t;if(!dn.state.sendTokenAmount||!dn.state.receiverAddress)throw new Error("An amount and receiver address are required");Ot.pushTransactionStack({onSuccess(){Ot.replace("Account")}}),await ht.sendTransaction({chainNamespace:"solana",to:dn.state.receiverAddress,value:dn.state.sendTokenAmount}),(t=ht._getClient())==null||t.updateBalance("solana"),dn.resetSend()},resetSend(){bn.token=void 0,bn.sendTokenAmount=void 0,bn.receiverAddress=void 0,bn.receiverProfileImageUrl=void 0,bn.receiverProfileName=void 0,bn.loading=!1,bn.tokenBalances=[]}},dn=ta(FSe),Ek={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},jA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ke=er({chains:tSe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),zSe={state:ke,subscribe(t){return ri(ke,()=>{t(ke)})},subscribeKey(t,e){return ii(ke,t,e)},subscribeChainProp(t,e,n){let r;return ri(ke.chains,()=>{var i;const s=n||ke.activeChain;if(s){const o=(i=ke.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ge.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ve.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ke.noAdapters=!0),ke.noAdapters||(ke.activeChain=a==null?void 0:a.namespace,ke.activeCaipNetwork=i,z.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),ke.activeChain&&Ol.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);z.state.chains.set(u,{namespace:u,networkState:er({...jA,caipNetwork:d==null?void 0:d[0]}),accountState:er(Ek),caipNetworks:d??[],...n}),z.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(ke.activeChain===t){const r=Array.from(ke.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&z.setActiveCaipNetwork(s)}}ke.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){ke.chains.set(t.namespace,{namespace:t.namespace,networkState:{...jA,caipNetwork:r[0]},accountState:Ek,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),z.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=ke.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),ke.chains.set(t.chainNamespace,{...e,caipNetworks:r}),z.setRequestedCaipNetworks(r,t.chainNamespace),Me.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=ke.chains.get(t);if(n){const o=((r=ke.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&z.setActiveCaipNetwork(n.caipNetworks[0]),ke.chains.set(t,{...n,caipNetworks:a}),z.setRequestedCaipNetworks(a||[],t),a.length===0&&Me.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=ke.chains.get(t);n&&(n.networkState={...n.networkState||jA,...e},ke.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=ke.chains.get(t);if(r){const s={...r.accountState||Ek,...e};ke.chains.set(t,{...r,accountState:s}),(ke.chains.size===1||ke.activeChain===t)&&(e.caipAddress&&(ke.activeCaipAddress=e.caipAddress),qe.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=ke.chains.get(t);if(n){const r={...n.networkState||jA,...e};ke.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){z.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Me.removeConnectorId(n)},setActiveNamespace(t){var r,s;ke.activeChain=t;const e=t?ke.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(ke.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ke.activeCaipNetwork=n,z.setChainNetworkData(t,{caipNetwork:n}),Ge.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Ol.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;ke.activeChain!==t.chainNamespace&&z.setIsSwitchingNamespace(!0);const e=ke.chains.get(t.chainNamespace);ke.activeChain=t.chainNamespace,ke.activeCaipNetwork=t,z.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?ke.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ke.activeCaipAddress=void 0,z.setAccountProp("caipAddress",ke.activeCaipAddress,t.chainNamespace),e&&qe.replaceState(e.accountState),dn.resetSend(),Ol.set({activeChain:ke.activeChain,selectedNetworkId:(i=ke.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ge.setActiveCaipNetworkId(t.caipNetworkId),!z.checkIfSupportedNetwork(t.chainNamespace)&&ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&!ht.state.wcBasic&&z.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=ke.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==z.state.activeChain,n=(s=z.getNetworkData(t))==null?void 0:s.caipNetwork,r=z.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await z.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=z.state.chains.get(z.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=ke.activeCaipNetwork)==null?void 0:o.id)})),r=z.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&ps.close()}catch{Ot.goBack()}or.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ke.activeChain,n=ke.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||ke.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=ke.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=ke.activeChain;if(e&&(n=e),!n)return;const r=(s=ke.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=ke.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=ke.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return nt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return ke.chains.forEach(e=>{const n=z.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){z.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=z.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Me.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return ke.chains.forEach(e=>{const n=z.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return ke.activeCaipNetwork},getActiveCaipAddress(){return ke.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=ke.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=z.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());z.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||ke.activeCaipNetwork,r=z.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!ke.activeChain)return!0;const e=z.getRequestedCaipNetworks(ke.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){z.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=tZ.caipNetworkIdToNumber((r=ke.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=ke.activeChain;if(!e||!t)return!1;const n=z.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=ke.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=ke.activeCaipNetwork)==null?void 0:s.id)||1,n=Rn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){ps.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ke.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Rn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){z.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");ke.activeCaipAddress=void 0,z.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Me.removeConnectorId(e)},setIsSwitchingNamespace(t){ke.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(ke.chains.forEach(s=>{Ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=ke.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=z.state.chains.get(t))==null?void 0:e.accountState:qe.state},getNetworkData(t){var n;const e=t||ke.activeChain;if(e)return(n=z.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=z.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Me.state.filterByNamespace;return(t?[ke.chains.get(t)]:Array.from(ke.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?z.getRequestedCaipNetworks(t):z.getAllRequestedCaipNetworks()}},z=ta(zSe),WSe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},aZ=nt.getBlockchainApiUrl(),Di=er({clientId:null,api:new A1({baseUrl:aZ,clientId:null}),supportedChains:{http:[],ws:[]}}),dt={state:Di,async get(t){const{st:e,sv:n}=dt.getSdkProperties(),r=ve.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Di.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ve.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Di.supportedChains.http.length||await dt.getSupportedNetworks()}catch{return!1}return Di.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await dt.get({path:"v1/supported-chains"});return Di.supportedChains=t,t}catch{return Di.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await dt.isNetworkSupported(e))return{avatar:"",name:""};const r=Ge.getIdentityFromCacheForAddress(t);if(r)return r;const s=await dt.get({path:`/v1/identity/${t}`,params:{sender:z.state.activeCaipAddress?nt.getPlainAddress(z.state.activeCaipAddress):void 0}});return Ge.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await dt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?dt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await dt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?dt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await dt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await dt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Di.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ve.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await dt.isNetworkSupported((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?dt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=dt.getSdkProperties();if(!await dt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return dt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await dt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Di.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Rn.CONVERT_SLIPPAGE_TOLERANCE},projectId:ve.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=dt.getSdkProperties();if(!await dt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return dt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=dt.getSdkProperties();if(!await dt.isNetworkSupported((l=z.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Ec.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ge.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await dt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ge.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await dt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await dt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/reverse/${t}`,params:{sender:qe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await dt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await dt.isNetworkSupported((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Di.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await dt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Di.api.post({path:"/v1/generators/onrampurl",params:{projectId:ve.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await dt.isNetworkSupported((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await dt.get({path:"/v1/onramp/options"})}catch{return WSe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await dt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Di.api.post({path:"/v1/onramp/quote",params:{projectId:ve.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await dt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await dt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Di.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ve.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Di.clientId=t,Di.api=new A1({baseUrl:aZ,clientId:t})}},ra=er({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),HSe={state:ra,replaceState(t){t&&Object.assign(ra,jg(t))},subscribe(t){return z.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return z.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){z.setAccountProp("status",t,e)},getCaipAddress(t){return z.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?nt.getPlainAddress(t):void 0;e===z.state.activeChain&&(z.state.activeCaipAddress=t),z.setAccountProp("caipAddress",t,e),z.setAccountProp("address",n,e)},setBalance(t,e,n){z.setAccountProp("balance",t,n),z.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){z.setAccountProp("profileName",t,e)},setProfileImage(t,e){z.setAccountProp("profileImage",t,e)},setUser(t,e){z.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){z.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){z.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){z.setAccountProp("currentTab",t,z.state.activeChain)},setTokenBalance(t,e){t&&z.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){z.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){z.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=z.getAccountProp("addressLabels",n)||new Map;r.set(t,e),z.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=z.getAccountProp("addressLabels",e)||new Map;n.delete(t),z.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){z.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){z.setAccountProp("preferredAccountTypes",{...ra.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){ra.preferredAccountTypes=t},setSocialProvider(t,e){t&&z.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){z.setAccountProp("socialWindow",t?jg(t):void 0,e)},setFarcasterUrl(t,e){z.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ra.balanceLoading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?nt.getPlainAddress(r):void 0;if(ra.lastRetry&&!nt.isAllowedRetry(ra.lastRetry,30*Rn.ONE_SEC_MS))return ra.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await dt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return qe.setTokenBalance(c,n),ra.lastRetry=void 0,ra.balanceLoading=!1,c}}catch(a){ra.lastRetry=Date.now(),t==null||t(a),Ec.showError("Token Balance Unavailable")}finally{ra.balanceLoading=!1}return[]},resetAccount(t){z.resetAccount(t)}},qe=ta(HSe),qSe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=z.state.activeCaipNetwork,r=Ot.state.data;if(t.id===(n==null?void 0:n.id))return;const i=qe.getCaipAddress(z.state.activeChain),o=t.chainNamespace!==z.state.activeChain,a=qe.getCaipAddress(t.chainNamespace),l=Me.getConnectorId(z.state.activeChain)===Ue.CONNECTOR_ID.AUTH,u=Ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ot.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ot.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ot.push("SwitchNetwork",{...r,network:t})}},$i=er({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),GSe={state:$i,subscribe(t){return ri($i,()=>t($i))},subscribeKey(t,e){return ii($i,t,e)},async open(t){var o,a;const e=qe.state.status==="connected",n=t==null?void 0:t.namespace,r=z.state.activeChain,s=n&&n!==r,i=(o=z.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(ht.state.wcBasic?it.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await it.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Me.setFilterByNamespace(t==null?void 0:t.namespace),ps.setLoading(!0,n),n&&s){const c=((a=z.getNetworkData(n))==null?void 0:a.caipNetwork)||z.getRequestedCaipNetworks(n)[0];c&&qSe.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=z.state.noAdapters;ve.state.manualWCControl||c&&!i?nt.isMobile()?Ot.reset("AllWallets"):Ot.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ot.reset(t.view,t.data):i?Ot.reset("Account"):Ot.reset("Connect")}$i.open=!0,Ol.set({open:!0}),or.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ve.state.enableEmbedded,e=!!z.state.activeCaipAddress;$i.open&&or.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),$i.open=!1,Ot.reset("Connect"),ps.clearLoading(),t?e?Ot.replace("Account"):Ot.push("Connect"):Ol.set({open:!1}),ht.resetUri()},setLoading(t,e){e&&$i.loadingNamespaceMap.set(e,t),$i.loading=t,Ol.set({loading:t})},clearLoading(){$i.loadingNamespaceMap.clear(),$i.loading=!1},shake(){$i.shake||($i.shake=!0,setTimeout(()=>{$i.shake=!1},500))}},ps=ta(GSe),NE={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},I3={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},VSe={providers:sZ,selectedProvider:null,error:null,purchaseCurrency:NE,paymentCurrency:I3,purchaseCurrencies:[NE],paymentCurrencies:[],quotesLoading:!1},Jt=er(VSe),KSe={state:Jt,subscribe(t){return ri(Jt,()=>t(Jt))},subscribeKey(t,e){return ii(Jt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=z.state.activeChain===Ue.CHAIN.SOLANA?"SOL":"USDC",n=qe.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",gSe),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ve.state.projectId),Jt.selectedProvider={...t,url:r.toString()}}else Jt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=sZ.filter(r=>e.includes(r.name));Jt.providers=n}else Jt.providers=[]},setPurchaseCurrency(t){Jt.purchaseCurrency=t},setPaymentCurrency(t){Jt.paymentCurrency=t},setPurchaseAmount(t){N3.state.purchaseAmount=t},setPaymentAmount(t){N3.state.paymentAmount=t},async getAvailableCurrencies(){const t=await dt.getOnrampOptions();Jt.purchaseCurrencies=t.purchaseCurrencies,Jt.paymentCurrencies=t.paymentCurrencies,Jt.paymentCurrency=t.paymentCurrencies[0]||I3,Jt.purchaseCurrency=t.purchaseCurrencies[0]||NE,await it.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await it.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Jt.quotesLoading=!0;try{const n=await dt.getOnrampQuote({purchaseCurrency:Jt.purchaseCurrency,paymentCurrency:Jt.paymentCurrency,amount:((t=Jt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Jt.purchaseCurrency)==null?void 0:e.symbol});return Jt.quotesLoading=!1,Jt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Jt.error=n.message,Jt.quotesLoading=!1,null}finally{Jt.quotesLoading=!1}},resetState(){Jt.selectedProvider=null,Jt.error=null,Jt.purchaseCurrency=NE,Jt.paymentCurrency=I3,Jt.purchaseCurrencies=[NE],Jt.paymentCurrencies=[],Jt.paymentAmount=void 0,Jt.purchaseAmount=void 0,Jt.quotesLoading=!1}},N3=ta(KSe),bj=2147483648,YSe={convertEVMChainIdToCoinType(t){if(t>=bj)throw new Error("Invalid chainId");return(bj|t)>>>0}},sa=er({suggestions:[],loading:!1}),QSe={state:sa,subscribe(t){return ri(sa,()=>t(sa))},subscribeKey(t,e){return ii(sa,t,e)},async resolveName(t){var e,n;try{return await dt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await dt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{sa.loading=!0,sa.suggestions=[];const e=await dt.getEnsNameSuggestions(t);return sa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],sa.suggestions}catch(e){const n=TE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{sa.loading=!1}},async getNamesForAddress(t){try{if(!z.state.activeCaipNetwork)return[];const n=Ge.getEnsFromCacheForAddress(t);if(n)return n;const r=await dt.reverseLookupEnsName({address:t});return Ge.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=TE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=z.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=qe.state.address,r=Me.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");sa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ot.pushTransactionStack({onCancel(){Ot.replace("RegisterAccountName")}});const i=await ht.signMessage(s);sa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=YSe.convertEVMChainIdToCoinType(Number(o));await dt.registerEnsName({coinType:a,address:n,signature:i,message:s}),qe.setProfileName(t,e.chainNamespace),Ot.replace("RegisterAccountNameSuccess")}catch(s){const i=TE.parseEnsApiError(s,`Error registering name ${t}`);throw Ot.replace("RegisterAccountName"),new Error(i)}finally{sa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},TE=ta(QSe);var nU={exports:{}},cw=typeof Reflect=="object"?Reflect:null,vj=cw&&typeof cw.apply=="function"?cw.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},KS;cw&&typeof cw.ownKeys=="function"?KS=cw.ownKeys:Object.getOwnPropertySymbols?KS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:KS=function(e){return Object.getOwnPropertyNames(e)};function JSe(t){console&&console.warn&&console.warn(t)}var cZ=Number.isNaN||function(e){return e!==e};function kn(){kn.init.call(this)}nU.exports=kn;nU.exports.once=txe;kn.EventEmitter=kn;kn.prototype._events=void 0;kn.prototype._eventsCount=0;kn.prototype._maxListeners=void 0;var Ej=10;function PT(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(kn,"defaultMaxListeners",{enumerable:!0,get:function(){return Ej},set:function(t){if(typeof t!="number"||t<0||cZ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Ej=t}});kn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};kn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||cZ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function lZ(t){return t._maxListeners===void 0?kn.defaultMaxListeners:t._maxListeners}kn.prototype.getMaxListeners=function(){return lZ(this)};kn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")vj(c,this,n);else for(var l=c.length,u=pZ(c,l),r=0;r<l;++r)vj(u[r],this,n);return!0};function uZ(t,e,n,r){var s,i,o;if(PT(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=lZ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,JSe(a)}return t}kn.prototype.addListener=function(e,n){return uZ(this,e,n,!1)};kn.prototype.on=kn.prototype.addListener;kn.prototype.prependListener=function(e,n){return uZ(this,e,n,!0)};function ZSe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function dZ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=ZSe.bind(r);return s.listener=n,r.wrapFn=s,s}kn.prototype.once=function(e,n){return PT(n),this.on(e,dZ(this,e,n)),this};kn.prototype.prependOnceListener=function(e,n){return PT(n),this.prependListener(e,dZ(this,e,n)),this};kn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(PT(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():XSe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};kn.prototype.off=kn.prototype.removeListener;kn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function hZ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?exe(s):pZ(s,s.length)}kn.prototype.listeners=function(e){return hZ(this,e,!0)};kn.prototype.rawListeners=function(e){return hZ(this,e,!1)};kn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):fZ.call(t,e)};kn.prototype.listenerCount=fZ;function fZ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}kn.prototype.eventNames=function(){return this._eventsCount>0?KS(this._events):[]};function pZ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function XSe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function exe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function txe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}gZ(t,e,i,{once:!0}),e!=="error"&&nxe(t,s,{once:!0})})}function nxe(t,e,n){typeof t.on=="function"&&gZ(t,"error",e,n)}function gZ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ba=nU.exports;const rU=sm(Ba);var Se={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T3=function(t,e){return T3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},T3(t,e)};function rxe(t,e){T3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var R3=function(){return R3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},R3.apply(this,arguments)};function sxe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ixe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function oxe(t,e){return function(n,r){e(n,r,t)}}function axe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function cxe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function lxe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function uxe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function dxe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function P3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mZ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function hxe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(mZ(arguments[e]));return t}function fxe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function G_(t){return this instanceof G_?(this.v=t,this):new G_(t)}function pxe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof G_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function gxe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:G_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function mxe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof P3=="function"?P3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function yxe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function wxe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function bxe(t){return t&&t.__esModule?t:{default:t}}function vxe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Exe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const _xe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return R3},__asyncDelegator:gxe,__asyncGenerator:pxe,__asyncValues:mxe,__await:G_,__awaiter:cxe,__classPrivateFieldGet:vxe,__classPrivateFieldSet:Exe,__createBinding:uxe,__decorate:ixe,__exportStar:dxe,__extends:rxe,__generator:lxe,__importDefault:bxe,__importStar:wxe,__makeTemplateObject:yxe,__metadata:axe,__param:oxe,__read:mZ,__rest:sxe,__spread:hxe,__spreadArrays:fxe,__values:P3},Symbol.toStringTag,{value:"Module"})),kT=yL(_xe);var _k={},wv={},_j;function Cxe(){if(_j)return wv;_j=1,Object.defineProperty(wv,"__esModule",{value:!0}),wv.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return wv.delay=t,wv}var Wf={},Ck={},Hf={},Cj;function Axe(){return Cj||(Cj=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.ONE_THOUSAND=Hf.ONE_HUNDRED=void 0,Hf.ONE_HUNDRED=100,Hf.ONE_THOUSAND=1e3),Hf}var Ak={},Aj;function Sxe(){return Aj||(Aj=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Ak)),Ak}var Sj;function yZ(){return Sj||(Sj=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kT;e.__exportStar(Axe(),t),e.__exportStar(Sxe(),t)}(Ck)),Ck}var xj;function xxe(){if(xj)return Wf;xj=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.fromMiliseconds=Wf.toMiliseconds=void 0;const t=yZ();function e(r){return r*t.ONE_THOUSAND}Wf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Wf.fromMiliseconds=n,Wf}var Ij;function Ixe(){return Ij||(Ij=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kT;e.__exportStar(Cxe(),t),e.__exportStar(xxe(),t)}(_k)),_k}var zm={},Nj;function Nxe(){if(Nj)return zm;Nj=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return zm.Watch=t,zm.default=t,zm}var Sk={},bv={},Tj;function Txe(){if(Tj)return bv;Tj=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.IWatch=void 0;class t{}return bv.IWatch=t,bv}var Rj;function Rxe(){return Rj||(Rj=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),kT.__exportStar(Txe(),t)}(Sk)),Sk}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kT;e.__exportStar(Ixe(),t),e.__exportStar(Nxe(),t),e.__exportStar(Rxe(),t),e.__exportStar(yZ(),t)})(Se);class ym{}let Pxe=class extends ym{constructor(e){super()}};const Pj=Se.FIVE_SECONDS,wm={pulse:"heartbeat_pulse"};let kxe=class wZ extends Pxe{constructor(e){super(e),this.events=new Ba.EventEmitter,this.interval=Pj,this.interval=(e==null?void 0:e.interval)||Pj}static async init(e){const n=new wZ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Se.toMiliseconds(this.interval))}pulse(){this.events.emit(wm.pulse)}};const Oxe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Dxe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,$xe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Lxe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Mxe(t);return}return e}function Mxe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function FA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!$xe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Oxe.test(t)||Dxe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Lxe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function bm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function bZ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=bm(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let xk;function S1(){return xk||(xk=bZ("keyval-store","keyval")),xk}function kj(t,e=S1()){return e("readonly",n=>bm(n.get(t)))}function Uxe(t,e,n=S1()){return n("readwrite",r=>(r.put(e,t),bm(r.transaction)))}function Bxe(t,e=S1()){return e("readwrite",n=>(n.delete(t),bm(n.transaction)))}function jxe(t=S1()){return t("readwrite",e=>(e.clear(),bm(e.transaction)))}function Fxe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},bm(t.transaction)}function zxe(t=S1()){return t("readonly",e=>{if(e.getAllKeys)return bm(e.getAllKeys());const n=[];return Fxe(e,r=>n.push(r.key)).then(()=>n)})}const Wxe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Hxe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function zg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Hxe(t)}catch{return t}}function ud(t){return typeof t=="string"?t:Wxe(t)||""}function qxe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Gxe=Vxe;function Vxe(t,e,n){var r=n&&n.stringify||qxe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const Oj=Gxe;var yy=Dl;const V_=rIe().console||{},Kxe={mapHttpRequest:zA,mapHttpResponse:zA,wrapRequestSerializer:Ik,wrapResponseSerializer:Ik,wrapErrorSerializer:Ik,req:zA,res:zA,err:Xxe};function Yxe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Dl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||V_;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Yxe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=K_),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:eIe(t)};c.levels=Dl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=K_,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=k3());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Wm(l,c,"error","log"),Wm(l,c,"fatal","error"),Wm(l,c,"warn","error"),Wm(l,c,"info","log"),Wm(l,c,"debug","log"),Wm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var m=Object.assign({},r,y),b=t.browser.serialize===!0?Object.keys(m):s;delete p.serializers,OT([p],b,m,this._stdErrSerialize)}function v(C){this._childLevel=(C._childLevel|0)+1,this.error=Hm(C,p,"error"),this.fatal=Hm(C,p,"fatal"),this.warn=Hm(C,p,"warn"),this.info=Hm(C,p,"info"),this.debug=Hm(C,p,"debug"),this.trace=Hm(C,p,"trace"),m&&(this.serializers=m,this._serialize=b),e&&(this._logEvent=k3([].concat(C._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Dl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Dl.stdSerializers=Kxe;Dl.stdTimeFunctions=Object.assign({},{nullTime:vZ,epochTime:EZ,unixTime:tIe,isoTime:nIe});function Wm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?K_:s[n]?s[n]:V_[n]||V_[r]||K_,Qxe(t,e,n)}function Qxe(t,e,n){!t.transmit&&e[n]===K_||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===V_?V_:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&OT(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Jxe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Dl.levels.values[l],d=Dl.levels.values[n];if(d<u)return;Zxe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Dl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Jxe(t,e,n,r){t._serialize&&OT(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Dl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?Oj(s.shift(),s):void 0}else typeof i=="string"&&(i=Oj(s.shift(),s));return i!==void 0&&(o.msg=i),o}function OT(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Dl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Hm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Zxe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;OT(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=k3(c)}function k3(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Xxe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function eIe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?vZ:EZ}function zA(){return{}}function Ik(t){return t}function K_(){}function vZ(){return!1}function EZ(){return Date.now()}function tIe(){return Math.round(Date.now()/1e3)}function nIe(){return new Date(Date.now()).toISOString()}function rIe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const x1=sm(yy),sIe={level:"info"},I1="custom_context",sU=1e3*1024;let iIe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Dj=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new iIe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},_Z=class{constructor(e,n=sU){this.level=e??"error",this.levelValue=yy.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Dj(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===yy.levels.values.error?console.error(e):n===yy.levels.values.warn?console.warn(e):n===yy.levels.values.debug?console.debug(e):n===yy.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ud({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Dj(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(ud({extraMetadata:e})),new Blob(n,{type:"application/json"})}},oIe=class{constructor(e,n=sU){this.baseChunkLogger=new _Z(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},aIe=class{constructor(e,n=sU){this.baseChunkLogger=new _Z(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var cIe=Object.defineProperty,lIe=Object.defineProperties,uIe=Object.getOwnPropertyDescriptors,$j=Object.getOwnPropertySymbols,dIe=Object.prototype.hasOwnProperty,hIe=Object.prototype.propertyIsEnumerable,Lj=(t,e,n)=>e in t?cIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AI=(t,e)=>{for(var n in e||(e={}))dIe.call(e,n)&&Lj(t,n,e[n]);if($j)for(var n of $j(e))hIe.call(e,n)&&Lj(t,n,e[n]);return t},SI=(t,e)=>lIe(t,uIe(e));function vm(t){return SI(AI({},t),{level:(t==null?void 0:t.level)||sIe.level})}function fIe(t,e=I1){return t[e]||""}function pIe(t,e,n=I1){return t[n]=e,t}function bo(t,e=I1){let n="";return typeof t.bindings>"u"?n=fIe(t,e):n=t.bindings().context||"",n}function gIe(t,e,n=I1){const r=bo(t,n);return r.trim()?`${r}/${e}`:e}function Us(t,e,n=I1){const r=gIe(t,e,n),s=t.child({context:r});return pIe(s,r,n)}function mIe(t){var e,n;const r=new oIe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:x1(SI(AI({},t.opts),{level:"trace",browser:SI(AI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function yIe(t){var e;const n=new aIe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:x1(SI(AI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function DT(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?mIe(t):yIe(t)}function wIe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function CZ(t,...e){if(!wIe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Mj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bIe(t,e){CZ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const qm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nk=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function vIe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function AZ(t){return typeof t=="string"&&(t=vIe(t)),CZ(t),t}let EIe=class{clone(){return this._cloneInto()}};function _Ie(t){const e=r=>t().update(AZ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function SZ(t=32){if(qm&&typeof qm.getRandomValues=="function")return qm.getRandomValues(new Uint8Array(t));if(qm&&typeof qm.randomBytes=="function")return qm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function CIe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let AIe=class extends EIe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Nk(this.buffer)}update(e){Mj(this);const{view:n,buffer:r,blockLen:s}=this;e=AZ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Nk(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Mj(this),bIe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;CIe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Nk(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const WA=BigInt(2**32-1),O3=BigInt(32);function xZ(t,e=!1){return e?{h:Number(t&WA),l:Number(t>>O3&WA)}:{h:Number(t>>O3&WA)|0,l:Number(t&WA)|0}}function SIe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=xZ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const xIe=(t,e)=>BigInt(t>>>0)<<O3|BigInt(e>>>0),IIe=(t,e,n)=>t>>>n,NIe=(t,e,n)=>t<<32-n|e>>>n,TIe=(t,e,n)=>t>>>n|e<<32-n,RIe=(t,e,n)=>t<<32-n|e>>>n,PIe=(t,e,n)=>t<<64-n|e>>>n-32,kIe=(t,e,n)=>t>>>n-32|e<<64-n,OIe=(t,e)=>e,DIe=(t,e)=>t,$Ie=(t,e,n)=>t<<n|e>>>32-n,LIe=(t,e,n)=>e<<n|t>>>32-n,MIe=(t,e,n)=>e<<n-32|t>>>64-n,UIe=(t,e,n)=>t<<n-32|e>>>64-n;function BIe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const jIe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),FIe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,zIe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),WIe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,HIe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),qIe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Pt={fromBig:xZ,split:SIe,toBig:xIe,shrSH:IIe,shrSL:NIe,rotrSH:TIe,rotrSL:RIe,rotrBH:PIe,rotrBL:kIe,rotr32H:OIe,rotr32L:DIe,rotlSH:$Ie,rotlSL:LIe,rotlBH:MIe,rotlBL:UIe,add:BIe,add3L:jIe,add3H:FIe,add4L:zIe,add4H:WIe,add5H:qIe,add5L:HIe},[GIe,VIe]=Pt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Rd=new Uint32Array(80),Pd=new Uint32Array(80);let KIe=class extends AIe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Rd[v]=e.getUint32(n),Pd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const C=Rd[v-15]|0,A=Pd[v-15]|0,S=Pt.rotrSH(C,A,1)^Pt.rotrSH(C,A,8)^Pt.shrSH(C,A,7),x=Pt.rotrSL(C,A,1)^Pt.rotrSL(C,A,8)^Pt.shrSL(C,A,7),R=Rd[v-2]|0,I=Pd[v-2]|0,O=Pt.rotrSH(R,I,19)^Pt.rotrBH(R,I,61)^Pt.shrSH(R,I,6),P=Pt.rotrSL(R,I,19)^Pt.rotrBL(R,I,61)^Pt.shrSL(R,I,6),B=Pt.add4L(x,P,Pd[v-7],Pd[v-16]),H=Pt.add4H(B,S,O,Rd[v-7],Rd[v-16]);Rd[v]=H|0,Pd[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const C=Pt.rotrSH(d,h,14)^Pt.rotrSH(d,h,18)^Pt.rotrBH(d,h,41),A=Pt.rotrSL(d,h,14)^Pt.rotrSL(d,h,18)^Pt.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,R=Pt.add5L(b,A,x,VIe[v],Pd[v]),I=Pt.add5H(R,m,C,S,GIe[v],Rd[v]),O=R|0,P=Pt.rotrSH(r,s,28)^Pt.rotrBH(r,s,34)^Pt.rotrBH(r,s,39),B=Pt.rotrSL(r,s,28)^Pt.rotrBL(r,s,34)^Pt.rotrBL(r,s,39),H=r&i^r&a^i&a,j=s&o^s&c^o&c;m=g|0,b=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Pt.add(l|0,u|0,I|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=Pt.add3L(O,B,j);r=Pt.add3H(T,I,P,H),s=T|0}({h:r,l:s}=Pt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Pt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Pt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Pt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Pt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Pt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Pt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:b}=Pt.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,b)}roundClean(){Rd.fill(0),Pd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const YIe=_Ie(()=>new KIe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iU=BigInt(0),IZ=BigInt(1),QIe=BigInt(2);function oU(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function aU(t){if(!oU(t))throw new Error("Uint8Array expected")}function Tk(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const JIe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cU(t){aU(t);let e="";for(let n=0;n<t.length;n++)e+=JIe[t[n]];return e}function NZ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?iU:BigInt("0x"+t)}const ru={_0:48,_9:57,A:65,F:70,a:97,f:102};function Uj(t){if(t>=ru._0&&t<=ru._9)return t-ru._0;if(t>=ru.A&&t<=ru.F)return t-(ru.A-10);if(t>=ru.a&&t<=ru.f)return t-(ru.a-10)}function TZ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Uj(t.charCodeAt(i)),a=Uj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function ZIe(t){return NZ(cU(t))}function YS(t){return aU(t),NZ(cU(Uint8Array.from(t).reverse()))}function RZ(t,e){return TZ(t.toString(16).padStart(e*2,"0"))}function D3(t,e){return RZ(t,e).reverse()}function su(t,e,n){let r;if(typeof e=="string")try{r=TZ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(oU(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Bj(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];aU(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Rk=t=>typeof t=="bigint"&&iU<=t;function XIe(t,e,n){return Rk(t)&&Rk(e)&&Rk(n)&&e<=t&&t<n}function vv(t,e,n,r){if(!XIe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function eNe(t){let e;for(e=0;t>iU;t>>=IZ,e+=1);return e}const tNe=t=>(QIe<<BigInt(t-1))-IZ,nNe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||oU(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function lU(t,e,n={}){const r=(s,i,o)=>{const a=nNe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function jj(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const gs=BigInt(0),Pr=BigInt(1),up=BigInt(2),rNe=BigInt(3),$3=BigInt(4),Fj=BigInt(5),zj=BigInt(8);function qr(t,e){const n=t%e;return n>=gs?n:e+n}function sNe(t,e,n){if(e<gs)throw new Error("invalid exponent, negatives unsupported");if(n<=gs)throw new Error("invalid modulus");if(n===Pr)return gs;let r=Pr;for(;e>gs;)e&Pr&&(r=r*t%n),t=t*t%n,e>>=Pr;return r}function Vc(t,e,n){let r=t;for(;e-- >gs;)r*=r,r%=n;return r}function Wj(t,e){if(t===gs)throw new Error("invert: expected non-zero number");if(e<=gs)throw new Error("invert: expected positive modulus, got "+e);let n=qr(t,e),r=e,s=gs,i=Pr;for(;n!==gs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Pr)throw new Error("invert: does not exist");return qr(s,e)}function iNe(t){const e=(t-Pr)/up;let n,r,s;for(n=t-Pr,r=0;n%up===gs;n/=up,r++);for(s=up;s<t&&sNe(s,e,t)!==t-Pr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Pr)/$3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Pr)/up;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Pr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function oNe(t){if(t%$3===rNe){const e=(t+Pr)/$3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%zj===Fj){const e=(t-Fj)/zj;return function(n,r){const s=n.mul(r,up),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,up),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return iNe(t)}const aNe=(t,e)=>(qr(t,e)&Pr)===Pr,cNe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lNe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=cNe.reduce((r,s)=>(r[s]="function",r),e);return lU(t,n)}function uNe(t,e,n){if(n<gs)throw new Error("invalid exponent, negatives unsupported");if(n===gs)return t.ONE;if(n===Pr)return e;let r=t.ONE,s=e;for(;n>gs;)n&Pr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Pr;return r}function dNe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function PZ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function kZ(t,e,n=!1,r={}){if(t<=gs)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=PZ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:tNe(s),ZERO:gs,ONE:Pr,create:c=>qr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return gs<=c&&c<t},is0:c=>c===gs,isOdd:c=>(c&Pr)===Pr,neg:c=>qr(-c,t),eql:(c,l)=>c===l,sqr:c=>qr(c*c,t),add:(c,l)=>qr(c+l,t),sub:(c,l)=>qr(c-l,t),mul:(c,l)=>qr(c*l,t),pow:(c,l)=>uNe(a,c,l),div:(c,l)=>qr(c*Wj(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Wj(c,t),sqrt:r.sqrt||(c=>(o||(o=oNe(t)),o(a,c))),invertBatch:c=>dNe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?D3(c,i):RZ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?YS(c):ZIe(c)}});return Object.freeze(a)}const Hj=BigInt(0),HA=BigInt(1);function Pk(t,e){const n=e.negate();return t?n:e}function OZ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kk(t,e){OZ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function hNe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function fNe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Ok=new WeakMap,DZ=new WeakMap;function Dk(t){return DZ.get(t)||1}function pNe(t,e){return{constTimeNegate:Pk,hasPrecomputes(n){return Dk(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Hj;)r&HA&&(s=s.add(i)),i=i.double(),r>>=HA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=kk(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=kk(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=HA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(Pk(m,r[g])):a=a.add(Pk(b,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=kk(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===Hj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=HA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=Ok.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Ok.set(r,s(i))),i},wNAFCached(n,r,s){const i=Dk(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Dk(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){OZ(r,e),DZ.set(n,r),Ok.delete(n)}}}function gNe(t,e,n,r){if(hNe(n,t),fNe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=eNe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function mNe(t){return lNe(t.Fp),lU(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...PZ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Ga=BigInt(0),Li=BigInt(1),qA=BigInt(2),yNe=BigInt(8),wNe={zip215:!0};function bNe(t){const e=mNe(t);return lU(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function vNe(t){const e=bNe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=qA<<BigInt(a*8)-Li,u=n.create,d=kZ(e.n,e.nBitLength),h=e.uvRatio||((T,N)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(N))}}catch{return{isValid:!1,value:Ga}}}),f=e.adjustScalarBytes||(T=>T),p=e.domain||((T,N,M)=>{if(Tk("phflag",M),N.length||M)throw new Error("Contexts/pre-hash are not supported");return T});function g(T,N){vv("coordinate "+T,N,Ga,l)}function y(T){if(!(T instanceof v))throw new Error("ExtendedPoint expected")}const m=jj((T,N)=>{const{ex:M,ey:k,ez:D}=T,U=T.is0();N==null&&(N=U?yNe:n.inv(D));const q=u(M*N),X=u(k*N),ae=u(D*N);if(U)return{x:Ga,y:Li};if(ae!==Li)throw new Error("invZ was invalid");return{x:q,y:X}}),b=jj(T=>{const{a:N,d:M}=e;if(T.is0())throw new Error("bad point: ZERO");const{ex:k,ey:D,ez:U,et:q}=T,X=u(k*k),ae=u(D*D),oe=u(U*U),le=u(oe*oe),Ee=u(X*N),Z=u(oe*u(Ee+ae)),ce=u(le+u(M*u(X*ae)));if(Z!==ce)throw new Error("bad point: equation left != right (1)");const fe=u(k*D),ne=u(U*q);if(fe!==ne)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(N,M,k,D){this.ex=N,this.ey=M,this.ez=k,this.et=D,g("x",N),g("y",M),g("z",k),g("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof v)throw new Error("extended point not allowed");const{x:M,y:k}=N||{};return g("x",M),g("y",k),new v(M,k,Li,u(M*k))}static normalizeZ(N){const M=n.invertBatch(N.map(k=>k.ez));return N.map((k,D)=>k.toAffine(M[D])).map(v.fromAffine)}static msm(N,M){return gNe(v,d,N,M)}_setWindowSize(N){S.setWindowSize(this,N)}assertValidity(){b(this)}equals(N){y(N);const{ex:M,ey:k,ez:D}=this,{ex:U,ey:q,ez:X}=N,ae=u(M*X),oe=u(U*D),le=u(k*X),Ee=u(q*D);return ae===oe&&le===Ee}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:M,ey:k,ez:D}=this,U=u(M*M),q=u(k*k),X=u(qA*u(D*D)),ae=u(N*U),oe=M+k,le=u(u(oe*oe)-U-q),Ee=ae+q,Z=Ee-X,ce=ae-q,fe=u(le*Z),ne=u(Ee*ce),ye=u(le*ce),Ne=u(Z*Ee);return new v(fe,ne,Ne,ye)}add(N){y(N);const{a:M,d:k}=e,{ex:D,ey:U,ez:q,et:X}=this,{ex:ae,ey:oe,ez:le,et:Ee}=N;if(M===BigInt(-1)){const wn=u((U-D)*(oe+ae)),en=u((U+D)*(oe-ae)),nr=u(en-wn);if(nr===Ga)return this.double();const mr=u(q*qA*Ee),zs=u(X*qA*le),vo=zs+mr,es=en+wn,oi=zs-mr,Ws=u(vo*nr),Lf=u(es*oi),Wa=u(vo*oi),Im=u(nr*es);return new v(Ws,Lf,Im,Wa)}const Z=u(D*ae),ce=u(U*oe),fe=u(X*k*Ee),ne=u(q*le),ye=u((D+U)*(ae+oe)-Z-ce),Ne=ne-fe,de=ne+fe,_e=u(ce-M*Z),Ye=u(ye*Ne),rt=u(de*_e),un=u(ye*_e),An=u(Ne*de);return new v(Ye,rt,An,un)}subtract(N){return this.add(N.negate())}wNAF(N){return S.wNAFCached(this,N,v.normalizeZ)}multiply(N){const M=N;vv("scalar",M,Li,r);const{p:k,f:D}=this.wNAF(M);return v.normalizeZ([k,D])[0]}multiplyUnsafe(N,M=v.ZERO){const k=N;return vv("scalar",k,Ga,r),k===Ga?A:this.is0()||k===Li?this:S.wNAFCachedUnsafe(this,k,v.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(N){return m(this,N)}clearCofactor(){const{h:N}=e;return N===Li?this:this.multiplyUnsafe(N)}static fromHex(N,M=!1){const{d:k,a:D}=e,U=n.BYTES;N=su("pointHex",N,U),Tk("zip215",M);const q=N.slice(),X=N[U-1];q[U-1]=X&-129;const ae=YS(q),oe=M?l:n.ORDER;vv("pointHex.y",ae,Ga,oe);const le=u(ae*ae),Ee=u(le-Li),Z=u(k*le-D);let{isValid:ce,value:fe}=h(Ee,Z);if(!ce)throw new Error("Point.fromHex: invalid y coordinate");const ne=(fe&Li)===Li,ye=(X&128)!==0;if(!M&&fe===Ga&&ye)throw new Error("Point.fromHex: x=0 and x_0=1");return ye!==ne&&(fe=u(-fe)),v.fromAffine({x:fe,y:ae})}static fromPrivateKey(N){return I(N).point}toRawBytes(){const{x:N,y:M}=this.toAffine(),k=D3(M,n.BYTES);return k[k.length-1]|=N&Li?128:0,k}toHex(){return cU(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Li,u(e.Gx*e.Gy)),v.ZERO=new v(Ga,Li,Li,Ga);const{BASE:C,ZERO:A}=v,S=pNe(v,a*8);function x(T){return qr(T,r)}function R(T){return x(YS(T))}function I(T){const N=n.BYTES;T=su("private key",T,N);const M=su("hashed private key",i(T),2*N),k=f(M.slice(0,N)),D=M.slice(N,2*N),U=R(k),q=C.multiply(U),X=q.toRawBytes();return{head:k,prefix:D,scalar:U,point:q,pointBytes:X}}function O(T){return I(T).pointBytes}function P(T=new Uint8Array,...N){const M=Bj(...N);return R(i(p(M,su("context",T),!!s)))}function B(T,N,M={}){T=su("message",T),s&&(T=s(T));const{prefix:k,scalar:D,pointBytes:U}=I(N),q=P(M.context,k,T),X=C.multiply(q).toRawBytes(),ae=P(M.context,X,U,T),oe=x(q+ae*D);vv("signature.s",oe,Ga,r);const le=Bj(X,D3(oe,n.BYTES));return su("result",le,n.BYTES*2)}const H=wNe;function j(T,N,M,k=H){const{context:D,zip215:U}=k,q=n.BYTES;T=su("signature",T,2*q),N=su("message",N),M=su("publicKey",M,q),U!==void 0&&Tk("zip215",U),s&&(N=s(N));const X=YS(T.slice(q,2*q));let ae,oe,le;try{ae=v.fromHex(M,U),oe=v.fromHex(T.slice(0,q),U),le=C.multiplyUnsafe(X)}catch{return!1}if(!U&&ae.isSmallOrder())return!1;const Ee=P(D,oe.toRawBytes(),ae.toRawBytes(),N);return oe.add(ae.multiplyUnsafe(Ee)).subtract(le).clearCofactor().equals(v.ZERO)}return C._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:B,verify:j,ExtendedPoint:v,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,N=v.BASE){return N._setWindowSize(T),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const uU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),qj=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ENe=BigInt(1),Gj=BigInt(2);BigInt(3);const _Ne=BigInt(5),CNe=BigInt(8);function ANe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=uU,o=t*t%i*t%i,a=Vc(o,Gj,i)*o%i,c=Vc(a,ENe,i)*t%i,l=Vc(c,_Ne,i)*c%i,u=Vc(l,e,i)*l%i,d=Vc(u,n,i)*u%i,h=Vc(d,r,i)*d%i,f=Vc(h,s,i)*h%i,p=Vc(f,s,i)*h%i,g=Vc(p,e,i)*l%i;return{pow_p_5_8:Vc(g,Gj,i)*t%i,b2:o}}function SNe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function xNe(t,e){const n=uU,r=qr(e*e*e,n),s=qr(r*r*e,n),i=ANe(t*s).pow_p_5_8;let o=qr(t*r*i,n);const a=qr(e*o*o,n),c=o,l=qr(o*qj,n),u=a===t,d=a===qr(-t,n),h=a===qr(-t*qj,n);return u&&(o=c),(d||h)&&(o=l),aNe(o,n)&&(o=qr(-o,n)),{isValid:u||d,value:o}}const INe=kZ(uU,void 0,!0),NNe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:INe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:CNe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:YIe,randomBytes:SZ,adjustScalarBytes:SNe,uvRatio:xNe},$Z=vNe(NNe),TNe="EdDSA",RNe="JWT",xI=".",$T="base64url",LZ="utf8",MZ="utf8",PNe=":",kNe="did",ONe="key",Vj="base58btc",DNe="z",$Ne="K36",LNe=32;function dU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function UZ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?dU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function BZ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=UZ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return dU(n)}function MNe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,C=new Uint8Array(v);m!==b;){for(var A=p[m],S=0,x=v-1;(A!==0||S<y)&&x!==-1;x--,S++)A+=256*C[x]>>>0,C[x]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");y=S,m++}for(var R=v-y;R!==v&&C[R]===0;)R++;for(var I=c.repeat(g);R<v;++R)I+=t.charAt(C[R]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var C=n[p.charCodeAt(g)];if(C===255)return;for(var A=0,S=b-1;(C!==0||A<m)&&S!==-1;S--,A++)C+=a*v[S]>>>0,v[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");m=A,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var R=new Uint8Array(y+(b-x)),I=y;x!==b;)R[I++]=v[x++];return R}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var UNe=MNe,BNe=UNe;const jZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},jNe=t=>new TextEncoder().encode(t),FNe=t=>new TextDecoder().decode(t);let zNe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},WNe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return FZ(this,e)}},HNe=class{constructor(e){this.decoders=e}or(e){return FZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const FZ=(t,e)=>new HNe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let qNe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new zNe(e,n,r),this.decoder=new WNe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const LT=({name:t,prefix:e,encode:n,decode:r})=>new qNe(t,e,n,r),N1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=BNe(n,e);return LT({prefix:t,name:e,encode:r,decode:i=>jZ(s(i))})},GNe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},VNe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Bs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>LT({prefix:e,name:t,encode(s){return VNe(s,r,n)},decode(s){return GNe(s,r,n,t)}}),KNe=LT({prefix:"\0",name:"identity",encode:t=>FNe(t),decode:t=>jNe(t)});var YNe=Object.freeze({__proto__:null,identity:KNe});const QNe=Bs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var JNe=Object.freeze({__proto__:null,base2:QNe});const ZNe=Bs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var XNe=Object.freeze({__proto__:null,base8:ZNe});const eTe=N1({prefix:"9",name:"base10",alphabet:"0123456789"});var tTe=Object.freeze({__proto__:null,base10:eTe});const nTe=Bs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rTe=Bs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var sTe=Object.freeze({__proto__:null,base16:nTe,base16upper:rTe});const iTe=Bs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),oTe=Bs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),aTe=Bs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cTe=Bs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lTe=Bs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uTe=Bs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),dTe=Bs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hTe=Bs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fTe=Bs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var pTe=Object.freeze({__proto__:null,base32:iTe,base32upper:oTe,base32pad:aTe,base32padupper:cTe,base32hex:lTe,base32hexupper:uTe,base32hexpad:dTe,base32hexpadupper:hTe,base32z:fTe});const gTe=N1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mTe=N1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var yTe=Object.freeze({__proto__:null,base36:gTe,base36upper:mTe});const wTe=N1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bTe=N1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vTe=Object.freeze({__proto__:null,base58btc:wTe,base58flickr:bTe});const ETe=Bs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_Te=Bs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),CTe=Bs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ATe=Bs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var STe=Object.freeze({__proto__:null,base64:ETe,base64pad:_Te,base64url:CTe,base64urlpad:ATe});const zZ=Array.from(""),xTe=zZ.reduce((t,e,n)=>(t[n]=e,t),[]),ITe=zZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function NTe(t){return t.reduce((e,n)=>(e+=xTe[n],e),"")}function TTe(t){const e=[];for(const n of t){const r=ITe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const RTe=LT({prefix:"",name:"base256emoji",encode:NTe,decode:TTe});var PTe=Object.freeze({__proto__:null,base256emoji:RTe}),kTe=WZ,Kj=128,OTe=-128,DTe=Math.pow(2,31);function WZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=DTe;)e[n++]=t&255|Kj,t/=128;for(;t&OTe;)e[n++]=t&255|Kj,t>>>=7;return e[n]=t|0,WZ.bytes=n-r+1,e}var $Te=L3,LTe=128,Yj=127;function L3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw L3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Yj)<<s:(o&Yj)*Math.pow(2,s),s+=7}while(o>=LTe);return L3.bytes=i-r,n}var MTe=Math.pow(2,7),UTe=Math.pow(2,14),BTe=Math.pow(2,21),jTe=Math.pow(2,28),FTe=Math.pow(2,35),zTe=Math.pow(2,42),WTe=Math.pow(2,49),HTe=Math.pow(2,56),qTe=Math.pow(2,63),GTe=function(t){return t<MTe?1:t<UTe?2:t<BTe?3:t<jTe?4:t<FTe?5:t<zTe?6:t<WTe?7:t<HTe?8:t<qTe?9:10},VTe={encode:kTe,decode:$Te,encodingLength:GTe},HZ=VTe;const Qj=(t,e,n=0)=>(HZ.encode(t,e,n),e),Jj=t=>HZ.encodingLength(t),M3=(t,e)=>{const n=e.byteLength,r=Jj(t),s=r+Jj(n),i=new Uint8Array(s+n);return Qj(t,i,0),Qj(n,i,r),i.set(e,s),new KTe(t,n,e,i)};let KTe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const qZ=({name:t,code:e,encode:n})=>new YTe(t,e,n);let YTe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?M3(this.code,n):n.then(r=>M3(this.code,r))}else throw Error("Unknown type, must be binary type")}};const GZ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),QTe=qZ({name:"sha2-256",code:18,encode:GZ("SHA-256")}),JTe=qZ({name:"sha2-512",code:19,encode:GZ("SHA-512")});var ZTe=Object.freeze({__proto__:null,sha256:QTe,sha512:JTe});const VZ=0,XTe="identity",KZ=jZ,eRe=t=>M3(VZ,KZ(t)),tRe={code:VZ,name:XTe,encode:KZ,digest:eRe};var nRe=Object.freeze({__proto__:null,identity:tRe});new TextEncoder,new TextDecoder;const Zj={...YNe,...JNe,...XNe,...tTe,...sTe,...pTe,...yTe,...vTe,...STe,...PTe};({...ZTe,...nRe});function YZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Xj=YZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),$k=YZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=UZ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),QZ={utf8:Xj,"utf-8":Xj,hex:Zj.base16,latin1:$k,ascii:$k,binary:$k,...Zj};function MT(t,e="utf8"){const n=QZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Ib(t,e="utf8"){const n=QZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?dU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function eF(t){return zg(MT(Ib(t,$T),LZ))}function II(t){return MT(Ib(ud(t),LZ),$T)}function JZ(t){const e=Ib($Ne,Vj),n=DNe+MT(BZ([e,t]),Vj);return[kNe,ONe,n].join(PNe)}function rRe(t){return MT(t,$T)}function sRe(t){return Ib(t,$T)}function iRe(t){return Ib([II(t.header),II(t.payload)].join(xI),MZ)}function oRe(t){return[II(t.header),II(t.payload),rRe(t.signature)].join(xI)}function U3(t){const e=t.split(xI),n=eF(e[0]),r=eF(e[1]),s=sRe(e[2]),i=Ib(e.slice(0,2).join(xI),MZ);return{header:n,payload:r,signature:s,data:i}}function tF(t=SZ(LNe)){const e=$Z.getPublicKey(t);return{secretKey:BZ([t,e]),publicKey:e}}async function aRe(t,e,n,r,s=Se.fromMiliseconds(Date.now())){const i={alg:TNe,typ:RNe},o=JZ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=iRe({header:i,payload:c}),u=$Z.sign(l,r.secretKey.slice(0,32));return oRe({header:i,payload:c,signature:u})}var nF=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},cRe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),lRe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),uRe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),dRe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),hRe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),fRe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,pRe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,rF=3,gRe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",fRe]],sF=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function mRe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new hRe:typeof navigator<"u"?wRe(navigator.userAgent):vRe()}function yRe(t){return t!==""&&gRe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function wRe(t){var e=yRe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new dRe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<rF&&(s=nF(nF([],s,!0),ERe(rF-s.length),!0)):s=[];var i=s.join("."),o=bRe(t),a=pRe.exec(t);return a&&a[1]?new uRe(n,i,o,a[1]):new cRe(n,i,o)}function bRe(t){for(var e=0,n=sF.length;e<n;e++){var r=sF[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function vRe(){var t=typeof process<"u"&&process.version;return t?new lRe(process.version.slice(1)):null}function ERe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.getLocalStorage=Wn.getLocalStorageOrThrow=Wn.getCrypto=Wn.getCryptoOrThrow=ZZ=Wn.getLocation=Wn.getLocationOrThrow=hU=Wn.getNavigator=Wn.getNavigatorOrThrow=Wg=Wn.getDocument=Wn.getDocumentOrThrow=Wn.getFromWindowOrThrow=Wn.getFromWindow=void 0;function Em(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Wn.getFromWindow=Em;function Nb(t){const e=Em(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Wn.getFromWindowOrThrow=Nb;function _Re(){return Nb("document")}Wn.getDocumentOrThrow=_Re;function CRe(){return Em("document")}var Wg=Wn.getDocument=CRe;function ARe(){return Nb("navigator")}Wn.getNavigatorOrThrow=ARe;function SRe(){return Em("navigator")}var hU=Wn.getNavigator=SRe;function xRe(){return Nb("location")}Wn.getLocationOrThrow=xRe;function IRe(){return Em("location")}var ZZ=Wn.getLocation=IRe;function NRe(){return Nb("crypto")}Wn.getCryptoOrThrow=NRe;function TRe(){return Em("crypto")}Wn.getCrypto=TRe;function RRe(){return Nb("localStorage")}Wn.getLocalStorageOrThrow=RRe;function PRe(){return Em("localStorage")}Wn.getLocalStorage=PRe;var fU={};Object.defineProperty(fU,"__esModule",{value:!0});var XZ=fU.getWindowMetadata=void 0;const iF=Wn;function kRe(){let t,e;try{t=iF.getDocumentOrThrow(),e=iF.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let m=e.protocol+"//"+e.host;if(y.indexOf("/")===0)m+=y;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");m+=v+"/"+y}h.push(m)}else if(y.indexOf("//")===0){const m=e.protocol+y;h.push(m)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}XZ=fU.getWindowMetadata=kRe;function ORe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let C=p-1;(b!==0||v<d)&&C!==-1;C--,v++)b+=256*g[C]>>>0,g[C]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let m=r.repeat(u);for(;y<p;++y)m+=t.charAt(g[y]);return m}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let C=0;for(let A=f-1;(v!==0||C<h)&&A!==-1;A--,C++)v+=n*p[A]>>>0,p[A]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=C,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let m=d;for(;g!==f;)y[m++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var DRe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const eX=ORe(DRe);function tX(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function RE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=tX(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function $Re(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,C=new Uint8Array(v);m!==b;){for(var A=p[m],S=0,x=v-1;(A!==0||S<y)&&x!==-1;x--,S++)A+=256*C[x]>>>0,C[x]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");y=S,m++}for(var R=v-y;R!==v&&C[R]===0;)R++;for(var I=c.repeat(g);R<v;++R)I+=t.charAt(C[R]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var C=n[p.charCodeAt(g)];if(C===255)return;for(var A=0,S=b-1;(C!==0||A<m)&&S!==-1;S--,A++)C+=a*v[S]>>>0,v[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");m=A,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var R=new Uint8Array(y+(b-x)),I=y;x!==b;)R[I++]=v[x++];return R}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var LRe=$Re,MRe=LRe;const URe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},BRe=t=>new TextEncoder().encode(t),jRe=t=>new TextDecoder().decode(t);class FRe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class zRe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nX(this,e)}}class WRe{constructor(e){this.decoders=e}or(e){return nX(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nX=(t,e)=>new WRe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class HRe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new FRe(e,n,r),this.decoder=new zRe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const UT=({name:t,prefix:e,encode:n,decode:r})=>new HRe(t,e,n,r),T1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=MRe(n,e);return UT({prefix:t,name:e,encode:r,decode:i=>URe(s(i))})},qRe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},GRe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},js=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>UT({prefix:e,name:t,encode(s){return GRe(s,r,n)},decode(s){return qRe(s,r,n,t)}}),VRe=UT({prefix:"\0",name:"identity",encode:t=>jRe(t),decode:t=>BRe(t)}),KRe=Object.freeze(Object.defineProperty({__proto__:null,identity:VRe},Symbol.toStringTag,{value:"Module"})),YRe=js({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),QRe=Object.freeze(Object.defineProperty({__proto__:null,base2:YRe},Symbol.toStringTag,{value:"Module"})),JRe=js({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ZRe=Object.freeze(Object.defineProperty({__proto__:null,base8:JRe},Symbol.toStringTag,{value:"Module"})),XRe=T1({prefix:"9",name:"base10",alphabet:"0123456789"}),ePe=Object.freeze(Object.defineProperty({__proto__:null,base10:XRe},Symbol.toStringTag,{value:"Module"})),tPe=js({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nPe=js({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),rPe=Object.freeze(Object.defineProperty({__proto__:null,base16:tPe,base16upper:nPe},Symbol.toStringTag,{value:"Module"})),sPe=js({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iPe=js({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),oPe=js({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),aPe=js({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cPe=js({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lPe=js({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),uPe=js({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),dPe=js({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hPe=js({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),fPe=Object.freeze(Object.defineProperty({__proto__:null,base32:sPe,base32hex:cPe,base32hexpad:uPe,base32hexpadupper:dPe,base32hexupper:lPe,base32pad:oPe,base32padupper:aPe,base32upper:iPe,base32z:hPe},Symbol.toStringTag,{value:"Module"})),pPe=T1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gPe=T1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),mPe=Object.freeze(Object.defineProperty({__proto__:null,base36:pPe,base36upper:gPe},Symbol.toStringTag,{value:"Module"})),yPe=T1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),wPe=T1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),bPe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:yPe,base58flickr:wPe},Symbol.toStringTag,{value:"Module"})),vPe=js({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),EPe=js({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_Pe=js({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),CPe=js({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),APe=Object.freeze(Object.defineProperty({__proto__:null,base64:vPe,base64pad:EPe,base64url:_Pe,base64urlpad:CPe},Symbol.toStringTag,{value:"Module"})),rX=Array.from(""),SPe=rX.reduce((t,e,n)=>(t[n]=e,t),[]),xPe=rX.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function IPe(t){return t.reduce((e,n)=>(e+=SPe[n],e),"")}function NPe(t){const e=[];for(const n of t){const r=xPe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const TPe=UT({prefix:"",name:"base256emoji",encode:IPe,decode:NPe}),RPe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:TPe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const oF={...KRe,...QRe,...ZRe,...ePe,...rPe,...fPe,...mPe,...bPe,...APe,...RPe};function sX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const aF=sX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Lk=sX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=tX(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),iX={utf8:aF,"utf-8":aF,hex:oF.base16,latin1:Lk,ascii:Lk,binary:Lk,...oF};function Ia(t,e="utf8"){const n=iX[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function fo(t,e="utf8"){const n=iX[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const PPe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},kPe="PARSE_ERROR",OPe="INVALID_REQUEST",DPe="METHOD_NOT_FOUND",$Pe="INVALID_PARAMS",oX="INTERNAL_ERROR",pU="SERVER_ERROR",LPe=[-32700,-32600,-32601,-32602,-32603],PE={[kPe]:{code:-32700,message:"Parse error"},[OPe]:{code:-32600,message:"Invalid Request"},[DPe]:{code:-32601,message:"Method not found"},[$Pe]:{code:-32602,message:"Invalid params"},[oX]:{code:-32603,message:"Internal error"},[pU]:{code:-32e3,message:"Server error"}},aX=pU;function MPe(t){return LPe.includes(t)}function cF(t){return Object.keys(PE).includes(t)?PE[t]:PE[aX]}function UPe(t){const e=Object.values(PE).find(n=>n.code===t);return e||PE[aX]}function cX(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var lX={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B3=function(t,e){return B3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},B3(t,e)};function BPe(t,e){B3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var j3=function(){return j3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},j3.apply(this,arguments)};function jPe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function FPe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function zPe(t,e){return function(n,r){e(n,r,t)}}function WPe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function HPe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function qPe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function GPe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function VPe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function F3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uX(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function KPe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(uX(arguments[e]));return t}function YPe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Y_(t){return this instanceof Y_?(this.v=t,this):new Y_(t)}function QPe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof Y_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function JPe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Y_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function ZPe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof F3=="function"?F3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function XPe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function eke(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function tke(t){return t&&t.__esModule?t:{default:t}}function nke(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function rke(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const ske=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return j3},__asyncDelegator:JPe,__asyncGenerator:QPe,__asyncValues:ZPe,__await:Y_,__awaiter:HPe,__classPrivateFieldGet:nke,__classPrivateFieldSet:rke,__createBinding:GPe,__decorate:FPe,__exportStar:VPe,__extends:BPe,__generator:qPe,__importDefault:tke,__importStar:eke,__makeTemplateObject:XPe,__metadata:WPe,__param:zPe,__read:uX,__rest:jPe,__spread:KPe,__spreadArrays:YPe,__values:F3},Symbol.toStringTag,{value:"Module"})),ike=yL(ske);var iu={},lF;function oke(){if(lF)return iu;lF=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.isBrowserCryptoAvailable=iu.getSubtleCrypto=iu.getBrowerCrypto=void 0;function t(){return(_r==null?void 0:_r.crypto)||(_r==null?void 0:_r.msCrypto)||{}}iu.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}iu.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return iu.isBrowserCryptoAvailable=n,iu}var ou={},uF;function ake(){if(uF)return ou;uF=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.isBrowser=ou.isNode=ou.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ou.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ou.isNode=e;function n(){return!t()&&!e()}return ou.isBrowser=n,ou}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ike;e.__exportStar(oke(),t),e.__exportStar(ake(),t)})(lX);function tl(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Pp(t=6){return BigInt(tl(t))}function Lh(t,e,n){return{id:n||tl(),jsonrpc:"2.0",method:t,params:e}}function BT(t,e){return{id:t,jsonrpc:"2.0",result:e}}function jT(t,e,n){return{id:t,jsonrpc:"2.0",error:cke(e)}}function cke(t,e){return typeof t>"u"?cF(oX):(typeof t=="string"&&(t=Object.assign(Object.assign({},cF(pU)),{message:t})),MPe(t.code)&&(t=UPe(t.code)),t)}let lke=class{},uke=class extends lke{constructor(){super()}},dke=class extends uke{constructor(e){super()}};const hke="^https?:",fke="^wss?:";function pke(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function dX(t,e){const n=pke(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function dF(t){return dX(t,hke)}function hF(t){return dX(t,fke)}function gke(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function hX(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function gU(t){return hX(t)&&"method"in t}function FT(t){return hX(t)&&(nl(t)||va(t))}function nl(t){return"result"in t}function va(t){return"error"in t}let ja=class extends dke{constructor(e){super(e),this.events=new Ba.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Lh(e.method,e.params||[],e.id||Pp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{va(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),FT(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const mke=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),yke=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",fF=t=>t.split("?")[0],pF=10,wke=mke();let bke=class{constructor(e){if(this.url=e,this.events=new Ba.EventEmitter,this.registering=!1,!hF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ud(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!hF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=lX.isReactNative()?void 0:{rejectUnauthorized:!gke(e)},i=new wke(e,[],s);yke()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?zg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=jT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return cX(e,fF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>pF&&this.events.setMaxListeners(pF)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${fF(this.url)}`));return this.events.emit("register_error",n),n}};var z3={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof _r<"u"&&_r,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof _r<"u"&&_r||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(T){return T&&DataView.prototype.isPrototypeOf(T)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&u.indexOf(Object.prototype.toString.call(T))>-1};function h(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function f(T){return typeof T!="string"&&(T=String(T)),T}function p(T){var N={next:function(){var M=T.shift();return{done:M===void 0,value:M}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(T){this.map={},T instanceof g?T.forEach(function(N,M){this.append(M,N)},this):Array.isArray(T)?T.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(N){this.append(N,T[N])},this)}g.prototype.append=function(T,N){T=h(T),N=f(N);var M=this.map[T];this.map[T]=M?M+", "+N:N},g.prototype.delete=function(T){delete this.map[h(T)]},g.prototype.get=function(T){return T=h(T),this.has(T)?this.map[T]:null},g.prototype.has=function(T){return this.map.hasOwnProperty(h(T))},g.prototype.set=function(T,N){this.map[h(T)]=f(N)},g.prototype.forEach=function(T,N){for(var M in this.map)this.map.hasOwnProperty(M)&&T.call(N,this.map[M],M,this)},g.prototype.keys=function(){var T=[];return this.forEach(function(N,M){T.push(M)}),p(T)},g.prototype.values=function(){var T=[];return this.forEach(function(N){T.push(N)}),p(T)},g.prototype.entries=function(){var T=[];return this.forEach(function(N,M){T.push([M,N])}),p(T)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function m(T){return new Promise(function(N,M){T.onload=function(){N(T.result)},T.onerror=function(){M(T.error)}})}function b(T){var N=new FileReader,M=m(N);return N.readAsArrayBuffer(T),M}function v(T){var N=new FileReader,M=m(N),k=/charset=([A-Za-z0-9_-]+)/.exec(T.type),D=k?k[1]:"utf-8";return N.readAsText(T,D),M}function C(T){for(var N=new Uint8Array(T),M=new Array(N.length),k=0;k<N.length;k++)M[k]=String.fromCharCode(N[k]);return M.join("")}function A(T){if(T.slice)return T.slice(0);var N=new Uint8Array(T.byteLength);return N.set(new Uint8Array(T)),N.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:c.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:c.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():c.arrayBuffer&&c.blob&&l(T)?(this._bodyArrayBuffer=A(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=A(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var T=y(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=y(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=y(this);if(T)return T;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(T){var N=T.toUpperCase();return x.indexOf(N)>-1?N:T}function I(T,N){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var M=N.body;if(T instanceof I){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,N.headers||(this.headers=new g(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!M&&T._bodyInit!=null&&(M=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=R(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var U=new AbortController;return U.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var D=/\?/;this.url+=(D.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function O(T){var N=new FormData;return T.trim().split("&").forEach(function(M){if(M){var k=M.split("="),D=k.shift().replace(/\+/g," "),U=k.join("=").replace(/\+/g," ");N.append(decodeURIComponent(D),decodeURIComponent(U))}}),N}function P(T){var N=new g,M=T.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var D=k.split(":"),U=D.shift().trim();if(U){var q=D.join(":").trim();try{N.append(U,q)}catch(X){console.warn("Response "+X.message)}}}),N}S.call(I.prototype);function B(T,N){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(T)}S.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var T=new B(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var H=[301,302,303,307,308];B.redirect=function(T,N){if(H.indexOf(N)===-1)throw new RangeError("Invalid status code");return new B(null,{status:N,headers:{location:T}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,M){this.message=N,this.name=M;var k=Error(N);this.stack=k.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function j(T,N){return new Promise(function(M,k){var D=new I(T,N);if(D.signal&&D.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function q(){U.abort()}U.onload=function(){var oe={statusText:U.statusText,headers:P(U.getAllResponseHeaders()||"")};D.url.indexOf("file://")===0&&(U.status<200||U.status>599)?oe.status=200:oe.status=U.status,oe.url="responseURL"in U?U.responseURL:oe.headers.get("X-Request-URL");var le="response"in U?U.response:U.responseText;setTimeout(function(){M(new B(le,oe))},0)},U.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},U.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function X(oe){try{return oe===""&&a.location.href?a.location.href:oe}catch{return oe}}if(U.open(D.method,X(D.url),!0),D.credentials==="include"?U.withCredentials=!0:D.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(c.blob?U.responseType="blob":c.arrayBuffer&&(U.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var ae=[];Object.getOwnPropertyNames(N.headers).forEach(function(oe){ae.push(h(oe)),U.setRequestHeader(oe,f(N.headers[oe]))}),D.headers.forEach(function(oe,le){ae.indexOf(le)===-1&&U.setRequestHeader(le,oe)})}else D.headers.forEach(function(oe,le){U.setRequestHeader(le,oe)});D.signal&&(D.signal.addEventListener("abort",q),U.onreadystatechange=function(){U.readyState===4&&D.signal.removeEventListener("abort",q)}),U.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return j.polyfill=!0,a.fetch||(a.fetch=j,a.Headers=g,a.Request=I,a.Response=B),o.Headers=g,o.Request=I,o.Response=B,o.fetch=j,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(z3,z3.exports);var vke=z3.exports;const gF=sm(vke);var Eke=Object.defineProperty,_ke=Object.defineProperties,Cke=Object.getOwnPropertyDescriptors,mF=Object.getOwnPropertySymbols,Ake=Object.prototype.hasOwnProperty,Ske=Object.prototype.propertyIsEnumerable,yF=(t,e,n)=>e in t?Eke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wF=(t,e)=>{for(var n in e||(e={}))Ake.call(e,n)&&yF(t,n,e[n]);if(mF)for(var n of mF(e))Ske.call(e,n)&&yF(t,n,e[n]);return t},bF=(t,e)=>_ke(t,Cke(e));const xke={Accept:"application/json","Content-Type":"application/json"},Ike="POST",vF={headers:xke,method:Ike},EF=10;let Bc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Ba.EventEmitter,this.isAvailable=!1,this.registering=!1,!dF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=ud(e),r=await(await gF(this.url,bF(wF({},vF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!dF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=ud({id:1,jsonrpc:"2.0",method:"test",params:[]});await gF(e,bF(wF({},vF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?zg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=jT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return cX(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>EF&&this.events.setMaxListeners(EF)}};const kE={getSIWX(){return ve.state.siwx},async initializeIfEnabled(){var i;const t=ve.state.siwx,e=z.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(z.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await ps.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ht._getClient())==null?void 0:i.disconnect().catch(console.error)),Ot.reset("Connect"),Ec.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ve.state.siwx,e=nt.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork(),r=ht._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Me.getConnectorId(n.chainNamespace)===Ue.CONNECTOR_ID.AUTH&&Ot.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ps.close(),or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ps.state.open||Ot.state.view==="ApproveTransaction")&&await ps.open({view:"SIWXSignMessage"}),i.isSmartAccount?Ec.showError("This application might not support Smart Accounts"):Ec.showError("Signature declined"),or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await ht.disconnect():ps.close(),Ot.reset("Connect"),or.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ve.state.siwx,e=nt.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ot.state.view==="ApproveTransaction",r=Ot.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=kE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=z.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Ec.showLoading("Authenticating...",{autoClose:!1}),qe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:kE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:kE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Ec.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=z.state.activeChain;return{network:((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=qe.state.preferredAccountTypes)==null?void 0:n[t])===Ds.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function GA(t,e){return Me.getConnectorId(t)===e}function Nke(t){const e=Array.from(z.state.chains.keys());let n=[];return t?(n.push([t,z.state.chains.get(t)]),GA(t,Ue.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&GA(r,Ue.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,z.state.chains.get(r)])}):GA(t,Ue.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&GA(r,Ue.CONNECTOR_ID.AUTH)&&n.push([r,z.state.chains.get(r)])})):n=Array.from(z.state.chains.entries()),n}const Ji={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},NI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Ue.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ue.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ue.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Ue.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Ue.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Ue.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Ue.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Ue.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Ue.CONNECTOR_ID.COINBASE]:"Coinbase",[Ue.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Ue.CONNECTOR_ID.LEDGER]:"Ledger",[Ue.CONNECTOR_ID.SAFE]:"Safe"}},zT={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Ji.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},Tke=new AbortController,yl={EmbeddedWalletAbortController:Tke,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Rke()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function Rke(){return typeof window<"u"}const Pke={createLogger(t,e="error"){const n=vm({level:e}),{logger:r}=DT({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},kke="rpc.walletconnect.org";function _F(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const Mk=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],wy={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===kke}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Ue.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Ue.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return Mk.includes(e)?_F(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:NI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>wy.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Dh(a.url,a.config))}),Mk.includes(t.caipNetworkId)&&r.push(Dh(_F(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Dh(a))}),wI(r)},extendWagmiTransports(t,e,n){if(Mk.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return wI([n,Dh(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Ue.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ge.getActiveCaipNetworkId(),n=z.getAllRequestedCaipNetworks(),r=Array.from(((c=z.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},TI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Mi=er({providers:{...TI},providerIds:{...TI}}),Nn={state:Mi,subscribeKey(t,e){return ii(Mi,t,e)},subscribe(t){return ri(Mi,()=>{t(Mi)})},subscribeProviders(t){return ri(Mi.providers,()=>t(Mi.providers))},setProvider(t,e){e&&(Mi.providers[t]=jg(e))},getProvider(t){return Mi.providers[t]},setProviderId(t,e){e&&(Mi.providerIds[t]=e)},getProviderId(t){if(t)return Mi.providerIds[t]},reset(){Mi.providers={...TI},Mi.providerIds={...TI}},resetChain(t){Mi.providers[t]=void 0,Mi.providerIds[t]=void 0}},CF={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ss={set(t,e){jo.isClient&&localStorage.setItem(`${We.STORAGE_KEY}${t}`,e)},get(t){return jo.isClient?localStorage.getItem(`${We.STORAGE_KEY}${t}`):null},delete(t,e){jo.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${We.STORAGE_KEY}${t}`))}},VA=30*1e3,jo={checkIfAllowedToTriggerEmail(){const t=Ss.get(We.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<VA){const n=Math.ceil((VA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ss.get(We.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<VA)return Math.ceil((VA-e)/1e3)}return 0},checkIfRequestExists(t){return Ds.NOT_SAFE_RPC_METHODS.includes(t.method)||Ds.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(CF.transactionHash))||(t==null?void 0:t.match(CF.signedMessage)))?We.RPC_RESPONSE_TYPE_TX:We.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ds.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var an;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(an||(an={}));var W3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(W3||(W3={}));const De=an.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),th=t=>{switch(typeof t){case"undefined":return De.undefined;case"string":return De.string;case"number":return isNaN(t)?De.nan:De.number;case"boolean":return De.boolean;case"function":return De.function;case"bigint":return De.bigint;case"symbol":return De.symbol;case"object":return Array.isArray(t)?De.array:t===null?De.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?De.promise:typeof Map<"u"&&t instanceof Map?De.map:typeof Set<"u"&&t instanceof Set?De.set:typeof Date<"u"&&t instanceof Date?De.date:De.object;default:return De.unknown}},Ae=an.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Oke=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Rc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,an.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Rc.create=t=>new Rc(t);const Q_=(t,e)=>{let n;switch(t.code){case Ae.invalid_type:t.received===De.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ae.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,an.jsonStringifyReplacer)}`;break;case Ae.unrecognized_keys:n=`Unrecognized key(s) in object: ${an.joinValues(t.keys,", ")}`;break;case Ae.invalid_union:n="Invalid input";break;case Ae.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${an.joinValues(t.options)}`;break;case Ae.invalid_enum_value:n=`Invalid enum value. Expected ${an.joinValues(t.options)}, received '${t.received}'`;break;case Ae.invalid_arguments:n="Invalid function arguments";break;case Ae.invalid_return_type:n="Invalid function return type";break;case Ae.invalid_date:n="Invalid date";break;case Ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:an.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ae.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ae.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ae.custom:n="Invalid input";break;case Ae.invalid_intersection_types:n="Intersection results could not be merged";break;case Ae.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ae.not_finite:n="Number must be finite";break;default:n=e.defaultError,an.assertNever(t)}return{message:n}};let fX=Q_;function Dke(t){fX=t}function RI(){return fX}const PI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},$ke=[];function Fe(t,e){const n=PI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,RI(),Q_].filter(r=>!!r)});t.common.issues.push(n)}class si{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return At;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return si.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return At;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const At=Object.freeze({status:"aborted"}),pX=t=>({status:"dirty",value:t}),Ii=t=>({status:"valid",value:t}),H3=t=>t.status==="aborted",q3=t=>t.status==="dirty",J_=t=>t.status==="valid",kI=t=>typeof Promise<"u"&&t instanceof Promise;var ot;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ot||(ot={}));class zl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const AF=(t,e)=>{if(J_(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Rc(t.common.issues);return this._error=n,this._error}}};function Rt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Dt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return th(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:th(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new si,ctx:{common:e.parent.common,data:e.data,parsedType:th(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(kI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:th(e)},i=this._parseSync({data:e,path:s.path,parent:s});return AF(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:th(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(kI(s)?s:Promise.resolve(s));return AF(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ae.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Lc({schema:this,typeName:yt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Yu.create(this,this._def)}nullable(){return Gg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pc.create(this,this._def)}promise(){return j0.create(this,this._def)}or(e){return tC.create([this,e],this._def)}and(e){return nC.create(this,e,this._def)}transform(e){return new Lc({...Rt(this._def),schema:this,typeName:yt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new aC({...Rt(this._def),innerType:this,defaultValue:n,typeName:yt.ZodDefault})}brand(){return new mX({typeName:yt.ZodBranded,type:this,...Rt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new LI({...Rt(this._def),innerType:this,catchValue:n,typeName:yt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return R1.create(this,e)}readonly(){return UI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Lke=/^c[^\s-]{8,}$/i,Mke=/^[a-z][a-z0-9]*$/,Uke=/^[0-9A-HJKMNP-TV-Z]{26}$/,Bke=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jke=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Fke="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Uk;const zke=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Wke=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Hke=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function qke(t,e){return!!((e==="v4"||!e)&&zke.test(t)||(e==="v6"||!e)&&Wke.test(t))}class Sc extends Dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==De.string){const i=this._getOrReturnCtx(e);return Fe(i,{code:Ae.invalid_type,expected:De.string,received:i.parsedType}),At}const r=new si;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Fe(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Fe(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Fe(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Fe(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")jke.test(e.data)||(s=this._getOrReturnCtx(e,s),Fe(s,{validation:"email",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Uk||(Uk=new RegExp(Fke,"u")),Uk.test(e.data)||(s=this._getOrReturnCtx(e,s),Fe(s,{validation:"emoji",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Bke.test(e.data)||(s=this._getOrReturnCtx(e,s),Fe(s,{validation:"uuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Lke.test(e.data)||(s=this._getOrReturnCtx(e,s),Fe(s,{validation:"cuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Mke.test(e.data)||(s=this._getOrReturnCtx(e,s),Fe(s,{validation:"cuid2",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Uke.test(e.data)||(s=this._getOrReturnCtx(e,s),Fe(s,{validation:"ulid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Fe(s,{validation:"url",code:Ae.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Fe(s,{validation:"regex",code:Ae.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Fe(s,{code:Ae.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Fe(s,{code:Ae.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Fe(s,{code:Ae.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Hke(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Fe(s,{code:Ae.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?qke(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Fe(s,{validation:"ip",code:Ae.invalid_string,message:i.message}),r.dirty()):an.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ae.invalid_string,...ot.errToObj(r)})}_addCheck(e){return new Sc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ot.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ot.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ot.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ot.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ot.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ot.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ot.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ot.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ot.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ot.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ot.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ot.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ot.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ot.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ot.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ot.errToObj(n)})}nonempty(e){return this.min(1,ot.errToObj(e))}trim(){return new Sc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Sc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Sc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Sc.create=t=>{var e;return new Sc({checks:[],typeName:yt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Rt(t)})};function Gke(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class vf extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==De.number){const i=this._getOrReturnCtx(e);return Fe(i,{code:Ae.invalid_type,expected:De.number,received:i.parsedType}),At}let r;const s=new si;for(const i of this._def.checks)i.kind==="int"?an.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Fe(r,{code:Ae.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Ae.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Ae.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Gke(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Fe(r,{code:Ae.not_finite,message:i.message}),s.dirty()):an.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ot.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ot.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ot.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ot.toString(n))}setLimit(e,n,r,s){return new vf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ot.toString(s)}]})}_addCheck(e){return new vf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ot.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ot.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ot.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ot.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ot.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ot.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ot.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ot.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ot.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&an.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}vf.create=t=>new vf({checks:[],typeName:yt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Rt(t)});class Ef extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==De.bigint){const i=this._getOrReturnCtx(e);return Fe(i,{code:Ae.invalid_type,expected:De.bigint,received:i.parsedType}),At}let r;const s=new si;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Ae.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Ae.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):an.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ot.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ot.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ot.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ot.toString(n))}setLimit(e,n,r,s){return new Ef({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ot.toString(s)}]})}_addCheck(e){return new Ef({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ot.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ot.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ot.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ot.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ot.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ef.create=t=>{var e;return new Ef({checks:[],typeName:yt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Rt(t)})};class Z_ extends Dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==De.boolean){const r=this._getOrReturnCtx(e);return Fe(r,{code:Ae.invalid_type,expected:De.boolean,received:r.parsedType}),At}return Ii(e.data)}}Z_.create=t=>new Z_({typeName:yt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Rt(t)});class Hg extends Dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==De.date){const i=this._getOrReturnCtx(e);return Fe(i,{code:Ae.invalid_type,expected:De.date,received:i.parsedType}),At}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Fe(i,{code:Ae.invalid_date}),At}const r=new si;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Fe(s,{code:Ae.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Fe(s,{code:Ae.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):an.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Hg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ot.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ot.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Hg.create=t=>new Hg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:yt.ZodDate,...Rt(t)});class OI extends Dt{_parse(e){if(this._getType(e)!==De.symbol){const r=this._getOrReturnCtx(e);return Fe(r,{code:Ae.invalid_type,expected:De.symbol,received:r.parsedType}),At}return Ii(e.data)}}OI.create=t=>new OI({typeName:yt.ZodSymbol,...Rt(t)});class X_ extends Dt{_parse(e){if(this._getType(e)!==De.undefined){const r=this._getOrReturnCtx(e);return Fe(r,{code:Ae.invalid_type,expected:De.undefined,received:r.parsedType}),At}return Ii(e.data)}}X_.create=t=>new X_({typeName:yt.ZodUndefined,...Rt(t)});class eC extends Dt{_parse(e){if(this._getType(e)!==De.null){const r=this._getOrReturnCtx(e);return Fe(r,{code:Ae.invalid_type,expected:De.null,received:r.parsedType}),At}return Ii(e.data)}}eC.create=t=>new eC({typeName:yt.ZodNull,...Rt(t)});class B0 extends Dt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ii(e.data)}}B0.create=t=>new B0({typeName:yt.ZodAny,...Rt(t)});class mg extends Dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ii(e.data)}}mg.create=t=>new mg({typeName:yt.ZodUnknown,...Rt(t)});class dd extends Dt{_parse(e){const n=this._getOrReturnCtx(e);return Fe(n,{code:Ae.invalid_type,expected:De.never,received:n.parsedType}),At}}dd.create=t=>new dd({typeName:yt.ZodNever,...Rt(t)});class DI extends Dt{_parse(e){if(this._getType(e)!==De.undefined){const r=this._getOrReturnCtx(e);return Fe(r,{code:Ae.invalid_type,expected:De.void,received:r.parsedType}),At}return Ii(e.data)}}DI.create=t=>new DI({typeName:yt.ZodVoid,...Rt(t)});class Pc extends Dt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==De.array)return Fe(n,{code:Ae.invalid_type,expected:De.array,received:n.parsedType}),At;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Fe(n,{code:o?Ae.too_big:Ae.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Fe(n,{code:Ae.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Fe(n,{code:Ae.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new zl(n,o,n.path,a)))).then(o=>si.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new zl(n,o,n.path,a)));return si.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Pc({...this._def,minLength:{value:e,message:ot.toString(n)}})}max(e,n){return new Pc({...this._def,maxLength:{value:e,message:ot.toString(n)}})}length(e,n){return new Pc({...this._def,exactLength:{value:e,message:ot.toString(n)}})}nonempty(e){return this.min(1,e)}}Pc.create=(t,e)=>new Pc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:yt.ZodArray,...Rt(e)});function by(t){if(t instanceof lr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Yu.create(by(r))}return new lr({...t._def,shape:()=>e})}else return t instanceof Pc?new Pc({...t._def,type:by(t.element)}):t instanceof Yu?Yu.create(by(t.unwrap())):t instanceof Gg?Gg.create(by(t.unwrap())):t instanceof Wl?Wl.create(t.items.map(e=>by(e))):t}class lr extends Dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=an.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==De.object){const l=this._getOrReturnCtx(e);return Fe(l,{code:Ae.invalid_type,expected:De.object,received:l.parsedType}),At}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof dd&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new zl(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof dd){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Fe(s,{code:Ae.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new zl(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>si.mergeObjectSync(r,l)):si.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ot.errToObj,new lr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ot.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new lr({...this._def,unknownKeys:"strip"})}passthrough(){return new lr({...this._def,unknownKeys:"passthrough"})}extend(e){return new lr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new lr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:yt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new lr({...this._def,catchall:e})}pick(e){const n={};return an.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new lr({...this._def,shape:()=>n})}omit(e){const n={};return an.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new lr({...this._def,shape:()=>n})}deepPartial(){return by(this)}partial(e){const n={};return an.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new lr({...this._def,shape:()=>n})}required(e){const n={};return an.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Yu;)i=i._def.innerType;n[r]=i}}),new lr({...this._def,shape:()=>n})}keyof(){return gX(an.objectKeys(this.shape))}}lr.create=(t,e)=>new lr({shape:()=>t,unknownKeys:"strip",catchall:dd.create(),typeName:yt.ZodObject,...Rt(e)});lr.strictCreate=(t,e)=>new lr({shape:()=>t,unknownKeys:"strict",catchall:dd.create(),typeName:yt.ZodObject,...Rt(e)});lr.lazycreate=(t,e)=>new lr({shape:t,unknownKeys:"strip",catchall:dd.create(),typeName:yt.ZodObject,...Rt(e)});class tC extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Rc(a.ctx.common.issues));return Fe(n,{code:Ae.invalid_union,unionErrors:o}),At}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Rc(c));return Fe(n,{code:Ae.invalid_union,unionErrors:a}),At}}get options(){return this._def.options}}tC.create=(t,e)=>new tC({options:t,typeName:yt.ZodUnion,...Rt(e)});const QS=t=>t instanceof sC?QS(t.schema):t instanceof Lc?QS(t.innerType()):t instanceof iC?[t.value]:t instanceof _f?t.options:t instanceof oC?Object.keys(t.enum):t instanceof aC?QS(t._def.innerType):t instanceof X_?[void 0]:t instanceof eC?[null]:null;class WT extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.object)return Fe(n,{code:Ae.invalid_type,expected:De.object,received:n.parsedType}),At;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Fe(n,{code:Ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),At)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=QS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new WT({typeName:yt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Rt(r)})}}function G3(t,e){const n=th(t),r=th(e);if(t===e)return{valid:!0,data:t};if(n===De.object&&r===De.object){const s=an.objectKeys(e),i=an.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=G3(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===De.array&&r===De.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=G3(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===De.date&&r===De.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class nC extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(H3(i)||H3(o))return At;const a=G3(i.value,o.value);return a.valid?((q3(i)||q3(o))&&n.dirty(),{status:n.value,value:a.data}):(Fe(r,{code:Ae.invalid_intersection_types}),At)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}nC.create=(t,e,n)=>new nC({left:t,right:e,typeName:yt.ZodIntersection,...Rt(n)});class Wl extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.array)return Fe(r,{code:Ae.invalid_type,expected:De.array,received:r.parsedType}),At;if(r.data.length<this._def.items.length)return Fe(r,{code:Ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),At;!this._def.rest&&r.data.length>this._def.items.length&&(Fe(r,{code:Ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new zl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>si.mergeArray(n,o)):si.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Wl({...this._def,rest:e})}}Wl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wl({items:t,typeName:yt.ZodTuple,rest:null,...Rt(e)})};class rC extends Dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.object)return Fe(r,{code:Ae.invalid_type,expected:De.object,received:r.parsedType}),At;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new zl(r,a,r.path,a)),value:o._parse(new zl(r,r.data[a],r.path,a))});return r.common.async?si.mergeObjectAsync(n,s):si.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Dt?new rC({keyType:e,valueType:n,typeName:yt.ZodRecord,...Rt(r)}):new rC({keyType:Sc.create(),valueType:e,typeName:yt.ZodRecord,...Rt(n)})}}class $I extends Dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.map)return Fe(r,{code:Ae.invalid_type,expected:De.map,received:r.parsedType}),At;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new zl(r,a,r.path,[l,"key"])),value:i._parse(new zl(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return At;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return At;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}$I.create=(t,e,n)=>new $I({valueType:e,keyType:t,typeName:yt.ZodMap,...Rt(n)});class qg extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.set)return Fe(r,{code:Ae.invalid_type,expected:De.set,received:r.parsedType}),At;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Fe(r,{code:Ae.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Fe(r,{code:Ae.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return At;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new zl(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new qg({...this._def,minSize:{value:e,message:ot.toString(n)}})}max(e,n){return new qg({...this._def,maxSize:{value:e,message:ot.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}qg.create=(t,e)=>new qg({valueType:t,minSize:null,maxSize:null,typeName:yt.ZodSet,...Rt(e)});class lw extends Dt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.function)return Fe(n,{code:Ae.invalid_type,expected:De.function,received:n.parsedType}),At;function r(a,c){return PI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,RI(),Q_].filter(l=>!!l),issueData:{code:Ae.invalid_arguments,argumentsError:c}})}function s(a,c){return PI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,RI(),Q_].filter(l=>!!l),issueData:{code:Ae.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof j0){const a=this;return Ii(async function(...c){const l=new Rc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ii(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Rc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Rc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new lw({...this._def,args:Wl.create(e).rest(mg.create())})}returns(e){return new lw({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new lw({args:e||Wl.create([]).rest(mg.create()),returns:n||mg.create(),typeName:yt.ZodFunction,...Rt(r)})}}class sC extends Dt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}sC.create=(t,e)=>new sC({getter:t,typeName:yt.ZodLazy,...Rt(e)});class iC extends Dt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Fe(n,{received:n.data,code:Ae.invalid_literal,expected:this._def.value}),At}return{status:"valid",value:e.data}}get value(){return this._def.value}}iC.create=(t,e)=>new iC({value:t,typeName:yt.ZodLiteral,...Rt(e)});function gX(t,e){return new _f({values:t,typeName:yt.ZodEnum,...Rt(e)})}class _f extends Dt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Fe(n,{expected:an.joinValues(r),received:n.parsedType,code:Ae.invalid_type}),At}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Fe(n,{received:n.data,code:Ae.invalid_enum_value,options:r}),At}return Ii(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return _f.create(e)}exclude(e){return _f.create(this.options.filter(n=>!e.includes(n)))}}_f.create=gX;class oC extends Dt{_parse(e){const n=an.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==De.string&&r.parsedType!==De.number){const s=an.objectValues(n);return Fe(r,{expected:an.joinValues(s),received:r.parsedType,code:Ae.invalid_type}),At}if(n.indexOf(e.data)===-1){const s=an.objectValues(n);return Fe(r,{received:r.data,code:Ae.invalid_enum_value,options:s}),At}return Ii(e.data)}get enum(){return this._def.values}}oC.create=(t,e)=>new oC({values:t,typeName:yt.ZodNativeEnum,...Rt(e)});class j0 extends Dt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.promise&&n.common.async===!1)return Fe(n,{code:Ae.invalid_type,expected:De.promise,received:n.parsedType}),At;const r=n.parsedType===De.promise?n.data:Promise.resolve(n.data);return Ii(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}j0.create=(t,e)=>new j0({type:t,typeName:yt.ZodPromise,...Rt(e)});class Lc extends Dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===yt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Fe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?At:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?At:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!J_(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>J_(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);an.assertNever(s)}}Lc.create=(t,e,n)=>new Lc({schema:t,typeName:yt.ZodEffects,effect:e,...Rt(n)});Lc.createWithPreprocess=(t,e,n)=>new Lc({schema:e,effect:{type:"preprocess",transform:t},typeName:yt.ZodEffects,...Rt(n)});class Yu extends Dt{_parse(e){return this._getType(e)===De.undefined?Ii(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yu.create=(t,e)=>new Yu({innerType:t,typeName:yt.ZodOptional,...Rt(e)});class Gg extends Dt{_parse(e){return this._getType(e)===De.null?Ii(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gg.create=(t,e)=>new Gg({innerType:t,typeName:yt.ZodNullable,...Rt(e)});class aC extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===De.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}aC.create=(t,e)=>new aC({innerType:t,typeName:yt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Rt(e)});class LI extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return kI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Rc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Rc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}LI.create=(t,e)=>new LI({innerType:t,typeName:yt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Rt(e)});class MI extends Dt{_parse(e){if(this._getType(e)!==De.nan){const r=this._getOrReturnCtx(e);return Fe(r,{code:Ae.invalid_type,expected:De.nan,received:r.parsedType}),At}return{status:"valid",value:e.data}}}MI.create=t=>new MI({typeName:yt.ZodNaN,...Rt(t)});const Vke=Symbol("zod_brand");class mX extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class R1 extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?At:i.status==="dirty"?(n.dirty(),pX(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?At:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new R1({in:e,out:n,typeName:yt.ZodPipeline})}}class UI extends Dt{_parse(e){const n=this._def.innerType._parse(e);return J_(n)&&(n.value=Object.freeze(n.value)),n}}UI.create=(t,e)=>new UI({innerType:t,typeName:yt.ZodReadonly,...Rt(e)});const yX=(t,e={},n)=>t?B0.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):B0.create(),Kke={object:lr.lazycreate};var yt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(yt||(yt={}));const Yke=(t,e={message:`Input not instance of ${t.name}`})=>yX(n=>n instanceof t,e),wX=Sc.create,bX=vf.create,Qke=MI.create,Jke=Ef.create,vX=Z_.create,Zke=Hg.create,Xke=OI.create,eOe=X_.create,tOe=eC.create,nOe=B0.create,rOe=mg.create,sOe=dd.create,iOe=DI.create,oOe=Pc.create,aOe=lr.create,cOe=lr.strictCreate,lOe=tC.create,uOe=WT.create,dOe=nC.create,hOe=Wl.create,fOe=rC.create,pOe=$I.create,gOe=qg.create,mOe=lw.create,yOe=sC.create,wOe=iC.create,bOe=_f.create,vOe=oC.create,EOe=j0.create,SF=Lc.create,_Oe=Yu.create,COe=Gg.create,AOe=Lc.createWithPreprocess,SOe=R1.create,xOe=()=>wX().optional(),IOe=()=>bX().optional(),NOe=()=>vX().optional(),TOe={string:t=>Sc.create({...t,coerce:!0}),number:t=>vf.create({...t,coerce:!0}),boolean:t=>Z_.create({...t,coerce:!0}),bigint:t=>Ef.create({...t,coerce:!0}),date:t=>Hg.create({...t,coerce:!0})},ROe=At;var E=Object.freeze({__proto__:null,defaultErrorMap:Q_,setErrorMap:Dke,getErrorMap:RI,makeIssue:PI,EMPTY_PATH:$ke,addIssueToContext:Fe,ParseStatus:si,INVALID:At,DIRTY:pX,OK:Ii,isAborted:H3,isDirty:q3,isValid:J_,isAsync:kI,get util(){return an},get objectUtil(){return W3},ZodParsedType:De,getParsedType:th,ZodType:Dt,ZodString:Sc,ZodNumber:vf,ZodBigInt:Ef,ZodBoolean:Z_,ZodDate:Hg,ZodSymbol:OI,ZodUndefined:X_,ZodNull:eC,ZodAny:B0,ZodUnknown:mg,ZodNever:dd,ZodVoid:DI,ZodArray:Pc,ZodObject:lr,ZodUnion:tC,ZodDiscriminatedUnion:WT,ZodIntersection:nC,ZodTuple:Wl,ZodRecord:rC,ZodMap:$I,ZodSet:qg,ZodFunction:lw,ZodLazy:sC,ZodLiteral:iC,ZodEnum:_f,ZodNativeEnum:oC,ZodPromise:j0,ZodEffects:Lc,ZodTransformer:Lc,ZodOptional:Yu,ZodNullable:Gg,ZodDefault:aC,ZodCatch:LI,ZodNaN:MI,BRAND:Vke,ZodBranded:mX,ZodPipeline:R1,ZodReadonly:UI,custom:yX,Schema:Dt,ZodSchema:Dt,late:Kke,get ZodFirstPartyTypeKind(){return yt},coerce:TOe,any:nOe,array:oOe,bigint:Jke,boolean:vX,date:Zke,discriminatedUnion:uOe,effect:SF,enum:bOe,function:mOe,instanceof:Yke,intersection:dOe,lazy:yOe,literal:wOe,map:pOe,nan:Qke,nativeEnum:vOe,never:sOe,null:tOe,nullable:COe,number:bX,object:aOe,oboolean:NOe,onumber:IOe,optional:_Oe,ostring:xOe,pipeline:SOe,preprocess:AOe,promise:EOe,record:fOe,set:gOe,strictObject:cOe,string:wX,symbol:Xke,transformer:SF,tuple:hOe,undefined:eOe,union:lOe,unknown:rOe,void:iOe,NEVER:ROe,ZodIssueCode:Ae,quotelessJson:Oke,ZodError:Rc});const yr=E.object({message:E.string()});function Be(t){return E.literal(We[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const POe=E.object({chainId:E.string().or(E.number())}),kOe=E.object({email:E.string().email()}),OOe=E.object({otp:E.string()}),DOe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),$Oe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),LOe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),MOe=E.object({email:E.string().email()}),UOe=E.object({otp:E.string()}),BOe=E.object({otp:E.string()}),jOe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),FOe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),zOe=E.object({type:E.string()}),WOe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),HOe=E.object({url:E.string()}),qOe=E.object({userName:E.string()}),GOe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ds.ACCOUNT_TYPES.EOA,Ds.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),VOe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),KOe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ds.ACCOUNT_TYPES.EOA,Ds.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),YOe=E.object({uri:E.string()}),QOe=E.object({isConnected:E.boolean()}),JOe=E.object({chainId:E.string().or(E.number())}),ZOe=E.object({chainId:E.string().or(E.number())}),XOe=E.object({newEmail:E.string().email()}),e2e=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const t2e=E.object({version:E.string().optional()}),n2e=E.object({type:E.string(),address:E.string()}),r2e=E.any(),s2e=E.object({method:E.literal("eth_accounts")}),i2e=E.object({method:E.literal("eth_blockNumber")}),o2e=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),a2e=E.object({method:E.literal("eth_chainId")}),c2e=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),l2e=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),u2e=E.object({method:E.literal("eth_gasPrice")}),d2e=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),h2e=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),f2e=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),p2e=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),g2e=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),m2e=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),y2e=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),w2e=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),b2e=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),v2e=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),E2e=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),_2e=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),C2e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),A2e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),S2e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),x2e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),I2e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),N2e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),T2e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),R2e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),P2e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),k2e=E.object({method:E.literal("eth_newBlockFilter")}),O2e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),D2e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),$2e=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),L2e=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),M2e=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),xF=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),U2e=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),B2e=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),j2e=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),F2e=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),z2e=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),W2e=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),H2e=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),q2e=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),G2e=E.object({method:E.literal("wallet_getCapabilities")}),V2e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),K2e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),Y2e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),IF=E.object({token:E.string()}),je=E.object({id:E.string().optional()}),Ev={appEvent:je.extend({type:Be("APP_SWITCH_NETWORK"),payload:POe}).or(je.extend({type:Be("APP_CONNECT_EMAIL"),payload:kOe})).or(je.extend({type:Be("APP_CONNECT_DEVICE")})).or(je.extend({type:Be("APP_CONNECT_OTP"),payload:OOe})).or(je.extend({type:Be("APP_CONNECT_SOCIAL"),payload:DOe})).or(je.extend({type:Be("APP_GET_FARCASTER_URI")})).or(je.extend({type:Be("APP_CONNECT_FARCASTER")})).or(je.extend({type:Be("APP_GET_USER"),payload:E.optional($Oe)})).or(je.extend({type:Be("APP_GET_SOCIAL_REDIRECT_URI"),payload:LOe})).or(je.extend({type:Be("APP_SIGN_OUT")})).or(je.extend({type:Be("APP_IS_CONNECTED"),payload:E.optional(IF)})).or(je.extend({type:Be("APP_GET_CHAIN_ID")})).or(je.extend({type:Be("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(je.extend({type:Be("APP_INIT_SMART_ACCOUNT")})).or(je.extend({type:Be("APP_SET_PREFERRED_ACCOUNT"),payload:zOe})).or(je.extend({type:Be("APP_RPC_REQUEST"),payload:xF.or(Y2e).or(s2e).or(i2e).or(o2e).or(a2e).or(c2e).or(l2e).or(u2e).or(d2e).or(h2e).or(f2e).or(p2e).or(g2e).or(m2e).or(y2e).or(w2e).or(b2e).or(v2e).or(E2e).or(_2e).or(C2e).or(A2e).or(S2e).or(x2e).or(I2e).or(N2e).or(T2e).or(R2e).or(P2e).or(k2e).or(O2e).or(D2e).or($2e).or(L2e).or(M2e).or(xF).or(U2e).or(B2e).or(j2e).or(F2e).or(z2e).or(W2e).or(q2e).or(H2e).or(G2e).or(V2e).or(K2e)})).or(je.extend({type:Be("APP_UPDATE_EMAIL"),payload:MOe})).or(je.extend({type:Be("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:UOe})).or(je.extend({type:Be("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:BOe})).or(je.extend({type:Be("APP_SYNC_THEME"),payload:jOe})).or(je.extend({type:Be("APP_SYNC_DAPP_DATA"),payload:FOe})).or(je.extend({type:Be("APP_RELOAD")})),frameEvent:je.extend({type:Be("FRAME_SWITCH_NETWORK_ERROR"),payload:yr}).or(je.extend({type:Be("FRAME_SWITCH_NETWORK_SUCCESS"),payload:ZOe})).or(je.extend({type:Be("FRAME_CONNECT_EMAIL_SUCCESS"),payload:WOe})).or(je.extend({type:Be("FRAME_CONNECT_EMAIL_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:HOe})).or(je.extend({type:Be("FRAME_GET_FARCASTER_URI_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:qOe})).or(je.extend({type:Be("FRAME_CONNECT_FARCASTER_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_CONNECT_OTP_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_CONNECT_OTP_SUCCESS")})).or(je.extend({type:Be("FRAME_CONNECT_DEVICE_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_CONNECT_DEVICE_SUCCESS")})).or(je.extend({type:Be("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:GOe})).or(je.extend({type:Be("FRAME_CONNECT_SOCIAL_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_GET_USER_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_GET_USER_SUCCESS"),payload:KOe})).or(je.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:YOe})).or(je.extend({type:Be("FRAME_SIGN_OUT_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_SIGN_OUT_SUCCESS")})).or(je.extend({type:Be("FRAME_IS_CONNECTED_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_IS_CONNECTED_SUCCESS"),payload:QOe})).or(je.extend({type:Be("FRAME_GET_CHAIN_ID_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_GET_CHAIN_ID_SUCCESS"),payload:JOe})).or(je.extend({type:Be("FRAME_RPC_REQUEST_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_RPC_REQUEST_SUCCESS"),payload:r2e})).or(je.extend({type:Be("FRAME_SESSION_UPDATE"),payload:IF})).or(je.extend({type:Be("FRAME_UPDATE_EMAIL_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_UPDATE_EMAIL_SUCCESS"),payload:VOe})).or(je.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(je.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:XOe})).or(je.extend({type:Be("FRAME_SYNC_THEME_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_SYNC_THEME_SUCCESS")})).or(je.extend({type:Be("FRAME_SYNC_DAPP_DATA_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(je.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:e2e})).or(je.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:n2e})).or(je.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_READY"),payload:t2e})).or(je.extend({type:Be("FRAME_RELOAD_ERROR"),payload:yr})).or(je.extend({type:Be("FRAME_RELOAD_SUCCESS")}))};function Bk(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let Q2e=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=Ue.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!Bk(We.FRAME_EVENT_KEY,l))return;const u=Ev.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}jo.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{jo.isClient&&window.addEventListener("message",({data:o})=>{if(!Bk(We.FRAME_EVENT_KEY,o))return;const a=Ev.frameEvent.parse(o);i(a)})},onAppEvent:i=>{jo.isClient&&window.addEventListener("message",({data:o})=>{if(!Bk(We.APP_EVENT_KEY,o))return;const a=Ev.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(jo.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Ev.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(jo.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Ev.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),jo.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${$Se}?projectId=${e}&chainId=${r}&version=${MSe}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},J2e=class{constructor(e){var i;const n=vm({level:LSe}),{logger:r,chunkLoggerController:s}=DT({opts:n});this.logger=Us(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},Z2e=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new J2e(e)),this.abortController=i,this.w3mFrame=new Q2e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===We.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ss.get(We.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ss.get(We.EMAIL)}getUsername(){return Ss.get(We.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:We.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{jo.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:We.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:We.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:We.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:We.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:We.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:We.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:We.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:We.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:We.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:We.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:We.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:We.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:We.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:We.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:We.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:We.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:We.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:We.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:We.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:We.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ds.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:We.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===We.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===We.FRAME_IS_CONNECTED_ERROR&&e(),n.type===We.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===We.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===We.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===We.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===We.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ds.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===We.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===We.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ds.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[We.APP_SYNC_DAPP_DATA,We.APP_SYNC_THEME,We.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[We.APP_CONNECT_EMAIL,We.APP_CONNECT_DEVICE,We.APP_CONNECT_OTP,We.APP_CONNECT_SOCIAL,We.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var b,v,C;y.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((C=y.payload)==null?void 0:C.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ss.set(We.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ss.set(We.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ss.set(We.EMAIL,e),Ss.set(We.EMAIL_LOGIN_USED_KEY,"true"),Ss.delete(We.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ss.delete(We.EMAIL_LOGIN_USED_KEY),Ss.delete(We.EMAIL),Ss.delete(We.LAST_USED_CHAIN_KEY),Ss.delete(We.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ss.set(We.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ss.get(We.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ss.set(We.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},X2e=class JS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return JS.instance||(JS.instance=new Z2e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),JS.instance}};function eDe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function rs(t,...e){try{return eDe(t(...e))}catch(n){return Promise.reject(n)}}function tDe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function nDe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function ZS(t){if(tDe(t))return String(t);if(nDe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return ZS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const V3="base64:";function rDe(t){return typeof t=="string"?t:V3+oDe(t)}function sDe(t){return typeof t!="string"||!t.startsWith(V3)?t:iDe(t.slice(V3.length))}function iDe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function oDe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Wi(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function aDe(...t){return Wi(t.join(":"))}function KA(t){return t=Wi(t),t?t+":":""}function cDe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function lDe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const uDe="memory",dDe=()=>{const t=new Map;return{name:uDe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function hDe(t={}){const e={mounts:{"":t.driver||dDe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Wi(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await NF(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Wi(g?p:p.key),m=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(y);f(v).items.push({key:y,value:m,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Wi(l);const{relativeKey:d,driver:h}=n(l);return rs(h.hasItem,d,u)},getItem(l,u={}){l=Wi(l);const{relativeKey:d,driver:h}=n(l);return rs(h.getItem,d,u).then(f=>FA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?rs(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:aDe(d.base,f.key),value:FA(f.value)}))):Promise.all(d.items.map(h=>rs(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:FA(f)})))))},getItemRaw(l,u={}){l=Wi(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?rs(h.getItemRaw,d,u):rs(h.getItem,d,u).then(f=>sDe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Wi(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await rs(f.setItem,h,ZS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return rs(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:ZS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>rs(d.driver.setItem,h.relativeKey,ZS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Wi(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await rs(f.setItemRaw,h,u,d);else if(f.setItem)await rs(f.setItem,h,rDe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Wi(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await rs(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await rs(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Wi(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await rs(h.getMeta,d,u)),!u.nativeOnly){const p=await rs(h.getItem,d+"$",u).then(g=>FA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=KA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){(y=m.driver.flags)!=null&&y.maxDepth||(p=!1);const b=await rs(m.driver.getKeys,m.relativeBase,u);for(const v of b){const C=m.mountpoint+Wi(v);h.some(A=>C.startsWith(A))||f.push(C)}h=[m.mountpoint,...h.filter(v=>!v.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||cDe(m,u.maxDepth))&&lDe(m,l))},async clear(l,u={}){l=KA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return rs(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>TF(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=KA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(NF(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=KA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await TF(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Wi(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Wi(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function NF(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function TF(t){typeof t.dispose=="function"&&await rs(t.dispose)}const fDe="idb-keyval";var pDe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=bZ(t.dbName,t.storeName)),{name:fDe,options:t,async hasItem(s){return!(typeof await kj(n(s),r)>"u")},async getItem(s){return await kj(n(s),r)??null},setItem(s,i){return Uxe(n(s),i,r)},removeItem(s){return Bxe(n(s),r)},getKeys(){return zxe(r)},clear(){return jxe(r)}}};const gDe="WALLET_CONNECT_V2_INDEXED_DB",mDe="keyvaluestorage";let yDe=class{constructor(){this.indexedDb=hDe({driver:pDe({dbName:gDe,storeName:mDe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ud(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var jk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof jk<"u"&&jk.localStorage?XS.exports=jk.localStorage:typeof window<"u"&&window.localStorage?XS.exports=window.localStorage:XS.exports=new e})();function wDe(t){var e;return[t[0],zg((e=t[1])!=null?e:"")]}let bDe=class{constructor(){this.localStorage=XS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(wDe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return zg(n)}async setItem(e,n){this.localStorage.setItem(e,ud(n))}async removeItem(e){this.localStorage.removeItem(e)}};const vDe="wc_storage_version",RF=1,EDe=async(t,e,n)=>{const r=vDe,s=await e.getItem(r);if(s&&s>=RF){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,RF),n(e),_De(t,o)},_De=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let CDe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new bDe;this.storage=e;try{const n=new yDe;EDe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var ADe=Object.defineProperty,SDe=(t,e,n)=>e in t?ADe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PF=(t,e,n)=>SDe(t,typeof e!="symbol"?e+"":e,n);let xDe=class extends ym{constructor(e){super(),this.opts=e,PF(this,"protocol","wc"),PF(this,"version",2)}};var IDe=Object.defineProperty,NDe=(t,e,n)=>e in t?IDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TDe=(t,e,n)=>NDe(t,e+"",n);let RDe=class extends ym{constructor(e,n){super(),this.core=e,this.logger=n,TDe(this,"records",new Map)}},PDe=class{constructor(e,n){this.logger=e,this.core=n}},kDe=class extends ym{constructor(e,n){super(),this.relayer=e,this.logger=n}},ODe=class extends ym{constructor(e){super()}},DDe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},$De=class extends ym{constructor(e,n){super(),this.relayer=e,this.logger=n}},LDe=class extends ym{constructor(e,n){super(),this.core=e,this.logger=n}},MDe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},UDe=class{constructor(e,n){this.projectId=e,this.logger=n}},BDe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var jDe=Object.defineProperty,FDe=(t,e,n)=>e in t?jDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kF=(t,e,n)=>FDe(t,typeof e!="symbol"?e+"":e,n);let zDe=class{constructor(e){this.opts=e,kF(this,"protocol","wc"),kF(this,"version",2)}},WDe=class{constructor(e){this.client=e}};function cC(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function OF(t){return cC(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const EX="2.23.2";let _v={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${EX}`};class Vg extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Vg?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Vg&&n.cause.docsPath||n.docsPath,i=(a=_v.getDocsUrl)==null?void 0:a.call(_v,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],..._v.version?[`Version: ${_v.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=EX}walk(e){return _X(this,e)}}function _X(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?_X(t.cause,e):e?null:t}class CX extends Vg{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Tb(t,{dir:e,size:n=32}={}){return typeof t=="string"?HDe(t,{dir:e,size:n}):qDe(t,{dir:e,size:n})}function HDe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new CX({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function qDe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new CX({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class GDe extends Vg{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class VDe extends Vg{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Rb(t,{size:e}){if(OF(t)>e)throw new VDe({givenSize:OF(t),maxSize:e})}function K3(t,e={}){const{signed:n}=e;e.size&&Rb(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function KDe(t,e={}){return Number(K3(t,e))}const YDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Y3(t,e={}){return typeof t=="number"||typeof t=="bigint"?SX(t,e):typeof t=="string"?ZDe(t,e):typeof t=="boolean"?QDe(t,e):AX(t,e)}function QDe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Rb(n,{size:e.size}),Tb(n,{size:e.size})):n}function AX(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=YDe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Rb(r,{size:e.size}),Tb(r,{dir:"right",size:e.size})):r}function SX(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new GDe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Tb(a,{size:r}):a}const JDe=new TextEncoder;function ZDe(t,e={}){const n=JDe.encode(t);return AX(n,e)}const XDe=new TextEncoder;function e3e(t,e={}){return typeof t=="number"||typeof t=="bigint"?n3e(t,e):typeof t=="boolean"?t3e(t,e):cC(t)?xX(t,e):IX(t,e)}function t3e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Rb(n,{size:e.size}),Tb(n,{size:e.size})):n}const au={zero:48,nine:57,A:65,F:70,a:97,f:102};function DF(t){if(t>=au.zero&&t<=au.nine)return t-au.zero;if(t>=au.A&&t<=au.F)return t-(au.A-10);if(t>=au.a&&t<=au.f)return t-(au.a-10)}function xX(t,e={}){let n=t;e.size&&(Rb(n,{size:e.size}),n=Tb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=DF(r.charCodeAt(a++)),l=DF(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Vg(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function n3e(t,e){const n=SX(t,e);return xX(n)}function IX(t,e={}){const n=XDe.encode(t);return typeof e.size=="number"?(Rb(n,{size:e.size}),Tb(n,{dir:"right",size:e.size})):n}function BI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function r3e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function HT(t,...e){if(!r3e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ZQe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");BI(t.outputLen),BI(t.blockLen)}function $F(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function s3e(t,e){HT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const YA=BigInt(2**32-1),LF=BigInt(32);function i3e(t,e=!1){return e?{h:Number(t&YA),l:Number(t>>LF&YA)}:{h:Number(t>>LF&YA)|0,l:Number(t&YA)|0}}function o3e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=i3e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const a3e=(t,e,n)=>t<<n|e>>>32-n,c3e=(t,e,n)=>e<<n|t>>>32-n,l3e=(t,e,n)=>e<<n-32|t>>>64-n,u3e=(t,e,n)=>t<<n-32|e>>>64-n,Gm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function d3e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function XQe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function eJe(t,e){return t<<32-e|t>>>e}const MF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function h3e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function UF(t){for(let e=0;e<t.length;e++)t[e]=h3e(t[e])}function f3e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function NX(t){return typeof t=="string"&&(t=f3e(t)),HT(t),t}function tJe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];HT(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let p3e=class{clone(){return this._cloneInto()}};function g3e(t){const e=r=>t().update(NX(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function rJe(t=32){if(Gm&&typeof Gm.getRandomValues=="function")return Gm.getRandomValues(new Uint8Array(t));if(Gm&&typeof Gm.randomBytes=="function")return Gm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const TX=[],RX=[],PX=[],m3e=BigInt(0),Cv=BigInt(1),y3e=BigInt(2),w3e=BigInt(7),b3e=BigInt(256),v3e=BigInt(113);for(let t=0,e=Cv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],TX.push(2*(5*r+n)),RX.push((t+1)*(t+2)/2%64);let s=m3e;for(let i=0;i<7;i++)e=(e<<Cv^(e>>w3e)*v3e)%b3e,e&y3e&&(s^=Cv<<(Cv<<BigInt(i))-Cv);PX.push(s)}const[E3e,_3e]=o3e(PX,!0),BF=(t,e,n)=>n>32?l3e(t,e,n):a3e(t,e,n),jF=(t,e,n)=>n>32?u3e(t,e,n):c3e(t,e,n);function C3e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=BF(l,u,1)^n[a],h=jF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=RX[o],c=BF(s,i,a),l=jF(s,i,a),u=TX[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=E3e[r],t[1]^=_3e[r]}n.fill(0)}let A3e=class kX extends p3e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,BI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=d3e(this.state)}keccak(){MF||UF(this.state32),C3e(this.state32,this.rounds),MF||UF(this.state32),this.posOut=0,this.pos=0}update(e){$F(this);const{blockLen:n,state:r}=this;e=NX(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){$F(this,!1),HT(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return BI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(s3e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new kX(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const S3e=(t,e,n)=>g3e(()=>new A3e(e,t,n)),x3e=S3e(1,136,256/8);function OX(t,e){const n=e||"hex",r=x3e(cC(t,{strict:!1})?e3e(t):t);return n==="bytes"?r:Y3(r)}class I3e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Fk=new I3e(8192);function N3e(t,e){if(Fk.has(`${t}.${e}`))return Fk.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=OX(IX(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Fk.set(`${t}.${e}`,i),i}function T3e(t){const e=OX(`0x${t.substring(4)}`).substring(26);return N3e(`0x${e}`)}async function R3e({hash:t,signature:e}){const n=cC(t)?t:Y3(t),{secp256k1:r}=await Nr(async()=>{const{secp256k1:o}=await import("./secp256k1-DXuXF7G8.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=FF(f);return new r.Signature(K3(l),K3(u)).addRecoveryBit(p)}const o=cC(e)?e:Y3(e),a=KDe(`0x${o.slice(130)}`),c=FF(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function FF(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function P3e({hash:t,signature:e}){return T3e(await R3e({hash:t,signature:e}))}var k3e={};const O3e=":";function uw(t){const[e,n]=t.split(O3e);return{namespace:e,reference:n}}function DX(t,e){return t.includes(":")?[t]:e.chains||[]}var D3e=Object.defineProperty,$3e=Object.defineProperties,L3e=Object.getOwnPropertyDescriptors,zF=Object.getOwnPropertySymbols,M3e=Object.prototype.hasOwnProperty,U3e=Object.prototype.propertyIsEnumerable,WF=(t,e,n)=>e in t?D3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HF=(t,e)=>{for(var n in e||(e={}))M3e.call(e,n)&&WF(t,n,e[n]);if(zF)for(var n of zF(e))U3e.call(e,n)&&WF(t,n,e[n]);return t},B3e=(t,e)=>$3e(t,L3e(e));const j3e="ReactNative",zo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},F3e="js";function jI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Of(){return!Wg()&&!!hU()&&navigator.product===j3e}function z3e(){return Of()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function W3e(){return Of()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Pb(){return!jI()&&!!hU()&&!!Wg()}function P1(){return Of()?zo.reactNative:jI()?zo.node:Pb()?zo.browser:zo.unknown}function qF(){var t;try{return Of()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function H3e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function q3e(t){var e,n;const r=$X();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),B3e(HF(HF({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function $X(){return XZ()||{name:"",description:"",url:"",icons:[""]}}function G3e(){if(P1()===zo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=mRe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function V3e(){var t;const e=P1();return e===zo.browser?[e,((t=ZZ())==null?void 0:t.host)||"unknown"].join(":"):e}function LX(t,e,n){const r=G3e(),s=V3e();return[[t,e].join("-"),[F3e,n].join("-"),r,s].join("/")}function K3e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=LX(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=H3e(l[1]||"",d);return l[0]+"?"+h}function kp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Q3(t){return Object.fromEntries(t.entries())}function J3(t){return new Map(Object.entries(t))}function rp(t=Se.FIVE_MINUTES,e){const n=Se.toMiliseconds(t||Se.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Mh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function MX(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Y3e(t){return MX("topic",t)}function Q3e(t){return MX("id",t)}function UX(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function zr(t,e){return Se.fromMiliseconds(Date.now()+Se.toMiliseconds(t))}function Qd(t){return Date.now()>=Se.toMiliseconds(t)}function gn(t,e){return`${t}${e?`:${e}`:""}`}function $l(t=[],e=[]){return[...new Set([...t,...e])]}async function J3e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=Z3e(i,t,e),a=P1();if(a===zo.browser){if(!((r=Wg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}X3e(o)}else a===zo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function Z3e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${r$e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function X3e(t){let e="_self";n$e()?e="_top":(t$e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function e$e(t,e){let n="";try{if(Pb()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function GF(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function VF(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function mU(){return typeof process<"u"&&k3e.IS_VITEST==="true"}function t$e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function n$e(){try{return window.self!==window.top}catch{return!1}}function r$e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function BX(t){return Buffer.from(t,"base64").toString("utf-8")}function s$e(t){return new Promise(e=>setTimeout(e,t))}function lC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function i$e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function k1(t,...e){if(!i$e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function yU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");lC(t.outputLen),lC(t.blockLen)}function F0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jX(t,e){k1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const QA=BigInt(2**32-1),KF=BigInt(32);function o$e(t,e=!1){return e?{h:Number(t&QA),l:Number(t>>KF&QA)}:{h:Number(t>>KF&QA)|0,l:Number(t&QA)|0}}function a$e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=o$e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const c$e=(t,e,n)=>t<<n|e>>>32-n,l$e=(t,e,n)=>e<<n|t>>>32-n,u$e=(t,e,n)=>e<<n-32|t>>>64-n,d$e=(t,e,n)=>t<<n-32|e>>>64-n,Vm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function h$e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function zk(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Kc(t,e){return t<<32-e|t>>>e}const YF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function f$e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function QF(t){for(let e=0;e<t.length;e++)t[e]=f$e(t[e])}function p$e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function z0(t){return typeof t=="string"&&(t=p$e(t)),k1(t),t}function g$e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];k1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let wU=class{clone(){return this._cloneInto()}};function FX(t){const e=r=>t().update(z0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function kb(t=32){if(Vm&&typeof Vm.getRandomValues=="function")return Vm.getRandomValues(new Uint8Array(t));if(Vm&&typeof Vm.randomBytes=="function")return Vm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const zX=[],WX=[],HX=[],m$e=BigInt(0),Av=BigInt(1),y$e=BigInt(2),w$e=BigInt(7),b$e=BigInt(256),v$e=BigInt(113);for(let t=0,e=Av,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],zX.push(2*(5*r+n)),WX.push((t+1)*(t+2)/2%64);let s=m$e;for(let i=0;i<7;i++)e=(e<<Av^(e>>w$e)*v$e)%b$e,e&y$e&&(s^=Av<<(Av<<BigInt(i))-Av);HX.push(s)}const[E$e,_$e]=a$e(HX,!0),JF=(t,e,n)=>n>32?u$e(t,e,n):c$e(t,e,n),ZF=(t,e,n)=>n>32?d$e(t,e,n):l$e(t,e,n);function C$e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=JF(l,u,1)^n[a],h=ZF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=WX[o],c=JF(s,i,a),l=ZF(s,i,a),u=zX[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=E$e[r],t[1]^=_$e[r]}n.fill(0)}let A$e=class qX extends wU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,lC(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=h$e(this.state)}keccak(){YF||QF(this.state32),C$e(this.state32,this.rounds),YF||QF(this.state32),this.posOut=0,this.pos=0}update(e){F0(this);const{blockLen:n,state:r}=this;e=z0(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){F0(this,!1),k1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return lC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(jX(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new qX(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const S$e=(t,e,n)=>FX(()=>new A$e(e,t,n)),x$e=S$e(1,136,256/8),I$e="https://rpc.walletconnect.org/v1";function GX(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(x$e(n)).toString("hex")}async function N$e(t,e,n,r,s,i){switch(n.t){case"eip191":return await T$e(t,e,n.s);case"eip1271":return await R$e(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function T$e(t,e,n){return(await P3e({hash:GX(e),signature:n})).toLowerCase()===t.toLowerCase()}async function R$e(t,e,n,r,s,i){const o=uw(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=GX(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||I$e}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:P$e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function P$e(){return Date.now()+Math.floor(Math.random()*1e3)}function k$e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return eX.encode(i)}var O$e=Object.defineProperty,D$e=Object.defineProperties,$$e=Object.getOwnPropertyDescriptors,XF=Object.getOwnPropertySymbols,L$e=Object.prototype.hasOwnProperty,M$e=Object.prototype.propertyIsEnumerable,e9=(t,e,n)=>e in t?O$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U$e=(t,e)=>{for(var n in e||(e={}))L$e.call(e,n)&&e9(t,n,e[n]);if(XF)for(var n of XF(e))M$e.call(e,n)&&e9(t,n,e[n]);return t},B$e=(t,e)=>D$e(t,$$e(e));const j$e="did:pkh:",bU=t=>t==null?void 0:t.split(":"),F$e=t=>{const e=t&&bU(t);if(e)return t.includes(j$e)?e[3]:e[1]},Z3=t=>{const e=t&&bU(t);if(e)return e[2]+":"+e[3]},FI=t=>{const e=t&&bU(t);if(e)return e.pop()};async function t9(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=VX(s,s.iss),o=FI(s.iss);return await N$e(o,i,r,Z3(s.iss),n)}const VX=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=FI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${F$e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=ex(t.resources);if(p){const g=uC(p);s=Q$e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function z$e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function W$e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Kg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function H$e(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:q$e(e,n,r)}}}function q$e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function KX(t){return Kg(t),`urn:recap:${z$e(t).replace(/=/g,"")}`}function uC(t){const e=W$e(t.replace("urn:recap:",""));return Kg(e),e}function G$e(t,e,n){const r=H$e(t,e,n);return KX(r)}function V$e(t){return t&&t.includes("urn:recap:")}function K$e(t,e){const n=uC(t),r=uC(e),s=Y$e(n,r);return KX(s)}function Y$e(t,e){Kg(t),Kg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=B$e(U$e({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Q$e(t="",e){Kg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function n9(t){var e;const n=uC(t);Kg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function r9(t){const e=uC(t);Kg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function ex(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return V$e(e)?e:void 0}function Wk(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function YX(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Bo(t,...e){if(!YX(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function s9(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function J$e(t,e){Bo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function i9(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const sf=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Z$e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),X$e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!X$e)throw new Error("Non little-endian hardware is not supported");function eLe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function X3(t){if(typeof t=="string")t=eLe(t);else if(YX(t))t=e$(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function tLe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function nLe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const rLe=(t,e)=>{function n(r,...s){if(Bo(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Bo(l):Bo(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Bo(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Bo(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Bo(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Bo(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function o9(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!sLe(e))throw new Error("invalid output, must be aligned");return e}function a9(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function sLe(t){return t.byteOffset%4===0}function e$(t){return Uint8Array.from(t)}function W0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const QX=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),iLe=QX("expand 16-byte k"),oLe=QX("expand 32-byte k"),aLe=sf(iLe),cLe=sf(oLe);function nn(t,e){return t<<e|t>>>32-e}function t$(t){return t.byteOffset%4===0}const JA=64,lLe=16,JX=2**32-1,c9=new Uint32Array;function uLe(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(JA),u=sf(l),d=t$(s)&&t$(i),h=d?sf(s):c9,f=d?sf(i):c9;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=JX)throw new Error("arx: counter overflow");const g=Math.min(JA,c-p);if(d&&g===JA){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,b;m<lLe;m++)b=y+m,f[b]=h[b]^u[m];p+=JA;continue}for(let y=0,m;y<g;y++)m=p+y,i[m]=s[m]^l[y];p+=g}}function dLe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=tLe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Wk(s),Wk(o),i9(i),i9(n),(a,c,l,u,d=0)=>{Bo(a),Bo(c),Bo(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Bo(u),Wk(d),d<0||d>=JX)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=e$(a)),y=cLe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=aLe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);t$(c)||f.push(c=e$(c));const m=sf(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,m,sf(c.subarray(0,16)),m),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const C=new Uint8Array(12);C.set(c,i?0:12-c.length),c=C,f.push(c)}const v=sf(c);return uLe(t,y,m,v,l,u,d,o),W0(...f),u}}const Es=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class hLe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=X3(e),Bo(e,32);const n=Es(e,0),r=Es(e,2),s=Es(e,4),i=Es(e,6),o=Es(e,8),a=Es(e,10),c=Es(e,12),l=Es(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Es(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],m=Es(e,n+0),b=Es(e,n+2),v=Es(e,n+4),C=Es(e,n+6),A=Es(e,n+8),S=Es(e,n+10),x=Es(e,n+12),R=Es(e,n+14);let I=i[0]+(m&8191),O=i[1]+((m>>>13|b<<3)&8191),P=i[2]+((b>>>10|v<<6)&8191),B=i[3]+((v>>>7|C<<9)&8191),H=i[4]+((C>>>4|A<<12)&8191),j=i[5]+(A>>>1&8191),T=i[6]+((A>>>14|S<<2)&8191),N=i[7]+((S>>>11|x<<5)&8191),M=i[8]+((x>>>8|R<<8)&8191),k=i[9]+(R>>>5|s),D=0,U=D+I*a+O*(5*y)+P*(5*g)+B*(5*p)+H*(5*f);D=U>>>13,U&=8191,U+=j*(5*h)+T*(5*d)+N*(5*u)+M*(5*l)+k*(5*c),D+=U>>>13,U&=8191;let q=D+I*c+O*a+P*(5*y)+B*(5*g)+H*(5*p);D=q>>>13,q&=8191,q+=j*(5*f)+T*(5*h)+N*(5*d)+M*(5*u)+k*(5*l),D+=q>>>13,q&=8191;let X=D+I*l+O*c+P*a+B*(5*y)+H*(5*g);D=X>>>13,X&=8191,X+=j*(5*p)+T*(5*f)+N*(5*h)+M*(5*d)+k*(5*u),D+=X>>>13,X&=8191;let ae=D+I*u+O*l+P*c+B*a+H*(5*y);D=ae>>>13,ae&=8191,ae+=j*(5*g)+T*(5*p)+N*(5*f)+M*(5*h)+k*(5*d),D+=ae>>>13,ae&=8191;let oe=D+I*d+O*u+P*l+B*c+H*a;D=oe>>>13,oe&=8191,oe+=j*(5*y)+T*(5*g)+N*(5*p)+M*(5*f)+k*(5*h),D+=oe>>>13,oe&=8191;let le=D+I*h+O*d+P*u+B*l+H*c;D=le>>>13,le&=8191,le+=j*a+T*(5*y)+N*(5*g)+M*(5*p)+k*(5*f),D+=le>>>13,le&=8191;let Ee=D+I*f+O*h+P*d+B*u+H*l;D=Ee>>>13,Ee&=8191,Ee+=j*c+T*a+N*(5*y)+M*(5*g)+k*(5*p),D+=Ee>>>13,Ee&=8191;let Z=D+I*p+O*f+P*h+B*d+H*u;D=Z>>>13,Z&=8191,Z+=j*l+T*c+N*a+M*(5*y)+k*(5*g),D+=Z>>>13,Z&=8191;let ce=D+I*g+O*p+P*f+B*h+H*d;D=ce>>>13,ce&=8191,ce+=j*u+T*l+N*c+M*a+k*(5*y),D+=ce>>>13,ce&=8191;let fe=D+I*y+O*g+P*p+B*f+H*h;D=fe>>>13,fe&=8191,fe+=j*d+T*u+N*l+M*c+k*a,D+=fe>>>13,fe&=8191,D=(D<<2)+D|0,D=D+U|0,U=D&8191,D=D>>>13,q+=D,i[0]=U,i[1]=q,i[2]=X,i[3]=ae,i[4]=oe,i[5]=le,i[6]=Ee,i[7]=Z,i[8]=ce,i[9]=fe}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;W0(r)}update(e){s9(this);const{buffer:n,blockLen:r}=this;e=X3(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){W0(this.h,this.r,this.buffer,this.pad)}digestInto(e){s9(this),J$e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function fLe(t){const e=(r,s)=>t(s).update(X3(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const pLe=fLe(t=>new hLe(t));function gLe(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],m=e[7],b=s,v=n[0],C=n[1],A=n[2],S=o,x=a,R=c,I=l,O=u,P=d,B=h,H=f,j=p,T=g,N=y,M=m,k=b,D=v,U=C,q=A;for(let ae=0;ae<i;ae+=2)S=S+O|0,k=nn(k^S,16),j=j+k|0,O=nn(O^j,12),S=S+O|0,k=nn(k^S,8),j=j+k|0,O=nn(O^j,7),x=x+P|0,D=nn(D^x,16),T=T+D|0,P=nn(P^T,12),x=x+P|0,D=nn(D^x,8),T=T+D|0,P=nn(P^T,7),R=R+B|0,U=nn(U^R,16),N=N+U|0,B=nn(B^N,12),R=R+B|0,U=nn(U^R,8),N=N+U|0,B=nn(B^N,7),I=I+H|0,q=nn(q^I,16),M=M+q|0,H=nn(H^M,12),I=I+H|0,q=nn(q^I,8),M=M+q|0,H=nn(H^M,7),S=S+P|0,q=nn(q^S,16),N=N+q|0,P=nn(P^N,12),S=S+P|0,q=nn(q^S,8),N=N+q|0,P=nn(P^N,7),x=x+B|0,k=nn(k^x,16),M=M+k|0,B=nn(B^M,12),x=x+B|0,k=nn(k^x,8),M=M+k|0,B=nn(B^M,7),R=R+H|0,D=nn(D^R,16),j=j+D|0,H=nn(H^j,12),R=R+H|0,D=nn(D^R,8),j=j+D|0,H=nn(H^j,7),I=I+O|0,U=nn(U^I,16),T=T+U|0,O=nn(O^T,12),I=I+O|0,U=nn(U^I,8),T=T+U|0,O=nn(O^T,7);let X=0;r[X++]=o+S|0,r[X++]=a+x|0,r[X++]=c+R|0,r[X++]=l+I|0,r[X++]=u+O|0,r[X++]=d+P|0,r[X++]=h+B|0,r[X++]=f+H|0,r[X++]=p+j|0,r[X++]=g+T|0,r[X++]=y+N|0,r[X++]=m+M|0,r[X++]=b+k|0,r[X++]=v+D|0,r[X++]=C+U|0,r[X++]=A+q|0}const mLe=dLe(gLe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),yLe=new Uint8Array(16),l9=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(yLe.subarray(n))},wLe=new Uint8Array(32);function u9(t,e,n,r,s){const i=t(e,n,wLe),o=pLe.create(i);s&&l9(o,s),l9(o,r);const a=new Uint8Array(16),c=Z$e(a);a9(c,0,BigInt(s?s.length:0),!0),a9(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return W0(i,a),l}const bLe=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=o9(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=u9(t,e,n,a,r);return i.set(c,o),W0(c),i},decrypt(s,i){i=o9(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=u9(t,e,n,o,r);if(!nLe(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),W0(c),i}}),ZX=rLe({blockSize:64,nonceLength:12,tagLength:16},bLe(mLe));let XX=class extends wU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,yU(e);const r=z0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return F0(this),this.iHash.update(e),this}digestInto(e){F0(this),k1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const qT=(t,e,n)=>new XX(t,e).update(n).digest();qT.create=(t,e)=>new XX(t,e);function vLe(t,e,n){return yU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),qT(t,z0(n),z0(e))}const Hk=new Uint8Array([0]),d9=new Uint8Array;function ELe(t,e,n,r=32){if(yU(t),lC(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=d9);const i=new Uint8Array(s*t.outputLen),o=qT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)Hk[0]=l+1,a.update(l===0?d9:c).update(n).update(Hk).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Hk.fill(0),i.slice(0,r)}const _Le=(t,e,n,r,s)=>ELe(t,vLe(t,e,n),r,s);function CLe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function ALe(t,e,n){return t&e^~t&n}function SLe(t,e,n){return t&e^t&n^e&n}let xLe=class extends wU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=zk(this.buffer)}update(e){F0(this);const{view:n,buffer:r,blockLen:s}=this;e=z0(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=zk(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){F0(this),jX(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;CLe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=zk(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const ILe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Od=new Uint32Array(64);class NLe extends xLe{constructor(){super(64,32,8,!1),this.A=kd[0]|0,this.B=kd[1]|0,this.C=kd[2]|0,this.D=kd[3]|0,this.E=kd[4]|0,this.F=kd[5]|0,this.G=kd[6]|0,this.H=kd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Od[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Od[d-15],f=Od[d-2],p=Kc(h,7)^Kc(h,18)^h>>>3,g=Kc(f,17)^Kc(f,19)^f>>>10;Od[d]=g+Od[d-7]+p+Od[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Kc(a,6)^Kc(a,11)^Kc(a,25),f=u+h+ALe(a,c,l)+ILe[d]+Od[d]|0,p=(Kc(r,2)^Kc(r,13)^Kc(r,22))+SLe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Od.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const O1=FX(()=>new NLe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const GT=BigInt(0),VT=BigInt(1),TLe=BigInt(2);function Yg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function D1(t){if(!Yg(t))throw new Error("Uint8Array expected")}function H0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const RLe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function q0(t){D1(t);let e="";for(let n=0;n<t.length;n++)e+=RLe[t[n]];return e}function Wy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function vU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?GT:BigInt("0x"+t)}const cu={_0:48,_9:57,A:65,F:70,a:97,f:102};function h9(t){if(t>=cu._0&&t<=cu._9)return t-cu._0;if(t>=cu.A&&t<=cu.F)return t-(cu.A-10);if(t>=cu.a&&t<=cu.f)return t-(cu.a-10)}function G0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=h9(t.charCodeAt(i)),a=h9(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function yg(t){return vU(q0(t))}function dC(t){return D1(t),vU(q0(Uint8Array.from(t).reverse()))}function V0(t,e){return G0(t.toString(16).padStart(e*2,"0"))}function KT(t,e){return V0(t,e).reverse()}function PLe(t){return G0(Wy(t))}function Mo(t,e,n){let r;if(typeof e=="string")try{r=G0(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Yg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function hC(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];D1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function kLe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function OLe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const qk=t=>typeof t=="bigint"&&GT<=t;function YT(t,e,n){return qk(t)&&qk(e)&&qk(n)&&e<=t&&t<n}function Qu(t,e,n,r){if(!YT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function eee(t){let e;for(e=0;t>GT;t>>=VT,e+=1);return e}function DLe(t,e){return t>>BigInt(e)&VT}function $Le(t,e,n){return t|(n?VT:GT)<<BigInt(e)}const EU=t=>(TLe<<BigInt(t-1))-VT,Gk=t=>new Uint8Array(t),f9=t=>Uint8Array.from(t);function tee(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Gk(t),s=Gk(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=Gk())=>{s=a(f9([0]),u),r=a(),u.length!==0&&(s=a(f9([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return hC(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const LLe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Yg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Ob(t,e,n={}){const r=(s,i,o)=>{const a=LLe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const MLe=()=>{throw new Error("not implemented")};function n$(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var ULe=Object.freeze({__proto__:null,isBytes:Yg,abytes:D1,abool:H0,bytesToHex:q0,numberToHexUnpadded:Wy,hexToNumber:vU,hexToBytes:G0,bytesToNumberBE:yg,bytesToNumberLE:dC,numberToBytesBE:V0,numberToBytesLE:KT,numberToVarBytesBE:PLe,ensureBytes:Mo,concatBytes:hC,equalBytes:kLe,utf8ToBytes:OLe,inRange:YT,aInRange:Qu,bitLen:eee,bitGet:DLe,bitSet:$Le,bitMask:EU,createHmacDrbg:tee,validateObject:Ob,notImplemented:MLe,memoized:n$});const ms=BigInt(0),kr=BigInt(1),dp=BigInt(2),BLe=BigInt(3),r$=BigInt(4),p9=BigInt(5),g9=BigInt(8);function Zi(t,e){const n=t%e;return n>=ms?n:e+n}function nee(t,e,n){if(e<ms)throw new Error("invalid exponent, negatives unsupported");if(n<=ms)throw new Error("invalid modulus");if(n===kr)return ms;let r=kr;for(;e>ms;)e&kr&&(r=r*t%n),t=t*t%n,e>>=kr;return r}function Xa(t,e,n){let r=t;for(;e-- >ms;)r*=r,r%=n;return r}function s$(t,e){if(t===ms)throw new Error("invert: expected non-zero number");if(e<=ms)throw new Error("invert: expected positive modulus, got "+e);let n=Zi(t,e),r=e,s=ms,i=kr;for(;n!==ms;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==kr)throw new Error("invert: does not exist");return Zi(s,e)}function jLe(t){const e=(t-kr)/dp;let n,r,s;for(n=t-kr,r=0;n%dp===ms;n/=dp,r++);for(s=dp;s<t&&nee(s,e,t)!==t-kr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+kr)/r$;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+kr)/dp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,kr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function FLe(t){if(t%r$===BLe){const e=(t+kr)/r$;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%g9===p9){const e=(t-p9)/g9;return function(n,r){const s=n.mul(r,dp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,dp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return jLe(t)}const zLe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function WLe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=zLe.reduce((r,s)=>(r[s]="function",r),e);return Ob(t,n)}function HLe(t,e,n){if(n<ms)throw new Error("invalid exponent, negatives unsupported");if(n===ms)return t.ONE;if(n===kr)return e;let r=t.ONE,s=e;for(;n>ms;)n&kr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=kr;return r}function qLe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function ree(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function see(t,e,n=!1,r={}){if(t<=ms)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=ree(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:EU(s),ZERO:ms,ONE:kr,create:c=>Zi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ms<=c&&c<t},is0:c=>c===ms,isOdd:c=>(c&kr)===kr,neg:c=>Zi(-c,t),eql:(c,l)=>c===l,sqr:c=>Zi(c*c,t),add:(c,l)=>Zi(c+l,t),sub:(c,l)=>Zi(c-l,t),mul:(c,l)=>Zi(c*l,t),pow:(c,l)=>HLe(a,c,l),div:(c,l)=>Zi(c*s$(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>s$(c,t),sqrt:r.sqrt||(c=>(o||(o=FLe(t)),o(a,c))),invertBatch:c=>qLe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?KT(c,i):V0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?dC(c):yg(c)}});return Object.freeze(a)}function iee(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function oee(t){const e=iee(t);return e+Math.ceil(e/2)}function GLe(t,e,n=!1){const r=t.length,s=iee(e),i=oee(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?dC(t):yg(t),a=Zi(o,e-kr)+kr;return n?KT(a,s):V0(a,s)}const m9=BigInt(0),ZA=BigInt(1);function Vk(t,e){const n=e.negate();return t?n:e}function aee(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Kk(t,e){aee(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function VLe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function KLe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Yk=new WeakMap,cee=new WeakMap;function Qk(t){return cee.get(t)||1}function YLe(t,e){return{constTimeNegate:Vk,hasPrecomputes(n){return Qk(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>m9;)r&ZA&&(s=s.add(i)),i=i.double(),r>>=ZA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Kk(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Kk(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=ZA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(Vk(m,r[g])):a=a.add(Vk(b,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Kk(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===m9)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=ZA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=Yk.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Yk.set(r,s(i))),i},wNAFCached(n,r,s){const i=Qk(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Qk(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){aee(r,e),cee.set(n,r),Yk.delete(n)}}}function QLe(t,e,n,r){if(VLe(n,t),KLe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=eee(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function lee(t){return WLe(t.Fp),Ob(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ree(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Km=BigInt(0),Jk=BigInt(1);function JLe(t){return Ob(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function ZLe(t){const e=JLe(t),{P:n}=e,r=b=>Zi(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>nee(b,n-BigInt(2),n));function l(b,v,C){const A=r(b*(v-C));return v=r(v-A),C=r(C+A),[v,C]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){Qu("u",b,Km,n),Qu("scalar",v,Km,n);const C=v,A=b;let S=Jk,x=Km,R=b,I=Jk,O=Km,P;for(let H=BigInt(s-1);H>=Km;H--){const j=C>>H&Jk;O^=j,P=l(O,S,R),S=P[0],R=P[1],P=l(O,x,I),x=P[0],I=P[1],O=j;const T=S+x,N=r(T*T),M=S-x,k=r(M*M),D=N-k,U=R+I,q=R-I,X=r(q*T),ae=r(U*M),oe=X+ae,le=X-ae;R=r(oe*oe),I=r(A*r(le*le)),S=r(N*k),x=r(D*(N+r(u*D)))}P=l(O,S,R),S=P[0],R=P[1],P=l(O,x,I),x=P[0],I=P[1];const B=c(x);return r(S*B)}function h(b){return KT(r(b),i)}function f(b){const v=Mo("u coordinate",b,i);return o===32&&(v[31]&=127),dC(v)}function p(b){const v=Mo("scalar",b),C=v.length;if(C!==i&&C!==o){let A=""+i+" or "+o;throw new Error("invalid scalar, expected "+A+" bytes, got "+C)}return dC(a(v))}function g(b,v){const C=f(v),A=p(b),S=d(C,A);if(S===Km)throw new Error("invalid private or public key received");return h(S)}const y=h(e.Gu);function m(b){return g(b,y)}return{scalarMult:g,scalarMultBase:m,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>m(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:y}}const i$=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const XLe=BigInt(1),y9=BigInt(2),e5e=BigInt(3),t5e=BigInt(5);BigInt(8);function n5e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=i$,o=t*t%i*t%i,a=Xa(o,y9,i)*o%i,c=Xa(a,XLe,i)*t%i,l=Xa(c,t5e,i)*c%i,u=Xa(l,e,i)*l%i,d=Xa(u,n,i)*u%i,h=Xa(d,r,i)*d%i,f=Xa(h,s,i)*h%i,p=Xa(f,s,i)*h%i,g=Xa(p,e,i)*l%i;return{pow_p_5_8:Xa(g,y9,i)*t%i,b2:o}}function r5e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const o$=ZLe({P:i$,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=i$,{pow_p_5_8:n,b2:r}=n5e(t);return Zi(Xa(n,e5e,e)*r,e)},adjustScalarBytes:r5e,randomBytes:kb});function w9(t){t.lowS!==void 0&&H0("lowS",t.lowS),t.prehash!==void 0&&H0("prehash",t.prehash)}function s5e(t){const e=lee(t);Ob(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:i5e,hexToBytes:o5e}=ULe;class a5e extends Error{constructor(e=""){super(e)}}const _u={Err:a5e,_tlv:{encode:(t,e)=>{const{Err:n}=_u;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Wy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Wy(s.length/2|128):"";return Wy(t)+i+s+e},decode(t,e){const{Err:n}=_u;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=_u;if(t<Uu)throw new e("integer: negative integers are not allowed");let n=Wy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=_u;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return i5e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=_u,s=typeof t=="string"?o5e(t):t;D1(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=_u,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Uu=BigInt(0),os=BigInt(1);BigInt(2);const b9=BigInt(3);BigInt(4);function c5e(t){const e=s5e(t),{Fp:n}=e,r=see(e.n,e.nBitLength),s=e.toBytes||((g,y,m)=>{const b=y.toAffine();return hC(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const y=g.subarray(1),m=n.fromBytes(y.subarray(0,n.BYTES)),b=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:m,y:b}});function o(g){const{a:y,b:m}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,y)),m)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return YT(g,os,e.n)}function c(g){const{allowedPrivateKeyLengths:y,nByteLength:m,wrapPrivateKey:b,n:v}=e;if(y&&typeof g!="bigint"){if(Yg(g)&&(g=q0(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(m*2,"0")}let C;try{C=typeof g=="bigint"?g:yg(Mo("private key",g,m))}catch{throw new Error("invalid private key, expected hex or "+m+" bytes, got "+typeof g)}return b&&(C=Zi(C,v)),Qu("private key",C,os,v),C}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=n$((g,y)=>{const{px:m,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:m,y:b};const C=g.is0();y==null&&(y=C?n.ONE:n.inv(v));const A=n.mul(m,y),S=n.mul(b,y),x=n.mul(v,y);if(C)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:A,y:S}}),d=n$(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:m}=g.toAffine();if(!n.isValid(y)||!n.isValid(m))throw new Error("bad point: x or y not FE");const b=n.sqr(m),v=o(y);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(y,m,b){if(this.px=y,this.py=m,this.pz=b,y==null||!n.isValid(y))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:m,y:b}=y||{};if(!y||!n.isValid(m)||!n.isValid(b))throw new Error("invalid affine point");if(y instanceof h)throw new Error("projective point not allowed");const v=C=>n.eql(C,n.ZERO);return v(m)&&v(b)?h.ZERO:new h(m,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const m=n.invertBatch(y.map(b=>b.pz));return y.map((b,v)=>b.toAffine(m[v])).map(h.fromAffine)}static fromHex(y){const m=h.fromAffine(i(Mo("pointHex",y)));return m.assertValidity(),m}static fromPrivateKey(y){return h.BASE.multiply(c(y))}static msm(y,m){return QLe(h,r,y,m)}_setWindowSize(y){p.setWindowSize(this,y)}assertValidity(){d(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);const{px:m,py:b,pz:v}=this,{px:C,py:A,pz:S}=y,x=n.eql(n.mul(m,S),n.mul(C,v)),R=n.eql(n.mul(b,S),n.mul(A,v));return x&&R}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:m}=e,b=n.mul(m,b9),{px:v,py:C,pz:A}=this;let S=n.ZERO,x=n.ZERO,R=n.ZERO,I=n.mul(v,v),O=n.mul(C,C),P=n.mul(A,A),B=n.mul(v,C);return B=n.add(B,B),R=n.mul(v,A),R=n.add(R,R),S=n.mul(y,R),x=n.mul(b,P),x=n.add(S,x),S=n.sub(O,x),x=n.add(O,x),x=n.mul(S,x),S=n.mul(B,S),R=n.mul(b,R),P=n.mul(y,P),B=n.sub(I,P),B=n.mul(y,B),B=n.add(B,R),R=n.add(I,I),I=n.add(R,I),I=n.add(I,P),I=n.mul(I,B),x=n.add(x,I),P=n.mul(C,A),P=n.add(P,P),I=n.mul(P,B),S=n.sub(S,I),R=n.mul(P,O),R=n.add(R,R),R=n.add(R,R),new h(S,x,R)}add(y){l(y);const{px:m,py:b,pz:v}=this,{px:C,py:A,pz:S}=y;let x=n.ZERO,R=n.ZERO,I=n.ZERO;const O=e.a,P=n.mul(e.b,b9);let B=n.mul(m,C),H=n.mul(b,A),j=n.mul(v,S),T=n.add(m,b),N=n.add(C,A);T=n.mul(T,N),N=n.add(B,H),T=n.sub(T,N),N=n.add(m,v);let M=n.add(C,S);return N=n.mul(N,M),M=n.add(B,j),N=n.sub(N,M),M=n.add(b,v),x=n.add(A,S),M=n.mul(M,x),x=n.add(H,j),M=n.sub(M,x),I=n.mul(O,N),x=n.mul(P,j),I=n.add(x,I),x=n.sub(H,I),I=n.add(H,I),R=n.mul(x,I),H=n.add(B,B),H=n.add(H,B),j=n.mul(O,j),N=n.mul(P,N),H=n.add(H,j),j=n.sub(B,j),j=n.mul(O,j),N=n.add(N,j),B=n.mul(H,N),R=n.add(R,B),B=n.mul(M,N),x=n.mul(T,x),x=n.sub(x,B),B=n.mul(T,H),I=n.mul(M,I),I=n.add(I,B),new h(x,R,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(h.ZERO)}wNAF(y){return p.wNAFCached(this,y,h.normalizeZ)}multiplyUnsafe(y){const{endo:m,n:b}=e;Qu("scalar",y,Uu,b);const v=h.ZERO;if(y===Uu)return v;if(this.is0()||y===os)return this;if(!m||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,y,h.normalizeZ);let{k1neg:C,k1:A,k2neg:S,k2:x}=m.splitScalar(y),R=v,I=v,O=this;for(;A>Uu||x>Uu;)A&os&&(R=R.add(O)),x&os&&(I=I.add(O)),O=O.double(),A>>=os,x>>=os;return C&&(R=R.negate()),S&&(I=I.negate()),I=new h(n.mul(I.px,m.beta),I.py,I.pz),R.add(I)}multiply(y){const{endo:m,n:b}=e;Qu("scalar",y,os,b);let v,C;if(m){const{k1neg:A,k1:S,k2neg:x,k2:R}=m.splitScalar(y);let{p:I,f:O}=this.wNAF(S),{p:P,f:B}=this.wNAF(R);I=p.constTimeNegate(A,I),P=p.constTimeNegate(x,P),P=new h(n.mul(P.px,m.beta),P.py,P.pz),v=I.add(P),C=O.add(B)}else{const{p:A,f:S}=this.wNAF(y);v=A,C=S}return h.normalizeZ([v,C])[0]}multiplyAndAddUnsafe(y,m,b){const v=h.BASE,C=(S,x)=>x===Uu||x===os||!S.equals(v)?S.multiplyUnsafe(x):S.multiply(x),A=C(this,m).add(C(y,b));return A.is0()?void 0:A}toAffine(y){return u(this,y)}isTorsionFree(){const{h:y,isTorsionFree:m}=e;if(y===os)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:m}=e;return y===os?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return H0("isCompressed",y),this.assertValidity(),s(h,this,y)}toHex(y=!0){return H0("isCompressed",y),q0(this.toRawBytes(y))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=YLe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function l5e(t){const e=lee(t);return Ob(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function u5e(t){const e=l5e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(j){return Zi(j,r)}function a(j){return s$(j,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=c5e({...e,toBytes(j,T,N){const M=T.toAffine(),k=n.toBytes(M.x),D=hC;return H0("isCompressed",N),N?D(Uint8Array.from([T.hasEvenY()?2:3]),k):D(Uint8Array.from([4]),k,n.toBytes(M.y))},fromBytes(j){const T=j.length,N=j[0],M=j.subarray(1);if(T===s&&(N===2||N===3)){const k=yg(M);if(!YT(k,os,n.ORDER))throw new Error("Point is not on curve");const D=u(k);let U;try{U=n.sqrt(D)}catch(X){const ae=X instanceof Error?": "+X.message:"";throw new Error("Point is not on curve"+ae)}const q=(U&os)===os;return(N&1)===1!==q&&(U=n.neg(U)),{x:k,y:U}}else if(T===i&&N===4){const k=n.fromBytes(M.subarray(0,n.BYTES)),D=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:k,y:D}}else{const k=s,D=i;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+D+", got "+T)}}}),h=j=>q0(V0(j,e.nByteLength));function f(j){const T=r>>os;return j>T}function p(j){return f(j)?o(-j):j}const g=(j,T,N)=>yg(j.slice(T,N));class y{constructor(T,N,M){this.r=T,this.s=N,this.recovery=M,this.assertValidity()}static fromCompact(T){const N=e.nByteLength;return T=Mo("compactSignature",T,N*2),new y(g(T,0,N),g(T,N,2*N))}static fromDER(T){const{r:N,s:M}=_u.toSig(Mo("DER",T));return new y(N,M)}assertValidity(){Qu("r",this.r,os,r),Qu("s",this.s,os,r)}addRecoveryBit(T){return new y(this.r,this.s,T)}recoverPublicKey(T){const{r:N,s:M,recovery:k}=this,D=S(Mo("msgHash",T));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const U=k===2||k===3?N+e.n:N;if(U>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=k&1?"03":"02",X=c.fromHex(q+h(U)),ae=a(U),oe=o(-D*ae),le=o(M*ae),Ee=c.BASE.multiplyAndAddUnsafe(X,oe,le);if(!Ee)throw new Error("point at infinify");return Ee.assertValidity(),Ee}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return G0(this.toDERHex())}toDERHex(){return _u.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return G0(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(j){try{return l(j),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const j=oee(e.n);return GLe(e.randomBytes(j),e.n)},precompute(j=8,T=c.BASE){return T._setWindowSize(j),T.multiply(BigInt(3)),T}};function b(j,T=!0){return c.fromPrivateKey(j).toRawBytes(T)}function v(j){const T=Yg(j),N=typeof j=="string",M=(T||N)&&j.length;return T?M===s||M===i:N?M===2*s||M===2*i:j instanceof c}function C(j,T,N=!0){if(v(j))throw new Error("first arg must be private key");if(!v(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(j)).toRawBytes(N)}const A=e.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");const T=yg(j),N=j.length*8-e.nBitLength;return N>0?T>>BigInt(N):T},S=e.bits2int_modN||function(j){return o(A(j))},x=EU(e.nBitLength);function R(j){return Qu("num < 2^"+e.nBitLength,j,Uu,x),V0(j,e.nByteLength)}function I(j,T,N=O){if(["recovered","canonical"].some(ce=>ce in N))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:k}=e;let{lowS:D,prehash:U,extraEntropy:q}=N;D==null&&(D=!0),j=Mo("msgHash",j),w9(N),U&&(j=Mo("prehashed msgHash",M(j)));const X=S(j),ae=l(T),oe=[R(ae),R(X)];if(q!=null&&q!==!1){const ce=q===!0?k(n.BYTES):q;oe.push(Mo("extraEntropy",ce))}const le=hC(...oe),Ee=X;function Z(ce){const fe=A(ce);if(!d(fe))return;const ne=a(fe),ye=c.BASE.multiply(fe).toAffine(),Ne=o(ye.x);if(Ne===Uu)return;const de=o(ne*o(Ee+Ne*ae));if(de===Uu)return;let _e=(ye.x===Ne?0:2)|Number(ye.y&os),Ye=de;return D&&f(de)&&(Ye=p(de),_e^=1),new y(Ne,Ye,_e)}return{seed:le,k2sig:Z}}const O={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function B(j,T,N=O){const{seed:M,k2sig:k}=I(j,T,N),D=e;return tee(D.hash.outputLen,D.nByteLength,D.hmac)(M,k)}c.BASE._setWindowSize(8);function H(j,T,N,M=P){var de;const k=j;T=Mo("msgHash",T),N=Mo("publicKey",N);const{lowS:D,prehash:U,format:q}=M;if(w9(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&q!=="compact"&&q!=="der")throw new Error("format must be compact or der");const X=typeof k=="string"||Yg(k),ae=!X&&!q&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!X&&!ae)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let oe,le;try{if(ae&&(oe=new y(k.r,k.s)),X){try{q!=="compact"&&(oe=y.fromDER(k))}catch(_e){if(!(_e instanceof _u.Err))throw _e}!oe&&q!=="der"&&(oe=y.fromCompact(k))}le=c.fromHex(N)}catch{return!1}if(!oe||D&&oe.hasHighS())return!1;U&&(T=e.hash(T));const{r:Ee,s:Z}=oe,ce=S(T),fe=a(Z),ne=o(ce*fe),ye=o(Ee*fe),Ne=(de=c.BASE.multiplyAndAddUnsafe(le,ne,ye))==null?void 0:de.toAffine();return Ne?o(Ne.x)===Ee:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:C,sign:B,verify:H,ProjectivePoint:c,Signature:y,utils:m}}function d5e(t){return{hash:t,hmac:(e,...n)=>qT(t,e,g$e(...n)),randomBytes:kb}}function h5e(t,e){const n=r=>u5e({...t,...d5e(r)});return{...n(e),create:n}}const uee=see(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),f5e=uee.create(BigInt("-3")),p5e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),g5e=h5e({a:f5e,b:p5e,Fp:uee,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},O1),dee="base10",xi="base16",xc="base64pad",nh="base64url",$1="utf8",hee=0,Ju=1,L1=2,m5e=0,v9=1,OE=12,_U=32;function y5e(){const t=o$.utils.randomPrivateKey(),e=o$.getPublicKey(t);return{privateKey:fo(t,xi),publicKey:fo(e,xi)}}function a$(){const t=kb(_U);return fo(t,xi)}function w5e(t,e){const n=o$.getSharedSecret(Ia(t,xi),Ia(e,xi)),r=_Le(O1,n,void 0,void 0,_U);return fo(r,xi)}function tx(t){const e=O1(Ia(t,xi));return fo(e,xi)}function wl(t){const e=O1(Ia(t,$1));return fo(e,xi)}function fee(t){return Ia(`${t}`,dee)}function Qg(t){return Number(fo(t,dee))}function pee(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function gee(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function b5e(t){const e=fee(typeof t.type<"u"?t.type:hee);if(Qg(e)===Ju&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ia(t.senderPublicKey,xi):void 0,r=typeof t.iv<"u"?Ia(t.iv,xi):kb(OE),s=Ia(t.symKey,xi),i=ZX(s,r).encrypt(Ia(t.message,$1)),o=mee({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===nh?pee(o):o}function v5e(t){const e=Ia(t.symKey,xi),{sealed:n,iv:r}=fC({encoded:t.encoded,encoding:t.encoding}),s=ZX(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return fo(s,$1)}function E5e(t,e){const n=fee(L1),r=kb(OE),s=Ia(t,$1),i=mee({type:n,sealed:s,iv:r});return e===nh?pee(i):i}function _5e(t,e){const{sealed:n}=fC({encoded:t,encoding:e});return fo(n,$1)}function mee(t){if(Qg(t.type)===L1)return fo(RE([t.type,t.sealed]),xc);if(Qg(t.type)===Ju){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fo(RE([t.type,t.senderPublicKey,t.iv,t.sealed]),xc)}return fo(RE([t.type,t.iv,t.sealed]),xc)}function fC(t){const e=(t.encoding||xc)===nh?gee(t.encoded):t.encoded,n=Ia(e,xc),r=n.slice(m5e,v9),s=v9;if(Qg(r)===Ju){const c=s+_U,l=c+OE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Qg(r)===L1){const c=n.slice(s),l=kb(OE);return{type:r,sealed:c,iv:l}}const i=s+OE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function C5e(t,e){const n=fC({encoded:t,encoding:e==null?void 0:e.encoding});return yee({type:Qg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?fo(n.senderPublicKey,xi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function yee(t){const e=(t==null?void 0:t.type)||hee;if(e===Ju){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function E9(t){return t.type===Ju&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function _9(t){return t.type===L1}function A5e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return RE([new Uint8Array([4]),e,n])}function S5e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(gee(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=O1(c),u=A5e(e);if(!g5e.verify(RE([o,a]),l,u))throw new Error("Invalid signature");return U3(t).payload}const x5e="irn";function zI(t){return(t==null?void 0:t.relay)||{protocol:x5e}}function Kv(t){const e=PPe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function I5e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function C9(t){if(!t.includes("wc:")){const l=BX(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:N5e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:I5e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function N5e(t){return t.startsWith("//")?t.substring(2):t}function T5e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function A9(t){const e=new URLSearchParams,n=T5e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function XA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var R5e=Object.defineProperty,P5e=Object.defineProperties,k5e=Object.getOwnPropertyDescriptors,S9=Object.getOwnPropertySymbols,O5e=Object.prototype.hasOwnProperty,D5e=Object.prototype.propertyIsEnumerable,x9=(t,e,n)=>e in t?R5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$5e=(t,e)=>{for(var n in e||(e={}))O5e.call(e,n)&&x9(t,n,e[n]);if(S9)for(var n of S9(e))D5e.call(e,n)&&x9(t,n,e[n]);return t},L5e=(t,e)=>P5e(t,k5e(e));function Db(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function M5e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Db(n.accounts))}),e}function U5e(t,e){const n=[];return Object.values(t).forEach(r=>{Db(r.accounts).includes(e)&&n.push(...r.methods)}),n}function B5e(t,e){const n=[];return Object.values(t).forEach(r=>{Db(r.accounts).includes(e)&&n.push(...r.events)}),n}function QT(t){return t.includes(":")}function Hy(t){return QT(t)?t.split(":")[0]:t}function I9(t){var e,n,r;const s={};if(!af(t))return s;for(const[i,o]of Object.entries(t)){const a=QT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Hy(i);s[u]=L5e($5e({},s[u]),{chains:$l(a,(e=s[u])==null?void 0:e.chains),methods:$l(c,(n=s[u])==null?void 0:n.methods),events:$l(l,(r=s[u])==null?void 0:r.events)})}return s}function j5e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function N9(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=j5e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=$l(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function F5e(t,e){var n,r,s,i,o,a;const c=I9(t),l=I9(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:$l((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:$l((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:$l((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const z5e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},W5e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ie(t,e){const{message:n,code:r}=W5e[t];return{message:e?`${n} ${e}`:n,code:r}}function Tn(t,e){const{message:n,code:r}=z5e[t];return{message:e?`${n} ${e}`:n,code:r}}function of(t,e){return!!Array.isArray(t)}function af(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ts(t){return typeof t>"u"}function Mr(t,e){return e&&Ts(t)?!0:typeof t=="string"&&!!t.trim().length}function CU(t,e){return e&&Ts(t)?!0:typeof t=="number"&&!isNaN(t)}function H5e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return kp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Db(a),d=n[o];(!kp(DX(o,d),u)||!kp(d.methods,c)||!kp(d.events,l))&&(i=!1)}),i):!1}function WI(t){return Mr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function q5e(t){if(Mr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&WI(n)}}return!1}function G5e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Mr(t,!1)){if(e(t))return!0;const n=BX(t);return e(n)}}catch{}return!1}function V5e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function K5e(t){return t==null?void 0:t.topic}function Y5e(t,e){let n=null;return Mr(t==null?void 0:t.publicKey,!1)||(n=Ie("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function T9(t){let e=!0;return of(t)?t.length&&(e=t.every(n=>Mr(n,!1))):e=!1,e}function Q5e(t,e,n){let r=null;return of(e)&&e.length?e.forEach(s=>{r||WI(s)||(r=Tn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):WI(t)||(r=Tn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function J5e(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=Q5e(s,DX(s,i),`${e} ${n}`);o&&(r=o)}),r}function Z5e(t,e){let n=null;return of(t)?t.forEach(r=>{n||q5e(r)||(n=Tn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Tn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function X5e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Z5e(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function eMe(t,e){let n=null;return T9(t==null?void 0:t.methods)?T9(t==null?void 0:t.events)||(n=Tn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Tn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function wee(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=eMe(r,`${e}, namespace`);s&&(n=s)}),n}function tMe(t,e,n){let r=null;if(t&&af(t)){const s=wee(t,e);s&&(r=s);const i=J5e(t,e,n);i&&(r=i)}else r=Ie("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function Zk(t,e){let n=null;if(t&&af(t)){const r=wee(t,e);r&&(n=r);const s=X5e(t,e);s&&(n=s)}else n=Ie("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function bee(t){return Mr(t.protocol,!0)}function nMe(t,e){let n=!1;return t?t&&of(t)&&t.length&&t.forEach(r=>{n=bee(r)}):n=!0,n}function rMe(t){return typeof t=="number"}function Hi(t){return typeof t<"u"&&typeof t!==null}function sMe(t){return!(!t||typeof t!="object"||!t.code||!CU(t.code,!1)||!t.message||!Mr(t.message,!1))}function iMe(t){return!(Ts(t)||!Mr(t.method,!1))}function oMe(t){return!(Ts(t)||Ts(t.result)&&Ts(t.error)||!CU(t.id,!1)||!Mr(t.jsonrpc,!1))}function aMe(t){return!(Ts(t)||!Mr(t.name,!1))}function R9(t,e){return!(!WI(e)||!M5e(t).includes(e))}function cMe(t,e,n){return Mr(n,!1)?U5e(t,e).includes(n):!1}function lMe(t,e,n){return Mr(n,!1)?B5e(t,e).includes(n):!1}function P9(t,e,n){let r=null;const s=uMe(t),i=dMe(e),o=Object.keys(s),a=Object.keys(i),c=k9(Object.keys(t)),l=k9(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),kp(o,a)||(r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Db(e[d].accounts);h.includes(d)||(r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(kp(s[d].methods,i[d].methods)?kp(s[d].events,i[d].events)||(r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function uMe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function k9(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function dMe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Db(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function hMe(t,e){return CU(t,!1)&&t<=e.max&&t>=e.min}function O9(){const t=P1();return new Promise(e=>{switch(t){case zo.browser:e(fMe());break;case zo.reactNative:e(pMe());break;case zo.node:e(gMe());break;default:e(!0)}})}function fMe(){return Pb()&&(navigator==null?void 0:navigator.onLine)}async function pMe(){if(Of()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function gMe(){return!0}function mMe(t){switch(P1()){case zo.browser:yMe(t);break;case zo.reactNative:wMe(t);break}}function yMe(t){!Of()&&Pb()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function wMe(t){Of()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function bMe(){var t;return Pb()&&Wg()?((t=Wg())==null?void 0:t.visibilityState)==="visible":!0}const Xk={};class Sv{static get(e){return Xk[e]}static set(e,n){Xk[e]=n}static delete(e){delete Xk[e]}}var vMe={};const vee="wc",Eee=2,c$="core",Hl=`${vee}@2:${c$}:`,EMe={logger:"error"},_Me={database:":memory:"},CMe="crypto",D9="client_ed25519_seed",AMe=Se.ONE_DAY,SMe="keychain",xMe="0.3",IMe="messages",NMe="0.3",$9=Se.SIX_HOURS,TMe="publisher",_ee="irn",RMe="error",Cee="wss://relay.walletconnect.org",PMe="relayer",hs={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},kMe="_subscription",ia={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},OMe=.1,l$="2.21.0",Jn={link_mode:"link_mode",relay:"relay"},nx={inbound:"inbound",outbound:"outbound"},DMe="0.3",$Me="WALLETCONNECT_CLIENT_ID",L9="WALLETCONNECT_LINK_MODE_APPS",Ro={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},LMe="subscription",MMe="0.3",UMe="pairing",BMe="0.3",xv={wc_pairingDelete:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:0},res:{ttl:Se.ONE_DAY,prompt:!1,tag:0}}},hp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Va={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},jMe="history",FMe="0.3",zMe="expirer",da={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},WMe="0.3",HMe="verify-api",qMe="https://verify.walletconnect.com",Aee="https://verify.walletconnect.org",DE=Aee,GMe=`${DE}/v3`,VMe=[qMe,Aee],KMe="echo",YMe="https://echo.walletconnect.com",Xc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},fu={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ka={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},qf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Gf={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Iv={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},QMe=.1,JMe="event-client",ZMe=86400,XMe="https://pulse.walletconnect.org/batch";function eUe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,C=new Uint8Array(v);m!==b;){for(var A=p[m],S=0,x=v-1;(A!==0||S<y)&&x!==-1;x--,S++)A+=256*C[x]>>>0,C[x]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");y=S,m++}for(var R=v-y;R!==v&&C[R]===0;)R++;for(var I=c.repeat(g);R<v;++R)I+=t.charAt(C[R]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var C=n[p.charCodeAt(g)];if(C===255)return;for(var A=0,S=b-1;(C!==0||A<m)&&S!==-1;S--,A++)C+=a*v[S]>>>0,v[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");m=A,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var R=new Uint8Array(y+(b-x)),I=y;x!==b;)R[I++]=v[x++];return R}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var tUe=eUe,nUe=tUe;const See=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},rUe=t=>new TextEncoder().encode(t),sUe=t=>new TextDecoder().decode(t);class iUe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class oUe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return xee(this,e)}}class aUe{constructor(e){this.decoders=e}or(e){return xee(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xee=(t,e)=>new aUe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class cUe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new iUe(e,n,r),this.decoder=new oUe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const JT=({name:t,prefix:e,encode:n,decode:r})=>new cUe(t,e,n,r),M1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=nUe(n,e);return JT({prefix:t,name:e,encode:r,decode:i=>See(s(i))})},lUe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},uUe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Fs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>JT({prefix:e,name:t,encode(s){return uUe(s,r,n)},decode(s){return lUe(s,r,n,t)}}),dUe=JT({prefix:"\0",name:"identity",encode:t=>sUe(t),decode:t=>rUe(t)});var hUe=Object.freeze({__proto__:null,identity:dUe});const fUe=Fs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var pUe=Object.freeze({__proto__:null,base2:fUe});const gUe=Fs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var mUe=Object.freeze({__proto__:null,base8:gUe});const yUe=M1({prefix:"9",name:"base10",alphabet:"0123456789"});var wUe=Object.freeze({__proto__:null,base10:yUe});const bUe=Fs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vUe=Fs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var EUe=Object.freeze({__proto__:null,base16:bUe,base16upper:vUe});const _Ue=Fs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),CUe=Fs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),AUe=Fs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),SUe=Fs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xUe=Fs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),IUe=Fs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),NUe=Fs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),TUe=Fs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),RUe=Fs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var PUe=Object.freeze({__proto__:null,base32:_Ue,base32upper:CUe,base32pad:AUe,base32padupper:SUe,base32hex:xUe,base32hexupper:IUe,base32hexpad:NUe,base32hexpadupper:TUe,base32z:RUe});const kUe=M1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),OUe=M1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var DUe=Object.freeze({__proto__:null,base36:kUe,base36upper:OUe});const $Ue=M1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),LUe=M1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var MUe=Object.freeze({__proto__:null,base58btc:$Ue,base58flickr:LUe});const UUe=Fs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),BUe=Fs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),jUe=Fs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),FUe=Fs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var zUe=Object.freeze({__proto__:null,base64:UUe,base64pad:BUe,base64url:jUe,base64urlpad:FUe});const Iee=Array.from(""),WUe=Iee.reduce((t,e,n)=>(t[n]=e,t),[]),HUe=Iee.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function qUe(t){return t.reduce((e,n)=>(e+=WUe[n],e),"")}function GUe(t){const e=[];for(const n of t){const r=HUe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const VUe=JT({prefix:"",name:"base256emoji",encode:qUe,decode:GUe});var KUe=Object.freeze({__proto__:null,base256emoji:VUe}),YUe=Nee,M9=128,QUe=-128,JUe=Math.pow(2,31);function Nee(t,e,n){e=e||[],n=n||0;for(var r=n;t>=JUe;)e[n++]=t&255|M9,t/=128;for(;t&QUe;)e[n++]=t&255|M9,t>>>=7;return e[n]=t|0,Nee.bytes=n-r+1,e}var ZUe=u$,XUe=128,U9=127;function u$(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw u$.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&U9)<<s:(o&U9)*Math.pow(2,s),s+=7}while(o>=XUe);return u$.bytes=i-r,n}var eBe=Math.pow(2,7),tBe=Math.pow(2,14),nBe=Math.pow(2,21),rBe=Math.pow(2,28),sBe=Math.pow(2,35),iBe=Math.pow(2,42),oBe=Math.pow(2,49),aBe=Math.pow(2,56),cBe=Math.pow(2,63),lBe=function(t){return t<eBe?1:t<tBe?2:t<nBe?3:t<rBe?4:t<sBe?5:t<iBe?6:t<oBe?7:t<aBe?8:t<cBe?9:10},uBe={encode:YUe,decode:ZUe,encodingLength:lBe},Tee=uBe;const B9=(t,e,n=0)=>(Tee.encode(t,e,n),e),j9=t=>Tee.encodingLength(t),d$=(t,e)=>{const n=e.byteLength,r=j9(t),s=r+j9(n),i=new Uint8Array(s+n);return B9(t,i,0),B9(n,i,r),i.set(e,s),new dBe(t,n,e,i)};class dBe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const Ree=({name:t,code:e,encode:n})=>new hBe(t,e,n);class hBe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?d$(this.code,n):n.then(r=>d$(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Pee=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),fBe=Ree({name:"sha2-256",code:18,encode:Pee("SHA-256")}),pBe=Ree({name:"sha2-512",code:19,encode:Pee("SHA-512")});var gBe=Object.freeze({__proto__:null,sha256:fBe,sha512:pBe});const kee=0,mBe="identity",Oee=See,yBe=t=>d$(kee,Oee(t)),wBe={code:kee,name:mBe,encode:Oee,digest:yBe};var bBe=Object.freeze({__proto__:null,identity:wBe});new TextEncoder,new TextDecoder;const F9={...hUe,...pUe,...mUe,...wUe,...EUe,...PUe,...DUe,...MUe,...zUe,...KUe};({...gBe,...bBe});function vBe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Dee(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const z9=Dee("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),eO=Dee("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=vBe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),EBe={utf8:z9,"utf-8":z9,hex:F9.base16,latin1:eO,ascii:eO,binary:eO,...F9};function _Be(t,e="utf8"){const n=EBe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var CBe=Object.defineProperty,ABe=(t,e,n)=>e in t?CBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yc=(t,e,n)=>ABe(t,typeof e!="symbol"?e+"":e,n);class SBe{constructor(e,n){this.core=e,this.logger=n,Yc(this,"keychain",new Map),Yc(this,"name",SMe),Yc(this,"version",xMe),Yc(this,"initialized",!1),Yc(this,"storagePrefix",Hl),Yc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Yc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Yc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Yc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ie("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Yc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Us(n,this.name)}get context(){return bo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Q3(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?J3(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var xBe=Object.defineProperty,IBe=(t,e,n)=>e in t?xBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_s=(t,e,n)=>IBe(t,typeof e!="symbol"?e+"":e,n);class NBe{constructor(e,n,r){this.core=e,this.logger=n,_s(this,"name",CMe),_s(this,"keychain"),_s(this,"randomSessionIdentifier",a$()),_s(this,"initialized",!1),_s(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),_s(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),_s(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=tF(s);return JZ(i.publicKey)}),_s(this,"generateKeyPair",()=>{this.isInitialized();const s=y5e();return this.setPrivateKey(s.publicKey,s.privateKey)}),_s(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=tF(i),a=this.randomSessionIdentifier;return await aRe(a,s,AMe,o)}),_s(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=w5e(a,i);return this.setSymKey(c,o)}),_s(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||tx(s);return await this.keychain.set(o,s),o}),_s(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),_s(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),_s(this,"encode",async(s,i,o)=>{this.isInitialized();const a=yee(o),c=ud(i);if(_9(a))return E5e(c,o==null?void 0:o.encoding);if(E9(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return b5e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),_s(this,"decode",async(s,i,o)=>{this.isInitialized();const a=C5e(i,o);if(_9(a)){const c=_5e(i,o==null?void 0:o.encoding);return zg(c)}if(E9(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=v5e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return zg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),_s(this,"getPayloadType",(s,i=xc)=>{const o=fC({encoded:s,encoding:i});return Qg(o.type)}),_s(this,"getPayloadSenderPublicKey",(s,i=xc)=>{const o=fC({encoded:s,encoding:i});return o.senderPublicKey?fo(o.senderPublicKey,xi):void 0}),this.core=e,this.logger=Us(n,this.name),this.keychain=r||new SBe(this.core,this.logger)}get context(){return bo(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(D9)}catch{e=a$(),await this.keychain.set(D9,e)}return _Be(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var TBe=Object.defineProperty,RBe=Object.defineProperties,PBe=Object.getOwnPropertyDescriptors,W9=Object.getOwnPropertySymbols,kBe=Object.prototype.hasOwnProperty,OBe=Object.prototype.propertyIsEnumerable,h$=(t,e,n)=>e in t?TBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DBe=(t,e)=>{for(var n in e||(e={}))kBe.call(e,n)&&h$(t,n,e[n]);if(W9)for(var n of W9(e))OBe.call(e,n)&&h$(t,n,e[n]);return t},$Be=(t,e)=>RBe(t,PBe(e)),_o=(t,e,n)=>h$(t,typeof e!="symbol"?e+"":e,n);class LBe extends PDe{constructor(e,n){super(e,n),this.logger=e,this.core=n,_o(this,"messages",new Map),_o(this,"messagesWithoutClientAck",new Map),_o(this,"name",IMe),_o(this,"version",NMe),_o(this,"initialized",!1),_o(this,"storagePrefix",Hl),_o(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),_o(this,"set",async(r,s,i)=>{this.isInitialized();const o=wl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===nx.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,$Be(DBe({},c),{[o]:s}))}return await this.persist(),o}),_o(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),_o(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),_o(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=wl(s);return typeof i[o]<"u"}),_o(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=wl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),_o(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Us(e,this.name),this.core=n}get context(){return bo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Q3(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Q3(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?J3(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?J3(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var MBe=Object.defineProperty,UBe=Object.defineProperties,BBe=Object.getOwnPropertyDescriptors,H9=Object.getOwnPropertySymbols,jBe=Object.prototype.hasOwnProperty,FBe=Object.prototype.propertyIsEnumerable,f$=(t,e,n)=>e in t?MBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eS=(t,e)=>{for(var n in e||(e={}))jBe.call(e,n)&&f$(t,n,e[n]);if(H9)for(var n of H9(e))FBe.call(e,n)&&f$(t,n,e[n]);return t},tO=(t,e)=>UBe(t,BBe(e)),Ya=(t,e,n)=>f$(t,typeof e!="symbol"?e+"":e,n);class zBe extends kDe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ya(this,"events",new Ba.EventEmitter),Ya(this,"name",TMe),Ya(this,"queue",new Map),Ya(this,"publishTimeout",Se.toMiliseconds(Se.ONE_MINUTE)),Ya(this,"initialPublishTimeout",Se.toMiliseconds(Se.ONE_SECOND*15)),Ya(this,"needsTransportRestart",!1),Ya(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||$9,c=zI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Pp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(hs.publish,y),g(h))};this.relayer.events.on(hs.publish,y);const m=Mh(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(C=>{this.logger.warn(C,C==null?void 0:C.message),v(C)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await m,this.events.removeListener(hs.publish,y)}catch(b){this.queue.set(d,tO(eS({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Mh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Ya(this,"on",(r,s)=>{this.events.on(r,s)}),Ya(this,"once",(r,s)=>{this.events.once(r,s)}),Ya(this,"off",(r,s)=>{this.events.off(r,s)}),Ya(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Us(n,this.name),this.registerEventListeners()}get context(){return bo(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=$9,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Kv(zI().protocol).publish,params:eS({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Ts((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Ts((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(hs.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,tO(eS({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(tO(eS({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(wm.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(hs.connection_stalled);return}this.checkQueue()}),this.relayer.on(hs.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var WBe=Object.defineProperty,HBe=(t,e,n)=>e in t?WBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ym=(t,e,n)=>HBe(t,typeof e!="symbol"?e+"":e,n);class qBe{constructor(){Ym(this,"map",new Map),Ym(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Ym(this,"get",e=>this.map.get(e)||[]),Ym(this,"exists",(e,n)=>this.get(e).includes(n)),Ym(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Ym(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var GBe=Object.defineProperty,VBe=Object.defineProperties,KBe=Object.getOwnPropertyDescriptors,q9=Object.getOwnPropertySymbols,YBe=Object.prototype.hasOwnProperty,QBe=Object.prototype.propertyIsEnumerable,p$=(t,e,n)=>e in t?GBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nv=(t,e)=>{for(var n in e||(e={}))YBe.call(e,n)&&p$(t,n,e[n]);if(q9)for(var n of q9(e))QBe.call(e,n)&&p$(t,n,e[n]);return t},nO=(t,e)=>VBe(t,KBe(e)),$n=(t,e,n)=>p$(t,typeof e!="symbol"?e+"":e,n);class JBe extends $De{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,$n(this,"subscriptions",new Map),$n(this,"topicMap",new qBe),$n(this,"events",new Ba.EventEmitter),$n(this,"name",LMe),$n(this,"version",MMe),$n(this,"pending",new Map),$n(this,"cached",[]),$n(this,"initialized",!1),$n(this,"storagePrefix",Hl),$n(this,"subscribeTimeout",Se.toMiliseconds(Se.ONE_MINUTE)),$n(this,"initialSubscribeTimeout",Se.toMiliseconds(Se.ONE_SECOND*15)),$n(this,"clientId"),$n(this,"batchSubscribeTopicsLimit",500),$n(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),$n(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=zI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),$n(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),$n(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),$n(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),$n(this,"on",(r,s)=>{this.events.on(r,s)}),$n(this,"once",(r,s)=>{this.events.once(r,s)}),$n(this,"off",(r,s)=>{this.events.off(r,s)}),$n(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),$n(this,"start",async()=>{await this.onConnect()}),$n(this,"stop",async()=>{await this.onDisconnect()}),$n(this,"restart",async()=>{await this.restore(),await this.onRestart()}),$n(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),$n(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(wm.pulse,async()=>{await this.checkPending()}),this.events.on(Ro.created,async r=>{const s=Ro.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ro.deleted,async r=>{const s=Ro.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Us(n,this.name),this.clientId=""}get context(){return bo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=zI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Tn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Jn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Kv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Jn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},Se.toMiliseconds(Se.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Ro.created,d),u(h.id))};this.events.on(Ro.created,d);try{const h=await Mh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ro.created,d),u(h)}catch{}}),l=await Mh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(hs.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Kv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Mh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(hs.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Kv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Mh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(hs.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Kv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,nO(Nv({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Nv({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Nv({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ro.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ro.deleted,nO(Nv({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ro.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ro.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>nO(Nv({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await s$e(Se.toMiliseconds(Se.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return wl(e+await this.getClientId())}}var ZBe=Object.defineProperty,G9=Object.getOwnPropertySymbols,XBe=Object.prototype.hasOwnProperty,e6e=Object.prototype.propertyIsEnumerable,g$=(t,e,n)=>e in t?ZBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V9=(t,e)=>{for(var n in e||(e={}))XBe.call(e,n)&&g$(t,n,e[n]);if(G9)for(var n of G9(e))e6e.call(e,n)&&g$(t,n,e[n]);return t},rn=(t,e,n)=>g$(t,typeof e!="symbol"?e+"":e,n);class t6e extends ODe{constructor(e){super(e),rn(this,"protocol","wc"),rn(this,"version",2),rn(this,"core"),rn(this,"logger"),rn(this,"events",new Ba.EventEmitter),rn(this,"provider"),rn(this,"messages"),rn(this,"subscriber"),rn(this,"publisher"),rn(this,"name",PMe),rn(this,"transportExplicitlyClosed",!1),rn(this,"initialized",!1),rn(this,"connectionAttemptInProgress",!1),rn(this,"relayUrl"),rn(this,"projectId"),rn(this,"packageName"),rn(this,"bundleId"),rn(this,"hasExperiencedNetworkDisruption",!1),rn(this,"pingTimeout"),rn(this,"heartBeatTimeout",Se.toMiliseconds(Se.THIRTY_SECONDS+Se.FIVE_SECONDS)),rn(this,"reconnectTimeout"),rn(this,"connectPromise"),rn(this,"reconnectInProgress",!1),rn(this,"requestsInFlight",[]),rn(this,"connectTimeout",Se.toMiliseconds(Se.ONE_SECOND*15)),rn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Pp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),rn(this,"resetPingTimeout",()=>{jI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),rn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),rn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(hs.connect)}),rn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),rn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(hs.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),rn(this,"registerProviderListeners",()=>{this.provider.on(ia.payload,this.onPayloadHandler),this.provider.on(ia.connect,this.onConnectHandler),this.provider.on(ia.disconnect,this.onDisconnectHandler),this.provider.on(ia.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Us(e.logger,this.name):x1(vm({level:e.logger||RMe})),this.messages=new LBe(this.logger,e.core),this.subscriber=new JBe(this,this.logger),this.publisher=new zBe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Cee,this.projectId=e.projectId,z3e()?this.packageName=qF():W3e()&&(this.bundleId=qF()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return bo(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Jn.relay},nx.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ro.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ro.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,V9({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Mh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await O9())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=zr(Se.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(hs.message,e),await this.recordMessageEvent(e,nx.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ia.disconnect,i),await Mh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ia.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ia.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ia.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Se.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(jI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ja(new bke(K3e({sdkVersion:l$,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),gU(e)){if(!e.method.endsWith(kMe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Jn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(V9({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else FT(e)&&this.events.emit(hs.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,nx.inbound),this.events.emit(hs.message,e))}async acknowledgePayload(e){const n=BT(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(ia.payload,this.onPayloadHandler),this.provider.off(ia.connect,this.onConnectHandler),this.provider.off(ia.disconnect,this.onDisconnectHandler),this.provider.off(ia.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await O9();mMe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(wm.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&bMe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(hs.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Se.toMiliseconds(OMe)))))}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function n6e(){}function K9(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Y9(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Q9(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const r6e="[object RegExp]",s6e="[object String]",i6e="[object Number]",o6e="[object Boolean]",J9="[object Arguments]",a6e="[object Symbol]",c6e="[object Date]",l6e="[object Map]",u6e="[object Set]",d6e="[object Array]",h6e="[object Function]",f6e="[object ArrayBuffer]",rO="[object Object]",p6e="[object Error]",g6e="[object DataView]",m6e="[object Uint8Array]",y6e="[object Uint8ClampedArray]",w6e="[object Uint16Array]",b6e="[object Uint32Array]",v6e="[object BigUint64Array]",E6e="[object Int8Array]",_6e="[object Int16Array]",C6e="[object Int32Array]",A6e="[object BigInt64Array]",S6e="[object Float32Array]",x6e="[object Float64Array]";function I6e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function N6e(t,e,n){return Yv(t,e,void 0,void 0,void 0,void 0,n)}function Yv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return $E(t,e,i,o)}return $E(t,e,i,o)}function $E(t,e,n,r){if(Object.is(t,e))return!0;let s=Q9(t),i=Q9(e);if(s===J9&&(s=rO),i===J9&&(i=rO),s!==i)return!1;switch(s){case s6e:return t.toString()===e.toString();case i6e:{const c=t.valueOf(),l=e.valueOf();return I6e(c,l)}case o6e:case c6e:case a6e:return Object.is(t.valueOf(),e.valueOf());case r6e:return t.source===e.source&&t.flags===e.flags;case h6e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case l6e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Yv(l,e.get(c),c,t,e,n,r))return!1;return!0}case u6e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Yv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case d6e:case m6e:case y6e:case w6e:case b6e:case v6e:case E6e:case _6e:case C6e:case A6e:case S6e:case x6e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Yv(t[c],e[c],c,t,e,n,r))return!1;return!0}case f6e:return t.byteLength!==e.byteLength?!1:$E(new Uint8Array(t),new Uint8Array(e),n,r);case g6e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:$E(new Uint8Array(t),new Uint8Array(e),n,r);case p6e:return t.name===e.name&&t.message===e.message;case rO:{if(!($E(t.constructor,e.constructor,n,r)||K9(t)&&K9(e)))return!1;const c=[...Object.keys(t),...Y9(t)],l=[...Object.keys(e),...Y9(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Yv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function T6e(t,e){return N6e(t,e,n6e)}var R6e=Object.defineProperty,Z9=Object.getOwnPropertySymbols,P6e=Object.prototype.hasOwnProperty,k6e=Object.prototype.propertyIsEnumerable,m$=(t,e,n)=>e in t?R6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,X9=(t,e)=>{for(var n in e||(e={}))P6e.call(e,n)&&m$(t,n,e[n]);if(Z9)for(var n of Z9(e))k6e.call(e,n)&&m$(t,n,e[n]);return t},Ui=(t,e,n)=>m$(t,typeof e!="symbol"?e+"":e,n);class _m extends DDe{constructor(e,n,r,s=Hl,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ui(this,"map",new Map),Ui(this,"version",DMe),Ui(this,"cached",[]),Ui(this,"initialized",!1),Ui(this,"getKey"),Ui(this,"storagePrefix",Hl),Ui(this,"recentlyDeleted",[]),Ui(this,"recentlyDeletedLimit",200),Ui(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ts(o)?this.map.set(this.getKey(o),o):V5e(o)?this.map.set(o.id,o):K5e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ui(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ui(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ui(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>T6e(a[c],o[c]))):this.values)),Ui(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=X9(X9({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ui(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Us(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return bo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Ie("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var O6e=Object.defineProperty,D6e=(t,e,n)=>e in t?O6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ht=(t,e,n)=>D6e(t,typeof e!="symbol"?e+"":e,n);class $6e{constructor(e,n){this.core=e,this.logger=n,Ht(this,"name",UMe),Ht(this,"version",BMe),Ht(this,"events",new rU),Ht(this,"pairings"),Ht(this,"initialized",!1),Ht(this,"storagePrefix",Hl),Ht(this,"ignoredPayloadTypes",[Ju]),Ht(this,"registeredMethods",[]),Ht(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ht(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Ht(this,"create",async r=>{this.isInitialized();const s=a$(),i=await this.core.crypto.setSymKey(s),o=zr(Se.FIVE_MINUTES),a={protocol:_ee},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=A9({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(hp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Ht(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Xc.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=C9(r.uri);s.props.properties.topic=i,s.addTrace(Xc.pairing_uri_validation_success),s.addTrace(Xc.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Xc.existing_pairing),u.active)throw s.setError(fu.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Xc.pairing_not_expired)}const d=c||zr(Se.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Xc.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(hp.create,h),s.addTrace(Xc.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Xc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(fu.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(fu.subscribe_pairing_topic_failure),f}return s.addTrace(Xc.subscribe_pairing_topic_success),h}),Ht(this,"activate",async({topic:r})=>{this.isInitialized();const s=zr(Se.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Ht(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=rp();this.events.once(gn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Ht(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Ht(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Ht(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ht(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Tn("USER_DISCONNECTED")),await this.deletePairing(s))}),Ht(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return A9({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Ht(this,"sendRequest",async(r,s,i)=>{const o=Lh(s,i),a=await this.core.crypto.encode(r,o),c=xv[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Ht(this,"sendResult",async(r,s,i)=>{const o=BT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=xv[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ht(this,"sendError",async(r,s,i)=>{const o=jT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=xv[c]?xv[c].res:xv.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ht(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Tn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Ht(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Qd(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Ht(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ht(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Ht(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(hp.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ht(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{nl(s)?this.events.emit(gn("pairing_ping",i),{}):va(s)&&this.events.emit(gn("pairing_ping",i),{error:s.error})},500)}),Ht(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(hp.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ht(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Tn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Ht(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Tn("WC_METHOD_UNSUPPORTED",r))}),Ht(this,"isValidPair",(r,s)=>{var i;if(!Hi(r)){const{message:a}=Ie("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(fu.malformed_pairing_uri),new Error(a)}if(!G5e(r.uri)){const{message:a}=Ie("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(fu.malformed_pairing_uri),new Error(a)}const o=C9(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Ie("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(fu.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ie("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(fu.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Se.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(fu.pairing_expired);const{message:a}=Ie("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ht(this,"isValidPing",async r=>{if(!Hi(r)){const{message:i}=Ie("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ht(this,"isValidDisconnect",async r=>{if(!Hi(r)){const{message:i}=Ie("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ht(this,"isValidPairingTopic",async r=>{if(!Mr(r,!1)){const{message:s}=Ie("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Qd(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ie("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Us(n,this.name),this.pairings=new _m(this.core,this.logger,this.name,this.storagePrefix)}get context(){return bo(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(hs.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Jn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);gU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):FT(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(da.expired,async e=>{const{topic:n}=UX(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(hp.expire,{topic:n}))})}}var L6e=Object.defineProperty,M6e=(t,e,n)=>e in t?L6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cs=(t,e,n)=>M6e(t,typeof e!="symbol"?e+"":e,n);class U6e extends RDe{constructor(e,n){super(e,n),this.core=e,this.logger=n,Cs(this,"records",new Map),Cs(this,"events",new Ba.EventEmitter),Cs(this,"name",jMe),Cs(this,"version",FMe),Cs(this,"cached",[]),Cs(this,"initialized",!1),Cs(this,"storagePrefix",Hl),Cs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Cs(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:zr(Se.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Va.created,o)}),Cs(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=va(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Va.updated,s))}),Cs(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Cs(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Va.deleted,i)}}),this.persist()}),Cs(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Cs(this,"on",(r,s)=>{this.events.on(r,s)}),Cs(this,"once",(r,s)=>{this.events.once(r,s)}),Cs(this,"off",(r,s)=>{this.events.off(r,s)}),Cs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Us(n,this.name)}get context(){return bo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Lh(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Va.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Va.created,e=>{const n=Va.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Va.updated,e=>{const n=Va.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Va.deleted,e=>{const n=Va.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(wm.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Se.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Va.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var B6e=Object.defineProperty,j6e=(t,e,n)=>e in t?B6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vs=(t,e,n)=>j6e(t,typeof e!="symbol"?e+"":e,n);class F6e extends LDe{constructor(e,n){super(e,n),this.core=e,this.logger=n,Vs(this,"expirations",new Map),Vs(this,"events",new Ba.EventEmitter),Vs(this,"name",zMe),Vs(this,"version",WMe),Vs(this,"cached",[]),Vs(this,"initialized",!1),Vs(this,"storagePrefix",Hl),Vs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Vs(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Vs(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(da.created,{target:i,expiration:o})}),Vs(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Vs(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(da.deleted,{target:s,expiration:i})}}),Vs(this,"on",(r,s)=>{this.events.on(r,s)}),Vs(this,"once",(r,s)=>{this.events.once(r,s)}),Vs(this,"off",(r,s)=>{this.events.off(r,s)}),Vs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Us(n,this.name)}get context(){return bo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Y3e(e);if(typeof e=="number")return Q3e(e);const{message:n}=Ie("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(da.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Se.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(da.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(wm.pulse,()=>this.checkExpirations()),this.events.on(da.created,e=>{const n=da.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(da.expired,e=>{const n=da.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(da.deleted,e=>{const n=da.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var z6e=Object.defineProperty,W6e=(t,e,n)=>e in t?z6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lr=(t,e,n)=>W6e(t,typeof e!="symbol"?e+"":e,n);class H6e extends MDe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Lr(this,"name",HMe),Lr(this,"abortController"),Lr(this,"isDevEnv"),Lr(this,"verifyUrlV3",GMe),Lr(this,"storagePrefix",Hl),Lr(this,"version",Eee),Lr(this,"publicKey"),Lr(this,"fetchPromise"),Lr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Se.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Lr(this,"register",async s=>{if(!Pb()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Wg(),u=this.startAbortTimer(Se.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=m=>{if(m.data&&typeof m.data=="string")try{const b=JSON.parse(m.data);if(b.type==="verify_attestation"){if(U3(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Lr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(U3(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Lr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Se.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Lr(this,"getVerifyUrl",s=>{let i=s||DE;return VMe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${DE}`),i=DE),i}),Lr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Se.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Lr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Lr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Lr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Lr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Lr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Lr(this,"validateAttestation",(s,i)=>{const o=S5e(s,i.publicKey),a={hasExpired:Se.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Us(n,this.name),this.abortController=new AbortController,this.isDevEnv=mU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return bo(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Se.toMiliseconds(e))}}var q6e=Object.defineProperty,G6e=(t,e,n)=>e in t?q6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,e7=(t,e,n)=>G6e(t,typeof e!="symbol"?e+"":e,n);class V6e extends UDe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,e7(this,"context",KMe),e7(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${YMe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Us(n,this.context)}}var K6e=Object.defineProperty,t7=Object.getOwnPropertySymbols,Y6e=Object.prototype.hasOwnProperty,Q6e=Object.prototype.propertyIsEnumerable,y$=(t,e,n)=>e in t?K6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tv=(t,e)=>{for(var n in e||(e={}))Y6e.call(e,n)&&y$(t,n,e[n]);if(t7)for(var n of t7(e))Q6e.call(e,n)&&y$(t,n,e[n]);return t},ts=(t,e,n)=>y$(t,typeof e!="symbol"?e+"":e,n);class J6e extends BDe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,ts(this,"context",JMe),ts(this,"storagePrefix",Hl),ts(this,"storageVersion",QMe),ts(this,"events",new Map),ts(this,"shouldPersist",!1),ts(this,"init",async()=>{if(!mU())try{const s={eventId:VF(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:LX(this.core.relayer.protocol,this.core.relayer.version,l$)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),ts(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=VF(),u=this.core.projectId||"",d=Date.now(),h=Tv({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),ts(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Tv(Tv({},a),this.setMethods(a.eventId))}),ts(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),ts(this,"setEventListeners",()=>{this.core.heartbeat.on(wm.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Se.fromMiliseconds(Date.now())-Se.fromMiliseconds(s.timestamp)>ZMe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),ts(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),ts(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),ts(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),ts(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ts(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Tv(Tv({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),ts(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),ts(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${XMe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${l$}${i}`,{method:"POST",body:JSON.stringify(s)})}),ts(this,"getAppDomain",()=>$X().url),this.logger=Us(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Z6e=Object.defineProperty,n7=Object.getOwnPropertySymbols,X6e=Object.prototype.hasOwnProperty,e8e=Object.prototype.propertyIsEnumerable,w$=(t,e,n)=>e in t?Z6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,r7=(t,e)=>{for(var n in e||(e={}))X6e.call(e,n)&&w$(t,n,e[n]);if(n7)for(var n of n7(e))e8e.call(e,n)&&w$(t,n,e[n]);return t},jn=(t,e,n)=>w$(t,typeof e!="symbol"?e+"":e,n);let t8e=class $ee extends xDe{constructor(e){var n;super(e),jn(this,"protocol",vee),jn(this,"version",Eee),jn(this,"name",c$),jn(this,"relayUrl"),jn(this,"projectId"),jn(this,"customStoragePrefix"),jn(this,"events",new Ba.EventEmitter),jn(this,"logger"),jn(this,"heartbeat"),jn(this,"relayer"),jn(this,"crypto"),jn(this,"storage"),jn(this,"history"),jn(this,"expirer"),jn(this,"pairing"),jn(this,"verify"),jn(this,"echoClient"),jn(this,"linkModeSupportedApps"),jn(this,"eventClient"),jn(this,"initialized",!1),jn(this,"logChunkController"),jn(this,"on",(a,c)=>this.events.on(a,c)),jn(this,"once",(a,c)=>this.events.once(a,c)),jn(this,"off",(a,c)=>this.events.off(a,c)),jn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),jn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Jn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Cee,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=vm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:EMe.logger,name:c$}),{logger:i,chunkLoggerController:o}=DT({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Us(i,this.name),this.heartbeat=new kxe,this.crypto=new NBe(this,this.logger,e==null?void 0:e.keychain),this.history=new U6e(this,this.logger),this.expirer=new F6e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new CDe(r7(r7({},_Me),e==null?void 0:e.storageOptions)),this.relayer=new t6e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new $6e(this,this.logger),this.verify=new H6e(this,this.logger,this.storage),this.echoClient=new V6e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new J6e(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new $ee(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem($Me,r),n}get context(){return bo(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(L9,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(L9)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&vMe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const n8e=t8e,Lee="wc",Mee=2,Uee="client",AU=`${Lee}@${Mee}:${Uee}:`,sO={name:Uee,logger:"error"},s7="WALLETCONNECT_DEEPLINK_CHOICE",r8e="proposal",i7="Proposal expired",s8e="session",Qm=Se.SEVEN_DAYS,i8e="engine",ns={wc_sessionPropose:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Se.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Se.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1119}}},iO={min:Se.FIVE_MINUTES,max:Se.SEVEN_DAYS},Qc={idle:"IDLE",active:"ACTIVE"},o7={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},o8e="request",a8e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],c8e="wc",l8e="auth",u8e="authKeys",d8e="pairingTopics",h8e="requests",ZT=`${c8e}@${1.5}:${l8e}:`,rx=`${ZT}:PUB_KEY`;var f8e=Object.defineProperty,p8e=Object.defineProperties,g8e=Object.getOwnPropertyDescriptors,a7=Object.getOwnPropertySymbols,m8e=Object.prototype.hasOwnProperty,y8e=Object.prototype.propertyIsEnumerable,b$=(t,e,n)=>e in t?f8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ln=(t,e)=>{for(var n in e||(e={}))m8e.call(e,n)&&b$(t,n,e[n]);if(a7)for(var n of a7(e))y8e.call(e,n)&&b$(t,n,e[n]);return t},ci=(t,e)=>p8e(t,g8e(e)),be=(t,e,n)=>b$(t,typeof e!="symbol"?e+"":e,n);class w8e extends WDe{constructor(e){super(e),be(this,"name",i8e),be(this,"events",new rU),be(this,"initialized",!1),be(this,"requestQueue",{state:Qc.idle,queue:[]}),be(this,"sessionRequestQueue",{state:Qc.idle,queue:[]}),be(this,"requestQueueDelay",Se.ONE_SECOND),be(this,"expectedPairingMethodMap",new Map),be(this,"recentlyDeletedMap",new Map),be(this,"recentlyDeletedLimit",200),be(this,"relayMessageCache",[]),be(this,"pendingSessions",new Map),be(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ns)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Se.toMiliseconds(this.requestQueueDelay)))}),be(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ci(Ln({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=F5e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const S=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=S.active}}catch(S){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),S}if(!u||!h){const{topic:S,uri:x}=await this.client.core.pairing.create();u=S,d=x}if(!u){const{message:S}=Ie("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(S)}const f=await this.client.core.crypto.generateKeyPair(),p=ns.wc_sessionPropose.req.ttl||Se.FIVE_MINUTES,g=zr(p),y=ci(Ln(Ln({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:_ee}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:tl()}),m=gn("session_connect",y.id),{reject:b,resolve:v,done:C}=rp(p,i7),A=({id:S})=>{S===y.id&&(this.client.events.off("proposal_expire",A),this.pendingSessions.delete(y.id),this.events.emit(m,{error:{message:i7,code:0}}))};return this.client.events.on("proposal_expire",A),this.events.once(m,({error:S,session:x})=>{this.client.events.off("proposal_expire",A),S?b(S):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:C}}),be(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),be(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Ka.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(I){throw o.setError(qf.no_internet_connection),I}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(I){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(qf.proposal_not_found),I}try{await this.isValidApprove(n)}catch(I){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(qf.session_approve_namespace_validation_failure),I}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:m}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ka.session_approve_started,properties:{topic:p,trace:[Ka.session_approve_started,Ka.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),C=g.publicKey,A=await this.client.core.crypto.generateSharedKey(v,C),S=Ln(Ln(Ln({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:zr(Qm)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=Jn.relay;b.addTrace(Ka.subscribing_session_topic);try{await this.client.core.relayer.subscribe(A,{transportType:x})}catch(I){throw b.setError(qf.subscribe_session_topic_failure),I}b.addTrace(Ka.subscribe_session_topic_success);const R=ci(Ln({},S),{topic:A,requiredNamespaces:y,optionalNamespaces:m,pairingTopic:p,acknowledged:!1,self:S.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Jn.relay});await this.client.session.set(A,R),b.addTrace(Ka.store_session);try{b.addTrace(Ka.publishing_session_settle),await this.sendRequest({topic:A,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0}).catch(I=>{throw b==null||b.setError(qf.session_settle_publish_failure),I}),b.addTrace(Ka.session_settle_publish_success),b.addTrace(Ka.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(I=>{throw b==null||b.setError(qf.session_approve_publish_failure),I}),b.addTrace(Ka.session_approve_publish_success)}catch(I){throw this.client.logger.error(I),this.client.session.delete(A,Tn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(A),I}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Tn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(A,zr(Qm)),{topic:A,acknowledged:()=>Promise.resolve(this.client.session.get(A))}}),be(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:ns.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Tn("USER_DISCONNECTED")))}),be(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=rp(),c=tl(),l=Pp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(gn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),be(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=tl(),{done:i,resolve:o,reject:a}=rp();return this.events.once(gn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,zr(Qm)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),be(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=ns.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=tl(),l=Pp().toString(),{done:u,resolve:d,reject:h}=rp(o,"Request expired. Please try again.");this.events.once(gn("session_request",c),({error:m,result:b})=>{m?h(m):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ci(Ln({},s),{expiryTimestamp:zr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:ci(Ln({},s),{expiryTimestamp:zr(o)}),chainId:r},y=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async m=>{await this.sendRequest(Ln({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},y&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await e$e(this.client.core.storage,s7);await J3e({id:c,topic:i,wcDeepLink:v})}m()}),u()]).then(m=>m[2])}),be(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);nl(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):va(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),be(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=tl(),i=Pp().toString(),{done:o,resolve:a,reject:c}=rp();this.events.once(gn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),be(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Pp().toString(),a=tl();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),be(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Tn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ie("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),be(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>H5e(r,n)))),be(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),be(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Jn.link_mode:Jn.relay;o===Jn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,m=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const C=await this.client.core.crypto.generateKeyPair(),A=tx(C);if(await Promise.all([this.client.auth.authKeys.set(rx,{responseTopic:A,publicKey:C}),this.client.auth.pairingTopics.set(A,{topic:A,pairingTopic:b})]),await this.client.core.relayer.subscribe(A,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:D}=uw(a[0]);let U=G$e(D,"request",g);ex(m)&&(U=K$e(U,m.pop())),m.push(U)}const S=y&&y>ns.wc_sessionAuthenticate.req.ttl?y:ns.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:m},requester:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:zr(S)},R={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:R,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:zr(ns.wc_sessionPropose.req.ttl),id:tl()},{done:O,resolve:P,reject:B}=rp(S,"Request expired"),H=tl(),j=gn("session_connect",I.id),T=gn("session_request",H),N=async({error:D,session:U})=>{this.events.off(T,M),D?B(D):U&&P({session:U})},M=async D=>{var U,q,X;if(await this.deletePendingAuthRequest(H,{message:"fulfilled",code:0}),D.error){const fe=Tn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return D.error.code===fe.code?void 0:(this.events.off(j,N),B(D.error.message))}await this.deleteProposal(I.id),this.events.off(j,N);const{cacaos:ae,responder:oe}=D.result,le=[],Ee=[];for(const fe of ae){await t9({cacao:fe,projectId:this.client.core.projectId})||(this.client.logger.error(fe,"Signature verification failed"),B(Tn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ne}=fe,ye=ex(ne.resources),Ne=[Z3(ne.iss)],de=FI(ne.iss);if(ye){const _e=n9(ye),Ye=r9(ye);le.push(..._e),Ne.push(...Ye)}for(const _e of Ne)Ee.push(`${_e}:${de}`)}const Z=await this.client.core.crypto.generateSharedKey(C,oe.publicKey);let ce;le.length>0&&(ce={topic:Z,acknowledged:!0,self:{publicKey:C,metadata:this.client.metadata},peer:oe,controller:oe.publicKey,expiry:zr(Qm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:N9([...new Set(le)],[...new Set(Ee)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,ce),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:oe.metadata}),ce=this.client.session.get(Z)),(U=this.client.metadata.redirect)!=null&&U.linkMode&&(q=oe.metadata.redirect)!=null&&q.linkMode&&(X=oe.metadata.redirect)!=null&&X.universal&&r&&(this.client.core.addLinkModeSupportedApp(oe.metadata.redirect.universal),this.client.session.update(Z,{transportType:Jn.link_mode})),P({auths:ae,session:ce})};this.events.once(j,N),this.events.once(T,M);let k;try{if(i){const D=Lh("wc_sessionAuthenticate",x,H);this.client.core.history.set(b,D);const U=await this.client.core.crypto.encode("",D,{type:L1,encoding:nh});k=XA(r,b,U)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:H}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:I,expiry:ns.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(D){throw this.events.off(j,N),this.events.off(T,M),D}return await this.setProposal(I.id,I),await this.setAuthRequest(H,{request:ci(Ln({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:k??v,response:O}}),be(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Gf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Iv.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Iv.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Jn.relay;a===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=tx(c),d={type:Ju,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await t9({cacao:y,projectId:this.client.core.projectId})){i.setError(Iv.invalid_cacao);const A=Tn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:A,encodeOpts:d}),new Error(A.message)}i.addTrace(Gf.cacaos_verified);const{p:m}=y,b=ex(m.resources),v=[Z3(m.iss)],C=FI(m.iss);if(b){const A=n9(b),S=r9(b);h.push(...A),v.push(...S)}for(const A of v)f.push(`${A}:${C}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Gf.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:zr(Qm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:N9([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Gf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(Iv.subscribe_authenticated_session_topic_failure),y}i.addTrace(Gf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Gf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Gf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Iv.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),be(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=tx(o),l={type:Ju,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:ns.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Tn("USER_DISCONNECTED"))}),be(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return VX(r,s)}),be(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),be(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),be(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Tn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(s7).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Tn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Qc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),be(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(qf.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Tn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),be(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Qc.idle,this.client.events.emit("session_request_expire",{id:n}))}),be(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),be(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),be(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,zr(ns.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),be(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Jn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),be(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||zr(ns.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),be(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Lh(s,i,c);let f;const p=!!u;try{const m=p?nh:xc;f=await this.client.core.crypto.encode(r,h,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let g;if(a8e.includes(s)){const m=wl(JSON.stringify(h)),b=wl(f);g=await this.client.core.verify.register({id:b,decryptedId:m})}const y=ns[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const m=XA(u,r,f);await global.Linking.openURL(m,this.client.name)}else{const m=ns[s].req;o&&(m.ttl=o),a&&(m.id=a),m.tvf=ci(Ln({},d),{correlationId:h.id}),l?(m.internal=ci(Ln({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,m)):this.client.core.relayer.publish(r,f,m).catch(b=>this.client.logger.error(b))}return h.id}),be(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=BT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?nh:xc;u=await this.client.core.crypto.encode(s,l,ci(Ln({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=XA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=ns[p].res;g.tvf=ci(Ln({},f),{correlationId:r}),o?(g.internal=ci(Ln({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),be(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=jT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?nh:xc;u=await this.client.core.crypto.encode(s,l,ci(Ln({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=XA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||ns[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),be(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Qd(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Qd(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),be(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),be(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),be(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Qc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Qc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Qc.idle}),be(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),be(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),be(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Ie("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),be(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),be(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(fu.proposal_listener_not_found)),this.isValidConnect(Ln({},s.params));const u=a.expiryTimestamp||zr(ns.wc_sessionPropose.req.ttl),d=Ln({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:wl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Xc.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:ns.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),be(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(nl(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(va(r)){await this.client.proposal.delete(i,Tn("USER_DISCONNECTED"));const o=gn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),be(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ci(Ln(Ln(Ln({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Jn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(gn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;nl(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(gn("session_approve",s),{})):va(r)&&(await this.client.session.delete(n,Tn("USER_DISCONNECTED")),this.events.emit(gn("session_approve",s),{error:r.error}))}),be(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Sv.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Tn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Ln({topic:n},s));try{Sv.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Sv.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),be(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=gn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);nl(r)?this.events.emit(gn("session_update",s),{}):va(r)&&this.events.emit(gn("session_update",s),{error:r.error})}),be(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,zr(Qm)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),be(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=gn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);nl(r)?this.events.emit(gn("session_extend",s),{}):va(r)&&this.events.emit(gn("session_extend",s),{error:r.error})}),be(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),be(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=gn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);nl(r)?this.events.emit(gn("session_ping",s),{}):va(r)&&this.events.emit(gn("session_ping",s),{error:r.error})},500)}),be(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(hs.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Tn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),be(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Ln({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:wl(JSON.stringify(Lh("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Jn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),be(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=gn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);nl(r)?this.events.emit(gn("session_request",s),{result:r.result}):va(r)&&this.events.emit(gn("session_request",s),{error:r.error})}),be(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Sv.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Ln({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Sv.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),nl(r)?this.events.emit(gn("session_request",s),{result:r.result}):va(r)&&this.events.emit(gn("session_request",s),{error:r.error})}),be(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:wl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Jn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Ju,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:ns.wc_sessionAuthenticate.autoReject,appLink:h})}}),be(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),be(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Qc.idle,this.processSessionRequestQueue()},Se.toMiliseconds(this.requestQueueDelay))}),be(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=gn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(gn("session_request",i.request.id),{error:r})})}),be(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Qc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Qc.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),be(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),be(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Lh("wc_sessionPropose",ci(Ln({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),be(this,"isValidConnect",async n=>{if(!Hi(n)){const{message:l}=Ie("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Ts(r)||await this.isValidPairingTopic(r),!nMe(c)){const{message:l}=Ie("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Ts(s)&&af(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Ts(i)&&af(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Ts(o)||this.validateSessionProps(o,"sessionProperties"),!Ts(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),be(this,"validateNamespaces",(n,r)=>{const s=tMe(n,"connect()",r);if(s)throw new Error(s.message)}),be(this,"isValidApprove",async n=>{if(!Hi(n))throw new Error(Ie("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=Zk(s,"approve()");if(l)throw new Error(l.message);const u=P9(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Mr(i,!0)){const{message:d}=Ie("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Ts(o)||this.validateSessionProps(o,"sessionProperties"),!Ts(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),be(this,"isValidReject",async n=>{if(!Hi(n)){const{message:i}=Ie("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!sMe(s)){const{message:i}=Ie("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),be(this,"isValidSessionSettleRequest",n=>{if(!Hi(n)){const{message:l}=Ie("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!bee(r)){const{message:l}=Ie("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Y5e(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Zk(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Qd(o)){const{message:l}=Ie("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),be(this,"isValidUpdate",async n=>{if(!Hi(n)){const{message:c}=Ie("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=Zk(s,"update()");if(o)throw new Error(o.message);const a=P9(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),be(this,"isValidExtend",async n=>{if(!Hi(n)){const{message:s}=Ie("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),be(this,"isValidRequest",async n=>{if(!Hi(n)){const{message:c}=Ie("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!R9(a,i)){const{message:c}=Ie("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!iMe(s)){const{message:c}=Ie("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!cMe(a,i,s.method)){const{message:c}=Ie("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!hMe(o,iO)){const{message:c}=Ie("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${iO.min} and ${iO.max}`);throw new Error(c)}}),be(this,"isValidRespond",async n=>{var r;if(!Hi(n)){const{message:o}=Ie("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!oMe(i)){const{message:o}=Ie("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),be(this,"isValidPing",async n=>{if(!Hi(n)){const{message:s}=Ie("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidEmit",async n=>{if(!Hi(n)){const{message:a}=Ie("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!R9(o,i)){const{message:a}=Ie("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!aMe(s)){const{message:a}=Ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!lMe(o,i,s.name)){const{message:a}=Ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),be(this,"isValidDisconnect",async n=>{if(!Hi(n)){const{message:s}=Ie("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Mr(s,!1))throw new Error("uri is required parameter");if(!Mr(i,!1))throw new Error("domain is required parameter");if(!Mr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>uw(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=uw(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),be(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||DE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Jn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),be(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Ie("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),be(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),be(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),be(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Ie("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),be(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Jn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),be(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),be(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=GF(n,"topic")||"",s=decodeURIComponent(GF(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Jn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),be(this,"registerLinkModeListeners",async()=>{var n;if(mU()||Of()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),be(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(o7).includes(s.method)}),be(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return ci(Ln({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),be(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),be(this,"extractTxHashesFromResult",(n,r)=>{try{const s=o7[n];if(typeof r=="string")return[r];const i=r[s.key];if(of(i))return n==="solana_signAllTransactions"?i.map(o=>k$e(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(hs.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(rx)?this.client.auth.authKeys.get(rx):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Jn.link_mode?nh:xc});gU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:wl(r)})):FT(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(da.expired,async e=>{const{topic:n,id:r}=UX(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ie("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ie("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(hp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(hp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Mr(e,!1)){const{message:n}=Ie("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Qd(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ie("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Mr(e,!1)){const{message:n}=Ie("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ie("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Qd(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ie("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ie("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Mr(e,!1)){const{message:n}=Ie("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ie("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!rMe(e)){const{message:n}=Ie("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ie("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Qd(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ie("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class b8e extends _m{constructor(e,n){super(e,n,r8e,AU),this.core=e,this.logger=n}}let v8e=class extends _m{constructor(e,n){super(e,n,s8e,AU),this.core=e,this.logger=n}};class E8e extends _m{constructor(e,n){super(e,n,o8e,AU,r=>r.id),this.core=e,this.logger=n}}class _8e extends _m{constructor(e,n){super(e,n,u8e,ZT,()=>rx),this.core=e,this.logger=n}}class C8e extends _m{constructor(e,n){super(e,n,d8e,ZT),this.core=e,this.logger=n}}class A8e extends _m{constructor(e,n){super(e,n,h8e,ZT,r=>r.id),this.core=e,this.logger=n}}var S8e=Object.defineProperty,x8e=(t,e,n)=>e in t?S8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oO=(t,e,n)=>x8e(t,typeof e!="symbol"?e+"":e,n);class I8e{constructor(e,n){this.core=e,this.logger=n,oO(this,"authKeys"),oO(this,"pairingTopics"),oO(this,"requests"),this.authKeys=new _8e(this.core,this.logger),this.pairingTopics=new C8e(this.core,this.logger),this.requests=new A8e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var N8e=Object.defineProperty,T8e=(t,e,n)=>e in t?N8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qt=(t,e,n)=>T8e(t,typeof e!="symbol"?e+"":e,n);let R8e=class Bee extends zDe{constructor(e){super(e),qt(this,"protocol",Lee),qt(this,"version",Mee),qt(this,"name",sO.name),qt(this,"metadata"),qt(this,"core"),qt(this,"logger"),qt(this,"events",new Ba.EventEmitter),qt(this,"engine"),qt(this,"session"),qt(this,"proposal"),qt(this,"pendingRequest"),qt(this,"auth"),qt(this,"signConfig"),qt(this,"on",(r,s)=>this.events.on(r,s)),qt(this,"once",(r,s)=>this.events.once(r,s)),qt(this,"off",(r,s)=>this.events.off(r,s)),qt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),qt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),qt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),qt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),qt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),qt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||sO.name,this.metadata=q3e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:x1(vm({level:(e==null?void 0:e.logger)||sO.logger}));this.core=(e==null?void 0:e.core)||new n8e(e),this.logger=Us(n,this.name),this.session=new v8e(this.core,this.logger),this.proposal=new b8e(this.core,this.logger),this.pendingRequest=new E8e(this.core,this.logger),this.engine=new w8e(this),this.auth=new I8e(this.core,this.logger)}static async init(e){const n=new Bee(e);return await n.initialize(),n}get context(){return bo(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Se.toMiliseconds(Se.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const c7="error",P8e="wss://relay.walletconnect.org",k8e="wc",O8e="universal_provider",tS=`${k8e}@2:${O8e}:`,jee="https://rpc.walletconnect.org/v1/",vy="generic",D8e=`${jee}bundler`,Fa={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function $8e(){}function SU(t){return t==null||typeof t!="object"&&typeof t!="function"}function xU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function L8e(t){if(SU(t))return t;if(Array.isArray(t)||xU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function l7(t){return typeof t=="object"&&t!==null}function Fee(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function zee(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const M8e="[object RegExp]",Wee="[object String]",Hee="[object Number]",qee="[object Boolean]",Gee="[object Arguments]",U8e="[object Symbol]",B8e="[object Date]",j8e="[object Map]",F8e="[object Set]",z8e="[object Array]",W8e="[object ArrayBuffer]",H8e="[object Object]",q8e="[object DataView]",G8e="[object Uint8Array]",V8e="[object Uint8ClampedArray]",K8e="[object Uint16Array]",Y8e="[object Uint32Array]",Q8e="[object Int8Array]",J8e="[object Int16Array]",Z8e="[object Int32Array]",X8e="[object Float32Array]",e4e="[object Float64Array]";function t4e(t,e){return qy(t,void 0,t,new Map,e)}function qy(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(SU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=qy(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,qy(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(qy(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(xU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=qy(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),fp(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),fp(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),fp(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,fp(o,t,n,r,s),o}if(typeof t=="object"&&n4e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),fp(o,t,n,r,s),o}return t}function fp(t,e,n=t,r,s){const i=[...Object.keys(e),...Fee(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=qy(e[a],a,n,r,s))}}function n4e(t){switch(zee(t)){case Gee:case z8e:case W8e:case q8e:case qee:case B8e:case X8e:case e4e:case Q8e:case J8e:case Z8e:case j8e:case Hee:case H8e:case M8e:case F8e:case Wee:case U8e:case G8e:case V8e:case K8e:case Y8e:return!0;default:return!1}}function r4e(t,e){return t4e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case Hee:case Wee:case qee:{const o=new t.constructor(t==null?void 0:t.valueOf());return fp(o,t),o}case Gee:{const o={};return fp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function u7(t){return r4e(t)}function d7(t){return t!==null&&typeof t=="object"&&zee(t)==="[object Arguments]"}function s4e(t){return xU(t)}function i4e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function o4e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=v$(s,o,r,new Map)}return s}function v$(t,e,n,r){if(SU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return L8e(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...Fee(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(d7(a)&&(a={...a}),d7(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=u7(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||l7(c)&&l7(a)?t[o]=v$(c,a,n,r):c==null&&i4e(a)?t[o]=v$({},a,n,r):c==null&&s4e(a)?t[o]=u7(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function a4e(t,...e){return o4e(t,...e,$8e)}var c4e=Object.defineProperty,l4e=Object.defineProperties,u4e=Object.getOwnPropertyDescriptors,h7=Object.getOwnPropertySymbols,d4e=Object.prototype.hasOwnProperty,h4e=Object.prototype.propertyIsEnumerable,f7=(t,e,n)=>e in t?c4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nS=(t,e)=>{for(var n in e||(e={}))d4e.call(e,n)&&f7(t,n,e[n]);if(h7)for(var n of h7(e))h4e.call(e,n)&&f7(t,n,e[n]);return t},f4e=(t,e)=>l4e(t,u4e(e));function Yo(t,e,n){var r;const s=uw(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${jee}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Cm(t){return t.includes(":")?t.split(":")[1]:t}function Vee(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function p4e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function rS(t={},e={}){const n=p7(t),r=p7(e);return a4e(n,r)}function p7(t){var e,n,r,s,i;const o={};if(!af(t))return o;for(const[a,c]of Object.entries(t)){const l=QT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Hy(a);o[f]=f4e(nS(nS({},o[f]),c),{chains:$l(l,(e=o[f])==null?void 0:e.chains),methods:$l(u,(n=o[f])==null?void 0:n.methods),events:$l(d,(r=o[f])==null?void 0:r.events)}),(af(h)||af(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=nS(nS({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function g7(t){return t.includes(":")?t.split(":")[2]:t}function m7(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=QT(n)?[n]:r.chains?r.chains:Vee(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function aO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const Kee={},ln=t=>Kee[t],cO=(t,e)=>{Kee[t]=e};var g4e=Object.defineProperty,m4e=(t,e,n)=>e in t?g4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jm=(t,e,n)=>m4e(t,typeof e!="symbol"?e+"":e,n);class y4e{constructor(e){Jm(this,"name","polkadot"),Jm(this,"client"),Jm(this,"httpProviders"),Jm(this,"events"),Jm(this,"namespace"),Jm(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ja(new Bc(r,ln("disableProviderPing")))}}var w4e=Object.defineProperty,b4e=Object.defineProperties,v4e=Object.getOwnPropertyDescriptors,y7=Object.getOwnPropertySymbols,E4e=Object.prototype.hasOwnProperty,_4e=Object.prototype.propertyIsEnumerable,E$=(t,e,n)=>e in t?w4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w7=(t,e)=>{for(var n in e||(e={}))E4e.call(e,n)&&E$(t,n,e[n]);if(y7)for(var n of y7(e))_4e.call(e,n)&&E$(t,n,e[n]);return t},b7=(t,e)=>b4e(t,v4e(e)),Zm=(t,e,n)=>E$(t,typeof e!="symbol"?e+"":e,n);class C4e{constructor(e){Zm(this,"name","eip155"),Zm(this,"client"),Zm(this,"chainId"),Zm(this,"namespace"),Zm(this,"httpProviders"),Zm(this,"events"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Yo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ja(new Bc(r,ln("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Cm(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:b7(w7({},u.sessionProperties||{}),{capabilities:b7(w7({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Lh("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${D8e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var A4e=Object.defineProperty,S4e=(t,e,n)=>e in t?A4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xm=(t,e,n)=>S4e(t,typeof e!="symbol"?e+"":e,n);class x4e{constructor(e){Xm(this,"name","solana"),Xm(this,"client"),Xm(this,"httpProviders"),Xm(this,"events"),Xm(this,"namespace"),Xm(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ja(new Bc(r,ln("disableProviderPing")))}}var I4e=Object.defineProperty,N4e=(t,e,n)=>e in t?I4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ey=(t,e,n)=>N4e(t,typeof e!="symbol"?e+"":e,n);class T4e{constructor(e){ey(this,"name","cosmos"),ey(this,"client"),ey(this,"httpProviders"),ey(this,"events"),ey(this,"namespace"),ey(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ja(new Bc(r,ln("disableProviderPing")))}}var R4e=Object.defineProperty,P4e=(t,e,n)=>e in t?R4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ty=(t,e,n)=>P4e(t,typeof e!="symbol"?e+"":e,n);class k4e{constructor(e){ty(this,"name","algorand"),ty(this,"client"),ty(this,"httpProviders"),ty(this,"events"),ty(this,"namespace"),ty(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Yo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new ja(new Bc(r,ln("disableProviderPing")))}}var O4e=Object.defineProperty,D4e=(t,e,n)=>e in t?O4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ny=(t,e,n)=>D4e(t,typeof e!="symbol"?e+"":e,n);class $4e{constructor(e){ny(this,"name","cip34"),ny(this,"client"),ny(this,"httpProviders"),ny(this,"events"),ny(this,"namespace"),ny(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Cm(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ja(new Bc(r,ln("disableProviderPing")))}}var L4e=Object.defineProperty,M4e=(t,e,n)=>e in t?L4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ry=(t,e,n)=>M4e(t,typeof e!="symbol"?e+"":e,n);class U4e{constructor(e){ry(this,"name","elrond"),ry(this,"client"),ry(this,"httpProviders"),ry(this,"events"),ry(this,"namespace"),ry(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ja(new Bc(r,ln("disableProviderPing")))}}var B4e=Object.defineProperty,j4e=(t,e,n)=>e in t?B4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sy=(t,e,n)=>j4e(t,typeof e!="symbol"?e+"":e,n);class F4e{constructor(e){sy(this,"name","multiversx"),sy(this,"client"),sy(this,"httpProviders"),sy(this,"events"),sy(this,"namespace"),sy(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ja(new Bc(r,ln("disableProviderPing")))}}var z4e=Object.defineProperty,W4e=(t,e,n)=>e in t?z4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iy=(t,e,n)=>W4e(t,typeof e!="symbol"?e+"":e,n);class H4e{constructor(e){iy(this,"name","near"),iy(this,"client"),iy(this,"httpProviders"),iy(this,"events"),iy(this,"namespace"),iy(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Yo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace);return typeof r>"u"?void 0:new ja(new Bc(r,ln("disableProviderPing")))}}var q4e=Object.defineProperty,G4e=(t,e,n)=>e in t?q4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oy=(t,e,n)=>G4e(t,typeof e!="symbol"?e+"":e,n);class V4e{constructor(e){oy(this,"name","tezos"),oy(this,"client"),oy(this,"httpProviders"),oy(this,"events"),oy(this,"namespace"),oy(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Yo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace);return typeof r>"u"?void 0:new ja(new Bc(r))}}var K4e=Object.defineProperty,Y4e=(t,e,n)=>e in t?K4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ay=(t,e,n)=>Y4e(t,typeof e!="symbol"?e+"":e,n);class Q4e{constructor(e){ay(this,"name",vy),ay(this,"client"),ay(this,"httpProviders"),ay(this,"events"),ay(this,"namespace"),ay(this,"chainId"),this.namespace=e.namespace,this.events=ln("events"),this.client=ln("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Fa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=uw(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ja(new Bc(r,ln("disableProviderPing")))}}var J4e=Object.defineProperty,Z4e=Object.defineProperties,X4e=Object.getOwnPropertyDescriptors,v7=Object.getOwnPropertySymbols,eje=Object.prototype.hasOwnProperty,tje=Object.prototype.propertyIsEnumerable,_$=(t,e,n)=>e in t?J4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sS=(t,e)=>{for(var n in e||(e={}))eje.call(e,n)&&_$(t,n,e[n]);if(v7)for(var n of v7(e))tje.call(e,n)&&_$(t,n,e[n]);return t},lO=(t,e)=>Z4e(t,X4e(e)),oa=(t,e,n)=>_$(t,typeof e!="symbol"?e+"":e,n);let nje=class Yee{constructor(e){oa(this,"client"),oa(this,"namespaces"),oa(this,"optionalNamespaces"),oa(this,"sessionProperties"),oa(this,"scopedProperties"),oa(this,"events",new rU),oa(this,"rpcProviders",{}),oa(this,"session"),oa(this,"providerOpts"),oa(this,"logger"),oa(this,"uri"),oa(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:x1(vm({level:(e==null?void 0:e.logger)||c7})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new Yee(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:sS({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,BT(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Tn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=m7(this.session.namespaces);this.namespaces=rS(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=m7(s.namespaces);return this.namespaces=rS(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===vy?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(of(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await R8e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||c7,relayUrl:this.providerOpts.relayUrl||P8e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Hy(n)))];cO("client",this.client),cO("events",this.events),cO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=p4e(n,this.session),s=Vee(r),i=rS(this.namespaces,this.optionalNamespaces),o=lO(sS({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new C4e({namespace:o});break;case"algorand":this.rpcProviders[n]=new k4e({namespace:o});break;case"solana":this.rpcProviders[n]=new x4e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new T4e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new y4e({namespace:o});break;case"cip34":this.rpcProviders[n]=new $4e({namespace:o});break;case"elrond":this.rpcProviders[n]=new U4e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new F4e({namespace:o});break;case"near":this.rpcProviders[n]=new H4e({namespace:o});break;case"tezos":this.rpcProviders[n]=new V4e({namespace:o});break;default:this.rpcProviders[vy]?this.rpcProviders[vy].updateNamespace(o):this.rpcProviders[vy]=new Q4e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&of(o)&&this.events.emit("accountsChanged",o.map(g7))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Hy(o),l=aO(o)!==aO(a)?`${c}:${aO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=lO(sS({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",lO(sS({},Tn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Fa.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[vy]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=rS(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Hy(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Hy(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(g7);if(!of(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${tS}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${tS}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${tS}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(tS)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var E7={};const rje={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof E7<"u"?E7.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},C$={filterOutDuplicatesByRDNS(t){const e=ve.state.enableEIP6963?Me.state.connectors:[],n=Ge.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&nt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Me.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ge.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Me.state,{featuredWalletIds:n}=ve.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ve.state.features)==null?void 0:c.connectMethodsOrder),r=e||Me.state.connectors;if(n)return n;const{injected:s,announced:i}=sx.getConnectorsByType(r,it.state.recommended,it.state.featured),o=s.filter(sx.showConnector),a=i.filter(sx.showConnector);return o.length||a.length?["wallet","email","social"]:rje.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&it.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&it.state.excludedWallets.some(r=>zT.isLowerCaseMatch(r.name,t.name));return e||n}},sx={getConnectorsByType(t,e,n){const{customWallets:r}=ve.state,s=Ge.getRecentWallets(),i=C$.filterOutDuplicateWallets(e),o=C$.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&it.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&it.state.excludedWallets.some(i=>zT.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!nt.isMobile()||nt.isMobile()&&!e&&!ht.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(z.state.chains.values()).some(n=>Me.getConnectorId(n.namespace)===Ue.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ve.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=sx.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ve.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),p=new Set(f.map(m=>m.type)),g=c.filter(m=>p.has(m)).map(m=>({type:m,isEnabled:!0})),y=f.filter(({type:m})=>!g.some(({type:v})=>v===m));return Array.from(new Set([...g,...y].map(({type:m})=>m)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ix=globalThis,IU=ix.ShadowRoot&&(ix.ShadyCSS===void 0||ix.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,NU=Symbol(),_7=new WeakMap;let Qee=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==NU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(IU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=_7.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&_7.set(n,e))}return e}toString(){return this.cssText}};const la=t=>new Qee(typeof t=="string"?t:t+"",void 0,NU),Zu=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new Qee(n,t,NU)},sje=(t,e)=>{if(IU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=ix.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},C7=IU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return la(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:ije,defineProperty:oje,getOwnPropertyDescriptor:aje,getOwnPropertyNames:cje,getOwnPropertySymbols:lje,getPrototypeOf:uje}=Object,cf=globalThis,A7=cf.trustedTypes,dje=A7?A7.emptyScript:"",uO=cf.reactiveElementPolyfillSupport,LE=(t,e)=>t,A$={toAttribute(t,e){switch(e){case Boolean:t=t?dje:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Jee=(t,e)=>!ije(t,e),S7={attribute:!0,type:String,converter:A$,reflect:!1,useDefault:!1,hasChanged:Jee};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),cf.litPropertyMetadata??(cf.litPropertyMetadata=new WeakMap);let Ey=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=S7){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&oje(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=aje(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??S7}static _$Ei(){if(this.hasOwnProperty(LE("elementProperties")))return;const e=uje(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(LE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(LE("properties"))){const n=this.properties,r=[...cje(n),...lje(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(C7(s))}else e!==void 0&&n.push(C7(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return sje(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:A$).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:A$;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??Jee)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Ey.elementStyles=[],Ey.shadowRootOptions={mode:"open"},Ey[LE("elementProperties")]=new Map,Ey[LE("finalized")]=new Map,uO==null||uO({ReactiveElement:Ey}),(cf.reactiveElementVersions??(cf.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ME=globalThis,HI=ME.trustedTypes,x7=HI?HI.createPolicy("lit-html",{createHTML:t=>t}):void 0,Zee="$lit$",rh=`lit$${Math.random().toFixed(9).slice(2)}$`,Xee="?"+rh,hje=`<${Xee}>`,Jg=document,pC=()=>Jg.createComment(""),gC=t=>t===null||typeof t!="object"&&typeof t!="function",TU=Array.isArray,fje=t=>TU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",dO=`[ 	
\f\r]`,Rv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,I7=/-->/g,N7=/>/g,Vf=RegExp(`>|${dO}(?:([^\\s"'>=/]+)(${dO}*=${dO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),T7=/'/g,R7=/"/g,ete=/^(?:script|style|textarea|title)$/i,tte=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),uJe=tte(1),dJe=tte(2),K0=Symbol.for("lit-noChange"),fs=Symbol.for("lit-nothing"),P7=new WeakMap,Op=Jg.createTreeWalker(Jg,129);function nte(t,e){if(!TU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return x7!==void 0?x7.createHTML(e):e}const pje=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Rv;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Rv?u[1]==="!--"?o=I7:u[1]!==void 0?o=N7:u[2]!==void 0?(ete.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Vf):u[3]!==void 0&&(o=Vf):o===Vf?u[0]===">"?(o=s??Rv,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Vf:u[3]==='"'?R7:T7):o===R7||o===T7?o=Vf:o===I7||o===N7?o=Rv:(o=Vf,s=void 0);const f=o===Vf&&t[a+1].startsWith("/>")?" ":"";i+=o===Rv?c+hje:d>=0?(r.push(l),c.slice(0,d)+Zee+c.slice(d)+rh+f):c+rh+(d===-2?a:f)}return[nte(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class mC{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=pje(e,n);if(this.el=mC.createElement(l,r),Op.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Op.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(Zee)){const h=u[o++],f=s.getAttribute(d).split(rh),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?mje:p[1]==="?"?yje:p[1]==="@"?wje:XT}),s.removeAttribute(d)}else d.startsWith(rh)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(ete.test(s.tagName)){const d=s.textContent.split(rh),h=d.length-1;if(h>0){s.textContent=HI?HI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],pC()),Op.nextNode(),c.push({type:2,index:++i});s.append(d[h],pC())}}}else if(s.nodeType===8)if(s.data===Xee)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(rh,d+1))!==-1;)c.push({type:7,index:i}),d+=rh.length-1}i++}}static createElement(e,n){const r=Jg.createElement("template");return r.innerHTML=e,r}}function Y0(t,e,n=t,r){var o,a;if(e===K0)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=gC(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Y0(t,s._$AS(t,e.values),s,r)),e}class gje{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Jg).importNode(n,!0);Op.currentNode=s;let i=Op.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new U1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new bje(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Op.nextNode(),o++)}return Op.currentNode=Jg,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class U1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=fs,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Y0(this,e,n),gC(e)?e===fs||e==null||e===""?(this._$AH!==fs&&this._$AR(),this._$AH=fs):e!==this._$AH&&e!==K0&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):fje(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==fs&&gC(this._$AH)?this._$AA.nextSibling.data=e:this.T(Jg.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=mC.createElement(nte(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new gje(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=P7.get(e.strings);return n===void 0&&P7.set(e.strings,n=new mC(e)),n}k(e){TU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new U1(this.O(pC()),this.O(pC()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class XT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=fs,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=fs}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Y0(this,e,n,0),o=!gC(e)||e!==this._$AH&&e!==K0,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Y0(this,a[r+c],n,c),l===K0&&(l=this._$AH[c]),o||(o=!gC(l)||l!==this._$AH[c]),l===fs?e=fs:e!==fs&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===fs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class mje extends XT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===fs?void 0:e}}class yje extends XT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==fs)}}class wje extends XT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Y0(this,e,n,0)??fs)===K0)return;const r=this._$AH,s=e===fs&&r!==fs||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==fs&&(r===fs||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class bje{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Y0(this,e)}}const hO=ME.litHtmlPolyfillSupport;hO==null||hO(mC,U1),(ME.litHtmlVersions??(ME.litHtmlVersions=[])).push("3.3.1");const vje=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new U1(e.insertBefore(pC(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wg=globalThis;let ox=class extends Ey{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=vje(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return K0}};var KW;ox._$litElement$=!0,ox.finalized=!0,(KW=wg.litElementHydrateSupport)==null||KW.call(wg,{LitElement:ox});const fO=wg.litElementPolyfillSupport;fO==null||fO({LitElement:ox});(wg.litElementVersions??(wg.litElementVersions=[])).push("4.2.1");let UE,lf,uf;function fJe(t,e){UE=document.createElement("style"),lf=document.createElement("style"),uf=document.createElement("style"),UE.textContent=dw(t).core.cssText,lf.textContent=dw(t).dark.cssText,uf.textContent=dw(t).light.cssText,document.head.appendChild(UE),document.head.appendChild(lf),document.head.appendChild(uf),rte(e)}function rte(t){lf&&uf&&(t==="light"?(lf.removeAttribute("media"),uf.media="enabled"):(uf.removeAttribute("media"),lf.media="enabled"))}function Eje(t){UE&&lf&&uf&&(UE.textContent=dw(t).core.cssText,lf.textContent=dw(t).dark.cssText,uf.textContent=dw(t).light.cssText)}function dw(t){return{core:Zu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${la(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${la((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${la((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${la((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${la((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Zu`
      :root {
        --w3m-color-mix: ${la((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${la(Hu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${la(Hu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Zu`
      :root {
        --w3m-color-mix: ${la((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${la(Hu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${la(Hu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const pJe=Zu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,gJe=Zu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,mJe=Zu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Qv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},ste=Bme({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function B1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const k7=B1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),O7=B1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});B1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});B1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});B1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const _je={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},ax={getMethodsByChainNamespace(t){return _je[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case k7.caipNetworkId:u.chains.push(k7.deprecatedCaipNetworkId);break;case O7.caipNetworkId:u.chains.push(O7.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await TE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let ite=class{constructor({provider:e,namespace:n}){this.id=Ue.CONNECTOR_ID.WALLET_CONNECT,this.name=NI.ConnectorNamesMap[Ue.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=NI.ConnectorImageIds[Ue.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=z.getCaipNetworks.bind(z),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ve.state.universalProviderConfigOverride,s=ax.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return kE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Cje})}};const Cje=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let Aje=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>z.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:Ue.CONNECTOR_ID.AUTH,type:"AUTH",name:Ue.CONNECTOR_NAMES.AUTH,provider:e,imageId:NI.ConnectorImageIds[Ue.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){qe.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=qe.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof ite);if(!e)throw new Error("WalletConnectConnector not found");return e}};class Sje extends Aje{setUniversalProvider(e){this.addConnector(new ite({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>nt.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Rn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(qe.state.balanceLoading&&e.chainId===((c=z.state.activeCaipNetwork)==null?void 0:c.id))return{balance:qe.state.balance||"0.00",symbol:qe.state.balanceSymbol||""};const s=(await qe.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Ue.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:eX.encode(new TextEncoder().encode(r)),pubkey:s}},(a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=z.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Ue.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:ka(n.id)}]}))}catch(u){if(u.code===Qv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Qv.ERROR_INVALID_CHAIN_ID||u.code===Qv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Qv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:ka(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const xje=["email","socials","swaps","onramp","activity","reownBranding"],iS={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Rn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Rn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Rn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Rn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Rn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Rn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Rn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Rn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Rn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},Ije={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=iS[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=iS[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return iS[t].processApi(e)},processFallbackFeature(t,e){return iS[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await it.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Rn.DEFAULT_REMOTE_FEATURES:Rn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of xje){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Rn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Al.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class Nje{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=z.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=z.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=z.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return z.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>z.getCaipNetworks(n),this.getActiveChainNamespace=()=>z.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{z.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>z.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>z.state.activeChain===n||!n?z.state.activeCaipAddress:z.getAccountProp("caipAddress",n),this.setClientId=n=>{dt.setClientId(n)},this.getProvider=n=>Nn.getProvider(n),this.getProviderType=n=>Nn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=qe.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{qe.setCaipAddress(n,r),n&&ve.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{qe.setBalance(n,r,s)},this.setProfileName=(n,r)=>{qe.setProfileName(n,r)},this.setProfileImage=(n,r)=>{qe.setProfileImage(n,r)},this.setUser=(n,r)=>{qe.setUser(n,r)},this.resetAccount=n=>{qe.resetAccount(n)},this.setCaipNetwork=n=>{z.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{z.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{qe.setAllAccounts(n,r),ve.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{qe.setStatus(n,r),Me.isConnected()?Ge.setConnectionStatus("connected"):Ge.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>z.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Me.state.allConnectors,...n];Me.setConnectors(r)},this.setConnections=(n,r)=>{ht.setConnections(n,r)},this.fetchIdentity=n=>dt.fetchIdentity(n),this.getReownName=n=>TE.getNamesForAddress(n),this.getConnectors=()=>Me.getConnectors(),this.getConnectorImage=n=>iZ.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Nn.getProviderId(r),i=n?{...n,type:s}:void 0;qe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!z.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{qe.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{qe.removeAddressLabel(n,r)},this.getAddress=n=>z.state.activeChain===n||!n?qe.state.address:z.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>z.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{z.resetNetwork(n)},this.addConnector=n=>{Me.addConnector(n)},this.resetWcConnection=()=>{ht.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{qe.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{qe.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{z.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{qe.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ve.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await Ije.fetchRemoteFeatures(e),ve.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&N3.setOnrampProviders(this.remoteFeatures.onramp),((n=ve.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ve.state.remoteFeatures)==null?void 0:r.socials)&&((s=ve.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await it.fetchAllowedOrigins();if(e&&nt.isClient()){const n=window.location.origin;ax.isOriginAllowed(n,e,Qv.DEFAULT_ALLOWED_ANCESTORS)||Al.open(yl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Al.open(yl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,or.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Qi.setThemeMode(e.themeMode),e.themeVariables&&Qi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");z.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&z.setActiveCaipNetwork(n)}initializeConnectionController(e){ht.setWcBasic(e.basic??!1)}initializeConnectorController(){Me.initialize(this.chainNamespaces)}initializeProjectSettings(e){ve.setProjectId(e.projectId),ve.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ve.setDebug(e.debug!==!1),ve.setEnableWalletConnect(e.enableWalletConnect!==!1),ve.setEnableWalletGuide(e.enableWalletGuide!==!1),ve.setEnableWallets(e.enableWallets!==!1),ve.setEIP6963Enabled(e.enableEIP6963!==!1),ve.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ve.setEnableAuthLogger(e.enableAuthLogger!==!1),ve.setCustomRpcUrls(e.customRpcUrls),ve.setEnableEmbedded(e.enableEmbedded),ve.setAllWallets(e.allWallets),ve.setIncludeWalletIds(e.includeWalletIds),ve.setExcludeWalletIds(e.excludeWalletIds),ve.setFeaturedWalletIds(e.featuredWalletIds),ve.setTokens(e.tokens),ve.setTermsConditionsUrl(e.termsConditionsUrl),ve.setPrivacyPolicyUrl(e.privacyPolicyUrl),ve.setCustomWallets(e.customWallets),ve.setFeatures(e.features),ve.setAllowUnsupportedChain(e.allowUnsupportedChain),ve.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ve.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ve.setDefaultAccountTypes(e.defaultAccountTypes);const n=Ge.getPreferredAccountTypes()||{},r={...ve.state.defaultAccountTypes,...n};qe.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ve.setMetadata(e.metadata),ve.setDisableAppend(e.disableAppend),ve.setEnableEmbedded(e.enableEmbedded),ve.setSIWX(e.siwx),!e.projectId){Al.open(yl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===Ue.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ve.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return nt.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=wy.getUnsupportedNetwork(`${n}:${e}`);z.setActiveCaipNetwork(r)}}getDefaultNetwork(){return wy.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return wy.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return wy.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?wy.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Nn.getProvider(e),s=Nn.getProviderId(e),{caipAddress:i}=z.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Ge.removeConnectedNamespace(e),Nn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Me.removeConnectorId(e),z.resetAccount(e),z.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=z.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Ge.setConnectedNamespaces([...z.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Me.setConnectorId(Ji.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,m,b,v,C;const c=z.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const A=this.getCaipNetworks().find(S=>S.chainNamespace===i);A&&this.setCaipNetwork(A)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((m=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:m[0])||((C=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:C[0])});if(!h)return;Ge.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=qe.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=z.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Ge.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=Nke(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));dn.resetSend(),ht.resetWcConnection(),await kE.clearSessions(),Me.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Ge.deleteConnectedSocialProvider(),or.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(z.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:qe.state.address,provider:Nn.getProvider(z.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Rn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(z.state.activeChain),s=Nn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Ue.CHAIN.EVM){const n=this.getAdapter(z.state.activeChain),r=Nn.getProvider(z.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:qe.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:z.state.activeChain}),qe.state.profileImage||!1},getEnsAddress:async e=>await ax.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(z.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Nn.getProvider(z.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!qe.state.address||this.updateNativeBalance(qe.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ht.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Nn.getProviderId(z.state.activeChain)===Ji.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Nn.getProvider(n),i=Nn.getProviderId(n);if(e.chainNamespace===z.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Ji.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Id.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new Sje({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Ge.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Ge.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=z.state.activeChain===e,c=z.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=qe.state.address,i=z.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=z.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=z.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=z.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===Ue.CHAIN.EVM&&nt.isSafeApp()&&Me.setConnectorId(Ue.CONNECTOR_ID.SAFE,e);const n=Me.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Ue.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Ue.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Me.getConnectorId(e),s=this.getCaipNetwork(e),o=Me.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([nt.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=z.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Id.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Id.validateCaipAddress(o),{chainId:f,address:p}=Id.parseCaipAddress(h);if(Nn.setProviderId(n,Ji.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&z.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==Ue.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:z.state.activeCaipNetwork});Nn.setProvider(n,g)}else Nn.setProvider(n,this.universalProvider);Me.setConnectorId(Ue.CONNECTOR_ID.WALLET_CONNECT,n),Ge.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await z.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Id.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>nt.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Nn.setProviderId(s,e),Nn.setProvider(s,n),Me.setConnectorId(r,s)}async syncAllAccounts(e){const n=Me.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===z.state.activeChain,r=z.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ge.getActiveNetworkProps(),c=i||a,l=((d=z.state.activeCaipNetwork)==null?void 0:d.name)===Ue.UNSUPPORTED_NETWORK_NAME,u=z.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],m=y.find(v=>{var C;return((C=Id.parseCaipNetworkId(v))==null?void 0:C.chainId)===c.toString()}),b=y.find(v=>{var C;return((C=Id.parseCaipNetworkId(v))==null?void 0:C.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===m),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===z.state.activeChain?ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&((h=z.state.activeCaipNetwork)==null?void 0:h.name)===Ue.UNSUPPORTED_NETWORK_NAME?z.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),zT.isLowerCaseMatch(s,qe.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Me.getConnectorId(e),r=Nn.getProviderId(e);if(r===Ji.CONNECTOR_TYPE_ANNOUNCED||r===Ji.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Ji.CONNECTOR_TYPE_WALLET_CONNECT){const i=Nn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===Ue.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===Ue.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!tZ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=z.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=Pke.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ve.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await nje.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{ht.setUri(e)}),this.universalProvider.on("connect",ht.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),ht.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(ax.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&nt.isCaipAddress(r[0])&&this.syncAccount(Id.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&nt.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){or.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(yl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=yl.ALERT_ERRORS[o];a&&(Al.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ht.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return ps.open({...e,data:{swap:e.arguments}})}return ps.open(e)}async close(){await this.injectModalUi(),ps.close()}setLoading(e,n){ps.setLoading(e,n)}async disconnect(e){await ht.disconnect(e)}getSIWX(){return ve.state.siwx}getError(){return""}getChainId(){var e;return(e=z.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Al.open(yl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await z.switchActiveNetwork(n)}getWalletProvider(){return z.state.activeChain?Nn.state.providers[z.state.activeChain]:null}getWalletProviderType(){return Nn.getProviderId(z.state.activeChain)}subscribeProviders(e){return Nn.subscribeProviders(e)}getThemeMode(){return Qi.state.themeMode}getThemeVariables(){return Qi.state.themeVariables}setThemeMode(e){Qi.setThemeMode(e),rte(Qi.state.themeMode)}setTermsConditionsUrl(e){ve.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ve.setPrivacyPolicyUrl(e)}setThemeVariables(e){Qi.setThemeVariables(e),Eje(Qi.state.themeVariables)}subscribeTheme(e){return Qi.subscribe(e)}getWalletInfo(){return qe.state.connectedWalletInfo}getAccount(e){var o;const n=Me.getAuthConnector(e),r=z.getAccountData(e),s=z.state.activeChain,i=Ge.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:nt.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===Ue.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Ge.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?z.subscribeChainProp("accountState",r,n):z.subscribe(r),Me.subscribe(r)}subscribeNetwork(e){return z.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return qe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){qe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){z.subscribeKey("activeCaipNetwork",e)}getState(){return Ol.state}subscribeState(e){return Ol.subscribe(e)}showErrorMessage(e){Ec.showError(e)}showSuccessMessage(e){Ec.showSuccess(e)}getEvent(){return{...or.state}}subscribeEvents(e){return or.subscribe(e)}replace(e){Ot.replace(e)}redirect(e){Ot.push(e)}popTransactionStack(e){Ot.popTransactionStack(e)}isOpen(){return ps.state.open}isTransactionStackEmpty(){return Ot.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ve.setFeatures(e)}updateRemoteFeatures(e){ve.setRemoteFeatures(e)}updateOptions(e){const r={...ve.state||{},...e};ve.setOptions(r)}setConnectMethodsOrder(e){ve.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ve.setWalletFeaturesOrder(e)}setCollapseWallets(e){ve.setCollapseWallets(e)}setSocialsOrder(e){ve.setSocialsOrder(e)}getConnectMethodsOrder(){return C$.getConnectOrderMethod(ve.state.features,Me.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||z.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&z.removeNetwork(e,n)}}let D7=!1;class Tje extends Nje{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{jo.checkIfRequestExists(n)?jo.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ds.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ds.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=jo.checkIfRequestIsSafe(r),i=qe.state.address,o=z.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=z.state.activeChain;Me.getConnectorId(n)===Ue.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=z.state.activeChain,s=r===Ue.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ve.state.defaultAccountTypes[r],o=(l=qe.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;zT.isLowerCaseMatch(n.address,qe.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...qe.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>nt.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[nt.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...qe.state.user||{},username:n},z.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,z.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,z.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=Ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=qe.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Qi.getSnapshot(),l=ve.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Hu(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:Ue.CONNECTOR_ID.AUTH,info:{name:Ue.CONNECTOR_ID.AUTH},type:Ji.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=z.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Me.getConnectorId(n)===Ue.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Ge.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!nt.isTelegram())return;const r=Ge.getTelegramSocialProvider();if(!r||!nt.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;qe.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Me.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ht.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Ge.setConnectedSocialProvider(r),Ge.removeTelegramSocialProvider(),or.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!Ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=X2e.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:yl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Al.open(yl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Al.open(yl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Al.open(yl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Ol.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&it.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=z.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Nn.getProvider(r),u=Nn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Nn.getProviderId(n)===Ji.CONNECTOR_TYPE_AUTH,u=Nn.getProviderId(r),d=u===Ji.CONNECTOR_TYPE_AUTH,h=Ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(z.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:Ue.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Ji.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Ji.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Ol.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==Ue.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Nn.getProviderId(e);if(n===Ji.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Ge.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(nt.isClient()&&!D7)try{const e={...Rn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),nt.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ve.state.disableAppend&&!ve.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}D7=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!nt.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Nr(()=>import("./embedded-wallet-Dxe_JV90.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(Nr(()=>import("./email-D3I_VG6L.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(Nr(()=>import("./socials-CakF0tWv.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(Nr(()=>import("./swaps-B9AaCp6m.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(Nr(()=>import("./send-DA2GYnRb.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(Nr(()=>import("./receive-CCq2q3BU.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(Nr(()=>import("./onramp-C1_mOXnG.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(Nr(()=>import("./transactions-BDdvVMGq.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(Nr(()=>import("./index-wRZ_4izq.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,Nr(()=>import("./index-C2v0CmPY.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),Nr(()=>import("./w3m-modal-DjQv8fs6.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Wd;function Rje(t){t&&(Wd=t)}function eR(){if(!Wd)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Wd==null?void 0:Wd.open(n))}async function e(){await(Wd==null?void 0:Wd.close())}return{open:t,close:e}}const Pje="1.7.8";let oS;function kje(t){return oS||(oS=new Tje({...t,sdkVersion:nt.generateSdkVersion(t.adapters??[],"react",Pje)}),Rje(oS)),oS}const Oje=Uc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),$7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Dje=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Oje({isOpen:t}),{open:i}=eR(),o=L.useRef(null),[a,c]=L.useState([]),[l,u]=L.useState(!0),[d,h]=L.useState(null),[f,p]=L.useState("all"),[g,y]=L.useState(1),[m,b]=L.useState(1),[v,C]=L.useState(0),[A,S]=L.useState(null),[x,R]=L.useState($7[0]),[I,O]=L.useState(!1),[P,B]=L.useState(null),H=L.useCallback(async()=>{var D,U;try{if((D=window.solana)!=null&&D.isPhantom){const q=await window.solana.connect();B(q.publicKey.toString());return}if((U=window.solflare)!=null&&U.isSolflare){const q=await window.solflare.connect();B(q.publicKey.toString());return}i()}catch(q){console.error("Failed to connect Solana wallet:",q),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);L.useEffect(()=>{var D,U;(D=window.solana)!=null&&D.publicKey?B(window.solana.publicKey.toString()):(U=window.solflare)!=null&&U.publicKey&&B(window.solflare.publicKey.toString())},[]),L.useEffect(()=>{t&&(async()=>{var U;u(!0),h(null);try{let q,X=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!P){O(!0),u(!1);return}X=P||void 0,q=await eZ(x.slug,50),console.log("Fetched Solana NFTs from collection:",q.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(U=q.data[0])==null?void 0:U.owners),console.log("All NFTs owner data:",q.data.map(oe=>({name:oe.name,owners:oe.owners,owner_of:oe.owner_of}))),q.data.some(oe=>oe.owners&&oe.owners.length>0)?(q.data=q.data.filter(oe=>{const le=oe.owners.some(Ee=>Ee.owner_of&&Ee.owner_of.toLowerCase()===P.toLowerCase());return le&&console.log("Found owned NFT:",oe.name),le}),console.log("NFTs after filtering:",q.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?q=await tU(x.slug,50,X):q=await eU(x.slug,g,50,X);c(q.data),b(q.totalPages),C(q.totalCount)}catch(q){q instanceof Error?h(q.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,P]),L.useEffect(()=>{I&&H()},[I,H]);const j=D=>new Date(D).toLocaleDateString(),T=D=>x.api==="opensea-solana"&&(!D.owners||D.owners.length===0)?"Owner data unavailable":D.owners.length>0?`${D.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},M=async D=>{if(x.api==="opensea"&&x.chain)try{const U=await XJ(x.chain,D.address,D.token_id.toString()),q={...D,attributes:JSON.stringify(U.traits||[])};S(q)}catch(U){console.error("Failed to fetch full NFT details",U),S(D)}else S(D)},k=D=>{R(D),y(1)};return t?w.jsxs(w.Fragment,{children:[w.jsx(_1,{nodeRef:o,handle:`.${s.header}`,children:w.jsxs("div",{ref:o,className:s.popup,children:[w.jsxs("div",{className:s.header,children:[w.jsx("span",{children:"LAWB NFT GALLERY"}),w.jsxs("div",{className:s.titleBarButtons,children:[w.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),w.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),w.jsx("div",{className:s.collectionSelector,children:$7.map(D=>w.jsx("button",{className:`${s.collectionButton} ${x.slug===D.slug?"active":""}`,onClick:()=>k(D),children:D.name},D.slug))}),w.jsxs("div",{className:s.content,children:[w.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[w.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),w.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),w.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&w.jsx("button",{onClick:()=>{H()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!P&&w.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&w.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?w.jsx("div",{children:"Loading NFTs..."}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?w.jsx("div",{children:"No NFTs found."}):w.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(D=>w.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{M(D)},children:[w.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${D.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),w.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:w.jsxs("strong",{children:["#",D.token_id]})}),w.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",T(D)]}),w.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",j(D.created_at)]})]},D.id))}),f!=="recent"&&m>1&&w.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[w.jsx("button",{onClick:()=>y(D=>Math.max(1,D-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),w.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",m]}),w.jsx("button",{onClick:()=>y(D=>Math.min(m,D+1)),disabled:g===m,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===m?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),A&&w.jsx(YAe,{nft:A,onClose:()=>S(null)})]}):null};var aS,$je=new Uint8Array(16);function Lje(){if(!aS&&(aS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!aS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aS($je)}const Mje=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Uje(t){return typeof t=="string"&&Mje.test(t)}var As=[];for(var pO=0;pO<256;++pO)As.push((pO+256).toString(16).substr(1));function Bje(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(As[t[e+0]]+As[t[e+1]]+As[t[e+2]]+As[t[e+3]]+"-"+As[t[e+4]]+As[t[e+5]]+"-"+As[t[e+6]]+As[t[e+7]]+"-"+As[t[e+8]]+As[t[e+9]]+"-"+As[t[e+10]]+As[t[e+11]]+As[t[e+12]]+As[t[e+13]]+As[t[e+14]]+As[t[e+15]]).toLowerCase();if(!Uje(n))throw TypeError("Stringified UUID is invalid");return n}function jje(t,e,n){t=t||{};var r=t.random||(t.rng||Lje)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Bje(r)}const Fje=Uc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),zje=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],Wje=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],Co=500;function ote(){const t=Fje(),e=L.useRef(null),[n,r]=L.useState(null),[s,i]=L.useState(""),[o,a]=L.useState(""),[c,l]=L.useState(36),[u,d]=L.useState(36),[h,f]=L.useState(!1),[p,g]=L.useState(!1),[y,m]=L.useState(!1),[b,v]=L.useState(!1),[C,A]=L.useState(!1),[S,x]=L.useState([]),[R,I]=L.useState(null),O=L.useRef(null),[P,B]=L.useState(null),H=async Z=>{const ce=Z.getContext("2d");if(!ce)return;ce.clearRect(0,0,Z.width,Z.height),n?await new Promise(ne=>{const ye=new window.Image;ye.crossOrigin="anonymous",ye.onload=()=>{const Ne=Math.min(Z.width/ye.width,Z.height/ye.height),de=(Z.width-ye.width*Ne)/2,_e=(Z.height-ye.height*Ne)/2;ce.drawImage(ye,de,_e,ye.width*Ne,ye.height*Ne),ne()},ye.onerror=()=>ne(),ye.src=n}):(ce.fillStyle="#333",ce.fillRect(0,0,Z.width,Z.height)),(ne=>{ne.textAlign="center",ne.strokeStyle="black",ne.lineWidth=3,ne.fillStyle="white";const ye=(Ne,de)=>{const _e=Ne.toUpperCase().split(" "),Ye=[];let rt=_e[0];for(let un=1;un<_e.length;un++){const An=_e[un];ne.measureText(rt+" "+An).width<de?rt+=" "+An:(Ye.push(rt),rt=An)}return Ye.push(rt),Ye};s&&(ne.font=`${c}px Impact`,ye(s,Co-20).forEach((de,_e)=>{const Ye=c+_e*c*1.2;ne.strokeText(de,Co/2,Ye),ne.fillText(de,Co/2,Ye)})),o&&(ne.font=`${u}px Impact`,ye(o,Co-20).reverse().forEach((de,_e)=>{const Ye=Co-u*1.2*(_e+1);ne.strokeText(de,Co/2,Ye),ne.fillText(de,Co/2,Ye)}))})(ce),await Promise.all(S.map(ne=>new Promise(ye=>{const Ne=new window.Image;Ne.src=ne.src,Ne.onload=()=>{ce.save(),ce.translate(ne.x,ne.y),ce.rotate(ne.rotation*Math.PI/180),ce.scale(ne.scale,ne.scale),ce.drawImage(Ne,-40,-40,80,80),ce.restore(),ye()},Ne.onerror=()=>ye()})));try{h&&j(Z),p&&T(Z),y&&N(Z)}catch(ne){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ne),f(!1),g(!1),m(!1)}},j=Z=>{const ce=Z.getContext("2d");if(!ce)return;const fe=ce.getImageData(0,0,Z.width,Z.height),ne=fe.data;for(let ye=0;ye<ne.length;ye+=4){const Ne=ne[ye],de=ne[ye+1],_e=ne[ye+2],Ye=(Ne+de+_e)/3,rt=1.8;ne[ye]=Math.min(255,Ye+(Ne-Ye)*rt),ne[ye+1]=Math.min(255,Ye+(de-Ye)*rt*.7),ne[ye+2]=Math.min(255,Ye+(_e-Ye)*rt*.4);const un=1.3;ne[ye]=Math.min(255,Math.max(0,ne[ye]*un)),ne[ye+1]=Math.min(255,Math.max(0,ne[ye+1]*un)),ne[ye+2]=Math.min(255,Math.max(0,ne[ye+2]*un))}ce.putImageData(fe,0,0)},T=Z=>{const ce=Z.getContext("2d");if(!ce)return;const fe=4,ye=ce.getImageData(0,0,Z.width,Z.height).data,Ne=new Uint8ClampedArray(ye);for(let de=0;de<Z.height;de+=fe)for(let _e=0;_e<Z.width;_e+=fe){const Ye=(de*Z.width+_e)*4,rt=ye[Ye],un=ye[Ye+1],An=ye[Ye+2],wn=ye[Ye+3];for(let en=0;en<fe&&de+en<Z.height;en++)for(let nr=0;nr<fe&&_e+nr<Z.width;nr++){const mr=((de+en)*Z.width+(_e+nr))*4;Ne[mr]=rt,Ne[mr+1]=un,Ne[mr+2]=An,Ne[mr+3]=wn}}ce.putImageData(new ImageData(Ne,Z.width,Z.height),0,0)},N=Z=>{const ce=Z.getContext("2d");if(!ce)return;const fe=ce.getImageData(0,0,Z.width,Z.height),ne=fe.data;for(let ye=0;ye<ne.length;ye+=4){const Ne=(Math.random()-.5)*50;ne[ye]=Math.max(0,Math.min(255,ne[ye]+Ne)),ne[ye+1]=Math.max(0,Math.min(255,ne[ye+1]+Ne)),ne[ye+2]=Math.max(0,Math.min(255,ne[ye+2]+Ne))}ce.putImageData(fe,0,0)};L.useEffect(()=>{e.current&&H(e.current)},[H]);const M=Z=>{var fe;const ce=(fe=Z.target.files)==null?void 0:fe[0];ce&&r(URL.createObjectURL(ce))},k=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),m(!1)},D=async()=>{const Z=e.current;if(!Z)return;await H(Z);const ce=document.createElement("a");ce.download="meme.png",ce.href=Z.toDataURL("image/png"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},U=async Z=>{A(!0),v(!1);try{console.log("Fetching NFTs for collection:",Z);let ce;if(Z.api==="opensea"){console.log("Using OpenSea API for:",Z.slug);const fe=await tU(Z.slug,50);ce=fe.data,console.log("OpenSea response:",fe)}else if(Z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Z.slug);const fe=await eZ(Z.slug,50);ce=fe.data,console.log("OpenSea Solana response:",fe)}else{console.log("Using Scatter API for:",Z.slug);const fe=await eU(Z.slug,1,50);ce=fe.data,console.log("Scatter response:",fe)}if(ce&&ce.length>0){const fe=ce[Math.floor(Math.random()*ce.length)],ne=fe.image||fe.image_url||fe.image_url_shrunk;console.log("Selected NFT:",fe),console.log("Image URL:",ne),r(ne)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ce){console.error("Error fetching NFTs:",ce),alert("Failed to fetch NFT images. Check console for details.")}finally{A(!1)}},q=Z=>{const ce={id:jje(),src:Z,x:80,y:80,scale:1,rotation:0};x(fe=>fe.length>=2||fe.some(ne=>ne.src===Z&&!ne.id.startsWith("upload-"))?fe:[...fe,ce]),B(ce.id)},X=Z=>{var fe;const ce=(fe=Z.target.files)==null?void 0:fe[0];if(ce){const ne=URL.createObjectURL(ce);q(ne)}},ae=(Z,ce,fe)=>{x(ne=>ne.map(ye=>{if(ye.id!==Z)return ye;let Ne=ye.x+ce/1.2,de=ye.y+fe/1.2;const _e=40*ye.scale,Ye=40*ye.scale;return Ne=Math.max(_e,Math.min(Co-_e,Ne)),de=Math.max(Ye,Math.min(Co-Ye,de)),{...ye,x:Ne,y:de}}))},oe=(Z,ce,fe,ne,ye)=>{x(Ne=>Ne.map(de=>{if(de.id!==Z)return de;const _e=de.x,Ye=de.y,rt=Math.atan2(ye-Ye,ne-_e)*180/Math.PI;return{...de,rotation:fe+(rt-ce)*.5}}))},le=Z=>{x(ce=>ce.filter(fe=>fe.id!==Z))},Ee=(Z,ce)=>{x(fe=>fe.map(ne=>ne.id===Z?{...ne,scale:Math.max(.2,ne.scale*(1+(ce-1)*.2))}:ne))};return w.jsxs("div",{className:t.container,children:[w.jsxs("div",{className:t.header,children:[w.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),w.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",w.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),w.jsxs("div",{className:t.content,children:[w.jsxs("div",{className:t.section,children:[w.jsx("div",{className:t.sectionTitle,children:"Collections"}),w.jsxs("div",{className:t.row,children:[w.jsxs("div",{className:t.dropdown,children:[w.jsx("button",{className:t.button,onClick:()=>v(Z=>!Z),children:"Collections"}),b&&w.jsx("div",{className:t.dropdownContent,children:zje.map(Z=>w.jsx("div",{className:t.dropdownItem,onClick:()=>{U(Z)},children:Z.name},Z.id))})]}),w.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",w.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:M})]}),C&&w.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),w.jsxs("div",{className:t.section,children:[w.jsx("div",{className:t.sectionTitle,children:"Text"}),w.jsxs("div",{className:t.row,children:[w.jsx("span",{className:t.label,children:"Top Text:"}),w.jsx("input",{className:t.input,type:"text",value:s,onChange:Z=>i(Z.target.value),placeholder:"Enter top text..."}),w.jsx("span",{className:t.label,children:"Size:"}),w.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Z=>l(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]}),w.jsxs("div",{className:t.row,children:[w.jsx("span",{className:t.label,children:"Bottom Text:"}),w.jsx("input",{className:t.input,type:"text",value:o,onChange:Z=>a(Z.target.value),placeholder:"Enter bottom text..."}),w.jsx("span",{className:t.label,children:"Size:"}),w.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Z=>d(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]})]}),w.jsxs("div",{className:t.section,children:[w.jsx("div",{className:t.sectionTitle,children:"Effects"}),w.jsxs("div",{className:t.row,children:[w.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Z=>!Z),children:"Deep Fry"}),w.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Z=>!Z),children:"Pixelate"}),w.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>m(Z=>!Z),children:"Grain"})]})]}),w.jsxs("div",{className:t.section,children:[w.jsx("div",{className:t.sectionTitle,children:"Stickers"}),w.jsxs("div",{className:t.row,children:[Wje.map((Z,ce)=>w.jsx("img",{src:Z,alt:`sticker${ce+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>q(Z)},Z)),w.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",w.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:O,onChange:X})]})]})]}),w.jsxs("div",{className:t.actions,children:[w.jsx("button",{className:t.button,onClick:D,children:"Save Image"}),w.jsx("button",{className:t.button,onClick:k,children:"Restart"})]})]}),w.jsx("div",{className:t.memeArea,children:w.jsx("canvas",{ref:e,width:Co,height:Co,className:t.canvas})}),w.jsx("div",{style:{position:"absolute",left:0,top:0,width:Co,height:Co,pointerEvents:"none"},children:S.map(Z=>P===Z.id?w.jsxs("div",{style:{position:"absolute",left:Z.x,top:Z.y,width:80*Z.scale,height:80*Z.scale,transform:`rotate(${Z.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ce=>{I(Z.id),ce.stopPropagation()},onMouseUp:()=>I(null),onMouseMove:ce=>{R===Z.id&&ce.buttons===1&&ae(Z.id,ce.movementX,ce.movementY)},children:[w.jsx("img",{src:Z.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),w.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ce=>{var rt;ce.stopPropagation();const fe=(rt=ce.currentTarget.parentElement)==null?void 0:rt.getBoundingClientRect(),ne=fe?fe.left+fe.width/2:0,ye=fe?fe.top+fe.height/2:0,Ne=Math.atan2(ce.clientY-ye,ce.clientX-ne)*180/Math.PI,de=Z.rotation,_e=un=>{oe(Z.id,Ne,de,un.clientX,un.clientY)},Ye=()=>{window.removeEventListener("mousemove",_e),window.removeEventListener("mouseup",Ye)};window.addEventListener("mousemove",_e),window.addEventListener("mouseup",Ye)}}),w.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ce=>{ce.stopPropagation();const fe=ce.clientX,ne=Ne=>{const de=(Ne.clientX-fe)/80;Ee(Z.id,1+de)},ye=()=>{window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",ye)};window.addEventListener("mousemove",ne),window.addEventListener("mouseup",ye)}}),w.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>le(Z.id),children:""}),w.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>B(null),children:"Place"})]},Z.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yC(){return yC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yC.apply(this,arguments)}var Uh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Uh||(Uh={}));const L7="popstate";function Hje(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return S$("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:cte(s)}return Gje(e,n,null,t)}function Zr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ate(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qje(){return Math.random().toString(36).substr(2,8)}function M7(t,e){return{usr:t.state,key:t.key,idx:e}}function S$(t,e,n,r){return n===void 0&&(n=null),yC({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$b(e):e,{state:n,key:e&&e.key||r||qje()})}function cte(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $b(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Gje(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Uh.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(yC({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Uh.Pop;let y=u(),m=y==null?null:y-l;l=y,c&&c({action:a,location:g.location,delta:m})}function h(y,m){a=Uh.Push;let b=S$(g.location,y,m);l=u()+1;let v=M7(b,l),C=g.createHref(b);try{o.pushState(v,"",C)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(C)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,m){a=Uh.Replace;let b=S$(g.location,y,m);l=u();let v=M7(b,l),C=g.createHref(b);o.replaceState(v,"",C),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let m=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof y=="string"?y:cte(y);return b=b.replace(/ $/,"%20"),Zr(m,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,m)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(L7,d),c=y,()=>{s.removeEventListener(L7,d),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let m=p(y);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}var U7;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(U7||(U7={}));function Vje(t,e,n){return n===void 0&&(n="/"),Kje(t,e,n)}function Kje(t,e,n,r){let s=typeof e=="string"?$b(e):e,i=dte(s.pathname||"/",n);if(i==null)return null;let o=lte(t);Yje(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=aFe(i);a=sFe(o[c],l)}return a}function lte(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Zr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=bg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Zr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),lte(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:nFe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of ute(i.path))s(i,o,c)}),e}function ute(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ute(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function Yje(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rFe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Qje=/^:[\w-]+$/,Jje=3,Zje=2,Xje=1,eFe=10,tFe=-2,B7=t=>t==="*";function nFe(t,e){let n=t.split("/"),r=n.length;return n.some(B7)&&(r+=tFe),e&&(r+=Zje),n.filter(s=>!B7(s)).reduce((s,i)=>s+(Qje.test(i)?Jje:i===""?Xje:eFe),r)}function rFe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function sFe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=iFe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:bg([i,d.pathname]),pathnameBase:fFe(bg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=bg([i,d.pathnameBase]))}return o}function iFe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oFe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function oFe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ate(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aFe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ate(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function dte(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cFe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?$b(t):t;return{pathname:n?n.startsWith("/")?n:lFe(n,e):e,search:pFe(r),hash:gFe(s)}}function lFe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function gO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uFe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dFe(t,e){let n=uFe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hFe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=$b(t):(s=yC({},t),Zr(!s.pathname||!s.pathname.includes("?"),gO("?","pathname","search",s)),Zr(!s.pathname||!s.pathname.includes("#"),gO("#","pathname","hash",s)),Zr(!s.search||!s.search.includes("#"),gO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=cFe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const bg=t=>t.join("/").replace(/\/\/+/g,"/"),fFe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pFe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gFe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mFe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hte=["post","put","patch","delete"];new Set(hte);const yFe=["get",...hte];new Set(yFe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wC(){return wC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wC.apply(this,arguments)}const RU=L.createContext(null),wFe=L.createContext(null),tR=L.createContext(null),nR=L.createContext(null),Lb=L.createContext({outlet:null,matches:[],isDataRoute:!1}),fte=L.createContext(null);function rR(){return L.useContext(nR)!=null}function pte(){return rR()||Zr(!1),L.useContext(nR).location}function gte(t){L.useContext(tR).static||L.useLayoutEffect(t)}function bFe(){let{isDataRoute:t}=L.useContext(Lb);return t?kFe():vFe()}function vFe(){rR()||Zr(!1);let t=L.useContext(RU),{basename:e,future:n,navigator:r}=L.useContext(tR),{matches:s}=L.useContext(Lb),{pathname:i}=pte(),o=JSON.stringify(dFe(s,n.v7_relativeSplatPath)),a=L.useRef(!1);return gte(()=>{a.current=!0}),L.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=hFe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:bg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function EFe(t,e){return _Fe(t,e)}function _Fe(t,e,n,r){rR()||Zr(!1);let{navigator:s}=L.useContext(tR),{matches:i}=L.useContext(Lb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=pte(),u;if(e){var d;let y=typeof e=="string"?$b(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||Zr(!1),u=y}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=Vje(t,{pathname:f}),g=IFe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:bg([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:bg([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?L.createElement(nR.Provider,{value:{location:wC({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Uh.Pop}},g):g}function CFe(){let t=PFe(),e=mFe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const AFe=L.createElement(CFe,null);class SFe extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Lb.Provider,{value:this.props.routeContext},L.createElement(fte.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xFe(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext(RU);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Lb.Provider,{value:e},r)}function IFe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Zr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||AFe,c&&(l<0&&h===0?(OFe("route-fallback"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=y:d.route.Component?v=L.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,L.createElement(xFe,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?L.createElement(SFe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):b()},null)}var mte=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mte||{}),yte=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yte||{});function NFe(t){let e=L.useContext(RU);return e||Zr(!1),e}function TFe(t){let e=L.useContext(wFe);return e||Zr(!1),e}function RFe(t){let e=L.useContext(Lb);return e||Zr(!1),e}function wte(t){let e=RFe(),n=e.matches[e.matches.length-1];return n.route.id||Zr(!1),n.route.id}function PFe(){var t;let e=L.useContext(fte),n=TFe(),r=wte();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function kFe(){let{router:t}=NFe(mte.UseNavigateStable),e=wte(yte.UseNavigateStable),n=L.useRef(!1);return gte(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,wC({fromRouteId:e},i)))},[t,e])}const j7={};function OFe(t,e,n){j7[t]||(j7[t]=!0)}function DFe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cx(t){Zr(!1)}function $Fe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Uh.Pop,navigator:i,static:o=!1,future:a}=t;rR()&&Zr(!1);let c=e.replace(/^\/*/,"/"),l=L.useMemo(()=>({basename:c,navigator:i,static:o,future:wC({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=$b(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=L.useMemo(()=>{let y=dte(u,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:L.createElement(tR.Provider,{value:l},L.createElement(nR.Provider,{children:n,value:g}))}function LFe(t){let{children:e,location:n}=t;return EFe(x$(e),n)}new Promise(()=>{});function x$(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,x$(r.props.children,i));return}r.type!==cx&&Zr(!1),!r.props.index||!r.props.children||Zr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=x$(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const MFe="6";try{window.__reactRouterVersion=MFe}catch{}const UFe="startTransition",F7=wse[UFe];function BFe(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=Hje({window:s,v5Compat:!0}));let o=i.current,[a,c]=L.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=L.useCallback(d=>{l&&F7?F7(()=>c(d)):c(d)},[c,l]);return L.useLayoutEffect(()=>o.listen(u),[o,u]),L.useEffect(()=>DFe(r),[r]),L.createElement($Fe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var z7;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(z7||(z7={}));var W7;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(W7||(W7={}));const jFe=Uc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function FFe(){const t=jFe(),{open:e}=eR(),{address:n,isConnected:r}=v1(),{isPending:s}=VQ(),{disconnect:i}=KQ(),{data:o}=YQ({address:n}),[a,c]=L.useState("pixelawbs-popup"),[l,u]=L.useState(new Set),[d,h]=L.useState(!1),[f,p]=L.useState(!1),[g,y]=L.useState(!1),[m,b]=L.useState(!1),v=bFe(),C=L.useRef(null);L.useEffect(()=>{if(a==="halloween-popup"&&C.current){const N=C.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const M=document.createElement("script");M.src="https://www.tiktok.com/embed.js",M.async=!0,M.setAttribute("data-tiktok-embed","true"),C.current.appendChild(M)}},[a]);const A=(N,M,k)=>{if(N==="url"&&k)window.open(k,"_blank");else if(N==="popup"&&M)c(M),u(D=>{const U=new Set(D);return U.delete(M),U}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?y(!0):N==="chess"&&(r?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):e().then(()=>{const D=()=>{window.ethereum&&window.ethereum.selectedAddress?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):setTimeout(D,200)};D()}))},S=()=>c(null),x=N=>{u(M=>new Set(M).add(N)),c(null)},R=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?y(!0):c(N),u(M=>{const k=new Set(M);return k.delete(N),k})},I=()=>h(!1),O=()=>p(!1),P=()=>y(!1),B=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},H=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},j=()=>{y(!1),u(N=>new Set(N).add("meme-generator-popup"))},T=w.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[w.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return w.jsxs("div",{className:t.body,children:[m&&w.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[w.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),w.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),w.jsx(FAe,{onIconClick:A}),w.jsx(WAe,{minimizedWindows:Array.from(l),onRestoreWindow:R,walletButton:T,connectionStatus:{connected:r,address:n,ens:o||void 0}}),w.jsxs(ua,{id:"chat-popup",isOpen:a==="chat-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",w.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),w.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),w.jsxs(ua,{id:"purity-popup",isOpen:a==="purity-popup",onClose:S,onMinimize:x,children:[w.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),w.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),w.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),w.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),w.jsxs(ua,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",w.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",w.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",w.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",w.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),w.jsx("p",{children:"Chain: Ethereum"}),w.jsxs("p",{children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),w.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[w.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",w.jsx("br",{}),w.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",w.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",w.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),w.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),w.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),w.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),w.jsxs(ua,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",w.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),w.jsx("p",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),w.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),w.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),w.jsxs(ua,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",w.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),w.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),w.jsxs(ua,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",w.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),w.jsx("p",{children:"Chain: Ethereum"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",w.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),w.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:w.jsx(u_e,{id:"1620879129850834944"})}),w.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),w.jsx(ua,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:S,onMinimize:x,children:(()=>{const N=M=>{M.preventDefault(),c(null),h(!0)};return w.jsxs(w.Fragment,{children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",w.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",w.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),w.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",w.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),w.jsxs(ua,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:S,onMinimize:x,children:[w.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),w.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),w.jsx("div",{ref:C,style:{maxWidth:"400px",margin:"0 auto"},children:w.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:w.jsxs("section",{children:[w.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",w.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),w.jsxs(ua,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:S,onMinimize:x,children:[w.jsx("h1",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),w.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",w.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),w.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",w.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),w.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",w.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),w.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),w.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:w.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),w.jsx(GAe,{isOpen:d,onClose:I,onMinimize:B,walletAddress:n||""}),w.jsx(Dje,{isOpen:f,onClose:O,onMinimize:H,walletAddress:n}),w.jsx(ua,{id:"meme-generator-popup",isOpen:g,onClose:P,onMinimize:j,children:w.jsx(ote,{})})]})}const zFe=Uc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),H7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],WFe=({onBack:t,walletAddress:e})=>{const n=zFe(),{open:r}=eR(),[s,i]=L.useState([]),[o,a]=L.useState(!0),[c,l]=L.useState(null),[u,d]=L.useState(H7[0]),[h,f]=L.useState(!1),[p,g]=L.useState(null),[y,m]=L.useState("all"),[b,v]=L.useState(null),C=L.useCallback(async()=>{var R,I;try{if((R=window.solana)!=null&&R.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((I=window.solflare)!=null&&I.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);L.useEffect(()=>{var R,I;(R=window.solana)!=null&&R.publicKey?g(window.solana.publicKey.toString()):(I=window.solflare)!=null&&I.publicKey&&g(window.solflare.publicKey.toString())},[]),L.useEffect(()=>{(async()=>{a(!0);try{let I,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,I=await HAe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",I.data.length)}else u.api==="opensea"?I=await tU(u.slug,100,O):I=await eU(u.slug,1,100,O);y==="owned"&&p&&(console.log("Filtering for owner:",p),I.data.some(B=>B.owners&&B.owners.length>0)?I.data=I.data.filter(B=>B.owners.some(j=>j.owner_of&&j.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(I.data)}catch(I){console.error(I)}finally{a(!1)}})()},[e,u,p,y]),L.useEffect(()=>{h&&C()},[h,C]);const A=async R=>{if(a(!0),u.api==="opensea"&&u.chain)try{const I=await XJ(u.chain,R.address,R.token_id.toString()),O={...R,attributes:JSON.stringify(I.traits||[])};l(O)}catch(I){console.error("Failed to fetch full NFT details",I),l(R)}else l(R);a(!1)},S=()=>{if(!c)return null;let R=[];try{R=JSON.parse(c.attributes||"[]")}catch(I){console.error("Failed to parse NFT attributes:",I)}return w.jsxs("div",{className:n.detailView,children:[w.jsx("img",{src:c.image,alt:c.name}),w.jsx("h2",{children:c.name}),w.jsx("h4",{children:"Traits:"}),w.jsx("ul",{children:R.map((I,O)=>w.jsxs("li",{children:[w.jsxs("strong",{children:[I.trait_type,":"]})," ",I.value]},O))})]})},x=()=>w.jsxs(w.Fragment,{children:[w.jsx("div",{className:n.collectionSelector,children:H7.map(R=>w.jsx("button",{className:`${n.collectionButton} ${u.slug===R.slug?"active":""}`,onClick:()=>d(R),children:R.name},R.slug))}),w.jsxs("div",{className:n.content,children:[w.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[w.jsx("button",{onClick:()=>m("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),w.jsx("button",{onClick:()=>m("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&w.jsx("button",{onClick:()=>{C()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&w.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&w.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?w.jsx("div",{className:n.loading,children:"Loading NFTs..."}):w.jsx("div",{className:n.grid,children:s.map(R=>{let I=R.image||R.image_url||R.image_url_shrunk||"/assets/pixelawb.png";return w.jsxs("div",{className:n.gridItem,onClick:()=>void A(R),children:[w.jsx("img",{src:I,alt:R.name,onError:O=>{O.currentTarget.src!==R.image_url&&R.image_url?O.currentTarget.src=R.image_url:O.currentTarget.src!==R.image_url_shrunk&&R.image_url_shrunk?O.currentTarget.src=R.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),w.jsx("span",{children:R.name})]},R.id)})})]})]});return w.jsxs("div",{className:n.galleryContainer,children:[w.jsxs("header",{className:n.header,children:[w.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),w.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),w.jsx("div",{className:n.content,children:o?w.jsx("p",{className:n.loading,children:"Loading..."}):c?S():x()})]})},HFe=Uc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),ec=({isOpen:t,onClose:e,title:n,children:r})=>{const s=HFe();return t?w.jsx("div",{className:s.overlay,children:w.jsxs("div",{className:s.popup,children:[w.jsxs("div",{className:s.titleBar,children:[w.jsx("span",{children:n}),w.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),w.jsx("div",{className:s.content,children:r})]})}):null},qFe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=L.useState([]),[i,o]=L.useState(!1),[a,c]=L.useState(!1),[l,u]=L.useState({}),[d,h]=L.useState(null),{data:f}=QQ();L.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const C=await JJ(n);s(C);const A={};C.forEach(S=>{A[S.id]=0}),u(A)}catch(C){h(C.message)}finally{o(!1)}},g=(C,A)=>{u(S=>({...S,[C]:Math.max(0,A)}))},y=async()=>{const C=Object.entries(l).filter(([,A])=>A>0).map(([A,S])=>({id:A,quantity:S}));if(C.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const A=await ZJ(n,C);if(A.success&&A.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const S=await f.sendTransaction({to:A.mintTransaction.to,value:BigInt(A.mintTransaction.value),data:A.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){h("Transaction failed: "+S.message)}}else throw new Error(A.message||"Could not retrieve minting transaction.")}catch(A){h("Minting failed: "+A.message)}finally{c(!1)}},m=(C,A)=>`${parseFloat(C)} ${A}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return w.jsxs(ec,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&w.jsx("div",{style:v,children:d}),i?w.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?w.jsx("div",{children:"No eligible invite lists found for your wallet."}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{marginBottom:"20px"},children:[w.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(C=>w.jsxs("div",{style:b,children:[w.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:C.name}),w.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",m(C.token_price,C.currency_symbol)]}),w.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",C.wallet_limit===4294967295?"Unlimited":C.wallet_limit," per wallet"]}),w.jsx("input",{type:"number",min:0,max:C.wallet_limit===4294967295?void 0:C.wallet_limit,value:l[C.id]||"",onChange:A=>g(C.id,parseInt(A.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),w.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},C.id))]}),w.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},GFe=Uc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),VFe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],KFe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],YFe=()=>{const t=GFe(),{open:e}=eR(),{address:n,isConnected:r}=v1(),{isPending:s}=VQ(),{disconnect:i}=KQ(),{data:o}=YQ({address:n}),[a,c]=L.useState("main"),[l,u]=L.useState(!1),[d,h]=L.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=L.useState(!1),[g,y]=L.useState(!1),[m,b]=L.useState(!1),[v,C]=L.useState(!1),[A,S]=L.useState(!1),[x,R]=L.useState(!1),[I,O]=L.useState(!1),[P,B]=L.useState(!1),[H,j]=L.useState(!1),[T,N]=L.useState(!1),[M,k]=L.useState(!1),[D,U]=L.useState(!1),q=[{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>C(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>S(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],X=le=>{le.disabled||le.action()};if(L.useEffect(()=>{const le=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(le)},[]),L.useEffect(()=>{u(!0)},[]),a==="gallery")return w.jsx(WFe,{onBack:()=>c("main"),walletAddress:n||void 0});function ae({open:le,onClose:Ee,title:Z,nfts:ce}){const fe=ne=>{switch(ne){case"lawbsters":R(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":B(!0);break;case"halloween":j(!0);break;case"lawbstation":N(!0);break;case"nexus":k(!0);break}};return w.jsx(ec,{isOpen:le,onClose:Ee,title:Z,children:w.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:ce.map(ne=>w.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>fe(ne.id),children:[w.jsx("img",{src:ne.image,alt:ne.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),w.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:ne.name}),w.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:ne.description})]},ne.id))})})}function oe({open:le,onClose:Ee}){return le?w.jsxs(ec,{isOpen:le,onClose:Ee,title:"$LAWB",children:[w.jsx("h1",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),w.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",w.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),w.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",w.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),w.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",w.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),w.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),w.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:w.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return w.jsxs("div",{className:t.mobileContainer,children:[w.jsx("header",{className:t.header,children:w.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),w.jsx("div",{className:t.iconGrid,children:q.map(le=>w.jsxs("div",{className:t.icon,onClick:()=>X(le),children:[w.jsx("img",{src:le.icon,alt:le.label}),w.jsx("span",{children:le.label})]},le.label))}),l&&w.jsxs(ec,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",w.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",w.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),w.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",w.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),w.jsx("p",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&w.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:w.jsxs("div",{className:t.menuModal,onClick:le=>le.stopPropagation(),children:[w.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),w.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),w.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),w.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),w.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),w.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),w.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),w.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),w.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),w.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),U(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),w.jsx(qFe,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),w.jsx(ae,{open:m,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:VFe}),w.jsx(ae,{open:v,onClose:()=>C(!1),title:"SOL NFTS FOLDER",nfts:KFe}),w.jsx(oe,{open:A,onClose:()=>S(!1)}),w.jsxs(ec,{isOpen:x,onClose:()=>R(!1),title:"Lawbsters",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",w.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),w.jsx("p",{children:"Chain: Ethereum"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",w.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),w.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),w.jsxs(ec,{isOpen:I,onClose:()=>O(!1),title:"Lawbstarz",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",w.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",w.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",w.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",w.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),w.jsx("p",{children:"Chain: Ethereum"}),w.jsxs("p",{children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),w.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),w.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),w.jsxs(ec,{isOpen:P,onClose:()=>B(!1),title:"Pixelawbs",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",w.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{B(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",w.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),w.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",w.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),w.jsxs(ec,{isOpen:H,onClose:()=>j(!1),title:"A Lawbster Halloween",children:[w.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),w.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),w.jsxs(ec,{isOpen:T,onClose:()=>N(!1),title:"Lawbstation",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",w.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),w.jsx("p",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),w.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),w.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),w.jsxs(ec,{isOpen:M,onClose:()=>k(!1),title:"Nexus",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",w.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),w.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),w.jsx(ec,{isOpen:D,onClose:()=>U(!1),title:"Meme Generator",children:w.jsx(ote,{})}),w.jsxs("div",{className:t.taskbar,children:[w.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),w.jsxs("div",{className:t.walletStatus,children:[w.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),w.jsx("span",{className:t.clock,children:d})]})]})};function QFe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=L.useState(e(t));function s(){r(e(t))}return L.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const JFe=Symbol(),q7=Object.getPrototypeOf,I$=new WeakMap,ZFe=t=>t&&(I$.has(t)?I$.get(t):q7(t)===Object.prototype||q7(t)===Array.prototype),XFe=t=>ZFe(t)&&t[JFe]||null,G7=(t,e=!0)=>{I$.set(t,e)},qI={},PU=t=>typeof t=="object"&&t!==null,e9e=t=>PU(t)&&!j1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),bte=(t,e)=>{const n=N$.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return G7(r,!0),N$.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(j1.has(i))G7(i,!1);else if(Cf.has(i)){const[c,l]=Cf.get(i);a.value=bte(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},t9e=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(V7(l,o)||bC.has(o)&&V7(l,bC.get(o))))return!0;n(i),PU(o)&&(o=XFe(o)||o);const u=!Cf.has(o)&&r9e(o)?tr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Cf=new WeakMap,j1=new WeakSet,N$=new WeakMap,Jv=[1,1],bC=new WeakMap;let V7=Object.is,n9e=(t,e)=>new Proxy(t,e),r9e=e9e,s9e=bte,i9e=t9e;function tr(t={}){if(!PU(t))throw new Error("object required");const e=bC.get(t);if(e)return e;let n=Jv[0];const r=new Set,s=(y,m=++Jv[0])=>{n!==m&&(n=m,r.forEach(b=>b(y,m)))};let i=Jv[1];const o=(y=++Jv[1])=>(i!==y&&!r.size&&(i=y,c.forEach(([m])=>{const b=m[1](y);b>n&&(n=b)})),n),a=y=>(m,b)=>{const v=[...m];v[1]=[y,...v[1]],s(v,b)},c=new Map,l=(y,m)=>{const b=!j1.has(m)&&Cf.get(m);if(b){if((qI?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(y));c.set(y,[b,v])}else c.set(y,[b])}},u=y=>{var m;const b=c.get(y);b&&(c.delete(y),(m=b[1])==null||m.call(b))},d=y=>(r.add(y),r.size===1&&c.forEach(([b,v],C)=>{if((qI?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const A=b[2](a(C));c.set(C,[b,A])}),()=>{r.delete(y),r.size===0&&c.forEach(([b,v],C)=>{v&&(v(),c.set(C,[b]))})});let h=!0;const f=i9e(()=>h,l,u,s),p=n9e(t,f);bC.set(t,p);const g=[t,o,d];return Cf.set(p,g),Reflect.ownKeys(t).forEach(y=>{const m=Object.getOwnPropertyDescriptor(t,y);"value"in m&&m.writable&&(p[y]=t[y])}),h=!1,p}function mo(t,e,n){const r=Cf.get(t);(qI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function vC(t){const e=Cf.get(t);(qI?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return s9e(n,r())}function Q0(t){return j1.add(t),t}function o9e(){return{proxyStateMap:Cf,refSet:j1,snapCache:N$,versionHolder:Jv,proxyCache:bC}}function Ri(t,e,n,r){let s=t[e];return mo(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:a9e,snapCache:c9e}=o9e(),cS=t=>a9e.has(t);function l9e(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=c9e.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return cS(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!cS(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!cS(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!cS(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=tr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var K7={};const pe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof K7<"u"?K7.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},GI={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=pe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},u9e={bigNumber(t){return t?new Cl(t):new Cl(0)},multiply(t,e){if(t===void 0||e===void 0)return new Cl(0);const n=new Cl(t),r=new Cl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},d9e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],h9e=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],f9e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],p9e={getERC20Abi:t=>pe.USDT_CONTRACT_ADDRESSES.includes(t)?f9e:d9e,getSwapAbi:()=>h9e},Bh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},bt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function mO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const pt={setItem(t,e){Zv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Zv())return localStorage.getItem(t)||void 0},removeItem(t){Zv()&&localStorage.removeItem(t)},clear(){Zv()&&localStorage.clear()}};function Zv(){return typeof window<"u"&&typeof localStorage<"u"}function VI(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const vi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[pe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Qe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Qe.getActiveNamespace(),e=Qe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{pt.setItem(bt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=pt.getItem(bt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{pt.removeItem(bt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{pt.setItem(bt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{pt.setItem(bt.ACTIVE_CAIP_NETWORK_ID,t),Qe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return pt.getItem(bt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{pt.removeItem(bt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=mO(t);pt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Qe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),pt.setItem(bt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=pt.getItem(bt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=mO(t);pt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return pt.getItem(bt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=mO(t);return pt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{pt.setItem(bt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return pt.getItem(bt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{pt.removeItem(bt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return pt.getItem(bt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=pt.getItem(bt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{pt.setItem(bt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return pt.getItem(bt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=pt.getItem(bt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));pt.setItem(bt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces();e.includes(t)||(e.push(t),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return pt.getItem(bt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{pt.setItem(bt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{pt.removeItem(bt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=pt.getItem(bt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Qe.getBalanceCache();pt.setItem(bt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Qe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Qe.getBalanceCache();e[t.caipAddress]=t,pt.setItem(bt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=pt.getItem(bt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Qe.getBalanceCache();pt.setItem(bt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Qe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Qe.getNativeBalanceCache();e[t.caipAddress]=t,pt.setItem(bt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=pt.getItem(bt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Qe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Qe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Qe.getEnsCache();e[t.address]=t,pt.setItem(bt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Qe.getEnsCache();pt.setItem(bt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=pt.getItem(bt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Qe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Qe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Qe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},pt.setItem(bt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Qe.getIdentityCache();pt.setItem(bt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{pt.removeItem(bt.PORTFOLIO_CACHE),pt.removeItem(bt.NATIVE_BALANCE_CACHE),pt.removeItem(bt.ENS_CACHE),pt.removeItem(bt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{pt.setItem(bt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=pt.getItem(bt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Qe.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===pe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};pt.setItem(bt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=pt.getItem(bt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Qe.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),pt.setItem(bt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=pt.getItem(bt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Qe.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),pt.setItem(bt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Qe.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),pt.setItem(bt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Qe.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ct={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ct.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=vi.TEN_SEC_MS:!0},isAllowedRetry(t,e=vi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ct.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+vi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ct.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ct.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Qe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ct.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return pe.W3M_API_URL},getBlockchainApiUrl(){return pe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return pe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?vi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in pe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Pv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class F1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Pv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Pv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Pv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Pv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Pv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const g9e={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?vi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ct.isTelegram()){if(ct.isIos())return t.filter(e=>e!=="google");if(ct.isMac())return t.filter(e=>e!=="x");if(ct.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ut=tr({features:vi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:vi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Ct={state:ut,subscribeKey(t,e){return Ri(ut,t,e)},setOptions(t){Object.assign(ut,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ut.remoteFeatures,...t};ut.remoteFeatures=e,(n=ut.remoteFeatures)!=null&&n.socials&&(ut.remoteFeatures.socials=g9e.filterSocialsByPlatform(ut.remoteFeatures.socials))},setFeatures(t){if(!t)return;ut.features||(ut.features=vi.DEFAULT_FEATURES);const e={...ut.features,...t};ut.features=e},setProjectId(t){ut.projectId=t},setCustomRpcUrls(t){ut.customRpcUrls=t},setAllWallets(t){ut.allWallets=t},setIncludeWalletIds(t){ut.includeWalletIds=t},setExcludeWalletIds(t){ut.excludeWalletIds=t},setFeaturedWalletIds(t){ut.featuredWalletIds=t},setTokens(t){ut.tokens=t},setTermsConditionsUrl(t){ut.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ut.privacyPolicyUrl=t},setCustomWallets(t){ut.customWallets=t},setIsSiweEnabled(t){ut.isSiweEnabled=t},setIsUniversalProvider(t){ut.isUniversalProvider=t},setSdkVersion(t){ut.sdkVersion=t},setMetadata(t){ut.metadata=t},setDisableAppend(t){ut.disableAppend=t},setEIP6963Enabled(t){ut.enableEIP6963=t},setDebug(t){ut.debug=t},setEnableWalletConnect(t){ut.enableWalletConnect=t},setEnableWalletGuide(t){ut.enableWalletGuide=t},setEnableAuthLogger(t){ut.enableAuthLogger=t},setEnableWallets(t){ut.enableWallets=t},setPreferUniversalLinks(t){ut.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(vi.SIWX_DEFAULTS))t[e]??(t[e]=n);ut.siwx=t},setConnectMethodsOrder(t){ut.features={...ut.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ut.features={...ut.features,walletFeaturesOrder:t}},setSocialsOrder(t){ut.remoteFeatures={...ut.remoteFeatures,socials:t}},setCollapseWallets(t){ut.features={...ut.features,collapseWallets:t}},setEnableEmbedded(t){ut.enableEmbedded=t},setAllowUnsupportedChain(t){ut.allowUnsupportedChain=t},setManualWCControl(t){ut.manualWCControl=t},setEnableNetworkSwitch(t){ut.enableNetworkSwitch=t},setEnableReconnect(t){ut.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ut.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ut.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ut.universalProviderConfigOverride},getSnapshot(){return vC(ut)}},m9e=Object.freeze({enabled:!0,events:[]}),y9e=new F1({baseUrl:ct.getAnalyticsUrl(),clientId:null}),w9e=5,b9e=60*1e3,Dd=tr({...m9e}),v9e={state:Dd,subscribeKey(t,e){return Ri(Dd,t,e)},async sendError(t,e){if(!Dd.enabled)return;const n=Date.now();if(Dd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<b9e}).length>=w9e)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Dd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Ct.state;await y9e.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ct.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Dd.enabled=!0},disable(){Dd.enabled=!1},clearEvents(){Dd.events=[]}};class J0 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,J0.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,J0):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function Y7(t,e){const n=t instanceof J0?t:new J0(t instanceof Error?t.message:String(t),e,t);throw v9e.sendError(n,n.category),n}function za(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return Y7(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return Y7(a,e)}},n[r]=i}else n[r]=s}),n}var Z0={};const E9e="https://secure.walletconnect.org/sdk",_9e=(typeof process<"u"&&typeof Z0<"u"?Z0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||E9e,C9e=(typeof process<"u"&&typeof Z0<"u"?Z0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",A9e=(typeof process<"u"&&typeof Z0<"u"?Z0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ve={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},$s={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},bl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},S9e={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===bl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${bl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===bl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${bl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===pe.CHAIN.SOLANA&&t===bl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${bl.COINBASE.url}/dapp?cb_url=${r}`)}},Ao=tr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),x9e={state:Ao,subscribeNetworkImages(t){return mo(Ao.networkImages,()=>t(Ao.networkImages))},subscribeKey(t,e){return Ri(Ao,t,e)},subscribe(t){return mo(Ao,()=>t(Ao))},setWalletImage(t,e){Ao.walletImages[t]=e},setNetworkImage(t,e){Ao.networkImages[t]=e},setChainImage(t,e){Ao.chainImages[t]=e},setConnectorImage(t,e){Ao.connectorImages={...Ao.connectorImages,[t]:e}},setTokenImage(t,e){Ao.tokenImages[t]=e},setCurrencyImage(t,e){Ao.currencyImages[t]=e}},yc=za(x9e),I9e={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},yO=tr({networkImagePromises:{}}),N9e={async fetchWalletImage(t){if(t)return await gt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(yO.networkImagePromises[t]||(yO.networkImagePromises[t]=gt._fetchNetworkImage(t)),await yO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return yc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return yc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return yc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return yc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return yc.state.connectorImages[t.imageId]},getChainImage(t){return yc.state.networkImages[I9e[t]]}},$d=tr({message:"",variant:"info",open:!1}),T9e={state:$d,subscribeKey(t,e){return Ri($d,t,e)},open(t,e){const{debug:n}=Ct.state,{shortMessage:r,longMessage:s}=t;n&&($d.message=r,$d.variant=e,$d.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){$d.open=!1,$d.message="",$d.variant="info"}},sp=za(T9e),R9e=ct.getAnalyticsUrl(),P9e=new F1({baseUrl:R9e,clientId:null}),k9e=["MODAL_CREATED"],lu=tr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),dr={state:lu,subscribe(t){return mo(lu,()=>t(lu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Ct.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=hn.state.address;if(k9e.includes(t.data.event)||typeof window>"u")return;await P9e.post({path:"/e",params:dr.getSdkProperties(),body:{eventId:ct.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),lu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===pe.HTTP_STATUS_CODES.FORBIDDEN&&!lu.reportedErrors.FORBIDDEN&&(sp.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Zv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),lu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;lu.timestamp=Date.now(),lu.data=t,(e=Ct.state.features)!=null&&e.analytics&&dr._sendAnalyticsEvent(lu)}},O9e=ct.getApiUrl(),Bi=new F1({baseUrl:O9e,clientId:null}),D9e=40,Q7=4,$9e=20,It=tr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),gt={state:It,subscribeKey(t,e){return Ri(It,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Ct.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Ct.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Bi.baseUrl}/getWalletImage/${t}`,n=await Bi.getBlob({path:e,params:gt._getSdkProperties()});yc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Bi.baseUrl}/public/getAssetImage/${t}`,n=await Bi.getBlob({path:e,params:gt._getSdkProperties()});yc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Bi.baseUrl}/public/getAssetImage/${t}`,n=await Bi.getBlob({path:e,params:gt._getSdkProperties()});yc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Bi.baseUrl}/public/getCurrencyImage/${t}`,n=await Bi.getBlob({path:e,params:gt._getSdkProperties()});yc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Bi.baseUrl}/public/getTokenImage/${t}`,n=await Bi.getBlob({path:e,params:gt._getSdkProperties()});yc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ct.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===bl.COINBASE.id?!0:Y.state.activeChain==="solana"&&(n.id===bl.SOLFLARE.id||n.id===bl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Bi.get({path:"/appkit/v1/config",params:gt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Bi.get({path:"/projects/v1/origins",params:gt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===pe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=pe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=Y.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!N9e.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>gt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=tt.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>gt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>gt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>gt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];gt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(bl).map(o=>o.id));const r=await Bi.get({path:"/getWallets",params:{...gt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:gt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Ct.state;if(t!=null&&t.length){const e={...gt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??Q7,include:t},{data:n}=await gt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>gt._fetchWalletImage(i))),It.featured=r,It.allFeatured=r}},async fetchRecommendedWallets(){try{It.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Ct.state,r=[...e??[],...n??[]].filter(Boolean),s=Y.getRequestedCaipNetworkIds().join(","),i={page:1,entries:Q7,include:t,exclude:r,chains:s},{data:o,count:a}=await gt.fetchWallets(i),c=Qe.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>gt._fetchWalletImage(d))),It.recommended=o,It.allRecommended=o,It.count=a??0}catch{}finally{It.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Ct.state,s=Y.getRequestedCaipNetworkIds().join(","),i=[...It.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:D9e,include:e,exclude:i,chains:s},{data:a,count:c}=await gt.fetchWallets(o),l=a.slice(0,$9e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>gt._fetchWalletImage(u))),It.wallets=ct.uniqueBy([...It.wallets,...gt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),It.count=c>It.count?c:It.count,It.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await gt.fetchWallets(e);n&&n.forEach(r=>{It.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Ct.state,s=Y.getRequestedCaipNetworkIds().join(",");It.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await gt.fetchWallets(i);dr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>gt._fetchWalletImage(c)),ct.wait(300)]),It.search=gt._filterOutExtensions(o)},initPromise(t,e){const n=It.promises[t];return n||(It.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&gt.initPromise("connectorImages",gt.fetchConnectorImages),e&&gt.initPromise("featuredWallets",gt.fetchFeaturedWallets),n&&gt.initPromise("recommendedWallets",gt.fetchRecommendedWallets),r&&gt.initPromise("networkImages",gt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Ct.state.features)!=null&&t.analytics&&gt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Bi.get({path:"/getAnalyticsConfig",params:gt._getSdkProperties()});Ct.setFeatures({analytics:t})}catch{Ct.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){It.featured=It.allFeatured,It.recommended=It.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");It.featured=It.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),It.recommended=It.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),It.filteredWallets=It.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){It.filteredWallets=[]},setFilterByNamespace(t){if(!t){It.featured=It.allFeatured,It.recommended=It.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");It.featured=It.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),It.recommended=It.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),It.filteredWallets=It.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},In=tr({view:"Connect",history:["Connect"],transactionStack:[]}),L9e={state:In,subscribeKey(t,e){return Ri(In,t,e)},pushTransactionStack(t){In.transactionStack.push(t)},popTransactionStack(t){const e=In.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),_t.goBack();break;case"cancel":s==null||s(),_t.goBack();break}},push(t,e){t!==In.view&&(In.view=t,In.history.push(t),In.data=e)},reset(t,e){In.view=t,In.history=[t],In.data=e},replace(t,e){In.history.at(-1)===t||(In.view=t,In.history[In.history.length-1]=t,In.data=e)},goBack(){var r;const t=Y.state.activeCaipAddress,e=_t.state.view==="ConnectingFarcaster",n=!t&&e;if(In.history.length>1){In.history.pop();const[s]=In.history.slice(-1);s&&(t&&s==="Connect"?In.view="Account":In.view=s)}else qn.close();(r=In.data)!=null&&r.wallet&&(In.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){hn.setFarcasterUrl(void 0,Y.state.activeChain);const a=tt.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=vC(Ct.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(In.history.length>1){In.history=In.history.slice(0,t+1);const[e]=In.history.slice(-1);e&&(In.view=e)}},goBackOrCloseModal(){_t.state.history.length>1?_t.goBack():qn.close()}},_t=za(L9e),uu=tr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),T$={state:uu,subscribe(t){return mo(uu,()=>t(uu))},setThemeMode(t){uu.themeMode=t;try{const e=tt.getAuthConnector();if(e){const n=T$.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:VI(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){uu.themeVariables={...uu.themeVariables,...t};try{const e=tt.getAuthConnector();if(e){const n=T$.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:VI(uu.themeVariables,uu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return vC(uu)}},lS=za(T$),vte={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},sn=tr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...vte},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),M9e={state:sn,subscribe(t){return mo(sn,()=>{t(sn)})},subscribeKey(t,e){return Ri(sn,t,e)},initialize(t){t.forEach(e=>{const n=Qe.getConnectedConnectorId(e);n&&tt.setConnectorId(n,e)})},setActiveConnector(t){t&&(sn.activeConnector=Q0(t))},setConnectors(t){t.filter(s=>!sn.allConnectors.some(i=>i.id===s.id&&tt.getConnectorName(i.name)===tt.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&sn.allConnectors.push(Q0(s))});const n=tt.getEnabledNamespaces(),r=tt.getEnabledConnectors(n);sn.connectors=tt.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(sn.filterByNamespaceMap).forEach(e=>{sn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{sn.filterByNamespaceMap[e]=!0}),tt.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){sn.filterByNamespaceMap[t]=e,tt.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=tt.getEnabledNamespaces(),e=tt.getEnabledConnectors(t),n=tt.areAllNamespacesEnabled();sn.connectors=tt.mergeMultiChainConnectors(e),n?gt.clearFilterByNamespaces():gt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(sn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return sn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(sn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=tt.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===pe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=tt.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===pe.CONNECTOR_ID.AUTH){const s=t,i=vC(Ct.state),o=lS.getSnapshot().themeMode,a=lS.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:VI(a,o)}),tt.setConnectors([t])}else tt.setConnectors([t])},getAuthConnector(t){var r;const e=t||Y.state.activeChain,n=sn.connectors.find(s=>s.id===pe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return sn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return sn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return sn.allConnectors.filter(r=>r.chain===Y.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=vC(Ct.state),r=lS.getSnapshot().themeMode,s=lS.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:VI(s,r)})},getConnectorsByNamespace(t){const e=sn.allConnectors.filter(n=>n.chain===t);return tt.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&ql(t)===$s.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=tt.getConnector(t.id,t.rdns);S9e.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,Y.state.activeChain),e?_t.push("ConnectingExternal",{connector:e}):_t.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?tt.getConnectorsByNamespace(t):tt.mergeMultiChainConnectors(sn.allConnectors)},setFilterByNamespace(t){sn.filterByNamespace=t,sn.connectors=tt.getConnectors(t),gt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(sn.activeConnectorIds={...sn.activeConnectorIds,[e]:t},Qe.setConnectedConnectorId(e,t))},removeConnectorId(t){sn.activeConnectorIds={...sn.activeConnectorIds,[t]:void 0},Qe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return sn.activeConnectorIds[t]},isConnected(t){return t?!!sn.activeConnectorIds[t]:Object.values(sn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){sn.activeConnectorIds={...vte}}},tt=za(M9e),U9e=1e3,kv={checkNamespaceConnectorId(t,e){return tt.getConnectorId(t)===e},isSocialProvider(t){return vi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&tt.setActiveConnector(e),s==null||s(ct.isMobile()&&t),r){const l=qn.subscribeKey("open",u=>{u||(_t.state.view!==r&&_t.replace(r),l(),a(new Error("Modal closed")))})}const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&qn.close(),c(),o(Bh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=Y.subscribeKey("activeCaipAddress",s=>{s&&(qn.close(),r(),e(Bh.parseCaipAddress(s)))});et.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=hn.state.socialWindow,i=hn.state.socialProvider,o=!1,a=null;const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(e&&qn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===pe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=tt.getAuthConnector();if(g&&!o){s&&(s.close(),hn.setSocialWindow(void 0,Y.state.activeChain),s=hn.state.socialWindow),o=!0;const y=f.data.resultUri;i&&dr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const m=Y.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:y,chainId:m==null?void 0:m.caipNetworkId}),i){Qe.setConnectedSocialProvider(i),await et.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const b=Y.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(Bh.parseCaipAddress(b)),dr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&dr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&dr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(hn.setSocialProvider(t,Y.state.activeChain),i=hn.state.socialProvider,dr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=qn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=tt.getAuthConnector();if(p&&!hn.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();hn.setFarcasterUrl(g,Y.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=tt.getAuthConnector();a=ct.returnOpenHref(`${pe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){hn.setSocialWindow(a,Y.state.activeChain),s=hn.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=qn.subscribeKey("open",c=>{c||(_t.state.view!==e&&_t.replace(e),a(),i(new Error("Modal closed")))})}const o=Y.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&qn.close(),o(),s(Bh.parseCaipAddress(a)))})})},async updateEmail(){const t=Qe.getConnectedConnectorId(Y.state.activeChain),e=tt.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==pe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return _t.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(qn.close(),clearInterval(i),o(),r({email:a}))},U9e),o=qn.subscribeKey("open",a=>{a||(_t.state.view!=="Connect"&&_t.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&ql(t)===$s.ACCOUNT_TYPES.EOA}};function Ete(){var r,s;const t=((r=Y.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Y.state.activeCaipNetwork)==null?void 0:s.id)||1,n=vi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function ql(t){var n;return(n=Y.getAccountData(t))==null?void 0:n.preferredAccountType}const _te={getConnectionStatus(t,e){const n=tt.state.activeConnectorIds[e],r=et.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=Ct.state.remoteFeatures)!=null&&a.multiWallet),n=tt.state.activeConnectorIds[t],r=et.getConnections(t),i=(et.state.recentConnections.get(t)??[]).filter(c=>tt.getConnectorById(c.connectorId)),o=_te.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},ip=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Fr=tr({...ip}),B9e={state:Fr,subscribeKey(t,e){return Ri(Fr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ct.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Fr.message=ip.message,Fr.variant=ip.variant,Fr.svg=ip.svg,Fr.open=ip.open,Fr.autoClose=ip.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ip.autoClose}){Fr.open?(Fr.open=!1,setTimeout(()=>{Fr.message=t,Fr.variant=n,Fr.svg=e,Fr.open=!0,Fr.autoClose=r},150)):(Fr.message=t,Fr.variant=n,Fr.svg=e,Fr.open=!0,Fr.autoClose=r)}},jh=B9e,Fn=tr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),j9e={state:Fn,subscribe(t){return mo(Fn,()=>t(Fn))},setLastNetworkInView(t){Fn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Fn.loading=!0;try{const r=await wt.fetchTransactions({account:t,cursor:Fn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Xv.filterSpamTransactions(r.data),i=Xv.filterByConnectedChain(s),o=[...Fn.transactions,...i];Fn.loading=!1,e==="coinbase"?Fn.coinbaseTransactions=Xv.groupTransactionsByYearAndMonth(Fn.coinbaseTransactions,r.data):(Fn.transactions=o,Fn.transactionsByYear=Xv.groupTransactionsByYearAndMonth(Fn.transactionsByYear,i)),Fn.empty=o.length===0,Fn.next=r.next?r.next:void 0}catch{const s=Y.state.activeChain;dr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Ct.state.projectId,cursor:Fn.next,isSmartAccount:ql(s)===$s.ACCOUNT_TYPES.SMART_ACCOUNT}}),jh.showError("Failed to fetch transactions"),Fn.loading=!1,Fn.empty=!0,Fn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Fn.next=void 0},resetTransactions(){Fn.transactions=[],Fn.transactionsByYear={},Fn.lastNetworkInView=void 0,Fn.loading=!1,Fn.empty=!1,Fn.next=void 0}},Xv=za(j9e,"API_ERROR"),Yt=tr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Kf;const F9e={state:Yt,subscribe(t){return mo(Yt,()=>t(Yt))},subscribeKey(t,e){return Ri(Yt,t,e)},_getClient(){return Yt._client},setClient(t){Yt._client=Q0(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);et.syncStorageConnections(e)},syncStorageConnections(t){const e=Qe.getConnections(),n=t??Array.from(Y.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Yt.recentConnections);i.set(r,s),Yt.recentConnections=i}},getConnections(t){return t?Yt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=et.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(ct.isTelegram()||ct.isSafari()&&ct.isIos()){if(Kf){await Kf,Kf=void 0;return}if(!ct.isPairingExpired(Yt==null?void 0:Yt.wcPairingExpiry)){const s=Yt.wcUri;Yt.wcUri=s;return}Kf=(e=(t=et._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),et.state.status="connecting",await Kf,Kf=void 0,Yt.wcPairingExpiry=void 0,et.state.status="connected"}else await((r=(n=et._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=et._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&Y.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=et._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||Y.state.activeChain;e&&tt.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;qn.setLoading(!0,Y.state.activeChain);const n=tt.getAuthConnector();n&&(hn.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Qe.setPreferredAccountTypes(Object.entries(Y.state.chains).reduce((s,[i,o])=>{const a=i,c=ql(a);return c!==void 0&&(s[a]=c),s},{})),await et.reconnectExternal(n),qn.setLoading(!1,Y.state.activeChain),dr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=et._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=et._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=et._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=et._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=et._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=et._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=et._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=et._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=et._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=et._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=et._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=et._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Yt.wcUri=void 0,Yt.wcPairingExpiry=void 0,Yt.wcLinking=void 0,Yt.recentWallet=void 0,Yt.status="disconnected",Xv.resetTransactions(),Qe.deleteWalletConnectDeepLink()},resetUri(){Yt.wcUri=void 0,Yt.wcPairingExpiry=void 0,Kf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=et.state;t&&Qe.setWalletConnectDeepLink(t),e&&Qe.setAppKitRecent(e),dr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=_t.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Yt.wcBasic=t},setUri(t){Yt.wcUri=t,Yt.wcPairingExpiry=ct.getPairingExpiry()},setWcLinking(t){Yt.wcLinking=t},setWcError(t){Yt.wcError=t,Yt.buffering=!1},setRecentWallet(t){Yt.recentWallet=t},setBuffering(t){Yt.buffering=t},setStatus(t){Yt.status=t},setIsSwitchingConnection(t){Yt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=et._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new J0("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Yt.connections);n.set(e,t),Yt.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=hn.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&kv.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await et.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=tt.getConnectorById(t.connectorId),s=t.connectorId===pe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await et.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await et.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=tt.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===pe.CONNECTOR_ID.AUTH,a=t.connectorId===pe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&kv.isSocialProvider(i)){const{address:d}=await kv.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){qn.open({view:"ConnectingFarcaster"})},onConnect(){_t.replace("ProfileWallets")}});c=d}else{const{address:d}=await kv.connectEmail({closeModalOnConnect:r,onOpen(){qn.open({view:"EmailLogin"})},onConnect(){_t.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await kv.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){qn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){_t.replace("ProfileWallets")}});c=d}else{const d=await et.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await et.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=hn.getCaipAddress(n);if(o){const{address:c}=Bh.parseCaipAddress(o);i=c}const a=_te.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await et.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await et.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},et=za(F9e),cy=tr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),hw={state:cy,subscribe(t){return mo(cy,()=>t(cy))},subscribeOpen(t){return Ri(cy,"open",t)},set(t){Object.assign(cy,{...cy,...t})}},z9e={async getTokenList(){var r;const t=Y.state.activeCaipNetwork,e=await wt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=Y.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(et==null?void 0:et.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await wt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await wt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=et.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await kU.getMyTokensWithBalance(t);return hn.setTokenBalance(e,Y.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Ete(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},vn=tr({tokenBalances:[],loading:!1}),W9e={state:vn,subscribe(t){return mo(vn,()=>t(vn))},subscribeKey(t,e){return Ri(vn,t,e)},setToken(t){t&&(vn.token=Q0(t))},setTokenAmount(t){vn.sendTokenAmount=t},setReceiverAddress(t){vn.receiverAddress=t},setReceiverProfileImageUrl(t){vn.receiverProfileImageUrl=t},setReceiverProfileName(t){vn.receiverProfileName=t},setNetworkBalanceInUsd(t){vn.networkBalanceInUSD=t},setLoading(t){vn.loading=t},async sendToken(){var t;try{switch(pn.setLoading(!0),(t=Y.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await pn.sendEvmToken();return;case"solana":await pn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{pn.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=Y.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=ql(t);if(!pn.state.sendTokenAmount||!pn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!pn.state.token)throw new Error("A token is required");(n=pn.state.token)!=null&&n.address?(dr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===$s.ACCOUNT_TYPES.SMART_ACCOUNT,token:pn.state.token.address,amount:pn.state.sendTokenAmount,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await pn.sendERC20Token({receiverAddress:pn.state.receiverAddress,tokenAddress:pn.state.token.address,sendTokenAmount:pn.state.sendTokenAmount,decimals:pn.state.token.quantity.decimals})):(dr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===$s.ACCOUNT_TYPES.SMART_ACCOUNT,token:pn.state.token.symbol||"",amount:pn.state.sendTokenAmount,network:((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await pn.sendNativeToken({receiverAddress:pn.state.receiverAddress,sendTokenAmount:pn.state.sendTokenAmount,decimals:pn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;vn.loading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?ct.getPlainAddress(r):void 0;if(vn.lastRetry&&!ct.isAllowedRetry(vn.lastRetry,30*vi.ONE_SEC_MS))return vn.loading=!1,[];try{if(s&&e&&n){const a=await kU.getMyTokensWithBalance();return vn.tokenBalances=a,vn.lastRetry=void 0,a}}catch(a){vn.lastRetry=Date.now(),t==null||t(a),jh.showError("Token Balance Unavailable")}finally{vn.loading=!1}return[]},fetchNetworkBalance(){if(vn.tokenBalances.length===0)return;const t=z9e.mapBalancesToSwapTokens(vn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Ete());e&&(vn.networkBalanceInUSD=e?u9e.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;_t.pushTransactionStack({});const e=t.receiverAddress,n=hn.state.address,r=et.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await et.sendTransaction({chainNamespace:pe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),dr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:ql("eip155")===$s.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=pn.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=et._getClient())==null||a.updateBalance("eip155"),pn.resetSend()},async sendERC20Token(t){_t.pushTransactionStack({onSuccess(){_t.replace("Account")}});const e=et.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(hn.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ct.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await et.writeContract({fromAddress:hn.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:p9e.getERC20Abi(n),chainNamespace:pe.CHAIN.EVM}),pn.resetSend()}},async sendSolanaToken(){var t;if(!pn.state.sendTokenAmount||!pn.state.receiverAddress)throw new Error("An amount and receiver address are required");_t.pushTransactionStack({onSuccess(){_t.replace("Account")}}),await et.sendTransaction({chainNamespace:"solana",to:pn.state.receiverAddress,value:pn.state.sendTokenAmount}),(t=et._getClient())==null||t.updateBalance("solana"),pn.resetSend()},resetSend(){vn.token=void 0,vn.sendTokenAmount=void 0,vn.receiverAddress=void 0,vn.receiverProfileImageUrl=void 0,vn.receiverProfileName=void 0,vn.loading=!1,vn.tokenBalances=[]}},pn=za(W9e),wO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},uS={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Pe=tr({chains:l9e(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),H9e={state:Pe,subscribe(t){return mo(Pe,()=>{t(Pe)})},subscribeKey(t,e){return Ri(Pe,t,e)},subscribeChainProp(t,e,n){let r;return mo(Pe.chains,()=>{var i;const s=n||Pe.activeChain;if(s){const o=(i=Pe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Qe.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Ct.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Pe.noAdapters=!0),Pe.noAdapters||(Pe.activeChain=a==null?void 0:a.namespace,Pe.activeCaipNetwork=i,Y.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Pe.activeChain&&hw.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=Qe.getPreferredAccountTypes()||{},f={...Ct.state.defaultAccountTypes,...h};Y.state.chains.set(u,{namespace:u,networkState:tr({...uS,caipNetwork:d==null?void 0:d[0]}),accountState:tr({...wO,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),Y.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Pe.activeChain===t){const r=Array.from(Pe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&Y.setActiveCaipNetwork(s)}}Pe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...uS,caipNetwork:r[0]},accountState:wO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),Y.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Pe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Pe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),Y.setRequestedCaipNetworks(r,t.chainNamespace),tt.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Pe.chains.get(t);if(n){const o=((r=Pe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&Y.setActiveCaipNetwork(n.caipNetworks[0]),Pe.chains.set(t,{...n,caipNetworks:a}),Y.setRequestedCaipNetworks(a||[],t),a.length===0&&tt.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Pe.chains.get(t);n&&(n.networkState={...n.networkState||uS,...e},Pe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Pe.chains.get(t);if(r){const s={...r.accountState||wO,...e};Pe.chains.set(t,{...r,accountState:s}),(Pe.chains.size===1||Pe.activeChain===t)&&(e.caipAddress&&(Pe.activeCaipAddress=e.caipAddress),hn.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Pe.chains.get(t);if(n){const r={...n.networkState||uS,...e};Pe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){Y.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Pe.activeChain=t;const e=t?Pe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Pe.activeCaipNetwork=n,Y.setChainNetworkData(t,{caipNetwork:n}),Qe.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),hw.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Pe.activeChain!==t.chainNamespace&&Y.setIsSwitchingNamespace(!0);const e=Pe.chains.get(t.chainNamespace);Pe.activeChain=t.chainNamespace,Pe.activeCaipNetwork=t,Y.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Pe.activeCaipAddress=void 0,Y.setAccountProp("caipAddress",Pe.activeCaipAddress,t.chainNamespace),e&&hn.replaceState(e.accountState),pn.resetSend(),hw.set({activeChain:Pe.activeChain,selectedNetworkId:(i=Pe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Qe.setActiveCaipNetworkId(t.caipNetworkId),!Y.checkIfSupportedNetwork(t.chainNamespace)&&Ct.state.enableNetworkSwitch&&!Ct.state.allowUnsupportedChain&&!et.state.wcBasic&&Y.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Pe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==Y.state.activeChain,n=(s=Y.getNetworkData(t))==null?void 0:s.caipNetwork,r=Y.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await Y.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=Y.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=Y.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Pe.activeCaipNetwork)==null?void 0:a.id)})),s=Y.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&qn.close()}catch{_t.goBack()}dr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Pe.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Pe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Pe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Pe.activeChain;if(e&&(n=e),!n)return;const r=(s=Pe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Pe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Pe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ct.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Pe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=Y.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){Y.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=Y.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));tt.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Pe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=Y.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Pe.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Pe.activeCaipNetwork},getActiveCaipAddress(){return Pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Pe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=Y.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Pe.activeCaipNetwork,r=Y.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Pe.activeChain)return!0;const e=Y.getRequestedCaipNetworks(Pe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){Y.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=GI.caipNetworkIdToNumber((r=Pe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Pe.activeChain;if(!e||!t)return!1;const n=Y.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){qn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&vi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=Y.getAccountProp("preferredAccountType",e);Pe.activeCaipAddress=void 0,Y.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),tt.removeConnectorId(e)},setIsSwitchingNamespace(t){Pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Pe.chains.forEach(s=>{pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Pe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=Y.state.chains.get(t))==null?void 0:e.accountState:hn.state},getNetworkData(t){var n;const e=t||Pe.activeChain;if(e)return(n=Y.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=Y.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=tt.state.filterByNamespace;return(t?[Pe.chains.get(t)]:Array.from(Pe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?Y.getRequestedCaipNetworks(t):Y.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Pe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Pe.lastConnectedSIWECaipNetwork}},Y=za(H9e),q9e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Cte=ct.getBlockchainApiUrl(),ji=tr({clientId:null,api:new F1({baseUrl:Cte,clientId:null}),supportedChains:{http:[],ws:[]}}),wt={state:ji,async get(t){const{st:e,sv:n}=wt.getSdkProperties(),r=Ct.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return ji.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Ct.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{ji.supportedChains.http.length||await wt.getSupportedNetworks()}catch{return!1}return ji.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await wt.get({path:"v1/supported-chains"});return ji.supportedChains=t,t}catch{return ji.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await wt.isNetworkSupported(e))return{avatar:"",name:""};const r=Qe.getIdentityFromCacheForAddress(t);if(r)return r;const s=await wt.get({path:`/v1/identity/${t}`,params:{sender:Y.state.activeCaipAddress?ct.getPlainAddress(Y.state.activeCaipAddress):void 0}});return Qe.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await wt.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?wt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await wt.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?wt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await wt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await wt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ji.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Ct.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await wt.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?wt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=wt.getSdkProperties();if(!await wt.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return wt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await wt.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return ji.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:vi.CONVERT_SLIPPAGE_TOLERANCE},projectId:Ct.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=wt.getSdkProperties();if(!await wt.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return wt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=wt.getSdkProperties();if(!await wt.isNetworkSupported((l=Y.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return jh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Qe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await wt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Qe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await wt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await wt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/profile/reverse/${t}`,params:{sender:hn.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await wt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await wt.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?ji.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await wt.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await ji.api.post({path:"/v1/generators/onrampurl",params:{projectId:Ct.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await wt.isNetworkSupported((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await wt.get({path:"/v1/onramp/options"})}catch{return q9e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await wt.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await ji.api.post({path:"/v1/onramp/quote",params:{projectId:Ct.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await wt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await wt.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?ji.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Ct.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){ji.clientId=t,ji.api=new F1({baseUrl:Cte,clientId:t})}},bO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return lm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},kU={async getMyTokensWithBalance(t){const e=hn.state.address,n=Y.state.activeCaipNetwork,r=tt.getConnectorId("eip155")===pe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Qe.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===pe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await wt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=bO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await et.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await et.walletGetAssets({account:t,chainFilter:[s]});if(!bO.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>bO.createBalance(l,e.caipNetworkId));return Qe.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Jc=tr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),G9e={state:Jc,replaceState(t){t&&Object.assign(Jc,Q0(t))},subscribe(t){return Y.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return Y.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){Y.setAccountProp("status",t,e)},getCaipAddress(t){return Y.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ct.getPlainAddress(t):void 0;e===Y.state.activeChain&&(Y.state.activeCaipAddress=t),Y.setAccountProp("caipAddress",t,e),Y.setAccountProp("address",n,e)},setBalance(t,e,n){Y.setAccountProp("balance",t,n),Y.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){Y.setAccountProp("profileName",t,e)},setProfileImage(t,e){Y.setAccountProp("profileImage",t,e)},setUser(t,e){Y.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Y.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Y.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Y.setAccountProp("currentTab",t,Y.state.activeChain)},setTokenBalance(t,e){t&&Y.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Y.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=Y.getAccountProp("addressLabels",n)||new Map;r.set(t,e),Y.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=Y.getAccountProp("addressLabels",e)||new Map;n.delete(t),Y.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){Y.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Y.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Y.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Y.setAccountProp("socialWindow",t?Q0(t):void 0,e)},setFarcasterUrl(t,e){Y.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Jc.balanceLoading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?ct.getPlainAddress(r):void 0;if(Jc.lastRetry&&!ct.isAllowedRetry(Jc.lastRetry,30*vi.ONE_SEC_MS))return Jc.balanceLoading=!1,[];try{if(s&&e&&n){const a=await kU.getMyTokensWithBalance();return hn.setTokenBalance(a,n),Jc.lastRetry=void 0,Jc.balanceLoading=!1,a}}catch(a){Jc.lastRetry=Date.now(),t==null||t(a),jh.showError("Token Balance Unavailable")}finally{Jc.balanceLoading=!1}return[]},resetAccount(t){Y.resetAccount(t)}},hn=za(G9e),V9e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=Y.state.activeCaipNetwork,r=_t.state.data;if(t.id===(n==null?void 0:n.id))return;const i=hn.getCaipAddress(Y.state.activeChain),o=t.chainNamespace!==Y.state.activeChain,a=hn.getCaipAddress(t.chainNamespace),l=tt.getConnectorId(Y.state.activeChain)===pe.CONNECTOR_ID.AUTH,u=pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?_t.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?_t.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):_t.push("SwitchNetwork",{...r,network:t})}},Fi=tr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),K9e={state:Fi,subscribe(t){return mo(Fi,()=>t(Fi))},subscribeKey(t,e){return Ri(Fi,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=Y.state.activeChain,r=e&&e!==n,s=(i=Y.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(et.state.wcBasic?gt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await gt.prefetch(),tt.setFilterByNamespace(t==null?void 0:t.namespace),qn.setLoading(!0,e),e&&r){const a=((o=Y.getNetworkData(e))==null?void 0:o.caipNetwork)||Y.getRequestedCaipNetworks(e)[0];a&&V9e.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=Y.state.noAdapters;Ct.state.manualWCControl||a&&!s?ct.isMobile()?_t.reset("AllWallets"):_t.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?_t.reset(t.view,t.data):s?_t.reset("Account"):_t.reset("Connect")}Fi.open=!0,hw.set({open:!0}),dr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Ct.state.enableEmbedded,e=!!Y.state.activeCaipAddress;Fi.open&&dr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Fi.open=!1,_t.reset("Connect"),qn.clearLoading(),t?e?_t.replace("Account"):_t.push("Connect"):hw.set({open:!1}),et.resetUri()},setLoading(t,e){e&&Fi.loadingNamespaceMap.set(e,t),Fi.loading=t,hw.set({loading:t})},clearLoading(){Fi.loadingNamespaceMap.clear(),Fi.loading=!1},shake(){Fi.shake||(Fi.shake=!0,setTimeout(()=>{Fi.shake=!1},500))}},qn=za(K9e),J7=2147483648,Y9e={convertEVMChainIdToCoinType(t){if(t>=J7)throw new Error("Invalid chainId");return(J7|t)>>>0}},aa=tr({suggestions:[],loading:!1}),Q9e={state:aa,subscribe(t){return mo(aa,()=>t(aa))},subscribeKey(t,e){return Ri(aa,t,e)},async resolveName(t){var e,n;try{return await wt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await wt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{aa.loading=!0,aa.suggestions=[];const e=await wt.getEnsNameSuggestions(t);return aa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],aa.suggestions}catch(e){const n=lx.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{aa.loading=!1}},async getNamesForAddress(t){try{if(!Y.state.activeCaipNetwork)return[];const n=Qe.getEnsFromCacheForAddress(t);if(n)return n;const r=await wt.reverseLookupEnsName({address:t});return Qe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=lx.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=Y.state.activeCaipNetwork,n=hn.state.address,r=tt.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");aa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});_t.pushTransactionStack({onCancel(){_t.replace("RegisterAccountName")}});const i=await et.signMessage(s);aa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=Y9e.convertEVMChainIdToCoinType(Number(o));await wt.registerEnsName({coinType:a,address:n,signature:i,message:s}),hn.setProfileName(t,e.chainNamespace),_t.replace("RegisterAccountNameSuccess")}catch(s){const i=lx.parseEnsApiError(s,`Error registering name ${t}`);throw _t.replace("RegisterAccountName"),new Error(i)}finally{aa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},lx=za(Q9e);let Yf=null;const Jd={getSIWX(){return Ct.state.siwx},async initializeIfEnabled(){var i;const t=Ct.state.siwx,e=Y.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(Y.checkIfSupportedNetwork(n))try{if(Yf&&await Yf,(await t.getSessions(`${n}:${r}`,s)).length)return;await qn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),dr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=et._getClient())==null?void 0:i.disconnect().catch(console.error)),_t.reset("Connect"),jh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Ct.state.siwx,e=ct.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork(),r=et._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();tt.getConnectorId(n.chainNamespace)===pe.CONNECTOR_ID.AUTH&&_t.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Y.setLastConnectedSIWECaipNetwork(n),qn.close(),dr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!qn.state.open||_t.state.view==="ApproveTransaction")&&await qn.open({view:"SIWXSignMessage"}),jh.showError("Error signing message"),dr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=Y.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ct.getPlainAddress(Y.getActiveCaipAddress())||""));s&&s.length>0?await Y.switchActiveNetwork(r):await et.disconnect()}else await et.disconnect()}else qn.close();qn.close(),dr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=Y.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ct.getPlainAddress(Y.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=Ct.state.siwx,e=ct.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=_t.state.view==="ApproveTransaction",r=_t.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Jd.getSIWX();if(!i||!s.includes(pe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=Y.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Jd.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Yf)return Yf;const r=Jd.getSIWX();return r?(Yf=r.addSession({data:t,message:e,signature:n}).finally(()=>{Yf=null}),Yf):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Jd.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(jh.showLoading("Authenticating...",{autoClose:!1}),hn.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),dr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Jd.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),dr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Jd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{jh.hide()}}return!0},getSIWXEventProperties(){var e;const t=Y.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:ql(t)===$s.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Io={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:pe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Uo={ConnectorExplorerIds:{[pe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[pe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[pe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Io.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Io.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Io.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Io.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Io.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Io.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Io.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Io.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Io.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Io.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Io.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[pe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[pe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[pe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[pe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[pe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[pe.CONNECTOR_ID.COINBASE]:"Coinbase",[pe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[pe.CONNECTOR_ID.LEDGER]:"Ledger",[pe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[pe.CONNECTOR_ID.INJECTED]:"INJECTED",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[pe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[pe.CONNECTOR_ID.AUTH]:"AUTH",[Io.CONNECTOR_TYPE_AUTH]:"AUTH"}},ro={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Io.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=Y.state.activeChain;return pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>tt.getConnectorId(e)===pe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},J9e=new AbortController,Ld={EmbeddedWalletAbortController:J9e,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},Z9e="rpc.walletconnect.org";function Z7(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const vO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],eE={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Z9e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:pe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${pe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return vO.includes(e)?Z7(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Uo.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>eE.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Dh(a.url,a.config))}),vO.includes(t.caipNetworkId)&&r.push(Dh(Z7(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Dh(a))}),wI(r)},extendWagmiTransports(t,e,n){if(vO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return wI([n,Dh(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:pe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Qe.getActiveCaipNetworkId(),n=Y.getAllRequestedCaipNetworks(),r=Array.from(((c=Y.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},X7={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},xs={set(t,e){vl.isClient&&localStorage.setItem(`${Ve.STORAGE_KEY}${t}`,e)},get(t){return vl.isClient?localStorage.getItem(`${Ve.STORAGE_KEY}${t}`):null},delete(t,e){vl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ve.STORAGE_KEY}${t}`))}},dS=30*1e3,vl={checkIfAllowedToTriggerEmail(){const t=xs.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<dS){const n=Math.ceil((dS-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=xs.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<dS)return Math.ceil((dS-e)/1e3)}return 0},checkIfRequestExists(t){return $s.NOT_SAFE_RPC_METHODS.includes(t.method)||$s.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(X7.transactionHash))||(t==null?void 0:t.match(X7.signedMessage)))?Ve.RPC_RESPONSE_TYPE_TX:Ve.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return $s.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},wr=E.object({message:E.string()});function $e(t){return E.literal(Ve[t])}const sR=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const X9e=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),e7e=E.object({email:E.string().email()}),t7e=E.object({otp:E.string()}),n7e=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(sR),rpcUrl:E.optional(E.string())}),r7e=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(sR),rpcUrl:E.optional(E.string())}),s7e=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),i7e=E.object({email:E.string().email()}),o7e=E.object({otp:E.string()}),a7e=E.object({otp:E.string()}),c7e=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),l7e=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),u7e=E.object({type:E.string()}),d7e=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),h7e=E.object({url:E.string()}),f7e=E.object({userName:E.string()}),p7e=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([$s.ACCOUNT_TYPES.EOA,$s.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(sR)}),g7e=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),m7e=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([$s.ACCOUNT_TYPES.EOA,$s.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(sR)}),y7e=E.object({uri:E.string()}),w7e=E.object({isConnected:E.boolean()}),b7e=E.object({chainId:E.string().or(E.number())}),v7e=E.object({chainId:E.string().or(E.number())}),E7e=E.object({newEmail:E.string().email()}),_7e=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const C7e=E.object({version:E.string().optional()}),A7e=E.object({type:E.string(),address:E.string()}),S7e=E.any(),x7e=E.object({method:E.literal("eth_accounts")}),I7e=E.object({method:E.literal("eth_blockNumber")}),N7e=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),T7e=E.object({method:E.literal("eth_chainId")}),R7e=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),P7e=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),k7e=E.object({method:E.literal("eth_gasPrice")}),O7e=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),D7e=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),$7e=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),L7e=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),M7e=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),U7e=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),B7e=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),j7e=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),F7e=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),z7e=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),W7e=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),H7e=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),q7e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),G7e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),V7e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),K7e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),Y7e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),Q7e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),J7e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),Z7e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),X7e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),eze=E.object({method:E.literal("eth_newBlockFilter")}),tze=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),nze=E.object({method:E.literal("eth_newPendingTransactionFilter")}),rze=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),sze=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),ize=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),ez=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),oze=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),aze=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),cze=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),lze=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),uze=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),dze=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),hze=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),fze=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),pze=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),gze=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),mze=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),yze=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),tz=E.object({token:E.string()}),Le=E.object({id:E.string().optional()}),Ov={appEvent:Le.extend({type:$e("APP_SWITCH_NETWORK"),payload:X9e}).or(Le.extend({type:$e("APP_CONNECT_EMAIL"),payload:e7e})).or(Le.extend({type:$e("APP_CONNECT_DEVICE")})).or(Le.extend({type:$e("APP_CONNECT_OTP"),payload:t7e})).or(Le.extend({type:$e("APP_CONNECT_SOCIAL"),payload:n7e})).or(Le.extend({type:$e("APP_GET_FARCASTER_URI")})).or(Le.extend({type:$e("APP_CONNECT_FARCASTER")})).or(Le.extend({type:$e("APP_GET_USER"),payload:E.optional(r7e)})).or(Le.extend({type:$e("APP_GET_SOCIAL_REDIRECT_URI"),payload:s7e})).or(Le.extend({type:$e("APP_SIGN_OUT")})).or(Le.extend({type:$e("APP_IS_CONNECTED"),payload:E.optional(tz)})).or(Le.extend({type:$e("APP_GET_CHAIN_ID")})).or(Le.extend({type:$e("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Le.extend({type:$e("APP_INIT_SMART_ACCOUNT")})).or(Le.extend({type:$e("APP_SET_PREFERRED_ACCOUNT"),payload:u7e})).or(Le.extend({type:$e("APP_RPC_REQUEST"),payload:ez.or(yze).or(x7e).or(I7e).or(N7e).or(T7e).or(R7e).or(P7e).or(k7e).or(O7e).or(D7e).or($7e).or(L7e).or(M7e).or(U7e).or(B7e).or(j7e).or(F7e).or(z7e).or(W7e).or(H7e).or(q7e).or(G7e).or(V7e).or(K7e).or(Y7e).or(Q7e).or(J7e).or(Z7e).or(X7e).or(eze).or(tze).or(nze).or(rze).or(sze).or(ize).or(ez).or(oze).or(aze).or(cze).or(lze).or(uze).or(dze).or(fze).or(hze).or(pze).or(gze).or(mze).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Le.extend({type:$e("APP_UPDATE_EMAIL"),payload:i7e})).or(Le.extend({type:$e("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:o7e})).or(Le.extend({type:$e("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:a7e})).or(Le.extend({type:$e("APP_SYNC_THEME"),payload:c7e})).or(Le.extend({type:$e("APP_SYNC_DAPP_DATA"),payload:l7e})).or(Le.extend({type:$e("APP_RELOAD")})).or(Le.extend({type:$e("APP_RPC_ABORT")})),frameEvent:Le.extend({type:$e("FRAME_SWITCH_NETWORK_ERROR"),payload:wr}).or(Le.extend({type:$e("FRAME_SWITCH_NETWORK_SUCCESS"),payload:v7e})).or(Le.extend({type:$e("FRAME_CONNECT_EMAIL_SUCCESS"),payload:d7e})).or(Le.extend({type:$e("FRAME_CONNECT_EMAIL_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:h7e})).or(Le.extend({type:$e("FRAME_GET_FARCASTER_URI_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:f7e})).or(Le.extend({type:$e("FRAME_CONNECT_FARCASTER_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_CONNECT_OTP_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_CONNECT_OTP_SUCCESS")})).or(Le.extend({type:$e("FRAME_CONNECT_DEVICE_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Le.extend({type:$e("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:p7e})).or(Le.extend({type:$e("FRAME_CONNECT_SOCIAL_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_GET_USER_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_GET_USER_SUCCESS"),payload:m7e})).or(Le.extend({type:$e("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:y7e})).or(Le.extend({type:$e("FRAME_SIGN_OUT_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_SIGN_OUT_SUCCESS")})).or(Le.extend({type:$e("FRAME_IS_CONNECTED_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_IS_CONNECTED_SUCCESS"),payload:w7e})).or(Le.extend({type:$e("FRAME_GET_CHAIN_ID_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_GET_CHAIN_ID_SUCCESS"),payload:b7e})).or(Le.extend({type:$e("FRAME_RPC_REQUEST_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_RPC_REQUEST_SUCCESS"),payload:S7e})).or(Le.extend({type:$e("FRAME_SESSION_UPDATE"),payload:tz})).or(Le.extend({type:$e("FRAME_UPDATE_EMAIL_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_UPDATE_EMAIL_SUCCESS"),payload:g7e})).or(Le.extend({type:$e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Le.extend({type:$e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:E7e})).or(Le.extend({type:$e("FRAME_SYNC_THEME_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_SYNC_THEME_SUCCESS")})).or(Le.extend({type:$e("FRAME_SYNC_DAPP_DATA_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Le.extend({type:$e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:_7e})).or(Le.extend({type:$e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:A7e})).or(Le.extend({type:$e("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_READY"),payload:C7e})).or(Le.extend({type:$e("FRAME_RELOAD_ERROR"),payload:wr})).or(Le.extend({type:$e("FRAME_RELOAD_SUCCESS")}))};function EO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function wze({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=pe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(_9e);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class bze{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=pe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!EO(Ve.FRAME_EVENT_KEY,u))return;const d=Ov.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}vl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{vl.isClient&&window.addEventListener("message",({data:a})=>{if(!EO(Ve.FRAME_EVENT_KEY,a))return;const c=Ov.frameEvent.parse(a);o(c)})},onAppEvent:o=>{vl.isClient&&window.addEventListener("message",({data:a})=>{if(!EO(Ve.APP_EVENT_KEY,a))return;const c=Ov.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(vl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");Ov.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(vl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Ov.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),vl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=wze({projectId:e,chainId:r,version:A9e,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class vze{constructor(e){var i;const n=vm({level:C9e}),{logger:r,chunkLoggerController:s}=DT({opts:n});this.logger=Us(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Eze{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new vze(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new bze({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!xs.get(Ve.EMAIL_LOGIN_USED_KEY)}getEmail(){return xs.get(Ve.EMAIL)}getUsername(){return xs.get(Ve.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ve.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{vl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ve.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ve.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ve.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ve.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ve.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ve.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ve.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ve.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ve.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Ve.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ve.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if($s.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Ve.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:$s.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{$s.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Ve.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ve.APP_SYNC_DAPP_DATA,Ve.APP_SYNC_THEME,Ve.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ve.APP_CONNECT_EMAIL,Ve.APP_CONNECT_DEVICE,Ve.APP_CONNECT_OTP,Ve.APP_CONNECT_SOCIAL,Ve.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var b,v,C;y.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((C=y.payload)==null?void 0:C.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){xs.set(Ve.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){xs.set(Ve.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&xs.set(Ve.EMAIL,e),xs.set(Ve.EMAIL_LOGIN_USED_KEY,"true"),xs.delete(Ve.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){xs.delete(Ve.EMAIL_LOGIN_USED_KEY),xs.delete(Ve.EMAIL),xs.delete(Ve.LAST_USED_CHAIN_KEY),xs.delete(Ve.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&xs.set(Ve.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=xs.get(Ve.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){xs.set(Ve.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Bh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class fw{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return fw.instance||(fw.instance=new Eze({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),fw.instance}}const _ze={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},nz={filterOutDuplicatesByRDNS(t){const e=Ct.state.enableEIP6963?tt.state.connectors:[],n=Qe.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ct.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=tt.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Qe.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=tt.state,{featuredWalletIds:n}=Ct.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Ct.state.features)==null?void 0:c.connectMethodsOrder),r=e||tt.state.connectors;if(n)return n;const{injected:s,announced:i}=ux.getConnectorsByType(r,gt.state.recommended,gt.state.featured),o=s.filter(ux.showConnector),a=i.filter(ux.showConnector);return o.length||a.length?["wallet","email","social"]:_ze.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&gt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&gt.state.excludedWallets.some(r=>ro.isLowerCaseMatch(r.name,t.name));return e||n}},ux={getConnectorsByType(t,e,n){const{customWallets:r}=Ct.state,s=Qe.getRecentWallets(),i=nz.filterOutDuplicateWallets(e),o=nz.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&gt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&gt.state.excludedWallets.some(i=>ro.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ct.isMobile()||ct.isMobile()&&!e&&!et.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(Y.state.chains.values()).some(n=>tt.getConnectorId(n.namespace)===pe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Ct.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:Ct.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),f=new Set(h.map(y=>y.type)),p=c.filter(y=>f.has(y)).map(y=>({type:y,isEnabled:!0})),g=h.filter(({type:y})=>!p.some(({type:b})=>b===y));return Array.from(new Set([...p,...g].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ct.isMobile())return{accounts:[],chainId:void 0};if(t.id===pe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Zu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Zu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Zu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const dx={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([dx.getAddresses(t),dx.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:dx.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Uo.NetworkImageIds[e.id]]}]})}},ly={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function z1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const rz=z1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),sz=z1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});z1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});z1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});z1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const Cze={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},vg={getMethodsByChainNamespace(t){return Cze[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case rz.caipNetworkId:u.chains.push(rz.deprecatedCaipNetworkId);break;case sz.caipNetworkId:u.chains.push(sz.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await lx.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=vg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(vg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>ct.isCaipAddress(d)).map(d=>Bh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Bh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class Aze{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case pe.CHAIN.EVM:await this.syncEVMConnections(e);break;case pe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case pe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=vg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await ux.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==pe.CONNECTOR_ID.AUTH&&a.id!==pe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=vg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,y,m;if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const b=vg.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>ct.createAccount(pe.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:pe.CHAIN.BITCOIN,publicKey:((h=u[ly.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[ly.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[ly.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:pe.CHAIN.BITCOIN,publicKey:((g=u[ly.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((y=u[ly.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.path)??"",address:((m=u[ly.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>ro.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>ro.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>ro.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>ro.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>ro.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class Ate{constructor({provider:e,namespace:n}){this.id=pe.CONNECTOR_ID.WALLET_CONNECT,this.name=Uo.ConnectorNamesMap[pe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Uo.ConnectorImageIds[pe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=Y.getCaipNetworks.bind(Y),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Ct.state.universalProviderConfigOverride,s=vg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Jd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Sze})}}const Sze=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],xze=[pe.CONNECTOR_ID.AUTH,pe.CONNECTOR_ID.WALLET_CONNECT];class Ize{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>Y.getCaipNetworks(n),this.getConnectorId=n=>tt.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new Aze({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:pe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Uo.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!ro.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){hn.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=ql(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Ate);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ct.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ct.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ct.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&ro.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=ct.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),ro.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?dx.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),ro.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(xze.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function Nze(t){let e=[],n,r;function s(a){return GI.parseEvmChainId(a)||1}function i(){var a;return n||(n=fw.getInstance({projectId:t.options.projectId,chainId:(a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?sp.open(Ld.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?sp.open(Ld.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&sp.open(Ld.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Ld.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>Y.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const y=GI.parseEvmChainId(c.getLastUsedChainId()||""),m=(g=t.chains)==null?void 0:g[0].id;if(l=y||m,!l)throw new Error("ChainId not found in provider")}const u=ql("eip155"),{address:d,chainId:h,accounts:f}=await Jd.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:pe.CHAIN.EVM});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:pe.CONNECTOR_ID.AUTH,name:pe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:pe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=fw.getInstance({projectId:t.options.projectId,chainId:(c=Y.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Ld.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?sp.open(Ld.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?sp.open(Ld.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&sp.open(Ld.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>Y.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=Y.state.activeChain===pe.CHAIN.EVM;if(pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>tt.getConnectorId(h)===pe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Bl(new Error("chain not found on connector."));const d=await this.getProvider(),h=ql("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Bl(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Wu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}OU.type="walletConnect";function OU(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:OU.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=Y.getCaipNetworks(),y=await this.getProvider();if(!y)throw new Kd;a||(a=this.onDisplayUri,y.on("display_uri",a));const m=await this.isChainsStale();y.session&&m&&await y.disconnect();const b=Ct.state.universalProviderConfigOverride;if(!y.session||m){const I=vg.createNamespaces(g,b);await y.connect({optionalNamespaces:I,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),C=await this.getChainId(),A=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,S=A==null?void 0:A.some(I=>Number(I.split(":")[1])===C);let x=1;S?x=C:A!=null&&A[0]&&(x=Number(A[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const R=b==null?void 0:b.defaultChain;return y.setDefaultChain(R??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Wr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var y,m,b;const d=await this.getProvider();if(!((y=d==null?void 0:d.session)!=null&&y.namespaces))return[];const h=(b=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[pe.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const C=v==null?void 0:v.toLowerCase();return p.has(C)?!1:(p.add(C),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=Qe.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=Qe.getStoredActiveCaipNetworkId(),m=h?e.getCaipNetworks(h):[],b=m==null?void 0:m.find(v=>v.id===y);b&&b.chainNamespace===pe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,y,m,b;const d=(g=e.getCaipNetwork(pe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(m=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[pe.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:b[0],p=Y.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,m,b;const f=await this.getProvider();if(!f)throw new Kd;const p=Y.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Bl(new B_);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Ze(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const C=v;if(/(?:user rejected)/iu.test(C.message))throw new Wr(C);try{let A;d!=null&&d.blockExplorerUrls?A=d.blockExplorerUrls:A=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const S=((b=(m=p.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:A,chainId:Ze(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:S};await f.request({method:"wallet_addEthereumChain",params:[x]});const R=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...R,h]),{...p,id:p.id}}catch(A){throw new Wr(A)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Wu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(Y.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[pe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Dv=tr({pendingTransactions:0}),iz={state:Dv,subscribeKey(t,e){return Ri(Dv,t,e)},increase(t){Dv[t]+=1},decrease(t){Dv[t]-=1},reset(t){Dv[t]=0}};function Tze(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function Rze(t){if(ct.isSafeApp()){const{safe:e}=await Nr(async()=>{const{safe:n}=await import("./index-ClUkHm1l.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Pze(t){try{const{coinbaseWallet:e}=await Nr(async()=>{const{coinbaseWallet:n}=await import("./index-ClUkHm1l.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const kze={enable:!1,pollingInterval:3e4};class Oze extends Ize{constructor(e){const n=eE.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=pe.CHAIN.EVM,this.adapterType=pe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...kze,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===pe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ct.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=aw(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ct.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=aw(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===pe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=eE.getCaipNetworkId(s);i?n[s.id]=eE.extendWagmiTransports(s,e.projectId,i):n[s.id]=eE.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=t0e({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=$we(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),iz.increase("pendingTransactions")}});const e=iz.subscribeKey("pendingTransactions",n=>{var r;n>=pe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){EQ(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),_Q(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===pe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:Qe.getConnectedSocialProvider(),username:Qe.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Pze(this.wagmiConfig.connectors);s&&n.push(s)}const r=await Rze(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(OU(e,n)),e.enableEIP6963!==!1&&r.push(lT({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(Nze({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Uo.ConnectorNamesMap[r.id]??r.name,imageId:Uo.ConnectorImageIds[r.id],type:Uo.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await kwe(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=aw(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Rwe(this.wagmiConfig,s);const i=await Pwe(this.wagmiConfig,s);return await AQ(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(GI.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await SQ(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await Cwe(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return nye(e.value,e.decimals)}formatUnits(e){return lm(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===pe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===pe.CONNECTOR_ID.AUTH||e.id===pe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Uo.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Uo.ConnectorNamesMap[e.id]??e.name,imageId:Uo.ConnectorImageIds[e.id],type:Uo.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){CQ(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=sc(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ct.isSafeApp()&&n===pe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await HS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await HS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await f4(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,y;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===pe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const m=[...u.accounts].sort((b,v)=>ro.isLowerCaseMatch(b,r)?-1:ro.isLowerCaseMatch(v,r)?1:0);return(y=this.wagmiConfig)==null||y.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:m,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:m[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await HS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await BD(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=Qe.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await xwe(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});Qe.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=sc(this.wagmiConfig).find(i=>ro.isLowerCaseMatch(i.connector.id,e.id));return await MD(this.wagmiConfig,{connector:n}),Ct.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=sc(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await MD(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await f4(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=sc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=Tze(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=sc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=sc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=sc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Uo.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=sc(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(Y.state.activeChain==="eip155")return;BD(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Ate({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const Ste={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},xte="7c65f27254d6ddd24cf7eedf2685c4fb",Dze={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},Ite=new Oze({networks:[ste,Ste],projectId:xte,ssr:!1});kje({adapters:[Ite],networks:[ste,Ste],projectId:xte,metadata:Dze,features:{analytics:!1}});const Nte=()=>{if(!Ux)throw new Error("[FIREBASE] Database not initialized");return Ux},Zg=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,KI=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;const n=new Date().toISOString(),r=Nte(),s=To(r,`leaderboard/${t}`),i=await Ny(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await Iy(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Zg(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},$ze=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Zg(e),redPlayer:Zg(n)}),await KI(e,t==="blue"?"win":t==="red"?"loss":"draw"),await KI(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},Tte=async(t=20)=>{try{const e=Nte(),n=To(e,"leaderboard"),r=await Ny(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Lze=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Nr(async()=>{const{default:r}=await Promise.resolve().then(()=>Mb);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class DU extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Mze extends DU{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oz extends DU{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class az extends DU{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var R$;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(R$||(R$={}));var Uze=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class Bze{constructor(e,{headers:n={},customFetch:r,region:s=R$.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Lze(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Uze(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region);const l=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,l.searchParams.set("forceFunctionRegion",c));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(l.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(g=>{throw new Mze(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new oz(d);if(!d.ok)throw new az(d);let f=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof az||s instanceof oz?s.context:void 0}}})}}var to={},$U={},iR={},W1={},oR={},aR={},jze=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},X0=jze();const Fze=X0.fetch,Rte=X0.fetch.bind(X0),Pte=X0.Headers,zze=X0.Request,Wze=X0.Response,Mb=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pte,Request:zze,Response:Wze,default:Rte,fetch:Fze},Symbol.toStringTag,{value:"Module"})),Hze=yL(Mb);var cR={};Object.defineProperty(cR,"__esModule",{value:!0});let qze=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};cR.default=qze;var kte=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(aR,"__esModule",{value:!0});const Gze=kte(Hze),Vze=kte(cR);let Kze=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Gze.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=m:u=JSON.parse(m))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new Vze.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};aR.default=Kze;var Yze=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oR,"__esModule",{value:!0});const Qze=Yze(aR);let Jze=class extends Qze.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};oR.default=Jze;var Zze=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(W1,"__esModule",{value:!0});const Xze=Zze(oR);let eWe=class extends Xze.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};W1.default=eWe;var tWe=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(iR,"__esModule",{value:!0});const $v=tWe(W1);let nWe=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new $v.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new $v.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new $v.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new $v.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new $v.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};iR.default=nWe;var lR={},uR={};Object.defineProperty(uR,"__esModule",{value:!0});uR.version=void 0;uR.version="0.0.0-automated";Object.defineProperty(lR,"__esModule",{value:!0});lR.DEFAULT_HEADERS=void 0;const rWe=uR;lR.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${rWe.version}`};var Ote=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($U,"__esModule",{value:!0});const sWe=Ote(iR),iWe=Ote(W1),oWe=lR;let aWe=class Dte{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},oWe.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new sWe.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Dte(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new iWe.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};$U.default=aWe;var Ub=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(to,"__esModule",{value:!0});to.PostgrestError=to.PostgrestBuilder=to.PostgrestTransformBuilder=to.PostgrestFilterBuilder=to.PostgrestQueryBuilder=to.PostgrestClient=void 0;const $te=Ub($U);to.PostgrestClient=$te.default;const Lte=Ub(iR);to.PostgrestQueryBuilder=Lte.default;const Mte=Ub(W1);to.PostgrestFilterBuilder=Mte.default;const Ute=Ub(oR);to.PostgrestTransformBuilder=Ute.default;const Bte=Ub(aR);to.PostgrestBuilder=Bte.default;const jte=Ub(cR);to.PostgrestError=jte.default;var cWe=to.default={PostgrestClient:$te.default,PostgrestQueryBuilder:Lte.default,PostgrestFilterBuilder:Mte.default,PostgrestTransformBuilder:Ute.default,PostgrestBuilder:Bte.default,PostgrestError:jte.default};const{PostgrestClient:lWe,PostgrestQueryBuilder:AJe,PostgrestFilterBuilder:SJe,PostgrestTransformBuilder:xJe,PostgrestBuilder:IJe,PostgrestError:NJe}=cWe;function uWe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const dWe=uWe(),hWe="2.11.15",fWe=`realtime-js/${hWe}`,pWe="1.0.0",Fte=1e4,gWe=1e3;var BE;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(BE||(BE={}));var Ks;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ks||(Ks={}));var pc;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pc||(pc={}));var P$;(function(t){t.websocket="websocket"})(P$||(P$={}));var pp;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(pp||(pp={}));class mWe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class zte{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var zn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(zn||(zn={}));const cz=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=yWe(o,t,e,s),i),{})},yWe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Wte(i,o):k$(o)},Wte=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return EWe(e,n)}switch(t){case zn.bool:return wWe(e);case zn.float4:case zn.float8:case zn.int2:case zn.int4:case zn.int8:case zn.numeric:case zn.oid:return bWe(e);case zn.json:case zn.jsonb:return vWe(e);case zn.timestamp:return _We(e);case zn.abstime:case zn.date:case zn.daterange:case zn.int4range:case zn.int8range:case zn.money:case zn.reltime:case zn.text:case zn.time:case zn.timestamptz:case zn.timetz:case zn.tsrange:case zn.tstzrange:return k$(e);default:return k$(e)}},k$=t=>t,wWe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},bWe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},vWe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},EWe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Wte(e,a))}return t},_We=t=>typeof t=="string"?t.replace(" ","T"):t,Hte=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class _O{constructor(e,n,r={},s=Fte){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var lz;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(lz||(lz={}));class jE{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jE.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=jE.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=jE.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var uz;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(uz||(uz={}));var dz;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(dz||(dz={}));var yu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(yu||(yu={}));class LU{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ks.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new _O(this,pc.join,this.params,this.timeout),this.rejoinTimer=new zte(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ks.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ks.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ks.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ks.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pc.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new jE(this),this.broadcastEndpointURL=Hte(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ks.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(yu.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(yu.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(yu.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const y=h[g],{filter:{event:m,schema:b,table:v,filter:C}}=y,A=u&&u[g];if(A&&A.event===m&&A.schema===b&&A.table===v&&A.filter===C)p.push(Object.assign(Object.assign({},y),{id:A.id}));else{this.unsubscribe(),this.state=Ks.errored,e==null||e(yu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(yu.SUBSCRIBED);return}}).receive("error",u=>{this.state=Ks.errored,e==null||e(yu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(yu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ks.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pc.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new _O(this,pc.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new _O(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=pc;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,y,m,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,A=(p=f.filter)===null||p===void 0?void 0:p.event;return C&&((g=n.ids)===null||g===void 0?void 0:g.includes(C))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const C=(b=(m=f==null?void 0:f.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return C==="*"||C===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:m,type:b,errors:v}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:m,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Ks.closed}_isJoined(){return this.state===Ks.joined}_isJoining(){return this.state===Ks.joining}_isLeaving(){return this.state===Ks.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&LU.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pc.close,{},e)}_onError(e){this._on(pc.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ks.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=cz(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=cz(e.columns,e.old_record)),n}}const hz=()=>{},CWe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class AWe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fte,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hz,this.ref=0,this.logger=hz,this.conn=null,this.sendBuffer=[],this.serializer=new mWe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Nr(async()=>{const{default:c}=await Promise.resolve().then(()=>Mb);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${P$.websocket}`,this.httpEndpoint=Hte(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zte(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=dWe),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pWe}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case BE.connecting:return pp.Connecting;case BE.open:return pp.Open;case BE.closing:return pp.Closing;default:return pp.Closed}}isConnected(){return this.connectionState()===pp.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new LU(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:fWe};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(pc.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(gWe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(pc.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([CWe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class MU extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function is(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class SWe extends MU{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class O$ extends MU{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var xWe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const qte=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Nr(async()=>{const{default:r}=await Promise.resolve().then(()=>Mb);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},IWe=()=>xWe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Nr(()=>Promise.resolve().then(()=>Mb),void 0)).Response:Response}),D$=t=>{if(Array.isArray(t))return t.map(n=>D$(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=D$(r)}),e};var Am=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const CO=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NWe=(t,e,n)=>Am(void 0,void 0,void 0,function*(){const r=yield IWe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new SWe(CO(s),t.status||500))}).catch(s=>{e(new O$(CO(s),s))}):e(new O$(CO(t),t))}),TWe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function H1(t,e,n,r,s,i){return Am(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,TWe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>NWe(c,a,r))})})}function YI(t,e,n,r){return Am(this,void 0,void 0,function*(){return H1(t,"GET",e,n,r)})}function Zd(t,e,n,r,s){return Am(this,void 0,void 0,function*(){return H1(t,"POST",e,r,s,n)})}function RWe(t,e,n,r,s){return Am(this,void 0,void 0,function*(){return H1(t,"PUT",e,r,s,n)})}function PWe(t,e,n,r){return Am(this,void 0,void 0,function*(){return H1(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Gte(t,e,n,r,s){return Am(this,void 0,void 0,function*(){return H1(t,"DELETE",e,r,s,n)})}var zi=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const kWe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fz={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class OWe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=qte(s)}uploadOrUpdate(e,n,r,s){return zi(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},fz),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(is(i))return{data:null,error:i};throw i}})}upload(e,n,r){return zi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return zi(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:fz.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(is(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return zi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Zd(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new MU("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}update(e,n,r){return zi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return zi(this,void 0,void 0,function*(){try{return{data:yield Zd(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}copy(e,n,r){return zi(this,void 0,void 0,function*(){try{return{data:{path:(yield Zd(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return zi(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Zd(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return zi(this,void 0,void 0,function*(){try{const s=yield Zd(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}download(e,n){return zi(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield YI(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(is(a))return{data:null,error:a};throw a}})}info(e){return zi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield YI(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:D$(r),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}exists(e){return zi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield PWe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(is(r)&&r instanceof O$){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return zi(this,void 0,void 0,function*(){try{return{data:yield Gte(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(is(n))return{data:null,error:n};throw n}})}list(e,n,r){return zi(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},kWe),n),{prefix:e||""});return{data:yield Zd(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const DWe="2.7.1",$We={"X-Client-Info":`storage-js/${DWe}`};var uy=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class LWe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},$We),n),this.fetch=qte(r)}listBuckets(){return uy(this,void 0,void 0,function*(){try{return{data:yield YI(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(is(e))return{data:null,error:e};throw e}})}getBucket(e){return uy(this,void 0,void 0,function*(){try{return{data:yield YI(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(is(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return uy(this,void 0,void 0,function*(){try{return{data:yield Zd(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return uy(this,void 0,void 0,function*(){try{return{data:yield RWe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}emptyBucket(e){return uy(this,void 0,void 0,function*(){try{return{data:yield Zd(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(is(n))return{data:null,error:n};throw n}})}deleteBucket(e){return uy(this,void 0,void 0,function*(){try{return{data:yield Gte(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(is(n))return{data:null,error:n};throw n}})}}class MWe extends LWe{constructor(e,n={},r){super(e,n,r)}from(e){return new OWe(this.url,this.headers,e,this.fetch)}}const UWe="2.50.5";let tE="";typeof Deno<"u"?tE="deno":typeof document<"u"?tE="web":typeof navigator<"u"&&navigator.product==="ReactNative"?tE="react-native":tE="node";const BWe={"X-Client-Info":`supabase-js-${tE}/${UWe}`},jWe={headers:BWe},FWe={schema:"public"},zWe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WWe={};var HWe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const qWe=t=>{let e;return t?e=t:typeof fetch>"u"?e=Rte:e=fetch,(...n)=>e(...n)},GWe=()=>typeof Headers>"u"?Pte:Headers,VWe=(t,e,n)=>{const r=qWe(n),s=GWe();return(i,o)=>HWe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var KWe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function YWe(t){return t.endsWith("/")?t:t+"/"}function QWe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>KWe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const Vte="2.70.0",_y=30*1e3,$$=3,AO=$$*_y,JWe="http://localhost:9999",ZWe="supabase.auth.token",XWe={"X-Client-Info":`gotrue-js/${Vte}`},L$="X-Supabase-Api-Version",Kte={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eHe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tHe=6e5;class UU extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class nHe extends UU{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function rHe(t){return Nt(t)&&t.name==="AuthApiError"}class Yte extends UU{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Df extends UU{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Hd extends Df{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sHe(t){return Nt(t)&&t.name==="AuthSessionMissingError"}class hS extends Df{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fS extends Df{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pS extends Df{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iHe(t){return Nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class pz extends Df{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class M$ extends Df{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function SO(t){return Nt(t)&&t.name==="AuthRetryableFetchError"}class gz extends Df{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class FE extends Df{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const QI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mz=` 	
\r=`.split(""),oHe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<mz.length;e+=1)t[mz[e].charCodeAt(0)]=-2;for(let e=0;e<QI.length;e+=1)t[QI[e].charCodeAt(0)]=e;return t})();function yz(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(QI[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(QI[r]),e.queuedBits-=6}}function Qte(t,e,n){const r=oHe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function wz(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{lHe(o,r,n)};for(let o=0;o<t.length;o+=1)Qte(t.charCodeAt(o),s,i);return e.join("")}function aHe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function cHe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}aHe(r,e)}}function lHe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function uHe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Qte(t.charCodeAt(s),n,r);return new Uint8Array(e)}function dHe(t){const e=[];return cHe(t,n=>e.push(n)),new Uint8Array(e)}function hHe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>yz(s,n,r)),yz(null,n,r),e.join("")}function fHe(t){return Math.round(Date.now()/1e3)+t}function pHe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const tc=()=>typeof window<"u"&&typeof document<"u",Qf={tested:!1,writable:!1},zE=()=>{if(!tc())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qf.tested)return Qf.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Qf.tested=!0,Qf.writable=!0}catch{Qf.tested=!0,Qf.writable=!1}return Qf.writable};function gHe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Jte=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Nr(async()=>{const{default:r}=await Promise.resolve().then(()=>Mb);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},mHe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Zte=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},gS=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},mS=async(t,e)=>{await t.removeItem(e)};class dR{constructor(){this.promise=new dR.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}dR.promiseConstructor=Promise;function xO(t){const e=t.split(".");if(e.length!==3)throw new FE("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!eHe.test(e[r]))throw new FE("JWT not in base64url format");return{header:JSON.parse(wz(e[0])),payload:JSON.parse(wz(e[1])),signature:uHe(e[2]),raw:{header:e[0],payload:e[1]}}}async function yHe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function wHe(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function bHe(t){return("0"+t.toString(16)).substr(-2)}function vHe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,bHe).join("")}async function EHe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function _He(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await EHe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dy(t,e,n=!1){const r=vHe();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Zte(t,`${e}-code-verifier`,s);const i=await _He(r);return[i,r===i?"plain":"s256"]}const CHe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function AHe(t){const e=t.headers.get(L$);if(!e||!e.match(CHe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function SHe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function xHe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const IHe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hy(t){if(!IHe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var NHe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const op=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),THe=[502,503,504];async function bz(t){var e;if(!mHe(t))throw new M$(op(t),0);if(THe.includes(t.status))throw new M$(op(t),t.status);let n;try{n=await t.json()}catch(i){throw new Yte(op(i),i)}let r;const s=AHe(t);if(s&&s.getTime()>=Kte["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new gz(op(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Hd}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new gz(op(n),t.status,n.weak_password.reasons);throw new nHe(op(n),t.status||500,r)}const RHe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function jt(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[L$]||(i[L$]=Kte["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await PHe(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function PHe(t,e,n,r,s,i){const o=RHe(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new M$(op(c),0)}if(a.ok||await bz(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await bz(c)}}function pu(t){var e;let n=null;$He(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=fHe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function vz(t){const e=pu(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function sh(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function kHe(t){return{data:t,error:null}}function OHe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=NHe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function DHe(t){return t}function $He(t){return t.access_token&&t.refresh_token&&t.expires_in}const IO=["global","local","others"];var LHe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class MHe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Jte(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=IO[0]){if(IO.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${IO.join(", ")}`);try{return await jt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Nt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:sh})}catch(r){if(Nt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=LHe(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:OHe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Nt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await jt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:sh})}catch(n){if(Nt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:DHe});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);l[`${y}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Nt(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){hy(e);try{return await jt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:sh})}catch(n){if(Nt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){hy(e);try{return await jt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:sh})}catch(r){if(Nt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){hy(e);try{return await jt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:sh})}catch(r){if(Nt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){hy(e.userId);try{const{data:n,error:r}=await jt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Nt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){hy(e.userId),hy(e.id);try{return{data:await jt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Nt(n))return{data:null,error:n};throw n}}}const UHe={getItem:t=>zE()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{zE()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{zE()&&globalThis.localStorage.removeItem(t)}};function Ez(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function BHe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const fy={debug:!!(globalThis&&zE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Xte extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jHe extends Xte{}async function FHe(t,e,n){fy.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),fy.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){fy.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{fy.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw fy.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new jHe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(fy.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}BHe();const zHe={url:JWe,storageKey:ZWe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XWe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _z(t,e,n){return await n()}class EC{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=EC.nextInstanceID,EC.nextInstanceID+=1,this.instanceID>0&&tc()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},zHe),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new MHe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Jte(s.fetch),this.lock=s.lock||_z,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:tc()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=FHe:this.lock=_z,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:zE()?this.storage=UHe:(this.memoryStorage={},this.storage=Ez(this.memoryStorage)):(this.memoryStorage={},this.storage=Ez(this.memoryStorage)),tc()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Vte}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=gHe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),tc()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),iHe(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Nt(n)?{error:n}:{error:new Yte("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:pu}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(Nt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await dy(this.storage,this.storageKey)),i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:pu})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:pu})}else throw new fS("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(Nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:vz})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:vz})}else throw new fS("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new hS}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:m,statement:b,options:v}=e;let C;if(tc())if(typeof m=="object")C=m;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))C=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=m}const A=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const S=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),b?{statement:b}:null));let x;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")x=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)x=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)p=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),g=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${A.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const S=await C.signMessage(new TextEncoder().encode(p),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:y,error:m}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:hHe(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:pu});if(m)throw m;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new hS}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:m})}catch(y){if(Nt(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await gS(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:pu});if(await mS(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new hS}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Nt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:pu}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new hS}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(Nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await dy(this.storage,this.storageKey));const{error:d}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new fS("You must provide either an email or phone number.")}catch(a){if(Nt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:pu});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(Nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await dy(this.storage,this.storageKey)),await jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:kHe})}catch(i){if(Nt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Hd;const{error:s}=await jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await jt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await jt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new fS("You must provide either an email or phone number and a type")}catch(n){if(Nt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await gS(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<AO:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:sh}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hd}:await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:sh})})}catch(n){if(Nt(n))return sHe(n)&&(await this._removeSession(),await mS(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Hd;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await dy(this.storage,this.storageKey));const{data:l,error:u}=await jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:sh});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Nt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Hd;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=xO(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Nt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Hd;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Nt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!tc())throw new pS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new pz("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pS("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new pz("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new pS("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=_y&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(Nt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await gS(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(rHe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await mS(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=pHe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await dy(this.storage,this.storageKey,!0));try{return await jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Nt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Nt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await jt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return tc()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Nt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await jt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Nt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await wHe(async s=>(s>0&&await yHe(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:pu})),(s,i)=>{const o=200*Math.pow(2,s);return i&&SO(i)&&Date.now()+o-r<_y})}catch(r){if(this._debug(n,"error",r),Nt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),tc()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await gS(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<AO;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${AO}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),SO(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Hd;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new dR;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Hd;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Nt(i)){const o={session:null,error:i};return SO(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Zte(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await mS(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tc()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_y);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/_y);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${_y}ms, refresh threshold is ${$$} ticks`),s<=$$&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Xte)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tc()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await dy(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await jt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Nt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await jt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Nt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(Nt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Nt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=xO(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+tHe>Date.now()))return r;const{data:s,error:i}=await jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new FE("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new FE("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=xO(r);if(SHe(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=xHe(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,dHe(`${a}.${c}`)))throw new FE("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Nt(r))return{data:null,error:r};throw r}}}EC.nextInstanceID=0;const WHe=EC;class HHe extends WHe{constructor(e){super(e)}}var qHe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class GHe{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=YWe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:FWe,realtime:WWe,auth:Object.assign(Object.assign({},zWe),{storageKey:l}),global:jWe},d=QWe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=VWe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new lWe(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Bze(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new MWe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return qHe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new HHe({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new AWe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const VHe=(t,e,n)=>new GHe(t,e,n),KHe=void 0,YHe=void 0,yS=VHe(KHe,YHe,{realtime:{params:{eventsPerSecond:10}},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Qa=()=>{if(!Ux)throw new Error("[FIREBASE] Database not initialized");return Ux},Ja={async getGame(t){try{const e=Qa(),n=To(e,`chess_games/${t}`),r=await Ny(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){try{const n=Qa(),r=To(n,`chess_games/${t}`);await Iy(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Qa(),r=To(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=u6(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){try{const e=Qa(),n=t.invite_code,r=To(e,`chess_games/${n}`);await Iy(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",n)}catch(e){console.error("[FIREBASE] Error creating game:",e)}},async getActiveGames(){try{const t=Qa(),e=To(t,"chess_games"),n=await Ny(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Qa(),e=To(t,"chess_games"),n=await Ny(e);if(!n.exists())return[];const r=n.val(),s=Object.values(r).filter(i=>i.game_state==="waiting"&&i.is_public&&!i.red_player);return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Qa(),n=To(e,`chess_games/${t}`);await sle(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async migrateGame(t){try{const e=Qa(),n=To(e,`chess_games/${t.game_id}`);await Iy(n,{...t,migrated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error migrating game:",e)}},async updateLeaderboard(t){try{const e=Qa(),n=To(e,`leaderboard/${t.username}`);await Iy(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Qa(),e=To(t,"leaderboard"),n=await Ny(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Qa(),n=To(e,"leaderboard");return u6(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},QHe="6.15.0";function JHe(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function pi(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function ft(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&JHe(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Gy(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Gy(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Gy(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Gy(r,e)}: ${Gy(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ps(t,e){return t&&t.code===e}function BU(t){return Ps(t,"CALL_EXCEPTION")}function sr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Gy(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Gy(a))}}i.push(`code=${e}`),i.push(`version=${QHe}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return ft(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&ft(s,{shortMessage:r}),s}function we(t,e,n,r){if(!t)throw sr(e,n,r)}function Q(t,e,n,r){we(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function ene(t,e,n){n==null&&(n=""),n&&(n=": "+n),we(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),we(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function hR(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),we(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function tne(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Q(!1,"invalid BytesLike value",e||"value",t)}function Ut(t,e){return tne(t,e,!1)}function wi(t,e){return tne(t,e,!0)}function Kn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function jU(t){return Kn(t,!0)||t instanceof Uint8Array}const Cz="0123456789abcdef";function Oe(t){const e=Ut(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=Cz[(s&240)>>4]+Cz[s&15]}return n}function Sr(t){return"0x"+t.map(e=>Oe(e).substring(2)).join("")}function pw(t){return Kn(t,!0)?(t.length-2)/2:Ut(t).length}function vr(t,e,n){const r=Ut(t);return n!=null&&n>r.length&&we(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Oe(r.slice(e??0,n??r.length))}function nne(t,e,n){const r=Ut(t);we(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Oe(s)}function hd(t,e){return nne(t,e,!0)}function ZHe(t,e){return nne(t,e,!1)}const fR=BigInt(0),_c=BigInt(1),Vy=9007199254740991;function XHe(t,e){const n=pR(t,"value"),r=BigInt(Bt(e,"width"));if(we(n>>r===fR,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-_c){const s=(_c<<r)-_c;return-((~n&s)+_c)}return n}function rne(t,e){let n=Ke(t,"value");const r=BigInt(Bt(e,"width")),s=_c<<r-_c;if(n<fR){n=-n,we(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(_c<<r)-_c;return(~n&i)+_c}else we(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function nE(t,e){const n=pR(t,"value"),r=BigInt(Bt(e,"bits"));return n&(_c<<r)-_c}function Ke(t,e){switch(typeof t){case"bigint":return t;case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-Vy&&t<=Vy,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Q(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Q(!1,"invalid BigNumberish value",e||"value",t)}function pR(t,e){const n=Ke(t,e);return we(n>=fR,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Az="0123456789abcdef";function FU(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Az[n>>4],e+=Az[n&15];return BigInt(e)}return Ke(t)}function Bt(t,e){switch(typeof t){case"bigint":return Q(t>=-Vy&&t<=Vy,"overflow",e||"value",t),Number(t);case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-Vy&&t<=Vy,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Bt(BigInt(t),e)}catch(n){Q(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Q(!1,"invalid numeric value",e||"value",t)}function eqe(t){return Bt(FU(t))}function Af(t,e){let r=pR(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Bt(e,"width");for(we(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Qr(t){const e=pR(t,"value");if(e===fR)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function wc(t){let e=Oe(jU(t)?t:Qr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Sz="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const xz=BigInt(58);function tqe(t){const e=Ut(t);let n=FU(e),r="";for(;n;)r=Sz[Number(n%xz)]+r,n/=xz;for(let s=0;s<e.length&&!e[s];s++)r=Sz[0]+r;return r}function nqe(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Ut(e)}function rqe(t){const e=Ut(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var Rw;class sne{constructor(e,n,r){ee(this,"filter");ee(this,"emitter");G(this,Rw);$(this,Rw,n),ft(this,{emitter:e,filter:r})}async removeListener(){_(this,Rw)!=null&&await this.emitter.off(this.filter,_(this,Rw))}}Rw=new WeakMap;function sqe(t,e,n,r,s){Q(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function ine(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function iqe(t,e,n,r,s){return t==="OVERLONG"?(Q(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),ine(t,e,n))}const oqe=Object.freeze({error:sqe,ignore:ine,replace:iqe});function aqe(t,e){e==null&&(e=oqe.error);const n=Ut(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function Xu(t,e){Q(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Q(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function cqe(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function JI(t,e){return cqe(aqe(t,e))}function one(t){async function e(n,r){we(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();we(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),we(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=sr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=sr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const lqe=12,uqe=250;let Iz=one();const dqe=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),hqe=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let NO=!1;async function ane(t,e){try{const n=t.match(dqe);if(!n)throw new Error("invalid data");return new df(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?nqe(n[3]):pqe(n[3]))}catch{return new df(599,"BAD REQUEST (invalid data: URI)",{},null,new Sf(t))}}function cne(t){async function e(n,r){try{const s=n.match(hqe);if(!s)throw new Error("invalid link");return new Sf(`${t}${s[2]}`)}catch{return new df(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Sf(n))}}return e}const wS={data:ane,ipfs:cne("https://gateway.ipfs.io/ipfs/")},lne=new WeakMap;var Gp,gh;class fqe{constructor(e){G(this,Gp);G(this,gh);$(this,Gp,[]),$(this,gh,!1),lne.set(e,()=>{if(!_(this,gh)){$(this,gh,!0);for(const n of _(this,Gp))setTimeout(()=>{n()},0);$(this,Gp,[])}})}addListener(e){we(!_(this,gh),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,Gp).push(e)}get cancelled(){return _(this,gh)}checkSignal(){we(!this.cancelled,"cancelled","CANCELLED",{})}}Gp=new WeakMap,gh=new WeakMap;function bS(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Pw,kw,cc,xu,Ow,Dw,ss,ko,Iu,Vp,Kp,Yp,al,lc,mh,Qp,rE;const lN=class lN{constructor(e){G(this,Qp);G(this,Pw);G(this,kw);G(this,cc);G(this,xu);G(this,Ow);G(this,Dw);G(this,ss);G(this,ko);G(this,Iu);G(this,Vp);G(this,Kp);G(this,Yp);G(this,al);G(this,lc);G(this,mh);$(this,Dw,String(e)),$(this,Pw,!1),$(this,kw,!0),$(this,cc,{}),$(this,xu,""),$(this,Ow,3e5),$(this,lc,{slotInterval:uqe,maxAttempts:lqe}),$(this,mh,null)}get url(){return _(this,Dw)}set url(e){$(this,Dw,String(e))}get body(){return _(this,ss)==null?null:new Uint8Array(_(this,ss))}set body(e){if(e==null)$(this,ss,void 0),$(this,ko,void 0);else if(typeof e=="string")$(this,ss,Xu(e)),$(this,ko,"text/plain");else if(e instanceof Uint8Array)$(this,ss,e),$(this,ko,"application/octet-stream");else if(typeof e=="object")$(this,ss,Xu(JSON.stringify(e))),$(this,ko,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,ss)!=null}get method(){return _(this,xu)?_(this,xu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),$(this,xu,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,cc));return _(this,Iu)&&(e.authorization=`Basic ${rqe(Xu(_(this,Iu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,ko)&&(e["content-type"]=_(this,ko)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,cc)[String(e).toLowerCase()]=String(n)}clearHeaders(){$(this,cc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,Iu)||null}setCredentials(e,n){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),$(this,Iu,`${e}:${n}`)}get allowGzip(){return _(this,kw)}set allowGzip(e){$(this,kw,!!e)}get allowInsecureAuthentication(){return!!_(this,Pw)}set allowInsecureAuthentication(e){$(this,Pw,!!e)}get timeout(){return _(this,Ow)}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),$(this,Ow,e)}get preflightFunc(){return _(this,Vp)||null}set preflightFunc(e){$(this,Vp,e)}get processFunc(){return _(this,Kp)||null}set processFunc(e){$(this,Kp,e)}get retryFunc(){return _(this,Yp)||null}set retryFunc(e){$(this,Yp,e)}get getUrlFunc(){return _(this,mh)||Iz}set getUrlFunc(e){$(this,mh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,ss)?Oe(_(this,ss)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,lc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,lc).maxAttempts=e.maxAttempts)}send(){return we(_(this,al)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),$(this,al,new fqe(this)),he(this,Qp,rE).call(this,0,Nz()+this.timeout,0,this,new df(0,"",{},null,this))}cancel(){we(_(this,al)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=lne.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();we(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new lN(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,$(s,cc,Object.assign({},_(this,cc))),_(this,ss)&&$(s,ss,new Uint8Array(_(this,ss))),$(s,ko,_(this,ko)),s}clone(){const e=new lN(this.url);return $(e,xu,_(this,xu)),_(this,ss)&&$(e,ss,_(this,ss)),$(e,ko,_(this,ko)),$(e,cc,Object.assign({},_(this,cc))),$(e,Iu,_(this,Iu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),$(e,Vp,_(this,Vp)),$(e,Kp,_(this,Kp)),$(e,Yp,_(this,Yp)),$(e,lc,Object.assign({},_(this,lc))),$(e,mh,_(this,mh)),e}static lockConfig(){NO=!0}static getGateway(e){return wS[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(NO)throw new Error("gateways locked");wS[e]=n}static registerGetUrl(e){if(NO)throw new Error("gateways locked");Iz=e}static createGetUrlFunc(e){return one(e)}static createDataGateway(){return ane}static createIpfsGatewayFunc(e){return cne(e)}};Pw=new WeakMap,kw=new WeakMap,cc=new WeakMap,xu=new WeakMap,Ow=new WeakMap,Dw=new WeakMap,ss=new WeakMap,ko=new WeakMap,Iu=new WeakMap,Vp=new WeakMap,Kp=new WeakMap,Yp=new WeakMap,al=new WeakMap,lc=new WeakMap,mh=new WeakMap,Qp=new WeakSet,rE=async function(e,n,r,s,i){var u,d,h;if(e>=_(this,lc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");we(Nz()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await gqe(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in wS){const f=await wS[a](o.url,bS(_(s,al)));if(f instanceof df){let p=f;if(this.processFunc){bS(_(s,al));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,bS(_(s,al)));let l=new df(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return he(u=o.redirect(f),Qp,rE).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=_(this,lc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),he(d=o.clone(),Qp,rE).call(d,e+1,n,p,s,l)}if(this.processFunc){bS(_(s,al));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=_(this,lc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),he(h=o.clone(),Qp,rE).call(h,e+1,n,p,s,l)}}return l};let Sf=lN;var MC,UC,BC,Oo,$w,Jp;const iB=class iB{constructor(e,n,r,s,i){G(this,MC);G(this,UC);G(this,BC);G(this,Oo);G(this,$w);G(this,Jp);$(this,MC,e),$(this,UC,n),$(this,BC,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),$(this,Oo,s==null?null:new Uint8Array(s)),$(this,$w,i||null),$(this,Jp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,Oo)?Oe(_(this,Oo)):"null"}>`}get statusCode(){return _(this,MC)}get statusMessage(){return _(this,UC)}get headers(){return Object.assign({},_(this,BC))}get body(){return _(this,Oo)==null?null:new Uint8Array(_(this,Oo))}get bodyText(){try{return _(this,Oo)==null?"":JI(_(this,Oo))}catch{we(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{we(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new iB(599,r,this.headers,this.body,_(this,$w)||void 0);return $(s,Jp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Q(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw ft(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,Oo)!=null}get request(){return _(this,$w)}ok(){return _(this,Jp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,Jp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{_(this,Oo)&&(s=JI(_(this,Oo)))}catch{}we(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};MC=new WeakMap,UC=new WeakMap,BC=new WeakMap,Oo=new WeakMap,$w=new WeakMap,Jp=new WeakMap;let df=iB;function Nz(){return new Date().getTime()}function pqe(t){return Xu(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function gqe(t){return new Promise(e=>setTimeout(e,t))}function mqe(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Tz(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function Rz(t,e,n,r){const s=[];for(;n<e+1+r;){const i=une(t,n);s.push(i.result),n+=i.consumed,we(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function une(t,e){we(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{we(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=Tz(t,e+1,r);return n(e+1+r+s),Rz(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),Rz(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=Tz(t,e+1,r);n(e+1+r+s);const i=Oe(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Oe(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:mqe(t[e])}}function q1(t){const e=Ut(t,"data"),n=une(e,0);return Q(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Pz(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function dne(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(dne(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=Pz(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Ut(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Pz(e.length);return n.unshift(183+n.length),n.concat(e)}const kz="0123456789abcdef";function xf(t){let e="0x";for(const n of dne(t))e+=kz[n>>4],e+=kz[n&15];return e}const Ei=32,U$=new Uint8Array(Ei),yqe=["then"],vS={},hne=new WeakMap;function gp(t){return hne.get(t)}function Oz(t,e){hne.set(t,e)}function Lv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function B$(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof eb?B$(gp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof eb&&(o=B$(gp(o),o,n)),r[s]=o),r},{})}var Lw;const Ky=class Ky extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==vS&&(s=n,i=[],o=!1);super(s.length);G(this,Lw);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(Oz(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),$(this,Lw,[]),_(this,Lw)==null&&_(this,Lw),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Bt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&Lv(`index ${f}`,p),p}if(yqe.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return Oz(c,gp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Lv(`index ${i}`,s),n&&s instanceof Ky&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=gp(this);return r.reduce((s,i,o)=>(we(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),B$(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=gp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Ky(vS,i,o)}filter(n,r){const s=gp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&Lv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Ky(vS,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Lv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=gp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&Lv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Ky(vS,n,r)}};Lw=new WeakMap;let eb=Ky;function Dz(t){let e=Qr(t);return we(e.length<=Ei,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Ei,offset:e.length}),e.length!==Ei&&(e=wi(Sr([U$.slice(e.length%Ei),e]))),e}class bd{constructor(e,n,r,s){ee(this,"name");ee(this,"type");ee(this,"localName");ee(this,"dynamic");ft(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Q(!1,e,this.localName,n)}}var Nu,Zp,Mw,hx;class j${constructor(){G(this,Mw);G(this,Nu);G(this,Zp);$(this,Nu,[]),$(this,Zp,0)}get data(){return Sr(_(this,Nu))}get length(){return _(this,Zp)}appendWriter(e){return he(this,Mw,hx).call(this,wi(e.data))}writeBytes(e){let n=wi(e);const r=n.length%Ei;return r&&(n=wi(Sr([n,U$.slice(r)]))),he(this,Mw,hx).call(this,n)}writeValue(e){return he(this,Mw,hx).call(this,Dz(e))}writeUpdatableValue(){const e=_(this,Nu).length;return _(this,Nu).push(U$),$(this,Zp,_(this,Zp)+Ei),n=>{_(this,Nu)[e]=Dz(n)}}}Nu=new WeakMap,Zp=new WeakMap,Mw=new WeakSet,hx=function(e){return _(this,Nu).push(e),$(this,Zp,_(this,Zp)+e.length),e.length};var Vi,Do,Xp,eg,yh,rm,z$,fne;const oB=class oB{constructor(e,n,r){G(this,rm);ee(this,"allowLoose");G(this,Vi);G(this,Do);G(this,Xp);G(this,eg);G(this,yh);ft(this,{allowLoose:!!n}),$(this,Vi,wi(e)),$(this,Xp,0),$(this,eg,null),$(this,yh,r??1024),$(this,Do,0)}get data(){return Oe(_(this,Vi))}get dataLength(){return _(this,Vi).length}get consumed(){return _(this,Do)}get bytes(){return new Uint8Array(_(this,Vi))}subReader(e){const n=new oB(_(this,Vi).slice(_(this,Do)+e),this.allowLoose,_(this,yh));return $(n,eg,this),n}readBytes(e,n){let r=he(this,rm,fne).call(this,0,e,!!n);return he(this,rm,z$).call(this,e),$(this,Do,_(this,Do)+r.length),r.slice(0,e)}readValue(){return FU(this.readBytes(Ei))}readIndex(){return eqe(this.readBytes(Ei))}};Vi=new WeakMap,Do=new WeakMap,Xp=new WeakMap,eg=new WeakMap,yh=new WeakMap,rm=new WeakSet,z$=function(e){var n;if(_(this,eg))return he(n=_(this,eg),rm,z$).call(n,e);$(this,Xp,_(this,Xp)+e),we(_(this,yh)<1||_(this,Xp)<=_(this,yh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,yh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:wi(_(this,Vi)),offset:_(this,Do),length:e,info:{bytesRead:_(this,Xp),dataLength:this.dataLength}})},fne=function(e,n,r){let s=Math.ceil(n/Ei)*Ei;return _(this,Do)+s>_(this,Vi).length&&(this.allowLoose&&r&&_(this,Do)+n<=_(this,Vi).length?s=n:we(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:wi(_(this,Vi)),length:_(this,Vi).length,offset:_(this,Do)+s})),_(this,Vi).slice(_(this,Do),_(this,Do)+s)};let F$=oB;function ZI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function zU(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function wqe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ZI(t.outputLen),ZI(t.blockLen)}function tb(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function pne(t,e){zU(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const TO=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gne=t=>t instanceof Uint8Array,bqe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),RO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Zc=(t,e)=>t<<32-e|t>>>e,vqe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!vqe)throw new Error("Non little-endian hardware is not supported");function Eqe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function gR(t){if(typeof t=="string"&&(t=Eqe(t)),!gne(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function _qe(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!gne(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class WU{clone(){return this._cloneInto()}}function HU(t){const e=r=>t().update(gR(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Cqe(t=32){if(TO&&typeof TO.getRandomValues=="function")return TO.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class mne extends WU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,wqe(e);const r=gR(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return tb(this),this.iHash.update(e),this}digestInto(e){tb(this),zU(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const yne=(t,e,n)=>new mne(t,e).update(n).digest();yne.create=(t,e)=>new mne(t,e);function Aqe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class wne extends WU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=RO(this.buffer)}update(e){tb(this);const{view:n,buffer:r,blockLen:s}=this;e=gR(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=RO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tb(this),pne(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Aqe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=RO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const Sqe=(t,e,n)=>t&e^~t&n,xqe=(t,e,n)=>t&e^t&n^e&n,Iqe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Md=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ud=new Uint32Array(64);class Nqe extends wne{constructor(){super(64,32,8,!1),this.A=Md[0]|0,this.B=Md[1]|0,this.C=Md[2]|0,this.D=Md[3]|0,this.E=Md[4]|0,this.F=Md[5]|0,this.G=Md[6]|0,this.H=Md[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ud[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ud[d-15],f=Ud[d-2],p=Zc(h,7)^Zc(h,18)^h>>>3,g=Zc(f,17)^Zc(f,19)^f>>>10;Ud[d]=g+Ud[d-7]+p+Ud[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Zc(a,6)^Zc(a,11)^Zc(a,25),f=u+h+Sqe(a,c,l)+Iqe[d]+Ud[d]|0,g=(Zc(r,2)^Zc(r,13)^Zc(r,22))+xqe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Ud.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const bne=HU(()=>new Nqe),ES=BigInt(2**32-1),W$=BigInt(32);function vne(t,e=!1){return e?{h:Number(t&ES),l:Number(t>>W$&ES)}:{h:Number(t>>W$&ES)|0,l:Number(t&ES)|0}}function Ene(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=vne(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Tqe=(t,e)=>BigInt(t>>>0)<<W$|BigInt(e>>>0),Rqe=(t,e,n)=>t>>>n,Pqe=(t,e,n)=>t<<32-n|e>>>n,kqe=(t,e,n)=>t>>>n|e<<32-n,Oqe=(t,e,n)=>t<<32-n|e>>>n,Dqe=(t,e,n)=>t<<64-n|e>>>n-32,$qe=(t,e,n)=>t>>>n-32|e<<64-n,Lqe=(t,e)=>e,Mqe=(t,e)=>t,_ne=(t,e,n)=>t<<n|e>>>32-n,Cne=(t,e,n)=>e<<n|t>>>32-n,Ane=(t,e,n)=>e<<n-32|t>>>64-n,Sne=(t,e,n)=>t<<n-32|e>>>64-n;function Uqe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Bqe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),jqe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Fqe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),zqe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Wqe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Hqe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,kt={fromBig:vne,split:Ene,toBig:Tqe,shrSH:Rqe,shrSL:Pqe,rotrSH:kqe,rotrSL:Oqe,rotrBH:Dqe,rotrBL:$qe,rotr32H:Lqe,rotr32L:Mqe,rotlSH:_ne,rotlSL:Cne,rotlBH:Ane,rotlBL:Sne,add:Uqe,add3L:Bqe,add3H:jqe,add4L:Fqe,add4H:zqe,add5H:Hqe,add5L:Wqe},[qqe,Gqe]=kt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Bd=new Uint32Array(80),jd=new Uint32Array(80);class Vqe extends wne{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Bd[v]=e.getUint32(n),jd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const C=Bd[v-15]|0,A=jd[v-15]|0,S=kt.rotrSH(C,A,1)^kt.rotrSH(C,A,8)^kt.shrSH(C,A,7),x=kt.rotrSL(C,A,1)^kt.rotrSL(C,A,8)^kt.shrSL(C,A,7),R=Bd[v-2]|0,I=jd[v-2]|0,O=kt.rotrSH(R,I,19)^kt.rotrBH(R,I,61)^kt.shrSH(R,I,6),P=kt.rotrSL(R,I,19)^kt.rotrBL(R,I,61)^kt.shrSL(R,I,6),B=kt.add4L(x,P,jd[v-7],jd[v-16]),H=kt.add4H(B,S,O,Bd[v-7],Bd[v-16]);Bd[v]=H|0,jd[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const C=kt.rotrSH(d,h,14)^kt.rotrSH(d,h,18)^kt.rotrBH(d,h,41),A=kt.rotrSL(d,h,14)^kt.rotrSL(d,h,18)^kt.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,R=kt.add5L(b,A,x,Gqe[v],jd[v]),I=kt.add5H(R,m,C,S,qqe[v],Bd[v]),O=R|0,P=kt.rotrSH(r,s,28)^kt.rotrBH(r,s,34)^kt.rotrBH(r,s,39),B=kt.rotrSL(r,s,28)^kt.rotrBL(r,s,34)^kt.rotrBL(r,s,39),H=r&i^r&a^i&a,j=s&o^s&c^o&c;m=g|0,b=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=kt.add(l|0,u|0,I|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=kt.add3L(O,B,j);r=kt.add3H(T,I,P,H),s=T|0}({h:r,l:s}=kt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=kt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=kt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=kt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=kt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=kt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=kt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:b}=kt.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,b)}roundClean(){Bd.fill(0),jd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Kqe=HU(()=>new Vqe);function Yqe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const $z=Yqe();$z.crypto||$z.msCrypto;function Qqe(t){switch(t){case"sha256":return bne.create();case"sha512":return Kqe.create()}Q(!1,"invalid hashing algorithm name","algorithm",t)}const[xne,Ine,Nne]=[[],[],[]],Jqe=BigInt(0),Mv=BigInt(1),Zqe=BigInt(2),Xqe=BigInt(7),eGe=BigInt(256),tGe=BigInt(113);for(let t=0,e=Mv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],xne.push(2*(5*r+n)),Ine.push((t+1)*(t+2)/2%64);let s=Jqe;for(let i=0;i<7;i++)e=(e<<Mv^(e>>Xqe)*tGe)%eGe,e&Zqe&&(s^=Mv<<(Mv<<BigInt(i))-Mv);Nne.push(s)}const[nGe,rGe]=Ene(Nne,!0),Lz=(t,e,n)=>n>32?Ane(t,e,n):_ne(t,e,n),Mz=(t,e,n)=>n>32?Sne(t,e,n):Cne(t,e,n);function sGe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Lz(l,u,1)^n[a],h=Mz(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Ine[o],c=Lz(s,i,a),l=Mz(s,i,a),u=xne[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=nGe[r],t[1]^=rGe[r]}n.fill(0)}class qU extends WU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ZI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=bqe(this.state)}keccak(){sGe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){tb(this);const{blockLen:n,state:r}=this;e=gR(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){tb(this,!1),zU(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ZI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(pne(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new qU(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const iGe=(t,e,n)=>HU(()=>new qU(e,t,n)),oGe=iGe(1,136,256/8);let Tne=!1;const Rne=function(t){return oGe(t)};let Pne=Rne;function Br(t){const e=Ut(t,"data");return Oe(Pne(e))}Br._=Rne;Br.lock=function(){Tne=!0};Br.register=function(t){if(Tne)throw new TypeError("keccak256 is locked");Pne=t};Object.freeze(Br);const kne=function(t){return Qqe("sha256").update(t).digest()};let One=kne,Dne=!1;function Bb(t){const e=Ut(t,"data");return Oe(One(e))}Bb._=kne;Bb.lock=function(){Dne=!0};Bb.register=function(t){if(Dne)throw new Error("sha256 is locked");One=t};Object.freeze(Bb);Object.freeze(Bb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $ne=BigInt(0),mR=BigInt(1),aGe=BigInt(2),yR=t=>t instanceof Uint8Array,cGe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nb(t){if(!yR(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=cGe[t[n]];return e}function Lne(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function GU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function rb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Eg(t){return GU(nb(t))}function VU(t){if(!yR(t))throw new Error("Uint8Array expected");return GU(nb(Uint8Array.from(t).reverse()))}function sb(t,e){return rb(t.toString(16).padStart(e*2,"0"))}function KU(t,e){return sb(t,e).reverse()}function lGe(t){return rb(Lne(t))}function ic(t,e,n){let r;if(typeof e=="string")try{r=rb(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(yR(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function _C(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!yR(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function uGe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function dGe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function hGe(t){let e;for(e=0;t>$ne;t>>=mR,e+=1);return e}function fGe(t,e){return t>>BigInt(e)&mR}const pGe=(t,e,n)=>t|(n?mR:$ne)<<BigInt(e),YU=t=>(aGe<<BigInt(t-1))-mR,PO=t=>new Uint8Array(t),Uz=t=>Uint8Array.from(t);function Mne(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=PO(t),s=PO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=PO())=>{s=a(Uz([0]),d),r=a(),d.length!==0&&(s=a(Uz([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return _C(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const gGe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function G1(t,e,n={}){const r=(s,i,o)=>{const a=gGe[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const mGe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:fGe,bitLen:hGe,bitMask:YU,bitSet:pGe,bytesToHex:nb,bytesToNumberBE:Eg,bytesToNumberLE:VU,concatBytes:_C,createHmacDrbg:Mne,ensureBytes:ic,equalBytes:uGe,hexToBytes:rb,hexToNumber:GU,numberToBytesBE:sb,numberToBytesLE:KU,numberToHexUnpadded:Lne,numberToVarBytesBE:lGe,utf8ToBytes:dGe,validateObject:G1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ys=BigInt(0),Or=BigInt(1),mp=BigInt(2),yGe=BigInt(3),H$=BigInt(4),Bz=BigInt(5),jz=BigInt(8);BigInt(9);BigInt(16);function Xi(t,e){const n=t%e;return n>=ys?n:e+n}function wGe(t,e,n){if(n<=ys||e<ys)throw new Error("Expected power/modulo > 0");if(n===Or)return ys;let r=Or;for(;e>ys;)e&Or&&(r=r*t%n),t=t*t%n,e>>=Or;return r}function ca(t,e,n){let r=t;for(;e-- >ys;)r*=r,r%=n;return r}function q$(t,e){if(t===ys||e<=ys)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Xi(t,e),r=e,s=ys,i=Or;for(;n!==ys;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Or)throw new Error("invert: does not exist");return Xi(s,e)}function bGe(t){const e=(t-Or)/mp;let n,r,s;for(n=t-Or,r=0;n%mp===ys;n/=mp,r++);for(s=mp;s<t&&wGe(s,e,t)!==t-Or;s++);if(r===1){const o=(t+Or)/H$;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Or)/mp;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Or<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function vGe(t){if(t%H$===yGe){const e=(t+Or)/H$;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%jz===Bz){const e=(t-Bz)/jz;return function(r,s){const i=r.mul(s,mp),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,mp),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return bGe(t)}const EGe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _Ge(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=EGe.reduce((r,s)=>(r[s]="function",r),e);return G1(t,n)}function CGe(t,e,n){if(n<ys)throw new Error("Expected power > 0");if(n===ys)return t.ONE;if(n===Or)return e;let r=t.ONE,s=e;for(;n>ys;)n&Or&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Or;return r}function AGe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Une(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function SGe(t,e,n=!1,r={}){if(t<=ys)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Une(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=vGe(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:YU(s),ZERO:ys,ONE:Or,create:c=>Xi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return ys<=c&&c<t},is0:c=>c===ys,isOdd:c=>(c&Or)===Or,neg:c=>Xi(-c,t),eql:(c,l)=>c===l,sqr:c=>Xi(c*c,t),add:(c,l)=>Xi(c+l,t),sub:(c,l)=>Xi(c-l,t),mul:(c,l)=>Xi(c*l,t),pow:(c,l)=>CGe(a,c,l),div:(c,l)=>Xi(c*q$(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>q$(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>AGe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?KU(c,i):sb(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?VU(c):Eg(c)}});return Object.freeze(a)}function Bne(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function jne(t){const e=Bne(t);return e+Math.ceil(e/2)}function xGe(t,e,n=!1){const r=t.length,s=Bne(e),i=jne(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?Eg(t):VU(t),a=Xi(o,e-Or)+Or;return n?KU(a,s):sb(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const IGe=BigInt(0),kO=BigInt(1);function NGe(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>IGe;)i&kO&&(o=o.add(a)),a=a.double(),i>>=kO;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=kO);const m=g,b=g+Math.abs(y)-1,v=p%2!==0,C=y<0;y===0?u=u.add(n(v,i[m])):l=l.add(n(C,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Fne(t){return _Ge(t.Fp),G1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Une(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function TGe(t){const e=Fne(t);G1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:RGe,hexToBytes:PGe}=mGe,Dp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Dp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:RGe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Dp,n=typeof t=="string"?PGe(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Dp._parseInt(n.subarray(2)),{d:o,l:a}=Dp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Bu=BigInt(0),Ea=BigInt(1);BigInt(2);const Fz=BigInt(3);BigInt(4);function kGe(t){const e=TGe(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const m=g.toAffine();return _C(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:m}});function i(p){const{a:g,b:y}=e,m=n.sqr(p),b=n.mul(m,p);return n.add(n.add(b,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Bu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:m,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=nb(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let v;try{v=typeof p=="bigint"?p:Eg(ic("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return m&&(v=Xi(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,m){if(this.px=g,this.py=y,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:y,y:m}=g||{};if(!g||!n.isValid(y)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(y)&&b(m)?d.ZERO:new d(y,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(m=>m.pz));return g.map((m,b)=>m.toAffine(y[b])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(ic("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const m=n.sqr(y),b=i(g);if(!n.eql(m,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:m,pz:b}=this,{px:v,py:C,pz:A}=g,S=n.eql(n.mul(y,A),n.mul(v,b)),x=n.eql(n.mul(m,A),n.mul(C,b));return S&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,m=n.mul(y,Fz),{px:b,py:v,pz:C}=this;let A=n.ZERO,S=n.ZERO,x=n.ZERO,R=n.mul(b,b),I=n.mul(v,v),O=n.mul(C,C),P=n.mul(b,v);return P=n.add(P,P),x=n.mul(b,C),x=n.add(x,x),A=n.mul(g,x),S=n.mul(m,O),S=n.add(A,S),A=n.sub(I,S),S=n.add(I,S),S=n.mul(A,S),A=n.mul(P,A),x=n.mul(m,x),O=n.mul(g,O),P=n.sub(R,O),P=n.mul(g,P),P=n.add(P,x),x=n.add(R,R),R=n.add(x,R),R=n.add(R,O),R=n.mul(R,P),S=n.add(S,R),O=n.mul(v,C),O=n.add(O,O),R=n.mul(O,P),A=n.sub(A,R),x=n.mul(O,I),x=n.add(x,x),x=n.add(x,x),new d(A,S,x)}add(g){u(g);const{px:y,py:m,pz:b}=this,{px:v,py:C,pz:A}=g;let S=n.ZERO,x=n.ZERO,R=n.ZERO;const I=e.a,O=n.mul(e.b,Fz);let P=n.mul(y,v),B=n.mul(m,C),H=n.mul(b,A),j=n.add(y,m),T=n.add(v,C);j=n.mul(j,T),T=n.add(P,B),j=n.sub(j,T),T=n.add(y,b);let N=n.add(v,A);return T=n.mul(T,N),N=n.add(P,H),T=n.sub(T,N),N=n.add(m,b),S=n.add(C,A),N=n.mul(N,S),S=n.add(B,H),N=n.sub(N,S),R=n.mul(I,T),S=n.mul(O,H),R=n.add(S,R),S=n.sub(B,R),R=n.add(B,R),x=n.mul(S,R),B=n.add(P,P),B=n.add(B,P),H=n.mul(I,H),T=n.mul(O,T),B=n.add(B,H),H=n.sub(P,H),H=n.mul(I,H),T=n.add(T,H),P=n.mul(B,T),x=n.add(x,P),P=n.mul(N,T),S=n.mul(j,S),S=n.sub(S,P),P=n.mul(j,B),R=n.mul(N,R),R=n.add(R,P),new d(S,x,R)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const m=n.invertBatch(y.map(b=>b.pz));return y.map((b,v)=>b.toAffine(m[v])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Bu)return y;if(a(g),g===Ea)return this;const{endo:m}=e;if(!m)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:C,k2:A}=m.splitScalar(g),S=y,x=y,R=this;for(;v>Bu||A>Bu;)v&Ea&&(S=S.add(R)),A&Ea&&(x=x.add(R)),R=R.double(),v>>=Ea,A>>=Ea;return b&&(S=S.negate()),C&&(x=x.negate()),x=new d(n.mul(x.px,m.beta),x.py,x.pz),S.add(x)}multiply(g){a(g);let y=g,m,b;const{endo:v}=e;if(v){const{k1neg:C,k1:A,k2neg:S,k2:x}=v.splitScalar(y);let{p:R,f:I}=this.wNAF(A),{p:O,f:P}=this.wNAF(x);R=f.constTimeNegate(C,R),O=f.constTimeNegate(S,O),O=new d(n.mul(O.px,v.beta),O.py,O.pz),m=R.add(O),b=I.add(P)}else{const{p:C,f:A}=this.wNAF(y);m=C,b=A}return d.normalizeZ([m,b])[0]}multiplyAndAddUnsafe(g,y,m){const b=d.BASE,v=(A,S)=>S===Bu||S===Ea||!A.equals(b)?A.multiplyUnsafe(S):A.multiply(S),C=v(this,y).add(v(g,m));return C.is0()?void 0:C}toAffine(g){const{px:y,py:m,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const C=n.mul(y,g),A=n.mul(m,g),S=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:C,y:A}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===Ea)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===Ea?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return nb(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=NGe(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function OGe(t){const e=Fne(t);return G1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function DGe(t){const e=OGe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(T){return Bu<T&&T<n.ORDER}function a(T){return Xi(T,r)}function c(T){return q$(T,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=kGe({...e,toBytes(T,N,M){const k=N.toAffine(),D=n.toBytes(k.x),U=_C;return M?U(Uint8Array.from([N.hasEvenY()?2:3]),D):U(Uint8Array.from([4]),D,n.toBytes(k.y))},fromBytes(T){const N=T.length,M=T[0],k=T.subarray(1);if(N===s&&(M===2||M===3)){const D=Eg(k);if(!o(D))throw new Error("Point is not on curve");const U=d(D);let q=n.sqrt(U);const X=(q&Ea)===Ea;return(M&1)===1!==X&&(q=n.neg(q)),{x:D,y:q}}else if(N===i&&M===4){const D=n.fromBytes(k.subarray(0,n.BYTES)),U=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:D,y:U}}else throw new Error(`Point of length ${N} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=T=>nb(sb(T,e.nByteLength));function p(T){const N=r>>Ea;return T>N}function g(T){return p(T)?a(-T):T}const y=(T,N,M)=>Eg(T.slice(N,M));class m{constructor(N,M,k){this.r=N,this.s=M,this.recovery=k,this.assertValidity()}static fromCompact(N){const M=e.nByteLength;return N=ic("compactSignature",N,M*2),new m(y(N,0,M),y(N,M,2*M))}static fromDER(N){const{r:M,s:k}=Dp.toSig(ic("DER",N));return new m(M,k)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new m(this.r,this.s,N)}recoverPublicKey(N){const{r:M,s:k,recovery:D}=this,U=x(ic("msgHash",N));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const q=D===2||D===3?M+e.n:M;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=D&1?"03":"02",ae=l.fromHex(X+f(q)),oe=c(q),le=a(-U*oe),Ee=a(k*oe),Z=l.BASE.multiplyAndAddUnsafe(ae,le,Ee);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return rb(this.toDERHex())}toDERHex(){return Dp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return rb(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(T){try{return u(T),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const T=jne(e.n);return xGe(e.randomBytes(T),e.n)},precompute(T=8,N=l.BASE){return N._setWindowSize(T),N.multiply(BigInt(3)),N}};function v(T,N=!0){return l.fromPrivateKey(T).toRawBytes(N)}function C(T){const N=T instanceof Uint8Array,M=typeof T=="string",k=(N||M)&&T.length;return N?k===s||k===i:M?k===2*s||k===2*i:T instanceof l}function A(T,N,M=!0){if(C(T))throw new Error("first arg must be private key");if(!C(N))throw new Error("second arg must be public key");return l.fromHex(N).multiply(u(T)).toRawBytes(M)}const S=e.bits2int||function(T){const N=Eg(T),M=T.length*8-e.nBitLength;return M>0?N>>BigInt(M):N},x=e.bits2int_modN||function(T){return a(S(T))},R=YU(e.nBitLength);function I(T){if(typeof T!="bigint")throw new Error("bigint expected");if(!(Bu<=T&&T<R))throw new Error(`bigint expected < 2^${e.nBitLength}`);return sb(T,e.nByteLength)}function O(T,N,M=P){if(["recovered","canonical"].some(fe=>fe in M))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:D}=e;let{lowS:U,prehash:q,extraEntropy:X}=M;U==null&&(U=!0),T=ic("msgHash",T),q&&(T=ic("prehashed msgHash",k(T)));const ae=x(T),oe=u(N),le=[I(oe),I(ae)];if(X!=null){const fe=X===!0?D(n.BYTES):X;le.push(ic("extraEntropy",fe))}const Ee=_C(...le),Z=ae;function ce(fe){const ne=S(fe);if(!h(ne))return;const ye=c(ne),Ne=l.BASE.multiply(ne).toAffine(),de=a(Ne.x);if(de===Bu)return;const _e=a(ye*a(Z+de*oe));if(_e===Bu)return;let Ye=(Ne.x===de?0:2)|Number(Ne.y&Ea),rt=_e;return U&&p(_e)&&(rt=g(_e),Ye^=1),new m(de,rt,Ye)}return{seed:Ee,k2sig:ce}}const P={lowS:e.lowS,prehash:!1},B={lowS:e.lowS,prehash:!1};function H(T,N,M=P){const{seed:k,k2sig:D}=O(T,N,M),U=e;return Mne(U.hash.outputLen,U.nByteLength,U.hmac)(k,D)}l.BASE._setWindowSize(8);function j(T,N,M,k=B){var Ne;const D=T;if(N=ic("msgHash",N),M=ic("publicKey",M),"strict"in k)throw new Error("options.strict was renamed to lowS");const{lowS:U,prehash:q}=k;let X,ae;try{if(typeof D=="string"||D instanceof Uint8Array)try{X=m.fromDER(D)}catch(de){if(!(de instanceof Dp.Err))throw de;X=m.fromCompact(D)}else if(typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint"){const{r:de,s:_e}=D;X=new m(de,_e)}else throw new Error("PARSE");ae=l.fromHex(M)}catch(de){if(de.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(U&&X.hasHighS())return!1;q&&(N=e.hash(N));const{r:oe,s:le}=X,Ee=x(N),Z=c(le),ce=a(Ee*Z),fe=a(oe*Z),ne=(Ne=l.BASE.multiplyAndAddUnsafe(ae,ce,fe))==null?void 0:Ne.toAffine();return ne?a(ne.x)===oe:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:A,sign:H,verify:j,ProjectivePoint:l,Signature:m,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $Ge(t){return{hash:t,hmac:(e,...n)=>yne(t,e,_qe(...n)),randomBytes:Cqe}}function LGe(t,e){const n=r=>DGe({...t,...$Ge(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zne=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),zz=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MGe=BigInt(1),G$=BigInt(2),Wz=(t,e)=>(t+e/G$)/e;function UGe(t){const e=zne,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ca(u,n,e)*u%e,h=ca(d,n,e)*u%e,f=ca(h,G$,e)*l%e,p=ca(f,s,e)*f%e,g=ca(p,i,e)*p%e,y=ca(g,a,e)*g%e,m=ca(y,c,e)*y%e,b=ca(m,a,e)*g%e,v=ca(b,n,e)*u%e,C=ca(v,o,e)*p%e,A=ca(C,r,e)*l%e,S=ca(A,G$,e);if(!V$.eql(V$.sqr(S),t))throw new Error("Cannot find square root");return S}const V$=SGe(zne,void 0,void 0,{sqrt:UGe}),qd=LGe({a:BigInt(0),b:BigInt(7),Fp:V$,n:zz,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=zz,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-MGe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Wz(i*t,e),c=Wz(-r*t,e);let l=Xi(t-a*n-c*s,e),u=Xi(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},bne);BigInt(0);qd.ProjectivePoint;const CC="0x0000000000000000000000000000000000000000",Hz="0x0000000000000000000000000000000000000000000000000000000000000000",qz=BigInt(0),Gz=BigInt(1),Vz=BigInt(2),Kz=BigInt(27),Yz=BigInt(28),_S=BigInt(35),py={};function Qz(t){return hd(Qr(t),32)}var Uw,cl,Bw,tg;const nc=class nc{constructor(e,n,r,s){G(this,Uw);G(this,cl);G(this,Bw);G(this,tg);hR(e,py,"Signature"),$(this,Uw,n),$(this,cl,r),$(this,Bw,s),$(this,tg,null)}get r(){return _(this,Uw)}set r(e){Q(pw(e)===32,"invalid r","value",e),$(this,Uw,Oe(e))}get s(){return Q(parseInt(_(this,cl).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,cl)),_(this,cl)}set s(e){Q(pw(e)===32,"invalid s","value",e),$(this,cl,Oe(e))}get _s(){return _(this,cl)}isValid(){return parseInt(_(this,cl).substring(0,3))<8}get v(){return _(this,Bw)}set v(e){const n=Bt(e,"value");Q(n===27||n===28,"invalid v","v",e),$(this,Bw,n)}get networkV(){return _(this,tg)}get legacyChainId(){const e=this.networkV;return e==null?null:nc.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Ut(this.s);return this.yParity&&(e[0]|=128),Oe(e)}get compactSerialized(){return Sr([this.r,this.yParityAndS])}get serialized(){return Sr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new nc(py,this.r,this._s,this.v);return this.networkV&&$(e,tg,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ke(e,"v");return n==Kz||n==Yz?qz:(Q(n>=_S,"invalid EIP-155 v","v",e),(n-_S)/Vz)}static getChainIdV(e,n){return Ke(e)*Vz+BigInt(35+n-27)}static getNormalizedV(e){const n=Ke(e);return n===qz||n===Kz?27:n===Gz||n===Yz?28:(Q(n>=_S,"invalid v","v",e),n&Gz?27:28)}static from(e){function n(l,u){Q(l,u,"signature",e)}if(e==null)return new nc(py,Hz,Hz,27);if(typeof e=="string"){const l=Ut(e,"signature");if(l.length===64){const u=Oe(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new nc(py,u,Oe(d),h)}if(l.length===65){const u=Oe(l.slice(0,32)),d=Oe(l.slice(32,64)),h=nc.getNormalizedV(l[64]);return new nc(py,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof nc)return e.clone();const r=e.r;n(r!=null,"missing r");const s=Qz(r),i=function(l,u){if(l!=null)return Qz(l);if(u!=null){n(Kn(u,32),"invalid yParityAndS");const d=Ut(u);return d[0]&=127,Oe(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Ke(l);return{networkV:h>=_S?h:void 0,v:nc.getNormalizedV(h)}}if(u!=null)return n(Kn(u,32),"invalid yParityAndS"),{v:Ut(u)[0]&128?28:27};if(d!=null){switch(Bt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new nc(py,s,i,a);return o&&$(c,tg,o),n(e.yParity==null||Bt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Uw=new WeakMap,cl=new WeakMap,Bw=new WeakMap,tg=new WeakMap;let po=nc;var Tu;const yp=class yp{constructor(e){G(this,Tu);Q(pw(e)===32,"invalid private key","privateKey","[REDACTED]"),$(this,Tu,Oe(e))}get privateKey(){return _(this,Tu)}get publicKey(){return yp.computePublicKey(_(this,Tu))}get compressedPublicKey(){return yp.computePublicKey(_(this,Tu),!0)}sign(e){Q(pw(e)===32,"invalid digest length","digest",e);const n=qd.sign(wi(e),wi(_(this,Tu)),{lowS:!0});return po.from({r:Af(n.r,32),s:Af(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=yp.computePublicKey(e);return Oe(qd.getSharedSecret(wi(_(this,Tu)),Ut(n),!1))}static computePublicKey(e,n){let r=Ut(e,"key");if(r.length===32){const i=qd.getPublicKey(r,!!n);return Oe(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=qd.ProjectivePoint.fromHex(r);return Oe(s.toRawBytes(n))}static recoverPublicKey(e,n){Q(pw(e)===32,"invalid digest length","digest",e);const r=po.from(n);let s=qd.Signature.fromCompact(wi(Sr([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(wi(e));return Q(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=qd.ProjectivePoint.fromHex(yp.computePublicKey(e).substring(2)),i=qd.ProjectivePoint.fromHex(yp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Tu=new WeakMap;let AC=yp;const BGe=BigInt(0),jGe=BigInt(36);function Jz(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Ut(Br(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const QU={};for(let t=0;t<10;t++)QU[String(t)]=String(t);for(let t=0;t<26;t++)QU[String.fromCharCode(65+t)]=String(10+t);const Zz=15;function FGe(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>QU[r]).join("");for(;e.length>=Zz;){let r=e.substring(0,Zz);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const zGe=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function WGe(t){t=t.toLowerCase();let e=BGe;for(let n=0;n<t.length;n++)e=e*jGe+zGe[t[n]];return e}function mn(t){if(Q(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Jz(t);return Q(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(t.substring(2,4)===FGe(t),"bad icap checksum","address",t);let e=WGe(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Jz("0x"+e)}Q(!1,"invalid address","address",t)}function HGe(t){const e=mn(t.from);let r=Ke(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,mn(vr(Br(xf([e,r])),12))}function Wne(t){return t&&typeof t.getAddress=="function"}async function OO(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(we(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),mn(n)}function _i(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?mn(t):(we(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),OO(t,e.resolveName(t)));if(Wne(t))return OO(t,t.getAddress());if(t&&typeof t.then=="function")return OO(t,t);Q(!1,"unsupported addressable value","target",t)}const wu={};function ze(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ti(wu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function on(t,e){return new ti(wu,`bytes${e||""}`,t,{size:e})}const Xz=Symbol.for("_ethers_typed");var ng;const bu=class bu{constructor(e,n,r,s){ee(this,"type");ee(this,"value");G(this,ng);ee(this,"_typedSymbol");s==null&&(s=null),hR(wu,e,"Typed"),ft(this,{_typedSymbol:Xz,type:n,value:r}),$(this,ng,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,ng)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,ng)===!0?-1:_(this,ng)===!1?this.value.length:null}static from(e,n){return new bu(wu,e,n)}static uint8(e){return ze(e,8)}static uint16(e){return ze(e,16)}static uint24(e){return ze(e,24)}static uint32(e){return ze(e,32)}static uint40(e){return ze(e,40)}static uint48(e){return ze(e,48)}static uint56(e){return ze(e,56)}static uint64(e){return ze(e,64)}static uint72(e){return ze(e,72)}static uint80(e){return ze(e,80)}static uint88(e){return ze(e,88)}static uint96(e){return ze(e,96)}static uint104(e){return ze(e,104)}static uint112(e){return ze(e,112)}static uint120(e){return ze(e,120)}static uint128(e){return ze(e,128)}static uint136(e){return ze(e,136)}static uint144(e){return ze(e,144)}static uint152(e){return ze(e,152)}static uint160(e){return ze(e,160)}static uint168(e){return ze(e,168)}static uint176(e){return ze(e,176)}static uint184(e){return ze(e,184)}static uint192(e){return ze(e,192)}static uint200(e){return ze(e,200)}static uint208(e){return ze(e,208)}static uint216(e){return ze(e,216)}static uint224(e){return ze(e,224)}static uint232(e){return ze(e,232)}static uint240(e){return ze(e,240)}static uint248(e){return ze(e,248)}static uint256(e){return ze(e,256)}static uint(e){return ze(e,256)}static int8(e){return ze(e,-8)}static int16(e){return ze(e,-16)}static int24(e){return ze(e,-24)}static int32(e){return ze(e,-32)}static int40(e){return ze(e,-40)}static int48(e){return ze(e,-48)}static int56(e){return ze(e,-56)}static int64(e){return ze(e,-64)}static int72(e){return ze(e,-72)}static int80(e){return ze(e,-80)}static int88(e){return ze(e,-88)}static int96(e){return ze(e,-96)}static int104(e){return ze(e,-104)}static int112(e){return ze(e,-112)}static int120(e){return ze(e,-120)}static int128(e){return ze(e,-128)}static int136(e){return ze(e,-136)}static int144(e){return ze(e,-144)}static int152(e){return ze(e,-152)}static int160(e){return ze(e,-160)}static int168(e){return ze(e,-168)}static int176(e){return ze(e,-176)}static int184(e){return ze(e,-184)}static int192(e){return ze(e,-192)}static int200(e){return ze(e,-200)}static int208(e){return ze(e,-208)}static int216(e){return ze(e,-216)}static int224(e){return ze(e,-224)}static int232(e){return ze(e,-232)}static int240(e){return ze(e,-240)}static int248(e){return ze(e,-248)}static int256(e){return ze(e,-256)}static int(e){return ze(e,-256)}static bytes1(e){return on(e,1)}static bytes2(e){return on(e,2)}static bytes3(e){return on(e,3)}static bytes4(e){return on(e,4)}static bytes5(e){return on(e,5)}static bytes6(e){return on(e,6)}static bytes7(e){return on(e,7)}static bytes8(e){return on(e,8)}static bytes9(e){return on(e,9)}static bytes10(e){return on(e,10)}static bytes11(e){return on(e,11)}static bytes12(e){return on(e,12)}static bytes13(e){return on(e,13)}static bytes14(e){return on(e,14)}static bytes15(e){return on(e,15)}static bytes16(e){return on(e,16)}static bytes17(e){return on(e,17)}static bytes18(e){return on(e,18)}static bytes19(e){return on(e,19)}static bytes20(e){return on(e,20)}static bytes21(e){return on(e,21)}static bytes22(e){return on(e,22)}static bytes23(e){return on(e,23)}static bytes24(e){return on(e,24)}static bytes25(e){return on(e,25)}static bytes26(e){return on(e,26)}static bytes27(e){return on(e,27)}static bytes28(e){return on(e,28)}static bytes29(e){return on(e,29)}static bytes30(e){return on(e,30)}static bytes31(e){return on(e,31)}static bytes32(e){return on(e,32)}static address(e){return new bu(wu,"address",e)}static bool(e){return new bu(wu,"bool",!!e)}static bytes(e){return new bu(wu,"bytes",e)}static string(e){return new bu(wu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new bu(wu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===Xz}static dereference(e,n){if(bu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};ng=new WeakMap;let ti=bu;class qGe extends bd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ti.dereference(n,"string");try{r=mn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return mn(Af(e.readValue(),20))}}class GGe extends bd{constructor(n){super(n.name,n.type,"_",n.dynamic);ee(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function Hne(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return we(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),we(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Q(!1,"invalid tuple value","tuple",n);Q(e.length===r.length,"types/value length mismatch","tuple",n);let s=new j$,i=new j$,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function qne(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Ps(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Ps(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),eb.fromItems(n,r)}class VGe extends bd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);ee(this,"coder");ee(this,"length");ft(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ti.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),ene(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Hne(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),we(r*Ei<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Ei,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new GGe(this.coder));return qne(n,s)}}class KGe extends bd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ti.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Gne extends bd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=wi(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class YGe extends Gne{constructor(e){super("bytes",e)}decode(e){return Oe(super.decode(e))}}class QGe extends bd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);ee(this,"size");ft(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=wi(ti.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Oe(n.readBytes(this.size))}}const JGe=new Uint8Array([]);class ZGe extends bd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(JGe)}decode(e){return e.readBytes(0),null}}const XGe=BigInt(0),eVe=BigInt(1),tVe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class nVe extends bd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);ee(this,"size");ee(this,"signed");ft(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Ke(ti.dereference(r,this.type)),i=nE(tVe,Ei*8);if(this.signed){let o=nE(i,this.size*8-1);(s>o||s<-(o+eVe))&&this._throwError("value out-of-bounds",r),s=rne(s,8*Ei)}else(s<XGe||s>nE(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=nE(n.readValue(),this.size*8);return this.signed&&(r=XHe(r,this.size*8)),r}}class rVe extends Gne{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,Xu(ti.dereference(n,"string")))}decode(e){return JI(super.decode(e))}}class CS extends bd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);ee(this,"coders");ft(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ti.dereference(r,"tuple");return Hne(n,this.coders,s)}decode(n){return qne(n,this.coders)}}function DO(t,e){return{address:mn(t),storageKeys:e.map((n,r)=>(Q(Kn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Sm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Q(n.length===2,"invalid slot set",`value[${r}]`,n),DO(n[0],n[1])):(Q(n!=null&&typeof n=="object","invalid address-slot set","value",t),DO(n.address,n.storageKeys)));Q(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return DO(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Vne(t){return{address:mn(t.address),nonce:Ke(t.nonce!=null?t.nonce:0),chainId:Ke(t.chainId!=null?t.chainId:0),signature:po.from(t.signature)}}function sVe(t){let e;return typeof t=="string"?e=AC.computePublicKey(t,!1):e=t.publicKey,mn(Br("0x"+e.substring(4)).substring(26))}function iVe(t,e){return sVe(AC.recoverPublicKey(t,e))}const us=BigInt(0),oVe=BigInt(2),aVe=BigInt(27),cVe=BigInt(28),lVe=BigInt(35),uVe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),$O=4096*32;function dVe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Ut(t.blobToKzgCommitment(Oe(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Ut(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Ut(t.blobToKZGCommitment(Oe(r)));Q(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Ut(t.computeBlobProof(Oe(r),Oe(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Ut(t.computeBlobKZGProof(Oe(r),Oe(s)));Q(!1,"unsupported KZG library","kzg",t)}}}function eW(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Bb(e).substring(4),"0x"+n}function jb(t){return t==="0x"?null:mn(t)}function wR(t,e){try{return Sm(t)}catch(n){Q(!1,n.message,e,t)}}function hVe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:jb(s[1]),nonce:Pn(s[2],"nonce"),chainId:Pn(s[0],"chainId"),signature:po.from({yParity:xm(s[3],"yParity"),r:hd(s[4],32),s:hd(s[5],32)})})}return n}catch(n){Q(!1,n.message,e,t)}}function xm(t,e){return t==="0x"?0:Bt(t,e)}function Pn(t,e){if(t==="0x")return us;const n=Ke(t,e);return Q(n<=uVe,"value exceeds uint size",e,n),n}function Kt(t,e){const n=Ke(t,"value"),r=Qr(n);return Q(r.length<=32,"value too large",`tx.${e}`,n),r}function bR(t){return Sm(t).map(e=>[e.address,e.storageKeys])}function fVe(t){return t.map(e=>[Kt(e.chainId,"chainId"),e.address,Kt(e.nonce,"nonce"),Kt(e.signature.yParity,"yParity"),Qr(e.signature.r),Qr(e.signature.s)])}function pVe(t,e){Q(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Q(Kn(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function gVe(t){const e=q1(t);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:xm(e[0],"nonce"),gasPrice:Pn(e[1],"gasPrice"),gasLimit:Pn(e[2],"gasLimit"),to:jb(e[3]),value:Pn(e[4],"value"),data:Oe(e[5]),chainId:us};if(e.length===6)return n;const r=Pn(e[6],"v"),s=Pn(e[7],"r"),i=Pn(e[8],"s");if(s===us&&i===us)n.chainId=r;else{let o=(r-lVe)/oVe;o<us&&(o=us),n.chainId=o,Q(o!==us||r===aVe||r===cVe,"non-canonical legacy v","v",e[6]),n.signature=po.from({r:hd(e[7],32),s:hd(e[8],32),v:r})}return n}function mVe(t,e){const n=[Kt(t.nonce,"nonce"),Kt(t.gasPrice||0,"gasPrice"),Kt(t.gasLimit,"gasLimit"),t.to||"0x",Kt(t.value,"value"),t.data];let r=us;if(t.chainId!=us)r=Ke(t.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==us&&(n.push(Qr(r)),n.push("0x"),n.push("0x")),xf(n);let s=BigInt(27+e.yParity);return r!==us?s=po.getChainIdV(r,e.v):BigInt(e.v)!==s&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Qr(s)),n.push(Qr(e.r)),n.push(Qr(e.s)),xf(n)}function vR(t,e){let n;try{if(n=xm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=hd(e[1],32),s=hd(e[2],32),i=po.from({r,s,yParity:n});t.signature=i}function yVe(t){const e=q1(Ut(t).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Oe(t));const n={type:2,chainId:Pn(e[0],"chainId"),nonce:xm(e[1],"nonce"),maxPriorityFeePerGas:Pn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pn(e[4],"gasLimit"),to:jb(e[5]),value:Pn(e[6],"value"),data:Oe(e[7]),accessList:wR(e[8],"accessList")};return e.length===9||vR(n,e.slice(9)),n}function wVe(t,e){const n=[Kt(t.chainId,"chainId"),Kt(t.nonce,"nonce"),Kt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Kt(t.maxFeePerGas||0,"maxFeePerGas"),Kt(t.gasLimit,"gasLimit"),t.to||"0x",Kt(t.value,"value"),t.data,bR(t.accessList||[])];return e&&(n.push(Kt(e.yParity,"yParity")),n.push(Qr(e.r)),n.push(Qr(e.s))),Sr(["0x02",xf(n)])}function bVe(t){const e=q1(Ut(t).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Oe(t));const n={type:1,chainId:Pn(e[0],"chainId"),nonce:xm(e[1],"nonce"),gasPrice:Pn(e[2],"gasPrice"),gasLimit:Pn(e[3],"gasLimit"),to:jb(e[4]),value:Pn(e[5],"value"),data:Oe(e[6]),accessList:wR(e[7],"accessList")};return e.length===8||vR(n,e.slice(8)),n}function vVe(t,e){const n=[Kt(t.chainId,"chainId"),Kt(t.nonce,"nonce"),Kt(t.gasPrice||0,"gasPrice"),Kt(t.gasLimit,"gasLimit"),t.to||"0x",Kt(t.value,"value"),t.data,bR(t.accessList||[])];return e&&(n.push(Kt(e.yParity,"recoveryParam")),n.push(Qr(e.r)),n.push(Qr(e.s))),Sr(["0x01",xf(n)])}function EVe(t){let e=q1(Ut(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Q(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Q(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Q(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Q(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Oe(t));const s={type:3,chainId:Pn(e[0],"chainId"),nonce:xm(e[1],"nonce"),maxPriorityFeePerGas:Pn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pn(e[4],"gasLimit"),to:jb(e[5]),value:Pn(e[6],"value"),data:Oe(e[7]),accessList:wR(e[8],"accessList"),maxFeePerBlobGas:Pn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Q(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Q(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Q(Kn(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||vR(s,e.slice(11)),s}function _Ve(t,e,n){const r=[Kt(t.chainId,"chainId"),Kt(t.nonce,"nonce"),Kt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Kt(t.maxFeePerGas||0,"maxFeePerGas"),Kt(t.gasLimit,"gasLimit"),t.to||CC,Kt(t.value,"value"),t.data,bR(t.accessList||[]),Kt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),pVe(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Kt(e.yParity,"yParity")),r.push(Qr(e.r)),r.push(Qr(e.s)),n)?Sr(["0x03",xf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Sr(["0x03",xf(r)])}function CVe(t){const e=q1(Ut(t).slice(1));Q(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Oe(t));const n={type:4,chainId:Pn(e[0],"chainId"),nonce:xm(e[1],"nonce"),maxPriorityFeePerGas:Pn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pn(e[4],"gasLimit"),to:jb(e[5]),value:Pn(e[6],"value"),data:Oe(e[7]),accessList:wR(e[8],"accessList"),authorizationList:hVe(e[9],"authorizationList")};return e.length===10||vR(n,e.slice(10)),n}function AVe(t,e){const n=[Kt(t.chainId,"chainId"),Kt(t.nonce,"nonce"),Kt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Kt(t.maxFeePerGas||0,"maxFeePerGas"),Kt(t.gasLimit,"gasLimit"),t.to||"0x",Kt(t.value,"value"),t.data,bR(t.accessList||[]),fVe(t.authorizationList||[])];return e&&(n.push(Kt(e.yParity,"yParity")),n.push(Qr(e.r)),n.push(Qr(e.s))),Sr(["0x04",xf(n)])}var uc,jw,Fw,zw,Ww,Hw,qw,Gw,Vw,Kw,Yw,Qw,rg,wh,ll,bh,Jw,Zw,fx;const rl=class rl{constructor(){G(this,Zw);G(this,uc);G(this,jw);G(this,Fw);G(this,zw);G(this,Ww);G(this,Hw);G(this,qw);G(this,Gw);G(this,Vw);G(this,Kw);G(this,Yw);G(this,Qw);G(this,rg);G(this,wh);G(this,ll);G(this,bh);G(this,Jw);$(this,uc,null),$(this,jw,null),$(this,zw,0),$(this,Ww,us),$(this,Hw,null),$(this,qw,null),$(this,Gw,null),$(this,Fw,"0x"),$(this,Vw,us),$(this,Kw,us),$(this,Yw,null),$(this,Qw,null),$(this,rg,null),$(this,wh,null),$(this,ll,null),$(this,bh,null),$(this,Jw,null)}get type(){return _(this,uc)}set type(e){switch(e){case null:$(this,uc,null);break;case 0:case"legacy":$(this,uc,0);break;case 1:case"berlin":case"eip-2930":$(this,uc,1);break;case 2:case"london":case"eip-1559":$(this,uc,2);break;case 3:case"cancun":case"eip-4844":$(this,uc,3);break;case 4:case"pectra":case"eip-7702":$(this,uc,4);break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,jw);return e==null&&this.type===3?CC:e}set to(e){$(this,jw,e==null?null:mn(e))}get nonce(){return _(this,zw)}set nonce(e){$(this,zw,Bt(e,"value"))}get gasLimit(){return _(this,Ww)}set gasLimit(e){$(this,Ww,Ke(e))}get gasPrice(){const e=_(this,Hw);return e==null&&(this.type===0||this.type===1)?us:e}set gasPrice(e){$(this,Hw,e==null?null:Ke(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,qw);return e??(this.type===2||this.type===3?us:null)}set maxPriorityFeePerGas(e){$(this,qw,e==null?null:Ke(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,Gw);return e??(this.type===2||this.type===3?us:null)}set maxFeePerGas(e){$(this,Gw,e==null?null:Ke(e,"maxFeePerGas"))}get data(){return _(this,Fw)}set data(e){$(this,Fw,Oe(e))}get value(){return _(this,Vw)}set value(e){$(this,Vw,Ke(e,"value"))}get chainId(){return _(this,Kw)}set chainId(e){$(this,Kw,Ke(e))}get signature(){return _(this,Yw)||null}set signature(e){$(this,Yw,e==null?null:po.from(e))}get accessList(){const e=_(this,Qw)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){$(this,Qw,e==null?null:Sm(e))}get authorizationList(){const e=_(this,Jw)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){$(this,Jw,e==null?null:e.map(n=>Vne(n)))}get maxFeePerBlobGas(){const e=_(this,rg);return e==null&&this.type===3?us:e}set maxFeePerBlobGas(e){$(this,rg,e==null?null:Ke(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,wh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Q(Kn(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}$(this,wh,e)}get blobs(){return _(this,bh)==null?null:_(this,bh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){$(this,bh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(jU(i)){we(_(this,ll),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Ut(i);if(Q(o.length<=$O,"blob is too large",`blobs[${s}]`,i),o.length!==$O){const l=new Uint8Array($O);l.set(o),o=l}const a=_(this,ll).blobToKzgCommitment(o),c=Oe(_(this,ll).computeBlobKzgProof(o,a));n.push({data:Oe(o),commitment:Oe(a),proof:c}),r.push(eW(1,a))}else{const o=Oe(i.commitment);n.push({data:Oe(i.data),commitment:o,proof:Oe(i.proof)}),r.push(eW(1,o))}}$(this,bh,n),$(this,wh,r)}get kzg(){return _(this,ll)}set kzg(e){e==null?$(this,ll,null):$(this,ll,dVe(e))}get hash(){return this.signature==null?null:Br(he(this,Zw,fx).call(this,!0,!1))}get unsignedHash(){return Br(this.unsignedSerialized)}get from(){return this.signature==null?null:iVe(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:AC.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return he(this,Zw,fx).call(this,!0,!0)}get unsignedSerialized(){return he(this,Zw,fx).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=_(this,rg)!=null||_(this,wh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&we(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),we(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),we(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return rl.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new rl;if(typeof e=="string"){const r=Ut(e);if(r[0]>=127)return rl.from(gVe(r));switch(r[0]){case 1:return rl.from(bVe(r));case 2:return rl.from(yVe(r));case 3:return rl.from(EVe(r));case 4:return rl.from(CVe(r))}we(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new rl;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=po.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};uc=new WeakMap,jw=new WeakMap,Fw=new WeakMap,zw=new WeakMap,Ww=new WeakMap,Hw=new WeakMap,qw=new WeakMap,Gw=new WeakMap,Vw=new WeakMap,Kw=new WeakMap,Yw=new WeakMap,Qw=new WeakMap,rg=new WeakMap,wh=new WeakMap,ll=new WeakMap,bh=new WeakMap,Jw=new WeakMap,Zw=new WeakSet,fx=function(e,n){we(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return mVe(this,r);case 1:return vVe(this,r);case 2:return wVe(this,r);case 3:return _Ve(this,r,n?this.blobs:null);case 4:return AVe(this,r)}we(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let XI=rl;function Xg(t){return Br(Xu(t))}var SVe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const tW=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),nW=4;function xVe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let A=1;A<r;A++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let y=0;for(let A=0;A<d;A++)y=y<<1|u();let m=[],b=0,v=h;for(;;){let A=Math.floor(((y-b+1)*s-1)/v),S=0,x=r;for(;x-S>1;){let O=S+x>>>1;A<i[O]?x=O:S=O}if(S==0)break;m.push(S);let R=b+Math.floor(v*i[S]/s),I=b+Math.floor(v*i[S+1]/s)-1;for(;!((R^I)&f);)y=y<<1&g|u(),R=R<<1&g,I=I<<1&g|1;for(;R&~I&p;)y=y&f|y<<1&g>>>1|u(),R=R<<1^f,I=(I^f)<<1|f|1;b=R,v=1+I-R}let C=r-4;return m.map(A=>{switch(A-C){case 3:return C+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return C+256+(t[a++]<<8|t[a++]);case 1:return C+t[a++];default:return A-1}})}function IVe(t){let e=0;return()=>t[e++]}function Kne(t){return IVe(xVe(NVe(t)))}function NVe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function TVe(t){return t&1?~t>>1:t>>1}function RVe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=TVe(e());return n}function SC(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Yne(t){return xC(()=>{let e=SC(t);if(e.length)return e})}function Qne(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(PVe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(kVe(n,t))}return e.flat()}function xC(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Jne(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)RVe(t,n).forEach((i,o)=>r[o].push(i));return r}function PVe(t,e){let n=1+e(),r=e(),s=xC(e);return Jne(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function kVe(t,e){let n=1+e();return Jne(n,1+t,e).map(s=>[s[0],s.slice(1)])}function OVe(t){let e=[],n=SC(t);return s(r([]),[]),e;function r(i){let o=t(),a=xC(()=>{let c=SC(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function DVe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Zne(t){return`{${DVe(t)}}`}function $Ve(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function ib(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function LVe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var MVe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const IC=44032,eN=4352,tN=4449,nN=4519,Xne=19,ere=21,ob=28,rN=ere*ob,UVe=Xne*rN,BVe=IC+UVe,jVe=eN+Xne,FVe=tN+ere,zVe=nN+ob;function sE(t){return t>>24&255}function tre(t){return t&16777215}let K$,rW,Y$,px;function WVe(){let t=Kne(MVe);K$=new Map(Yne(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),rW=new Set(SC(t)),Y$=new Map,px=new Map;for(let[e,n]of Qne(t)){if(!rW.has(e)&&n.length==2){let[r,s]=n,i=px.get(r);i||(i=new Map,px.set(r,i)),i.set(s,e)}Y$.set(e,n.reverse())}}function nre(t){return t>=IC&&t<BVe}function HVe(t,e){if(t>=eN&&t<jVe&&e>=tN&&e<FVe)return IC+(t-eN)*rN+(e-tN)*ob;if(nre(t)&&e>nN&&e<zVe&&(t-IC)%ob==0)return t+(e-nN);{let n=px.get(t);return n&&(n=n.get(e),n)?n:-1}}function rre(t){K$||WVe();let e=[],n=[],r=!1;function s(i){let o=K$.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(nre(i)){let o=i-IC,a=o/rN|0,c=o%rN/ob|0,l=o%ob;s(eN+a),s(tN+c),l>0&&s(nN+l)}else{let o=Y$.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=sE(e[0]);for(let o=1;o<e.length;o++){let a=sE(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=sE(e[--c]),i<=a))break}i=sE(e[o])}}return e}function qVe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=sE(i),a=tre(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=HVe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function sre(t){return rre(t).map(tre)}function GVe(t){return qVe(rre(t))}const sW=45,ire=".",ore=65039,are=1,sN=t=>Array.from(t);function NC(t,e){return t.P.has(e)||t.Q.has(e)}class VVe extends Array{get is_emoji(){return!0}}let Q$,cre,$p,J$,lre,gw,LO,Cy,ap,iW,Z$;function JU(){if(Q$)return;let t=Kne(SVe);const e=()=>SC(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));Q$=new Map(Qne(t)),cre=n(),$p=e(),J$=new Set(e().map(u=>$p[u])),$p=new Set($p),lre=n(),n();let s=Yne(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};gw=xC(u=>{let d=xC(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=ib(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),LO=n(),Cy=new Map;let a=e().concat(sN(LO)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),LO.has(u)||Cy.set(u,f)});for(let{V:u,M:d}of new Set(Cy.values())){let h=[];for(let p of u){let g=gw.filter(m=>NC(m,p)),y=h.find(({G:m})=>g.some(b=>m.has(b)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(p),r(y.G,g)}let f=h.flatMap(p=>sN(p.G));for(let{G:p,V:g}of h){let y=new Set(f.filter(m=>!p.has(m)));for(let m of g)d.set(m,y)}}ap=new Set;let c=new Set;const l=u=>ap.has(u)?c.add(u):ap.add(u);for(let u of gw){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of ap)!Cy.has(u)&&!c.has(u)&&Cy.set(u,are);r(ap,sre(ap)),iW=OVe(t).map(u=>VVe.from(u)).sort(LVe),Z$=new Map;for(let u of iW){let d=[Z$];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===ore?d.push(...f):d=f}for(let h of d)h.V=u}}function ZU(t){return(ure(t)?"":`${XU(ER([t]))} `)+Zne(t)}function XU(t){return`"${t}"`}function KVe(t){if(t.length>=4&&t[2]==sW&&t[3]==sW)throw new Error(`invalid label extension: "${ib(t.slice(0,4))}"`)}function YVe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function QVe(t){let e=t[0],n=tW.get(e);if(n)throw WE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=tW.get(e);if(o){if(s==i)throw WE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw WE(`trailing ${n}`)}function ER(t,e=1/0,n=Zne){let r=[];JVe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];ure(a)&&(r.push(ib(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(ib(t.slice(s,i))),r.join("")}function JVe(t){return JU(),$p.has(t)}function ure(t){return JU(),lre.has(t)}function ZVe(t){return nKe(XVe(t,GVe,iKe))}function XVe(t,e,n){if(!t)return[];JU();let r=0;return t.split(ire).map(s=>{let i=$Ve(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=sKe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(YVe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))KVe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if($p.has(u[0]))throw WE("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&$p.has(y[0]))throw WE(`emoji + combining mark: "${ib(a[g-1])} + ${ER([y[0]])}"`)}QVe(u);let f=sN(new Set(h)),[p]=tKe(f);rKe(p,h),eKe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function eKe(t,e){let n,r=[];for(let s of e){let i=Cy.get(s);if(i===are)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):sN(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>NC(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function tKe(t){let e=gw;for(let n of t){let r=e.filter(s=>NC(s,n));if(!r.length)throw gw.some(s=>NC(s,n))?hre(e[0],n):dre(n);if(e=r,r.length==1)break}return e}function nKe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${XU(ER(e,63))}: ${s}`)}return ib(r)}).join(ire)}function dre(t){return new Error(`disallowed character: ${ZU(t)}`)}function hre(t,e){let n=ZU(e),r=gw.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function WE(t){return new Error(`illegal placement: ${t}`)}function rKe(t,e){for(let n of e)if(!NC(t,n))throw hre(t,n);if(t.M){let n=sre(e);for(let r=1,s=n.length;r<s;r++)if(J$.has(n[r])){let i=r+1;for(let o;i<s&&J$.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${ZU(o)}`);if(i-r>nW)throw new Error(`excessive non-spacing marks: ${XU(ER(n.slice(r-1,i)))} (${i-r}/${nW})`);r=i}}}function sKe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=oKe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(ap.has(o))s.push(o);else{let a=Q$.get(o);if(a)s.push(...a);else if(!cre.has(o))throw dre(o)}}}return s.length&&r.push(e(s)),r}function iKe(t){return t.filter(e=>e!=ore)}function oKe(t,e){let n=Z$,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const fre=new Uint8Array(32);fre.fill(0);function oW(t){return Q(t.length!==0,"invalid ENS name; empty component","comp",t),t}function pre(t){const e=Xu(aKe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(oW(e.slice(r,s))),r=s+1);return Q(r<e.length,"invalid ENS name; empty component","name",t),n.push(oW(e.slice(r))),n}function aKe(t){try{if(t.length===0)throw new Error("empty label");return ZVe(t)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",t)}}function X$(t){Q(typeof t=="string","invalid ENS name; not a string","name",t),Q(t.length,"invalid ENS name (empty label)","name",t);let e=fre;const n=pre(t);for(;n.length;)e=Br(Sr([e,Br(n.pop())]));return Oe(e)}function cKe(t,e){const n=e;return Q(n<=255,"DNS encoded label cannot exceed 255","length",n),Oe(Sr(pre(t).map(r=>{Q(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const gre=new Uint8Array(32);gre.fill(0);const lKe=BigInt(-1),mre=BigInt(0),yre=BigInt(1),uKe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function dKe(t){const e=Ut(t),n=e.length%32;return n?Sr([e,gre.slice(n)]):Oe(e)}const hKe=Af(yre,32),fKe=Af(mre,32),aW={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},MO=["name","version","chainId","verifyingContract","salt"];function cW(t){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const pKe={name:cW("name"),version:cW("version"),chainId:function(t){const e=Ke(t,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):wc(e)},verifyingContract:function(t){try{return mn(t).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Ut(t,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",t),Oe(e)}};function UO(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=nE(uKe,n?r-1:r),i=n?(s+yre)*lKe:mre;return function(o){const a=Ke(o,"value");return Q(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),Af(n?rne(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Q(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Ut(r);return Q(s.length===n,`invalid length for ${t}`,"value",r),dKe(r)}}}switch(t){case"address":return function(e){return hd(mn(e),32)};case"bool":return function(e){return e?hKe:fKe};case"bytes":return function(e){return Br(e)};case"string":return function(e){return Xg(e)}}return null}function lW(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function AS(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var jC,Ru,Xw,uN,wre;const ha=class ha{constructor(e){G(this,uN);ee(this,"primaryType");G(this,jC);G(this,Ru);G(this,Xw);$(this,Ru,new Map),$(this,Xw,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=AS(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),$(this,jC,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Q(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=AS(u.type).base;Q(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!UO(d)&&(Q(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Q(o.length!==0,"missing primary type","types",e),Q(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),ft(this,{primaryType:o[0]});function a(c,l){Q(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),_(this,Ru).set(c,lW(c,i[c])+u.map(d=>lW(d,i[d])).join(""))}}get types(){return JSON.parse(_(this,jC))}getEncoder(e){let n=_(this,Xw).get(e);return n||(n=he(this,uN,wre).call(this,e),_(this,Xw).set(e,n)),n}encodeType(e){const n=_(this,Ru).get(e);return Q(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Br(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(UO(e))return r(e,n);const s=AS(e).array;if(s)return Q(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new ha(e)}static getPrimaryType(e){return ha.from(e).primaryType}static hashStruct(e,n,r){return ha.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=aW[r];Q(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>MO.indexOf(r.name)-MO.indexOf(s.name)),ha.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Sr(["0x1901",ha.hashDomain(e),ha.from(n).hash(r)])}static hash(e,n,r){return Br(ha.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Kn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ha.from(n);o.visit(r,(a,c)=>(a==="address"&&!Kn(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){ha.hashDomain(e);const s={},i=[];MO.forEach(c=>{const l=e[c];l!=null&&(s[c]=pKe[c](l),i.push({name:c,type:aW[c]}))});const o=ha.from(n);n=o.types;const a=Object.assign({},n);return Q(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Oe(Ut(l));if(c.match(/^u?int/))return Ke(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Q(typeof l=="string","invalid string","value",l),l}Q(!1,"unsupported type","type",c)})}}};jC=new WeakMap,Ru=new WeakMap,Xw=new WeakMap,uN=new WeakSet,wre=function(e){{const s=UO(e);if(s)return s}const n=AS(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Q(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _(this,Ru).has(s)&&(a=a.map(Br)),Br(Sr(a))}}const r=this.types[e];if(r){const s=Xg(_(this,Ru).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return _(this,Ru).has(c)?Br(l):l});return o.unshift(s),Sr(o)}}Q(!1,`unknown type: ${e}`,"type",e)};let iN=ha;function Ci(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const gKe="external public payable override",mKe=Ci(gKe.split(" ")),bre="constant external internal payable private public pure view override",yKe=Ci(bre.split(" ")),vre="constructor error event fallback function receive struct",Ere=Ci(vre.split(" ")),_re="calldata memory storage payable indexed",wKe=Ci(_re.split(" ")),bKe="tuple returns",vKe=[vre,_re,bKe,bre].join(" "),EKe=Ci(vKe.split(" ")),_Ke={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},CKe=new RegExp("^(\\s*)"),AKe=new RegExp("^([0-9]+)"),SKe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Cre=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Are=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Is,dc,FC,eL;const dN=class dN{constructor(e){G(this,FC);G(this,Is);G(this,dc);$(this,Is,0),$(this,dc,e.slice())}get offset(){return _(this,Is)}get length(){return _(this,dc).length-_(this,Is)}clone(){return new dN(_(this,dc))}reset(){$(this,Is,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=he(this,FC,eL).call(this,_(this,Is)+1,e.match+1);return $(this,Is,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,Is)<e.match-1;){const r=this.peek().linkNext;n.push(he(this,FC,eL).call(this,_(this,Is)+1,r)),$(this,Is,r)}return $(this,Is,e.match+1),n}peek(){if(_(this,Is)>=_(this,dc).length)throw new Error("out-of-bounds");return _(this,dc)[_(this,Is)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return vd(this,Is)._++,e}toString(){const e=[];for(let n=_(this,Is);n<_(this,dc).length;n++){const r=_(this,dc)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Is=new WeakMap,dc=new WeakMap,FC=new WeakSet,eL=function(e=0,n=0){return new dN(_(this,dc).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Mc=dN;function $f(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(CKe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=_Ke[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Bt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(SKe),a){if(c.text=a[1],i+=c.text.length,EKe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Are)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(AKe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Mc(e.map(o=>Object.freeze(o)))}function uW(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function _R(t,e){if(e.peekKeyword(Ere)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function fd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Sre(t){let e=fd(t,yKe);return uW(e,Ci("constant payable nonpayable".split(" "))),uW(e,Ci("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function ed(t,e){return t.popParams().map(n=>Ls.from(n,e))}function xre(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ke(t.pop().text);throw new Error("invalid gas")}return null}function em(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const xKe=new RegExp(/^(.*)\[([0-9]*)\]$/);function dW(t){const e=t.match(Are);if(Q(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Q(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Q(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const hr={},yo=Symbol.for("_ethers_internal"),hW="_ParamTypeInternal",fW="_ErrorInternal",pW="_EventInternal",gW="_ConstructorInternal",mW="_FallbackInternal",yW="_FunctionInternal",wW="_StructInternal";var e0,gx;const fa=class fa{constructor(e,n,r,s,i,o,a,c){G(this,e0);ee(this,"name");ee(this,"type");ee(this,"baseType");ee(this,"indexed");ee(this,"components");ee(this,"arrayLength");ee(this,"arrayChildren");if(hR(e,hr,"ParamType"),Object.defineProperty(this,yo,{value:hW}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");ft(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return he(this,e0,gx).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(fa.isParamType(e))return e;if(typeof e=="string")try{return fa.from($f(e),n)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Mc){let a="",c="",l=null;fd(e,Ci(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>fa.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=dW(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new fa(hr,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(fd(e,wKe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new fa(hr,p,a,c,h,l,d,u)}const r=e.name;Q(!r||typeof r=="string"&&r.match(Cre),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Q(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(xKe);if(o){const a=parseInt(o[2]||"-1"),c=fa.from({type:o[1],components:e.components});return new fa(hr,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>fa.from(l)):null;return new fa(hr,r||"",i,"tuple",s,a,null,null)}return i=dW(e.type),new fa(hr,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[yo]===hW}};e0=new WeakSet,gx=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;he(u=o,e0,gx).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;he(u=o[l],e0,gx).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Ls=fa;class tm{constructor(e,n,r){ee(this,"type");ee(this,"inputs");hR(e,hr,"Fragment"),r=Object.freeze(r.slice()),ft(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{tm.from(JSON.parse(e))}catch{}return tm.from($f(e))}if(e instanceof Mc)switch(e.peekKeyword(Ere)){case"constructor":return qu.from(e);case"error":return no.from(e);case"event":return Sl.from(e);case"fallback":case"receive":return Cu.from(e);case"function":return xl.from(e);case"struct":return _g.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return qu.from(e);case"error":return no.from(e);case"event":return Sl.from(e);case"fallback":case"receive":return Cu.from(e);case"function":return xl.from(e);case"struct":return _g.from(e)}we(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return qu.isFragment(e)}static isError(e){return no.isFragment(e)}static isEvent(e){return Sl.isFragment(e)}static isFunction(e){return xl.isFragment(e)}static isStruct(e){return _g.isFragment(e)}}class CR extends tm{constructor(n,r,s,i){super(n,r,i);ee(this,"name");Q(typeof s=="string"&&s.match(Cre),"invalid identifier","name",s),i=Object.freeze(i.slice()),ft(this,{name:s})}}function TC(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class no extends CR{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,yo,{value:fW})}get selector(){return Xg(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+TC(e,this.inputs)),n.join(" ")}static from(e){if(no.isFragment(e))return e;if(typeof e=="string")return no.from($f(e));if(e instanceof Mc){const n=_R("error",e),r=ed(e);return em(e),new no(hr,n,r)}return new no(hr,e.name,e.inputs?e.inputs.map(Ls.from):[])}static isFragment(e){return e&&e[yo]===fW}}class Sl extends CR{constructor(n,r,s,i){super(n,"event",r,s);ee(this,"anonymous");Object.defineProperty(this,yo,{value:pW}),ft(this,{anonymous:i})}get topicHash(){return Xg(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+TC(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Ls.from(i)),new Sl(hr,n,r,!1).topicHash}static from(n){if(Sl.isFragment(n))return n;if(typeof n=="string")try{return Sl.from($f(n))}catch{Q(!1,"invalid event fragment","obj",n)}else if(n instanceof Mc){const r=_R("event",n),s=ed(n,!0),i=!!fd(n,Ci(["anonymous"])).has("anonymous");return em(n),new Sl(hr,r,s,i)}return new Sl(hr,n.name,n.inputs?n.inputs.map(r=>Ls.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[yo]===pW}}class qu extends tm{constructor(n,r,s,i,o){super(n,r,s);ee(this,"payable");ee(this,"gas");Object.defineProperty(this,yo,{value:gW}),ft(this,{payable:i,gas:o})}format(n){if(we(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${TC(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(qu.isFragment(n))return n;if(typeof n=="string")try{return qu.from($f(n))}catch{Q(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Mc){fd(n,Ci(["constructor"]));const r=ed(n),s=!!fd(n,mKe).has("payable"),i=xre(n);return em(n),new qu(hr,"constructor",r,s,i)}return new qu(hr,"constructor",n.inputs?n.inputs.map(Ls.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[yo]===gW}}class Cu extends tm{constructor(n,r,s){super(n,"fallback",r);ee(this,"payable");Object.defineProperty(this,yo,{value:mW}),ft(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Cu.isFragment(n))return n;if(typeof n=="string")try{return Cu.from($f(n))}catch{Q(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Mc){const r=n.toString(),s=n.peekKeyword(Ci(["fallback","receive"]));if(Q(s,"type must be fallback or receive","obj",r),n.popKeyword(Ci(["fallback","receive"]))==="receive"){const c=ed(n);return Q(c.length===0,"receive cannot have arguments","obj.inputs",c),fd(n,Ci(["payable"])),em(n),new Cu(hr,[],!0)}let o=ed(n);o.length?Q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Ls.from("bytes")];const a=Sre(n);if(Q(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),fd(n,Ci(["returns"])).has("returns")){const c=ed(n);Q(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return em(n),new Cu(hr,o,a==="payable")}if(n.type==="receive")return new Cu(hr,[],!0);if(n.type==="fallback"){const r=[Ls.from("bytes")],s=n.stateMutability==="payable";return new Cu(hr,r,s)}Q(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[yo]===mW}}class xl extends CR{constructor(n,r,s,i,o,a){super(n,"function",r,i);ee(this,"constant");ee(this,"outputs");ee(this,"stateMutability");ee(this,"payable");ee(this,"gas");Object.defineProperty(this,yo,{value:yW}),o=Object.freeze(o.slice()),ft(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Xg(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+TC(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(TC(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Ls.from(i)),new xl(hr,n,"view",r,[],null).selector}static from(n){if(xl.isFragment(n))return n;if(typeof n=="string")try{return xl.from($f(n))}catch{Q(!1,"invalid function fragment","obj",n)}else if(n instanceof Mc){const s=_R("function",n),i=ed(n),o=Sre(n);let a=[];fd(n,Ci(["returns"])).has("returns")&&(a=ed(n));const c=xre(n);return em(n),new xl(hr,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new xl(hr,n.name,r,n.inputs?n.inputs.map(Ls.from):[],n.outputs?n.outputs.map(Ls.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[yo]===yW}}class _g extends CR{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,yo,{value:wW})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return _g.from($f(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Mc){const n=_R("struct",e),r=ed(e);return em(e),new _g(hr,n,r)}return new _g(hr,e.name,e.inputs?e.inputs.map(Ls.from):[])}static isFragment(e){return e&&e[yo]===wW}}const jc=new Map;jc.set(0,"GENERIC_PANIC");jc.set(1,"ASSERT_FALSE");jc.set(17,"OVERFLOW");jc.set(18,"DIVIDE_BY_ZERO");jc.set(33,"ENUM_RANGE_ERROR");jc.set(34,"BAD_STORAGE_DATA");jc.set(49,"STACK_UNDERFLOW");jc.set(50,"ARRAY_RANGE_ERROR");jc.set(65,"OUT_OF_MEMORY");jc.set(81,"UNINITIALIZED_FUNCTION_CALL");const IKe=new RegExp(/^bytes([0-9]*)$/),NKe=new RegExp(/^(u?int)([0-9]*)$/);let BO=null,bW=1024;function TKe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Ut(n);if(n=Oe(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Oe(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Oe(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${jc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?mn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=mn(e.from)),sr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var vh,Ay;const hN=class hN{constructor(){G(this,vh)}getDefaultValue(e){const n=e.map(s=>he(this,vh,Ay).call(this,Ls.from(s)));return new CS(n,"_").defaultValue()}encode(e,n){ene(n.length,e.length,"types/values length mismatch");const r=e.map(o=>he(this,vh,Ay).call(this,Ls.from(o))),s=new CS(r,"_"),i=new j$;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>he(this,vh,Ay).call(this,Ls.from(o)));return new CS(s,"_").decode(new F$(n,r,bW))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),bW=e}static defaultAbiCoder(){return BO==null&&(BO=new hN),BO}static getBuiltinCallException(e,n,r){return TKe(e,n,r,hN.defaultAbiCoder())}};vh=new WeakSet,Ay=function(e){if(e.isArray())return new VGe(he(this,vh,Ay).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new CS(e.components.map(r=>he(this,vh,Ay).call(this,r)),e.name);switch(e.baseType){case"address":return new qGe(e.name);case"bool":return new KGe(e.name);case"string":return new rVe(e.name);case"bytes":return new YGe(e.name);case"":return new ZGe(e.name)}let n=e.type.match(NKe);if(n){let r=parseInt(n[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new nVe(r/8,n[1]==="int",e.name)}if(n=e.type.match(IKe),n){let r=parseInt(n[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new QGe(r,e.name)}Q(!1,"invalid type","type",e.type)};let RC=hN;class RKe{constructor(e,n,r){ee(this,"fragment");ee(this,"name");ee(this,"signature");ee(this,"topic");ee(this,"args");const s=e.name,i=e.format();ft(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class PKe{constructor(e,n,r,s){ee(this,"fragment");ee(this,"name");ee(this,"args");ee(this,"signature");ee(this,"selector");ee(this,"value");const i=e.name,o=e.format();ft(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class kKe{constructor(e,n,r){ee(this,"fragment");ee(this,"name");ee(this,"args");ee(this,"signature");ee(this,"selector");const s=e.name,i=e.format();ft(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class vW{constructor(e){ee(this,"hash");ee(this,"_isIndexed");ft(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const EW={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},_W={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&EW[t.toString()]&&(e=EW[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var ul,dl,hl,Qs,Ll,mx,yx;const wp=class wp{constructor(e){G(this,Ll);ee(this,"fragments");ee(this,"deploy");ee(this,"fallback");ee(this,"receive");G(this,ul);G(this,dl);G(this,hl);G(this,Qs);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,$(this,hl,new Map),$(this,ul,new Map),$(this,dl,new Map);const r=[];for(const o of n)try{r.push(tm.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}ft(this,{fragments:Object.freeze(r)});let s=null,i=!1;$(this,Qs,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}ft(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Q(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,hl);break;case"event":c=_(this,dl);break;case"error":c=_(this,ul);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||ft(this,{deploy:qu.from("constructor()")}),ft(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return RC.defaultAbiCoder()}getFunctionName(e){const n=he(this,Ll,mx).call(this,e,null,!1);return Q(n,"no matching function","key",e),n.name}hasFunction(e){return!!he(this,Ll,mx).call(this,e,null,!1)}getFunction(e,n){return he(this,Ll,mx).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,hl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,hl).get(s),r)}}getEventName(e){const n=he(this,Ll,yx).call(this,e,null,!1);return Q(n,"no matching event","key",e),n.name}hasEvent(e){return!!he(this,Ll,yx).call(this,e,null,!1)}getEvent(e,n){return he(this,Ll,yx).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,dl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,dl).get(s),r)}}getError(e,n){if(Kn(e)){const s=e.toLowerCase();if(_W[s])return no.from(_W[s].signature);for(const i of _(this,ul).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,ul))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?no.from("error Error(string)"):e==="Panic"?no.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=no.from(e).format(),e==="Error(string)")return no.from("error Error(string)");if(e==="Panic(uint256)")return no.from("error Panic(uint256)");const r=_(this,ul).get(e);return r||null}forEachError(e){const n=Array.from(_(this,ul).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,ul).get(s),r)}}_decodeParams(e,n){return _(this,Qs).decode(e,n)}_encodeParams(e,n){return _(this,Qs).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(vr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,vr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Sr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(vr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,vr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Sr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Q(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=wi(n);if(s.length%32===0)try{return _(this,Qs).decode(e.outputs,s)}catch{r="could not decode result data"}we(!1,r,"BAD_DATA",{value:Oe(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Ut(e,"data"),s=RC.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Oe(r.slice(0,4)),c=this.getError(a);if(c)try{const l=_(this,Qs).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Oe(_(this,Qs).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Q(i,"unknown event","eventFragment",e),e=i}we(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Xg(o):i.type==="bytes"?Br(Oe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Af(o):i.type.match(/^bytes/)?o=ZHe(o,32):i.type==="address"&&_(this,Qs).encode(["address"],[o]),hd(Oe(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Q(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Q(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Q(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Xg(c));else if(o.type==="bytes")r.push(Br(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,Qs).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,Qs).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Q(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Q(Kn(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Ls.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?_(this,Qs).decode(s,Sr(r)):null,c=_(this,Qs).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new vW(null);else if(o[p])g=new vW(a[h++]);else try{g=a[h++]}catch(y){g=y}else try{g=c[d++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),eb.fromItems(l,u)}parseTransaction(e){const n=Ut(e.data,"tx.data"),r=Ke(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Oe(n.slice(0,4)));if(!s)return null;const i=_(this,Qs).decode(s.inputs,n.slice(4));return new PKe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new RKe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Oe(e),r=this.getError(vr(n,0,4));if(!r)return null;const s=_(this,Qs).decode(r.inputs,vr(n,4));return new kKe(r,r.selector,s)}static from(e){return e instanceof wp?e:typeof e=="string"?new wp(JSON.parse(e)):typeof e.formatJson=="function"?new wp(e.formatJson()):typeof e.format=="function"?new wp(e.format("json")):new wp(e)}};ul=new WeakMap,dl=new WeakMap,hl=new WeakMap,Qs=new WeakMap,Ll=new WeakSet,mx=function(e,n,r){if(Kn(e)){const i=e.toLowerCase();for(const o of _(this,hl).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,hl))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;ti.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(ti.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,hl).get(xl.from(e).format());return s||null},yx=function(e,n,r){if(Kn(e)){const i=e.toLowerCase();for(const o of _(this,dl).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,dl))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(ti.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,dl).get(Sl.from(e).format());return s||null};let tL=wp;const Ire=BigInt(0);function mw(t){return t??null}function Tr(t){return t==null?null:t.toString()}class CW{constructor(e,n,r){ee(this,"gasPrice");ee(this,"maxFeePerGas");ee(this,"maxPriorityFeePerGas");ft(this,{gasPrice:mw(e),maxFeePerGas:mw(n),maxPriorityFeePerGas:mw(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Tr(e),maxFeePerGas:Tr(n),maxPriorityFeePerGas:Tr(r)}}}function oN(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Oe(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Ke(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Bt(t[s],`request.${s}`));return t.accessList&&(e.accessList=Sm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>jU(s)?Oe(s):Object.assign({},s))),e}var Pu;class OKe{constructor(e,n){ee(this,"provider");ee(this,"number");ee(this,"hash");ee(this,"timestamp");ee(this,"parentHash");ee(this,"parentBeaconBlockRoot");ee(this,"nonce");ee(this,"difficulty");ee(this,"gasLimit");ee(this,"gasUsed");ee(this,"stateRoot");ee(this,"receiptsRoot");ee(this,"blobGasUsed");ee(this,"excessBlobGas");ee(this,"miner");ee(this,"prevRandao");ee(this,"extraData");ee(this,"baseFeePerGas");G(this,Pu);$(this,Pu,e.transactions.map(r=>typeof r!="string"?new PC(r,n):r)),ft(this,{provider:n,hash:mw(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:mw(e.prevRandao),extraData:e.extraData,baseFeePerGas:mw(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,Pu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,Pu).slice();return e.length===0?[]:(we(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Tr(e),difficulty:Tr(n),extraData:r,gasLimit:Tr(s),gasUsed:Tr(i),blobGasUsed:Tr(this.blobGasUsed),excessBlobGas:Tr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,Pu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,Pu)[e];else{const r=e.toLowerCase();for(const s of _(this,Pu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return DKe(this)}}Pu=new WeakMap;class V1{constructor(e,n){ee(this,"provider");ee(this,"transactionHash");ee(this,"blockHash");ee(this,"blockNumber");ee(this,"removed");ee(this,"address");ee(this,"data");ee(this,"topics");ee(this,"index");ee(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());ft(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return we(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return we(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return we(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return $Ke(this)}}var zC;class Nre{constructor(e,n){ee(this,"provider");ee(this,"to");ee(this,"from");ee(this,"contractAddress");ee(this,"hash");ee(this,"index");ee(this,"blockHash");ee(this,"blockNumber");ee(this,"logsBloom");ee(this,"gasUsed");ee(this,"blobGasUsed");ee(this,"cumulativeGasUsed");ee(this,"gasPrice");ee(this,"blobGasPrice");ee(this,"type");ee(this,"status");ee(this,"root");G(this,zC);$(this,zC,Object.freeze(e.logs.map(s=>new V1(s,n))));let r=Ire;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),ft(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,zC)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Tr(this.cumulativeGasUsed),from:n,gasPrice:Tr(this.gasPrice),blobGasUsed:Tr(this.blobGasUsed),blobGasPrice:Tr(this.blobGasPrice),gasUsed:Tr(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Rre(this)}reorderedEvent(e){return we(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Tre(this,e)}}zC=new WeakMap;var Eh;const aB=class aB{constructor(e,n){ee(this,"provider");ee(this,"blockNumber");ee(this,"blockHash");ee(this,"index");ee(this,"hash");ee(this,"type");ee(this,"to");ee(this,"from");ee(this,"nonce");ee(this,"gasLimit");ee(this,"gasPrice");ee(this,"maxPriorityFeePerGas");ee(this,"maxFeePerGas");ee(this,"maxFeePerBlobGas");ee(this,"data");ee(this,"value");ee(this,"chainId");ee(this,"signature");ee(this,"accessList");ee(this,"blobVersionedHashes");ee(this,"authorizationList");G(this,Eh);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,$(this,Eh,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Tr(this.chainId),data:l,from:a,gasLimit:Tr(this.gasLimit),gasPrice:Tr(this.gasPrice),hash:s,maxFeePerGas:Tr(this.maxFeePerGas),maxPriorityFeePerGas:Tr(this.maxPriorityFeePerGas),maxFeePerBlobGas:Tr(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Tr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await pi({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=_(this,Eh),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await pi({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,Eh)&&(o=_(this,Eh)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const m=await g.getTransaction(y);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(m.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?v="repriced":m.data==="0x"&&m.from===m.to&&m.value===Ire&&(v="cancelled"),we(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:m.replaceableTransaction(i),hash:m.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;we(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(m=>m())};if(p.push(()=>{a=!0}),s>0){const m=setTimeout(()=>{g(),f(sr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(m)})}const y=async m=>{if(await m.confirmations()>=r){g();try{h(l(m))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const m=async()=>{try{await c()}catch(b){if(Ps(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",m)};p.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return we(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Rre(this)}reorderedEvent(e){return we(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),we(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Tre(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new aB(this,this.provider);return $(n,Eh,e),n}};Eh=new WeakMap;let PC=aB;function DKe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Tre(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Rre(t){return{orphan:"drop-transaction",tx:t}}function $Ke(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class eB extends V1{constructor(n,r,s){super(n,n.provider);ee(this,"interface");ee(this,"fragment");ee(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);ft(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Pre extends V1{constructor(n,r){super(n,n.provider);ee(this,"error");ft(this,{error:r})}}var t0;class LKe extends Nre{constructor(n,r,s){super(s,r);G(this,t0);$(this,t0,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,t0).getEvent(n.topics[0]):null;if(r)try{return new eB(n,_(this,t0),r)}catch(s){return new Pre(n,s)}return n})}}t0=new WeakMap;var WC;class tB extends PC{constructor(n,r,s){super(s,r);G(this,WC);$(this,WC,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new LKe(_(this,WC),this.provider,s)}}WC=new WeakMap;class kre extends sne{constructor(n,r,s,i){super(n,r,s);ee(this,"log");ft(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class MKe extends kre{constructor(e,n,r,s,i){super(e,n,r,new eB(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);ft(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const AW=BigInt(0);function Ore(t){return t&&typeof t.call=="function"}function Dre(t){return t&&typeof t.estimateGas=="function"}function AR(t){return t&&typeof t.resolveName=="function"}function $re(t){return t&&typeof t.sendTransaction=="function"}function Lre(t){if(t!=null){if(AR(t))return t;if(t.provider)return t.provider}}var HC;class UKe{constructor(e,n,r){G(this,HC);ee(this,"fragment");if(ft(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=nm(e.runner,"resolveName"),i=AR(s)?s:null;$(this,HC,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>_i(h,i))):_i(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,HC)}}HC=new WeakMap;function nm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Lp(t){return t==null?null:t.provider||null}async function Mre(t,e){const n=ti.dereference(t,"overrides");Q(typeof n=="object","invalid overrides parameter","overrides",t);const r=oN(n);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function BKe(t,e,n){const r=nm(t,"resolveName"),s=AR(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=ti.dereference(c,a),a==="address"?_i(c,s):c))))}function jKe(t){const e=async function(o){const a=await Mre(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await _i(a.from,Lre(t.runner)));const c=t.interface,l=Ke(a.value||AW,"overrides.value")===AW,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Q(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=nm(t.runner,"call");we(Ore(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw BU(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;we($re(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Lp(t.runner);return new tB(t.interface,l,c)},s=async function(o){const a=nm(t.runner,"estimateGas");return we(Dre(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return ft(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function FKe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return we(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await Mre(l.pop()),d.from&&(d.from=await _i(d.from,Lre(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await BKe(t.runner,u.inputs,l);return Object.assign({},d,await pi({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;we($re(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Lp(t.runner);return new tB(t.interface,h,d)},o=async function(...l){const u=nm(t.runner,"estimateGas");return we(Dre(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=nm(t.runner,"call");we(Ore(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw BU(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return ft(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return we(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function zKe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return we(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new UKe(t,n(...s),s)};return ft(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return we(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const aN=Symbol.for("_ethersInternal_contract"),Ure=new WeakMap;function WKe(t,e){Ure.set(t[aN],e)}function Po(t){return Ure.get(t[aN])}function HKe(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function nB(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(Kn(o,32))return o;const a=t.interface.getEvent(o);return Q(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?Kn(e,32)?n=[e]:(r=t.interface.getEvent(e),Q(r,"unknown fragment","event",e),n=[r.topicHash]):HKe(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Q(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function iE(t,e){const{subs:n}=Po(t);return n.get((await nB(t,e)).tag)||null}async function SW(t,e,n){const r=Lp(t.runner);we(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await nB(t,n),{addr:a,subs:c}=Po(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=y=>{let m=s;if(m==null)try{m=t.interface.getEvent(y.topics[0])}catch{}if(m){const b=m,v=s?t.interface.decodeEventLog(s,y.data,y.topics):[];rL(t,n,v,C=>new MKe(t,C,n,b,y))}else rL(t,n,[],b=>new kre(t,b,n,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),r.off(d,h)}},c.set(i,l)}return l}let nL=Promise.resolve();async function qKe(t,e,n,r){await nL;const s=await iE(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Po(t).subs.delete(s.tag)),i>0}async function rL(t,e,n,r){try{await nL}catch{}const s=qKe(t,e,n,r);return nL=s,await s}const SS=["then"];var YW;YW=aN;const HE=class HE{constructor(e,n,r,s){ee(this,"target");ee(this,"interface");ee(this,"runner");ee(this,"filters");ee(this,YW);ee(this,"fallback");Q(typeof e=="string"||Wne(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=tL.from(n);ft(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,aN,{value:{}});let o,a=null,c=null;if(s){const d=Lp(r);c=new tB(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(Kn(e))a=e,o=Promise.resolve(e);else{const d=nm(r,"resolveName");if(!AR(d))throw sr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw sr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Po(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Po(this).addr=d,d});WKe(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||SS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Ps(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>SS.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return ft(this,{filters:u}),ft(this,{fallback:i.receive||i.fallback?jKe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||SS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Ps(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||SS.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new HE(this.target,this.interface,e)}attach(e){return new HE(e,this.interface,this.runner)}async getAddress(){return await Po(this).addrPromise}async getDeployedCode(){const e=Lp(this.runner);we(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Lp(this.runner);return we(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Po(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),FKe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),zKe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Po(this),o=s||await i,{fragment:a,topics:c}=await nB(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Lp(this.runner);return we(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new eB(d,this.interface,h)}catch(f){return new Pre(d,f)}return new V1(d,u)})}async on(e,n){const r=await SW(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await SW(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await rL(this,e,n,null)}async listenerCount(e){if(e){const s=await iE(this,e);return s?s.listeners.length:0}const{subs:n}=Po(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await iE(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Po(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await iE(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Po(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await iE(this,e);if(!n)return this;n.stop(),Po(this).subs.delete(n.tag)}else{const{subs:n}=Po(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends HE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let sL=HE;function GKe(){return sL}class yw extends GKe(){}function jO(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Q(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class VKe{constructor(e){ee(this,"name");ft(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Bre=new RegExp("^(ipfs)://(.*)$","i"),xW=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Bre,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var _h,sg,Ch,Sy,fN,jre;const Yy=class Yy{constructor(e,n,r){G(this,Ch);ee(this,"provider");ee(this,"address");ee(this,"name");G(this,_h);G(this,sg);ft(this,{provider:e,address:n,name:r}),$(this,_h,null),$(this,sg,new yw(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,_h)==null&&$(this,_h,(async()=>{try{return await _(this,sg).supportsInterface("0x9061b923")}catch(e){if(Ps(e,"CALL_EXCEPTION"))return!1;throw $(this,_h,null),e}})()),await _(this,_h)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await he(this,Ch,Sy).call(this,"addr(bytes32)");return i==null||i===CC?null:i}catch(i){if(Ps(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await he(this,Ch,Sy).call(this,"addr(bytes32,uint)",[i]);if(Kn(o,20))return mn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof VKe&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await he(this,Ch,Sy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;we(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await he(this,Ch,Sy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await he(this,Ch,Sy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${tqe("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;we(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<xW.length;r++){const s=n.match(xW[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=jO(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new yw(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",Af(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=jO(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Sf(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const m=f.body;return m&&e.push({type:"!metadata",value:Oe(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(Bre)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=jO(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return we(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await he(s=Yy,fN,jre).call(s,e,r);if(i!=null){const o=new Yy(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};_h=new WeakMap,sg=new WeakMap,Ch=new WeakSet,Sy=async function(e,n){n=(n||[]).slice();const r=_(this,sg).interface;n.unshift(X$(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),we(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[cKe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await _(this,sg)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Ps(i,"CALL_EXCEPTION"))throw i}return null},fN=new WeakSet,jre=async function(e,n){const r=await Yy.getEnsAddress(e);try{const i=await new yw(r,["function resolver(bytes32) view returns (address)"],e).resolver(X$(n),{enableCcipRead:!0});return i===CC?null:i}catch(s){throw s}return null},G(Yy,fN);let cN=Yy;const IW=BigInt(0);function Vt(t,e){return function(n){return n==null?e:t(n)}}function kC(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function K1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";we(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function KKe(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function ab(t){return Q(Kn(t,!0),"invalid data","value",t),t}function Rs(t){return Q(Kn(t,32),"invalid hash","value",t),t}const YKe=K1({address:mn,blockHash:Rs,blockNumber:Bt,data:ab,index:Bt,removed:Vt(KKe,!1),topics:kC(Rs),transactionHash:Rs,transactionIndex:Bt},{index:["logIndex"]});function QKe(t){return YKe(t)}const JKe=K1({hash:Vt(Rs),parentHash:Rs,parentBeaconBlockRoot:Vt(Rs,null),number:Bt,timestamp:Bt,nonce:Vt(ab),difficulty:Ke,gasLimit:Ke,gasUsed:Ke,stateRoot:Vt(Rs,null),receiptsRoot:Vt(Rs,null),blobGasUsed:Vt(Ke,null),excessBlobGas:Vt(Ke,null),miner:Vt(mn),prevRandao:Vt(Rs,null),extraData:ab,baseFeePerGas:Vt(Ke)},{prevRandao:["mixHash"]});function ZKe(t){const e=JKe(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Fre(n)),e}const XKe=K1({transactionIndex:Bt,blockNumber:Bt,transactionHash:Rs,address:mn,topics:kC(Rs),data:ab,index:Bt,blockHash:Rs},{index:["logIndex"]});function eYe(t){return XKe(t)}const tYe=K1({to:Vt(mn,null),from:Vt(mn,null),contractAddress:Vt(mn,null),index:Bt,root:Vt(Oe),gasUsed:Ke,blobGasUsed:Vt(Ke,null),logsBloom:Vt(ab),blockHash:Rs,hash:Rs,logs:kC(eYe),blockNumber:Bt,cumulativeGasUsed:Ke,effectiveGasPrice:Vt(Ke),blobGasPrice:Vt(Ke,null),status:Vt(Bt),type:Vt(Bt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function nYe(t){return tYe(t)}function Fre(t){t.to&&Ke(t.to)===IW&&(t.to="0x0000000000000000000000000000000000000000");const e=K1({hash:Rs,index:Vt(Bt,void 0),type:n=>n==="0x"||n==null?0:Bt(n),accessList:Vt(Sm,null),blobVersionedHashes:Vt(kC(Rs,!0),null),authorizationList:Vt(kC(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:mn(n.address),chainId:Ke(n.chainId),nonce:Ke(n.nonce),signature:po.from(r)}},!1),null),blockHash:Vt(Rs,null),blockNumber:Vt(Bt,null),transactionIndex:Vt(Bt,null),from:mn,gasPrice:Vt(Ke),maxPriorityFeePerGas:Vt(Ke),maxFeePerGas:Vt(Ke),maxFeePerBlobGas:Vt(Ke,null),gasLimit:Ke,to:Vt(mn,null),value:Ke,nonce:Bt,data:ab,creates:Vt(mn,null),chainId:Vt(Ke,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=HGe(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=po.from(t.signature):e.signature=po.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ke(e.blockHash)===IW&&(e.blockHash=null),e}const rYe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Y1{constructor(e){ee(this,"name");ft(this,{name:e})}clone(){return new Y1(this.name)}}class SR extends Y1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);ee(this,"effectiveBlock");ee(this,"txBase");ee(this,"txCreate");ee(this,"txDataZero");ee(this,"txDataNonzero");ee(this,"txAccessListStorageKey");ee(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Q(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),ft(this,s)}clone(){return new SR(this.effectiveBlock,this)}}class xR extends Y1{constructor(n,r){super("org.ethers.plugins.network.Ens");ee(this,"address");ee(this,"targetNetwork");ft(this,{address:n||rYe,targetNetwork:r??1})}clone(){return new xR(this.address,this.targetNetwork)}}var qC,GC;class sYe extends Y1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");G(this,qC);G(this,GC);$(this,qC,n),$(this,GC,r)}get url(){return _(this,qC)}get processFunc(){return _(this,GC)}clone(){return this}}qC=new WeakMap,GC=new WeakMap;const FO=new Map;var n0,r0,Ah;const Qy=class Qy{constructor(e,n){G(this,n0);G(this,r0);G(this,Ah);$(this,n0,e),$(this,r0,Ke(n)),$(this,Ah,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,n0)}set name(e){$(this,n0,e)}get chainId(){return _(this,r0)}set chainId(e){$(this,r0,Ke(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ke(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ke(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ke(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,Ah).values())}attachPlugin(e){if(_(this,Ah).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Ah).set(e.name,e.clone()),this}getPlugin(e){return _(this,Ah).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Qy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new SR;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=Sm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(iYe(),e==null)return Qy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=FO.get(e);if(n)return n();if(typeof e=="bigint")return new Qy("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Qy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new xR(e.ensAddress,e.ensNetwork)),n}Q(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=FO.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),FO.set(e,n)}};n0=new WeakMap,r0=new WeakMap,Ah=new WeakMap;let Nl=Qy;function NW(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function TW(t){return new sYe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:NW(a.maxFee,9),maxPriorityFeePerGas:NW(a.maxPriorityFee,9)}}catch(i){we(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let RW=!1;function iYe(){if(RW)return;RW=!0;function t(e,n,r){const s=function(){const i=new Nl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new xR(null,r.ensNetwork)),i.attachPlugin(new SR),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Nl.register(e,s),Nl.register(n,s),r.altNames&&r.altNames.forEach(i=>{Nl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[TW("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[TW("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function iL(t){return JSON.parse(JSON.stringify(t))}var ku,ma,Sh,fl,s0,wx;class oYe{constructor(e){G(this,s0);G(this,ku);G(this,ma);G(this,Sh);G(this,fl);$(this,ku,e),$(this,ma,null),$(this,Sh,4e3),$(this,fl,-2)}get pollingInterval(){return _(this,Sh)}set pollingInterval(e){$(this,Sh,e)}start(){_(this,ma)||($(this,ma,_(this,ku)._setTimeout(he(this,s0,wx).bind(this),_(this,Sh))),he(this,s0,wx).call(this))}stop(){_(this,ma)&&(_(this,ku)._clearTimeout(_(this,ma)),$(this,ma,null))}pause(e){this.stop(),e&&$(this,fl,-2)}resume(){this.start()}}ku=new WeakMap,ma=new WeakMap,Sh=new WeakMap,fl=new WeakMap,s0=new WeakSet,wx=async function(){try{const e=await _(this,ku).getBlockNumber();if(_(this,fl)===-2){$(this,fl,e);return}if(e!==_(this,fl)){for(let n=_(this,fl)+1;n<=e;n++){if(_(this,ma)==null)return;await _(this,ku).emit("block",n)}$(this,fl,e)}}catch{}_(this,ma)!=null&&$(this,ma,_(this,ku)._setTimeout(he(this,s0,wx).bind(this),_(this,Sh)))};var ig,og,xh;class rB{constructor(e){G(this,ig);G(this,og);G(this,xh);$(this,ig,e),$(this,xh,!1),$(this,og,n=>{this._poll(n,_(this,ig))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,xh)||($(this,xh,!0),_(this,og).call(this,-2),_(this,ig).on("block",_(this,og)))}stop(){_(this,xh)&&($(this,xh,!1),_(this,ig).off("block",_(this,og)))}pause(e){this.stop()}resume(){this.start()}}ig=new WeakMap,og=new WeakMap,xh=new WeakMap;var i0,Ou;class aYe extends rB{constructor(n,r){super(n);G(this,i0);G(this,Ou);$(this,i0,r),$(this,Ou,-2)}pause(n){n&&$(this,Ou,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(_(this,i0));s!=null&&(_(this,Ou)===-2?$(this,Ou,s.number):s.number>_(this,Ou)&&(r.emit(_(this,i0),s.number),$(this,Ou,s.number)))}}i0=new WeakMap,Ou=new WeakMap;var pN;class cYe extends rB{constructor(n,r){super(n);G(this,pN);$(this,pN,iL(r))}async _poll(n,r){throw new Error("@TODO")}}pN=new WeakMap;var o0;class lYe extends rB{constructor(n,r){super(n);G(this,o0);$(this,o0,r)}async _poll(n,r){const s=await r.getTransactionReceipt(_(this,o0));s&&r.emit(_(this,o0),s)}}o0=new WeakMap;var Du,a0,c0,Ih,ya,gN,zre;class sB{constructor(e,n){G(this,gN);G(this,Du);G(this,a0);G(this,c0);G(this,Ih);G(this,ya);$(this,Du,e),$(this,a0,iL(n)),$(this,c0,he(this,gN,zre).bind(this)),$(this,Ih,!1),$(this,ya,-2)}start(){_(this,Ih)||($(this,Ih,!0),_(this,ya)===-2&&_(this,Du).getBlockNumber().then(e=>{$(this,ya,e)}),_(this,Du).on("block",_(this,c0)))}stop(){_(this,Ih)&&($(this,Ih,!1),_(this,Du).off("block",_(this,c0)))}pause(e){this.stop(),e&&$(this,ya,-2)}resume(){this.start()}}Du=new WeakMap,a0=new WeakMap,c0=new WeakMap,Ih=new WeakMap,ya=new WeakMap,gN=new WeakSet,zre=async function(e){if(_(this,ya)===-2)return;const n=iL(_(this,a0));n.fromBlock=_(this,ya)+1,n.toBlock=e;const r=await _(this,Du).getLogs(n);if(r.length===0){_(this,ya)<e-60&&$(this,ya,e-60);return}for(const s of r)_(this,Du).emit(_(this,a0),s),$(this,ya,s.blockNumber)};const uYe=BigInt(2),dYe=10;function xS(t){return t&&typeof t.then=="function"}function bx(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class Wre{constructor(e){ee(this,"name");ft(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function hYe(t){return JSON.parse(JSON.stringify(t))}function oL(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function zO(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Kn(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:bx("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:bx("orphan",n),filter:hYe(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?oL(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{Kn(a)?s.push(a):i.push((async()=>{s.push(await _i(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=oL(s.map(a=>a.toLowerCase()))}return{filter:r,tag:bx("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",t)}function WO(){return new Date().getTime()}const fYe={cacheTimeout:250,pollingInterval:4e3};var Js,Nh,Zs,l0,$o,ag,Th,$u,VC,wa,u0,d0,$t,No,aL,cL,oE,lL,aE,vx;class pYe{constructor(e,n){G(this,$t);G(this,Js);G(this,Nh);G(this,Zs);G(this,l0);G(this,$o);G(this,ag);G(this,Th);G(this,$u);G(this,VC);G(this,wa);G(this,u0);G(this,d0);if($(this,d0,Object.assign({},fYe,n||{})),e==="any")$(this,ag,!0),$(this,$o,null);else if(e){const r=Nl.from(e);$(this,ag,!1),$(this,$o,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else $(this,ag,!1),$(this,$o,null);$(this,$u,-1),$(this,Th,new Map),$(this,Js,new Map),$(this,Nh,new Map),$(this,Zs,null),$(this,l0,!1),$(this,VC,1),$(this,wa,new Map),$(this,u0,!1)}get pollingInterval(){return _(this,d0).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,Nh).values())}attachPlugin(e){if(_(this,Nh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Nh).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,Nh).get(e)||null}get disableCcipRead(){return _(this,u0)}set disableCcipRead(e){$(this,u0,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Sf(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}we(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}we(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new OKe(ZKe(e),this)}_wrapLog(e,n){return new V1(QKe(e),this)}_wrapTransactionReceipt(e,n){return new Nre(nYe(e),this)}_wrapTransactionResponse(e,n){return new PC(Fre(e),this)}_detectNetwork(){we(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){we(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Bt(await he(this,$t,No).call(this,{method:"getBlockNumber"}),"%response");return _(this,$u)>=0&&$(this,$u,e),e}_getAddress(e){return _i(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Kn(e))return Kn(e,32)?e:wc(e);if(typeof e=="bigint"&&(e=Bt(e,"blockTag")),typeof e=="number")return e>=0?wc(e):_(this,$u)>=0?wc(_(this,$u)+e):this.getBlockNumber().then(n=>wc(n+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?oL(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=oN(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=_i(n[s],this);xS(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);xS(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,$o)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,$o)===s&&$(this,$o,null),i}})();return $(this,$o,s),(await s).clone()}const e=_(this,$o),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,ag)?(this.emit("network",r,n),_(this,$o)===e&&$(this,$o,Promise.resolve(r))):we(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await pi({_block:he(this,$t,lL).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await he(this,$t,No).call(this,{method:"getGasPrice"});return Ke(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await he(this,$t,No).call(this,{method:"getPriorityFee"});return Ke(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*uYe+c),new CW(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Sf(r.url),i=await r.processFunc(n,this,s);return new CW(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return xS(n)&&(n=await n),Ke(await he(this,$t,No).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await pi({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await he(this,$t,cL).call(this,he(this,$t,aL).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ke(await he(this,$t,oE).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Bt(await he(this,$t,oE).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Oe(await he(this,$t,oE).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Ke(n,"position");return Oe(await he(this,$t,oE).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await pi({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=XI.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await pi({network:this.getNetwork(),params:he(this,$t,lL).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await pi({network:this.getNetwork(),params:he(this,$t,No).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await pi({network:this.getNetwork(),params:he(this,$t,No).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await he(this,$t,No).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await pi({network:this.getNetwork(),result:he(this,$t,No).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Oe(n)}async getLogs(e){let n=this._getFilter(e);xS(n)&&(n=await n);const{network:r,params:s}=await pi({network:this.getNetwork(),params:he(this,$t,No).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){we(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await cN.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=mn(e);const n=X$(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await cN.getEnsAddress(this),i=await new yw(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===CC)return null;const a=await new yw(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Ps(r,"BAD_DATA")&&r.value==="0x"||Ps(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(sr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){we(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,wa).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,wa).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=vd(this,VC)._++,s=()=>{_(this,wa).delete(r),e()};if(this.paused)_(this,wa).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);_(this,wa).set(r,{timer:i,func:s,time:WO()})}return r}_forEachSubscriber(e){for(const n of _(this,Js).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Wre(e.type);case"block":{const n=new oYe(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new aYe(this,e.type);case"event":return new sB(this,e.filter);case"transaction":return new lYe(this,e.hash);case"orphan":return new cYe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,Js).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,Zs)!=null&&n.pause(_(this,Zs));break}}async on(e,n){const r=await he(this,$t,vx).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,Zs)!=null&&r.subscriber.pause(_(this,Zs))),this}async once(e,n){const r=await he(this,$t,vx).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,Zs)!=null&&r.subscriber.pause(_(this,Zs))),this}async emit(e,...n){const r=await he(this,$t,aE).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new sne(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,Js).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await he(this,$t,aE).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,Js).values())n+=r.length;return n}async listeners(e){if(e){const r=await he(this,$t,aE).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of _(this,Js).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await he(this,$t,aE).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,Js).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await he(this,$t,vx).call(this,e);r&&s.stop(),_(this,Js).delete(n)}else for(const[n,{started:r,subscriber:s}]of _(this,Js))r&&s.stop(),_(this,Js).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,l0)}destroy(){this.removeAllListeners();for(const e of _(this,wa).keys())this._clearTimeout(e);$(this,l0,!0)}get paused(){return _(this,Zs)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if($(this,$u,-1),_(this,Zs)!=null){if(_(this,Zs)==!!e)return;we(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),$(this,Zs,!!e);for(const n of _(this,wa).values())n.timer&&clearTimeout(n.timer),n.time=WO()-n.time}resume(){if(_(this,Zs)!=null){this._forEachSubscriber(e=>e.resume()),$(this,Zs,null);for(const e of _(this,wa).values()){let n=e.time;n<0&&(n=0),e.time=WO(),setTimeout(e.func,n)}}}}Js=new WeakMap,Nh=new WeakMap,Zs=new WeakMap,l0=new WeakMap,$o=new WeakMap,ag=new WeakMap,Th=new WeakMap,$u=new WeakMap,VC=new WeakMap,wa=new WeakMap,u0=new WeakMap,d0=new WeakMap,$t=new WeakSet,No=async function(e){const n=_(this,d0).cacheTimeout;if(n<0)return await this._perform(e);const r=bx(e.method,e);let s=_(this,Th).get(r);return s||(s=this._perform(e),_(this,Th).set(r,s),setTimeout(()=>{_(this,Th).get(r)===s&&_(this,Th).delete(r)},n)),await s},aL=async function(e,n,r){we(r<dYe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=oN(e);try{return Oe(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&BU(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&vr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await _i(s.to,this);let c;try{c=bYe(vr(i.data,4))}catch(d){we(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}we(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);we(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Sr([c.selector,wYe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await he(this,$t,aL).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},cL=async function(e){const{value:n}=await pi({network:this.getNetwork(),value:e});return n},oE=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await he(this,$t,cL).call(this,he(this,$t,No).call(this,Object.assign(e,{address:s,blockTag:i})))},lL=async function(e,n){if(Kn(e,32))return await he(this,$t,No).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await he(this,$t,No).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},aE=async function(e,n){let r=await zO(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await zO({orphan:"drop-log",log:n[0]},this)),_(this,Js).get(r.tag)||null},vx=async function(e){const n=await zO(e,this),r=n.tag;let s=_(this,Js).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,Js).set(r,s)),s};function gYe(t,e){try{const n=uL(t,e);if(n)return JI(n)}catch{}return null}function uL(t,e){if(t==="0x")return null;try{const n=Bt(vr(t,e,e+32)),r=Bt(vr(t,n,n+32));return vr(t,n+32,n+32+r)}catch{}return null}function PW(t){const e=Qr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function mYe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const yYe=new Uint8Array([]);function wYe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(yYe),n+=32;for(let r=0;r<t.length;r++){const s=Ut(t[r]);e[r]=PW(n),e.push(PW(s.length)),e.push(mYe(s)),n+=32+Math.ceil(s.length/32)*32}return Sr(e)}const kW="0x0000000000000000000000000000000000000000000000000000000000000000";function bYe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};we(pw(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=vr(t,0,32);we(vr(n,0,12)===vr(kW,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=vr(n,12);try{const r=[],s=Bt(vr(t,32,64)),i=Bt(vr(t,s,s+32)),o=vr(t,s+32);for(let a=0;a<i;a++){const c=gYe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{we(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=uL(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{we(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}we(vr(t,100,128)===vr(kW,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=vr(t,96,100);try{const r=uL(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{we(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Jf(t,e){if(t.provider)return t.provider;we(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function OW(t,e){let n=oN(e);if(n.to!=null&&(n.to=_i(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),_i(r,t)]).then(([s,i])=>(Q(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await pi(n)}class vYe{constructor(e){ee(this,"provider");ft(this,{provider:e||null})}async getNonce(e){return Jf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await OW(this,e)}async populateTransaction(e){const n=Jf(this,"populateTransaction"),r=await OW(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Ke(r.chainId);Q(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();we(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(we(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):we(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await pi(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Jf(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Jf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Jf(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Jf(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Jf(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=XI.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){we(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function EYe(t){return JSON.parse(JSON.stringify(t))}var hi,pl,cg,Rh,lg,h0,If,dL,hL;class Hre{constructor(e){G(this,If);G(this,hi);G(this,pl);G(this,cg);G(this,Rh);G(this,lg);G(this,h0);$(this,hi,e),$(this,pl,null),$(this,cg,he(this,If,dL).bind(this)),$(this,Rh,!1),$(this,lg,null),$(this,h0,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,Rh)||($(this,Rh,!0),he(this,If,dL).call(this,-2))}stop(){_(this,Rh)&&($(this,Rh,!1),$(this,h0,!0),he(this,If,hL).call(this),_(this,hi).off("block",_(this,cg)))}pause(e){e&&he(this,If,hL).call(this),_(this,hi).off("block",_(this,cg))}resume(){this.start()}}hi=new WeakMap,pl=new WeakMap,cg=new WeakMap,Rh=new WeakMap,lg=new WeakMap,h0=new WeakMap,If=new WeakSet,dL=async function(e){try{_(this,pl)==null&&$(this,pl,this._subscribe(_(this,hi)));let n=null;try{n=await _(this,pl)}catch(i){if(!Ps(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){$(this,pl,null),_(this,hi)._recoverSubscriber(this,this._recover(_(this,hi)));return}const r=await _(this,hi).getNetwork();if(_(this,lg)||$(this,lg,r),_(this,lg).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,h0))return;const s=await _(this,hi).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,hi),s)}catch(n){console.log("@TODO",n)}_(this,hi).once("block",_(this,cg))},hL=function(){const e=_(this,pl);e&&($(this,pl,null),e.then(n=>{_(this,hi).destroyed||_(this,hi).send("eth_uninstallFilter",[n])}))};var ug;class _Ye extends Hre{constructor(n,r){super(n);G(this,ug);$(this,ug,EYe(r))}_recover(n){return new sB(n,_(this,ug))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,ug)])}async _emitResults(n,r){for(const s of r)n.emit(_(this,ug),n._wrapLog(s,n._network))}}ug=new WeakMap;class CYe extends Hre{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const AYe="bigint,boolean,function,number,string,symbol".split(/,/g);function Ex(t){if(t==null||AYe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(Ex);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function SYe(t){return new Promise(e=>{setTimeout(e,t)})}function gy(t){return t&&t.toLowerCase()}function DW(t){return t&&typeof t.pollingInterval=="number"}const qre={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class HO extends vYe{constructor(n,r){super(n);ee(this,"address");r=mn(r),ft(this,{address:r})}connect(n){we(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=Ex(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await _i(o,this.provider);Q(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await _i(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Ps(u,"CANCELLED")||Ps(u,"BAD_DATA")||Ps(u,"NETWORK_ERROR")||Ps(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Ps(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",sr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=Ex(n);if(r.from){const i=await _i(r.from,this.provider);Q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?Xu(n):n;return await this.provider.send("personal_sign",[Oe(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=Ex(s),o=await iN.resolveNames(n,r,i,async a=>{const c=await _i(a);return Q(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(iN.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Xu(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Oe(r)])}}var dg,f0,Lu,gl,hc,ba,Ki,KC,fL;class xYe extends pYe{constructor(n,r){super(n,r);G(this,KC);G(this,dg);G(this,f0);G(this,Lu);G(this,gl);G(this,hc);G(this,ba);G(this,Ki);$(this,f0,1),$(this,dg,Object.assign({},qre,r||{})),$(this,Lu,[]),$(this,gl,null),$(this,ba,null),$(this,Ki,null);{let i=null;const o=new Promise(a=>{i=a});$(this,hc,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Q(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&$(this,ba,Nl.from(n))):s&&(Q(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),$(this,ba,s))}_getOption(n){return _(this,dg)[n]}get _network(){return we(_(this,ba),"network is not available yet","NETWORK_ERROR"),_(this,ba)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Ke(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,ba))return _(this,ba)}else return n;return _(this,Ki)?await _(this,Ki):this.ready?($(this,Ki,(async()=>{try{const r=Nl.from(Ke(await this.send("eth_chainId",[])));return $(this,Ki,null),r}catch(r){throw $(this,Ki,null),r}})()),await _(this,Ki)):($(this,Ki,(async()=>{const r={id:vd(this,f0)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],$(this,Ki,null)}catch(i){throw $(this,Ki,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Nl.from(Ke(s.result));throw this.getRpcError(r,s)})()),await _(this,Ki))}_start(){_(this,hc)==null||_(this,hc).resolve==null||(_(this,hc).resolve(),$(this,hc,null),(async()=>{for(;_(this,ba)==null&&!this.destroyed;)try{$(this,ba,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",sr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await SYe(1e3)}he(this,KC,fL).call(this)})())}async _waitUntilReady(){if(_(this,hc)!=null)return await _(this,hc).promise}_getSubscriber(n){return n.type==="pending"?new CYe(this):n.type==="event"?this._getOption("polling")?new sB(this,n.filter):new _Ye(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Wre("orphan"):super._getSubscriber(n)}get ready(){return _(this,hc)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=wc(Ke(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Oe(n[s]))}),n.accessList&&(r.accessList=Sm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Vne(s);return{address:i.address,nonce:wc(i.nonce),chainId:wc(i.chainId),yParity:wc(i.signature.yParity),r:wc(i.signature.r),s:wc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[gy(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[gy(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[gy(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[gy(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(gy):n.filter.address=gy(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return sr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return sr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=pL(i),l=RC.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(NYe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return sr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return sr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return sr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return sr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return sr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?sr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):sr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(sr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=vd(this,f0)._++,i=new Promise((o,a)=>{_(this,Lu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return he(this,KC,fL).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new HO(this,i[n])}const{accounts:s}=await pi({network:this.getNetwork(),accounts:r});n=mn(n);for(const i of s)if(mn(i)===n)return new HO(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new HO(this,r))}destroy(){_(this,gl)&&(clearTimeout(_(this,gl)),$(this,gl,null));for(const{payload:n,reject:r}of _(this,Lu))r(sr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));$(this,Lu,[]),super.destroy()}}dg=new WeakMap,f0=new WeakMap,Lu=new WeakMap,gl=new WeakMap,hc=new WeakMap,ba=new WeakMap,Ki=new WeakMap,KC=new WeakSet,fL=function(){if(_(this,gl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");$(this,gl,setTimeout(()=>{$(this,gl,null);const r=_(this,Lu);for($(this,Lu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==_(this,dg).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,dg).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(sr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=sr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Ph;class IYe extends xYe{constructor(n,r){super(n,r);G(this,Ph);let s=this._getOption("pollingInterval");s==null&&(s=qre.pollingInterval),$(this,Ph,s)}_getSubscriber(n){const r=super._getSubscriber(n);return DW(r)&&(r.pollingInterval=_(this,Ph)),r}get pollingInterval(){return _(this,Ph)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");$(this,Ph,n),this._forEachSubscriber(r=>{DW(r)&&(r.pollingInterval=_(this,Ph))})}}Ph=new WeakMap;function pL(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Kn(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=pL(t[e]);if(n)return n}return null}if(typeof t=="string")try{return pL(JSON.parse(t))}catch{}return null}function gL(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)gL(t[n],e);if(typeof t=="string")try{return gL(JSON.parse(t),e)}catch{}}}function NYe(t){const e=[];return gL(t,e),e}var p0,g0;const bp=class bp extends IYe{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Q(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);G(this,p0);G(this,g0);$(this,g0,null),s&&s.providerInfo&&$(this,g0,s.providerInfo),$(this,p0,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,g0)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Q(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,p0).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,p0).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new bp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new bp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof bp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new bp(p,void 0,{providerInfo:g}))}else a(sr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new bp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};p0=new WeakMap,g0=new WeakMap;let mL=bp;const cp=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],gu="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",cr={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},qO={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},du=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],TYe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function RYe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function PYe(t){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const e=new mL(window.ethereum);return await new yw(gu,cp,e).playerToGame(t)}catch(e){return console.error("Error fetching invite code from contract:",e),null}}const Gre=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=v1(),[i,o]=L.useState(""),[a,c]=L.useState(""),[l,u]=L.useState(!1),[d,h]=L.useState(!1),[f,p]=L.useState(!1),[g,y]=L.useState(!1),{writeContract:m,isPending:b,data:v}=zP(),{writeContract:C,isPending:A,data:S}=zP(),{writeContract:x,isPending:R,data:I}=zP(),O=_be(),{isLoading:P}=FP({hash:v}),{isLoading:B}=FP({hash:S}),{isLoading:H}=FP({hash:I}),{data:j}=I4({address:gu,abi:cp,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:T}=I4({address:gu,abi:cp,functionName:"games",args:j?[j]:void 0,query:{enabled:!!j&&j!=="0x000000000000"}}),[N,M]=L.useState(""),k=async()=>{if(!r||!N||!de){console.error("[CLAIM] Missing required data for claiming winnings");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",N,"Player:",de);const{data:F,error:V}=await yS.from("chess_games").select("blue_player, red_player, winner, invite_code").eq("invite_code",N).single();if(V||!F){console.error("[CLAIM] Error fetching game data:",V),alert("Failed to fetch game data. Please try again.");return}const K=F.winner==="blue"?F.blue_player:F.red_player;if(K!==r){console.error("[CLAIM] Player is not the winner"),alert("Only the winner can claim winnings.");return}const ie=F.invite_code;if(!ie||typeof ie!="string"||!ie.startsWith("0x")||ie.length!==14){alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:ie,winner:K}),x({address:gu,abi:cp,functionName:"endGame",args:[ie,K]})}catch(F){console.error("[CLAIM] Error claiming winnings:",F),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[D,U]=L.useState(du),[q,X]=L.useState("blue"),[ae,oe]=L.useState(null),[le,Ee]=L.useState([]),[Z,ce]=L.useState([]),[fe,ne]=L.useState("Waiting for opponent..."),[ye,Ne]=L.useState(cr.LOBBY),[de,_e]=L.useState(null),[Ye,rt]=L.useState(null),[un,An]=L.useState(0),[wn,en]=L.useState([]),[nr,mr]=L.useState(!1),[zs,vo]=L.useState(null),[es,oi]=L.useState(""),[Ws,Lf]=L.useState(0),[Wa,Im]=L.useState(!1),[Fb,zb]=L.useState(!1),[Wb,Nm]=L.useState(!1),[Mf,Kl]=L.useState(null),[Un,Tm]=L.useState(!1),[Hb,Fc]=L.useState(!0),[Rm,Q1]=L.useState(null),[Pi,J1]=L.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[IR,Z1]=L.useState([]),[Uf,NR]=L.useState(null),zc=L.useRef(null),ki=L.useRef(null);L.useEffect(()=>{S&&!B&&N&&de==="red"&&(console.log("[CONTRACT] Join transaction confirmed:",S),yS.from("chess_games").update({red_player:r,game_state:"active"}).eq("invite_code",N).eq("game_state","waiting").is("red_player",null).select().single().then(({data:F,error:V})=>{V?(console.error("Error updating game in database:",V),ne("Joined game on contract but failed to update database")):F?(console.log("[CONTRACT] Game joined successfully:",F),Ne(cr.ACTIVE),ne("Game started!"),Yl(N)):(console.log("[CONTRACT] Game already updated by another process"),Ne(cr.ACTIVE),ne("Game started!"),Yl(N))}))},[S,B,N,de,r]),L.useEffect(()=>{v&&!P&&zs&&!N&&(console.log("[CONTRACT] Create game transaction confirmed:",v),Ja.createGame(zs).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),M(zs.invite_code),_e("blue"),An(Ws),Ne(cr.WAITING),ne("Waiting for opponent to join..."),Yl(zs.invite_code),vo(null),mr(!1)}).catch(F=>{console.error("[FIREBASE] Error creating game after transaction:",F),ne("Transaction confirmed but failed to create game in database"),vo(null),mr(!1)}))},[v,P,zs,Ws]),L.useEffect(()=>{b===!1&&zs&&!v&&(console.log("[CONTRACT] Create game transaction rejected or failed"),ne("Transaction was rejected. Please try again."),vo(null),mr(!1))},[b,zs,v]),L.useEffect(()=>{A===!1&&N&&de==="red"&&!S&&(console.log("[CONTRACT] Join game transaction rejected or failed"),ne("Transaction was rejected. Please try again."),M(""),_e(null),An(0),rt(null))},[A,N,de,S]),L.useEffect(()=>{r&&j!==void 0&&(g||(j!=="0x000000000000"&&T||j==="0x000000000000")&&Pm())},[r,j,T,g]),L.useEffect(()=>{y(!1)},[r]),L.useEffect(()=>()=>{tA(),zc.current&&zc.current()},[]);const Pm=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),j&&j!=="0x000000000000"&&!T){console.log("[GAME_STATE] Waiting for contract data...");return}if(j&&j!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",j),T)){console.log("[GAME_STATE] Raw contract game data:",T);let K,ie,me,st,Je,vt;if(Array.isArray(T))[K,ie,me,st,Je,vt]=T;else{console.error("[GAME_STATE] Unexpected contract data format:",T);return}console.log("[GAME_STATE] Parsed contract game data:",{player1:K,player2:ie,isActive:me,winner:st,inviteCode:Je,wagerAmount:vt});const Sn=Je?Je.slice(2):null;if(!Sn){console.error("[GAME_STATE] Invalid invite code:",Je);return}const On=K===r?"blue":"red",ar=K===r?ie:K;console.log("[GAME_STATE] Player is",On,"opponent is",ar);const Yn=await Ja.getGame(Sn);if(Yn){if(console.log("[GAME_STATE] Found game in Firebase:",Yn),M(Je),_e(On),An(parseFloat(Yn.bet_amount)),rt(ar),Yn.game_state==="waiting")Ne(cr.WAITING),ne("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(Yn.game_state==="active"||Yn.game_state==="test_update"){if(Ne(cr.ACTIVE),ne("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",Yn.game_state,")"),Yn.board){const Ha=Yn.board;U(Ql(Ha)),X(Yn.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",Yn.game_state,"- treating as active"),Ne(cr.ACTIVE),ne("Game in progress"),Yn.board){const Ha=Yn.board;U(Ql(Ha)),X(Yn.current_player||"blue")}Yl(Yn.game_id),y(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",ye),console.log("[GAME_STATE] Game state from Firebase:",Yn.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const Ha={game_id:Sn,game_title:`Game ${Sn.slice(0,8)}`,bet_amount:vt?vt.toString():"0",blue_player:K,red_player:ie,game_state:me?"active":"waiting",board:{positions:km(du),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:gu,is_public:!0};if(await Ja.createGame(Ha),console.log("[GAME_STATE] Successfully synced game to Firebase:",Ha),M(Je),_e(On),An(parseFloat(Ha.bet_amount)),rt(ar),me?(Ne(cr.ACTIVE),ne("Game in progress")):(Ne(cr.WAITING),ne("Waiting for opponent to join...")),Ha.board){const Xre=Ha.board;U(Ql(Xre)),X(Ha.current_player||"blue")}Yl(Ha.game_id),y(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const V=(await Ja.getActiveGames()).filter(K=>K.chain==="sanko"&&(K.blue_player===r||K.red_player===r)&&["waiting","active"].includes(K.game_state));if(V&&V.length>0){const K=V[0];if(console.log("[GAME_STATE] Found active game in Firebase:",K),M(K.invite_code),_e(K.blue_player===r?"blue":"red"),An(parseFloat(K.bet_amount)),rt(K.blue_player===r?K.red_player:K.blue_player),K.game_state==="waiting")Ne(cr.WAITING),ne("Waiting for opponent to join...");else if(K.game_state==="active"||K.game_state==="test_update"){if(Ne(cr.ACTIVE),ne("Game in progress"),K.board){const ie=K.board;U(Ql(ie)),X(K.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",K.game_state,"- treating as active"),Ne(cr.ACTIVE),ne("Game in progress"),K.board){const ie=K.board;U(Ql(ie)),X(K.current_player||"blue")}Yl(K.game_id),y(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),Ne(cr.LOBBY),mr(!1),y(!0)}catch(F){console.error("[GAME_STATE] Error checking player game state:",F),Ne(cr.LOBBY),mr(!1),y(!0)}},TR=()=>{Im(!Wa),Wa?(document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")):(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"))},qb=async()=>{try{const F=await Tte(20);Z1(F)}catch(F){console.error("Error loading leaderboard:",F)}},X1=async F=>{if(console.log("[SCORE] updateScore called with:",F,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Zg(r)),await KI(r,F)?console.log("[SCORE] Successfully updated score for:",Zg(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(V){console.error("[SCORE] Error updating score:",V)}},Wc=async(F,V,K)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:F,bluePlayer:V,redPlayer:K}),!V||!K){console.error("[SCORE] Missing player addresses from contract");return}await $ze(F,V,K)?(console.log("[SCORE] Successfully updated both players scores"),await qb()):console.error("[SCORE] Failed to update both players scores")}catch(ie){console.error("[SCORE] Error updating both players scores:",ie)}},Gb=async()=>{try{const F=await Ja.getOpenGames();console.log("[FIREBASE] Loaded open games:",F),await eA(F),en(F)}catch(F){console.error("Error loading open games:",F)}},eA=async F=>{if(console.log("[CLEANUP] Checking for ghost games..."),!O){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const V of F)try{const K=V.invite_code;if(!K||typeof K!="string"||!K.startsWith("0x")||K.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",V.game_id,K);continue}const ie=await O.readContract({address:gu,abi:cp,functionName:"games",args:[K]});(!ie||Array.isArray(ie)&&ie[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",V.game_id,"- removing from Firebase"),await Ja.deleteGame(V.game_id),console.log("[CLEANUP] Ghost game removed:",V.game_id))}catch(K){console.error("[CLEANUP] Error checking game:",V.game_id,K)}},Bf=async()=>{if(!(!r||Ws<=0)){mr(!0);try{const F=RYe();M(F);const V={invite_code:F,game_title:`Chess Game ${F.slice(-6)}`,bet_amount:Ws.toString(),blue_player:r,game_state:"waiting",board:{positions:km(du),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:gu,is_public:!0,created_at:new Date().toISOString()};m({address:gu,abi:cp,functionName:"createGame",args:[F],value:BigInt(Math.floor(Ws*1e18))}),vo(V),ne("Creating game... Please confirm transaction in your wallet.")}catch(F){console.error("Error creating game:",F),ne("Failed to create game. Please try again.")}finally{mr(!1)}}},RR=async F=>{if(r)try{const V=await Ja.getGame(F);if(!V||V.game_state!=="waiting"){ne("Game not found or already full");return}const K=parseFloat(V.bet_amount);M(F),_e("red"),An(K),rt(V.blue_player),ne("Joining game... Please confirm transaction in your wallet."),C({address:gu,abi:cp,functionName:"joinGame",args:[F],value:BigInt(Math.floor(K*1e18))})}catch{ne("Failed to join game. Please try again."),M(""),_e(null),An(0),rt(null)}},[cB,PR]=L.useState(null),[lB,uB]=L.useState(""),[dB,hB]=L.useState(!0),tA=()=>{console.log("[FIREBASE] No fallback to stop")},Yl=F=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",F),zc.current&&(console.log("[FIREBASE] Removing existing subscription"),zc.current());const V=Ja.subscribeToGame(F,K=>{if(console.log("[FIREBASE] Game update received:",K),K){console.log("[FIREBASE] Processing new game state:",K),console.log("[FIREBASE] Board object:",K.board);const ie=K.board,me=Ql(ie);let st=K.current_player||"blue";JSON.stringify(me)===JSON.stringify(du)&&K.board&&K.board.positions&&(console.log("[FIREBASE] Board is in initial state - this is normal for a new game"),st!=="blue"&&(console.log("[FIREBASE] Fixing current player from",st,"to blue for initial board"),st="blue")),console.log("[FIREBASE] Final board to set:",me),console.log("[FIREBASE] Current player from data:",K.current_player),console.log("[FIREBASE] Final current player:",st),console.log("[FIREBASE] Player color:",de),U(me),X(st),K.game_state==="active"?(Ne(cr.ACTIVE),ne("Game in progress")):K.game_state==="finished"&&(Ne(cr.FINISHED),ne("Game finished")),K.blue_player&&K.red_player&&rt(de==="blue"?K.red_player:K.blue_player)}});zc.current=V,console.log("[FIREBASE] Firebase subscription setup complete for game:",F)},km=F=>{const V={};return F.forEach((K,ie)=>{K.forEach((me,st)=>{V[`${ie}_${st}`]=me})}),V},Ql=F=>{if(!F||!F.positions)return console.warn("[BOARD] No board data available, using initial board"),du;if(console.log("[BOARD] Attempting to reconstruct board from:",F),console.log("[BOARD] Positions type:",typeof F.positions),console.log("[BOARD] Positions is array:",Array.isArray(F.positions)),console.log("[BOARD] Positions value:",F.positions),typeof F.positions=="object"&&!Array.isArray(F.positions)){const V=F.positions,K=F.rows||8,ie=F.cols||8,me=Array(K).fill(null).map(()=>Array(ie).fill(null));for(let st=0;st<K;st++)for(let Je=0;Je<ie;Je++){const vt=`${st}_${Je}`;me[st][Je]=V[vt]||null}return console.log("[BOARD] Reconstructed from flat structure:",me),me}return Array.isArray(F.positions)?(console.log("[BOARD] Found array structure, length:",F.positions.length),F.positions.length===8?F.positions.every((K,ie)=>{const me=Array.isArray(K)&&K.length===8;return me||console.warn(`[BOARD] Row ${ie} is invalid:`,K,"Type:",typeof K,"Length:",K==null?void 0:K.length),me})?(console.log("[BOARD] Using legacy array structure"),F.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),du):(console.warn("[BOARD] Array has wrong length:",F.positions.length,"expected 8"),du)):(console.warn("[BOARD] Unknown board structure, using initial board:",F),du)},Vb=F=>`${F.slice(0,6)}...${F.slice(-4)}`,$r=F=>F&&F===F.toUpperCase()?"red":"blue",Jl=(F,V)=>F>=0&&F<8&&V>=0&&V<8,jf=(F,V)=>{const K=V==="red"?"K":"k";let ie=-1,me=-1;for(let Je=0;Je<8;Je++){for(let vt=0;vt<8;vt++)if(F[Je][vt]===K){ie=Je,me=vt;break}if(ie!==-1)break}return ie===-1?!1:kR(ie,me,V==="red"?"blue":"red",F)},kR=(F,V,K,ie)=>{if(!ie||!Array.isArray(ie)||ie.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",ie),!1;for(let me=0;me<8;me++){if(!ie[me]||!Array.isArray(ie[me])||ie[me].length!==8)return console.warn("[SAFETY] Invalid board row structure:",ie[me]),!1;for(let st=0;st<8;st++){const Je=ie[me][st];if(Je&&$r(Je)===K&&W(Je,me,st,F,V,!1,K,ie,!0))return!0}}return!1},nA=(F,V,K,ie,me,st=D)=>{const Je=st[F][V];if(!Je)return!1;const vt=st.map(Sn=>[...Sn]);return vt[K][ie]=Je,vt[F][V]=null,jf(vt,me)},OR=(F,V,K,ie,me,st)=>{const Je=F==="blue"?-1:1,vt=F==="blue"?6:1;if(!Jl(ie,me)||F==="blue"&&ie>=V||F==="red"&&ie<=V)return!1;if(K===me&&ie===V+Je)return st[ie][me]===null;if(K===me&&V===vt&&ie===V+2*Je)return st[V+Je][K]===null&&st[ie][me]===null;if(Math.abs(K-me)===1&&ie===V+Je){const Sn=st[ie][me];if(Sn!==null&&$r(Sn)!==F)return!0;if(Sn===null&&Pi.lastPawnDoubleMove){const{row:On,col:ar}=Pi.lastPawnDoubleMove;if(On===V&&ar===me){const Yn=st[V][me];if(Yn&&Yn.toLowerCase()==="p"&&$r(Yn)!==F)return!0}}}return!1},Kb=(F,V,K,ie,me)=>F===K||V===ie,rA=(F,V,K,ie)=>{const me=Math.abs(F-K),st=Math.abs(V-ie);return me===2&&st===1||me===1&&st===2},Om=(F,V,K,ie,me)=>Math.abs(F-K)===Math.abs(V-ie),Yb=(F,V,K,ie,me)=>Kb(F,V,K,ie)||Om(F,V,K,ie),DR=(F,V,K,ie,me)=>{const st=Math.abs(V-ie),Je=Math.abs(K-me);if(st<=1&&Je<=1)return!0;if(st===0&&Je===2){if(F==="blue"&&!Pi.blueKingMoved){if(me===6&&!Pi.blueRooksMove.right||me===2&&!Pi.blueRooksMove.left)return!0}else if(F==="red"&&!Pi.redKingMoved&&(me===6&&!Pi.redRooksMove.right||me===2&&!Pi.redRooksMove.left))return!0}return!1},Qb=(F,V,K,ie,me)=>{const st=F===K?0:(K-F)/Math.abs(K-F),Je=V===ie?0:(ie-V)/Math.abs(ie-V);let vt=F+st,Sn=V+Je;for(;vt!==K||Sn!==ie;){if(me[vt][Sn]!==null)return!1;vt+=st,Sn+=Je}return!0},W=(F,V,K,ie,me,st=!0,Je=$r(F),vt=D,Sn=!1)=>{if(!F||!Jl(ie,me))return!1;const On=vt[ie][me];if(On&&$r(On)===Je)return!1;let ar=!1;switch(F.toUpperCase()){case"P":ar=OR(Je,V,K,ie,me,vt);break;case"R":ar=Kb(V,K,ie,me)&&Qb(V,K,ie,me,vt);break;case"N":ar=rA(V,K,ie,me);break;case"B":ar=Om(V,K,ie,me)&&Qb(V,K,ie,me,vt);break;case"Q":ar=Yb(V,K,ie,me)&&Qb(V,K,ie,me,vt);break;case"K":ar=DR(Je,V,K,ie,me);break}return!(!ar||st&&nA(V,K,ie,me,Je,vt))},J=(F,V=D,K=q)=>{const ie=[],me=V[F.row][F.col];if(!me||$r(me)!==K)return ie;const st=me.toLowerCase();if(st==="p"){const Je=K==="blue"?-1:1,vt=K==="blue"?6:1,Sn=F.row+Je;if(Sn>=0&&Sn<8&&W(me,F.row,F.col,Sn,F.col,!0,K,V,!0)&&ie.push({row:Sn,col:F.col}),F.row===vt){const On=F.row+2*Je;On>=0&&On<8&&W(me,F.row,F.col,On,F.col,!0,K,V,!0)&&ie.push({row:On,col:F.col})}for(const On of[-1,1]){const ar=F.col+On,Yn=F.row+Je;ar>=0&&ar<8&&Yn>=0&&Yn<8&&W(me,F.row,F.col,Yn,ar,!0,K,V,!0)&&ie.push({row:Yn,col:ar})}}else if(st==="n"){const Je=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[vt,Sn]of Je){const On=F.row+vt,ar=F.col+Sn;On>=0&&On<8&&ar>=0&&ar<8&&W(me,F.row,F.col,On,ar,!0,K,V,!0)&&ie.push({row:On,col:ar})}}else for(let Je=0;Je<8;Je++)for(let vt=0;vt<8;vt++)W(me,F.row,F.col,Je,vt,!0,K,V,!0)&&ie.push({row:Je,col:vt});return ie},re=(F,V=D)=>{if(!jf(V,F))return!1;for(let K=0;K<8;K++)for(let ie=0;ie<8;ie++){const me=V[K][ie];if(me&&$r(me)===F&&J({row:K,col:ie},V,F).length>0)return!1}return!0},se=(F,V=D)=>{if(jf(V,F))return!1;for(let K=0;K<8;K++)for(let ie=0;ie<8;ie++){const me=V[K][ie];if(me&&$r(me)===F&&J({row:K,col:ie},V,F).length>0)return!1}return!0},te=(F,V)=>{if(console.log("[CLICK] Square clicked:",{row:F,col:V}),console.log("[CLICK] Game mode:",ye,"Player color:",de),console.log("[CLICK] Current player:",q,"Player color:",de),ye!==cr.ACTIVE||!de){console.log("[CLICK] Game not active or no player color");return}const K=D[F][V],ie=K?$r(K):null;if(console.log("[CLICK] Piece at square:",K,"Piece color:",ie),q!==de){console.log("[CLICK] Not player's turn. Current:",q,"Player:",de);return}if(K&&ie===de){oe({row:F,col:V});const me=J({row:F,col:V});Ee(me);return}if(ae&&le.some(me=>me.row===F&&me.col===V)){Te(ae,{row:F,col:V}),oe(null),Ee([]);return}oe(null),Ee([])},Te=async(F,V)=>{if(!de||q!==de)return;const K=D[F.row][F.col];if(K){if(console.log("[PROMOTION] Checking pawn promotion:",{piece:K,pieceUpperCase:K.toUpperCase(),playerColor:de,toRow:V.row,isPawn:K.toUpperCase()==="P",redPromotion:de==="red"&&V.row===0,bluePromotion:de==="blue"&&V.row===7}),K.toUpperCase()==="P"&&(de==="red"&&V.row===0||de==="blue"&&V.row===7)){console.log("[PROMOTION] Showing promotion dialog for piece:",K,"at position:",V),Kl({from:F,to:V}),Nm(!0);return}await Re(F,V)}},Re=async(F,V,K="q")=>{if(!de||q!==de||!D[F.row][F.col])return;const st=D[V.row][V.col]!==null;if(Wt(st?"capture":"move"),st){Q1({row:V.row,col:V.col,show:!0}),setTimeout(()=>{Xe(F,V,K),Q1(null)},500);return}Xe(F,V,K)},Xe=async(F,V,K="q")=>{if(!de||q!==de)return;const ie=D[F.row][F.col];if(!ie)return;const me=D.map(On=>[...On]);let st=ie;ie.toUpperCase()==="P"&&(de==="red"&&V.row===0||de==="blue"&&V.row===7)&&(st=de==="red"?K.toUpperCase():K.toLowerCase()),fn(me,F,V,ie),me[V.row][V.col]=st,me[F.row][F.col]=null,rr(F,V,ie);const Je=q==="blue"?"red":"blue";jf(me,Je)&&Wt("check");let vt="active",Sn=null;re(Je,me)?(vt="finished",Sn=q,ne(`${q==="red"?"Red":"Blue"} wins by checkmate!`),Wt("checkmate"),Qt(),console.log("[SCORE] Updating scores - Winner:",q,"Loser:",Je),console.log("[SCORE] Contract game data:",T),console.log("[SCORE] Player game invite code:",j),T&&T.length>=2?(console.log("[SCORE] Using contract data for both players update"),await Wc(q,T[0],T[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await X1(q===de?"win":"loss"),await qb()),Sn===de&&(console.log("[CONTRACT] Triggering automatic payout for winner:",Sn),setTimeout(()=>{k()},2e3))):se(Je,me)&&(vt="finished",ne("Game ended in stalemate"),console.log("[SCORE] Updating scores for draw"),await X1("draw"));try{console.log("[DATABASE] Updating game in database:",{inviteCode:N,board:{positions:me},current_player:Je,game_state:vt,winner:Sn,last_move:{from:F,to:V}});const On={board:{positions:km(me),rows:8,cols:8},current_player:Je,game_state:vt,winner:Sn,last_move:{from:F,to:V}};console.log("[FIREBASE] Storing data in Firebase:",On),await Ja.updateGame(N,On),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(On){console.error("[DATABASE] Error updating game:",On)}U(me),X(Je),NR({from:F,to:V}),Nm(!1),Kl(null)},Qt=()=>{Tm(!0),Wt("victory"),ki.current&&clearTimeout(ki.current),ki.current=setTimeout(()=>{Tm(!1)},5e3)},fn=(F,V,K,ie)=>{if(ie.toLowerCase()==="p"&&($r(ie)==="blue"&&K.row===0||$r(ie)==="red"&&K.row===7)){const me=$r(ie)==="blue"?"q":"Q";F[K.row][K.col]=me}ie.toLowerCase()==="k"&&Math.abs(V.col-K.col)===2&&(K.col===6?(F[V.row][7]=null,F[V.row][5]=$r(ie)==="blue"?"r":"R"):K.col===2&&(F[V.row][0]=null,F[V.row][3]=$r(ie)==="blue"?"r":"R")),ie.toLowerCase()==="p"&&Math.abs(V.col-K.col)===1&&F[K.row][K.col]===null&&Pi.lastPawnDoubleMove&&Pi.lastPawnDoubleMove.row===V.row&&Pi.lastPawnDoubleMove.col===K.col&&(F[V.row][K.col]=null)},rr=(F,V,K)=>{const ie={...Pi};K.toLowerCase()==="k"?$r(K)==="blue"?ie.blueKingMoved=!0:ie.redKingMoved=!0:K.toLowerCase()==="r"&&($r(K)==="blue"?(F.col===0&&(ie.blueRooksMove.left=!0),F.col===7&&(ie.blueRooksMove.right=!0)):(F.col===0&&(ie.redRooksMove.left=!0),F.col===7&&(ie.redRooksMove.right=!0))),K.toLowerCase()==="p"&&Math.abs(F.row-V.row)===2?ie.lastPawnDoubleMove={row:V.row,col:V.col}:ie.lastPawnDoubleMove=null,J1(ie)},Wt=F=>{if(Hb)try{const V=new Audio(`/images/${F}.mp3`);V.volume=.3,V.play().catch(K=>console.warn("Audio play failed:",K))}catch(V){console.warn("Sound play failed:",V)}},Jb=async()=>{if(N)try{console.log("[RESET] Resetting corrupted game data for:",N);const F={board:{positions:km(du),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await Ja.updateGame(N,F),console.log("[RESET] Successfully reset game data"),ne("Game reset successfully. You can now make moves.")}catch(F){console.error("[RESET] Error resetting game data:",F),ne("Failed to reset game. Please try again.")}},Vre=async()=>{if(!r)return;const F=await PYe(r);if(!F||F==="0x000000000000"){ne("No active game found");return}M(F);const V=await Ja.getGame(F);if(!V){ne("Game not found");return}_e(r===V.blue_player?"blue":"red"),An(parseFloat(V.bet_amount)),rt(r===V.blue_player?V.red_player:V.blue_player),Ne(cr.ACTIVE),ne("Game resumed"),U(Ql(V.board)),X(V.current_player||"blue"),Yl(F)},fB=async()=>{try{const{data:F,error:V}=await yS.from("chess_games").select("*").eq("game_state","active").or(`blue_player.eq.${r},red_player.eq.${r}`);if(V){console.error("Error checking stuck games:",V);return}if(F&&F.length>0){const K=F[0];(K.blue_player===r||K.red_player===r)&&confirm(`You have an active game (${K.invite_code}). Would you like to resume it?`)&&Vre()}}catch(F){console.error("Error checking stuck games:",F)}},Kre=(F,V)=>{if(!D||!Array.isArray(D)||D.length!==8||!D[F]||!Array.isArray(D[F])||D[F].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:F,col:V,board:D}),w.jsx("div",{className:"square error",children:w.jsx("div",{className:"error-indicator",children:"!"})},`${F}-${V}`);const K=D[F][V],ie=(ae==null?void 0:ae.row)===F&&(ae==null?void 0:ae.col)===V,me=le.some(vt=>vt.row===F&&vt.col===V),st=Uf&&(Uf.from.row===F&&Uf.from.col===V||Uf.to.row===F&&Uf.to.col===V),Je=K&&K.toUpperCase()==="K"&&jf(D,$r(K));return w.jsxs("div",{className:`square ${ie?"selected":""} ${me?"legal-move":""} ${st?"last-move":""} ${Je?"square-in-check":""}`,onClick:()=>te(F,V),children:[K&&w.jsx("div",{className:"piece",style:{backgroundImage:qO[K]?`url(${qO[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),me&&w.jsx("div",{className:"legal-move-indicator"})]},`${F}-${V}`)},Yre=()=>{if(console.log("[PROMOTION] Rendering promotion dialog:",{showPromotion:Wb,promotionMove:Mf,playerColor:de}),!Wb||!Mf)return console.log("[PROMOTION] Not showing dialog - conditions not met"),null;const F=de==="red"?["Q","R","B","N"]:["q","r","b","n"];return console.log("[PROMOTION] Promotion pieces for",de,":",F),w.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:w.jsxs("div",{className:"promotion-content",children:[w.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),w.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:F.map(V=>w.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",V),Re(Mf.from,Mf.to,V.toLowerCase()),Nm(!1),Kl(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:w.jsx("img",{src:qO[V],alt:V,style:{width:"40px",height:"40px"}})},V))})]})})},Qre=()=>w.jsxs("div",{className:"piece-gallery",children:[w.jsx("h3",{children:"Chess Pieces"}),w.jsx("div",{className:"piece-gallery-grid",children:TYe.map(F=>w.jsxs("div",{className:"piece-gallery-item",children:[w.jsx("img",{src:F.img,alt:F.name,className:"piece-gallery-img"}),w.jsx("div",{className:"piece-gallery-name",children:F.name}),w.jsx("div",{className:"piece-gallery-desc",children:F.desc})]},F.key))})]}),pB=()=>w.jsxs("div",{className:"chess-multiplayer-lobby",children:[w.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"status-bar",children:["Connected: ",Vb(r)]}),w.jsxs("div",{className:"lobby-content",children:[w.jsxs("div",{className:"open-games",children:[w.jsx("h3",{children:"Open Games"}),w.jsxs("div",{className:"games-list",children:[wn.map(F=>w.jsxs("div",{className:"game-item",children:[w.jsxs("div",{className:"game-info",children:[w.jsx("div",{className:"game-id",children:F.game_title||"Untitled Game"}),w.jsxs("div",{className:"wager",children:["Wager: ",parseFloat(F.bet_amount)," tDMT"]}),w.jsxs("div",{className:"title",children:["Created by: ",Vb(F.blue_player)]})]}),w.jsx("button",{className:"join-btn",onClick:()=>RR(F.invite_code),children:"Join Game"})]},F.invite_code)),wn.length===0&&w.jsx("div",{className:"no-games",children:"No open games available"})]})]}),w.jsxs("div",{className:"actions",children:[w.jsx("button",{className:"create-btn",onClick:()=>mr(!0),disabled:nr,children:"Create New Game"}),w.jsx("button",{className:"resume-btn",onClick:fB,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"})]}),nr&&w.jsxs("div",{className:"create-form",children:[w.jsx("h3",{children:"Create New Game"}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Wager (tDMT):"}),w.jsx("input",{type:"number",value:Ws,onChange:F=>Lf(Number(F.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),w.jsxs("div",{className:"form-actions",children:[w.jsx("button",{className:"create-confirm-btn",onClick:Bf,disabled:Ws<=0,children:"Create Game"}),w.jsx("button",{className:"cancel-btn",onClick:()=>mr(!1),children:"Cancel"})]})]})]})]}):w.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),Jre=()=>w.jsxs("div",{className:"chess-multiplayer-waiting",children:[w.jsx("h2",{children:"Waiting for Opponent"}),w.jsxs("div",{className:"game-code",children:["Game ID: ",w.jsx("strong",{children:N})]}),w.jsxs("div",{className:"game-info",children:[w.jsxs("p",{children:["Wager: ",un," tDMT"]}),w.jsx("p",{children:"Share this game ID with your opponent"})]})]}),Zre=()=>w.jsxs("div",{className:"chess-game",children:[w.jsxs("div",{className:"chess-header",children:[w.jsx("h2",{children:"Multiplayer Chess"}),w.jsxs("div",{className:"chess-controls",children:[w.jsx("button",{onClick:TR,children:""}),e&&w.jsx("button",{onClick:e,children:"_"}),w.jsx("button",{onClick:t,children:""})]})]}),w.jsxs("div",{className:"game-info",children:[w.jsx("span",{className:"status",children:fe}),w.jsxs("span",{className:"current-player",children:["Current: ",q==="red"?"Red":"Blue"]}),w.jsxs("span",{className:"wager-display",children:["Wager: ",un," tDMT"]}),Ye&&w.jsxs("span",{children:["Opponent: ",Vb(Ye)]}),ye===cr.FINISHED&&w.jsx("button",{onClick:k,disabled:f,style:{background:"rgba(255, 215, 0, 0.2)",border:"2px solid gold",color:"gold",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",marginLeft:"10px"},children:f?"Claiming...":"Claim Winnings"})]}),w.jsxs("div",{className:"game-stable-layout",children:[w.jsx("div",{className:"left-sidebar",children:w.jsxs("div",{className:"move-history",children:[w.jsx("h4",{children:"Move History"}),w.jsx("div",{className:"moves",children:Z.slice().reverse().map((F,V)=>w.jsx("div",{className:"move",children:F},Z.length-1-V))})]})}),w.jsxs("div",{className:"center-area",children:[w.jsxs("div",{className:"chessboard-container",children:[w.jsx("div",{className:"chessboard",children:Array.from({length:8},(F,V)=>w.jsx("div",{className:"board-row",children:Array.from({length:8},(K,ie)=>Kre(V,ie))},V))}),Rm&&Rm.show&&w.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${Rm.row*12.5}%`,left:`${Rm.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:w.jsx("div",{className:"explosion-effect",children:""})})]}),w.jsxs("div",{className:"game-controls",children:[w.jsxs("button",{onClick:()=>zb(!Fb),children:[Fb?"Hide":"Show"," Piece Gallery"]}),fe.includes("corrupted")&&w.jsx("button",{className:"reset-game-btn",onClick:Jb,style:{backgroundColor:"#ff6b6b",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:" Reset Game"}),w.jsxs("div",{className:"sound-controls",children:[w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",id:"sound-toggle",checked:Hb,onChange:F=>Fc(F.target.checked)})," Sound Effects"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",id:"victory-toggle",checked:Un,onChange:F=>Tm(F.target.checked)})," Victory Celebration"]})]}),d&&w.jsx("button",{className:"claim-winnings-btn",onClick:k,disabled:f||R||H,children:f||R||H?"Claiming...":"Claim Winnings"})]})]}),w.jsx("div",{className:"right-sidebar",children:w.jsxs("div",{className:"leaderboard",children:[w.jsx("h3",{children:"Leaderboard"}),w.jsx("div",{className:"leaderboard-table",children:w.jsxs("table",{children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"#"}),w.jsx("th",{children:"Player"}),w.jsx("th",{children:"W"}),w.jsx("th",{children:"L"}),w.jsx("th",{children:"D"}),w.jsx("th",{children:"Pts"})]})}),w.jsx("tbody",{children:IR.map((F,V)=>w.jsxs("tr",{children:[w.jsx("td",{children:V+1}),w.jsx("td",{children:F.username}),w.jsx("td",{children:F.wins}),w.jsx("td",{children:F.losses}),w.jsx("td",{children:F.draws}),w.jsx("td",{children:F.points})]},F.username))})]})})]})})]}),Fb&&w.jsx("div",{className:"piece-gallery-panel",children:Qre()}),Yre(),Un&&w.jsx("div",{className:"victory-celebration",children:w.jsxs("div",{className:"victory-content",children:[w.jsx("h2",{children:" Victory! "}),w.jsx("p",{children:"Congratulations on your win!"})]})})]});switch(L.useEffect(()=>{qb(),Gb(),fB();const F=setInterval(Gb,5e3);return()=>{clearInterval(F),zc.current&&yS.removeChannel(zc.current),ki.current&&clearTimeout(ki.current)}},[]),console.log("[RENDER] Current game mode:",ye,"Game ID:",N),ye){case cr.LOBBY:return pB();case cr.WAITING:return Jre();case cr.ACTIVE:case cr.FINISHED:return Zre();default:return pB()}},kYe={AI:"ai"},IS={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},$W=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],OYe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],DYe=()=>{const[t,e]=L.useState(!1),n=L.useRef(null),r=L.useRef(!1);L.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=L.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=L.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},$Ye=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!1),s=L.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=L.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},LYe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=v1(),[s,i]=L.useState(kYe.AI),[o,a]=L.useState(()=>JSON.parse(JSON.stringify($W))),[c,l]=L.useState("blue"),[u,d]=L.useState(null),[h,f]=L.useState("active"),[p,g]=L.useState("hard"),[y,m]=L.useState("Connect wallet to play"),[b,v]=L.useState([]),[C,A]=L.useState([]),[S,x]=L.useState([]),[R,I]=L.useState(null),[O,P]=L.useState(!1),[B,H]=L.useState(!1),[j,T]=L.useState(null),[N,M]=L.useState(null),[k]=L.useState(""),[D]=L.useState(.1),[U,q]=L.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),X=L.useRef(null),ae=L.useRef(!1),oe=L.useRef(o),le=L.useRef(null),Ee=L.useRef(null),Z=L.useRef(!1),ce=L.useRef(!1),[fe,ne]=L.useState(!1),[ye,Ne]=L.useState(!1),[de,_e]=L.useState(!1),[Ye,rt]=L.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),un=()=>{rt(W=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!W)),!W))},{stockfishReady:An}=DYe(),{getOpeningData:wn}=$Ye(),[en,nr]=L.useState("loading"),[mr,zs]=L.useState(!1),[vo,es]=L.useState([]),[oi,Ws]=L.useState(!1),[Lf,Wa]=L.useState("/images/chessboard1.png"),[Im,Fb]=L.useState(!0),[zb,Wb]=L.useState(!1),Nm=()=>{const W=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],J=Math.floor(Math.random()*W.length),re=W[J];return console.log("[DEBUG] Random chessboard selected:",re,"(index:",J,")"),re};L.useEffect(()=>{if(An)nr("ready");else{const W=window.setTimeout(()=>{An||(nr("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(W)}},[An]),L.useEffect(()=>{oe.current=o},[o]),L.useEffect(()=>{r?m("Select game mode"):(m("Connect wallet to play"),P(!1))},[r]),L.useEffect(()=>(!X.current&&typeof Worker<"u"&&(X.current=new Worker("/aiWorker.js"),X.current.onmessage=W=>{console.log("[DEBUG] AI worker response received:",W.data);const{move:J,nodes:re}=W.data;J&&ae.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",J),console.log("[DEBUG] AI searched",re,"nodes"),ae.current=!1,Ee.current&&(window.clearTimeout(Ee.current),Ee.current=null),le.current&&le.current(J.from,J.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},X.current.onerror=W=>{console.error("[DEBUG] AI worker error:",W),m("AI worker error - using fallback mode"),ae.current=!1}),()=>{X.current&&(X.current.terminate(),X.current=null),Ee.current&&(window.clearTimeout(Ee.current),Ee.current=null)}),[]),L.useEffect(()=>{Mf()},[]);const Mf=async()=>{try{const W=await Tte(20);A(W),console.log("Leaderboard data loaded:",W)}catch(W){m("Failed to load leaderboard"),console.error("Leaderboard error:",W)}},Kl=async W=>{if(console.log("[DEBUG] updateScore called with:",W),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Zg(r)),await KI(r,W)?(console.log("[DEBUG] Successfully updated score for:",Zg(r)),await Mf()):console.error("[DEBUG] Failed to update score")}catch(J){console.error("[DEBUG] Error in updateScore:",J)}},Un=W=>W&&W===W.toUpperCase()?"red":"blue",Tm=(W,J)=>W>=0&&W<8&&J>=0&&J<8,Hb=(W,J)=>`${String.fromCharCode(97+J)}${8-W}`,Fc=(W,J)=>{const re=J==="blue"?"k":"K";let se=null;for(let Re=0;Re<8;Re++){for(let Xe=0;Xe<8;Xe++)if(W[Re][Xe]===re){se={row:Re,col:Xe};break}if(se)break}if(!se)return console.log(`King not found for ${J}`),!1;const te=J==="blue"?"red":"blue",Te=Rm(se.row,se.col,te,W);return console.log(`${J} king at ${se.row},${se.col} under attack: ${Te}`),Te},Rm=(W,J,re,se)=>{for(let te=0;te<8;te++)for(let Te=0;Te<8;Te++){const Re=se[te][Te];if(Re&&Un(Re)===re&&ki(Re,te,Te,W,J,!1,re,se,!0))return!0}return!1},Q1=(W,J,re,se,te,Te=o)=>{const Re=Te.map(Qt=>[...Qt]),Xe=Re[W][J];return Re[re][se]=Xe,Re[W][J]=null,Fc(Re,te)},Pi=(W,J,re,se,te,Te)=>{const Re=W==="blue"?-1:1,Xe=W==="blue"?6:1;if(!Tm(se,te)||W==="blue"&&se>=J||W==="red"&&se<=J)return!1;const Qt=Math.abs(se-J),fn=Math.abs(te-re);if((Qt===1&&fn===0||Qt===2&&fn===0&&J===Xe||Qt===1&&fn===1)&&Qt<=2&&fn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:W,from:`${J},${re}`,to:`${se},${te}`}),re===te&&se===J+Re)return Te[se][te]===null;if(re===te&&J===Xe&&se===J+2*Re)return Te[J+Re][re]===null&&Te[se][te]===null;if(Math.abs(re-te)===1&&se===J+Re){const Wt=Te[se][te];return Wt!==null&&Un(Wt)!==W}if(Math.abs(re-te)===1&&se===J+Re){const Wt=Te[J][te];if(Wt&&Un(Wt)!==W&&Wt.toLowerCase()==="p"&&U.lastPawnDoubleMove&&U.lastPawnDoubleMove.row===J&&U.lastPawnDoubleMove.col===te)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},J1=(W,J,re,se,te)=>W!==re&&J!==se?!1:zc(W,J,re,se,te),IR=(W,J,re,se)=>{const te=Math.abs(W-re),Te=Math.abs(J-se);return te===2&&Te===1||te===1&&Te===2},Z1=(W,J,re,se,te)=>Math.abs(W-re)!==Math.abs(J-se)?!1:zc(W,J,re,se,te),Uf=(W,J,re,se,te)=>J1(W,J,re,se,te)||Z1(W,J,re,se,te),NR=(W,J,re,se,te)=>{const Te=Math.abs(J-se),Re=Math.abs(re-te);if(Te<=1&&Re<=1)return!0;if(Te===0&&Re===2){if(W==="blue"&&!U.blueKingMoved){if(te===6&&!U.blueRooksMove.right||te===2&&!U.blueRooksMove.left)return!0}else if(W==="red"&&!U.redKingMoved&&(te===6&&!U.redRooksMove.right||te===2&&!U.redRooksMove.left))return!0}return!1},zc=(W,J,re,se,te)=>{const Te=W===re?0:(re-W)/Math.abs(re-W),Re=J===se?0:(se-J)/Math.abs(se-J);let Xe=W+Te,Qt=J+Re;for(;Xe!==re||Qt!==se;){if(te[Xe][Qt]!==null)return!1;Xe+=Te,Qt+=Re}return!0},ki=(W,J,re,se,te,Te=!0,Re=Un(W),Xe=o,Qt=!1)=>{if(!Tm(se,te))return Qt||console.log("[ILLEGAL MOVE] Out of board:",{piece:W,startRow:J,startCol:re,endRow:se,endCol:te}),!1;const fn=Xe[se][te];if(fn&&Un(fn)===Re)return Qt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:W,startRow:J,startCol:re,endRow:se,endCol:te}),!1;const rr=W.toLowerCase();let Wt=!1;switch(rr){case"p":Wt=Pi(Re,J,re,se,te,Xe);break;case"r":Wt=J1(J,re,se,te,Xe);break;case"n":Wt=IR(J,re,se,te);break;case"b":Wt=Z1(J,re,se,te,Xe);break;case"q":Wt=Uf(J,re,se,te,Xe);break;case"k":Wt=NR(Re,J,re,se,te);break}return Wt?Wt&&Te&&Q1(J,re,se,te,Re,Xe)?(Qt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:W,startRow:J,startCol:re,endRow:se,endCol:te}),!1):Wt:(Qt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:W,startRow:J,startCol:re,endRow:se,endCol:te,playerColor:Re,pieceType:rr,targetPiece:Xe[se][te],targetPieceColor:Xe[se][te]?Un(Xe[se][te]):null}),!1)},Pm=(W,J=o,re=c)=>{const se=[],te=J[W.row][W.col];if(!te||Un(te)!==re)return se;const Te=te.toLowerCase();if(Te==="p"){const Re=re==="blue"?-1:1,Xe=re==="blue"?6:1,Qt=W.row+Re;if(Qt>=0&&Qt<8&&ki(te,W.row,W.col,Qt,W.col,!0,re,J,!0)&&se.push({row:Qt,col:W.col}),W.row===Xe){const fn=W.row+2*Re;fn>=0&&fn<8&&ki(te,W.row,W.col,fn,W.col,!0,re,J,!0)&&se.push({row:fn,col:W.col})}for(const fn of[-1,1]){const rr=W.col+fn,Wt=W.row+Re;rr>=0&&rr<8&&Wt>=0&&Wt<8&&ki(te,W.row,W.col,Wt,rr,!0,re,J,!0)&&se.push({row:Wt,col:rr})}}else if(Te==="n"){const Re=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Xe,Qt]of Re){const fn=W.row+Xe,rr=W.col+Qt;fn>=0&&fn<8&&rr>=0&&rr<8&&ki(te,W.row,W.col,fn,rr,!0,re,J,!0)&&se.push({row:fn,col:rr})}}else for(let Re=0;Re<8;Re++)for(let Xe=0;Xe<8;Xe++)ki(te,W.row,W.col,Re,Xe,!0,re,J,!0)&&se.push({row:Re,col:Xe});return se},TR=(W,J=o)=>{if(!Fc(J,W))return!1;for(let re=0;re<8;re++)for(let se=0;se<8;se++){const te=J[re][se];if(te&&Un(te)===W&&Pm({row:re,col:se},J,W).length>0)return!1}return!0},qb=(W,J=o)=>{if(Fc(J,W))return!1;for(let re=0;re<8;re++)for(let se=0;se<8;se++){const te=J[re][se];if(te&&Un(te)===W&&Pm({row:re,col:se},J,W).length>0)return!1}return!0},X1=(W,J)=>{if(h!=="active"||ae.current)return;const re=o[W][J],se=re?Un(re):null;if(u&&S.some(te=>te.row===W&&te.col===J)){Wc(u,{row:W,col:J});return}if(re&&se===c){const te=Pm({row:W,col:J});d({row:W,col:J}),x(te);return}d(null),x([])},Wc=(W,J,re=!1)=>{const se=o[W.row][W.col];if(console.log("[MOVE ATTEMPT]",{from:W,to:J,piece:se,isAIMove:re,board:JSON.parse(JSON.stringify(o)),moveHistory:b}),!!se){if(se.toLowerCase()==="p"&&(Un(se)==="blue"&&J.row===0||Un(se)==="red"&&J.row===7)){T({from:W,to:J}),H(!0);return}$r(W,J,"q",re)}};le.current=Wc;const Gb=L.useCallback((W,J,re=!1)=>{Ws(!0);const se=o.map(Re=>[...Re]),te=se[W.row][W.col];if(!te)return;se[J.row][J.col]=te,se[W.row][W.col]=null,km(se,W,J,te);const Te=Ql(W,J);if(v(Re=>{const Xe=[...Re,Te];return console.log("[MOVE HISTORY UPDATED]",Xe),Xe}),I({from:W,to:J}),d(null),x([]),b.length<10&&!re){const Re=LW(se,c==="blue"?"red":"blue");wn(Re).then(Xe=>{Xe&&Xe.moves&&Xe.moves.length>0&&(es(Xe.moves.slice(0,3)),zs(!0),setTimeout(()=>zs(!1),5e3))})}Vb(W,J,te),l(Re=>{const Xe=Re==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",Xe),eA(se,Xe),Xe}),eA(se,c==="blue"?"red":"blue"),a(se),ae.current=!1,Z.current=!1,ce.current=!1,Ws(!1)},[o,c,b,wn]);L.useEffect(()=>{if(!ae.current&&s==="ai"&&c==="red"&&!Z.current&&!oi)if(ae.current=!0,p==="easy")setTimeout(()=>{const W=Bf(o);W?Wc(W.from,W.to,!0):ae.current=!1},600);else{m("AI is calculating...");const W=LW(o,c);if(ce.current)return;ce.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:W,difficulty:p,movetime:3e3})}).then(re=>{if(re.ok)return re.json();throw new Error("API call failed")}).then(re=>{console.log("[DEBUG] Stockfish API response:",re);const se=re.bestmove||re.move;if(se&&se!=="(none)"&&se.length===4){const te=se.charCodeAt(0)-97,Te=parseInt(se[1]),Re=se.charCodeAt(2)-97,Xe=parseInt(se[3]),Qt=8-Te,fn=8-Xe;if(console.log("[DEBUG] Parsed move:",{fromCol:te,fromRowStockfish:Te,toCol:Re,toRowStockfish:Xe,fromRow:Qt,toRow:fn}),te>=0&&te<8&&Qt>=0&&Qt<8&&Re>=0&&Re<8&&fn>=0&&fn<8){const rr={from:{row:Qt,col:te},to:{row:fn,col:Re}},Wt=o[Qt][te];if(console.log("[DEBUG] Move validation:",{piece:Wt,moveObj:rr,isValid:Wt&&Un(Wt)==="red"&&ki(Wt,Qt,te,fn,Re,!0,"red",o)}),Wt&&Un(Wt)==="red"&&ki(Wt,Qt,te,fn,Re,!0,"red",o))console.log("[DEBUG] Executing Stockfish move:",rr),Wc(rr.from,rr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const Jb=Bf(o);Jb&&Wc(Jb.from,Jb.to,!0),ae.current=!1,ce.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const rr=Bf(o);rr&&Wc(rr.from,rr.to,!0),ae.current=!1,ce.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const te=Bf(o);te&&Wc(te.from,te.to,!0),ae.current=!1,ce.current=!1}}).catch(re=>{console.error("[DEBUG] Stockfish API error:",re),m("AI error. Falling back to random moves.");const se=Bf(o);se&&Wc(se.from,se.to,!0),ae.current=!1,ce.current=!1})}},[c,s,p,o,U,An]);const eA=(W,J)=>{console.log("Checking game end for player:",J);const re=W.some(te=>te.some(Te=>Te==="k")),se=W.some(te=>te.some(Te=>Te==="K"));if(!re)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),m("King captured! Red wins!"),Kl("loss"),_e(!0),setTimeout(()=>_e(!1),3e3),"checkmate";if(!se)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),m("King captured! You win!"),Kl("win"),_e(!0),setTimeout(()=>_e(!1),3e3),"checkmate";if(console.log("Is king in check:",Fc(W,J)),TR(J,W)){console.log("[GAME END] CHECKMATE",{winner:J==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(W)),moveHistory:b}),f("checkmate");const te=J==="blue"?"red":"blue";return te==="blue"?(m("Checkmate! You win!"),Jl("checkmate"),nA(!0),jf(),Kl("win"),_e(!0),setTimeout(()=>_e(!1),3e3)):(m(`Checkmate! ${te==="red"?"AI":"Opponent"} wins!`),Jl("checkmate"),Kb(!0),Kl("loss"),_e(!0),setTimeout(()=>_e(!1),3e3)),"checkmate"}return qb(J,W)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(W)),moveHistory:b}),f("stalemate"),m("Stalemate! Game is a draw."),Kl("draw"),_e(!0),setTimeout(()=>_e(!1),3e3),"stalemate"):(Fc(W,J)?(console.log("CHECK detected!"),Jl("check"),m(`${J==="blue"?"Blue":"Red"} is in check!`)):m("Your turn"),null)},Bf=W=>{const J=[];for(let te=0;te<8;te++)for(let Te=0;Te<8;Te++){const Re=W[te][Te];Re&&Un(Re)==="red"&&J.push({row:te,col:Te})}for(let te=J.length-1;te>0;te--){const Te=Math.floor(Math.random()*(te+1));[J[te],J[Te]]=[J[Te],J[te]]}const re=[],se=[];for(const te of J){const Te=Pm(te,W,"red");for(const Re of Te){const Xe=W[Re.row][Re.col];if(Xe&&Un(Xe)==="blue"){const fn={p:100,n:320,b:330,r:500,q:900,k:2e4}[Xe.toLowerCase()]||0;re.push({from:te,to:Re,value:fn})}else se.push({from:te,to:Re})}}if(re.length>0&&Math.random()<.3){re.sort((te,Te)=>te.value-Te.value);for(const te of re){const Te=W.map(Xe=>[...Xe]),Re=Te[te.from.row][te.from.col];if(Te[te.to.row][te.to.col]=Re,Te[te.from.row][te.from.col]=null,!Fc(Te,"red"))return{from:te.from,to:te.to}}}for(const te of se){const Te=W.map(Xe=>[...Xe]),Re=Te[te.from.row][te.from.col];if(Te[te.to.row][te.to.col]=Re,Te[te.from.row][te.from.col]=null,!Fc(Te,"red"))return te}re.sort((te,Te)=>te.value-Te.value);for(const te of re){const Te=W.map(Xe=>[...Xe]),Re=Te[te.from.row][te.from.col];if(Te[te.to.row][te.to.col]=Re,Te[te.from.row][te.from.col]=null,!Fc(Te,"red"))return{from:te.from,to:te.to}}return null},RR=()=>{a(JSON.parse(JSON.stringify($W))),l("blue"),d(null),f("active"),v([]),x([]),I(null),P(!1),m("Select game mode"),q({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Wa(Nm()),ae.current&&(ae.current=!1)},cB=()=>{if(DR(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){P(!1),ne(!1);return}P(!0),ne(!1),m("Game started! Your turn");const W=Nm();Wa(W),console.log("[DEBUG] Game started with chessboard:",W)},PR=W=>`${W.slice(0,6)}...${W.slice(-4)}`,lB=(W,J)=>{const re=o[W][J],se=(u==null?void 0:u.row)===W&&(u==null?void 0:u.col)===J,te=S.some(Re=>Re.row===W&&Re.col===J),Te=R&&(R.from.row===W&&R.from.col===J||R.to.row===W&&R.to.col===J);return w.jsxs("div",{className:`square ${se?"selected":""} ${te?"legal-move":""} ${Te?"last-move":""}`,onClick:()=>X1(W,J),children:[re&&w.jsx("div",{className:"piece",style:{backgroundImage:IS[re]?`url(${IS[re]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),te&&w.jsx("div",{className:"legal-move-indicator"})]},`${W}-${J}`)},uB=()=>{if(!B||!j)return null;const W=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return w.jsx("div",{className:"promotion-dialog",children:w.jsxs("div",{className:"promotion-content",children:[w.jsx("h3",{children:"Choose promotion piece:"}),w.jsx("div",{className:"promotion-pieces",children:W.map(J=>w.jsx("div",{className:"promotion-piece",onClick:()=>{$r(j.from,j.to,J),H(!1),T(null)},style:{backgroundImage:IS[J]?`url(${IS[J]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},J))})]})})},[dB,hB]=L.useState(null),tA=(W=!1,J="Click a piece to learn more about it.")=>w.jsxs("div",{className:`piece-gallery${W?" piece-gallery-sm":""}`,children:[w.jsx("h3",{children:"Lawbstation Chess Pieces"}),w.jsx("div",{className:"piece-gallery-grid",children:OYe.map(re=>w.jsxs("div",{className:"piece-gallery-item",onClick:()=>hB(re.key),children:[w.jsx("img",{src:re.img,alt:re.name,className:"piece-gallery-img"}),w.jsx("div",{className:"piece-gallery-name",children:re.name}),dB===re.key&&w.jsx("div",{className:"piece-gallery-desc",children:re.desc})]},re.key))}),w.jsx("div",{className:"piece-gallery-tip",children:J})]}),Yl=()=>w.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:w.jsx("div",{className:"difficulty-controls-col",children:w.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[w.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),w.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",w.jsx("br",{}),"Good luck, have fun!"]}),w.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[w.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),w.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),w.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{cB()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[w.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),km=(W,J,re,se)=>{if(se.toLowerCase()==="p"&&(Un(se)==="blue"&&re.row===0||Un(se)==="red"&&re.row===7)){const te=Un(se)==="blue"?"q":"Q";W[re.row][re.col]=te}se.toLowerCase()==="k"&&Math.abs(J.col-re.col)===2&&(re.col===6?(W[J.row][7]=null,W[J.row][5]=Un(se)==="blue"?"r":"R"):re.col===2&&(W[J.row][0]=null,W[J.row][3]=Un(se)==="blue"?"r":"R"))},Ql=(W,J,re,se)=>{const te=Hb(W.row,W.col),Te=Hb(J.row,J.col);return`${te}-${Te}`},Vb=(W,J,re)=>{const se={...U};re.toLowerCase()==="k"?Un(re)==="blue"?se.blueKingMoved=!0:se.redKingMoved=!0:re.toLowerCase()==="r"&&(Un(re)==="blue"?(W.col===0&&(se.blueRooksMove.left=!0),W.col===7&&(se.blueRooksMove.right=!0)):(W.col===0&&(se.redRooksMove.left=!0),W.col===7&&(se.redRooksMove.right=!0))),re.toLowerCase()==="p"&&Math.abs(W.row-J.row)===2?se.lastPawnDoubleMove={row:J.row,col:J.col}:se.lastPawnDoubleMove=null,q(se)},$r=(W,J,re="q",se=!1)=>{o[W.row][W.col];const Te=o[J.row][J.col]!==null;if(Jl(Te?"capture":"move"),Te){M({row:J.row,col:J.col,show:!0}),setTimeout(()=>{Gb(W,J,se),M(null)},500);return}Gb(W,J,se)},Jl=W=>{if(!Im)return;let J="";switch(W){case"move":J="/images/move.mp3";break;case"capture":J="/images/capture.mp3";break;case"check":J="/images/play.mp3";break;case"checkmate":J="/images/victory.mp3";break;case"victory":J="/images/victory.mp3";break;default:J="/images/move.mp3"}new Audio(J).play().catch(()=>{})},jf=()=>{if(zb){Jl("victory");for(let W=0;W<50;W++)setTimeout(()=>{const J=document.createElement("div");J.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(J),setTimeout(()=>J.remove(),3e3)},W*100);setTimeout(()=>Wb(!1),5e3)}},[kR,nA]=L.useState(!1),[OR,Kb]=L.useState(!1),rA=()=>{nA(!1),Kb(!1)},Om=()=>{rA(),RR()},Yb=()=>{rA(),P(!1)},DR=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Qb=s==="online";return w.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Ye?" chess-dark-mode":""}`,children:[!n&&w.jsxs("div",{className:"chess-header",children:[w.jsx("h2",{children:"Lawb Chess"}),w.jsxs("div",{className:"chess-controls",children:[e&&w.jsx("button",{onClick:e,children:"_"}),w.jsx("button",{onClick:t,children:""}),w.jsx("button",{className:"dark-mode-toggle",onClick:un,title:Ye?"Switch to light mode":"Switch to dark mode","aria-label":Ye?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:Ye?"":""})]})]}),w.jsxs("div",{className:"game-stable-layout",children:[w.jsxs("div",{className:"left-sidebar",children:[O&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"move-history-status",children:y}),w.jsxs("div",{className:"move-history",children:[w.jsx("div",{className:"move-history-title",children:"Move History"}),w.jsx("ul",{className:"move-history-list",children:b.slice().reverse().map((W,J)=>w.jsx("li",{children:W},b.length-1-J))})]})]}),!O&&w.jsxs("div",{className:"leaderboard",children:[w.jsx("h3",{children:"Leaderboard"}),w.jsx("div",{className:"leaderboard-table",children:w.jsxs("table",{children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Rank"}),w.jsx("th",{children:"Player"}),w.jsx("th",{children:"W"}),w.jsx("th",{children:"L"}),w.jsx("th",{children:"D"}),w.jsx("th",{children:"Points"})]})}),w.jsx("tbody",{children:Array.isArray(C)&&C.slice(0,10).map((W,J)=>{if(typeof W=="object"&&W!==null&&"username"in W&&"wins"in W&&"losses"in W&&"draws"in W&&"points"in W){const re=W;return w.jsxs("tr",{children:[w.jsx("td",{children:J+1}),w.jsx("td",{children:PR(re.username)}),w.jsx("td",{children:re.wins}),w.jsx("td",{children:re.losses}),w.jsx("td",{children:re.draws}),w.jsx("td",{children:re.points})]},re.username)}return null})})]})})]})]}),w.jsxs("div",{className:"center-area",children:[w.jsx("div",{className:"game-info",children:w.jsxs("div",{className:"game-info-bar",children:[w.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),w.jsx("span",{className:"wager-label",children:"Wager:"})," ",w.jsx("span",{children:s==="ai"?"NA":`${D} ETH`}),O&&!fe&&w.jsxs("span",{className:"mode-play",children:["Mode: ",p==="easy"?"Easy":"Hard"]}),p==="easy"&&w.jsxs("span",{className:`stockfish-status ${en}`,children:["LawbBot: ",en==="loading"?"Loading...":en==="ready"?"Ready":"Failed"]}),p==="hard"&&w.jsxs("span",{className:`stockfish-status ${en}`,children:["LawbBot: ",en==="loading"?"Loading...":en==="ready"?"Ready":"Failed"]}),mr&&vo.length>0&&w.jsxs("div",{className:"opening-suggestions",children:[w.jsx("span",{className:"opening-label",children:"Opening:"}),vo.map((W,J)=>w.jsxs("span",{className:"opening-move",children:[W.san," (",Math.round(W.white+W.draws+W.black)," games)"]},J))]})]})}),O?w.jsxs("div",{className:"chess-main-area",children:[w.jsx("div",{className:"chessboard-container",children:w.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Lf})`},children:[Array.from({length:8},(W,J)=>w.jsx("div",{className:"board-row",children:Array.from({length:8},(re,se)=>lB(J,se))},J)),N&&N.show&&w.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:w.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),w.jsxs("div",{className:"game-controls",children:[w.jsx("button",{onClick:()=>Ne(!0),children:"Chess Piece Info"}),w.jsx("button",{onClick:Om,children:"New Game"}),w.jsx("button",{onClick:Yb,children:"Back to Menu"})]}),w.jsxs("div",{className:"epic-controls",children:[w.jsxs("div",{className:"epic-toggle",children:[w.jsx("input",{type:"checkbox",id:"sound-toggle",checked:Im,onChange:W=>Fb(W.target.checked)}),w.jsx("label",{htmlFor:"sound-toggle",children:" Sound Effects"})]}),w.jsxs("div",{className:"epic-toggle",children:[w.jsx("input",{type:"checkbox",id:"victory-toggle",checked:zb,onChange:W=>Wb(W.target.checked)}),w.jsx("label",{htmlFor:"victory-toggle",children:" Victory Celebration"})]})]})]}):fe?Yl():s==="online"?w.jsx(Gre,{onClose:t,onMinimize:e,fullscreen:n}):w.jsxs("div",{className:"game-mode-panel",children:[w.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),w.jsx("button",{className:`mode-btn ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS THE HOUSE"}),w.jsxs("div",{className:"pvp-section",children:[w.jsx("button",{className:`mode-btn ${Qb?"selected":""}`,onClick:()=>i("online"),children:"PvP"}),w.jsx("img",{src:"/images/chessboard4.png",alt:"Chessboard",style:{display:"block",margin:"16px auto 0 auto",width:"180px",maxWidth:"90%"}})]}),w.jsx("button",{className:"start-btn continue-btn",onClick:()=>ne(!0),children:"Continue"}),w.jsxs("div",{className:"how-to-section",children:[w.jsx("h4",{children:"How to Play"}),w.jsxs("div",{className:"how-to-content",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Points System:"})," Win points by defeating the AI. 1 win = 10pts. 1 draw = 1 point."]})]})]})]})]}),w.jsx("div",{className:"right-sidebar",children:O?w.jsxs("div",{className:"leaderboard",children:[w.jsx("h3",{children:"Leaderboard"}),w.jsx("div",{className:"leaderboard-table",children:w.jsxs("table",{children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Rank"}),w.jsx("th",{children:"Player"}),w.jsx("th",{children:"W"}),w.jsx("th",{children:"L"}),w.jsx("th",{children:"D"}),w.jsx("th",{children:"Points"})]})}),w.jsx("tbody",{children:Array.isArray(C)&&C.slice(0,10).map((W,J)=>{if(typeof W=="object"&&W!==null&&"username"in W&&"wins"in W&&"losses"in W&&"draws"in W&&"points"in W){const re=W;return w.jsxs("tr",{children:[w.jsx("td",{children:J+1}),w.jsx("td",{children:PR(re.username)}),w.jsx("td",{children:re.wins}),w.jsx("td",{children:re.losses}),w.jsx("td",{children:re.draws}),w.jsx("td",{children:re.points})]},re.username)}return null})})]})})]}):w.jsx("div",{className:"piece-gallery-panel",children:tA(!1)})})]}),ye&&w.jsx("div",{className:"gallery-modal-overlay",onClick:()=>Ne(!1),children:w.jsxs("div",{className:"gallery-modal",onClick:W=>W.stopPropagation(),children:[w.jsx("button",{className:"close-modal-btn",onClick:()=>Ne(!1),children:""}),tA(!1)]})}),uB(),de&&w.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),kR&&zb&&w.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[w.jsx("div",{className:"balloons-container"}),w.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),w.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[w.jsx("button",{onClick:Om,children:"New Game"}),w.jsx("button",{onClick:Yb,children:"Back to Menu"})]})]}),OR&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(W=>w.jsx("div",{className:"blood-drip",style:{left:`${10+W*14}%`,animationDelay:`${.5+W*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},W))}),w.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[w.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),w.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[w.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Om,children:"New Game"}),w.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Yb,children:"Back to Menu"})]})]})]})]})};function LW(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const MW=()=>{const[t,e]=L.useState("singleplayer");return w.jsxs("div",{className:"chess-page",children:[w.jsxs("div",{className:"chess-header",children:[w.jsx("h1",{children:" Chess"}),w.jsxs("div",{className:"mode-toggle",children:[w.jsx("button",{className:`mode-btn ${t==="singleplayer"?"active":""}`,onClick:()=>e("singleplayer"),children:"Single Player"}),w.jsx("button",{className:`mode-btn ${t==="multiplayer"?"active":""}`,onClick:()=>e("multiplayer"),children:"Multiplayer"})]})]}),w.jsx("div",{className:"chess-content",children:t==="singleplayer"?w.jsx(LYe,{onClose:()=>{}}):w.jsx(Gre,{onClose:()=>{},onMinimize:()=>{},fullscreen:!1})})]})},MYe=new z0e,UYe=typeof window<"u"&&window.location.hostname.startsWith("chess."),BYe=()=>QFe("(max-width: 768px)")?w.jsx(YFe,{}):w.jsx(FFe,{});d2.createRoot(document.getElementById("root")).render(w.jsx(Wo.StrictMode,{children:w.jsx(s0e,{config:Ite.wagmiConfig,children:w.jsx(abe,{client:MYe,children:w.jsx(BFe,{children:w.jsx(LFe,{children:UYe?w.jsx(cx,{path:"/*",element:w.jsx(MW,{})}):w.jsxs(w.Fragment,{children:[w.jsx(cx,{path:"/",element:w.jsx(BYe,{})}),w.jsx(cx,{path:"/chess",element:w.jsx(MW,{})})]})})})})})}));export{fJe as $,qe as A,dt as B,Me as C,it as D,TE as E,N3 as F,Vv as G,mc as H,pSe as I,Nn as J,mJe as K,C$ as L,ps as M,uSe as N,ve as O,Id as P,sx as Q,Ot as R,Ec as S,Qi as T,qSe as U,kE as V,Ds as W,dJe as X,fs as Y,sm as Z,_r as _,ox as a,Jee as a0,A$ as a1,K0 as a2,Nr as a3,aQe as a4,Wu as a5,Bl as a6,B_ as a7,Ze as a8,Wr as a9,yL as aA,ZYe as aB,__ as aC,_fe as aD,Gwe as aE,Ba as aF,Ma as aG,HY as aH,qme as aI,Kd as aa,MY as ab,lT as ac,ge as ad,nM as ae,Jr as af,$pe as ag,rT as ah,fM as ai,jpe as aj,m1 as ak,Oa as al,kf as am,_E as an,Ul as ao,p3e as ap,XQe as aq,$F as ar,NX as as,s3e as at,g3e as au,eJe as av,ZQe as aw,HT as ax,rJe as ay,tJe as az,Rn as b,Ue as c,nt as d,z as e,or as f,Hu as g,gJe as h,Zu as i,jo as j,ht as k,Ji as l,Z2e as m,Al as n,rje as o,Ge as p,yl as q,pJe as r,dn as s,iZ as t,er as u,wj as v,ta as w,uJe as x,ii as y,ri as z};
