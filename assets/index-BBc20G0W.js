const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-DJaIAENA.js","assets/hmac-DqAqE50-.js","assets/secp256k1-Cqsz1zrt.js","assets/embedded-wallet-C8icZZpN.js","assets/if-defined-DXkYMvf4.js","assets/index-DE1_l3_i.js","assets/index-DLVsCICa.js","assets/ref-BXRq_EuX.js","assets/index-CoPKWa7W.js","assets/index-Qhyx44Zk.js","assets/index-DPlFHsIS.js","assets/index-CfAOLYCf.js","assets/index-CSd_swXk.js","assets/index-Bh7ApO2g.js","assets/index-DkLx2IvK.js","assets/email-sk_nuGF9.js","assets/index-CUPO8yvW.js","assets/socials-xOlUys1c.js","assets/index-CH4nzmyg.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DfL16PQC.js","assets/index-CN9dTI5z.js","assets/index-CLl6RA-4.js","assets/index-Dj8OyVSL.js","assets/swaps-DUb4iz2I.js","assets/index-C0wDPSIF.js","assets/index-D62O9-Yy.js","assets/index-qTBal5mD.js","assets/send-C9KNOMIj.js","assets/index-D4PeTqNO.js","assets/index-CIxyIkLR.js","assets/receive-x927dT1_.js","assets/index-CD1kAKKi.js","assets/onramp-Cf8GZiK7.js","assets/index-Cc0wR5lK.js","assets/index-BVIOjXdW.js","assets/index-BjjDlrKB.js","assets/transactions-IjqZ2oug.js","assets/index-Yg7VObu7.js","assets/index-BXh-GUuJ.js","assets/index-DP-iM43G.js","assets/index-CpIYuiTP.js","assets/index-ClUBTPou.js","assets/w3m-modal-Cohu4_4y.js"])))=>i.map(i=>d[i]);
var VK=Object.defineProperty;var mD=t=>{throw TypeError(t)};var KK=(t,e,n)=>e in t?VK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var J=(t,e,n)=>KK(t,typeof e!="symbol"?e+"":e,n),VA=(t,e,n)=>e.has(t)||mD("Cannot "+n);var E=(t,e,n)=>(VA(t,e,"read from private field"),n?n.call(t):e.get(t)),q=(t,e,n)=>e.has(t)?mD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),O=(t,e,n,r)=>(VA(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),X=(t,e,n)=>(VA(t,e,"access private method"),n);var ml=(t,e,n,r)=>({set _(s){O(t,e,s,n)},get _(){return E(t,e,r)}});function QK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Jx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var mL={exports:{}},Yx={},yL={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv=Symbol.for("react.element"),JK=Symbol.for("react.portal"),YK=Symbol.for("react.fragment"),ZK=Symbol.for("react.strict_mode"),XK=Symbol.for("react.profiler"),eQ=Symbol.for("react.provider"),tQ=Symbol.for("react.context"),nQ=Symbol.for("react.forward_ref"),rQ=Symbol.for("react.suspense"),sQ=Symbol.for("react.memo"),iQ=Symbol.for("react.lazy"),yD=Symbol.iterator;function oQ(t){return t===null||typeof t!="object"?null:(t=yD&&t[yD]||t["@@iterator"],typeof t=="function"?t:null)}var wL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bL=Object.assign,vL={};function iy(t,e,n){this.props=t,this.context=e,this.refs=vL,this.updater=n||wL}iy.prototype.isReactComponent={};iy.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};iy.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EL(){}EL.prototype=iy.prototype;function Dk(t,e,n){this.props=t,this.context=e,this.refs=vL,this.updater=n||wL}var $k=Dk.prototype=new EL;$k.constructor=Dk;bL($k,iy.prototype);$k.isPureReactComponent=!0;var wD=Array.isArray,_L=Object.prototype.hasOwnProperty,Uk={current:null},xL={key:!0,ref:!0,__self:!0,__source:!0};function CL(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)_L.call(e,r)&&!xL.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:yv,type:t,key:i,ref:o,props:s,_owner:Uk.current}}function aQ(t,e){return{$$typeof:yv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bk(t){return typeof t=="object"&&t!==null&&t.$$typeof===yv}function cQ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bD=/\/+/g;function KA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cQ(""+t.key):e.toString(36)}function NE(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yv:case JK:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+KA(o,0):r,wD(s)?(n="",t!=null&&(n=t.replace(bD,"$&/")+"/"),NE(s,e,n,"",function(l){return l})):s!=null&&(Bk(s)&&(s=aQ(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(bD,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",wD(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+KA(i,a);o+=NE(i,e,n,c,s)}else if(c=oQ(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+KA(i,a++),o+=NE(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function c1(t,e,n){if(t==null)return t;var r=[],s=0;return NE(t,r,"","",function(i){return e.call(n,i,s++)}),r}function lQ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _s={current:null},PE={transition:null},uQ={ReactCurrentDispatcher:_s,ReactCurrentBatchConfig:PE,ReactCurrentOwner:Uk};function AL(){throw Error("act(...) is not supported in production builds of React.")}ht.Children={map:c1,forEach:function(t,e,n){c1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return c1(t,function(){e++}),e},toArray:function(t){return c1(t,function(e){return e})||[]},only:function(t){if(!Bk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ht.Component=iy;ht.Fragment=YK;ht.Profiler=XK;ht.PureComponent=Dk;ht.StrictMode=ZK;ht.Suspense=rQ;ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uQ;ht.act=AL;ht.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bL({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Uk.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)_L.call(e,c)&&!xL.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:yv,type:t.type,key:s,ref:i,props:r,_owner:o}};ht.createContext=function(t){return t={$$typeof:tQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eQ,_context:t},t.Consumer=t};ht.createElement=CL;ht.createFactory=function(t){var e=CL.bind(null,t);return e.type=t,e};ht.createRef=function(){return{current:null}};ht.forwardRef=function(t){return{$$typeof:nQ,render:t}};ht.isValidElement=Bk;ht.lazy=function(t){return{$$typeof:iQ,_payload:{_status:-1,_result:t},_init:lQ}};ht.memo=function(t,e){return{$$typeof:sQ,type:t,compare:e===void 0?null:e}};ht.startTransition=function(t){var e=PE.transition;PE.transition={};try{t()}finally{PE.transition=e}};ht.unstable_act=AL;ht.useCallback=function(t,e){return _s.current.useCallback(t,e)};ht.useContext=function(t){return _s.current.useContext(t)};ht.useDebugValue=function(){};ht.useDeferredValue=function(t){return _s.current.useDeferredValue(t)};ht.useEffect=function(t,e){return _s.current.useEffect(t,e)};ht.useId=function(){return _s.current.useId()};ht.useImperativeHandle=function(t,e,n){return _s.current.useImperativeHandle(t,e,n)};ht.useInsertionEffect=function(t,e){return _s.current.useInsertionEffect(t,e)};ht.useLayoutEffect=function(t,e){return _s.current.useLayoutEffect(t,e)};ht.useMemo=function(t,e){return _s.current.useMemo(t,e)};ht.useReducer=function(t,e,n){return _s.current.useReducer(t,e,n)};ht.useRef=function(t){return _s.current.useRef(t)};ht.useState=function(t){return _s.current.useState(t)};ht.useSyncExternalStore=function(t,e,n){return _s.current.useSyncExternalStore(t,e,n)};ht.useTransition=function(){return _s.current.useTransition()};ht.version="18.3.1";yL.exports=ht;var D=yL.exports;const xi=Bf(D),dQ=QK({__proto__:null,default:xi},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hQ=D,fQ=Symbol.for("react.element"),pQ=Symbol.for("react.fragment"),gQ=Object.prototype.hasOwnProperty,mQ=hQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yQ={key:!0,ref:!0,__self:!0,__source:!0};function SL(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gQ.call(e,r)&&!yQ.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:fQ,type:t,key:i,ref:o,props:s,_owner:mQ.current}}Yx.Fragment=pQ;Yx.jsx=SL;Yx.jsxs=SL;mL.exports=Yx;var m=mL.exports,BI={},IL={exports:{}},Ni={},TL={exports:{}},NL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,$){var j=B.length;B.push($);e:for(;0<j;){var V=j-1>>>1,ee=B[V];if(0<s(ee,$))B[V]=$,B[j]=ee,j=V;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var $=B[0],j=B.pop();if(j!==$){B[0]=j;e:for(var V=0,ee=B.length,ae=ee>>>1;V<ae;){var re=2*(V+1)-1,ce=B[re],ye=re+1,Z=B[ye];if(0>s(ce,j))ye<ee&&0>s(Z,ce)?(B[V]=Z,B[ye]=j,V=ye):(B[V]=ce,B[re]=j,V=re);else if(ye<ee&&0>s(Z,j))B[V]=Z,B[ye]=j,V=ye;else break e}}return $}function s(B,$){var j=B.sortIndex-$.sortIndex;return j!==0?j:B.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var $=n(l);$!==null;){if($.callback===null)r(l);else if($.startTime<=B)r(l),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(l)}}function x(B){if(g=!1,b(B),!p)if(n(c)!==null)p=!0,N(_);else{var $=n(l);$!==null&&M(x,$.startTime-B)}}function _(B,$){p=!1,g&&(g=!1,w(T),T=-1),f=!0;var j=h;try{for(b($),d=n(c);d!==null&&(!(d.expirationTime>$)||B&&!R());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var ee=V(d.expirationTime<=$);$=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(c)&&r(c),b($)}else r(c);d=n(c)}if(d!==null)var ae=!0;else{var re=n(l);re!==null&&M(x,re.startTime-$),ae=!1}return ae}finally{d=null,h=j,f=!1}}var C=!1,A=null,T=-1,S=5,k=-1;function R(){return!(t.unstable_now()-k<S)}function F(){if(A!==null){var B=t.unstable_now();k=B;var $=!0;try{$=A(!0,B)}finally{$?W():(C=!1,A=null)}}else C=!1}var W;if(typeof v=="function")W=function(){v(F)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,I=Q.port2;Q.port1.onmessage=F,W=function(){I.postMessage(null)}}else W=function(){y(F,0)};function N(B){A=B,C||(C=!0,W())}function M(B,$){T=y(function(){B(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(_))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var j=h;h=$;try{return B()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var j=h;h=B;try{return $()}finally{h=j}},t.unstable_scheduleCallback=function(B,$,j){var V=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,B){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=j+ee,B={id:u++,callback:$,priorityLevel:B,startTime:j,expirationTime:ee,sortIndex:-1},j>V?(B.sortIndex=j,e(l,B),n(c)===null&&B===n(l)&&(g?(w(T),T=-1):g=!0,M(x,j-V))):(B.sortIndex=ee,e(c,B),p||f||(p=!0,N(_))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var $=h;return function(){var j=h;h=$;try{return B.apply(this,arguments)}finally{h=j}}}})(NL);TL.exports=NL;var wQ=TL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bQ=D,Ii=wQ;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PL=new Set,Cw={};function Lf(t,e){Tm(t,e),Tm(t+"Capture",e)}function Tm(t,e){for(Cw[t]=e,t=0;t<e.length;t++)PL.add(e[t])}var Qc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),LI=Object.prototype.hasOwnProperty,vQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vD={},ED={};function EQ(t){return LI.call(ED,t)?!0:LI.call(vD,t)?!1:vQ.test(t)?ED[t]=!0:(vD[t]=!0,!1)}function _Q(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xQ(t,e,n,r){if(e===null||typeof e>"u"||_Q(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xs(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var kr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kr[t]=new xs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kr[e]=new xs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kr[t]=new xs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kr[t]=new xs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kr[t]=new xs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kr[t]=new xs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kr[t]=new xs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kr[t]=new xs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kr[t]=new xs(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lk=/[\-:]([a-z])/g;function Mk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lk,Mk);kr[e]=new xs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lk,Mk);kr[e]=new xs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lk,Mk);kr[e]=new xs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kr[t]=new xs(t,1,!1,t.toLowerCase(),null,!1,!1)});kr.xlinkHref=new xs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kr[t]=new xs(t,1,!1,t.toLowerCase(),null,!0,!0)});function jk(t,e,n,r){var s=kr.hasOwnProperty(e)?kr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xQ(e,n,s,r)&&(n=null),r||s===null?EQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var al=bQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l1=Symbol.for("react.element"),Hp=Symbol.for("react.portal"),Wp=Symbol.for("react.fragment"),Fk=Symbol.for("react.strict_mode"),MI=Symbol.for("react.profiler"),kL=Symbol.for("react.provider"),OL=Symbol.for("react.context"),zk=Symbol.for("react.forward_ref"),jI=Symbol.for("react.suspense"),FI=Symbol.for("react.suspense_list"),Hk=Symbol.for("react.memo"),Gl=Symbol.for("react.lazy"),RL=Symbol.for("react.offscreen"),_D=Symbol.iterator;function Ly(t){return t===null||typeof t!="object"?null:(t=_D&&t[_D]||t["@@iterator"],typeof t=="function"?t:null)}var _n=Object.assign,QA;function _0(t){if(QA===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);QA=e&&e[1]||""}return`
`+QA+t}var JA=!1;function YA(t,e){if(!t||JA)return"";JA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{JA=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_0(t):""}function CQ(t){switch(t.tag){case 5:return _0(t.type);case 16:return _0("Lazy");case 13:return _0("Suspense");case 19:return _0("SuspenseList");case 0:case 2:case 15:return t=YA(t.type,!1),t;case 11:return t=YA(t.type.render,!1),t;case 1:return t=YA(t.type,!0),t;default:return""}}function zI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wp:return"Fragment";case Hp:return"Portal";case MI:return"Profiler";case Fk:return"StrictMode";case jI:return"Suspense";case FI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case OL:return(t.displayName||"Context")+".Consumer";case kL:return(t._context.displayName||"Context")+".Provider";case zk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hk:return e=t.displayName||null,e!==null?e:zI(t.type)||"Memo";case Gl:e=t._payload,t=t._init;try{return zI(t(e))}catch{}}return null}function AQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zI(e);case 8:return e===Fk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SQ(t){var e=DL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function u1(t){t._valueTracker||(t._valueTracker=SQ(t))}function $L(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=DL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function y_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function HI(t,e){var n=e.checked;return _n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xD(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cd(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UL(t,e){e=e.checked,e!=null&&jk(t,"checked",e,!1)}function WI(t,e){UL(t,e);var n=cd(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qI(t,e.type,n):e.hasOwnProperty("defaultValue")&&qI(t,e.type,cd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function CD(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qI(t,e,n){(e!=="number"||y_(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var x0=Array.isArray;function ug(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cd(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function GI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return _n({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function AD(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(x0(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cd(n)}}function BL(t,e){var n=cd(e.value),r=cd(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function SD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function VI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var d1,ML=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(d1=d1||document.createElement("div"),d1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=d1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Aw(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var W0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IQ=["Webkit","ms","Moz","O"];Object.keys(W0).forEach(function(t){IQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),W0[e]=W0[t]})});function jL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||W0.hasOwnProperty(t)&&W0[t]?(""+e).trim():e+"px"}function FL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var TQ=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function KI(t,e){if(e){if(TQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function QI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JI=null;function Wk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var YI=null,dg=null,hg=null;function ID(t){if(t=vv(t)){if(typeof YI!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=nC(e),YI(t.stateNode,t.type,e))}}function zL(t){dg?hg?hg.push(t):hg=[t]:dg=t}function HL(){if(dg){var t=dg,e=hg;if(hg=dg=null,ID(t),e)for(t=0;t<e.length;t++)ID(e[t])}}function WL(t,e){return t(e)}function qL(){}var ZA=!1;function GL(t,e,n){if(ZA)return t(e,n);ZA=!0;try{return WL(t,e,n)}finally{ZA=!1,(dg!==null||hg!==null)&&(qL(),HL())}}function Sw(t,e){var n=t.stateNode;if(n===null)return null;var r=nC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var ZI=!1;if(Qc)try{var My={};Object.defineProperty(My,"passive",{get:function(){ZI=!0}}),window.addEventListener("test",My,My),window.removeEventListener("test",My,My)}catch{ZI=!1}function NQ(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var q0=!1,w_=null,b_=!1,XI=null,PQ={onError:function(t){q0=!0,w_=t}};function kQ(t,e,n,r,s,i,o,a,c){q0=!1,w_=null,NQ.apply(PQ,arguments)}function OQ(t,e,n,r,s,i,o,a,c){if(kQ.apply(this,arguments),q0){if(q0){var l=w_;q0=!1,w_=null}else throw Error(fe(198));b_||(b_=!0,XI=l)}}function Mf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function TD(t){if(Mf(t)!==t)throw Error(fe(188))}function RQ(t){var e=t.alternate;if(!e){if(e=Mf(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return TD(s),t;if(i===r)return TD(s),e;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function KL(t){return t=RQ(t),t!==null?QL(t):null}function QL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QL(t);if(e!==null)return e;t=t.sibling}return null}var JL=Ii.unstable_scheduleCallback,ND=Ii.unstable_cancelCallback,DQ=Ii.unstable_shouldYield,$Q=Ii.unstable_requestPaint,$n=Ii.unstable_now,UQ=Ii.unstable_getCurrentPriorityLevel,qk=Ii.unstable_ImmediatePriority,YL=Ii.unstable_UserBlockingPriority,v_=Ii.unstable_NormalPriority,BQ=Ii.unstable_LowPriority,ZL=Ii.unstable_IdlePriority,Zx=null,Ba=null;function LQ(t){if(Ba&&typeof Ba.onCommitFiberRoot=="function")try{Ba.onCommitFiberRoot(Zx,t,void 0,(t.current.flags&128)===128)}catch{}}var Go=Math.clz32?Math.clz32:FQ,MQ=Math.log,jQ=Math.LN2;function FQ(t){return t>>>=0,t===0?32:31-(MQ(t)/jQ|0)|0}var h1=64,f1=4194304;function C0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function E_(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=C0(a):(i&=o,i!==0&&(r=C0(i)))}else o=n&~s,o!==0?r=C0(o):i!==0&&(r=C0(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Go(e),s=1<<n,r|=t[n],e&=~s;return r}function zQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HQ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Go(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=zQ(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function eT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XL(){var t=h1;return h1<<=1,!(h1&4194240)&&(h1=64),t}function XA(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Go(e),t[e]=n}function WQ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Go(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Go(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var zt=0;function eM(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tM,Vk,nM,rM,sM,tT=!1,p1=[],Hu=null,Wu=null,qu=null,Iw=new Map,Tw=new Map,nu=[],qQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PD(t,e){switch(t){case"focusin":case"focusout":Hu=null;break;case"dragenter":case"dragleave":Wu=null;break;case"mouseover":case"mouseout":qu=null;break;case"pointerover":case"pointerout":Iw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tw.delete(e.pointerId)}}function jy(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=vv(e),e!==null&&Vk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GQ(t,e,n,r,s){switch(e){case"focusin":return Hu=jy(Hu,t,e,n,r,s),!0;case"dragenter":return Wu=jy(Wu,t,e,n,r,s),!0;case"mouseover":return qu=jy(qu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Iw.set(i,jy(Iw.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Tw.set(i,jy(Tw.get(i)||null,t,e,n,r,s)),!0}return!1}function iM(t){var e=lh(t.target);if(e!==null){var n=Mf(e);if(n!==null){if(e=n.tag,e===13){if(e=VL(n),e!==null){t.blockedOn=e,sM(t.priority,function(){nM(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kE(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);JI=r,n.target.dispatchEvent(r),JI=null}else return e=vv(n),e!==null&&Vk(e),t.blockedOn=n,!1;e.shift()}return!0}function kD(t,e,n){kE(t)&&n.delete(e)}function VQ(){tT=!1,Hu!==null&&kE(Hu)&&(Hu=null),Wu!==null&&kE(Wu)&&(Wu=null),qu!==null&&kE(qu)&&(qu=null),Iw.forEach(kD),Tw.forEach(kD)}function Fy(t,e){t.blockedOn===e&&(t.blockedOn=null,tT||(tT=!0,Ii.unstable_scheduleCallback(Ii.unstable_NormalPriority,VQ)))}function Nw(t){function e(s){return Fy(s,t)}if(0<p1.length){Fy(p1[0],t);for(var n=1;n<p1.length;n++){var r=p1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hu!==null&&Fy(Hu,t),Wu!==null&&Fy(Wu,t),qu!==null&&Fy(qu,t),Iw.forEach(e),Tw.forEach(e),n=0;n<nu.length;n++)r=nu[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<nu.length&&(n=nu[0],n.blockedOn===null);)iM(n),n.blockedOn===null&&nu.shift()}var fg=al.ReactCurrentBatchConfig,__=!0;function KQ(t,e,n,r){var s=zt,i=fg.transition;fg.transition=null;try{zt=1,Kk(t,e,n,r)}finally{zt=s,fg.transition=i}}function QQ(t,e,n,r){var s=zt,i=fg.transition;fg.transition=null;try{zt=4,Kk(t,e,n,r)}finally{zt=s,fg.transition=i}}function Kk(t,e,n,r){if(__){var s=nT(t,e,n,r);if(s===null)lS(t,e,r,x_,n),PD(t,r);else if(GQ(s,t,e,n,r))r.stopPropagation();else if(PD(t,r),e&4&&-1<qQ.indexOf(t)){for(;s!==null;){var i=vv(s);if(i!==null&&tM(i),i=nT(t,e,n,r),i===null&&lS(t,e,r,x_,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else lS(t,e,r,null,n)}}var x_=null;function nT(t,e,n,r){if(x_=null,t=Wk(r),t=lh(t),t!==null)if(e=Mf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return x_=t,null}function oM(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UQ()){case qk:return 1;case YL:return 4;case v_:case BQ:return 16;case ZL:return 536870912;default:return 16}default:return 16}}var $u=null,Qk=null,OE=null;function aM(){if(OE)return OE;var t,e=Qk,n=e.length,r,s="value"in $u?$u.value:$u.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return OE=s.slice(t,1<r?1-r:void 0)}function RE(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function g1(){return!0}function OD(){return!1}function Pi(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?g1:OD,this.isPropagationStopped=OD,this}return _n(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=g1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=g1)},persist:function(){},isPersistent:g1}),e}var oy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jk=Pi(oy),bv=_n({},oy,{view:0,detail:0}),JQ=Pi(bv),eS,tS,zy,Xx=_n({},bv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zy&&(zy&&t.type==="mousemove"?(eS=t.screenX-zy.screenX,tS=t.screenY-zy.screenY):tS=eS=0,zy=t),eS)},movementY:function(t){return"movementY"in t?t.movementY:tS}}),RD=Pi(Xx),YQ=_n({},Xx,{dataTransfer:0}),ZQ=Pi(YQ),XQ=_n({},bv,{relatedTarget:0}),nS=Pi(XQ),eJ=_n({},oy,{animationName:0,elapsedTime:0,pseudoElement:0}),tJ=Pi(eJ),nJ=_n({},oy,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rJ=Pi(nJ),sJ=_n({},oy,{data:0}),DD=Pi(sJ),iJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cJ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aJ[t])?!!e[t]:!1}function Yk(){return cJ}var lJ=_n({},bv,{key:function(t){if(t.key){var e=iJ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=RE(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oJ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yk,charCode:function(t){return t.type==="keypress"?RE(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?RE(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uJ=Pi(lJ),dJ=_n({},Xx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$D=Pi(dJ),hJ=_n({},bv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yk}),fJ=Pi(hJ),pJ=_n({},oy,{propertyName:0,elapsedTime:0,pseudoElement:0}),gJ=Pi(pJ),mJ=_n({},Xx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yJ=Pi(mJ),wJ=[9,13,27,32],Zk=Qc&&"CompositionEvent"in window,G0=null;Qc&&"documentMode"in document&&(G0=document.documentMode);var bJ=Qc&&"TextEvent"in window&&!G0,cM=Qc&&(!Zk||G0&&8<G0&&11>=G0),UD=" ",BD=!1;function lM(t,e){switch(t){case"keyup":return wJ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uM(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qp=!1;function vJ(t,e){switch(t){case"compositionend":return uM(e);case"keypress":return e.which!==32?null:(BD=!0,UD);case"textInput":return t=e.data,t===UD&&BD?null:t;default:return null}}function EJ(t,e){if(qp)return t==="compositionend"||!Zk&&lM(t,e)?(t=aM(),OE=Qk=$u=null,qp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cM&&e.locale!=="ko"?null:e.data;default:return null}}var _J={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_J[t.type]:e==="textarea"}function dM(t,e,n,r){zL(r),e=C_(e,"onChange"),0<e.length&&(n=new Jk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var V0=null,Pw=null;function xJ(t){_M(t,0)}function eC(t){var e=Kp(t);if($L(e))return t}function CJ(t,e){if(t==="change")return e}var hM=!1;if(Qc){var rS;if(Qc){var sS="oninput"in document;if(!sS){var MD=document.createElement("div");MD.setAttribute("oninput","return;"),sS=typeof MD.oninput=="function"}rS=sS}else rS=!1;hM=rS&&(!document.documentMode||9<document.documentMode)}function jD(){V0&&(V0.detachEvent("onpropertychange",fM),Pw=V0=null)}function fM(t){if(t.propertyName==="value"&&eC(Pw)){var e=[];dM(e,Pw,t,Wk(t)),GL(xJ,e)}}function AJ(t,e,n){t==="focusin"?(jD(),V0=e,Pw=n,V0.attachEvent("onpropertychange",fM)):t==="focusout"&&jD()}function SJ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eC(Pw)}function IJ(t,e){if(t==="click")return eC(e)}function TJ(t,e){if(t==="input"||t==="change")return eC(e)}function NJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yo=typeof Object.is=="function"?Object.is:NJ;function kw(t,e){if(Yo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!LI.call(e,s)||!Yo(t[s],e[s]))return!1}return!0}function FD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zD(t,e){var n=FD(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=FD(n)}}function pM(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pM(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gM(){for(var t=window,e=y_();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=y_(t.document)}return e}function Xk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PJ(t){var e=gM(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pM(n.ownerDocument.documentElement,n)){if(r!==null&&Xk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zD(n,i);var o=zD(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kJ=Qc&&"documentMode"in document&&11>=document.documentMode,Gp=null,rT=null,K0=null,sT=!1;function HD(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sT||Gp==null||Gp!==y_(r)||(r=Gp,"selectionStart"in r&&Xk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),K0&&kw(K0,r)||(K0=r,r=C_(rT,"onSelect"),0<r.length&&(e=new Jk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gp)))}function m1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vp={animationend:m1("Animation","AnimationEnd"),animationiteration:m1("Animation","AnimationIteration"),animationstart:m1("Animation","AnimationStart"),transitionend:m1("Transition","TransitionEnd")},iS={},mM={};Qc&&(mM=document.createElement("div").style,"AnimationEvent"in window||(delete Vp.animationend.animation,delete Vp.animationiteration.animation,delete Vp.animationstart.animation),"TransitionEvent"in window||delete Vp.transitionend.transition);function tC(t){if(iS[t])return iS[t];if(!Vp[t])return t;var e=Vp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mM)return iS[t]=e[n];return t}var yM=tC("animationend"),wM=tC("animationiteration"),bM=tC("animationstart"),vM=tC("transitionend"),EM=new Map,WD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cd(t,e){EM.set(t,e),Lf(e,[t])}for(var oS=0;oS<WD.length;oS++){var aS=WD[oS],OJ=aS.toLowerCase(),RJ=aS[0].toUpperCase()+aS.slice(1);Cd(OJ,"on"+RJ)}Cd(yM,"onAnimationEnd");Cd(wM,"onAnimationIteration");Cd(bM,"onAnimationStart");Cd("dblclick","onDoubleClick");Cd("focusin","onFocus");Cd("focusout","onBlur");Cd(vM,"onTransitionEnd");Tm("onMouseEnter",["mouseout","mouseover"]);Tm("onMouseLeave",["mouseout","mouseover"]);Tm("onPointerEnter",["pointerout","pointerover"]);Tm("onPointerLeave",["pointerout","pointerover"]);Lf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var A0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(A0));function qD(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,OQ(r,e,void 0,t),t.currentTarget=null}function _M(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;qD(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;qD(s,a,l),i=c}}}if(b_)throw t=XI,b_=!1,XI=null,t}function ln(t,e){var n=e[lT];n===void 0&&(n=e[lT]=new Set);var r=t+"__bubble";n.has(r)||(xM(e,t,2,!1),n.add(r))}function cS(t,e,n){var r=0;e&&(r|=4),xM(n,t,r,e)}var y1="_reactListening"+Math.random().toString(36).slice(2);function Ow(t){if(!t[y1]){t[y1]=!0,PL.forEach(function(n){n!=="selectionchange"&&(DJ.has(n)||cS(n,!1,t),cS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[y1]||(e[y1]=!0,cS("selectionchange",!1,e))}}function xM(t,e,n,r){switch(oM(e)){case 1:var s=KQ;break;case 4:s=QQ;break;default:s=Kk}n=s.bind(null,e,n,t),s=void 0,!ZI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function lS(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=lh(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}GL(function(){var l=i,u=Wk(n),d=[];e:{var h=EM.get(t);if(h!==void 0){var f=Jk,p=t;switch(t){case"keypress":if(RE(n)===0)break e;case"keydown":case"keyup":f=uJ;break;case"focusin":p="focus",f=nS;break;case"focusout":p="blur",f=nS;break;case"beforeblur":case"afterblur":f=nS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=RD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ZQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=fJ;break;case yM:case wM:case bM:f=tJ;break;case vM:f=gJ;break;case"scroll":f=JQ;break;case"wheel":f=yJ;break;case"copy":case"cut":case"paste":f=rJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=$D}var g=(e&4)!==0,y=!g&&t==="scroll",w=g?h!==null?h+"Capture":null:h;g=[];for(var v=l,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,w!==null&&(x=Sw(v,w),x!=null&&g.push(Rw(v,x,b)))),y)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==JI&&(p=n.relatedTarget||n.fromElement)&&(lh(p)||p[Jc]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?lh(p):null,p!==null&&(y=Mf(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=RD,x="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=$D,x="onPointerLeave",w="onPointerEnter",v="pointer"),y=f==null?h:Kp(f),b=p==null?h:Kp(p),h=new g(x,v+"leave",f,n,u),h.target=y,h.relatedTarget=b,x=null,lh(u)===l&&(g=new g(w,v+"enter",p,n,u),g.target=b,g.relatedTarget=y,x=g),y=x,f&&p)t:{for(g=f,w=p,v=0,b=g;b;b=np(b))v++;for(b=0,x=w;x;x=np(x))b++;for(;0<v-b;)g=np(g),v--;for(;0<b-v;)w=np(w),b--;for(;v--;){if(g===w||w!==null&&g===w.alternate)break t;g=np(g),w=np(w)}g=null}else g=null;f!==null&&GD(d,h,f,g,!1),p!==null&&y!==null&&GD(d,y,p,g,!0)}}e:{if(h=l?Kp(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=CJ;else if(LD(h))if(hM)_=TJ;else{_=SJ;var C=AJ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=IJ);if(_&&(_=_(t,l))){dM(d,_,n,u);break e}C&&C(t,h,l),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&qI(h,"number",h.value)}switch(C=l?Kp(l):window,t){case"focusin":(LD(C)||C.contentEditable==="true")&&(Gp=C,rT=l,K0=null);break;case"focusout":K0=rT=Gp=null;break;case"mousedown":sT=!0;break;case"contextmenu":case"mouseup":case"dragend":sT=!1,HD(d,n,u);break;case"selectionchange":if(kJ)break;case"keydown":case"keyup":HD(d,n,u)}var A;if(Zk)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else qp?lM(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(cM&&n.locale!=="ko"&&(qp||T!=="onCompositionStart"?T==="onCompositionEnd"&&qp&&(A=aM()):($u=u,Qk="value"in $u?$u.value:$u.textContent,qp=!0)),C=C_(l,T),0<C.length&&(T=new DD(T,t,null,n,u),d.push({event:T,listeners:C}),A?T.data=A:(A=uM(n),A!==null&&(T.data=A)))),(A=bJ?vJ(t,n):EJ(t,n))&&(l=C_(l,"onBeforeInput"),0<l.length&&(u=new DD("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}_M(d,e)})}function Rw(t,e,n){return{instance:t,listener:e,currentTarget:n}}function C_(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sw(t,n),i!=null&&r.unshift(Rw(t,i,s)),i=Sw(t,e),i!=null&&r.push(Rw(t,i,s))),t=t.return}return r}function np(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function GD(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=Sw(n,i),c!=null&&o.unshift(Rw(n,c,a))):s||(c=Sw(n,i),c!=null&&o.push(Rw(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $J=/\r\n?/g,UJ=/\u0000|\uFFFD/g;function VD(t){return(typeof t=="string"?t:""+t).replace($J,`
`).replace(UJ,"")}function w1(t,e,n){if(e=VD(e),VD(t)!==e&&n)throw Error(fe(425))}function A_(){}var iT=null,oT=null;function aT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cT=typeof setTimeout=="function"?setTimeout:void 0,BJ=typeof clearTimeout=="function"?clearTimeout:void 0,KD=typeof Promise=="function"?Promise:void 0,LJ=typeof queueMicrotask=="function"?queueMicrotask:typeof KD<"u"?function(t){return KD.resolve(null).then(t).catch(MJ)}:cT;function MJ(t){setTimeout(function(){throw t})}function uS(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nw(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nw(e)}function Gu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function QD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ay=Math.random().toString(36).slice(2),ka="__reactFiber$"+ay,Dw="__reactProps$"+ay,Jc="__reactContainer$"+ay,lT="__reactEvents$"+ay,jJ="__reactListeners$"+ay,FJ="__reactHandles$"+ay;function lh(t){var e=t[ka];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jc]||n[ka]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=QD(t);t!==null;){if(n=t[ka])return n;t=QD(t)}return e}t=n,n=t.parentNode}return null}function vv(t){return t=t[ka]||t[Jc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function nC(t){return t[Dw]||null}var uT=[],Qp=-1;function Ad(t){return{current:t}}function hn(t){0>Qp||(t.current=uT[Qp],uT[Qp]=null,Qp--)}function sn(t,e){Qp++,uT[Qp]=t.current,t.current=e}var ld={},es=Ad(ld),Js=Ad(!1),uf=ld;function Nm(t,e){var n=t.type.contextTypes;if(!n)return ld;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ys(t){return t=t.childContextTypes,t!=null}function S_(){hn(Js),hn(es)}function JD(t,e,n){if(es.current!==ld)throw Error(fe(168));sn(es,e),sn(Js,n)}function CM(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,AQ(t)||"Unknown",s));return _n({},n,r)}function I_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ld,uf=es.current,sn(es,t),sn(Js,Js.current),!0}function YD(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=CM(t,e,uf),r.__reactInternalMemoizedMergedChildContext=t,hn(Js),hn(es),sn(es,t)):hn(Js),sn(Js,n)}var yc=null,rC=!1,dS=!1;function AM(t){yc===null?yc=[t]:yc.push(t)}function zJ(t){rC=!0,AM(t)}function Sd(){if(!dS&&yc!==null){dS=!0;var t=0,e=zt;try{var n=yc;for(zt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yc=null,rC=!1}catch(s){throw yc!==null&&(yc=yc.slice(t+1)),JL(qk,Sd),s}finally{zt=e,dS=!1}}return null}var Jp=[],Yp=0,T_=null,N_=0,Xi=[],eo=0,df=null,Bc=1,Lc="";function qd(t,e){Jp[Yp++]=N_,Jp[Yp++]=T_,T_=t,N_=e}function SM(t,e,n){Xi[eo++]=Bc,Xi[eo++]=Lc,Xi[eo++]=df,df=t;var r=Bc;t=Lc;var s=32-Go(r)-1;r&=~(1<<s),n+=1;var i=32-Go(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bc=1<<32-Go(e)+s|n<<s|r,Lc=i+t}else Bc=1<<i|n<<s|r,Lc=t}function eO(t){t.return!==null&&(qd(t,1),SM(t,1,0))}function tO(t){for(;t===T_;)T_=Jp[--Yp],Jp[Yp]=null,N_=Jp[--Yp],Jp[Yp]=null;for(;t===df;)df=Xi[--eo],Xi[eo]=null,Lc=Xi[--eo],Xi[eo]=null,Bc=Xi[--eo],Xi[eo]=null}var Ci=null,Ei=null,gn=!1,Bo=null;function IM(t,e){var n=to(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ZD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ci=t,Ei=Gu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ci=t,Ei=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=df!==null?{id:Bc,overflow:Lc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=to(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ci=t,Ei=null,!0):!1;default:return!1}}function dT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hT(t){if(gn){var e=Ei;if(e){var n=e;if(!ZD(t,e)){if(dT(t))throw Error(fe(418));e=Gu(n.nextSibling);var r=Ci;e&&ZD(t,e)?IM(r,n):(t.flags=t.flags&-4097|2,gn=!1,Ci=t)}}else{if(dT(t))throw Error(fe(418));t.flags=t.flags&-4097|2,gn=!1,Ci=t}}}function XD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ci=t}function b1(t){if(t!==Ci)return!1;if(!gn)return XD(t),gn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!aT(t.type,t.memoizedProps)),e&&(e=Ei)){if(dT(t))throw TM(),Error(fe(418));for(;e;)IM(t,e),e=Gu(e.nextSibling)}if(XD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ei=Gu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ei=null}}else Ei=Ci?Gu(t.stateNode.nextSibling):null;return!0}function TM(){for(var t=Ei;t;)t=Gu(t.nextSibling)}function Pm(){Ei=Ci=null,gn=!1}function nO(t){Bo===null?Bo=[t]:Bo.push(t)}var HJ=al.ReactCurrentBatchConfig;function Hy(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function v1(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function e$(t){var e=t._init;return e(t._payload)}function NM(t){function e(w,v){if(t){var b=w.deletions;b===null?(w.deletions=[v],w.flags|=16):b.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Ju(w,v),w.index=0,w.sibling=null,w}function i(w,v,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<v?(w.flags|=2,v):b):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,b,x){return v===null||v.tag!==6?(v=wS(b,w.mode,x),v.return=w,v):(v=s(v,b),v.return=w,v)}function c(w,v,b,x){var _=b.type;return _===Wp?u(w,v,b.props.children,x,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Gl&&e$(_)===v.type)?(x=s(v,b.props),x.ref=Hy(w,v,b),x.return=w,x):(x=jE(b.type,b.key,b.props,null,w.mode,x),x.ref=Hy(w,v,b),x.return=w,x)}function l(w,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=bS(b,w.mode,x),v.return=w,v):(v=s(v,b.children||[]),v.return=w,v)}function u(w,v,b,x,_){return v===null||v.tag!==7?(v=tf(b,w.mode,x,_),v.return=w,v):(v=s(v,b),v.return=w,v)}function d(w,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wS(""+v,w.mode,b),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case l1:return b=jE(v.type,v.key,v.props,null,w.mode,b),b.ref=Hy(w,null,v),b.return=w,b;case Hp:return v=bS(v,w.mode,b),v.return=w,v;case Gl:var x=v._init;return d(w,x(v._payload),b)}if(x0(v)||Ly(v))return v=tf(v,w.mode,b,null),v.return=w,v;v1(w,v)}return null}function h(w,v,b,x){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(w,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case l1:return b.key===_?c(w,v,b,x):null;case Hp:return b.key===_?l(w,v,b,x):null;case Gl:return _=b._init,h(w,v,_(b._payload),x)}if(x0(b)||Ly(b))return _!==null?null:u(w,v,b,x,null);v1(w,b)}return null}function f(w,v,b,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(b)||null,a(v,w,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case l1:return w=w.get(x.key===null?b:x.key)||null,c(v,w,x,_);case Hp:return w=w.get(x.key===null?b:x.key)||null,l(v,w,x,_);case Gl:var C=x._init;return f(w,v,b,C(x._payload),_)}if(x0(x)||Ly(x))return w=w.get(b)||null,u(v,w,x,_,null);v1(v,x)}return null}function p(w,v,b,x){for(var _=null,C=null,A=v,T=v=0,S=null;A!==null&&T<b.length;T++){A.index>T?(S=A,A=null):S=A.sibling;var k=h(w,A,b[T],x);if(k===null){A===null&&(A=S);break}t&&A&&k.alternate===null&&e(w,A),v=i(k,v,T),C===null?_=k:C.sibling=k,C=k,A=S}if(T===b.length)return n(w,A),gn&&qd(w,T),_;if(A===null){for(;T<b.length;T++)A=d(w,b[T],x),A!==null&&(v=i(A,v,T),C===null?_=A:C.sibling=A,C=A);return gn&&qd(w,T),_}for(A=r(w,A);T<b.length;T++)S=f(A,w,T,b[T],x),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?T:S.key),v=i(S,v,T),C===null?_=S:C.sibling=S,C=S);return t&&A.forEach(function(R){return e(w,R)}),gn&&qd(w,T),_}function g(w,v,b,x){var _=Ly(b);if(typeof _!="function")throw Error(fe(150));if(b=_.call(b),b==null)throw Error(fe(151));for(var C=_=null,A=v,T=v=0,S=null,k=b.next();A!==null&&!k.done;T++,k=b.next()){A.index>T?(S=A,A=null):S=A.sibling;var R=h(w,A,k.value,x);if(R===null){A===null&&(A=S);break}t&&A&&R.alternate===null&&e(w,A),v=i(R,v,T),C===null?_=R:C.sibling=R,C=R,A=S}if(k.done)return n(w,A),gn&&qd(w,T),_;if(A===null){for(;!k.done;T++,k=b.next())k=d(w,k.value,x),k!==null&&(v=i(k,v,T),C===null?_=k:C.sibling=k,C=k);return gn&&qd(w,T),_}for(A=r(w,A);!k.done;T++,k=b.next())k=f(A,w,T,k.value,x),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?T:k.key),v=i(k,v,T),C===null?_=k:C.sibling=k,C=k);return t&&A.forEach(function(F){return e(w,F)}),gn&&qd(w,T),_}function y(w,v,b,x){if(typeof b=="object"&&b!==null&&b.type===Wp&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case l1:e:{for(var _=b.key,C=v;C!==null;){if(C.key===_){if(_=b.type,_===Wp){if(C.tag===7){n(w,C.sibling),v=s(C,b.props.children),v.return=w,w=v;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Gl&&e$(_)===C.type){n(w,C.sibling),v=s(C,b.props),v.ref=Hy(w,C,b),v.return=w,w=v;break e}n(w,C);break}else e(w,C);C=C.sibling}b.type===Wp?(v=tf(b.props.children,w.mode,x,b.key),v.return=w,w=v):(x=jE(b.type,b.key,b.props,null,w.mode,x),x.ref=Hy(w,v,b),x.return=w,w=x)}return o(w);case Hp:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(w,v.sibling),v=s(v,b.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=bS(b,w.mode,x),v.return=w,w=v}return o(w);case Gl:return C=b._init,y(w,v,C(b._payload),x)}if(x0(b))return p(w,v,b,x);if(Ly(b))return g(w,v,b,x);v1(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,b),v.return=w,w=v):(n(w,v),v=wS(b,w.mode,x),v.return=w,w=v),o(w)):n(w,v)}return y}var km=NM(!0),PM=NM(!1),P_=Ad(null),k_=null,Zp=null,rO=null;function sO(){rO=Zp=k_=null}function iO(t){var e=P_.current;hn(P_),t._currentValue=e}function fT(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pg(t,e){k_=t,rO=Zp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ks=!0),t.firstContext=null)}function so(t){var e=t._currentValue;if(rO!==t)if(t={context:t,memoizedValue:e,next:null},Zp===null){if(k_===null)throw Error(fe(308));Zp=t,k_.dependencies={lanes:0,firstContext:t}}else Zp=Zp.next=t;return e}var uh=null;function oO(t){uh===null?uh=[t]:uh.push(t)}function kM(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,oO(e)):(n.next=s.next,s.next=n),e.interleaved=n,Yc(t,r)}function Yc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vl=!1;function aO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_t&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Yc(t,n)}return s=r.interleaved,s===null?(e.next=e,oO(r)):(e.next=s.next,s.next=e),r.interleaved=e,Yc(t,n)}function DE(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gk(t,n)}}function t$(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function O_(t,e,n,r){var s=t.updateQueue;Vl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=_n({},d,h);break e;case 2:Vl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ff|=o,t.lanes=o,t.memoizedState=d}}function n$(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var Ev={},La=Ad(Ev),$w=Ad(Ev),Uw=Ad(Ev);function dh(t){if(t===Ev)throw Error(fe(174));return t}function cO(t,e){switch(sn(Uw,e),sn($w,t),sn(La,Ev),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:VI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=VI(e,t)}hn(La),sn(La,e)}function Om(){hn(La),hn($w),hn(Uw)}function RM(t){dh(Uw.current);var e=dh(La.current),n=VI(e,t.type);e!==n&&(sn($w,t),sn(La,n))}function lO(t){$w.current===t&&(hn(La),hn($w))}var wn=Ad(0);function R_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hS=[];function uO(){for(var t=0;t<hS.length;t++)hS[t]._workInProgressVersionPrimary=null;hS.length=0}var $E=al.ReactCurrentDispatcher,fS=al.ReactCurrentBatchConfig,hf=0,En=null,Jn=null,ar=null,D_=!1,Q0=!1,Bw=0,WJ=0;function Lr(){throw Error(fe(321))}function dO(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yo(t[n],e[n]))return!1;return!0}function hO(t,e,n,r,s,i){if(hf=i,En=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$E.current=t===null||t.memoizedState===null?KJ:QJ,t=n(r,s),Q0){i=0;do{if(Q0=!1,Bw=0,25<=i)throw Error(fe(301));i+=1,ar=Jn=null,e.updateQueue=null,$E.current=JJ,t=n(r,s)}while(Q0)}if($E.current=$_,e=Jn!==null&&Jn.next!==null,hf=0,ar=Jn=En=null,D_=!1,e)throw Error(fe(300));return t}function fO(){var t=Bw!==0;return Bw=0,t}function fa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?En.memoizedState=ar=t:ar=ar.next=t,ar}function io(){if(Jn===null){var t=En.alternate;t=t!==null?t.memoizedState:null}else t=Jn.next;var e=ar===null?En.memoizedState:ar.next;if(e!==null)ar=e,Jn=t;else{if(t===null)throw Error(fe(310));Jn=t,t={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},ar===null?En.memoizedState=ar=t:ar=ar.next=t}return ar}function Lw(t,e){return typeof e=="function"?e(t):e}function pS(t){var e=io(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=Jn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((hf&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,En.lanes|=u,ff|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Yo(r,e.memoizedState)||(Ks=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,En.lanes|=i,ff|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gS(t){var e=io(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Yo(i,e.memoizedState)||(Ks=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function DM(){}function $M(t,e){var n=En,r=io(),s=e(),i=!Yo(r.memoizedState,s);if(i&&(r.memoizedState=s,Ks=!0),r=r.queue,pO(LM.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ar!==null&&ar.memoizedState.tag&1){if(n.flags|=2048,Mw(9,BM.bind(null,n,r,s,e),void 0,null),fr===null)throw Error(fe(349));hf&30||UM(n,e,s)}return s}function UM(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function BM(t,e,n,r){e.value=n,e.getSnapshot=r,MM(e)&&jM(t)}function LM(t,e,n){return n(function(){MM(e)&&jM(t)})}function MM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yo(t,n)}catch{return!0}}function jM(t){var e=Yc(t,1);e!==null&&Vo(e,t,1,-1)}function r$(t){var e=fa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lw,lastRenderedState:t},e.queue=t,t=t.dispatch=VJ.bind(null,En,t),[e.memoizedState,t]}function Mw(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function FM(){return io().memoizedState}function UE(t,e,n,r){var s=fa();En.flags|=t,s.memoizedState=Mw(1|e,n,void 0,r===void 0?null:r)}function sC(t,e,n,r){var s=io();r=r===void 0?null:r;var i=void 0;if(Jn!==null){var o=Jn.memoizedState;if(i=o.destroy,r!==null&&dO(r,o.deps)){s.memoizedState=Mw(e,n,i,r);return}}En.flags|=t,s.memoizedState=Mw(1|e,n,i,r)}function s$(t,e){return UE(8390656,8,t,e)}function pO(t,e){return sC(2048,8,t,e)}function zM(t,e){return sC(4,2,t,e)}function HM(t,e){return sC(4,4,t,e)}function WM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qM(t,e,n){return n=n!=null?n.concat([t]):null,sC(4,4,WM.bind(null,e,t),n)}function gO(){}function GM(t,e){var n=io();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dO(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VM(t,e){var n=io();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dO(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function KM(t,e,n){return hf&21?(Yo(n,e)||(n=XL(),En.lanes|=n,ff|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ks=!0),t.memoizedState=n)}function qJ(t,e){var n=zt;zt=n!==0&&4>n?n:4,t(!0);var r=fS.transition;fS.transition={};try{t(!1),e()}finally{zt=n,fS.transition=r}}function QM(){return io().memoizedState}function GJ(t,e,n){var r=Qu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},JM(t))YM(e,n);else if(n=kM(t,e,n,r),n!==null){var s=ms();Vo(n,t,r,s),ZM(n,e,r)}}function VJ(t,e,n){var r=Qu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(JM(t))YM(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Yo(a,o)){var c=e.interleaved;c===null?(s.next=s,oO(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=kM(t,e,s,r),n!==null&&(s=ms(),Vo(n,t,r,s),ZM(n,e,r))}}function JM(t){var e=t.alternate;return t===En||e!==null&&e===En}function YM(t,e){Q0=D_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gk(t,n)}}var $_={readContext:so,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},KJ={readContext:so,useCallback:function(t,e){return fa().memoizedState=[t,e===void 0?null:e],t},useContext:so,useEffect:s$,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,UE(4194308,4,WM.bind(null,e,t),n)},useLayoutEffect:function(t,e){return UE(4194308,4,t,e)},useInsertionEffect:function(t,e){return UE(4,2,t,e)},useMemo:function(t,e){var n=fa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=GJ.bind(null,En,t),[r.memoizedState,t]},useRef:function(t){var e=fa();return t={current:t},e.memoizedState=t},useState:r$,useDebugValue:gO,useDeferredValue:function(t){return fa().memoizedState=t},useTransition:function(){var t=r$(!1),e=t[0];return t=qJ.bind(null,t[1]),fa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=En,s=fa();if(gn){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),fr===null)throw Error(fe(349));hf&30||UM(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,s$(LM.bind(null,r,i,t),[t]),r.flags|=2048,Mw(9,BM.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=fa(),e=fr.identifierPrefix;if(gn){var n=Lc,r=Bc;n=(r&~(1<<32-Go(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bw++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QJ={readContext:so,useCallback:GM,useContext:so,useEffect:pO,useImperativeHandle:qM,useInsertionEffect:zM,useLayoutEffect:HM,useMemo:VM,useReducer:pS,useRef:FM,useState:function(){return pS(Lw)},useDebugValue:gO,useDeferredValue:function(t){var e=io();return KM(e,Jn.memoizedState,t)},useTransition:function(){var t=pS(Lw)[0],e=io().memoizedState;return[t,e]},useMutableSource:DM,useSyncExternalStore:$M,useId:QM,unstable_isNewReconciler:!1},JJ={readContext:so,useCallback:GM,useContext:so,useEffect:pO,useImperativeHandle:qM,useInsertionEffect:zM,useLayoutEffect:HM,useMemo:VM,useReducer:gS,useRef:FM,useState:function(){return gS(Lw)},useDebugValue:gO,useDeferredValue:function(t){var e=io();return Jn===null?e.memoizedState=t:KM(e,Jn.memoizedState,t)},useTransition:function(){var t=gS(Lw)[0],e=io().memoizedState;return[t,e]},useMutableSource:DM,useSyncExternalStore:$M,useId:QM,unstable_isNewReconciler:!1};function Ao(t,e){if(t&&t.defaultProps){e=_n({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pT(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_n({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var iC={isMounted:function(t){return(t=t._reactInternals)?Mf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ms(),s=Qu(t),i=Fc(r,s);i.payload=e,n!=null&&(i.callback=n),e=Vu(t,i,s),e!==null&&(Vo(e,t,s,r),DE(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ms(),s=Qu(t),i=Fc(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Vu(t,i,s),e!==null&&(Vo(e,t,s,r),DE(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ms(),r=Qu(t),s=Fc(n,r);s.tag=2,e!=null&&(s.callback=e),e=Vu(t,s,r),e!==null&&(Vo(e,t,r,n),DE(e,t,r))}};function i$(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!kw(n,r)||!kw(s,i):!0}function XM(t,e,n){var r=!1,s=ld,i=e.contextType;return typeof i=="object"&&i!==null?i=so(i):(s=Ys(e)?uf:es.current,r=e.contextTypes,i=(r=r!=null)?Nm(t,s):ld),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=iC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function o$(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&iC.enqueueReplaceState(e,e.state,null)}function gT(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},aO(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=so(i):(i=Ys(e)?uf:es.current,s.context=Nm(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pT(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&iC.enqueueReplaceState(s,s.state,null),O_(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Rm(t,e){try{var n="",r=e;do n+=CQ(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function mS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YJ=typeof WeakMap=="function"?WeakMap:Map;function ej(t,e,n){n=Fc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){B_||(B_=!0,ST=r),mT(t,e)},n}function tj(t,e,n){n=Fc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){mT(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){mT(t,e),typeof r!="function"&&(Ku===null?Ku=new Set([this]):Ku.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function a$(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YJ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dY.bind(null,t,e,n),e.then(t,t))}function c$(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l$(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fc(-1,1),e.tag=2,Vu(n,e,1))),n.lanes|=1),t)}var ZJ=al.ReactCurrentOwner,Ks=!1;function cs(t,e,n,r){e.child=t===null?PM(e,null,n,r):km(e,t.child,n,r)}function u$(t,e,n,r,s){n=n.render;var i=e.ref;return pg(e,s),r=hO(t,e,n,r,i,s),n=fO(),t!==null&&!Ks?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zc(t,e,s)):(gn&&n&&eO(e),e.flags|=1,cs(t,e,r,s),e.child)}function d$(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!xO(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,nj(t,e,i,r,s)):(t=jE(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:kw,n(o,r)&&t.ref===e.ref)return Zc(t,e,s)}return e.flags|=1,t=Ju(i,r),t.ref=e.ref,t.return=e,e.child=t}function nj(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(kw(i,r)&&t.ref===e.ref)if(Ks=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ks=!0);else return e.lanes=t.lanes,Zc(t,e,s)}return yT(t,e,n,r,s)}function rj(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(eg,yi),yi|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,sn(eg,yi),yi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,sn(eg,yi),yi|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,sn(eg,yi),yi|=r;return cs(t,e,s,n),e.child}function sj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yT(t,e,n,r,s){var i=Ys(n)?uf:es.current;return i=Nm(e,i),pg(e,s),n=hO(t,e,n,r,i,s),r=fO(),t!==null&&!Ks?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zc(t,e,s)):(gn&&r&&eO(e),e.flags|=1,cs(t,e,n,s),e.child)}function h$(t,e,n,r,s){if(Ys(n)){var i=!0;I_(e)}else i=!1;if(pg(e,s),e.stateNode===null)BE(t,e),XM(e,n,r),gT(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=so(l):(l=Ys(n)?uf:es.current,l=Nm(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&o$(e,o,r,l),Vl=!1;var h=e.memoizedState;o.state=h,O_(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Js.current||Vl?(typeof u=="function"&&(pT(e,n,u,r),c=e.memoizedState),(a=Vl||i$(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,OM(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ao(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=so(c):(c=Ys(n)?uf:es.current,c=Nm(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&o$(e,o,r,c),Vl=!1,h=e.memoizedState,o.state=h,O_(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Js.current||Vl?(typeof f=="function"&&(pT(e,n,f,r),p=e.memoizedState),(l=Vl||i$(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return wT(t,e,n,r,i,s)}function wT(t,e,n,r,s,i){sj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&YD(e,n,!1),Zc(t,e,i);r=e.stateNode,ZJ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=km(e,t.child,null,i),e.child=km(e,null,a,i)):cs(t,e,a,i),e.memoizedState=r.state,s&&YD(e,n,!0),e.child}function ij(t){var e=t.stateNode;e.pendingContext?JD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&JD(t,e.context,!1),cO(t,e.containerInfo)}function f$(t,e,n,r,s){return Pm(),nO(s),e.flags|=256,cs(t,e,n,r),e.child}var bT={dehydrated:null,treeContext:null,retryLane:0};function vT(t){return{baseLanes:t,cachePool:null,transitions:null}}function oj(t,e,n){var r=e.pendingProps,s=wn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),sn(wn,s&1),t===null)return hT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cC(o,r,0,null),t=tf(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=vT(n),e.memoizedState=bT,t):mO(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return XJ(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ju(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ju(a,i):(i=tf(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?vT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=bT,r}return i=t.child,t=i.sibling,r=Ju(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mO(t,e){return e=cC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function E1(t,e,n,r){return r!==null&&nO(r),km(e,t.child,null,n),t=mO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XJ(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=mS(Error(fe(422))),E1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cC({mode:"visible",children:r.children},s,0,null),i=tf(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&km(e,t.child,null,o),e.child.memoizedState=vT(o),e.memoizedState=bT,i);if(!(e.mode&1))return E1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(fe(419)),r=mS(i,r,void 0),E1(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ks||a){if(r=fr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Yc(t,s),Vo(r,t,s,-1))}return _O(),r=mS(Error(fe(421))),E1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=hY.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ei=Gu(s.nextSibling),Ci=e,gn=!0,Bo=null,t!==null&&(Xi[eo++]=Bc,Xi[eo++]=Lc,Xi[eo++]=df,Bc=t.id,Lc=t.overflow,df=e),e=mO(e,r.children),e.flags|=4096,e)}function p$(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fT(t.return,e,n)}function yS(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function aj(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cs(t,e,r.children,n),r=wn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p$(t,n,e);else if(t.tag===19)p$(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(sn(wn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&R_(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yS(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&R_(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yS(e,!0,n,null,i);break;case"together":yS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function BE(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ff|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=Ju(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ju(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eY(t,e,n){switch(e.tag){case 3:ij(e),Pm();break;case 5:RM(e);break;case 1:Ys(e.type)&&I_(e);break;case 4:cO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;sn(P_,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(sn(wn,wn.current&1),e.flags|=128,null):n&e.child.childLanes?oj(t,e,n):(sn(wn,wn.current&1),t=Zc(t,e,n),t!==null?t.sibling:null);sn(wn,wn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return aj(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),sn(wn,wn.current),r)break;return null;case 22:case 23:return e.lanes=0,rj(t,e,n)}return Zc(t,e,n)}var cj,ET,lj,uj;cj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ET=function(){};lj=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,dh(La.current);var i=null;switch(n){case"input":s=HI(t,s),r=HI(t,r),i=[];break;case"select":s=_n({},s,{value:void 0}),r=_n({},r,{value:void 0}),i=[];break;case"textarea":s=GI(t,s),r=GI(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=A_)}KI(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Cw.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Cw.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&ln("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};uj=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wy(t,e){if(!gn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tY(t,e,n){var r=e.pendingProps;switch(tO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(e),null;case 1:return Ys(e.type)&&S_(),Mr(e),null;case 3:return r=e.stateNode,Om(),hn(Js),hn(es),uO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(b1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bo!==null&&(NT(Bo),Bo=null))),ET(t,e),Mr(e),null;case 5:lO(e);var s=dh(Uw.current);if(n=e.type,t!==null&&e.stateNode!=null)lj(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return Mr(e),null}if(t=dh(La.current),b1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ka]=e,r[Dw]=i,t=(e.mode&1)!==0,n){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(s=0;s<A0.length;s++)ln(A0[s],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":xD(r,i),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ln("invalid",r);break;case"textarea":AD(r,i),ln("invalid",r)}KI(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&w1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&w1(r.textContent,a,t),s=["children",""+a]):Cw.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ln("scroll",r)}switch(n){case"input":u1(r),CD(r,i,!0);break;case"textarea":u1(r),SD(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=A_)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ka]=e,t[Dw]=r,cj(t,e,!1,!1),e.stateNode=t;e:{switch(o=QI(n,r),n){case"dialog":ln("cancel",t),ln("close",t),s=r;break;case"iframe":case"object":case"embed":ln("load",t),s=r;break;case"video":case"audio":for(s=0;s<A0.length;s++)ln(A0[s],t);s=r;break;case"source":ln("error",t),s=r;break;case"img":case"image":case"link":ln("error",t),ln("load",t),s=r;break;case"details":ln("toggle",t),s=r;break;case"input":xD(t,r),s=HI(t,r),ln("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=_n({},r,{value:void 0}),ln("invalid",t);break;case"textarea":AD(t,r),s=GI(t,r),ln("invalid",t);break;default:s=r}KI(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?FL(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ML(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Aw(t,c):typeof c=="number"&&Aw(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Cw.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ln("scroll",t):c!=null&&jk(t,i,c,o))}switch(n){case"input":u1(t),CD(t,r,!1);break;case"textarea":u1(t),SD(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cd(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ug(t,!!r.multiple,i,!1):r.defaultValue!=null&&ug(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=A_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mr(e),null;case 6:if(t&&e.stateNode!=null)uj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=dh(Uw.current),dh(La.current),b1(e)){if(r=e.stateNode,n=e.memoizedProps,r[ka]=e,(i=r.nodeValue!==n)&&(t=Ci,t!==null))switch(t.tag){case 3:w1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&w1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ka]=e,e.stateNode=r}return Mr(e),null;case 13:if(hn(wn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gn&&Ei!==null&&e.mode&1&&!(e.flags&128))TM(),Pm(),e.flags|=98560,i=!1;else if(i=b1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[ka]=e}else Pm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mr(e),i=!1}else Bo!==null&&(NT(Bo),Bo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||wn.current&1?Xn===0&&(Xn=3):_O())),e.updateQueue!==null&&(e.flags|=4),Mr(e),null);case 4:return Om(),ET(t,e),t===null&&Ow(e.stateNode.containerInfo),Mr(e),null;case 10:return iO(e.type._context),Mr(e),null;case 17:return Ys(e.type)&&S_(),Mr(e),null;case 19:if(hn(wn),i=e.memoizedState,i===null)return Mr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wy(i,!1);else{if(Xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=R_(t),o!==null){for(e.flags|=128,Wy(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return sn(wn,wn.current&1|2),e.child}t=t.sibling}i.tail!==null&&$n()>Dm&&(e.flags|=128,r=!0,Wy(i,!1),e.lanes=4194304)}else{if(!r)if(t=R_(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wy(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!gn)return Mr(e),null}else 2*$n()-i.renderingStartTime>Dm&&n!==1073741824&&(e.flags|=128,r=!0,Wy(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$n(),e.sibling=null,n=wn.current,sn(wn,r?n&1|2:n&1),e):(Mr(e),null);case 22:case 23:return EO(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yi&1073741824&&(Mr(e),e.subtreeFlags&6&&(e.flags|=8192)):Mr(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function nY(t,e){switch(tO(e),e.tag){case 1:return Ys(e.type)&&S_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Om(),hn(Js),hn(es),uO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lO(e),null;case 13:if(hn(wn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));Pm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return hn(wn),null;case 4:return Om(),null;case 10:return iO(e.type._context),null;case 22:case 23:return EO(),null;case 24:return null;default:return null}}var _1=!1,Zr=!1,rY=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Xp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){In(t,e,r)}else n.current=null}function _T(t,e,n){try{n()}catch(r){In(t,e,r)}}var g$=!1;function sY(t,e){if(iT=__,t=gM(),Xk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(oT={focusedElem:t,selectionRange:n},__=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ao(e.type,g),y);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(x){In(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return p=g$,g$=!1,p}function J0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&_T(e,n,i)}s=s.next}while(s!==r)}}function oC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xT(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dj(t){var e=t.alternate;e!==null&&(t.alternate=null,dj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ka],delete e[Dw],delete e[lT],delete e[jJ],delete e[FJ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hj(t){return t.tag===5||t.tag===3||t.tag===4}function m$(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function CT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=A_));else if(r!==4&&(t=t.child,t!==null))for(CT(t,e,n),t=t.sibling;t!==null;)CT(t,e,n),t=t.sibling}function AT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(AT(t,e,n),t=t.sibling;t!==null;)AT(t,e,n),t=t.sibling}var Ar=null,$o=!1;function yl(t,e,n){for(n=n.child;n!==null;)fj(t,e,n),n=n.sibling}function fj(t,e,n){if(Ba&&typeof Ba.onCommitFiberUnmount=="function")try{Ba.onCommitFiberUnmount(Zx,n)}catch{}switch(n.tag){case 5:Zr||Xp(n,e);case 6:var r=Ar,s=$o;Ar=null,yl(t,e,n),Ar=r,$o=s,Ar!==null&&($o?(t=Ar,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ar.removeChild(n.stateNode));break;case 18:Ar!==null&&($o?(t=Ar,n=n.stateNode,t.nodeType===8?uS(t.parentNode,n):t.nodeType===1&&uS(t,n),Nw(t)):uS(Ar,n.stateNode));break;case 4:r=Ar,s=$o,Ar=n.stateNode.containerInfo,$o=!0,yl(t,e,n),Ar=r,$o=s;break;case 0:case 11:case 14:case 15:if(!Zr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&_T(n,e,o),s=s.next}while(s!==r)}yl(t,e,n);break;case 1:if(!Zr&&(Xp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){In(n,e,a)}yl(t,e,n);break;case 21:yl(t,e,n);break;case 22:n.mode&1?(Zr=(r=Zr)||n.memoizedState!==null,yl(t,e,n),Zr=r):yl(t,e,n);break;default:yl(t,e,n)}}function y$(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rY),e.forEach(function(r){var s=fY.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function fo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ar=a.stateNode,$o=!1;break e;case 3:Ar=a.stateNode.containerInfo,$o=!0;break e;case 4:Ar=a.stateNode.containerInfo,$o=!0;break e}a=a.return}if(Ar===null)throw Error(fe(160));fj(i,o,s),Ar=null,$o=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){In(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pj(e,t),e=e.sibling}function pj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fo(e,t),ia(t),r&4){try{J0(3,t,t.return),oC(3,t)}catch(g){In(t,t.return,g)}try{J0(5,t,t.return)}catch(g){In(t,t.return,g)}}break;case 1:fo(e,t),ia(t),r&512&&n!==null&&Xp(n,n.return);break;case 5:if(fo(e,t),ia(t),r&512&&n!==null&&Xp(n,n.return),t.flags&32){var s=t.stateNode;try{Aw(s,"")}catch(g){In(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&UL(s,i),QI(a,o);var l=QI(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?FL(s,d):u==="dangerouslySetInnerHTML"?ML(s,d):u==="children"?Aw(s,d):jk(s,u,d,l)}switch(a){case"input":WI(s,i);break;case"textarea":BL(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ug(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?ug(s,!!i.multiple,i.defaultValue,!0):ug(s,!!i.multiple,i.multiple?[]:"",!1))}s[Dw]=i}catch(g){In(t,t.return,g)}}break;case 6:if(fo(e,t),ia(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){In(t,t.return,g)}}break;case 3:if(fo(e,t),ia(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nw(e.containerInfo)}catch(g){In(t,t.return,g)}break;case 4:fo(e,t),ia(t);break;case 13:fo(e,t),ia(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bO=$n())),r&4&&y$(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Zr=(l=Zr)||u,fo(e,t),Zr=l):fo(e,t),ia(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Be=t,u=t.child;u!==null;){for(d=Be=u;Be!==null;){switch(h=Be,f=h.child,h.tag){case 0:case 11:case 14:case 15:J0(4,h,h.return);break;case 1:Xp(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){In(r,n,g)}}break;case 5:Xp(h,h.return);break;case 22:if(h.memoizedState!==null){b$(d);continue}}f!==null?(f.return=h,Be=f):b$(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=jL("display",o))}catch(g){In(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){In(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fo(e,t),ia(t),r&4&&y$(t);break;case 21:break;default:fo(e,t),ia(t)}}function ia(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hj(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Aw(s,""),r.flags&=-33);var i=m$(t);AT(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=m$(t);CT(t,a,o);break;default:throw Error(fe(161))}}catch(c){In(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iY(t,e,n){Be=t,gj(t)}function gj(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var s=Be,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Zr;a=_1;var l=Zr;if(_1=o,(Zr=c)&&!l)for(Be=s;Be!==null;)o=Be,c=o.child,o.tag===22&&o.memoizedState!==null?v$(s):c!==null?(c.return=o,Be=c):v$(s);for(;i!==null;)Be=i,gj(i),i=i.sibling;Be=s,_1=a,Zr=l}w$(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Be=i):w$(t)}}function w$(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zr||oC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ao(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&n$(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}n$(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Nw(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Zr||e.flags&512&&xT(e)}catch(h){In(e,e.return,h)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function b$(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function v$(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oC(4,e)}catch(c){In(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){In(e,s,c)}}var i=e.return;try{xT(e)}catch(c){In(e,i,c)}break;case 5:var o=e.return;try{xT(e)}catch(c){In(e,o,c)}}}catch(c){In(e,e.return,c)}if(e===t){Be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Be=a;break}Be=e.return}}var oY=Math.ceil,U_=al.ReactCurrentDispatcher,yO=al.ReactCurrentOwner,ro=al.ReactCurrentBatchConfig,_t=0,fr=null,Hn=null,Nr=0,yi=0,eg=Ad(0),Xn=0,jw=null,ff=0,aC=0,wO=0,Y0=null,qs=null,bO=0,Dm=1/0,fc=null,B_=!1,ST=null,Ku=null,x1=!1,Uu=null,L_=0,Z0=0,IT=null,LE=-1,ME=0;function ms(){return _t&6?$n():LE!==-1?LE:LE=$n()}function Qu(t){return t.mode&1?_t&2&&Nr!==0?Nr&-Nr:HJ.transition!==null?(ME===0&&(ME=XL()),ME):(t=zt,t!==0||(t=window.event,t=t===void 0?16:oM(t.type)),t):1}function Vo(t,e,n,r){if(50<Z0)throw Z0=0,IT=null,Error(fe(185));wv(t,n,r),(!(_t&2)||t!==fr)&&(t===fr&&(!(_t&2)&&(aC|=n),Xn===4&&ru(t,Nr)),Zs(t,r),n===1&&_t===0&&!(e.mode&1)&&(Dm=$n()+500,rC&&Sd()))}function Zs(t,e){var n=t.callbackNode;HQ(t,e);var r=E_(t,t===fr?Nr:0);if(r===0)n!==null&&ND(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ND(n),e===1)t.tag===0?zJ(E$.bind(null,t)):AM(E$.bind(null,t)),LJ(function(){!(_t&6)&&Sd()}),n=null;else{switch(eM(r)){case 1:n=qk;break;case 4:n=YL;break;case 16:n=v_;break;case 536870912:n=ZL;break;default:n=v_}n=xj(n,mj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mj(t,e){if(LE=-1,ME=0,_t&6)throw Error(fe(327));var n=t.callbackNode;if(gg()&&t.callbackNode!==n)return null;var r=E_(t,t===fr?Nr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=M_(t,r);else{e=r;var s=_t;_t|=2;var i=wj();(fr!==t||Nr!==e)&&(fc=null,Dm=$n()+500,ef(t,e));do try{lY();break}catch(a){yj(t,a)}while(!0);sO(),U_.current=i,_t=s,Hn!==null?e=0:(fr=null,Nr=0,e=Xn)}if(e!==0){if(e===2&&(s=eT(t),s!==0&&(r=s,e=TT(t,s))),e===1)throw n=jw,ef(t,0),ru(t,r),Zs(t,$n()),n;if(e===6)ru(t,r);else{if(s=t.current.alternate,!(r&30)&&!aY(s)&&(e=M_(t,r),e===2&&(i=eT(t),i!==0&&(r=i,e=TT(t,i))),e===1))throw n=jw,ef(t,0),ru(t,r),Zs(t,$n()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:Gd(t,qs,fc);break;case 3:if(ru(t,r),(r&130023424)===r&&(e=bO+500-$n(),10<e)){if(E_(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ms(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cT(Gd.bind(null,t,qs,fc),e);break}Gd(t,qs,fc);break;case 4:if(ru(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Go(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oY(r/1960))-r,10<r){t.timeoutHandle=cT(Gd.bind(null,t,qs,fc),r);break}Gd(t,qs,fc);break;case 5:Gd(t,qs,fc);break;default:throw Error(fe(329))}}}return Zs(t,$n()),t.callbackNode===n?mj.bind(null,t):null}function TT(t,e){var n=Y0;return t.current.memoizedState.isDehydrated&&(ef(t,e).flags|=256),t=M_(t,e),t!==2&&(e=qs,qs=n,e!==null&&NT(e)),t}function NT(t){qs===null?qs=t:qs.push.apply(qs,t)}function aY(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yo(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ru(t,e){for(e&=~wO,e&=~aC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Go(e),r=1<<n;t[n]=-1,e&=~r}}function E$(t){if(_t&6)throw Error(fe(327));gg();var e=E_(t,0);if(!(e&1))return Zs(t,$n()),null;var n=M_(t,e);if(t.tag!==0&&n===2){var r=eT(t);r!==0&&(e=r,n=TT(t,r))}if(n===1)throw n=jw,ef(t,0),ru(t,e),Zs(t,$n()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gd(t,qs,fc),Zs(t,$n()),null}function vO(t,e){var n=_t;_t|=1;try{return t(e)}finally{_t=n,_t===0&&(Dm=$n()+500,rC&&Sd())}}function pf(t){Uu!==null&&Uu.tag===0&&!(_t&6)&&gg();var e=_t;_t|=1;var n=ro.transition,r=zt;try{if(ro.transition=null,zt=1,t)return t()}finally{zt=r,ro.transition=n,_t=e,!(_t&6)&&Sd()}}function EO(){yi=eg.current,hn(eg)}function ef(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BJ(n)),Hn!==null)for(n=Hn.return;n!==null;){var r=n;switch(tO(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&S_();break;case 3:Om(),hn(Js),hn(es),uO();break;case 5:lO(r);break;case 4:Om();break;case 13:hn(wn);break;case 19:hn(wn);break;case 10:iO(r.type._context);break;case 22:case 23:EO()}n=n.return}if(fr=t,Hn=t=Ju(t.current,null),Nr=yi=e,Xn=0,jw=null,wO=aC=ff=0,qs=Y0=null,uh!==null){for(e=0;e<uh.length;e++)if(n=uh[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}uh=null}return t}function yj(t,e){do{var n=Hn;try{if(sO(),$E.current=$_,D_){for(var r=En.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}D_=!1}if(hf=0,ar=Jn=En=null,Q0=!1,Bw=0,yO.current=null,n===null||n.return===null){Xn=1,jw=e,Hn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Nr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=c$(o);if(f!==null){f.flags&=-257,l$(f,o,a,i,e),f.mode&1&&a$(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){a$(i,l,e),_O();break e}c=Error(fe(426))}}else if(gn&&a.mode&1){var y=c$(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),l$(y,o,a,i,e),nO(Rm(c,a));break e}}i=c=Rm(c,a),Xn!==4&&(Xn=2),Y0===null?Y0=[i]:Y0.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=ej(i,c,e);t$(i,w);break e;case 1:a=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ku===null||!Ku.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=tj(i,a,e);t$(i,x);break e}}i=i.return}while(i!==null)}vj(n)}catch(_){e=_,Hn===n&&n!==null&&(Hn=n=n.return);continue}break}while(!0)}function wj(){var t=U_.current;return U_.current=$_,t===null?$_:t}function _O(){(Xn===0||Xn===3||Xn===2)&&(Xn=4),fr===null||!(ff&268435455)&&!(aC&268435455)||ru(fr,Nr)}function M_(t,e){var n=_t;_t|=2;var r=wj();(fr!==t||Nr!==e)&&(fc=null,ef(t,e));do try{cY();break}catch(s){yj(t,s)}while(!0);if(sO(),_t=n,U_.current=r,Hn!==null)throw Error(fe(261));return fr=null,Nr=0,Xn}function cY(){for(;Hn!==null;)bj(Hn)}function lY(){for(;Hn!==null&&!DQ();)bj(Hn)}function bj(t){var e=_j(t.alternate,t,yi);t.memoizedProps=t.pendingProps,e===null?vj(t):Hn=e,yO.current=null}function vj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nY(n,e),n!==null){n.flags&=32767,Hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xn=6,Hn=null;return}}else if(n=tY(n,e,yi),n!==null){Hn=n;return}if(e=e.sibling,e!==null){Hn=e;return}Hn=e=t}while(e!==null);Xn===0&&(Xn=5)}function Gd(t,e,n){var r=zt,s=ro.transition;try{ro.transition=null,zt=1,uY(t,e,n,r)}finally{ro.transition=s,zt=r}return null}function uY(t,e,n,r){do gg();while(Uu!==null);if(_t&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(WQ(t,i),t===fr&&(Hn=fr=null,Nr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||x1||(x1=!0,xj(v_,function(){return gg(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ro.transition,ro.transition=null;var o=zt;zt=1;var a=_t;_t|=4,yO.current=null,sY(t,n),pj(n,t),PJ(oT),__=!!iT,oT=iT=null,t.current=n,iY(n),$Q(),_t=a,zt=o,ro.transition=i}else t.current=n;if(x1&&(x1=!1,Uu=t,L_=s),i=t.pendingLanes,i===0&&(Ku=null),LQ(n.stateNode),Zs(t,$n()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(B_)throw B_=!1,t=ST,ST=null,t;return L_&1&&t.tag!==0&&gg(),i=t.pendingLanes,i&1?t===IT?Z0++:(Z0=0,IT=t):Z0=0,Sd(),null}function gg(){if(Uu!==null){var t=eM(L_),e=ro.transition,n=zt;try{if(ro.transition=null,zt=16>t?16:t,Uu===null)var r=!1;else{if(t=Uu,Uu=null,L_=0,_t&6)throw Error(fe(331));var s=_t;for(_t|=4,Be=t.current;Be!==null;){var i=Be,o=i.child;if(Be.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Be=l;Be!==null;){var u=Be;switch(u.tag){case 0:case 11:case 15:J0(8,u,i)}var d=u.child;if(d!==null)d.return=u,Be=d;else for(;Be!==null;){u=Be;var h=u.sibling,f=u.return;if(dj(u),u===l){Be=null;break}if(h!==null){h.return=f,Be=h;break}Be=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Be=o;else e:for(;Be!==null;){if(i=Be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:J0(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Be=w;break e}Be=i.return}}var v=t.current;for(Be=v;Be!==null;){o=Be;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Be=b;else e:for(o=v;Be!==null;){if(a=Be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:oC(9,a)}}catch(_){In(a,a.return,_)}if(a===o){Be=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Be=x;break e}Be=a.return}}if(_t=s,Sd(),Ba&&typeof Ba.onPostCommitFiberRoot=="function")try{Ba.onPostCommitFiberRoot(Zx,t)}catch{}r=!0}return r}finally{zt=n,ro.transition=e}}return!1}function _$(t,e,n){e=Rm(n,e),e=ej(t,e,1),t=Vu(t,e,1),e=ms(),t!==null&&(wv(t,1,e),Zs(t,e))}function In(t,e,n){if(t.tag===3)_$(t,t,n);else for(;e!==null;){if(e.tag===3){_$(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ku===null||!Ku.has(r))){t=Rm(n,t),t=tj(e,t,1),e=Vu(e,t,1),t=ms(),e!==null&&(wv(e,1,t),Zs(e,t));break}}e=e.return}}function dY(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ms(),t.pingedLanes|=t.suspendedLanes&n,fr===t&&(Nr&n)===n&&(Xn===4||Xn===3&&(Nr&130023424)===Nr&&500>$n()-bO?ef(t,0):wO|=n),Zs(t,e)}function Ej(t,e){e===0&&(t.mode&1?(e=f1,f1<<=1,!(f1&130023424)&&(f1=4194304)):e=1);var n=ms();t=Yc(t,e),t!==null&&(wv(t,e,n),Zs(t,n))}function hY(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ej(t,n)}function fY(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),Ej(t,n)}var _j;_j=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Js.current)Ks=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ks=!1,eY(t,e,n);Ks=!!(t.flags&131072)}else Ks=!1,gn&&e.flags&1048576&&SM(e,N_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;BE(t,e),t=e.pendingProps;var s=Nm(e,es.current);pg(e,n),s=hO(null,e,r,t,s,n);var i=fO();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ys(r)?(i=!0,I_(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,aO(e),s.updater=iC,e.stateNode=s,s._reactInternals=e,gT(e,r,t,n),e=wT(null,e,r,!0,i,n)):(e.tag=0,gn&&i&&eO(e),cs(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(BE(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gY(r),t=Ao(r,t),s){case 0:e=yT(null,e,r,t,n);break e;case 1:e=h$(null,e,r,t,n);break e;case 11:e=u$(null,e,r,t,n);break e;case 14:e=d$(null,e,r,Ao(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ao(r,s),yT(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ao(r,s),h$(t,e,r,s,n);case 3:e:{if(ij(e),t===null)throw Error(fe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,OM(t,e),O_(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Rm(Error(fe(423)),e),e=f$(t,e,r,n,s);break e}else if(r!==s){s=Rm(Error(fe(424)),e),e=f$(t,e,r,n,s);break e}else for(Ei=Gu(e.stateNode.containerInfo.firstChild),Ci=e,gn=!0,Bo=null,n=PM(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pm(),r===s){e=Zc(t,e,n);break e}cs(t,e,r,n)}e=e.child}return e;case 5:return RM(e),t===null&&hT(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,aT(r,s)?o=null:i!==null&&aT(r,i)&&(e.flags|=32),sj(t,e),cs(t,e,o,n),e.child;case 6:return t===null&&hT(e),null;case 13:return oj(t,e,n);case 4:return cO(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=km(e,null,r,n):cs(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ao(r,s),u$(t,e,r,s,n);case 7:return cs(t,e,e.pendingProps,n),e.child;case 8:return cs(t,e,e.pendingProps.children,n),e.child;case 12:return cs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,sn(P_,r._currentValue),r._currentValue=o,i!==null)if(Yo(i.value,o)){if(i.children===s.children&&!Js.current){e=Zc(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Fc(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),fT(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fT(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cs(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,pg(e,n),s=so(s),r=r(s),e.flags|=1,cs(t,e,r,n),e.child;case 14:return r=e.type,s=Ao(r,e.pendingProps),s=Ao(r.type,s),d$(t,e,r,s,n);case 15:return nj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ao(r,s),BE(t,e),e.tag=1,Ys(r)?(t=!0,I_(e)):t=!1,pg(e,n),XM(e,r,s),gT(e,r,s,n),wT(null,e,r,!0,t,n);case 19:return aj(t,e,n);case 22:return rj(t,e,n)}throw Error(fe(156,e.tag))};function xj(t,e){return JL(t,e)}function pY(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function to(t,e,n,r){return new pY(t,e,n,r)}function xO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gY(t){if(typeof t=="function")return xO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zk)return 11;if(t===Hk)return 14}return 2}function Ju(t,e){var n=t.alternate;return n===null?(n=to(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jE(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")xO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wp:return tf(n.children,s,i,e);case Fk:o=8,s|=8;break;case MI:return t=to(12,n,e,s|2),t.elementType=MI,t.lanes=i,t;case jI:return t=to(13,n,e,s),t.elementType=jI,t.lanes=i,t;case FI:return t=to(19,n,e,s),t.elementType=FI,t.lanes=i,t;case RL:return cC(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kL:o=10;break e;case OL:o=9;break e;case zk:o=11;break e;case Hk:o=14;break e;case Gl:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=to(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function tf(t,e,n,r){return t=to(7,t,r,e),t.lanes=n,t}function cC(t,e,n,r){return t=to(22,t,r,e),t.elementType=RL,t.lanes=n,t.stateNode={isHidden:!1},t}function wS(t,e,n){return t=to(6,t,null,e),t.lanes=n,t}function bS(t,e,n){return e=to(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mY(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=XA(0),this.expirationTimes=XA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=XA(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function CO(t,e,n,r,s,i,o,a,c){return t=new mY(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=to(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},aO(i),t}function yY(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Cj(t){if(!t)return ld;t=t._reactInternals;e:{if(Mf(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ys(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(Ys(n))return CM(t,n,e)}return e}function Aj(t,e,n,r,s,i,o,a,c){return t=CO(n,r,!0,t,s,i,o,a,c),t.context=Cj(null),n=t.current,r=ms(),s=Qu(n),i=Fc(r,s),i.callback=e??null,Vu(n,i,s),t.current.lanes=s,wv(t,s,r),Zs(t,r),t}function lC(t,e,n,r){var s=e.current,i=ms(),o=Qu(s);return n=Cj(n),e.context===null?e.context=n:e.pendingContext=n,e=Fc(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vu(s,e,o),t!==null&&(Vo(t,s,o,i),DE(t,s,o)),o}function j_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x$(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function AO(t,e){x$(t,e),(t=t.alternate)&&x$(t,e)}function wY(){return null}var Sj=typeof reportError=="function"?reportError:function(t){console.error(t)};function SO(t){this._internalRoot=t}uC.prototype.render=SO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));lC(t,e,null,null)};uC.prototype.unmount=SO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pf(function(){lC(null,t,null,null)}),e[Jc]=null}};function uC(t){this._internalRoot=t}uC.prototype.unstable_scheduleHydration=function(t){if(t){var e=rM();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nu.length&&e!==0&&e<nu[n].priority;n++);nu.splice(n,0,t),n===0&&iM(t)}};function IO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function C$(){}function bY(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=j_(o);i.call(l)}}var o=Aj(e,r,t,0,null,!1,!1,"",C$);return t._reactRootContainer=o,t[Jc]=o.current,Ow(t.nodeType===8?t.parentNode:t),pf(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=j_(c);a.call(l)}}var c=CO(t,0,!1,null,null,!1,!1,"",C$);return t._reactRootContainer=c,t[Jc]=c.current,Ow(t.nodeType===8?t.parentNode:t),pf(function(){lC(e,c,n,r)}),c}function hC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=j_(o);a.call(c)}}lC(e,o,t,s)}else o=bY(n,e,t,s,r);return j_(o)}tM=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=C0(e.pendingLanes);n!==0&&(Gk(e,n|1),Zs(e,$n()),!(_t&6)&&(Dm=$n()+500,Sd()))}break;case 13:pf(function(){var r=Yc(t,1);if(r!==null){var s=ms();Vo(r,t,1,s)}}),AO(t,1)}};Vk=function(t){if(t.tag===13){var e=Yc(t,134217728);if(e!==null){var n=ms();Vo(e,t,134217728,n)}AO(t,134217728)}};nM=function(t){if(t.tag===13){var e=Qu(t),n=Yc(t,e);if(n!==null){var r=ms();Vo(n,t,e,r)}AO(t,e)}};rM=function(){return zt};sM=function(t,e){var n=zt;try{return zt=t,e()}finally{zt=n}};YI=function(t,e,n){switch(e){case"input":if(WI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=nC(r);if(!s)throw Error(fe(90));$L(r),WI(r,s)}}}break;case"textarea":BL(t,n);break;case"select":e=n.value,e!=null&&ug(t,!!n.multiple,e,!1)}};WL=vO;qL=pf;var vY={usingClientEntryPoint:!1,Events:[vv,Kp,nC,zL,HL,vO]},qy={findFiberByHostInstance:lh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EY={bundleType:qy.bundleType,version:qy.version,rendererPackageName:qy.rendererPackageName,rendererConfig:qy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:al.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KL(t),t===null?null:t.stateNode},findFiberByHostInstance:qy.findFiberByHostInstance||wY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var C1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!C1.isDisabled&&C1.supportsFiber)try{Zx=C1.inject(EY),Ba=C1}catch{}}Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vY;Ni.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!IO(e))throw Error(fe(200));return yY(t,e,null,n)};Ni.createRoot=function(t,e){if(!IO(t))throw Error(fe(299));var n=!1,r="",s=Sj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=CO(t,1,!1,null,null,n,!1,r,s),t[Jc]=e.current,Ow(t.nodeType===8?t.parentNode:t),new SO(e)};Ni.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=KL(e),t=t===null?null:t.stateNode,t};Ni.flushSync=function(t){return pf(t)};Ni.hydrate=function(t,e,n){if(!dC(e))throw Error(fe(200));return hC(null,t,e,!0,n)};Ni.hydrateRoot=function(t,e,n){if(!IO(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Sj;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Aj(e,null,t,1,n??null,s,!1,i,o),t[Jc]=e.current,Ow(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uC(e)};Ni.render=function(t,e,n){if(!dC(e))throw Error(fe(200));return hC(null,t,e,!1,n)};Ni.unmountComponentAtNode=function(t){if(!dC(t))throw Error(fe(40));return t._reactRootContainer?(pf(function(){hC(null,null,t,!1,function(){t._reactRootContainer=null,t[Jc]=null})}),!0):!1};Ni.unstable_batchedUpdates=vO;Ni.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dC(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return hC(t,e,n,!1,r)};Ni.version="18.3.1-next-f1338f8080-20240426";function Ij(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ij)}catch(t){console.error(t)}}Ij(),IL.exports=Ni;var TO=IL.exports,A$=TO;BI.createRoot=A$.createRoot,BI.hydrateRoot=A$.hydrateRoot;const Tj="2.31.4";let Gy={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${Tj}`},ue=class PT extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof PT?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof PT&&n.cause.docsPath||n.docsPath,i=(a=Gy.getDocsUrl)==null?void 0:a.call(Gy,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Gy.version?[`Version: ${Gy.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=Tj}walk(e){return Nj(this,e)}};function Nj(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Nj(t.cause,e):e?null:t}let Pj=class extends ue{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class _Y extends ue{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let xY=class extends ue{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class kj extends ue{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let Oj=class extends ue{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class S$ extends ue{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function cy(t,{dir:e,size:n=32}={}){return typeof t=="string"?Yu(t,{dir:e,size:n}):CY(t,{dir:e,size:n})}function Yu(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Oj({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function CY(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Oj({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Xc(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Ln(t){return Xc(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function ly(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const AY=new TextEncoder;function fC(t,e={}){return typeof t=="number"||typeof t=="bigint"?IY(t,e):typeof t=="boolean"?SY(t,e):Xc(t)?Wa(t,e):mg(t,e)}function SY(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ta(n,{size:e.size}),cy(n,{size:e.size})):n}const Za={zero:48,nine:57,A:65,F:70,a:97,f:102};function I$(t){if(t>=Za.zero&&t<=Za.nine)return t-Za.zero;if(t>=Za.A&&t<=Za.F)return t-(Za.A-10);if(t>=Za.a&&t<=Za.f)return t-(Za.a-10)}function Wa(t,e={}){let n=t;e.size&&(ta(n,{size:e.size}),n=cy(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=I$(r.charCodeAt(a++)),l=I$(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ue(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function IY(t,e){const n=Je(t,e);return Wa(n)}function mg(t,e={}){const n=AY.encode(t);return typeof e.size=="number"?(ta(n,{size:e.size}),cy(n,{dir:"right",size:e.size})):n}function ta(t,{size:e}){if(Ln(t)>e)throw new xY({givenSize:Ln(t),maxSize:e})}function el(t,e={}){const{signed:n}=e;e.size&&ta(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function tl(t,e={}){return Number(el(t,e))}function Rj(t,e={}){let n=Wa(t);return e.size&&(ta(n,{size:e.size}),n=ly(n,{dir:"right"})),new TextDecoder().decode(n)}const TY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gf(t,e={}){return typeof t=="number"||typeof t=="bigint"?Je(t,e):typeof t=="string"?pC(t,e):typeof t=="boolean"?Dj(t,e):vs(t,e)}function Dj(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ta(n,{size:e.size}),cy(n,{size:e.size})):n}function vs(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=TY[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ta(r,{size:e.size}),cy(r,{dir:"right",size:e.size})):r}function Je(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Pj({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?cy(a,{size:r}):a}const NY=new TextEncoder;function pC(t,e={}){const n=NY.encode(t);return vs(n,e)}async function PY(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Je(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function ud(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new HY(t.type);return`${t.name}(${gC(t.inputs,{includeName:e})})`}function gC(t,{includeName:e=!1}={}){return t?t.map(n=>kY(n,{includeName:e})).join(e?", ":","):""}function kY(t,{includeName:e}){return t.type.startsWith("tuple")?`(${gC(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class OY extends ue{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class T$ extends ue{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class $j extends ue{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${gC(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class mC extends ue{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class RY extends ue{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class DY extends ue{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ln(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class $Y extends ue{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class TUe extends ue{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class NUe extends ue{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Uj extends ue{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class UY extends ue{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class Bj extends ue{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class F_ extends ue{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class BY extends ue{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class PUe extends ue{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class LY extends ue{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${ud(e.abiItem)}\`, and`,`\`${n.type}\` in \`${ud(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class MY extends ue{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class kT extends ue{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${gC(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class Lj extends ue{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ud(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class jY extends ue{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class FY extends ue{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class zY extends ue{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class HY extends ue{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function dd(t){return typeof t[0]=="string"?yC(t):WY(t)}function WY(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function yC(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class hd extends ue{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let wC=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const A1=BigInt(2**32-1),N$=BigInt(32);function qY(t,e=!1){return e?{h:Number(t&A1),l:Number(t>>N$&A1)}:{h:Number(t>>N$&A1)|0,l:Number(t&A1)|0}}function GY(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=qY(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const VY=(t,e,n)=>t<<n|e>>>32-n,KY=(t,e,n)=>e<<n|t>>>32-n,QY=(t,e,n)=>e<<n-32|t>>>64-n,JY=(t,e,n)=>t<<n-32|e>>>64-n,rp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function YY(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function z_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function mf(t,...e){if(!YY(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function OUe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");z_(t.outputLen),z_(t.blockLen)}function H_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mj(t,e){mf(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ZY(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Fw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function vS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function oa(t,e){return t<<32-e|t>>>e}const XY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function eZ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function tZ(t){for(let e=0;e<t.length;e++)t[e]=eZ(t[e]);return t}const P$=XY?t=>t:tZ,jj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",nZ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function RUe(t){if(mf(t),jj)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=nZ[t[n]];return e}const Xa={_0:48,_9:57,A:65,F:70,a:97,f:102};function k$(t){if(t>=Xa._0&&t<=Xa._9)return t-Xa._0;if(t>=Xa.A&&t<=Xa.F)return t-(Xa.A-10);if(t>=Xa.a&&t<=Xa.f)return t-(Xa.a-10)}function DUe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(jj)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=k$(t.charCodeAt(i)),a=k$(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function rZ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function bC(t){return typeof t=="string"&&(t=rZ(t)),mf(t),t}function $Ue(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];mf(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Fj=class{};function zj(t){const e=r=>t().update(bC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function sZ(t){const e=(r,s)=>t(s).update(bC(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function BUe(t=32){if(rp&&typeof rp.getRandomValues=="function")return rp.getRandomValues(new Uint8Array(t));if(rp&&typeof rp.randomBytes=="function")return Uint8Array.from(rp.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const iZ=BigInt(0),Vy=BigInt(1),oZ=BigInt(2),aZ=BigInt(7),cZ=BigInt(256),lZ=BigInt(113),Hj=[],Wj=[],qj=[];for(let t=0,e=Vy,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Hj.push(2*(5*r+n)),Wj.push((t+1)*(t+2)/2%64);let s=iZ;for(let i=0;i<7;i++)e=(e<<Vy^(e>>aZ)*lZ)%cZ,e&oZ&&(s^=Vy<<(Vy<<BigInt(i))-Vy);qj.push(s)}const Gj=GY(qj,!0),uZ=Gj[0],dZ=Gj[1],O$=(t,e,n)=>n>32?QY(t,e,n):VY(t,e,n),R$=(t,e,n)=>n>32?JY(t,e,n):KY(t,e,n);function Vj(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=O$(l,u,1)^n[a],h=R$(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Wj[o],c=O$(s,i,a),l=R$(s,i,a),u=Hj[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=uZ[r],t[1]^=dZ[r]}Fw(n)}let NO=class Kj extends Fj{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,z_(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ZY(this.state)}clone(){return this._cloneInto()}keccak(){P$(this.state32),Vj(this.state32,this.rounds),P$(this.state32),this.posOut=0,this.pos=0}update(e){H_(this),e=bC(e),mf(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){H_(this,!1),mf(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return z_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Mj(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Fw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Kj(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Id=(t,e,n)=>zj(()=>new NO(e,t,n)),hZ=Id(6,144,224/8),fZ=Id(6,136,256/8),pZ=Id(6,104,384/8),gZ=Id(6,72,512/8),mZ=Id(1,144,224/8),PO=Id(1,136,256/8),yZ=Id(1,104,384/8),wZ=Id(1,72,512/8),Qj=(t,e,n)=>sZ((r={})=>new NO(e,t,r.dkLen===void 0?n:r.dkLen,!0)),bZ=Qj(31,168,128/8),vZ=Qj(31,136,256/8),LUe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:NO,keccakP:Vj,keccak_224:mZ,keccak_256:PO,keccak_384:yZ,keccak_512:wZ,sha3_224:hZ,sha3_256:fZ,sha3_384:pZ,sha3_512:gZ,shake128:bZ,shake256:vZ},Symbol.toStringTag,{value:"Module"}));function uy(t,e){const n=e||"hex",r=PO(Xc(t,{strict:!1})?fC(t):t);return n==="bytes"?r:gf(r)}const ES=new wC(8192);function _v(t,e){if(ES.has(`${t}.${e}`))return ES.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=uy(mg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return ES.set(`${t}.${e}`,i),i}function Bu(t,e){if(!Zo(t,{strict:!1}))throw new hd({address:t});return _v(t,e)}const EZ=/^0x[a-fA-F0-9]{40}$/,_S=new wC(8192);function Zo(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(_S.has(r))return _S.get(r);const s=EZ.test(t)?t.toLowerCase()===t?!0:n?_v(t)===t:!0:!1;return _S.set(r,s),s}function W_(t,e,n,{strict:r}={}){return Xc(t,{strict:!1})?OT(t,e,n,{strict:r}):Zj(t,e,n,{strict:r})}function Jj(t,e){if(typeof e=="number"&&e>0&&e>Ln(t)-1)throw new kj({offset:e,position:"start",size:Ln(t)})}function Yj(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ln(t)!==n-e)throw new kj({offset:n,position:"end",size:Ln(t)})}function Zj(t,e,n,{strict:r}={}){Jj(t,e);const s=t.slice(e,n);return r&&Yj(s,e,n),s}function OT(t,e,n,{strict:r}={}){Jj(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&Yj(s,e,n),s}const _Z=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Xj=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function eF(t,e){if(t.length!==e.length)throw new $Y({expectedLength:t.length,givenLength:e.length});const n=xZ({params:t,values:e}),r=OO(n);return r.length===0?"0x":r}function xZ({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(kO({param:t[r],value:e[r]}));return n}function kO({param:t,value:e}){const n=RO(t.type);if(n){const[r,s]=n;return AZ(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return PZ(e,{param:t});if(t.type==="address")return CZ(e);if(t.type==="bool")return IZ(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Xj.exec(t.type)??[];return TZ(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return SZ(e,{param:t});if(t.type==="string")return NZ(e);throw new jY(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function OO(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ln(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Je(e+s,{size:32})),r.push(a),s+=Ln(a)):n.push(a)}return dd([...n,...r])}function CZ(t){if(!Zo(t))throw new hd({address:t});return{dynamic:!1,encoded:Yu(t.toLowerCase())}}function AZ(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new zY(t);if(!r&&t.length!==e)throw new RY({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=kO({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=OO(i);if(r){const a=Je(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?dd([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:dd(i.map(({encoded:o})=>o))}}function SZ(t,{param:e}){const[,n]=e.type.split("bytes"),r=Ln(t);if(!n){let s=t;return r%32!==0&&(s=Yu(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:dd([Yu(Je(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new DY({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Yu(t,{dir:"right"})}}function IZ(t){if(typeof t!="boolean")throw new ue(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Yu(Dj(t))}}function TZ(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new Pj({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Je(t,{size:32,signed:e})}}function NZ(t){const e=pC(t),n=Math.ceil(Ln(e)/32),r=[];for(let s=0;s<n;s++)r.push(Yu(W_(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:dd([Yu(Je(Ln(e),{size:32})),...r])}}function PZ(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=kO({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?OO(r):dd(r.map(({encoded:s})=>s))}}function RO(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const xS="/docs/contract/encodeDeployData";function DO(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new OY({docsPath:xS});if(!("inputs"in s))throw new T$({docsPath:xS});if(!s.inputs||s.inputs.length===0)throw new T$({docsPath:xS});const i=eF(s.inputs,n);return yC([r,i])}function Or(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class jf extends ue{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class FE extends ue{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function kZ(t){const e=uy(`0x${t.substring(4)}`).substring(26);return _v(`0x${e}`)}const OZ="modulepreload",RZ=function(t){return"/"+t},D$={},Rn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=RZ(c),c in D$)return;D$[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":OZ,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function DZ({hash:t,signature:e}){const n=Xc(t)?t:gf(t),{secp256k1:r}=await Rn(async()=>{const{secp256k1:o}=await import("./secp256k1-DJaIAENA.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=$$(f);return new r.Signature(el(l),el(u)).addRecoveryBit(p)}const o=Xc(e)?e:gf(e);if(Ln(o)!==65)throw new Error("invalid signature length");const a=tl(`0x${o.slice(130)}`),c=$$(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function $$(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function $Z({hash:t,signature:e}){return kZ(await DZ({hash:t,signature:e}))}class U$ extends ue{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class tF extends ue{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class UZ extends ue{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const BZ={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new UZ({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new tF({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new U$({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new U$({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function $O(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(BZ);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function LZ(t,e="hex"){const n=nF(t),r=$O(new Uint8Array(n.length));return n.encode(r),e==="hex"?vs(r.bytes):r.bytes}function nF(t){return Array.isArray(t)?MZ(t.map(e=>nF(e))):jZ(t)}function MZ(t){const e=t.reduce((s,i)=>s+i.length,0),n=rF(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function jZ(t){const e=typeof t=="string"?Wa(t):t,n=rF(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function rF(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ue("Length is too large.")}function FZ(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=uy(yC(["0x05",LZ([e?Je(e):"0x",s,n?Je(n):"0x"])]));return r==="bytes"?Wa(i):i}async function sF(t){const{authorization:e,signature:n}=t;return $Z({hash:FZ(e),signature:n??e})}class RT extends ue{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class zZ extends ue{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class HZ extends ue{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class iF extends ue{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function oF({chain:t,currentChainId:e}){if(!t)throw new HZ;if(e!==t.id)throw new zZ({chain:t,currentChainId:e})}const WZ={gwei:9,wei:18},qZ={ether:-9,wei:9},GZ={ether:-18,gwei:-9};function dy(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Xs(t,e="wei"){return dy(t,qZ[e])}class hh extends ue{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(hh,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(hh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class q_ extends ue{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Xs(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(q_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class DT extends ue{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Xs(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(DT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class $T extends ue{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty($T,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class UT extends ue{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(UT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class BT extends ue{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(BT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class LT extends ue{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(LT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class MT extends ue{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(MT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class jT extends ue{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(jT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class FT extends ue{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(FT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class G_ extends ue{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Xs(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Xs(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(G_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class vC extends ue{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function UO(t,e="wei"){return dy(t,WZ[e])}function xv(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class VZ extends ue{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class KZ extends ue{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",xv(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class QZ extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=xv({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${UO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Xs(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Xs(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Xs(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class aF extends ue{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class cF extends ue{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class JZ extends ue{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const ys=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),YZ=t=>t,BO=t=>t;class X0 extends ue{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${BO(o)}`,e&&`Request body: ${ys(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class LO extends ue{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${BO(r)}`,`Request body: ${ys(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class B$ extends ue{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${BO(n)}`,`Request body: ${ys(e)}`],name:"TimeoutError"})}}const ZZ=-1;class ri extends ue{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof LO?e.code:n??ZZ}}class ki extends ri{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class zw extends ri{constructor(e){super(e,{code:zw.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(zw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Hw extends ri{constructor(e){super(e,{code:Hw.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Hw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Ww extends ri{constructor(e,{method:n}={}){super(e,{code:Ww.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class qw extends ri{constructor(e){super(e,{code:qw.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(qw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class yf extends ri{constructor(e){super(e,{code:yf.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(yf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Gw extends ri{constructor(e){super(e,{code:Gw.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Gw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Vw extends ri{constructor(e){super(e,{code:Vw.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Vw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Zu extends ri{constructor(e){super(e,{code:Zu.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Zu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class $m extends ri{constructor(e){super(e,{code:$m.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty($m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class fh extends ri{constructor(e,{method:n}={}){super(e,{code:fh.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(fh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Um extends ri{constructor(e){super(e,{code:Um.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Um,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Kw extends ri{constructor(e){super(e,{code:Kw.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Kw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Qn extends ki{constructor(e){super(e,{code:Qn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Qw extends ki{constructor(e){super(e,{code:Qw.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Qw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Jw extends ki{constructor(e,{method:n}={}){super(e,{code:Jw.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Jw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Yw extends ki{constructor(e){super(e,{code:Yw.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Yw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Zw extends ki{constructor(e){super(e,{code:Zw.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Zw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class qa extends ki{constructor(e){super(e,{code:qa.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(qa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Bm extends ki{constructor(e){super(e,{code:Bm.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Bm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Xw extends ki{constructor(e){super(e,{code:Xw.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Xw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class eb extends ki{constructor(e){super(e,{code:eb.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(eb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class tb extends ki{constructor(e){super(e,{code:tb.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(tb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class nb extends ki{constructor(e){super(e,{code:nb.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(nb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class rb extends ki{constructor(e){super(e,{code:rb.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(rb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Lm extends ki{constructor(e){super(e,{code:Lm.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Lm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class XZ extends ri{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function MO(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ue?t.walk(s=>(s==null?void 0:s.code)===hh.code):t;return r instanceof ue?new hh({cause:t,message:r.details}):hh.nodeMessage.test(n)?new hh({cause:t,message:t.details}):q_.nodeMessage.test(n)?new q_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):DT.nodeMessage.test(n)?new DT({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):$T.nodeMessage.test(n)?new $T({cause:t,nonce:e==null?void 0:e.nonce}):UT.nodeMessage.test(n)?new UT({cause:t,nonce:e==null?void 0:e.nonce}):BT.nodeMessage.test(n)?new BT({cause:t,nonce:e==null?void 0:e.nonce}):LT.nodeMessage.test(n)?new LT({cause:t}):MT.nodeMessage.test(n)?new MT({cause:t,gas:e==null?void 0:e.gas}):jT.nodeMessage.test(n)?new jT({cause:t,gas:e==null?void 0:e.gas}):FT.nodeMessage.test(n)?new FT({cause:t}):G_.nodeMessage.test(n)?new G_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new vC({cause:t})}function lF(t,{docsPath:e,...n}){const r=(()=>{const s=MO(t,n);return s instanceof vC?t:s})();return new QZ(r,{docsPath:e,...n})}function jO(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const eX={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function EC(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=tX(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>vs(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Je(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Je(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Je(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Je(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Je(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Je(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=eX[t.type]),typeof t.value<"u"&&(e.value=Je(t.value)),e}function tX(t){return t.map(e=>({address:e.address,r:e.r?Je(BigInt(e.r)):e.r,s:e.s?Je(BigInt(e.s)):e.s,chainId:Je(e.chainId),nonce:Je(e.nonce),...typeof e.yParity<"u"?{yParity:Je(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Je(e.v)}:{}}))}function Jt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const nX=2n**256n-1n;function Cv(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Or(e):void 0;if(o&&!Zo(o.address))throw new hd({address:o.address});if(i&&!Zo(i))throw new hd({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new VZ;if(r&&r>nX)throw new q_({maxFeePerGas:r});if(s&&r&&s>r)throw new G_({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Av(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return tl(e)}class rX extends ue{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class FO extends ue{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class sX extends ue{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Xs(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class uF extends ue{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const dF={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function hF(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?tl(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?tl(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?dF[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=iX(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function iX(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function oX(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:hF(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function sb(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?Je(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new uF({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||oX)(c)}async function fF(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function aX(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await Jt(t,sb,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return el(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):Jt(t,sb,"getBlock")({}),Jt(t,fF,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new FO;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function L$(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new rX;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await Jt(t,sb,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new FO;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await aX(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await Jt(t,fF,"getGasPrice")({}))}}class cX extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=xv({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${UO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Xs(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Xs(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Xs(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function lX(t,{docsPath:e,...n}){const r=(()=>{const s=MO(t,n);return s instanceof vC?t:s})();return new cX(r,{docsPath:e,...n})}class uX extends ue{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class dX extends ue{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function M$(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function hX(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=M$(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=M$(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function j$(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new S$({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new S$({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function fX(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Je(e)),n!==void 0&&(o.nonce=Je(n)),r!==void 0&&(o.state=j$(r)),s!==void 0){if(o.state)throw new dX;o.stateDiff=j$(s)}return o}function pF(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Zo(n,{strict:!1}))throw new hd({address:n});if(e[n])throw new uX({address:n});e[n]=fX(r)}return e}async function gF(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?Je(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function mF(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Or(n):void 0;try{let Q=function(N){const{block:M,request:B,rpcStateOverride:$}=N;return t.request({method:"eth_estimateGas",params:$?[B,M??"latest",$]:M?[B,M]:[B]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,value:x,stateOverride:_,...C}=await _C(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?Je(d):void 0)||h,S=pF(_),k=await(async()=>{if(C.to)return C.to;if(c&&c.length>0)return await sF({authorization:c[0]}).catch(()=>{throw new ue("`to` is required. Could not infer from `authorizationList`")})})();Cv(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,W=(R||EC)({...jO(C,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:k,value:x});let I=BigInt(await Q({block:T,request:W,rpcStateOverride:S}));if(c){const N=await gF(t,{address:W.from}),M=await Promise.all(c.map(async B=>{const{address:$}=B,j=await Q({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:$,value:Je(N)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(j)}));I+=M.reduce((B,$)=>B+$,0n)}return I}catch(a){throw lX(a,{...e,account:r,chain:t.chain})}}async function yF(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Je(r):n]},{dedupe:!!r});return tl(s)}function wF(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Wa(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>vs(i))}function bF(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Wa(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Wa(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>vs(o))}function pX(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function gX(t,e,n){return t&e^~t&n}function mX(t,e,n){return t&e^t&n^e&n}class yX extends Fj{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=vS(this.buffer)}update(e){H_(this),e=bC(e),mf(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=vS(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){H_(this),Mj(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Fw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;pX(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=vS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const wl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wX=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bl=new Uint32Array(64);let bX=class extends yX{constructor(e=32){super(64,e,8,!1),this.A=wl[0]|0,this.B=wl[1]|0,this.C=wl[2]|0,this.D=wl[3]|0,this.E=wl[4]|0,this.F=wl[5]|0,this.G=wl[6]|0,this.H=wl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)bl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=bl[d-15],f=bl[d-2],p=oa(h,7)^oa(h,18)^h>>>3,g=oa(f,17)^oa(f,19)^f>>>10;bl[d]=g+bl[d-7]+p+bl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=oa(a,6)^oa(a,11)^oa(a,25),f=u+h+gX(a,c,l)+wX[d]+bl[d]|0,g=(oa(r,2)^oa(r,13)^oa(r,22))+mX(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Fw(bl)}destroy(){this.set(0,0,0,0,0,0,0,0),Fw(this.buffer)}};const vX=zj(()=>new bX),EX=vX;function _X(t,e){return EX(Xc(t,{strict:!1})?fC(t):t)}function xX(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=_X(e);return s.set([n],0),r==="bytes"?s:vs(s)}function CX(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(xX({commitment:i,to:r,version:n}));return s}const F$=6,vF=32,zO=4096,EF=vF*zO,z$=EF*F$-1-1*zO*F$;class AX extends ue{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class SX extends ue{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function IX(t){const e=typeof t.data=="string"?Wa(t.data):t.data,n=Ln(e);if(!n)throw new SX;if(n>z$)throw new AX({maxSize:z$,size:n});const r=[];let s=!0,i=0;for(;s;){const o=$O(new Uint8Array(EF));let a=0;for(;a<zO;){const c=e.slice(i,i+(vF-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>vs(o.bytes))}function TX(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??IX({data:e}),i=t.commitments??wF({blobs:s,kzg:n,to:r}),o=t.proofs??bF({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function NX(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new KZ({transaction:t})}const _F=["blobVersionedHashes","chainId","fees","gas","nonce","type"],H$=new Map;async function _C(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=_F,type:u}=e,d=n&&Or(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await Jt(t,sb,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await Jt(t,Av,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const w=await y();h.nonce=await c.consume({address:d.address,chainId:w,client:t})}else h.nonce=await Jt(t,yF,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const w=wF({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const v=CX({commitments:w,to:"hex"});h.blobVersionedHashes=v}if(l.includes("sidecars")){const v=bF({blobs:r,commitments:w,kzg:o}),b=TX({blobs:r,commitments:w,proofs:v,to:"hex"});h.sidecars=b}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=NX(h)}catch{let w=H$.get(t.uid);if(typeof w>"u"){const v=await p();w=typeof(v==null?void 0:v.baseFeePerGas)=="bigint",H$.set(t.uid,w)}h.type=w?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const w=await p(),{maxFeePerGas:v,maxPriorityFeePerGas:b}=await L$(t,{block:w,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<b)throw new sX({maxPriorityFeePerGas:b});h.maxPriorityFeePerGas=b,h.maxFeePerGas=v}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new FO;if(typeof e.gasPrice>"u"){const w=await p(),{gasPrice:v}=await L$(t,{block:w,chain:s,request:h,type:"legacy"});h.gasPrice=v}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await Jt(t,mF,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Cv(h),delete h.parameters,h}async function xF(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const CS=new wC(128);async function Sv(t,e){var v,b,x,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new jf({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?Or(n):null;try{Cv(e);const C=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await sF({authorization:i[0]}).catch(()=>{throw new ue("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let A;r!==null&&(A=await Jt(t,Av,"getChainId")({}),oF({currentChainId:A,chain:r}));const T=(x=(b=(v=t.chain)==null?void 0:v.formatters)==null?void 0:b.transactionRequest)==null?void 0:x.format,k=(T||EC)({...jO(y,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:A,data:a,from:w==null?void 0:w.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:C,type:p,value:g}),R=CS.get(t.uid),F=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:F,params:[k]},{retryCount:0})}catch(W){if(R===!1)throw W;const Q=W;if(Q.name==="InvalidInputRpcError"||Q.name==="InvalidParamsRpcError"||Q.name==="MethodNotFoundRpcError"||Q.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(I=>(CS.set(t.uid,!0),I)).catch(I=>{const N=I;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(CS.set(t.uid,!1),Q):N});throw Q}}if((w==null?void 0:w.type)==="local"){const A=await Jt(t,_C,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:w.nonceManager,parameters:[..._F,"sidecars"],type:p,value:g,...y,to:C}),T=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,S=await w.signTransaction(A,{serializer:T});return await Jt(t,xF,"sendRawTransaction")({serializedTransaction:S})}throw(w==null?void 0:w.type)==="smart"?new FE({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new FE({docsPath:"/docs/actions/wallet/sendTransaction",type:w==null?void 0:w.type})}catch(C){throw C instanceof FE?C:lF(C,{...e,account:w,chain:e.chain||void 0})}}function PX(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=DO({abi:n,args:r,bytecode:s});return Sv(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const zT=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],jUe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],kX=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],OX=[...kX,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function RX(t,e={}){typeof e.size<"u"&&ta(t,{size:e.size});const n=vs(t,e);return el(n,e)}function DX(t,e={}){let n=t;if(typeof e.size<"u"&&(ta(n,{size:e.size}),n=ly(n)),n.length>1||n[0]>1)throw new _Y(n);return!!n[0]}function zc(t,e={}){typeof e.size<"u"&&ta(t,{size:e.size});const n=vs(t,e);return tl(n,e)}function $X(t,e={}){let n=t;return typeof e.size<"u"&&(ta(n,{size:e.size}),n=ly(n,{dir:"right"})),new TextDecoder().decode(n)}function xC(t,e){const n=typeof e=="string"?Wa(e):e,r=$O(n);if(Ln(n)===0&&t.length>0)throw new mC;if(Ln(e)&&Ln(e)<32)throw new $j({data:typeof e=="string"?e:vs(e),params:t,size:Ln(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=yg(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function yg(t,e,{staticPosition:n}){const r=RO(e.type);if(r){const[s,i]=r;return BX(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return FX(t,e,{staticPosition:n});if(e.type==="address")return UX(t);if(e.type==="bool")return LX(t);if(e.type.startsWith("bytes"))return MX(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return jX(t,e);if(e.type==="string")return zX(t,{staticPosition:n});throw new FY(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const W$=32,HT=32;function UX(t){const e=t.readBytes(32);return[_v(vs(Zj(e,-20))),32]}function BX(t,e,{length:n,staticPosition:r}){if(!n){const o=zc(t.readBytes(HT)),a=r+o,c=a+W$;t.setPosition(a);const l=zc(t.readBytes(W$)),u=ib(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=yg(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(ib(e)){const o=zc(t.readBytes(HT)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=yg(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=yg(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function LX(t){return[DX(t.readBytes(32),{size:32}),32]}function MX(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=zc(t.readBytes(32));t.setPosition(n+o);const a=zc(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[vs(c),32]}return[vs(t.readBytes(Number.parseInt(s),32)),32]}function jX(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?RX(s,{signed:n}):zc(s,{signed:n}),32]}function FX(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(ib(e)){const o=zc(t.readBytes(HT)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=yg(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=yg(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function zX(t,{staticPosition:e}){const n=zc(t.readBytes(32)),r=e+n;t.setPosition(r);const s=zc(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=$X(ly(i));return t.setPosition(e+32),[o,32]}function ib(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(ib);const n=RO(t.type);return!!(n&&ib({...t,type:n[1]}))}const HX=t=>uy(fC(t));function WX(t){return HX(t)}const qX="1.0.8";let co=class WT extends Error{constructor(e,n={}){var o;const r=n.cause instanceof WT?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof WT&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${qX}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function cl(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const CF=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,AF=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,SF=/^\(.+?\).*?$/,q$=/^tuple(?<array>(\[(\d*)\])*)$/;function qT(t){let e=t.type;if(q$.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=qT(i),s<n-1&&(e+=", ")}const r=cl(q$,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,qT({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Ky(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=qT(s),r!==n-1&&(e+=", ")}return e}function GX(t){var e;return t.type==="function"?`function ${t.name}(${Ky(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Ky(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Ky(t.inputs)})`:t.type==="error"?`error ${t.name}(${Ky(t.inputs)})`:t.type==="constructor"?`constructor(${Ky(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const IF=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function VX(t){return IF.test(t)}function KX(t){return cl(IF,t)}const TF=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function QX(t){return TF.test(t)}function JX(t){return cl(TF,t)}const NF=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function YX(t){return NF.test(t)}function ZX(t){return cl(NF,t)}const PF=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function kF(t){return PF.test(t)}function XX(t){return cl(PF,t)}const OF=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function eee(t){return OF.test(t)}function tee(t){return cl(OF,t)}const RF=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function nee(t){return RF.test(t)}function ree(t){return cl(RF,t)}const see=/^receive\(\) external payable$/;function iee(t){return see.test(t)}const oee=new Set(["indexed"]),GT=new Set(["calldata","memory","storage"]);class aee extends co{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class cee extends co{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class lee extends co{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class uee extends co{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class dee extends co{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class hee extends co{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class fee extends co{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class hy extends co{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class pee extends co{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class gee extends co{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class mee extends co{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class yee extends co{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function wee(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const AS=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function bee(t,e={}){if(YX(t))return vee(t,e);if(QX(t))return Eee(t,e);if(VX(t))return _ee(t,e);if(eee(t))return xee(t,e);if(nee(t))return Cee(t);if(iee(t))return{type:"receive",stateMutability:"payable"};throw new pee({signature:t})}function vee(t,e={}){const n=ZX(t);if(!n)throw new hy({signature:t,type:"function"});const r=Fo(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(wf(r[a],{modifiers:GT,structs:e,type:"function"}));const o=[];if(n.returns){const a=Fo(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(wf(a[l],{modifiers:GT,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Eee(t,e={}){const n=JX(t);if(!n)throw new hy({signature:t,type:"event"});const r=Fo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(wf(r[o],{modifiers:oee,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function _ee(t,e={}){const n=KX(t);if(!n)throw new hy({signature:t,type:"error"});const r=Fo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(wf(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function xee(t,e={}){const n=tee(t);if(!n)throw new hy({signature:t,type:"constructor"});const r=Fo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(wf(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Cee(t){const e=ree(t);if(!e)throw new hy({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Aee=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,See=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Iee=/^u?int$/;function wf(t,e){var d,h;const n=wee(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(AS.has(n))return AS.get(n);const r=SF.test(t),s=cl(r?See:Aee,t);if(!s)throw new lee({param:t});if(s.name&&Nee(s.name))throw new uee({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Fo(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(wf(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Iee.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!DF(c))throw new cee({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new dee({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(GT.has(s.modifier)&&!Pee(c,!!s.array))throw new hee({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return AS.set(n,u),u}function Fo(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Fo(a,[...e,n.trim()]):Fo(a,e,`${n}${o}`,r);case"(":return Fo(a,e,`${n}${o}`,r+1);case")":return Fo(a,e,`${n}${o}`,r-1);default:return Fo(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new yee({current:n,depth:r});return e.push(n.trim()),e}function DF(t){return t==="address"||t==="bool"||t==="function"||t==="string"||CF.test(t)||AF.test(t)}const Tee=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Nee(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||CF.test(t)||AF.test(t)||Tee.test(t)}function Pee(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function kee(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!kF(a))continue;const c=XX(a);if(!c)throw new hy({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=wf(p,{type:"struct"});u.push(g)}if(!u.length)throw new gee({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=$F(c,e)}return r}const Oee=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function $F(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(SF.test(o.type))r.push(o);else{const c=cl(Oee,o.type);if(!(c!=null&&c.type))throw new fee({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new mee({type:u});r.push({...o,type:`tuple${l??""}`,components:$F(e[u]??[],e,new Set([...n,u]))})}else if(DF(u))r.push(o);else throw new aee({type:u})}}return r}function UF(t){const e=kee(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];kF(i)||n.push(bee(i,e))}return n}function Ree(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ue("Unable to normalize signature.");return s}const Dee=t=>{const e=typeof t=="string"?t:GX(t);return Ree(e)};function BF(t){return WX(Dee(t))}const HO=BF,WO=t=>W_(BF(t),0,4);function qO(t){const{abi:e,args:n=[],name:r}=t,s=Xc(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?WO(a)===r:a.type==="event"?HO(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?VT(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=LF(a.inputs,o.inputs,n);if(l)throw new LY({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function VT(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Zo(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>VT(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>VT(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function LF(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return LF(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Zo(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Zo(n[r],{strict:!1}):!1)return o}}const SS="/docs/contract/decodeFunctionResult";function GO(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=qO({abi:e,args:n,name:r});if(!a)throw new F_(r,{docsPath:SS});i=a}if(i.type!=="function")throw new F_(void 0,{docsPath:SS});if(!i.outputs)throw new BY(i.name,{docsPath:SS});const o=xC(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const G$="/docs/contract/encodeFunctionData";function $ee(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=qO({abi:e,args:n,name:r});if(!i)throw new F_(r,{docsPath:G$});s=i}if(s.type!=="function")throw new F_(void 0,{docsPath:G$});return{abi:[s],functionName:WO(ud(s))}}function Iv(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:$ee(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?eF(s.inputs,e??[]):void 0;return yC([i,o??"0x"])}function VO({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new RT({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new RT({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const MF={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Uee={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Bee={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Lee(t){const{abi:e,data:n}=t,r=W_(n,0,4);if(r==="0x")throw new mC;const i=[...e||[],Uee,Bee].find(o=>o.type==="error"&&r===WO(ud(o)));if(!i)throw new Uj(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?xC(i.inputs,W_(n,4)):void 0,errorName:i.name}}function jF({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?ys(e[i]):e[i]}`).join(", ")})`}class Mee extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?Or(n):void 0;let g=xv({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${UO(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Xs(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Xs(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Xs(l)} gwei`,nonce:u});f&&(g+=`
${hX(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class FF extends ue{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=qO({abi:n,args:r,name:o}),l=c?jF({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?ud(c,{includeName:!0}):void 0,d=xv({address:s&&YZ(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class KT extends ue{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Lee({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=MF[f]}else{const f=u?ud(u,{includeName:!0}):void 0,p=u&&h?jF({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof Uj&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class jee extends ue{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Fee extends ue{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class KO extends ue{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function zee(t,e){var r,s,i,o,a,c;if(!(t instanceof ue))return!1;const n=t.walk(l=>l instanceof KT);return n instanceof KT?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===MF[50]):!1}function Hee(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Xc(e)?e:null}function Wee(t){return`[${t.slice(2)}]`}function qee(t){const e=new Uint8Array(32).fill(0);return t?Hee(t)||uy(mg(t)):vs(e)}function Gee(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(mg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=mg(s[i]);o.byteLength>255&&(o=mg(Wee(qee(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Vee=3;function V_(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof KO?t:t instanceof ue?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof mC?new jee({functionName:i}):[Vee,yf.code].includes(c)&&(l||u||d||h)?new KT({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof LO?u:h??d}):t;return new FF(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const Kee="0.1.1";function Qee(){return Kee}let zF=class QT extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof QT){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof QT&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Qee()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return HF(this,e)}};function HF(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?HF(t.cause,e):e?null:t}function Jee(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Xee({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function wc(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new Zee({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Yee(c,r):c}function Yee(t,e){return Jee(t,{dir:"left",size:e})}let Zee=class extends zF{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Xee=class extends zF{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function ete(t){return{address:t.address,amount:wc(t.amount),index:wc(t.index),validatorIndex:wc(t.validatorIndex)}}function tte(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:wc(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:wc(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:wc(t.gasLimit)},...typeof t.number=="bigint"&&{number:wc(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:wc(t.prevRandao)},...typeof t.time=="bigint"&&{time:wc(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(ete)}}}const nte="0x82ad56cb",rte="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",ste="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function ite(t,{docsPath:e,...n}){const r=(()=>{const s=MO(t,n);return s instanceof vC?t:s})();return new Mee(r,{docsPath:e,...n})}function QO(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const IS=new Map;function WF({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>IS.delete(e),a=()=>c().map(({args:u})=>u),c=()=>IS.get(e)||[],l=u=>IS.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=QO();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function qF(t,e){var W,Q,I,N;const{account:n=t.account,authorizationList:r,batch:s=!!((W=t.batch)!=null&&W.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:x,value:_,stateOverride:C,...A}=e,T=n?Or(n):void 0;if(u&&(h||f))throw new ue("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&x)throw new ue("Cannot provide both `code` & `to` as parameters.");const S=u&&d,k=h&&f&&x&&d,R=S||k,F=S?cte({code:u,data:d}):k?lte({data:d,factory:h,factoryData:f,to:x}):d;try{Cv(e);const B=(typeof i=="bigint"?Je(i):void 0)||o,$=l?tte(l):void 0,j=pF(C),V=(N=(I=(Q=t.chain)==null?void 0:Q.formatters)==null?void 0:I.transactionRequest)==null?void 0:N.format,ae=(V||EC)({...jO(A,{format:V}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:F,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:R?void 0:x,value:_});if(s&&ote({request:ae})&&!j&&!$)try{return await ate(t,{...ae,blockNumber:i,blockTag:o})}catch(ye){if(!(ye instanceof iF)&&!(ye instanceof RT))throw ye}const re=(()=>{const ye=[ae,B];return j&&$?[...ye,j,$]:j?[...ye,j]:$?[...ye,{},$]:ye})(),ce=await t.request({method:"eth_call",params:re});return ce==="0x"?{data:void 0}:{data:ce}}catch(M){const B=ute(M),{offchainLookup:$,offchainLookupSignature:j}=await Rn(async()=>{const{offchainLookup:V,offchainLookupSignature:ee}=await import("./ccip-D2U6J0_x.js");return{offchainLookup:V,offchainLookupSignature:ee}},[]);if(t.ccipRead!==!1&&(B==null?void 0:B.slice(0,10))===j&&x)return{data:await $(t,{data:B,to:x})};throw R&&(B==null?void 0:B.slice(0,10))==="0x101bb98d"?new Fee({factory:h}):ite(M,{...e,account:T,chain:t.chain})}}function ote({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(nte)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function ate(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new iF;l=VO({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Je(s):void 0)||i,{schedule:h}=WF({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((v,{data:b})=>v+(b.length-2),0)>n*2},fn:async y=>{const w=y.map(x=>({allowFailure:!0,callData:x.data,target:x.to})),v=Iv({abi:zT,args:[w],functionName:"aggregate3"}),b=await t.request({method:"eth_call",params:[{data:v,to:l},d]});return GO({abi:zT,args:[w],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new KO({data:f});return f==="0x"?{data:void 0}:{data:f}}function cte(t){const{code:e,data:n}=t;return DO({abi:UF(["constructor(bytes, bytes)"]),bytecode:rte,args:[e,n]})}function lte(t){const{data:e,factory:n,factoryData:r,to:s}=t;return DO({abi:UF(["constructor(address, bytes, address, bytes)"]),bytecode:ste,args:[s,e,n,r]})}function ute(t){var n;if(!(t instanceof ue))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function JO(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Iv({abi:n,args:s,functionName:i});try{const{data:c}=await Jt(t,qF,"call")({...o,data:a,to:r});return GO({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw V_(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function dte(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=VO({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:OX,functionName:"reverse",args:[gf(Gee(c))],blockNumber:n,blockTag:r},u=Jt(t,JO,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(zee(l))return null;throw l}}function hte(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function fte(t){const e=hte(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const pte=new Map,gte=new Map;function mte(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,pte),r=e(t,gte);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function yte(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=mte(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const wte=t=>`blockNumber.${t}`;async function bte(t,{cacheTime:e=t.cacheTime}={}){const n=await yte(()=>t.request({method:"eth_blockNumber"}),{cacheKey:wte(t.uid),cacheTime:e});return BigInt(n)}function GF(t,e){if(!Zo(t,{strict:!1}))throw new hd({address:t});if(!Zo(e,{strict:!1}))throw new hd({address:e});return t.toLowerCase()===e.toLowerCase()}const V$="/docs/contract/decodeEventLog";function vte(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new UY({docsPath:V$});const c=e.find(g=>g.type==="event"&&o===HO(ud(g)));if(!(c&&"name"in c)||c.type!=="event")throw new Bj(o,{docsPath:V$});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,w]=f[g],v=a[g];if(!v)throw new Lj({abiItem:c,param:y});h[d?w:y.name||w]=Ete({param:y,value:v})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=xC(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof $j||g instanceof tF?new kT({abiItem:c,data:n,params:p,size:Ln(n)}):g}else if(i)throw new kT({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Ete({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(xC([t],e)||[])[0]}function _te(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===HO(u));if(!c)return null;const l=vte({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!xte({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof Bj)return null;if(c instanceof kT||c instanceof Lj){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function xte(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?GF(o,a):i.type==="string"||i.type==="bytes"?uy(fC(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function VF(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function Cte(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>VF(i));return!("abi"in e)||!e.abi?s:_te({abi:e.abi,logs:s,strict:n})}async function KF(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?Je(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Je(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Je(i)]},{dedupe:!!a}),!c)throw new aF({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||hF)(c)}const QF={"0x0":"reverted","0x1":"success"};function Ate(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>VF(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?tl(t.transactionIndex):null,status:t.status?QF[t.status]:null,type:t.type?dF[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function K$(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new cF({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Ate)(n)}async function Ste(t,e){var w;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((w=t.batch)==null?void 0:w.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=VO({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let v=0;v<l.length;v++){const{abi:b,address:x,args:_,functionName:C}=l[v];try{const A=Iv({abi:b,args:_,functionName:C});p+=(A.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(A.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:A,target:x}]}catch(A){const T=V_(A,{abi:b,address:x,args:_,docsPath:"/docs/contract/multicall",functionName:C,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:x}]}}const g=await Promise.allSettled(h.map(v=>Jt(t,JO,"readContract")({abi:zT,account:n,address:d,args:[v],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let v=0;v<g.length;v++){const b=g[v];if(b.status==="rejected"){if(!r)throw b.reason;for(let _=0;_<h[v].length;_++)y.push({status:"failure",error:b.reason,result:void 0});continue}const x=b.value;for(let _=0;_<x.length;_++){const{returnData:C,success:A}=x[_],{callData:T}=h[v][_],{abi:S,address:k,functionName:R,args:F}=l[y.length];try{if(T==="0x")throw new mC;if(!A)throw new KO({data:C});const W=GO({abi:S,args:F,data:C,functionName:R});y.push(r?{result:W,status:"success"}:W)}catch(W){const Q=V_(W,{abi:S,address:k,args:F,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw Q;y.push({error:Q,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new ue("multicall results mismatch");return y}const S1=new wC(8192);function Ite(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(S1.get(n))return S1.get(n);const r=t().finally(()=>S1.delete(n));return S1.set(n,r),r}async function K_(t){return new Promise(e=>setTimeout(e,t))}function Q_(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await K_(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function Tte(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new fh(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new fh(new Error("method not supported"),{method:l});const u=s?pC(`${c}.${ys(n)}`):void 0;return Ite(()=>Q_(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case zw.code:throw new zw(f);case Hw.code:throw new Hw(f);case Ww.code:throw new Ww(f,{method:n.method});case qw.code:throw new qw(f);case yf.code:throw new yf(f);case Gw.code:throw new Gw(f);case Vw.code:throw new Vw(f);case Zu.code:throw new Zu(f);case $m.code:throw new $m(f);case fh.code:throw new fh(f,{method:n.method});case Um.code:throw new Um(f);case Kw.code:throw new Kw(f);case Qn.code:throw new Qn(f);case Qw.code:throw new Qw(f);case Jw.code:throw new Jw(f);case Yw.code:throw new Yw(f);case Zw.code:throw new Zw(f);case qa.code:throw new qa(f);case Bm.code:throw new Bm(f);case Xw.code:throw new Xw(f);case eb.code:throw new eb(f);case tb.code:throw new tb(f);case nb.code:throw new nb(f);case rb.code:throw new rb(f);case Lm.code:throw new Lm(f);case 5e3:throw new Qn(f);default:throw h instanceof ue?h:new XZ(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof X0){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Nte(h)}),{enabled:s,id:u})}}function Nte(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Um.code||t.code===yf.code:t instanceof X0&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Pte(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function JF(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function kte(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Q$=kte();function Ote(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await JF(async({signal:p})=>{const g={...a,body:Array.isArray(r)?ys(r.map(b=>({jsonrpc:"2.0",id:b.id??Q$.take(),...b}))):ys({jsonrpc:"2.0",id:r.id??Q$.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),w=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(w.url??t,w)},{errorInstance:new B$({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new X0({body:r,details:ys(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof X0||h instanceof B$?h:new X0({body:r,cause:h,url:t})}}}}class Rte extends ue{constructor({domain:e}){super(`Invalid domain "${ys(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Dte extends ue{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class $te extends ue{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Ute(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return ys({domain:o,message:a,primaryType:r,types:s})}function Bte(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(Xj);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,w]=h;Je(d,{signed:y==="int",size:Number.parseInt(w)/8})}if(u==="address"&&typeof d=="string"&&!Zo(d))throw new hd({address:d});const f=u.match(_Z);if(f){const[g,y]=f;if(y&&Ln(d)!==Number.parseInt(y))throw new MY({expectedSize:Number.parseInt(y),givenSize:Ln(d)})}const p=s[u];p&&(Mte(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Rte({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Dte({primaryType:r,types:s})}function Lte({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Mte(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new $te({type:t})}class jte extends ue{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Fte(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new jte({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const TS=new Map,J$=new Map;let zte=0;function ob(t,e,n){const r=++zte,s=()=>TS.get(t)||[],i=()=>{const u=s();TS.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=J$.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(TS.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&J$.set(t,l),o}function YO(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await K_(c);const l=async()=>{s&&(await t({unpoll:i}),await K_(r),l())};l()})(),i}function Hte(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=ys(["watchBlockNumber",t.uid,e,n,o]);return ob(d,{onBlockNumber:r,onError:s},h=>YO(async()=>{var f;try{const p=await Jt(t,bte,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=ys(["watchBlockNumber",t.uid,e,n]);return ob(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(w){var b;if(!f)return;const v=el((b=w.result)==null?void 0:b.number);h.onBlockNumber(v,c),c=v},onError(w){var v;(v=h.onError)==null||v.call(h,w)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function Wte(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function qte(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=ys(["watchPendingTransactions",t.uid,e,i]);return ob(l,{onTransactions:r,onError:n},u=>{let d;const h=YO(async()=>{var f;try{if(!d)try{d=await Jt(t,fte,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await Jt(t,Cte,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Jt(t,Wte,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Gte(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>_v(r))}async function Vte(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Kte(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Or(n):void 0,i=r?[s==null?void 0:s.address,[Je(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const YF="0x5792579257925792579257925792579257925792579257925792579257925792",ZF=Je(0,{size:32});async function Qte(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Or(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Iv({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?dd([p,f.dataSuffix]):p,to:f.to,value:f.value?Je(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:Je(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(v=>!v.optional)){const v="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Bm(new ue(v,{details:v}))}if(a&&d.length>1){const w="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Lm(new ue(w,{details:w}))}const p=[];for(const w of d){const v=Sv(t,{account:u,chain:s,data:w.data,to:w.to,value:w.value?el(w.value):void 0});p.push(v),o>0&&await new Promise(b=>setTimeout(b,o))}const g=await Promise.allSettled(p);if(g.every(w=>w.status==="rejected"))throw g[0].reason;const y=g.map(w=>w.status==="fulfilled"?w.value:ZF);return{id:dd([...y,Je(s.id,{size:32}),YF])}}throw lF(h,{...e,account:u,chain:e.chain})}}async function XF(t,e){async function n(u){if(u.endsWith(YF.slice(2))){const h=ly(OT(u,-64,-32)),f=OT(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>ZF.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:tl(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?tl(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:el(u.blockNumber),gasUsed:el(u.gasUsed),status:QF[u.status]})))??[],statusCode:l,status:c,version:o}}async function Jte(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function Yte(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=ys(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=QO();let u;const d=ob(o,{resolve:c,reject:l},h=>{const f=YO(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await XF(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Zte({id:n}))},i):void 0,await a}class Zte extends ue{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function Xte(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=ys(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:w}=QO(),v=a?setTimeout(()=>{p(),f(),w(new JZ({hash:n}))},a):void 0;return f=ob(c,{onReplaced:r,resolve:y,reject:w},b=>{p=Jt(t,Hte,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(x){const _=A=>{clearTimeout(v),p(),A(),f()};let C=x;if(!h)try{if(d){if(e>1&&(!d.blockNumber||C-d.blockNumber+1n<e))return;_(()=>b.resolve(d));return}if(l||(h=!0,await Q_(async()=>{l=await Jt(t,KF,"getTransaction")({hash:n}),l.blockNumber&&(C=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await Jt(t,K$,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||C-d.blockNumber+1n<e))return;_(()=>b.resolve(d))}catch(A){if(A instanceof aF||A instanceof cF){if(!l){h=!1;return}try{u=l,h=!0;const T=await Q_(()=>Jt(t,sb,"getBlock")({blockNumber:C,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof uF});h=!1;const S=T.transactions.find(({from:R,nonce:F})=>R===u.from&&F===u.nonce);if(!S||(d=await Jt(t,K$,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||C-d.blockNumber+1n<e)))return;let k="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?k="repriced":S.from===S.to&&S.value===0n&&(k="cancelled"),_(()=>{var R;(R=b.onReplaced)==null||R.call(b,{reason:k,replacedTransaction:u,transaction:S,transactionReceipt:d}),b.resolve(d)})}catch(T){_(()=>b.reject(T))}}else _(()=>b.reject(A))}}})}),g}async function ene(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Bu(n))}async function tne(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function e9(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new jf({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Or(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Or(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await Jt(t,Av,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await Jt(t,yF,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&GF(o.address,i.address))&&(a.nonce+=1)),a}async function nne(t,e){const{account:n=t.account}=e;if(!n)throw new jf({docsPath:"/docs/eip7702/signAuthorization"});const r=Or(n);if(!r.signAuthorization)throw new FE({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await e9(t,e);return r.signAuthorization(s)}async function rne(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new jf({docsPath:"/docs/actions/wallet/signTransaction"});const i=Or(n);Cv({account:i,...e});const o=await Jt(t,Av,"getChainId")({});r!==null&&oF({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||EC;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:Je(o),from:i.address}]},{retryCount:0})}async function t9(t,{account:e=t.account,message:n}){if(!e)throw new jf({docsPath:"/docs/actions/wallet/signMessage"});const r=Or(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?pC(n):n.raw instanceof Uint8Array?gf(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function sne(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new jf({docsPath:"/docs/actions/wallet/signTypedData"});const o=Or(n),a={EIP712Domain:Lte({domain:r}),...e.types};if(Bte({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=Ute({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function ine(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Je(e)}]},{retryCount:0})}async function one(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function n9(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new jf({docsPath:"/docs/contract/writeContract"});const l=r?Or(r):null,u=Iv({abi:n,args:i,functionName:a});try{return await Jt(t,Sv,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw V_(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Ai(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const zE="2.17.3",ane=()=>`@wagmi/core@${zE}`;var r9=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},J_,s9;let ll=class JT extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return ane()}constructor(e,n={}){var i;super(),J_.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof JT?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof JT&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return r9(this,J_,"m",s9).call(this,this,e)}};J_=new WeakSet,s9=function t(e,n){return n!=null&&n(e)?e:e.cause?r9(this,J_,"m",t).call(this,e.cause,n):e};class ab extends ll{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class cne extends ll{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class lne extends ll{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class une extends ll{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class dne extends ll{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class hne extends ll{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function HE(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new cne;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const YT=256;let I1=YT,T1;function i9(t=11){if(!T1||I1+t>YT*2){T1="",I1=0;for(let e=0;e<YT;e++)T1+=(256+Math.random()*256|0).toString(16).substring(1)}return T1.substring(I1,I1+++t)}function o9(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Or(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:i9()};function w(v){return b=>{const x=b(v);for(const C in y)delete x[C];const _={...v,...x};return Object.assign(_,{extend:w(_)})}}return Object.assign(y,{extend:w(y)})}function ZO({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=i9();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:Tte(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function fne(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>ZO({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function Y$(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=pne,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=ZO({key:n,name:r,async request({method:g,params:y}){let w;const v=async(b=0)=>{const x=h[b]({...d,chain:c,retryCount:0,timeout:u});try{const _=await x.request({method:g,params:y});return f({method:g,params:y,response:_,transport:x,status:"success"}),_}catch(_){if(f({error:_,method:g,params:y,transport:x,status:"error"}),i(_)||b===h.length-1||(w??(w=h.slice(b+1).some(C=>{const{include:A,exclude:T}=C({chain:c}).config.methods||{};return A?A.includes(g):T?!T.includes(g):!0})),!w))throw _;return v(b+1)}};return v()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};gne({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function pne(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===$m.code||t.code===Qn.code||hh.nodeMessage.test(t.message)||t.code===5e3))}function gne({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),w=Date.now();let v,b;try{await(r?r({transport:y}):y.request({method:"net_listening"})),b=1}catch{b=0}finally{v=Date.now()}return{latency:v-w,success:b}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const w=u.map(C=>C[y].latency),b=1-w.reduce((C,A)=>C+A,0)/w.length/f,x=u.map(C=>C[y].success),_=x.reduce((C,A)=>C+A,0)/x.length;return _===0?[0,y]:[l*b+c*_,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await K_(e),d()};d()}class mne extends ue{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function N1(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,w=f??e.timeout??1e4,v=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!v)throw new mne;const b=Ote(v,{fetchOptions:r,onRequest:a,onResponse:c,timeout:w});return ZO({key:s,methods:i,name:o,async request({method:x,params:_}){const C={method:x,params:_},{schedule:A}=WF({id:v,wait:g,shouldSplitBatch(R){return R.length>p},fn:R=>b.request({body:R}),sort:(R,F)=>R.id-F.id}),T=async R=>n?A(R):[await b.request({body:R})],[{error:S,result:k}]=await T(C);if(u)return{error:S,result:k};if(S)throw new LO({body:C,error:S,url:v});return k},retryCount:y,retryDelay:l,timeout:w,type:"http"},{fetchOptions:r,url:v})}}function yne(t){return{addChain:e=>PY(t,e),deployContract:e=>PX(t,e),getAddresses:()=>Gte(t),getCallsStatus:e=>XF(t,e),getCapabilities:e=>Kte(t,e),getChainId:()=>Av(t),getPermissions:()=>Vte(t),prepareAuthorization:e=>e9(t,e),prepareTransactionRequest:e=>_C(t,e),requestAddresses:()=>ene(t),requestPermissions:e=>tne(t,e),sendCalls:e=>Qte(t,e),sendRawTransaction:e=>xF(t,e),sendTransaction:e=>Sv(t,e),showCallsStatus:e=>Jte(t,e),signAuthorization:e=>nne(t,e),signMessage:e=>t9(t,e),signTransaction:e=>rne(t,e),signTypedData:e=>sne(t,e),switchChain:e=>ine(t,e),waitForCallsStatus:e=>Yte(t,e),watchAsset:e=>one(t,e),writeContract:e=>n9(t,e)}}async function Tv(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new hne({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new lne;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new dne({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Or(e.account??n.accounts[0]);if(o&&(o.address=Bu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new une({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return o9({account:o,chain:a,name:"Connector Client",transport:l=>fne(c)({...l,retryCount:0})})}async function a9(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function wne(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await Tv(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Ai(o,mF,"estimateGas")({...s,account:i})}function c9(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(GZ[t])}function wg(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function bne(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Ai(o,Ste,"multicall")({allowFailure:n,contracts:s,...i})}function vne(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Ai(s,JO,"readContract")(r)}async function Ene(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>bne(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof FF)throw c;const l=()=>o.map(u=>vne(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function _ne(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await Z$(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await Z$(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=Rj(ly(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Ai(c,gF,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:dy(u,c9(a)),symbol:d.nativeCurrency.symbol,value:u}}async function Z$(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Ene(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=dy(c??"0",c9(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function X$(t){return t.state.chainId}function fd(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!fd(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!fd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let NS=[];function e8(t){const e=t.chains;return fd(NS,e)?NS:(NS=e,e)}let P1=[];function ya(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||fd(P1,e)?P1:(P1=e,e)}let PS=[];function t8(t){const e=t.connectors;return fd(PS,e)?PS:(PS=e,e)}function xne(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Ai(s,dte,"getEnsName")(r)}async function Cne(t,e={}){return(await Tv(t,e)).extend(yne)}async function Ane(t,e){const{account:n,chainId:r,...s}=e,i=n??wg(t).address,o=t.getClient({chainId:r});return Ai(o,_C,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let kS=!1;async function ZT(t,e={}){var l,u;if(kS)return[];kS=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),kS=!1,a}async function Sne(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Tv(t,{account:n??void 0,chainId:r,connector:s}),await Ai(o,Sv,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Ine(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await Tv(t,{account:n,connector:r}),Ai(i,t9,"signMessage")({...s,...n?{account:n}:{}})}class Kl extends ll{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Tne extends ll{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function XT(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Tne({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new ab;return t.setState(a=>({...a,chainId:r})),i}function l9(t,e){const{onChange:n}=e;return t.subscribe(()=>wg(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return fd(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Nne(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function Pne(t,e){const{onChange:n}=e;return t.subscribe(()=>ya(t),n,{equalityFn:fd})}function u9(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function kne(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Ai(l,qte,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function One(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Ai(i,Xte,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Ai(i,KF,"getTransaction")({hash:a.transactionHash}),d=await Ai(i,qF,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?Rj(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function Rne(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Tv(t,{account:n??void 0,chainId:r,connector:s}),await Ai(o,n9,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function HUe(t){return t}CC.type="injected";function CC(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Dne[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:CC.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,w,v;const d=await this.getProvider();if(!d)throw new Kl;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(x=>Bu(x)),h.length>0&&(h=await this.getAccounts())}catch(b){const x=b;if(x.code===Qn.code)throw new Qn(x);if(x.code===Zu.code)throw x}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>Bu(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let b=await this.getChainId();if(l&&b!==l){const x=await this.switchChain({chainId:l}).catch(_=>{if(_.code===Qn.code)throw _;return{id:b}});b=(x==null?void 0:x.id)??b}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),t.target||await((v=c.storage)==null?void 0:v.setItem("injected.connected",!0)),{accounts:h,chainId:b}}catch(b){const x=b;throw x.code===Qn.code?new Qn(x):x.code===Zu.code?new Zu(x):x}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Kl;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await JF(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Kl;return(await l.request({method:"eth_accounts"})).map(d=>Bu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Kl;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=WE(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(p()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(p()),g))]))return!0}throw new Kl}return!!(await Q_(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,w;const d=await this.getProvider();if(!d)throw new Kl;const h=c.chains.find(v=>v.id===u);if(!h)throw new qa(new ab);const f=new Promise(v=>{const b=x=>{"chainId"in x&&x.chainId===u&&(c.emitter.off("change",b),v())};c.emitter.on("change",b)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Je(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(v){const b=v;if(b.code===4902||((g=(p=b==null?void 0:b.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:x,..._}=h.blockExplorers??{};let C;l!=null&&l.blockExplorerUrls?C=l.blockExplorerUrls:x&&(C=[x.url,...Object.values(_).map(S=>S.url)]);let A;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?A=l.rpcUrls:A=[((w=h.rpcUrls.default)==null?void 0:w.http[0])??""];const T={blockExplorerUrls:C,chainId:Je(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:A};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Qn(new Error("User rejected switch after adding network."))}),f]),h}catch(x){throw new Qn(x)}throw b.code===Qn.code?new Qn(b):new qa(b)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Bu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Dne={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:WE(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return WE(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:WE(t,"isPhantom")}}};function WE(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function $ne(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Une(){const t=new Set;let e=[];const n=()=>$ne(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Bne=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Lne=Bne;function Mne(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const eN=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return eN(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return eN(r)(n)}}}},jne=(t,e)=>(n,r,s)=>{let i={storage:Mne(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:h)});const w=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return eN(l.getItem.bind(l))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[x,_]=v;if(f=i.merge(_,(b=r())!=null?b:h),n(f,!0),x)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,c.forEach(v=>v(f))}).catch(v=>{w==null||w(void 0,v)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Fne=jne,n8=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},OS=t=>t?n8(t):n8;var d9={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,v,b;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(b=1,v=new Array(w-1);b<w;b++)v[b-1]=arguments[b];y.fn.apply(y.context,v)}else{var x=y.length,_;for(b=0;b<x;b++)switch(y[b].once&&this.removeListener(l,y[b].fn,void 0,!0),w){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,d);break;case 4:y[b].fn.call(y[b].context,u,d,h);break;default:if(!v)for(_=1,v=new Array(w-1);_<w;_++)v[_-1]=arguments[_];y[b].fn.apply(y[b].context,v)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],w=p.length;g<w;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(d9);var zne=d9.exports;const Hne=Bf(zne);class Wne{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Hne})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function qne(t){return new Wne(t)}function Gne(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function r8(t,e){return t.slice(0,e).join(".")||"."}function s8(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Vne(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=s8(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=s8(s,c);if(u!==0)return r?e.call(this,a,c,r8(i,u)):`[ref=${r8(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Kne(t,e,n,r){return JSON.stringify(t,Vne((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Qne(t){const{deserialize:e=Gne,key:n="wagmi",serialize:r=Kne,storage:s=h9}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const h9={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Jne(){const t=typeof window<"u"&&window.localStorage?window.localStorage:h9;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const tN=256;let k1=tN,O1;function Yne(t=11){if(!O1||k1+t>tN*2){O1="",k1=0;for(let e=0;e<tN;e++)O1+=(256+Math.random()*256|0).toString(16).substring(1)}return O1.substring(k1,k1+++t)}function Zne(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Qne({storage:Jne()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Une():void 0,a=OS(()=>i.chains),c=OS(()=>{const _=[],C=new Set;for(const A of i.connectors??[]){const T=l(A);if(_.push(T),!s&&T.rdns){const S=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const k of S)C.add(k)}}if(!s&&o){const A=o.getProviders();for(const T of A)C.has(T.info.rdns)||_.push(l(u(T)))}return _});function l(_){var T;const C=qne(Yne()),A={..._({emitter:C,chains:a.getState(),storage:n,transports:i.transports}),emitter:C,uid:C.uid};return C.on("connect",b),(T=A.setup)==null||T.call(A),A}function u(_){const{info:C}=_,A=_.provider;return CC({target:{...C,id:C.rdns,provider:A}})}const d=new Map;function h(_={}){const C=_.chainId??y.getState().chainId,A=a.getState().find(S=>S.id===C);if(_.chainId&&!A)throw new ab;{const S=d.get(y.getState().chainId);if(S&&!A)return S;if(!A)throw new ab}{const S=d.get(C);if(S)return S}let T;if(i.client)T=i.client({chain:A});else{const S=A.id,k=a.getState().map(W=>W.id),R={},F=Object.entries(i);for(const[W,Q]of F)if(!(W==="chains"||W==="client"||W==="connectors"||W==="transports"))if(typeof Q=="object")if(S in Q)R[W]=Q[S];else{if(k.some(N=>N in Q))continue;R[W]=Q}else R[W]=Q;T=o9({...R,chain:A,batch:R.batch??{multicall:!0},transport:W=>i.transports[S]({...W,connectors:c})})}return d.set(C,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";zE.startsWith(g)?p=Number.parseInt(zE.replace(g,"")):p=Number.parseInt(zE.split(".")[0]??"0");const y=OS(Lne(n?Fne(f,{migrate(_,C){if(C===p)return _;const A=f(),T=w(_,A.chainId);return{...A,chainId:T}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([C,A])=>{const{id:T,name:S,type:k,uid:R}=A.connector;return[C,{...A,connector:{id:T,name:S,type:k,uid:R}}]})},chainId:_.chainId,current:_.current}},merge(_,C){typeof _=="object"&&_&&"status"in _&&delete _.status;const A=w(_,C.chainId);return{...C,..._,chainId:A}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function w(_,C){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(A=>A.id===_.chainId)?_.chainId:C}r&&y.subscribe(({connections:_,current:C})=>{var A;return C?(A=_.get(C))==null?void 0:A.chainId:void 0},_=>{if(a.getState().some(A=>A.id===_))return y.setState(A=>({...A,chainId:_??A.chainId}))}),o==null||o.subscribe(_=>{const C=new Set,A=new Set;for(const S of c.getState())if(C.add(S.id),S.rdns){const k=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const R of k)A.add(R)}const T=[];for(const S of _){if(A.has(S.info.rdns))continue;const k=l(u(S));C.has(k.id)||T.push(k)}n&&!y.persist.hasHydrated()||c.setState(S=>[...S,...T],!0)});function v(_){y.setState(C=>{const A=C.connections.get(_.uid);return A?{...C,connections:new Map(C.connections).set(_.uid,{accounts:_.accounts??A.accounts,chainId:_.chainId??A.chainId,connector:A.connector})}:C})}function b(_){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(C=>{const A=c.getState().find(T=>T.uid===_.uid);return A?(A.emitter.listenerCount("connect")&&A.emitter.off("connect",v),A.emitter.listenerCount("change")||A.emitter.on("change",v),A.emitter.listenerCount("disconnect")||A.emitter.on("disconnect",x),{...C,connections:new Map(C.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:A}),current:_.uid,status:"connected"}):C})}function x(_){y.setState(C=>{const A=C.connections.get(_.uid);if(A){const S=A.connector;S.emitter.listenerCount("change")&&A.connector.emitter.off("change",v),S.emitter.listenerCount("disconnect")&&A.connector.emitter.off("disconnect",x),S.emitter.listenerCount("connect")||A.connector.emitter.on("connect",b)}if(C.connections.delete(_.uid),C.connections.size===0)return{...C,connections:new Map,current:null,status:"disconnected"};const T=C.connections.values().next().value;return{...C,connections:new Map(C.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(_){let C;typeof _=="function"?C=_(y.getState()):C=_;const A=f();typeof C!="object"&&(C=A),Object.keys(A).some(S=>!(S in C))&&(C=A),y.setState(C,!0)},subscribe(_,C,A){return y.subscribe(_,C,A?{...A,fireImmediately:A.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const C=typeof _=="function"?_(a.getState()):_;if(C.length!==0)return a.setState(C,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:v,connect:b,disconnect:x}}}}function Xne(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?ZT(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function ere(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Xne(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const f9=D.createContext(void 0);function tre(t){const{children:e,config:n}=t,r={value:n};return D.createElement(ere,t,D.createElement(f9.Provider,r,e))}const nre="2.15.6",rre=()=>`wagmi@${nre}`;let sre=class extends ll{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return rre()}};class ire extends sre{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Qa(t={}){const e=t.config??D.useContext(f9);if(!e)throw new ire;return e}function ore(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var p9={exports:{}},g9={},m9={exports:{}},y9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=D;function are(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cre=typeof Object.is=="function"?Object.is:are,lre=Mm.useState,ure=Mm.useEffect,dre=Mm.useLayoutEffect,hre=Mm.useDebugValue;function fre(t,e){var n=e(),r=lre({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return dre(function(){s.value=n,s.getSnapshot=e,RS(s)&&i({inst:s})},[t,n,e]),ure(function(){return RS(s)&&i({inst:s}),t(function(){RS(s)&&i({inst:s})})},[t]),hre(n),n}function RS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cre(t,n)}catch{return!0}}function pre(t,e){return e()}var gre=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pre:fre;y9.useSyncExternalStore=Mm.useSyncExternalStore!==void 0?Mm.useSyncExternalStore:gre;m9.exports=y9;var mre=m9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC=D,yre=mre;function wre(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bre=typeof Object.is=="function"?Object.is:wre,vre=yre.useSyncExternalStore,Ere=AC.useRef,_re=AC.useEffect,xre=AC.useMemo,Cre=AC.useDebugValue;g9.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Ere(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=xre(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,bre(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=vre(t,i[0],i[1]);return _re(function(){o.hasValue=!0,o.value=a},[a]),Cre(a),a};p9.exports=g9;var Are=p9.exports;const DS=t=>typeof t=="object"&&!Array.isArray(t);function Sre(t,e,n=e,r=fd){const s=D.useRef([]),i=Are.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(DS(o)&&DS(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(DS(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function jm(t={}){const e=Qa(t);return Sre(n=>l9(e,{onChange:n}),()=>wg(e))}var fy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bf=typeof window>"u"||"Deno"in globalThis;function us(){}function Ire(t,e){return typeof t=="function"?t(e):t}function nN(t){return typeof t=="number"&&t>=0&&t!==1/0}function w9(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Xu(t,e){return typeof t=="function"?t(e):t}function Lo(t,e){return typeof t=="function"?t(e):t}function i8(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==XO(o,e.options))return!1}else if(!cb(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function o8(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(vf(e.options.mutationKey)!==vf(i))return!1}else if(!cb(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function XO(t,e){return((e==null?void 0:e.queryKeyHashFn)||vf)(t)}function vf(t){return JSON.stringify(t,(e,n)=>rN(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function cb(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>cb(t[n],e[n])):!1}function b9(t,e){if(t===e)return t;const n=a8(t)&&a8(e);if(n||rN(t)&&rN(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=b9(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function Y_(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function a8(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function rN(t){if(!c8(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!c8(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function c8(t){return Object.prototype.toString.call(t)==="[object Object]"}function Tre(t){return new Promise(e=>{setTimeout(e,t)})}function sN(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?b9(t,e):e}function Nre(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Pre(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var eR=Symbol();function v9(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===eR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function E9(t,e){return typeof t=="function"?t(...e):!!t}var Ah,cu,Ng,sL,kre=(sL=class extends fy{constructor(){super();q(this,Ah);q(this,cu);q(this,Ng);O(this,Ng,e=>{if(!bf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){E(this,cu)||this.setEventListener(E(this,Ng))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,cu))==null||e.call(this),O(this,cu,void 0))}setEventListener(e){var n;O(this,Ng,e),(n=E(this,cu))==null||n.call(this),O(this,cu,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){E(this,Ah)!==e&&(O(this,Ah,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof E(this,Ah)=="boolean"?E(this,Ah):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ah=new WeakMap,cu=new WeakMap,Ng=new WeakMap,sL),tR=new kre,Pg,lu,kg,iL,Ore=(iL=class extends fy{constructor(){super();q(this,Pg,!0);q(this,lu);q(this,kg);O(this,kg,e=>{if(!bf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){E(this,lu)||this.setEventListener(E(this,kg))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,lu))==null||e.call(this),O(this,lu,void 0))}setEventListener(e){var n;O(this,kg,e),(n=E(this,lu))==null||n.call(this),O(this,lu,e(this.setOnline.bind(this)))}setOnline(e){E(this,Pg)!==e&&(O(this,Pg,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return E(this,Pg)}},Pg=new WeakMap,lu=new WeakMap,kg=new WeakMap,iL),Z_=new Ore;function iN(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Rre(t){return Math.min(1e3*2**t,3e4)}function _9(t){return(t??"online")==="online"?Z_.isOnline():!0}var x9=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function $S(t){return t instanceof x9}function C9(t){let e=!1,n=0,r=!1,s;const i=iN(),o=g=>{var y;r||(h(new x9(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>tR.isFocused()&&(t.networkMode==="always"||Z_.isOnline())&&t.canRun(),u=()=>_9(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=w=>{(r||l())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(d).catch(w=>{var C;if(r)return;const v=t.retry??(bf?0:3),b=t.retryDelay??Rre,x=typeof b=="function"?b(n,w):b,_=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,w);if(e||!_){h(w);return}n++,(C=t.onFail)==null||C.call(t,n,w),Tre(x).then(()=>l()?void 0:f()).then(()=>{e?h(w):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var Dre=t=>setTimeout(t,0);function $re(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Dre;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Zn=$re(),Sh,oL,A9=(oL=class{constructor(){q(this,Sh)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nN(this.gcTime)&&O(this,Sh,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(bf?1/0:5*60*1e3))}clearGcTimeout(){E(this,Sh)&&(clearTimeout(E(this,Sh)),O(this,Sh,void 0))}},Sh=new WeakMap,oL),Og,Ih,qi,Th,Kr,tv,Nh,Io,cc,aL,Ure=(aL=class extends A9{constructor(e){super();q(this,Io);q(this,Og);q(this,Ih);q(this,qi);q(this,Th);q(this,Kr);q(this,tv);q(this,Nh);O(this,Nh,!1),O(this,tv,e.defaultOptions),this.setOptions(e.options),this.observers=[],O(this,Th,e.client),O(this,qi,E(this,Th).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,O(this,Og,Bre(this.options)),this.state=e.state??E(this,Og),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=E(this,Kr))==null?void 0:e.promise}setOptions(e){this.options={...E(this,tv),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&E(this,qi).remove(this)}setData(e,n){const r=sN(this.state.data,e,this.options);return X(this,Io,cc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){X(this,Io,cc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=E(this,Kr))==null?void 0:r.promise;return(s=E(this,Kr))==null||s.cancel(e),n?n.then(us).catch(us):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(E(this,Og))}isActive(){return this.observers.some(e=>Lo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===eR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Xu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!w9(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,Kr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,Kr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),E(this,qi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(E(this,Kr)&&(E(this,Nh)?E(this,Kr).cancel({revert:!0}):E(this,Kr).cancelRetry()),this.scheduleGc()),E(this,qi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||X(this,Io,cc).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(E(this,Kr))return E(this,Kr).continueRetry(),E(this,Kr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(O(this,Nh,!0),r.signal)})},i=()=>{const h=v9(this.options,n),p=(()=>{const g={client:E(this,Th),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return O(this,Nh,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:E(this,Th),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),O(this,Ih,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&X(this,Io,cc).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;$S(h)&&h.silent||X(this,Io,cc).call(this,{type:"error",error:h}),$S(h)||((p=(f=E(this,qi).config).onError)==null||p.call(f,h,this),(y=(g=E(this,qi).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return O(this,Kr,C9({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){c(w);return}(p=(f=E(this,qi).config).onSuccess)==null||p.call(f,h,this),(y=(g=E(this,qi).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{X(this,Io,cc).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{X(this,Io,cc).call(this,{type:"pause"})},onContinue:()=>{X(this,Io,cc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),E(this,Kr).start()}},Og=new WeakMap,Ih=new WeakMap,qi=new WeakMap,Th=new WeakMap,Kr=new WeakMap,tv=new WeakMap,Nh=new WeakMap,Io=new WeakSet,cc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...S9(r.data,this.options),fetchMeta:e.meta??null};case"success":return O(this,Ih,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return $S(s)&&s.revert&&E(this,Ih)?{...E(this,Ih),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Zn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),E(this,qi).notify({query:this,type:"updated",action:e})})},aL);function S9(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_9(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Bre(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var wa,cL,Lre=(cL=class extends fy{constructor(e={}){super();q(this,wa);this.config=e,O(this,wa,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??XO(s,n);let o=this.get(i);return o||(o=new Ure({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){E(this,wa).has(e.queryHash)||(E(this,wa).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=E(this,wa).get(e.queryHash);n&&(e.destroy(),n===e&&E(this,wa).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Zn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return E(this,wa).get(e)}getAll(){return[...E(this,wa).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>i8(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>i8(e,r)):n}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},wa=new WeakMap,cL),ba,ss,Ph,va,Fl,lL,Mre=(lL=class extends A9{constructor(e){super();q(this,va);q(this,ba);q(this,ss);q(this,Ph);this.mutationId=e.mutationId,O(this,ss,e.mutationCache),O(this,ba,[]),this.state=e.state||I9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){E(this,ba).includes(e)||(E(this,ba).push(e),this.clearGcTimeout(),E(this,ss).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){O(this,ba,E(this,ba).filter(n=>n!==e)),this.scheduleGc(),E(this,ss).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){E(this,ba).length||(this.state.status==="pending"?this.scheduleGc():E(this,ss).remove(this))}continue(){var e;return((e=E(this,Ph))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,w,v,b,x,_,C,A,T;const n=()=>{X(this,va,Fl).call(this,{type:"continue"})};O(this,Ph,C9({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,k)=>{X(this,va,Fl).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{X(this,va,Fl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>E(this,ss).canRun(this)}));const r=this.state.status==="pending",s=!E(this,Ph).canStart();try{if(r)n();else{X(this,va,Fl).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=E(this,ss).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));k!==this.state.context&&X(this,va,Fl).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const S=await E(this,Ph).start();return await((u=(l=E(this,ss).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=E(this,ss).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,S,null,e,this.state.context)),X(this,va,Fl).call(this,{type:"success",data:S}),S}catch(S){try{throw await((v=(w=E(this,ss).config).onError)==null?void 0:v.call(w,S,e,this.state.context,this)),await((x=(b=this.options).onError)==null?void 0:x.call(b,S,e,this.state.context)),await((C=(_=E(this,ss).config).onSettled)==null?void 0:C.call(_,void 0,S,this.state.variables,this.state.context,this)),await((T=(A=this.options).onSettled)==null?void 0:T.call(A,void 0,S,e,this.state.context)),S}finally{X(this,va,Fl).call(this,{type:"error",error:S})}}finally{E(this,ss).runNext(this)}}},ba=new WeakMap,ss=new WeakMap,Ph=new WeakMap,va=new WeakSet,Fl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Zn.batch(()=>{E(this,ba).forEach(r=>{r.onMutationUpdate(e)}),E(this,ss).notify({mutation:this,type:"updated",action:e})})},lL);function I9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ec,To,nv,uL,jre=(uL=class extends fy{constructor(e={}){super();q(this,Ec);q(this,To);q(this,nv);this.config=e,O(this,Ec,new Set),O(this,To,new Map),O(this,nv,0)}build(e,n,r){const s=new Mre({mutationCache:this,mutationId:++ml(this,nv)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){E(this,Ec).add(e);const n=R1(e);if(typeof n=="string"){const r=E(this,To).get(n);r?r.push(e):E(this,To).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(E(this,Ec).delete(e)){const n=R1(e);if(typeof n=="string"){const r=E(this,To).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&E(this,To).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=R1(e);if(typeof n=="string"){const r=E(this,To).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=R1(e);if(typeof n=="string"){const s=(r=E(this,To).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Zn.batch(()=>{E(this,Ec).forEach(e=>{this.notify({type:"removed",mutation:e})}),E(this,Ec).clear(),E(this,To).clear()})}getAll(){return Array.from(E(this,Ec))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>o8(n,r))}findAll(e={}){return this.getAll().filter(n=>o8(e,n))}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Zn.batch(()=>Promise.all(e.map(n=>n.continue().catch(us))))}},Ec=new WeakMap,To=new WeakMap,nv=new WeakMap,uL);function R1(t){var e;return(e=t.options.scope)==null?void 0:e.id}function l8(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=v9(e.options,e.fetchOptions),v=async(b,x,_)=>{if(g)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const A=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:x,direction:_?"backward":"forward",meta:e.options.meta};return y(R),R})(),T=await w(A),{maxPages:S}=e.options,k=_?Pre:Nre;return{pages:k(b.pages,T,S),pageParams:k(b.pageParams,x,S)}};if(s&&i.length){const b=s==="backward",x=b?Fre:u8,_={pages:i,pageParams:o},C=x(r,_);a=await v(_,C,b)}else{const b=t??i.length;do{const x=c===0?o[0]??r.initialPageParam:u8(r,a);if(c>0&&x==null)break;a=await v(a,x),c++}while(c<b)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function u8(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Fre(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var An,uu,du,Rg,Dg,hu,$g,Ug,dL,zre=(dL=class{constructor(t={}){q(this,An);q(this,uu);q(this,du);q(this,Rg);q(this,Dg);q(this,hu);q(this,$g);q(this,Ug);O(this,An,t.queryCache||new Lre),O(this,uu,t.mutationCache||new jre),O(this,du,t.defaultOptions||{}),O(this,Rg,new Map),O(this,Dg,new Map),O(this,hu,0)}mount(){ml(this,hu)._++,E(this,hu)===1&&(O(this,$g,tR.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,An).onFocus())})),O(this,Ug,Z_.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,An).onOnline())})))}unmount(){var t,e;ml(this,hu)._--,E(this,hu)===0&&((t=E(this,$g))==null||t.call(this),O(this,$g,void 0),(e=E(this,Ug))==null||e.call(this),O(this,Ug,void 0))}isFetching(t){return E(this,An).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return E(this,uu).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,An).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=E(this,An).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Xu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return E(this,An).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=E(this,An).get(r.queryHash),i=s==null?void 0:s.state.data,o=Ire(e,i);if(o!==void 0)return E(this,An).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Zn.batch(()=>E(this,An).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,An).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=E(this,An);Zn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=E(this,An);return Zn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Zn.batch(()=>E(this,An).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(us).catch(us)}invalidateQueries(t,e={}){return Zn.batch(()=>(E(this,An).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Zn.batch(()=>E(this,An).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(us)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(us)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=E(this,An).build(this,e);return n.isStaleByTime(Xu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(us).catch(us)}fetchInfiniteQuery(t){return t.behavior=l8(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(us).catch(us)}ensureInfiniteQueryData(t){return t.behavior=l8(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Z_.isOnline()?E(this,uu).resumePausedMutations():Promise.resolve()}getQueryCache(){return E(this,An)}getMutationCache(){return E(this,uu)}getDefaultOptions(){return E(this,du)}setDefaultOptions(t){O(this,du,t)}setQueryDefaults(t,e){E(this,Rg).set(vf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...E(this,Rg).values()],n={};return e.forEach(r=>{cb(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){E(this,Dg).set(vf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...E(this,Dg).values()],n={};return e.forEach(r=>{cb(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...E(this,du).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=XO(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===eR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...E(this,du).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){E(this,An).clear(),E(this,uu).clear()}},An=new WeakMap,uu=new WeakMap,du=new WeakMap,Rg=new WeakMap,Dg=new WeakMap,hu=new WeakMap,$g=new WeakMap,Ug=new WeakMap,dL),Us,gt,rv,is,kh,Bg,fu,pu,sv,Lg,Mg,Oh,Rh,gu,jg,Bt,S0,oN,aN,cN,lN,uN,dN,hN,T9,hL,Hre=(hL=class extends fy{constructor(e,n){super();q(this,Bt);q(this,Us);q(this,gt);q(this,rv);q(this,is);q(this,kh);q(this,Bg);q(this,fu);q(this,pu);q(this,sv);q(this,Lg);q(this,Mg);q(this,Oh);q(this,Rh);q(this,gu);q(this,jg,new Set);this.options=n,O(this,Us,e),O(this,pu,null),O(this,fu,iN()),this.options.experimental_prefetchInRender||E(this,fu).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(E(this,gt).addObserver(this),d8(E(this,gt),this.options)?X(this,Bt,S0).call(this):this.updateResult(),X(this,Bt,lN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return fN(E(this,gt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return fN(E(this,gt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,X(this,Bt,uN).call(this),X(this,Bt,dN).call(this),E(this,gt).removeObserver(this)}setOptions(e){const n=this.options,r=E(this,gt);if(this.options=E(this,Us).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Lo(this.options.enabled,E(this,gt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");X(this,Bt,hN).call(this),E(this,gt).setOptions(this.options),n._defaulted&&!Y_(this.options,n)&&E(this,Us).getQueryCache().notify({type:"observerOptionsUpdated",query:E(this,gt),observer:this});const s=this.hasListeners();s&&h8(E(this,gt),r,this.options,n)&&X(this,Bt,S0).call(this),this.updateResult(),s&&(E(this,gt)!==r||Lo(this.options.enabled,E(this,gt))!==Lo(n.enabled,E(this,gt))||Xu(this.options.staleTime,E(this,gt))!==Xu(n.staleTime,E(this,gt)))&&X(this,Bt,oN).call(this);const i=X(this,Bt,aN).call(this);s&&(E(this,gt)!==r||Lo(this.options.enabled,E(this,gt))!==Lo(n.enabled,E(this,gt))||i!==E(this,gu))&&X(this,Bt,cN).call(this,i)}getOptimisticResult(e){const n=E(this,Us).getQueryCache().build(E(this,Us),e),r=this.createResult(n,e);return qre(this,r)&&(O(this,is,r),O(this,Bg,this.options),O(this,kh,E(this,gt).state)),r}getCurrentResult(){return E(this,is)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){E(this,jg).add(e)}getCurrentQuery(){return E(this,gt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=E(this,Us).defaultQueryOptions(e),r=E(this,Us).getQueryCache().build(E(this,Us),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return X(this,Bt,S0).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),E(this,is)))}createResult(e,n){var S;const r=E(this,gt),s=this.options,i=E(this,is),o=E(this,kh),a=E(this,Bg),l=e!==r?e.state:E(this,rv),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const k=this.hasListeners(),R=!k&&d8(e,n),F=k&&h8(e,r,n,s);(R||F)&&(d={...d,...S9(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let w=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,w=!0):k=typeof n.placeholderData=="function"?n.placeholderData((S=E(this,Mg))==null?void 0:S.state.data,E(this,Mg)):n.placeholderData,k!==void 0&&(y="success",f=sN(i==null?void 0:i.data,k,n),h=!0)}if(n.select&&f!==void 0&&!w)if(i&&f===(o==null?void 0:o.data)&&n.select===E(this,sv))f=E(this,Lg);else try{O(this,sv,n.select),f=n.select(f),f=sN(i==null?void 0:i.data,f,n),O(this,Lg,f),O(this,pu,null)}catch(k){O(this,pu,k)}E(this,pu)&&(p=E(this,pu),f=E(this,Lg),g=Date.now(),y="error");const v=d.fetchStatus==="fetching",b=y==="pending",x=y==="error",_=b&&v,C=f!==void 0,T={status:y,fetchStatus:d.fetchStatus,isPending:b,isSuccess:y==="success",isError:x,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:x&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:x&&C,isStale:nR(e,n),refetch:this.refetch,promise:E(this,fu)};if(this.options.experimental_prefetchInRender){const k=W=>{T.status==="error"?W.reject(T.error):T.data!==void 0&&W.resolve(T.data)},R=()=>{const W=O(this,fu,T.promise=iN());k(W)},F=E(this,fu);switch(F.status){case"pending":e.queryHash===r.queryHash&&k(F);break;case"fulfilled":(T.status==="error"||T.data!==F.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==F.reason)&&R();break}}return T}updateResult(){const e=E(this,is),n=this.createResult(E(this,gt),this.options);if(O(this,kh,E(this,gt).state),O(this,Bg,this.options),E(this,kh).data!==void 0&&O(this,Mg,E(this,gt)),Y_(n,e))return;O(this,is,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!E(this,jg).size)return!0;const o=new Set(i??E(this,jg));return this.options.throwOnError&&o.add("error"),Object.keys(E(this,is)).some(a=>{const c=a;return E(this,is)[c]!==e[c]&&o.has(c)})};X(this,Bt,T9).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&X(this,Bt,lN).call(this)}},Us=new WeakMap,gt=new WeakMap,rv=new WeakMap,is=new WeakMap,kh=new WeakMap,Bg=new WeakMap,fu=new WeakMap,pu=new WeakMap,sv=new WeakMap,Lg=new WeakMap,Mg=new WeakMap,Oh=new WeakMap,Rh=new WeakMap,gu=new WeakMap,jg=new WeakMap,Bt=new WeakSet,S0=function(e){X(this,Bt,hN).call(this);let n=E(this,gt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(us)),n},oN=function(){X(this,Bt,uN).call(this);const e=Xu(this.options.staleTime,E(this,gt));if(bf||E(this,is).isStale||!nN(e))return;const r=w9(E(this,is).dataUpdatedAt,e)+1;O(this,Oh,setTimeout(()=>{E(this,is).isStale||this.updateResult()},r))},aN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(E(this,gt)):this.options.refetchInterval)??!1},cN=function(e){X(this,Bt,dN).call(this),O(this,gu,e),!(bf||Lo(this.options.enabled,E(this,gt))===!1||!nN(E(this,gu))||E(this,gu)===0)&&O(this,Rh,setInterval(()=>{(this.options.refetchIntervalInBackground||tR.isFocused())&&X(this,Bt,S0).call(this)},E(this,gu)))},lN=function(){X(this,Bt,oN).call(this),X(this,Bt,cN).call(this,X(this,Bt,aN).call(this))},uN=function(){E(this,Oh)&&(clearTimeout(E(this,Oh)),O(this,Oh,void 0))},dN=function(){E(this,Rh)&&(clearInterval(E(this,Rh)),O(this,Rh,void 0))},hN=function(){const e=E(this,Us).getQueryCache().build(E(this,Us),this.options);if(e===E(this,gt))return;const n=E(this,gt);O(this,gt,e),O(this,rv,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},T9=function(e){Zn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(E(this,is))}),E(this,Us).getQueryCache().notify({query:E(this,gt),type:"observerResultsUpdated"})})},hL);function Wre(t,e){return Lo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function d8(t,e){return Wre(t,e)||t.state.data!==void 0&&fN(t,e,e.refetchOnMount)}function fN(t,e,n){if(Lo(e.enabled,t)!==!1&&Xu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&nR(t,e)}return!1}function h8(t,e,n,r){return(t!==e||Lo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&nR(t,n)}function nR(t,e){return Lo(e.enabled,t)!==!1&&t.isStaleByTime(Xu(e.staleTime,t))}function qre(t,e){return!Y_(t.getCurrentResult(),e)}var mu,yu,Bs,_c,Kc,qE,pN,fL,Gre=(fL=class extends fy{constructor(n,r){super();q(this,Kc);q(this,mu);q(this,yu);q(this,Bs);q(this,_c);O(this,mu,n),this.setOptions(r),this.bindMethods(),X(this,Kc,qE).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=E(this,mu).defaultMutationOptions(n),Y_(this.options,r)||E(this,mu).getMutationCache().notify({type:"observerOptionsUpdated",mutation:E(this,Bs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&vf(r.mutationKey)!==vf(this.options.mutationKey)?this.reset():((s=E(this,Bs))==null?void 0:s.state.status)==="pending"&&E(this,Bs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=E(this,Bs))==null||n.removeObserver(this)}onMutationUpdate(n){X(this,Kc,qE).call(this),X(this,Kc,pN).call(this,n)}getCurrentResult(){return E(this,yu)}reset(){var n;(n=E(this,Bs))==null||n.removeObserver(this),O(this,Bs,void 0),X(this,Kc,qE).call(this),X(this,Kc,pN).call(this)}mutate(n,r){var s;return O(this,_c,r),(s=E(this,Bs))==null||s.removeObserver(this),O(this,Bs,E(this,mu).getMutationCache().build(E(this,mu),this.options)),E(this,Bs).addObserver(this),E(this,Bs).execute(n)}},mu=new WeakMap,yu=new WeakMap,Bs=new WeakMap,_c=new WeakMap,Kc=new WeakSet,qE=function(){var r;const n=((r=E(this,Bs))==null?void 0:r.state)??I9();O(this,yu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},pN=function(n){Zn.batch(()=>{var r,s,i,o,a,c,l,u;if(E(this,_c)&&this.hasListeners()){const d=E(this,yu).variables,h=E(this,yu).context;(n==null?void 0:n.type)==="success"?((s=(r=E(this,_c)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=E(this,_c)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=E(this,_c)).onError)==null||c.call(a,n.error,d,h),(u=(l=E(this,_c)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(E(this,yu))})})},fL);function Vre(t){return JSON.stringify(t,(e,n)=>Kre(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function Kre(t){if(!f8(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!f8(n)||!n.hasOwnProperty("isPrototypeOf"))}function f8(t){return Object.prototype.toString.call(t)==="[object Object]"}function N9(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:w,initialPageParam:v,_optimisticResults:b,enabled:x,notifyOnChangeProps:_,placeholderData:C,refetchInterval:A,refetchIntervalInBackground:T,refetchOnMount:S,refetchOnReconnect:k,refetchOnWindowFocus:R,retryOnMount:F,select:W,staleTime:Q,suspense:I,throwOnError:N,config:M,connector:B,query:$,...j}=t;return j}function Qre(t){return{mutationFn(e){return HE(t,e)},mutationKey:["connect"]}}function Jre(t){return{mutationFn(e){return a9(t,e)},mutationKey:["disconnect"]}}function Yre(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return xne(t,{...i,address:r})},queryKey:Zre(e)}}function Zre(t={}){return["ensName",N9(t)]}function Xre(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Cne(t,{...o,connector:r})},queryKey:ese(e)}}function ese(t={}){const{connector:e,...n}=t;return["walletClient",{...N9(n),connectorUid:e==null?void 0:e.uid}]}function tse(t){return{mutationFn(e){return XT(t,e)},mutationKey:["switchChain"]}}var P9=D.createContext(void 0),rR=t=>{const e=D.useContext(P9);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},nse=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(P9.Provider,{value:t,children:e})),k9=D.createContext(!1),rse=()=>D.useContext(k9);k9.Provider;function sse(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ise=D.createContext(sse()),ose=()=>D.useContext(ise),ase=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},cse=t=>{D.useEffect(()=>{t.clearReset()},[t])},lse=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||E9(n,[t.error,r])),use=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},dse=(t,e)=>t.isLoading&&t.isFetching&&!e,hse=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,p8=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function fse(t,e,n){var d,h,f,p,g;const r=rse(),s=ose(),i=rR(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",use(o),ase(o,s),cse(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(y=>{const w=u?c.subscribe(Zn.batchCalls(y)):us;return c.updateResult(),w},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),hse(o,l))throw p8(o,c,s);if(lse({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!bf&&dse(l,r)){const y=a?p8(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(us).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function pse(t,e){return fse(t,Hre)}function sR(t,e){const n=rR(),[r]=D.useState(()=>new Gre(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(Zn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(us)},[r]);if(s.error&&E9(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function O9(t){const e=pse({...t,queryKeyHashFn:Vre});return e.queryKey=t.queryKey,e}function R9(t={}){const e=Qa(t);return D.useSyncExternalStore(n=>Nne(e,{onChange:n}),()=>X$(e),()=>X$(e))}function gse(t={}){const e=Qa(t);return D.useSyncExternalStore(n=>ore(e,{onChange:n}),()=>e8(e),()=>e8(e))}function mse(t={}){const e=Qa(t);return D.useSyncExternalStore(n=>u9(e,{onChange:n}),()=>t8(e),()=>t8(e))}function D9(t={}){const{mutation:e}=t,n=Qa(t),r=Qre(n),{mutate:s,mutateAsync:i,...o}=sR({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:mse({config:n})}}function yse(t={}){const e=Qa(t);return D.useSyncExternalStore(n=>Pne(e,{onChange:n}),()=>ya(e),()=>ya(e))}function $9(t={}){const{mutation:e}=t,n=Qa(t),r=Jre(n),{mutate:s,mutateAsync:i,...o}=sR({...e,...r});return{...o,connectors:yse({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function U9(t={}){const{address:e,query:n={}}=t,r=Qa(t),s=R9({config:r}),i=Yre(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return O9({...n,...i,enabled:o})}function wse(t={}){const{mutation:e}=t,n=Qa(t),r=tse(n),{mutate:s,mutateAsync:i,...o}=sR({...e,...r});return{...o,chains:gse({config:n}),switchChain:s,switchChainAsync:i}}function B9(t={}){const{query:e={},...n}=t,r=Qa(n),s=rR(),{address:i,connector:o,status:a}=jm({config:r}),c=R9({config:r}),l=t.connector??o,{queryKey:u,...d}=Xre(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),O9({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}const bse="_verified_lvyh0_1",iR={verified:bse},vse=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:iR.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Ese=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:iR.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),_se=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:iR.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function L9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=L9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ed(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=L9(t))&&(r&&(r+=" "),r+=e);return r}const xse="_root_98iqw_1",Cse="_article_98iqw_21",g8={root:xse,article:Cse},oR=({className:t,children:e})=>m.jsx("div",{className:ed("react-tweet-theme",g8.root,t),children:m.jsx("article",{className:g8.article,children:e})}),M9=t=>m.jsx("img",{...t}),Ase="_header_nqq4j_1",Sse="_avatar_nqq4j_11",Ise="_avatarOverflow_nqq4j_16",Tse="_avatarSquare_nqq4j_23",Nse="_avatarShadow_nqq4j_26",Pse="_author_nqq4j_37",kse="_authorLink_nqq4j_44",Ose="_authorVerified_nqq4j_53",Rse="_authorLinkText_nqq4j_56",Dse="_authorMeta_nqq4j_63",$se="_authorFollow_nqq4j_66",Use="_username_nqq4j_69",Bse="_follow_nqq4j_74",Lse="_separator_nqq4j_82",Mse="_brand_nqq4j_86",jse="_twitterIcon_nqq4j_90",yr={header:Ase,avatar:Sse,avatarOverflow:Ise,avatarSquare:Tse,avatarShadow:Nse,author:Pse,authorLink:kse,authorVerified:Ose,authorLinkText:Rse,authorMeta:Dse,authorFollow:$se,username:Use,follow:Bse,separator:Lse,brand:Mse,twitterIcon:jse},Fse="_verifiedOld_lcna5_1",zse="_verifiedBlue_lcna5_4",Hse="_verifiedGovernment_lcna5_7",US={verifiedOld:Fse,verifiedBlue:zse,verifiedGovernment:Hse},j9=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(vse,{}),s=US.verifiedBlue;if(n)switch(t.is_blue_verified||(s=US.verifiedOld),t.verified_type){case"Government":r=m.jsx(_se,{}),s=US.verifiedGovernment;break;case"Business":r=m.jsx(Ese,{}),s=null;break}return n?m.jsx("div",{className:ed(e,s),children:r}):null},Wse=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:M9,{user:s}=t;return m.jsxs("div",{className:yr.header,children:[m.jsxs("a",{href:t.url,className:yr.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:ed(yr.avatarOverflow,s.profile_image_shape==="Square"&&yr.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:yr.avatarOverflow,children:m.jsx("div",{className:yr.avatarShadow})})]}),m.jsxs("div",{className:yr.author,children:[m.jsxs("a",{href:t.url,className:yr.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:yr.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(j9,{user:s,className:yr.authorVerified})]}),m.jsxs("div",{className:yr.authorMeta,children:[m.jsx("a",{href:t.url,className:yr.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:yr.authorFollow,children:[m.jsx("span",{className:yr.separator,children:""}),m.jsx("a",{href:s.follow_url,className:yr.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:yr.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:yr.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},qse="_root_1ec15_1",Gse={root:qse},Vse=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:Gse.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),Kse="_root_eihfa_1",Qse={root:Kse},Jse=({href:t,children:e})=>m.jsx("a",{href:t,className:Qse.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Yse="_root_1xq52_1",Zse={root:Yse},Xse=({tweet:t})=>m.jsx("p",{className:Zse.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(Jse,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),m8=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,F9=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,eie=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,tie=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,nie=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,rie=t=>`https://x.com/hashtag/${t.text}`,sie=t=>`https://x.com/search?q=%24${t.text}`,iie=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,z9=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},oie=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},aie=t=>{const e=oie(t);return e.length>1?e[1]:e[0]},gN=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function y8(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Qy(n,"hashtag",t.entities.hashtags),Qy(n,"mention",t.entities.user_mentions),Qy(n,"url",t.entities.urls),Qy(n,"symbol",t.entities.symbols),t.entities.media&&Qy(n,"media",t.entities.media),cie(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:rie(r),text:s});case"mention":return Object.assign(r,{href:F9(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:sie(r),text:s});default:return Object.assign(r,{text:s})}})}function Qy(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function cie(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const lie=t=>({...t,url:m8(t),user:{...t.user,url:F9(t),follow_url:nie(t)},like_url:eie(t),reply_url:tie(t),in_reply_to_url:t.in_reply_to_screen_name?iie(t):void 0,entities:y8(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:m8(t.quoted_tweet),entities:y8(t.quoted_tweet)}:void 0}),uie="_root_g9tkv_1",die="_rounded_g9tkv_6",hie="_mediaWrapper_g9tkv_10",fie="_grid2Columns_g9tkv_17",pie="_grid3_g9tkv_20",gie="_grid2x2_g9tkv_23",mie="_mediaContainer_g9tkv_26",yie="_mediaLink_g9tkv_34",wie="_skeleton_g9tkv_38",bie="_image_g9tkv_43",ci={root:uie,rounded:die,mediaWrapper:hie,grid2Columns:fie,grid3:pie,grid2x2:gie,mediaContainer:mie,mediaLink:yie,skeleton:wie,image:bie},vie="_anchor_fp31d_1",Eie="_videoButton_fp31d_17",_ie="_videoButtonIcon_fp31d_35",xie="_watchOnTwitter_fp31d_44",Cie="_viewReplies_fp31d_60",sp={anchor:vie,videoButton:Eie,videoButtonIcon:_ie,watchOnTwitter:xie,viewReplies:Cie},Aie=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=aie(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:ci.image,poster:z9(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:sp.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:sp.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:sp.watchOnTwitter,children:m.jsx("a",{href:t.url,className:sp.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:ed(sp.anchor,sp.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Sie=t=>m.jsx("img",{...t}),w8=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},H9=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Sie;return m.jsx("div",{className:ed(ci.root,!n&&ci.rounded),children:m.jsx("div",{className:ed(ci.mediaWrapper,o>1&&ci.grid2Columns,o===3&&ci.grid3,o>4&&ci.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:ed(ci.mediaContainer,ci.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:ci.skeleton,style:w8(l,o)}),m.jsx(c,{src:z9(l,"small"),alt:l.ext_alt_text||"Image",className:ci.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:ci.mediaContainer,children:[m.jsx("div",{className:ci.skeleton,style:w8(l,o)}),m.jsx(Aie,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Iie={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},Tie=new Intl.DateTimeFormat("en-US",Iie),Nie=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Pie=t=>{const e=Nie(Tie.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},kie="_root_i24yn_1",Oie={root:kie},Rie=({tweet:t})=>{const e=new Date(t.created_at),n=Pie(e);return m.jsx("a",{className:Oie.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},Die="_info_19qcj_1",$ie="_infoLink_19qcj_10",Uie="_infoIcon_19qcj_30",BS={info:Die,infoLink:$ie,infoIcon:Uie},Bie=({tweet:t})=>m.jsxs("div",{className:BS.info,children:[m.jsx(Rie,{tweet:t}),m.jsx("a",{className:BS.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:BS.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),Lie="_actions_n2anf_1",Mie="_like_n2anf_13",jie="_reply_n2anf_14",Fie="_copy_n2anf_15",zie="_likeIconWrapper_n2anf_27",Hie="_likeCount_n2anf_30",Wie="_replyIconWrapper_n2anf_35",qie="_copyIconWrapper_n2anf_36",Gie="_likeIcon_n2anf_27",Vie="_replyIcon_n2anf_35",Kie="_copyIcon_n2anf_36",Qie="_replyText_n2anf_56",Jie="_copyText_n2anf_57",js={actions:Lie,like:Mie,reply:jie,copy:Fie,likeIconWrapper:zie,likeCount:Hie,replyIconWrapper:Wie,copyIconWrapper:qie,likeIcon:Gie,replyIcon:Vie,copyIcon:Kie,replyText:Qie,copyText:Jie},Yie=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:js.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:js.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:js.copyText,children:e?"Copied!":"Copy link"})]})},Zie=({tweet:t})=>{const e=gN(t.favorite_count);return m.jsxs("div",{className:js.actions,children:[m.jsxs("a",{className:js.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:js.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:js.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:js.likeCount,children:e})]}),m.jsxs("a",{className:js.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:js.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:js.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:js.replyText,children:"Reply"})]}),m.jsx(Yie,{tweet:t})]})},Xie="_replies_1cutb_1",eoe="_link_1cutb_4",toe="_text_1cutb_23",LS={replies:Xie,link:eoe,text:toe},noe=({tweet:t})=>m.jsx("div",{className:LS.replies,children:m.jsx("a",{className:LS.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:LS.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${gN(t.conversation_count)} reply`:`Read ${gN(t.conversation_count)} replies`})})}),roe="_root_q5799_1",soe="_article_q5799_16",b8={root:roe,article:soe},ioe=({tweet:t,children:e})=>m.jsx("div",{className:b8.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:b8.article,children:e})}),ooe="_header_r31i5_1",aoe="_avatar_r31i5_11",coe="_avatarSquare_r31i5_17",loe="_author_r31i5_21",uoe="_authorText_r31i5_26",doe="_username_r31i5_33",Dd={header:ooe,avatar:aoe,avatarSquare:coe,author:loe,authorText:uoe,username:doe},hoe=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Dd.header,children:[m.jsx("a",{href:t.url,className:Dd.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:ed(Dd.avatarOverflow,e.profile_image_shape==="Square"&&Dd.avatarSquare),children:m.jsx(M9,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Dd.author,children:[m.jsx("div",{className:Dd.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(j9,{user:e}),m.jsx("div",{className:Dd.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},foe="_root_175ot_1",poe={root:foe},goe=({tweet:t})=>m.jsx("p",{className:poe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),moe=({tweet:t})=>{var e;return m.jsxs(ioe,{tweet:t,children:[m.jsx(hoe,{tweet:t}),m.jsx(goe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(H9,{quoted:!0,tweet:t}):null]})},yoe=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>lie(t),[t]);return m.jsxs(oR,{children:[m.jsx(Wse,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(Vse,{tweet:r}),m.jsx(Xse,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(H9,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(moe,{tweet:r.quoted_tweet}),m.jsx(Bie,{tweet:r}),m.jsx(Zie,{tweet:r}),m.jsx(noe,{tweet:r})]})},woe="_root_16yxa_1",boe={root:woe},voe=t=>m.jsx(oR,{children:m.jsxs("div",{className:boe.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found"})]})}),Eoe="_skeleton_oi7hr_1",_oe={skeleton:Eoe},D1=({style:t})=>m.jsx("span",{className:_oe.skeleton,style:t}),xoe="_root_17qqv_1",Coe={root:xoe},Aoe=()=>m.jsxs(oR,{className:Coe.root,children:[m.jsx(D1,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(D1,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(D1,{style:{height:"2rem"}}),m.jsx(D1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var W9={exports:{}},q9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm=D;function Soe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ioe=typeof Object.is=="function"?Object.is:Soe,Toe=Fm.useState,Noe=Fm.useEffect,Poe=Fm.useLayoutEffect,koe=Fm.useDebugValue;function Ooe(t,e){var n=e(),r=Toe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Poe(function(){s.value=n,s.getSnapshot=e,MS(s)&&i({inst:s})},[t,n,e]),Noe(function(){return MS(s)&&i({inst:s}),t(function(){MS(s)&&i({inst:s})})},[t]),koe(n),n}function MS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ioe(t,n)}catch{return!0}}function Roe(t,e){return e()}var Doe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Roe:Ooe;q9.useSyncExternalStore=Fm.useSyncExternalStore!==void 0?Fm.useSyncExternalStore:Doe;W9.exports=q9;var $oe=W9.exports;const G9=0,V9=1,K9=2,v8=3;var E8=Object.prototype.hasOwnProperty;function mN(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&mN(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(E8.call(t,n)&&++r&&!E8.call(e,n)||!(n in e)||!mN(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Dc=new WeakMap,Lu=()=>{},ds=Lu(),yN=Object,Et=t=>t===ds,Oa=t=>typeof t=="function",pd=(t,e)=>({...t,...e}),Q9=t=>Oa(t.then),jS={},$1={},aR="undefined",Nv=typeof window!=aR,wN=typeof document!=aR,Uoe=Nv&&"Deno"in window,Boe=()=>Nv&&typeof window.requestAnimationFrame!=aR,J9=(t,e)=>{const n=Dc.get(t);return[()=>!Et(e)&&t.get(e)||jS,r=>{if(!Et(e)){const s=t.get(e);e in $1||($1[e]=s),n[5](e,pd(s,r),s||jS)}},n[6],()=>!Et(e)&&e in $1?$1[e]:!Et(e)&&t.get(e)||jS]};let bN=!0;const Loe=()=>bN,[vN,EN]=Nv&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Lu,Lu],Moe=()=>{const t=wN&&document.visibilityState;return Et(t)||t!=="hidden"},joe=t=>(wN&&document.addEventListener("visibilitychange",t),vN("focus",t),()=>{wN&&document.removeEventListener("visibilitychange",t),EN("focus",t)}),Foe=t=>{const e=()=>{bN=!0,t()},n=()=>{bN=!1};return vN("online",e),vN("offline",n),()=>{EN("online",e),EN("offline",n)}},zoe={isOnline:Loe,isVisible:Moe},Hoe={initFocus:joe,initReconnect:Foe},_8=!xi.useId,lb=!Nv||Uoe,Woe=t=>Boe()?window.requestAnimationFrame(t):setTimeout(t,1),FS=lb?D.useEffect:D.useLayoutEffect,zS=typeof navigator<"u"&&navigator.connection,x8=!lb&&zS&&(["slow-2g","2g"].includes(zS.effectiveType)||zS.saveData),U1=new WeakMap,HS=(t,e)=>yN.prototype.toString.call(t)===`[object ${e}]`;let qoe=0;const _N=t=>{const e=typeof t,n=HS(t,"Date"),r=HS(t,"RegExp"),s=HS(t,"Object");let i,o;if(yN(t)===t&&!n&&!r){if(i=U1.get(t),i)return i;if(i=++qoe+"~",U1.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=_N(t[o])+",";U1.set(t,i)}if(s){i="#";const a=yN.keys(t).sort();for(;!Et(o=a.pop());)Et(t[o])||(i+=o+":"+_N(t[o])+",");U1.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},cR=t=>{if(Oa(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?_N(t):"",[t,e]};let Goe=0;const xN=()=>++Goe;async function Y9(...t){const[e,n,r,s]=t,i=pd({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Oa(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=cR(h);if(!f)return;const[p,g]=J9(e,f),[y,w,v,b]=Dc.get(e),x=()=>{const W=y[f];return(Oa(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete v[f],delete b[f],W&&W[0])?W[0](K9).then(()=>p().data):p().data};if(t.length<3)return x();let _=r,C;const A=xN();w[f]=[A,0];const T=!Et(c),S=p(),k=S.data,R=S._c,F=Et(R)?k:R;if(T&&(c=Oa(c)?c(F,k):c,g({data:c,_c:F})),Oa(_))try{_=_(F)}catch(W){C=W}if(_&&Q9(_))if(_=await _.catch(W=>{C=W}),A!==w[f][0]){if(C)throw C;return _}else C&&T&&l(C)&&(o=!0,g({data:F,_c:ds}));if(o&&!C)if(Oa(o)){const W=o(_,F);g({data:W,error:ds,_c:ds})}else g({data:_,error:ds,_c:ds});if(w[f][1]=xN(),Promise.resolve(x()).then(()=>{g({_c:ds})}),C){if(u)throw C;return}return _}}const C8=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Voe=(t,e)=>{if(!Dc.has(t)){const n=pd(Hoe,e),r=Object.create(null),s=Y9.bind(ds,t);let i=Lu;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Dc.has(t)&&(Dc.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!lb)){const u=n.initFocus(setTimeout.bind(ds,C8.bind(ds,r,G9))),d=n.initReconnect(setTimeout.bind(ds,C8.bind(ds,r,V9)));i=()=>{u&&u(),d&&d(),Dc.delete(t)}}};return l(),[t,s,l,i]}return[t,Dc.get(t)[4]]},Koe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Et(i)&&o>i||setTimeout(r,a,s)},Qoe=mN,[Z9,Joe]=Voe(new Map),Yoe=pd({onLoadingSlow:Lu,onSuccess:Lu,onError:Lu,onErrorRetry:Koe,onDiscarded:Lu,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:x8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:x8?5e3:3e3,compare:Qoe,isPaused:()=>!1,cache:Z9,mutate:Joe,fallback:{}},zoe),Zoe=(t,e)=>{const n=pd(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=pd(s,o))}return n},Xoe=D.createContext({}),eae="$inf$",X9=Nv&&window.__SWR_DEVTOOLS_USE__,tae=X9?window.__SWR_DEVTOOLS_USE__:[],nae=()=>{X9&&(window.__SWR_DEVTOOLS_REACT__=xi)},rae=t=>Oa(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],sae=()=>pd(Yoe,D.useContext(Xoe)),iae=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=cR(e),[,,,a]=Dc.get(Z9);if(o.startsWith(eae))return n(...i);const c=a[o];return Et(c)?n(...i):(delete a[o],c)}),r),oae=tae.concat(iae),aae=t=>function(...n){const r=sae(),[s,i,o]=rae(n),a=Zoe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(oae);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},cae=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};nae();const WS=xi.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),qS={dedupe:!0},lae=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=Dc.get(r),[w,v]=cR(t),b=D.useRef(!1),x=D.useRef(!1),_=D.useRef(w),C=D.useRef(e),A=D.useRef(n),T=()=>A.current,S=()=>T().isVisible()&&T().isOnline(),[k,R,F,W]=J9(r,w),Q=D.useRef({}).current,I=Et(o)?Et(n.fallback)?ds:n.fallback[w]:o,N=(Ce,xe)=>{for(const je in Q){const Ze=je;if(Ze==="data"){if(!s(Ce[Ze],xe[Ze])&&(!Et(Ce[Ze])||!s(ce,xe[Ze])))return!1}else if(xe[Ze]!==Ce[Ze])return!1}return!0},M=D.useMemo(()=>{const Ce=!w||!e?!1:Et(a)?T().isPaused()||i?!1:c!==!1:a,xe=kt=>{const kn=pd(kt);return delete kn._k,Ce?{isValidating:!0,isLoading:!0,...kn}:kn},je=k(),Ze=W(),qt=xe(je),qn=je===Ze?qt:xe(Ze);let Xt=qt;return[()=>{const kt=xe(k());return N(kt,Xt)?(Xt.data=kt.data,Xt.isLoading=kt.isLoading,Xt.isValidating=kt.isValidating,Xt.error=kt.error,Xt):(Xt=kt,kt)},()=>qn]},[r,w]),B=$oe.useSyncExternalStore(D.useCallback(Ce=>F(w,(xe,je)=>{N(je,xe)||Ce()}),[r,w]),M[0],M[1]),$=!b.current,j=f[w]&&f[w].length>0,V=B.data,ee=Et(V)?I&&Q9(I)?WS(I):I:V,ae=B.error,re=D.useRef(ee),ce=h?Et(V)?Et(re.current)?ee:re.current:V:ee,ye=j&&!Et(ae)?!1:$&&!Et(a)?a:T().isPaused()?!1:i?Et(ee)?!1:c:Et(ee)||c,Z=!!(w&&e&&$&&ye),te=Et(B.isValidating)?Z:B.isValidating,le=Et(B.isLoading)?Z:B.isLoading,se=D.useCallback(async Ce=>{const xe=C.current;if(!w||!xe||x.current||T().isPaused())return!1;let je,Ze,qt=!0;const qn=Ce||{},Xt=!g[w]||!qn.dedupe,kt=()=>_8?!x.current&&w===_.current&&b.current:w===_.current,kn={isValidating:!1,isLoading:!1},Di=()=>{R(kn)},dl=()=>{const mr=g[w];mr&&mr[1]===Ze&&delete g[w]},hl={isValidating:!0};Et(k().data)&&(hl.isLoading=!0);try{if(Xt&&(R(hl),n.loadingTimeout&&Et(k().data)&&setTimeout(()=>{qt&&kt()&&T().onLoadingSlow(w,n)},n.loadingTimeout),g[w]=[xe(v),xN()]),[je,Ze]=g[w],je=await je,Xt&&setTimeout(dl,n.dedupingInterval),!g[w]||g[w][1]!==Ze)return Xt&&kt()&&T().onDiscarded(w),!1;kn.error=ds;const mr=p[w];if(!Et(mr)&&(Ze<=mr[0]||Ze<=mr[1]||mr[1]===0))return Di(),Xt&&kt()&&T().onDiscarded(w),!1;const Cs=k().data;kn.data=s(Cs,je)?Cs:je,Xt&&kt()&&T().onSuccess(je,w,n)}catch(mr){dl();const Cs=T(),{shouldRetryOnError:fl}=Cs;Cs.isPaused()||(kn.error=mr,Xt&&kt()&&(Cs.onError(mr,w,Cs),(fl===!0||Oa(fl)&&fl(mr))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||S())&&Cs.onErrorRetry(mr,w,Cs,Oy=>{const pl=f[w];pl&&pl[0]&&pl[0](v8,Oy)},{retryCount:(qn.retryCount||0)+1,dedupe:!0})))}return qt=!1,Di(),!0},[w,r]),pe=D.useCallback((...Ce)=>Y9(r,_.current,...Ce),[]);if(FS(()=>{C.current=e,A.current=n,Et(V)||(re.current=V)}),FS(()=>{if(!w)return;const Ce=se.bind(ds,qS);let xe=0;T().revalidateOnFocus&&(xe=Date.now()+T().focusThrottleInterval);const Ze=cae(w,f,(qt,qn={})=>{if(qt==G9){const Xt=Date.now();T().revalidateOnFocus&&Xt>xe&&S()&&(xe=Xt+T().focusThrottleInterval,Ce())}else if(qt==V9)T().revalidateOnReconnect&&S()&&Ce();else{if(qt==K9)return se();if(qt==v8)return se(qn)}});return x.current=!1,_.current=w,b.current=!0,R({_k:v}),ye&&(Et(ee)||lb?Ce():Woe(Ce)),()=>{x.current=!0,Ze()}},[w]),FS(()=>{let Ce;function xe(){const Ze=Oa(l)?l(k().data):l;Ze&&Ce!==-1&&(Ce=setTimeout(je,Ze))}function je(){!k().error&&(u||T().isVisible())&&(d||T().isOnline())?se(qS).then(xe):xe()}return xe(),()=>{Ce&&(clearTimeout(Ce),Ce=-1)}},[l,u,d,w]),D.useDebugValue(ce),i&&Et(ee)&&w){if(!_8&&lb)throw new Error("Fallback data is required when using Suspense in SSR.");C.current=e,A.current=n,x.current=!1;const Ce=y[w];if(!Et(Ce)){const xe=pe(Ce);WS(xe)}if(Et(ae)){const xe=se(qS);Et(ce)||(xe.status="fulfilled",xe.value=!0),WS(xe)}else throw ae}return{mutate:pe,get data(){return Q.data=!0,ce},get error(){return Q.error=!0,ae},get isValidating(){return Q.isValidating=!0,te},get isLoading(){return Q.isLoading=!0,le}}},A8=aae(lae);class uae extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const dae=A8.default||A8,hae="https://react-tweet.vercel.app";async function fae([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new uae({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const pae=(t,e,n)=>{const{isLoading:r,data:s,error:i}=dae(()=>e||t?[e||t&&`${hae}/api/tweet/${t}`,n]:null,fae,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},gae=({id:t,apiUrl:e,fallback:n=m.jsx(Aoe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=pae(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||voe;return m.jsx(l,{error:i?i(a):a})}return m.jsx(yoe,{tweet:o,components:r})};var SC={exports:{}},e7={},t7={exports:{}},mae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yae=mae,wae=yae;function n7(){}function r7(){}r7.resetWarningCache=n7;var bae=function(){function t(r,s,i,o,a,c){if(c!==wae){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:r7,resetWarningCache:n7};return n.PropTypes=n,n};t7.exports=bae();var s7=t7.exports;function i7(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=i7(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function S8(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=i7(t))&&(r&&(r+=" "),r+=e);return r}const vae=Object.freeze(Object.defineProperty({__proto__:null,clsx:S8,default:S8},Symbol.toStringTag,{value:"Module"})),Eae=Jx(vae);var Pn={},Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.dontSetMe=Sae;Ja.findInArray=_ae;Ja.int=Aae;Ja.isFunction=xae;Ja.isNum=Cae;function _ae(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function xae(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Cae(t){return typeof t=="number"&&!isNaN(t)}function Aae(t){return parseInt(t,10)}function Sae(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var Ff={};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.browserPrefixToKey=a7;Ff.browserPrefixToStyle=Iae;Ff.default=void 0;Ff.getPrefix=o7;const GS=["Moz","Webkit","O","ms"];function o7(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<GS.length;r++)if(a7(e,GS[r])in n)return GS[r];return""}function a7(t,e){return e?"".concat(e).concat(Tae(t)):t}function Iae(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function Tae(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Ff.default=o7();Object.defineProperty(Pn,"__esModule",{value:!0});Pn.addClassName=u7;Pn.addEvent=kae;Pn.addUserSelectStyles=zae;Pn.createCSSTransform=Lae;Pn.createSVGTransform=Mae;Pn.getTouch=jae;Pn.getTouchIdentifier=Fae;Pn.getTranslation=lR;Pn.innerHeight=$ae;Pn.innerWidth=Uae;Pn.matchesSelector=l7;Pn.matchesSelectorAndParentsTo=Pae;Pn.offsetXYFromParent=Bae;Pn.outerHeight=Rae;Pn.outerWidth=Dae;Pn.removeClassName=d7;Pn.removeEvent=Oae;Pn.removeUserSelectStyles=Hae;var Si=Ja,I8=Nae(Ff);function c7(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(c7=function(r){return r?n:e})(t)}function Nae(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=c7(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let B1="";function l7(t,e){return B1||(B1=(0,Si.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Si.isFunction)(t[n])})),(0,Si.isFunction)(t[B1])?t[B1](e):!1}function Pae(t,e,n){let r=t;do{if(l7(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function kae(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Oae(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Rae(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Si.int)(n.borderTopWidth),e+=(0,Si.int)(n.borderBottomWidth),e}function Dae(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Si.int)(n.borderLeftWidth),e+=(0,Si.int)(n.borderRightWidth),e}function $ae(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Si.int)(n.paddingTop),e-=(0,Si.int)(n.paddingBottom),e}function Uae(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Si.int)(n.paddingLeft),e-=(0,Si.int)(n.paddingRight),e}function Bae(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Lae(t,e){const n=lR(t,e,"px");return{[(0,I8.browserPrefixToKey)("transform",I8.default)]:n}}function Mae(t,e){return lR(t,e,"")}function lR(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function jae(t,e){return t.targetTouches&&(0,Si.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Si.findInArray)(t.changedTouches,n=>e===n.identifier)}function Fae(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function zae(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&u7(t.body,"react-draggable-transparent-selection")}function Hae(t){if(t)try{if(t.body&&d7(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function u7(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function d7(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.canDragX=Gae;Ya.canDragY=Vae;Ya.createCoreData=Qae;Ya.createDraggableData=Jae;Ya.getBoundPosition=Wae;Ya.getControlPosition=Kae;Ya.snapToGrid=qae;var li=Ja,tg=Pn;function Wae(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Yae(r);const s=uR(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,li.int)(u.paddingLeft)+(0,li.int)(l.marginLeft),top:-s.offsetTop+(0,li.int)(u.paddingTop)+(0,li.int)(l.marginTop),right:(0,tg.innerWidth)(c)-(0,tg.outerWidth)(s)-s.offsetLeft+(0,li.int)(u.paddingRight)-(0,li.int)(l.marginRight),bottom:(0,tg.innerHeight)(c)-(0,tg.outerHeight)(s)-s.offsetTop+(0,li.int)(u.paddingBottom)-(0,li.int)(l.marginBottom)}}return(0,li.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,li.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,li.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,li.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function qae(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Gae(t){return t.props.axis==="both"||t.props.axis==="x"}function Vae(t){return t.props.axis==="both"||t.props.axis==="y"}function Kae(t,e,n){const r=typeof e=="number"?(0,tg.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=uR(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,tg.offsetXYFromParent)(r||t,i,n.props.scale)}function Qae(t,e,n){const r=!(0,li.isNum)(t.lastX),s=uR(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Jae(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Yae(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function uR(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var IC={},TC={};Object.defineProperty(TC,"__esModule",{value:!0});TC.default=Zae;function Zae(){}Object.defineProperty(IC,"__esModule",{value:!0});IC.default=void 0;var VS=ece(D),As=dR(s7),Xae=dR(TO),jr=Pn,vl=Ya,KS=Ja,Jy=dR(TC);function dR(t){return t&&t.__esModule?t:{default:t}}function h7(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(h7=function(r){return r?n:e})(t)}function ece(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=h7(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function rs(t,e,n){return e=tce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tce(t){var e=nce(t,"string");return typeof e=="symbol"?e:String(e)}function nce(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const wo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let El=wo.mouse,NC=class extends VS.Component{constructor(){super(...arguments),rs(this,"dragging",!1),rs(this,"lastX",NaN),rs(this,"lastY",NaN),rs(this,"touchIdentifier",null),rs(this,"mounted",!1),rs(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,jr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,jr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,jr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,vl.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,vl.createCoreData)(this,o,a);(0,Jy.default)("DraggableCore: handleDragStart: %j",c),(0,Jy.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,jr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,jr.addEvent)(r,El.move,this.handleDrag),(0,jr.addEvent)(r,El.stop,this.handleDragStop))}),rs(this,"handleDrag",e=>{const n=(0,vl.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,vl.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,vl.createCoreData)(this,r,s);if((0,Jy.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),rs(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,vl.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,vl.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,vl.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,jr.removeUserSelectStyles)(a.ownerDocument),(0,Jy.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Jy.default)("DraggableCore: Removing handlers"),(0,jr.removeEvent)(a.ownerDocument,El.move,this.handleDrag),(0,jr.removeEvent)(a.ownerDocument,El.stop,this.handleDragStop))}),rs(this,"onMouseDown",e=>(El=wo.mouse,this.handleDragStart(e))),rs(this,"onMouseUp",e=>(El=wo.mouse,this.handleDragStop(e))),rs(this,"onTouchStart",e=>(El=wo.touch,this.handleDragStart(e))),rs(this,"onTouchEnd",e=>(El=wo.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,jr.addEvent)(e,wo.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,jr.removeEvent)(n,wo.mouse.move,this.handleDrag),(0,jr.removeEvent)(n,wo.touch.move,this.handleDrag),(0,jr.removeEvent)(n,wo.mouse.stop,this.handleDragStop),(0,jr.removeEvent)(n,wo.touch.stop,this.handleDragStop),(0,jr.removeEvent)(e,wo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,jr.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:Xae.default.findDOMNode(this)}render(){return VS.cloneElement(VS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};IC.default=NC;rs(NC,"displayName","DraggableCore");rs(NC,"propTypes",{allowAnyClick:As.default.bool,children:As.default.node.isRequired,disabled:As.default.bool,enableUserSelectHack:As.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:As.default.arrayOf(As.default.number),handle:As.default.string,cancel:As.default.string,nodeRef:As.default.object,onStart:As.default.func,onDrag:As.default.func,onStop:As.default.func,onMouseDown:As.default.func,scale:As.default.number,className:KS.dontSetMe,style:KS.dontSetMe,transform:KS.dontSetMe});rs(NC,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(D),n=u(s7),r=u(TO),s=u(Eae),i=Pn,o=Ya,a=Ja,c=u(IC),l=u(TC);function u(v){return v&&v.__esModule?v:{default:v}}function d(v){if(typeof WeakMap!="function")return null;var b=new WeakMap,x=new WeakMap;return(d=function(_){return _?x:b})(v)}function h(v,b){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var x=d(b);if(x&&x.has(v))return x.get(v);var _={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in v)if(A!=="default"&&Object.prototype.hasOwnProperty.call(v,A)){var T=C?Object.getOwnPropertyDescriptor(v,A):null;T&&(T.get||T.set)?Object.defineProperty(_,A,T):_[A]=v[A]}return _.default=v,x&&x.set(v,_),_}function f(){return f=Object.assign?Object.assign.bind():function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},f.apply(this,arguments)}function p(v,b,x){return b=g(b),b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function g(v){var b=y(v,"string");return typeof b=="symbol"?b:String(b)}function y(v,b){if(typeof v!="object"||v===null)return v;var x=v[Symbol.toPrimitive];if(x!==void 0){var _=x.call(v,b);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(v)}class w extends e.Component{static getDerivedStateFromProps(b,x){let{position:_}=b,{prevPropsPosition:C}=x;return _&&(!C||_.x!==C.x||_.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:C}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(b){super(b),p(this,"onDragStart",(x,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(x,(0,o.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(x,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const C=(0,o.createDraggableData)(this,_),A={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:S,y:k}=A;A.x+=this.state.slackX,A.y+=this.state.slackY;const[R,F]=(0,o.getBoundPosition)(this,A.x,A.y);A.x=R,A.y=F,A.slackX=this.state.slackX+(S-A.x),A.slackY=this.state.slackY+(k-A.y),C.x=A.x,C.y=A.y,C.deltaX=A.x-this.state.x,C.deltaY=A.y-this.state.y}if(this.props.onDrag(x,C)===!1)return!1;this.setState(A)}),p(this,"onDragStop",(x,_)=>{if(!this.state.dragging||this.props.onStop(x,(0,o.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const A={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:S,y:k}=this.props.position;A.x=S,A.y=k}this.setState(A)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var b,x;return(b=(x=this.props)===null||x===void 0||(x=x.nodeRef)===null||x===void 0?void 0:x.current)!==null&&b!==void 0?b:r.default.findDOMNode(this)}render(){const{axis:b,bounds:x,children:_,defaultPosition:C,defaultClassName:A,defaultClassNameDragging:T,defaultClassNameDragged:S,position:k,positionOffset:R,scale:F,...W}=this.props;let Q={},I=null;const M=!!!k||this.state.dragging,B=k||C,$={x:(0,o.canDragX)(this)&&M?this.state.x:B.x,y:(0,o.canDragY)(this)&&M?this.state.y:B.y};this.state.isElementSVG?I=(0,i.createSVGTransform)($,R):Q=(0,i.createCSSTransform)($,R);const j=(0,s.default)(_.props.className||"",A,{[T]:this.state.dragging,[S]:this.state.dragged});return e.createElement(c.default,f({},W,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:j,style:{..._.props.style,...Q},transform:I}))}}t.default=w,p(w,"displayName","Draggable"),p(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(e7);const{default:f7,DraggableCore:rce}=e7;SC.exports=f7;SC.exports.default=f7;SC.exports.DraggableCore=rce;var sce=SC.exports;const Pv=Bf(sce);function vn(){return vn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vn.apply(null,arguments)}function p7(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var g7={exports:{}},Wt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gr=typeof Symbol=="function"&&Symbol.for,hR=gr?Symbol.for("react.element"):60103,fR=gr?Symbol.for("react.portal"):60106,PC=gr?Symbol.for("react.fragment"):60107,kC=gr?Symbol.for("react.strict_mode"):60108,OC=gr?Symbol.for("react.profiler"):60114,RC=gr?Symbol.for("react.provider"):60109,DC=gr?Symbol.for("react.context"):60110,pR=gr?Symbol.for("react.async_mode"):60111,$C=gr?Symbol.for("react.concurrent_mode"):60111,UC=gr?Symbol.for("react.forward_ref"):60112,BC=gr?Symbol.for("react.suspense"):60113,ice=gr?Symbol.for("react.suspense_list"):60120,LC=gr?Symbol.for("react.memo"):60115,MC=gr?Symbol.for("react.lazy"):60116,oce=gr?Symbol.for("react.block"):60121,ace=gr?Symbol.for("react.fundamental"):60117,cce=gr?Symbol.for("react.responder"):60118,lce=gr?Symbol.for("react.scope"):60119;function Oi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case hR:switch(t=t.type,t){case pR:case $C:case PC:case OC:case kC:case BC:return t;default:switch(t=t&&t.$$typeof,t){case DC:case UC:case MC:case LC:case RC:return t;default:return e}}case fR:return e}}}function m7(t){return Oi(t)===$C}Wt.AsyncMode=pR;Wt.ConcurrentMode=$C;Wt.ContextConsumer=DC;Wt.ContextProvider=RC;Wt.Element=hR;Wt.ForwardRef=UC;Wt.Fragment=PC;Wt.Lazy=MC;Wt.Memo=LC;Wt.Portal=fR;Wt.Profiler=OC;Wt.StrictMode=kC;Wt.Suspense=BC;Wt.isAsyncMode=function(t){return m7(t)||Oi(t)===pR};Wt.isConcurrentMode=m7;Wt.isContextConsumer=function(t){return Oi(t)===DC};Wt.isContextProvider=function(t){return Oi(t)===RC};Wt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hR};Wt.isForwardRef=function(t){return Oi(t)===UC};Wt.isFragment=function(t){return Oi(t)===PC};Wt.isLazy=function(t){return Oi(t)===MC};Wt.isMemo=function(t){return Oi(t)===LC};Wt.isPortal=function(t){return Oi(t)===fR};Wt.isProfiler=function(t){return Oi(t)===OC};Wt.isStrictMode=function(t){return Oi(t)===kC};Wt.isSuspense=function(t){return Oi(t)===BC};Wt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===PC||t===$C||t===OC||t===kC||t===BC||t===ice||typeof t=="object"&&t!==null&&(t.$$typeof===MC||t.$$typeof===LC||t.$$typeof===RC||t.$$typeof===DC||t.$$typeof===UC||t.$$typeof===ace||t.$$typeof===cce||t.$$typeof===lce||t.$$typeof===oce)};Wt.typeOf=Oi;g7.exports=Wt;var uce=g7.exports,gR=uce,dce={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hce={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},fce={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},y7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mR={};mR[gR.ForwardRef]=fce;mR[gR.Memo]=y7;function T8(t){return gR.isMemo(t)?y7:mR[t.$$typeof]||dce}var pce=Object.defineProperty,gce=Object.getOwnPropertyNames,N8=Object.getOwnPropertySymbols,mce=Object.getOwnPropertyDescriptor,yce=Object.getPrototypeOf,P8=Object.prototype;function w7(t,e,n){if(typeof e!="string"){if(P8){var r=yce(e);r&&r!==P8&&w7(t,r,n)}var s=gce(e);N8&&(s=s.concat(N8(e)));for(var i=T8(t),o=T8(e),a=0;a<s.length;++a){var c=s[a];if(!hce[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=mce(e,c);try{pce(t,c,l)}catch{}}}}return t}var wce=w7;const bce=Bf(wce);var b7={};Object.defineProperty(b7,"__esModule",{value:!0});b7.default=vce;function vce(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function L1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X_(){return X_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X_.apply(this,arguments)}function Ece(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _l(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _ce(t){var e=function(n){Ece(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,L1(_l(_l(i)),"cachedTheme",void 0),L1(_l(_l(i)),"lastOuterTheme",void 0),L1(_l(_l(i)),"lastTheme",void 0),L1(_l(_l(i)),"renderProvider",function(l){var u=i.props.children;return xi.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?X_({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?xi.createElement(t.Consumer,null,this.renderProvider):null},r}(xi.Component);return e}function xce(t){return function(n){var r=xi.forwardRef(function(s,i){return xi.createElement(t.Consumer,null,function(o){return xi.createElement(n,X_({theme:o,ref:i},s))})});return bce(r,n),r}}function Cce(t){var e=function(){var r=xi.useContext(t);return r};return e}function Ace(t){return{context:t,withTheme:xce(t),useTheme:Cce(t),ThemeProvider:_ce(t)}}var v7=D.createContext();Ace(v7);var k8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},py=(typeof window>"u"?"undefined":k8(window))==="object"&&(typeof document>"u"?"undefined":k8(document))==="object"&&document.nodeType===9;function ub(t){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(t)}function Sce(t,e){if(ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ub(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ice(t){var e=Sce(t,"string");return ub(e)=="symbol"?e:e+""}function Tce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ice(r.key),r)}}function yR(t,e,n){return e&&Tce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CN(t,e){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},CN(t,e)}function E7(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,CN(t,e)}function O8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Nce={}.constructor;function AN(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(AN);if(t.constructor!==Nce)return t;var e={};for(var n in t)e[n]=AN(t[n]);return e}function jC(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=AN(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var R8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},nf=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=R8(e[r]," ");else n=R8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function gy(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Yy(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function db(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=gy(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=Yy(f+":"+u+nf(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=Yy(g+":"+u+nf(y)+";",o))}for(var w in e){var v=e[w];v!=null&&w!=="fallbacks"&&(r&&(r+=l),r+=Yy(w+":"+u+nf(v)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),Yy(""+t+u+"{"+r,o)+Yy("}",o))}var Pce=/([[\].#*$><+~=|^:(),"'`\s])/g,D8=typeof CSS<"u"&&CSS.escape,wR=function(t){return D8?D8(t):t.replace(Pce,"\\$1")},_7=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),SN=function(t){E7(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(O8(O8(o)),l),o.selectorText="."+wR(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=nf(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?vn({},s,{allowEmpty:!0}):s;return db(this.selectorText,this.style,a)},yR(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(_7),kce={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new SN(e,n,r)}},QS={indent:1,children:!0},Oce=/@([\w-]+)/,Rce=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Oce);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new FC(vn({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=QS);var s=gy(r),i=s.linebreak;if(r.indent==null&&(r.indent=QS.indent),r.children==null&&(r.children=QS.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Dce=/@container|@media|@supports\s+/,$ce={onCreateRule:function(e,n,r){return Dce.test(e)?new Rce(e,n,r):null}},JS={indent:1,children:!0},Uce=/@keyframes\s+([\w-]+)/,IN=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Uce);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:wR(c(this,a)),this.rules=new FC(vn({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],vn({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=JS);var s=gy(r),i=s.linebreak;if(r.indent==null&&(r.indent=JS.indent),r.children==null&&(r.children=JS.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Bce=/@keyframes\s+/,Lce=/\$([\w-]+)/g,TN=function(e,n){return typeof e=="string"?e.replace(Lce,function(r,s){return s in n?n[s]:r}):e},$8=function(e,n,r){var s=e[n],i=TN(s,r);i!==s&&(e[n]=i)},Mce={onCreateRule:function(e,n,r){return typeof e=="string"&&Bce.test(e)?new IN(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&$8(e,"animation-name",r.keyframes),"animation"in e&&$8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return TN(e,s.keyframes);case"animation-name":return TN(e,s.keyframes);default:return e}}},jce=function(t){E7(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?vn({},s,{allowEmpty:!0}):s;return db(this.key,this.style,a)},e}(_7),Fce={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new jce(e,n,r):null}},zce=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=gy(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=db(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return db(this.at,this.style,r)},t}(),Hce=/@font-face/,Wce={onCreateRule:function(e,n,r){return Hce.test(e)?new zce(e,n,r):null}},qce=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return db(this.key,this.style,r)},t}(),Gce={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new qce(e,n,r):null}},Vce=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),Kce={"@charset":!0,"@import":!0,"@namespace":!0},Qce={onCreateRule:function(e,n,r){return e in Kce?new Vce(e,n,r):null}},U8=[kce,$ce,Mce,Fce,Wce,Gce,Qce],Jce={process:!0},B8={force:!0,process:!0},FC=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=vn({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+wR(this.classes[p]));var g=jC(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=vn({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof SN?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof IN&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof SN?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof IN&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=Jce);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,B8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,B8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=gy(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),x7=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=vn({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new FC(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),Yce=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Zce=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=p7(s,["attached"]),a=gy(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},yR(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),ew=new Zce,NN=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),PN="2f1acc6c3a606b082e5eef5e54414ffb";NN[PN]==null&&(NN[PN]=0);var L8=NN[PN]++,M8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+L8+a+n:c+i.key+"-"+L8+(a?"-"+a:"")+"-"+n};return r},C7=function(e){var n;return function(){return n||(n=e()),n}},Xce=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},ele=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=nf(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},tle=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},nle=function(e,n){return e.selectorText=n,e.selectorText===n},A7=C7(function(){return document.querySelector("head")});function rle(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function sle(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function ile(t){for(var e=A7(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function ole(t){var e=ew.registry;if(e.length>0){var n=rle(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=sle(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=ile(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function ale(t,e){var n=e.insertionPoint,r=ole(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}A7().appendChild(t)}var cle=C7(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),j8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},F8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},lle=function(){var e=document.createElement("style");return e.textContent=`
`,e},ule=function(){function t(n){this.getPropertyValue=Xce,this.setProperty=ele,this.removeProperty=tle,this.setSelector=nle,this.hasInsertedRules=!1,this.cssRules=[],n&&ew.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||lle(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=cle();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){ale(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=F8(i,s);if(a=j8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=F8(i,s),d=j8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof x7&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),dle=0,hle=function(){function t(n){this.id=dle++,this.version="10.10.0",this.plugins=new Yce,this.options={id:{minify:!1},createGenerateId:M8,Renderer:py?ule:null,plugins:[]},this.generateId=M8({minify:!1});for(var r=0;r<U8.length;r++)this.plugins.use(U8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=vn({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=ew.index===0?0:ew.index+1);var a=new x7(r,vn({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),ew.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=vn({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=jC(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),S7=function(e){return new hle(e)},z8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},yR(t,[{key:"size",get:function(){return this.length}}]),t}(),bR=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function I7(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=I7(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */S7();var T7=Date.now(),YS="fnValues"+T7,ZS="fnStyle"+ ++T7,fle=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=jC(n,{},s);return i[ZS]=r,i},onProcessStyle:function(n,r){if(YS in r||ZS in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[YS]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[ZS];a&&(o.style=a(n)||{});var c=o[YS];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function ple(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Dp;typeof self<"u"?Dp=self:typeof window<"u"?Dp=window:typeof global<"u"?Dp=global:typeof module<"u"?Dp=module:Dp=Function("return this")();var H8=ple(Dp),W8=function(e){return e&&e[H8]&&e===e[H8]()},gle=function(e){return{onCreateRule:function(r,s,i){if(!W8(s))return null;var o=s,a=jC(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!W8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},mle=/;\n/,yle=function(e){for(var n={},r=e.split(mle),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},wle=function(e){typeof e.style=="string"&&(e.style=yle(e.style))};function ble(){return{onProcessRule:wle}}var td="@global",kN="@global ",vle=function(){function t(n,r,s){this.type="global",this.at=td,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new FC(vn({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),Ele=function(){function t(n,r,s){this.type="global",this.at=td,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(kN.length);this.rule=s.jss.createRule(i,r,vn({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),_le=/\s*,\s*/g;function N7(t,e){for(var n=t.split(_le),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function xle(t,e){var n=t.options,r=t.style,s=r?r[td]:null;if(s){for(var i in s)e.addRule(i,s[i],vn({},n,{selector:N7(i,t.selector)}));delete r[td]}}function Cle(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,td.length)!==td)){var i=N7(s.substr(td.length),t.selector);e.addRule(i,r[s],vn({},n,{selector:i})),delete r[s]}}function Ale(){function t(n,r,s){if(!n)return null;if(n===td)return new vle(n,r,s);if(n[0]==="@"&&n.substr(0,kN.length)===kN)return new Ele(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(xle(n,r),Cle(n,r))}return{onCreateRule:t,onProcessRule:e}}var GE=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},XS="extendCurrValue"+Date.now();function Sle(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];ph(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?vn({},t,{extend:l}):t.extend[c];ph(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){ph(t.extend.extend,e,n,r);continue}if(GE(t.extend[d])){d in r||(r[d]={}),ph(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Ile(t,e,n,r){for(var s in t)if(s!=="extend"){if(GE(r[s])&&GE(t[s])){ph(t[s],e,n,r[s]);continue}if(GE(t[s])){r[s]=ph(t[s],e,n);continue}r[s]=t[s]}}function ph(t,e,n,r){return r===void 0&&(r={}),Sle(t,e,n,r),Ile(t,e,n,r),r}function Tle(){function t(n,r,s){return"extend"in n?ph(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[XS])s.prop(i,null);return s[XS]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[XS]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var q8=/\s*,\s*/g,Nle=/&/g,Ple=/\$([\w-]+)/g;function kle(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(q8),a=s.split(q8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Nle,u):u+" "+h}return c}function n(s,i,o){if(o)return vn({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=vn({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Ple,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],vn({},l,{selector:p})):c.addRule(g,s[d],vn({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function ON(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=ON(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return ON(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Ole(){function t(e,n){return"composes"in e&&(ON(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Rle=/[A-Z]/g,Dle=/^ms-/,e2={};function $le(t){return"-"+t.toLowerCase()}function P7(t){if(e2.hasOwnProperty(t))return e2[t];var e=t.replace(Rle,$le);return e2[t]=Dle.test(e)?"-"+e:e}function ex(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:P7(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(ex):e.fallbacks=ex(t.fallbacks)),e}function Ule(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=ex(n[r]);return n}return ex(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=P7(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ne=bR&&CSS?CSS.px:"px",M1=bR&&CSS?CSS.ms:"ms",ip=bR&&CSS?CSS.percent:"%",Ble={"animation-delay":M1,"animation-duration":M1,"background-position":ne,"background-position-x":ne,"background-position-y":ne,"background-size":ne,border:ne,"border-bottom":ne,"border-bottom-left-radius":ne,"border-bottom-right-radius":ne,"border-bottom-width":ne,"border-left":ne,"border-left-width":ne,"border-radius":ne,"border-right":ne,"border-right-width":ne,"border-top":ne,"border-top-left-radius":ne,"border-top-right-radius":ne,"border-top-width":ne,"border-width":ne,"border-block":ne,"border-block-end":ne,"border-block-end-width":ne,"border-block-start":ne,"border-block-start-width":ne,"border-block-width":ne,"border-inline":ne,"border-inline-end":ne,"border-inline-end-width":ne,"border-inline-start":ne,"border-inline-start-width":ne,"border-inline-width":ne,"border-start-start-radius":ne,"border-start-end-radius":ne,"border-end-start-radius":ne,"border-end-end-radius":ne,margin:ne,"margin-bottom":ne,"margin-left":ne,"margin-right":ne,"margin-top":ne,"margin-block":ne,"margin-block-end":ne,"margin-block-start":ne,"margin-inline":ne,"margin-inline-end":ne,"margin-inline-start":ne,padding:ne,"padding-bottom":ne,"padding-left":ne,"padding-right":ne,"padding-top":ne,"padding-block":ne,"padding-block-end":ne,"padding-block-start":ne,"padding-inline":ne,"padding-inline-end":ne,"padding-inline-start":ne,"mask-position-x":ne,"mask-position-y":ne,"mask-size":ne,height:ne,width:ne,"min-height":ne,"max-height":ne,"min-width":ne,"max-width":ne,bottom:ne,left:ne,top:ne,right:ne,inset:ne,"inset-block":ne,"inset-block-end":ne,"inset-block-start":ne,"inset-inline":ne,"inset-inline-end":ne,"inset-inline-start":ne,"box-shadow":ne,"text-shadow":ne,"column-gap":ne,"column-rule":ne,"column-rule-width":ne,"column-width":ne,"font-size":ne,"font-size-delta":ne,"letter-spacing":ne,"text-decoration-thickness":ne,"text-indent":ne,"text-stroke":ne,"text-stroke-width":ne,"word-spacing":ne,motion:ne,"motion-offset":ne,outline:ne,"outline-offset":ne,"outline-width":ne,perspective:ne,"perspective-origin-x":ip,"perspective-origin-y":ip,"transform-origin":ip,"transform-origin-x":ip,"transform-origin-y":ip,"transform-origin-z":ip,"transition-delay":M1,"transition-duration":M1,"vertical-align":ne,"flex-basis":ne,"shape-margin":ne,size:ne,gap:ne,grid:ne,"grid-gap":ne,"row-gap":ne,"grid-row-gap":ne,"grid-column-gap":ne,"grid-template-rows":ne,"grid-template-columns":ne,"grid-auto-rows":ne,"grid-auto-columns":ne,"box-shadow-x":ne,"box-shadow-y":ne,"box-shadow-blur":ne,"box-shadow-spread":ne,"font-line-height":ne,"text-shadow-x":ne,"text-shadow-y":ne,"text-shadow-blur":ne};function k7(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Lle=k7(Ble);function tw(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=tw(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=tw(s,e[s],n);else for(var i in e)e[i]=tw(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Lle[t];return o&&!(e===0&&o===ne)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Mle(t){t===void 0&&(t={});var e=k7(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=tw(o,s[o],e);return s}function r(s,i){return tw(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var jle={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Fle={position:!0,size:!0},j1={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},t2={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function zle(t,e,n){return t.map(function(r){return R7(r,e,n,!1,!0)})}function O7(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?O7(t[0],e,n,r):typeof t[0]=="object"?zle(t,e,r):[t]}function R7(t,e,n,r,s){if(!(j1[e]||t2[e]))return[];var i=[];if(t2[e]&&(t=Hle(t,n,t2[e],r)),Object.keys(t).length)for(var o in j1[e]){if(t[o]){Array.isArray(t[o])?i.push(Fle[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}j1[e][o]!=null&&i.push(j1[e][o])}return!i.length||s?i:[i]}function Hle(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=hb((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function hb(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=hb(t.fallbacks[i],e,!0);continue}t[r]=O7(s,r,jle,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=hb(t.fallbacks,e,!0);continue}t[r]=R7(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function Wle(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=hb(e[r],n);return e}return hb(e,n)}return{onProcessStyle:t}}function RN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function qle(t){if(Array.isArray(t))return RN(t)}function Gle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vle(t,e){if(t){if(typeof t=="string")return RN(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RN(t,e):void 0}}function Kle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qle(t){return qle(t)||Gle(t)||Vle(t)||Kle()}var I0="",DN="",D7="",$7="",Jle=py&&"ontouchstart"in document.documentElement;if(py){var n2={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Yle=document.createElement("p"),r2=Yle.style,Zle="Transform";for(var s2 in n2)if(s2+Zle in r2){I0=s2,DN=n2[s2];break}I0==="Webkit"&&"msHyphens"in r2&&(I0="ms",DN=n2.ms,$7="edge"),I0==="Webkit"&&"-apple-trailing-word"in r2&&(D7="apple")}var rt={js:I0,css:DN,vendor:D7,browser:$7,isTouch:Jle};function Xle(t){return t[1]==="-"||rt.js==="ms"?t:"@"+rt.css+"keyframes"+t.substr(10)}var eue={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:rt.js==="ms"?"-webkit-"+e:rt.css+e}},tue={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:rt.js==="Webkit"?rt.css+"print-"+e:e}},nue=/[-\s]+(.)?/g;function rue(t,e){return e?e.toUpperCase():""}function vR(t){return t.replace(nue,rue)}function gd(t){return vR("-"+t)}var sue={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(rt.js==="Webkit"){var r="mask-image";if(vR(r)in n)return e;if(rt.js+gd(r)in n)return rt.css+e}return e}},iue={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:rt.vendor==="apple"&&!rt.isTouch?rt.css+e:e}},oue={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:rt.css+e}},aue={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:rt.css+e}},cue={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:rt.js==="Webkit"||rt.js==="ms"&&rt.browser!=="edge"?rt.css+e:e}},lue={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:rt.js==="Moz"||rt.js==="ms"||rt.vendor==="apple"?rt.css+e:e}},uue={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(rt.js==="Webkit"){var r="WebkitColumn"+gd(e);return r in n?rt.css+"column-"+e:!1}if(rt.js==="Moz"){var s="page"+gd(e);return s in n?"page-"+e:!1}return!1}},due={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(rt.js==="Moz")return e;var r=e.replace("-inline","");return rt.js+gd(r)in n?rt.css+r:!1}},hue={supportedProperty:function(e,n){return vR(e)in n?e:!1}},fue={supportedProperty:function(e,n){var r=gd(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:rt.js+r in n?rt.css+e:rt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},pue={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:rt.js==="ms"?""+rt.css+e:e}},gue={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:rt.js==="ms"?rt.css+"scroll-chaining":e}},mue={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},yue={supportedProperty:function(e,n){var r=mue[e];return r&&rt.js+gd(r)in n?rt.css+r:!1}},U7={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},wue=Object.keys(U7),bue=function(e){return rt.css+e},vue={supportedProperty:function(e,n,r){var s=r.multiple;if(wue.indexOf(e)>-1){var i=U7[e];if(!Array.isArray(i))return rt.js+gd(i)in n?rt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(rt.js+gd(i[0])in n))return!1;return i.map(bue)}return!1}},B7=[eue,tue,sue,iue,oue,aue,cue,lue,uue,due,hue,fue,pue,gue,yue,vue],G8=B7.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),Eue=B7.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Qle(e.noPrefill)),t},[]),T0,Zd={};if(py){T0=document.createElement("p");var i2=window.getComputedStyle(document.documentElement,"");for(var o2 in i2)isNaN(o2)||(Zd[i2[o2]]=i2[o2]);Eue.forEach(function(t){return delete Zd[t]})}function $N(t,e){if(e===void 0&&(e={}),!T0)return t;if(Zd[t]!=null)return Zd[t];(t==="transition"||t==="transform")&&(e[t]=t in T0.style);for(var n=0;n<G8.length&&(Zd[t]=G8[n](t,T0.style,e),!Zd[t]);n++);try{T0.style[t]=""}catch{return!1}return Zd[t]}var op={},_ue={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},xue=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,zl;function Cue(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?$N(e):", "+$N(n);return r||e||n}py&&(zl=document.createElement("p"));function V8(t,e){var n=e;if(!zl||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(op[r]!=null)return op[r];try{zl.style[t]=n}catch{return op[r]=!1,!1}if(_ue[t])n=n.replace(xue,Cue);else if(zl.style[t]===""&&(n=rt.css+n,n==="-ms-flex"&&(zl.style[t]="-ms-flexbox"),zl.style[t]=n,zl.style[t]===""))return op[r]=!1,!1;return zl.style[t]="",op[r]=n,op[r]}function Aue(){function t(s){if(s.type==="keyframes"){var i=s;i.at=Xle(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=$N(i);c&&c!==i&&(a=!0);var l=!1,u=V8(c,nf(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return V8(i,nf(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Sue(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Iue=function(e){return e===void 0&&(e={}),{plugins:[fle(),gle(e.observable),ble(),Ale(),Tle(),kle(),Ole(),Ule(),Mle(e.defaultUnit),Wle(),Aue(),Sue()]}},Tue=Number.MIN_SAFE_INTEGER||-1e9,Nue=function(){return Tue++},Pue=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!py}),K8=new Map,ER=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new z8),r[n];var s=K8.get(n);return s||(s=new z8,K8.set(n,s)),s},Q8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=ER(r,s);o.manage(i),r.registry&&r.registry.add(n)}},kue=function(e){if(e.sheet){var n=ER(e.context,e.index);n.unmanage(e.theme)}},Oue=S7(Iue()),L7=new WeakMap,M7=function(e){return L7.get(e)},Rue=function(e,n){L7.set(e,n)},Due=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function $ue(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",vn({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Uue=function(e){if(!e.context.disableStylesGeneration){var n=ER(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Oue,i=Due(e),o=I7(i),a=s.createStyleSheet(i,$ue(e,o!==null));return Rue(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Bue=function(e,n){for(var r in n)e.deleteRule(n[r])},Lue=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Mue=function(e,n){var r=M7(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},jue=function(e,n){if(!n)return e.classes;var r=M7(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function J8(t){return t?D.useEffect:xi.useInsertionEffect||D.useLayoutEffect}var a2={},na=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Nue():s,o=r.theming,a=r.name,c=p7(r,["index","theming","name"]),l=o&&o.context||v7,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||a2},d={};return function(f){var p=D.useRef(!0),g=D.useContext(Pue),y=u(f&&f.theme),w=D.useMemo(function(){var _=Uue({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return _&&g.isSSR&&Q8({index:i,context:g,sheet:_,theme:y}),[_,_?Mue(_,f):null]},[g,y]),v=w[0],b=w[1];J8(g.isSSR)(function(){v&&b&&!p.current&&Lue(f,v,b)},[f]),J8(g.isSSR)(function(){return v&&Q8({index:i,context:g,sheet:v,theme:y}),function(){v&&(kue({index:i,context:g,sheet:v,theme:y}),b&&Bue(v,b))}},[v]);var x=D.useMemo(function(){return v&&b?jue(v,b):d},[v,b]);return D.useDebugValue(x),D.useDebugValue(y===a2?"No theme":y),D.useEffect(function(){p.current=!1}),x}};const Fue=na({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function c2({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Fue(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(Pv,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const zue=na({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Fi({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=zue({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(Pv,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const l2=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],Hue=80,Wue=80,que=10,Gue=10,Vue=10,Kue=10,Que=({onIconClick:t})=>{const e=l2.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:Vue+d*(Hue+que),y:Kue+u*(Wue+Gue)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(c2,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(Fi,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:l2.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(c2,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(Fi,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:l2.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(c2,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},Jue=na({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),Yue=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=Jue({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function j7(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function _R(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function F7(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function xR(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function z7(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function H7(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function Zue(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const Xue=na({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),ede=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Xue({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),{data:y}=B9();D.useEffect(()=>{t&&r&&w()},[t,r]);const w=async()=>{l(!0),g(null);try{const C=await j7(r);a(C);const A={};C.forEach(T=>{A[T.id]=0}),f(A)}catch(C){g(C.message)}finally{l(!1)}},v=(C,A)=>{f(T=>({...T,[C]:Math.max(0,A)}))},b=async()=>{const C=Object.entries(h).filter(([,A])=>A>0).map(([A,T])=>({id:A,quantity:T}));if(C.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const A=await F7(r,C);if(console.log("Mint API result:",A),A.success&&A.mintTransaction){console.log("Got mint transaction:",A.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await y.sendTransaction({to:A.mintTransaction.to,value:BigInt(A.mintTransaction.value),data:A.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(A.message||"Could not retrieve minting transaction.")}catch(A){console.error("Minting failed:",A),g("Minting failed: "+A.message)}finally{d(!1)}},x=(C,A)=>`${parseFloat(C)} ${A}`,_=()=>{n&&n()};return t?m.jsx(Pv,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:_,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(C=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:C.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",x(C.token_price,C.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",C.wallet_limit===4294967295?"Unlimited":C.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:C.wallet_limit===4294967295?999:C.wallet_limit,value:h[C.id]||0,onChange:A=>v(C.id,parseInt(A.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},C.id))]}),m.jsx("button",{onClick:b,disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},tde=na({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),nde=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},rde=({nft:t,onClose:e})=>{const n=tde(),r=D.useRef(null),s=nde(t.attributes);return m.jsx(Pv,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},sde=Symbol(),Y8=Object.getPrototypeOf,UN=new WeakMap,ide=t=>t&&(UN.has(t)?UN.get(t):Y8(t)===Object.prototype||Y8(t)===Array.prototype),ode=t=>ide(t)&&t[sde]||null,Z8=(t,e=!0)=>{UN.set(t,e)},tx={},u2=t=>typeof t=="object"&&t!==null,Ql=new WeakMap,N0=new WeakSet,ade=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>u2(l)&&!N0.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return Z8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),w={value:g,enumerable:y,configurable:!0};if(N0.has(g))Z8(g,!1);else if(g instanceof Promise)delete w.value,w.get=()=>d(g);else if(Ql.has(g)){const[v,b]=Ql.get(g);w.value=i(v,b(),d)}Object.defineProperty(f,p,w)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!u2(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,k=++a[0])=>{d!==k&&(d=k,h.forEach(R=>R(S,k)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,w.forEach(([k])=>{const R=k[1](S);R>d&&(d=R)})),d),y=S=>(k,R)=>{const F=[...k];F[1]=[S,...F[1]],f(F,R)},w=new Map,v=(S,k)=>{if((tx?"production":void 0)!=="production"&&w.has(S))throw new Error("prop listener already exists");if(h.size){const R=k[3](y(S));w.set(S,[k,R])}else w.set(S,[k])},b=S=>{var k;const R=w.get(S);R&&(w.delete(S),(k=R[1])==null||k.call(R))},x=S=>(h.add(S),h.size===1&&w.forEach(([R,F],W)=>{if((tx?"production":void 0)!=="production"&&F)throw new Error("remove already exists");const Q=R[3](y(W));w.set(W,[R,Q])}),()=>{h.delete(S),h.size===0&&w.forEach(([R,F],W)=>{F&&(F(),w.set(W,[R]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),A=e(_,{deleteProperty(S,k){const R=Reflect.get(S,k);b(k);const F=Reflect.deleteProperty(S,k);return F&&f(["delete",[k],R]),F},set(S,k,R,F){const W=Reflect.has(S,k),Q=Reflect.get(S,k,F);if(W&&(t(Q,R)||o.has(R)&&t(Q,o.get(R))))return!0;b(k),u2(R)&&(R=ode(R)||R);let I=R;if(R instanceof Promise)R.then(N=>{R.status="fulfilled",R.value=N,f(["resolve",[k],N])}).catch(N=>{R.status="rejected",R.reason=N,f(["reject",[k],N])});else{!Ql.has(R)&&n(R)&&(I=c(R));const N=!N0.has(I)&&Ql.get(I);N&&v(k,N)}return Reflect.set(S,k,I,F),f(["set",[k],R,Q]),!0}});o.set(l,A);const T=[_,g,i,x];return Ql.set(A,T),Reflect.ownKeys(l).forEach(S=>{const k=Object.getOwnPropertyDescriptor(l,S);"value"in k&&(A[S]=l[S],delete k.value,delete k.writable),Object.defineProperty(_,S,k)}),A})=>[c,Ql,N0,t,e,n,r,s,i,o,a],[cde]=ade();function an(t={}){return cde(t)}function Rr(t,e,n){const r=Ql.get(t);(tx?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function fb(t,e){const n=Ql.get(t);(tx?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Ef(t){return N0.add(t),t}function Dr(t,e,n,r){let s=t[e];return Rr(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function lde(t){const e=an({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var X8={};const ie={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof X8<"u"?X8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},pb={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ie.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var ude=20,dde=1,_f=1e6,e5=1e6,hde=-7,fde=21,pde=!1,kv="[big.js] ",zf=kv+"Invalid ",zC=zf+"decimal places",gde=zf+"rounding mode",W7=kv+"Division by zero",Ht={},Ma=void 0,mde=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function q7(){function t(e){var n=this;if(!(n instanceof t))return e===Ma?q7():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(zf+"value");e=e===0&&1/e<0?"-0":String(e)}yde(n,e)}n.constructor=t}return t.prototype=Ht,t.DP=ude,t.RM=dde,t.NE=hde,t.PE=fde,t.strict=pde,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function yde(t,e){var n,r,s;if(!mde.test(e))throw Error(zf+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Hf(t,e,n,r){var s=t.c;if(n===Ma&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(gde);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Ma))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Ma||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Wf(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Ht.abs=function(){var t=new this.constructor(this);return t.s=1,t};Ht.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Ht.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>_f)throw Error(zC);if(!s[0])throw Error(W7);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,w=t,v=w.c=[],b=0,x=o+(w.e=e.e-t.e)+1;for(w.s=i,i=x<0?0:x,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}v[b++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Ma)&&i--);return!v[0]&&b!=1&&(v.shift(),w.e--,x--),b>x&&Hf(w,x,n.RM,g[0]!==Ma),w};Ht.eq=function(t){return this.cmp(t)===0};Ht.gt=function(t){return this.cmp(t)>0};Ht.gte=function(t){return this.cmp(t)>-1};Ht.lt=function(t){return this.cmp(t)<0};Ht.lte=function(t){return this.cmp(t)<1};Ht.minus=Ht.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Ht.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(W7);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Ht.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Ht.plus=Ht.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Ht.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-e5||t>e5)throw Error(zf+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Ht.prec=function(t,e){if(t!==~~t||t<1||t>_f)throw Error(zf+"precision");return Hf(new this.constructor(this),t,e)};Ht.round=function(t,e){if(t===Ma)t=0;else if(t!==~~t||t<-_f||t>_f)throw Error(zC);return Hf(new this.constructor(this),t+this.e+1,e)};Ht.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(kv+"No square root");i=Math.sqrt(+Wf(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Hf(t,(s.DP-=4)+t.e+1,s.RM)};Ht.times=Ht.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Ht.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Ma){if(t!==~~t||t<0||t>_f)throw Error(zC);for(n=Hf(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Wf(n,!0,!!r)};Ht.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Ma){if(t!==~~t||t<0||t>_f)throw Error(zC);for(n=Hf(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Wf(n,!1,!!r)};Ht[Symbol.for("nodejs.util.inspect.custom")]=Ht.toJSON=Ht.toString=function(){var t=this,e=t.constructor;return Wf(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Ht.toNumber=function(){var t=+Wf(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(kv+"Imprecise conversion");return t};Ht.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Ma){if(t!==~~t||t<1||t>_f)throw Error(zf+"precision");for(n=Hf(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Wf(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Ht.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(kv+"valueOf disallowed");return Wf(t,t.e<=e.NE||t.e>=e.PE,!0)};var Zy=q7();const wde={bigNumber(t){return t?new Zy(t):new Zy(0)},multiply(t,e){if(t===void 0||e===void 0)return new Zy(0);const n=new Zy(t),r=new Zy(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},bde=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],vde=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Ede=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],_de={getERC20Abi:t=>ie.USDT_CONTRACT_ADDRESSES.includes(t)?Ede:bde,getSwapAbi:()=>vde},wi={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ye={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function d2(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Ke={setItem(t,e){P0()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(P0())return localStorage.getItem(t)||void 0},removeItem(t){P0()&&localStorage.removeItem(t)},clear(){P0()&&localStorage.clear()}};function P0(){return typeof window<"u"&&typeof localStorage<"u"}function Mc(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var t5={};const h2=(typeof process<"u"&&typeof t5<"u"?t5.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",G7=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],xde="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",jt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:h2,SECURE_SITE_DASHBOARD:`${h2}/dashboard`,SECURE_SITE_FAVICON:`${h2}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Ee={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ee.getActiveNamespace(),e=Ee.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Ke.setItem(Ye.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Ke.getItem(Ye.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Ke.removeItem(Ye.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Ke.setItem(Ye.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Ke.setItem(Ye.ACTIVE_CAIP_NETWORK_ID,t),Ee.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Ke.getItem(Ye.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Ke.removeItem(Ye.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=d2(t);Ke.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ee.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Ke.setItem(Ye.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Ke.getItem(Ye.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=d2(t);Ke.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Ke.getItem(Ye.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=d2(t);return Ke.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Ke.setItem(Ye.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Ke.getItem(Ye.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Ke.removeItem(Ye.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Ke.getItem(Ye.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Ke.getItem(Ye.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Ke.setItem(Ye.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Ke.getItem(Ye.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Ke.getItem(Ye.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Ke.setItem(Ye.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ee.getConnectedNamespaces();e.includes(t)||(e.push(t),Ee.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ee.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ee.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Ke.getItem(Ye.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Ke.setItem(Ye.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Ke.removeItem(Ye.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Ke.getItem(Ye.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ee.getBalanceCache();Ke.setItem(Ye.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ee.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ee.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ee.getBalanceCache();e[t.caipAddress]=t,Ke.setItem(Ye.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Ke.getItem(Ye.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ee.getBalanceCache();Ke.setItem(Ye.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ee.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ee.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ee.getNativeBalanceCache();e[t.caipAddress]=t,Ke.setItem(Ye.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Ke.getItem(Ye.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ee.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ee.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ee.getEnsCache();e[t.address]=t,Ke.setItem(Ye.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ee.getEnsCache();Ke.setItem(Ye.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Ke.getItem(Ye.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ee.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ee.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ee.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Ke.setItem(Ye.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ee.getIdentityCache();Ke.setItem(Ye.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Ke.removeItem(Ye.PORTFOLIO_CACHE),Ke.removeItem(Ye.NATIVE_BALANCE_CACHE),Ke.removeItem(Ye.ENS_CACHE),Ke.removeItem(Ye.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Ke.setItem(Ye.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Ke.getItem(Ye.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Ee.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ie.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Ke.setItem(Ye.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Ke.getItem(Ye.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Ee.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Ke.setItem(Ye.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Ke.getItem(Ye.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Ee.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Ke.setItem(Ye.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Ee.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Ke.setItem(Ye.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Ee.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Le={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Le.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=jt.TEN_SEC_MS:!0},isAllowedRetry(t,e=jt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Le.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+jt.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Le.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Le.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ee.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Le.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ie.W3M_API_URL},getBlockchainApiUrl(){return ie.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ie.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?jt.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ie.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Xy(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Ov{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Xy(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Xy(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Xy(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Xy(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Xy(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const Cde={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?jt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Le.isTelegram()){if(Le.isIos())return t.filter(e=>e!=="google");if(Le.isMac())return t.filter(e=>e!=="x");if(Le.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},We=an({features:jt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:jt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),he={state:We,subscribeKey(t,e){return Dr(We,t,e)},setOptions(t){Object.assign(We,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...We.remoteFeatures,...t};We.remoteFeatures=e,(n=We.remoteFeatures)!=null&&n.socials&&(We.remoteFeatures.socials=Cde.filterSocialsByPlatform(We.remoteFeatures.socials))},setFeatures(t){if(!t)return;We.features||(We.features=jt.DEFAULT_FEATURES);const e={...We.features,...t};We.features=e},setProjectId(t){We.projectId=t},setCustomRpcUrls(t){We.customRpcUrls=t},setAllWallets(t){We.allWallets=t},setIncludeWalletIds(t){We.includeWalletIds=t},setExcludeWalletIds(t){We.excludeWalletIds=t},setFeaturedWalletIds(t){We.featuredWalletIds=t},setTokens(t){We.tokens=t},setTermsConditionsUrl(t){We.termsConditionsUrl=t},setPrivacyPolicyUrl(t){We.privacyPolicyUrl=t},setCustomWallets(t){We.customWallets=t},setIsSiweEnabled(t){We.isSiweEnabled=t},setIsUniversalProvider(t){We.isUniversalProvider=t},setSdkVersion(t){We.sdkVersion=t},setMetadata(t){We.metadata=t},setDisableAppend(t){We.disableAppend=t},setEIP6963Enabled(t){We.enableEIP6963=t},setDebug(t){We.debug=t},setEnableWalletConnect(t){We.enableWalletConnect=t},setEnableWalletGuide(t){We.enableWalletGuide=t},setEnableAuthLogger(t){We.enableAuthLogger=t},setEnableWallets(t){We.enableWallets=t},setPreferUniversalLinks(t){We.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){We.hasMultipleAddresses=t},setSIWX(t){We.siwx=t},setConnectMethodsOrder(t){We.features={...We.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){We.features={...We.features,walletFeaturesOrder:t}},setSocialsOrder(t){We.remoteFeatures={...We.remoteFeatures,socials:t}},setCollapseWallets(t){We.features={...We.features,collapseWallets:t}},setEnableEmbedded(t){We.enableEmbedded=t},setAllowUnsupportedChain(t){We.allowUnsupportedChain=t},setManualWCControl(t){We.manualWCControl=t},setEnableNetworkSwitch(t){We.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(We.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){We.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return We.universalProviderConfigOverride},getSnapshot(){return fb(We)}},Ade=Object.freeze({enabled:!0,events:[]}),Sde=new Ov({baseUrl:Le.getAnalyticsUrl(),clientId:null}),Ide=5,Tde=60*1e3,xl=an({...Ade}),Nde={state:xl,subscribeKey(t,e){return Dr(xl,t,e)},async sendError(t,e){if(!xl.enabled)return;const n=Date.now();if(xl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Tde}).length>=Ide)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};xl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=he.state;await Sde.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Le.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){xl.enabled=!0},disable(){xl.enabled=!1},clearEvents(){xl.events=[]}};class zm extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,zm.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,zm):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function n5(t,e){const n=t instanceof zm?t:new zm(t instanceof Error?t.message:String(t),e,t);throw Nde.sendError(n,n.category),n}function Ri(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return n5(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return n5(a,e)}},n[r]=i}else n[r]=s}),n}const Na={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Pde={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Na.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Na.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Na.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Na.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ie.CHAIN.SOLANA&&t===Na.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Na.COINBASE.url}/dapp?cb_url=${r}`)}},ii=an({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),kde={state:ii,subscribeNetworkImages(t){return Rr(ii.networkImages,()=>t(ii.networkImages))},subscribeKey(t,e){return Dr(ii,t,e)},subscribe(t){return Rr(ii,()=>t(ii))},setWalletImage(t,e){ii.walletImages[t]=e},setNetworkImage(t,e){ii.networkImages[t]=e},setChainImage(t,e){ii.chainImages[t]=e},setConnectorImage(t,e){ii.connectorImages={...ii.connectorImages,[t]:e}},setTokenImage(t,e){ii.tokenImages[t]=e},setCurrencyImage(t,e){ii.currencyImages[t]=e}},Mo=Ri(kde),Ode={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},f2=an({networkImagePromises:{}}),V7={async fetchWalletImage(t){if(t)return await ze._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(f2.networkImagePromises[t]||(f2.networkImagePromises[t]=ze._fetchNetworkImage(t)),await f2.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Mo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Mo.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Mo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Mo.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Mo.state.connectorImages[t.imageId]},getChainImage(t){return Mo.state.networkImages[Ode[t]]}},Cl=an({message:"",variant:"info",open:!1}),Rde={state:Cl,subscribeKey(t,e){return Dr(Cl,t,e)},open(t,e){const{debug:n}=he.state,{shortMessage:r,longMessage:s}=t;n&&(Cl.message=r,Cl.variant=e,Cl.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Cl.open=!1,Cl.message="",Cl.variant="info"}},Fn=Ri(Rde),Dde=Le.getAnalyticsUrl(),$de=new Ov({baseUrl:Dde,clientId:null}),Ude=["MODAL_CREATED"],ec=an({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Ft={state:ec,subscribe(t){return Rr(ec,()=>t(ec))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=he.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=ve.state.address;if(Ude.includes(t.data.event)||typeof window>"u")return;await $de.post({path:"/e",params:Ft.getSdkProperties(),body:{eventId:Le.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),ec.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ie.HTTP_STATUS_CODES.FORBIDDEN&&!ec.reportedErrors.FORBIDDEN&&(Fn.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${P0()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ec.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;ec.timestamp=Date.now(),ec.data=t,(e=he.state.features)!=null&&e.analytics&&Ft._sendAnalyticsEvent(ec)}},Bde=Le.getApiUrl(),Ss=new Ov({baseUrl:Bde,clientId:null}),Lde=40,r5=4,Mde=20,et=an({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ze={state:et,subscribeKey(t,e){return Dr(et,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=he.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return he.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ss.baseUrl}/getWalletImage/${t}`,n=await Ss.getBlob({path:e,params:ze._getSdkProperties()});Mo.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ss.baseUrl}/public/getAssetImage/${t}`,n=await Ss.getBlob({path:e,params:ze._getSdkProperties()});Mo.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ss.baseUrl}/public/getAssetImage/${t}`,n=await Ss.getBlob({path:e,params:ze._getSdkProperties()});Mo.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ss.baseUrl}/public/getCurrencyImage/${t}`,n=await Ss.getBlob({path:e,params:ze._getSdkProperties()});Mo.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ss.baseUrl}/public/getTokenImage/${t}`,n=await Ss.getBlob({path:e,params:ze._getSdkProperties()});Mo.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Le.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Na.COINBASE.id?!0:L.state.activeChain==="solana"&&(n.id===Na.SOLFLARE.id||n.id===Na.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ss.get({path:"/appkit/v1/config",params:ze._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ss.get({path:"/projects/v1/origins",params:ze._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ie.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ie.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=L.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!V7.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ze._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=_e.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ze._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ze._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ze._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ze._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Na).map(o=>o.id));const r=await Ss.get({path:"/getWallets",params:{...ze._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ze._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=he.state;if(t!=null&&t.length){const e={...ze._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??r5,include:t},{data:n}=await ze.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ze._fetchWalletImage(i))),et.featured=r,et.allFeatured=r}},async fetchRecommendedWallets(){try{et.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=he.state,r=[...e??[],...n??[]].filter(Boolean),s=L.getRequestedCaipNetworkIds().join(","),i={page:1,entries:r5,include:t,exclude:r,chains:s},{data:o,count:a}=await ze.fetchWallets(i),c=Ee.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ze._fetchWalletImage(d))),et.recommended=o,et.allRecommended=o,et.count=a??0}catch{}finally{et.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=he.state,s=L.getRequestedCaipNetworkIds().join(","),i=[...et.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Lde,include:e,exclude:i,chains:s},{data:a,count:c}=await ze.fetchWallets(o),l=a.slice(0,Mde).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ze._fetchWalletImage(u))),et.wallets=Le.uniqueBy([...et.wallets,...ze._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),et.count=c>et.count?c:et.count,et.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ze.fetchWallets(e);n&&n.forEach(r=>{et.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=he.state,s=L.getRequestedCaipNetworkIds().join(",");et.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ze.fetchWallets(i);Ft.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ze._fetchWalletImage(c)),Le.wait(300)]),et.search=ze._filterOutExtensions(o)},initPromise(t,e){const n=et.promises[t];return n||(et.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ze.initPromise("connectorImages",ze.fetchConnectorImages),e&&ze.initPromise("featuredWallets",ze.fetchFeaturedWallets),n&&ze.initPromise("recommendedWallets",ze.fetchRecommendedWallets),r&&ze.initPromise("networkImages",ze.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=he.state.features)!=null&&t.analytics&&ze.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ss.get({path:"/getAnalyticsConfig",params:ze._getSdkProperties()});he.setFeatures({analytics:t})}catch{he.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){et.featured=et.allFeatured,et.recommended=et.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");et.featured=et.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),et.recommended=et.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),et.filteredWallets=et.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){et.filteredWallets=[]},setFilterByNamespace(t){if(!t){et.featured=et.allFeatured,et.recommended=et.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");et.featured=et.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),et.recommended=et.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),et.filteredWallets=et.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Gt=an({view:"Connect",history:["Connect"],transactionStack:[]}),jde={state:Gt,subscribeKey(t,e){return Dr(Gt,t,e)},pushTransactionStack(t){Gt.transactionStack.push(t)},popTransactionStack(t){const e=Gt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ve.goBack();break;case"cancel":s==null||s(),Ve.goBack();break}},push(t,e){t!==Gt.view&&(Gt.view=t,Gt.history.push(t),Gt.data=e)},reset(t,e){Gt.view=t,Gt.history=[t],Gt.data=e},replace(t,e){Gt.history.at(-1)===t||(Gt.view=t,Gt.history[Gt.history.length-1]=t,Gt.data=e)},goBack(){var r;const t=L.state.activeCaipAddress,e=Ve.state.view==="ConnectingFarcaster",n=!t&&e;if(Gt.history.length>1){Gt.history.pop();const[s]=Gt.history.slice(-1);s&&(t&&s==="Connect"?Gt.view="Account":Gt.view=s)}else Dt.close();(r=Gt.data)!=null&&r.wallet&&(Gt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){ve.setFarcasterUrl(void 0,L.state.activeChain);const a=_e.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=fb(he.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Gt.history.length>1){Gt.history=Gt.history.slice(0,t+1);const[e]=Gt.history.slice(-1);e&&(Gt.view=e)}},goBackOrCloseModal(){Ve.state.history.length>1?Ve.goBack():Dt.close()}},Ve=Ri(jde),tc=an({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),BN={state:tc,subscribe(t){return Rr(tc,()=>t(tc))},setThemeMode(t){tc.themeMode=t;try{const e=_e.getAuthConnector();if(e){const n=BN.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Mc(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){tc.themeVariables={...tc.themeVariables,...t};try{const e=_e.getAuthConnector();if(e){const n=BN.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Mc(tc.themeVariables,tc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return fb(tc)}},Fs=Ri(BN),K7={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},xt=an({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...K7},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Fde={state:xt,subscribe(t){return Rr(xt,()=>{t(xt)})},subscribeKey(t,e){return Dr(xt,t,e)},initialize(t){t.forEach(e=>{const n=Ee.getConnectedConnectorId(e);n&&_e.setConnectorId(n,e)})},setActiveConnector(t){t&&(xt.activeConnector=Ef(t))},setConnectors(t){t.filter(s=>!xt.allConnectors.some(i=>i.id===s.id&&_e.getConnectorName(i.name)===_e.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&xt.allConnectors.push(Ef(s))});const n=_e.getEnabledNamespaces(),r=_e.getEnabledConnectors(n);xt.connectors=_e.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(xt.filterByNamespaceMap).forEach(e=>{xt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{xt.filterByNamespaceMap[e]=!0}),_e.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){xt.filterByNamespaceMap[t]=e,_e.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=_e.getEnabledNamespaces(),e=_e.getEnabledConnectors(t),n=_e.areAllNamespacesEnabled();xt.connectors=_e.mergeMultiChainConnectors(e),n?ze.clearFilterByNamespaces():ze.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(xt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return xt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(xt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=_e.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ie.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=_e.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ie.CONNECTOR_ID.AUTH){const s=t,i=fb(he.state),o=Fs.getSnapshot().themeMode,a=Fs.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Mc(a,o)}),_e.setConnectors([t])}else _e.setConnectors([t])},getAuthConnector(t){var r;const e=t||L.state.activeChain,n=xt.connectors.find(s=>s.id===ie.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return xt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return xt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return xt.allConnectors.filter(r=>r.chain===L.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=fb(he.state),r=Fs.getSnapshot().themeMode,s=Fs.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Mc(s,r)})},getConnectorsByNamespace(t){const e=xt.allConnectors.filter(n=>n.chain===t);return _e.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=_e.getConnector(t.id,t.rdns),n=L.state.activeChain;Pde.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Ve.push("ConnectingExternal",{connector:e}):Ve.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?_e.getConnectorsByNamespace(t):_e.mergeMultiChainConnectors(xt.allConnectors)},setFilterByNamespace(t){xt.filterByNamespace=t,xt.connectors=_e.getConnectors(t),ze.setFilterByNamespace(t)},setConnectorId(t,e){t&&(xt.activeConnectorIds={...xt.activeConnectorIds,[e]:t},Ee.setConnectedConnectorId(e,t))},removeConnectorId(t){xt.activeConnectorIds={...xt.activeConnectorIds,[t]:void 0},Ee.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return xt.activeConnectorIds[t]},isConnected(t){return t?!!xt.activeConnectorIds[t]:Object.values(xt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){xt.activeConnectorIds={...K7}}},_e=Ri(Fde),gb={getConnectionStatus(t,e){const n=_e.state.activeConnectorIds[e],r=Oe.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===ie.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=Oe.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=_e.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>_e.getConnectorById(a.connectorId)),o=gb.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var Hm={};const zde="https://secure.walletconnect.org/sdk",Hde=(typeof process<"u"&&typeof Hm<"u"?Hm.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||zde,Wde=(typeof process<"u"&&typeof Hm<"u"?Hm.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",qde=(typeof process<"u"&&typeof Hm<"u"?Hm.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ue={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},pr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Gde=1e3,$c={checkNamespaceConnectorId(t,e){return _e.getConnectorId(t)===e},isSocialProvider(t){return jt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&_e.setActiveConnector(e),s==null||s(Le.isMobile()&&t),r){const l=Dt.subscribeKey("open",u=>{u||(Ve.state.view!==r&&Ve.replace(r),l(),a(new Error("Modal closed")))})}const c=L.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Dt.close(),c(),o(wi.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=L.subscribeKey("activeCaipAddress",s=>{s&&(Dt.close(),r(),e(wi.parseCaipAddress(s)))});Oe.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=ve.state.socialWindow,i=ve.state.socialProvider,o=!1,a=null;const c=L.subscribeKey("activeCaipAddress",l=>{l&&(e&&Dt.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ie.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=_e.getAuthConnector();if(g&&!o){s&&(s.close(),ve.setSocialWindow(void 0,L.state.activeChain),s=ve.state.socialWindow),o=!0;const y=f.data.resultUri;if(i&&Ft.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await g.provider.connectSocial(y),i){Ee.setConnectedSocialProvider(i),await Oe.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const w=L.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(wi.parseCaipAddress(w)),Ft.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Ft.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Ft.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(ve.setSocialProvider(t,L.state.activeChain),i=ve.state.socialProvider,Ft.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Dt.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=_e.getAuthConnector();if(p&&!ve.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();ve.setFarcasterUrl(g,L.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=_e.getAuthConnector();a=Le.returnOpenHref(`${ie.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){ve.setSocialWindow(a,L.state.activeChain),s=ve.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Dt.subscribeKey("open",c=>{c||(Ve.state.view!==e&&Ve.replace(e),a(),i(new Error("Modal closed")))})}const o=L.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Dt.close(),o(),s(wi.parseCaipAddress(a)))})})},async updateEmail(){const t=Ee.getConnectedConnectorId(L.state.activeChain),e=_e.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ie.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Ve.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Dt.close(),clearInterval(i),o(),r({email:a}))},Gde),o=Dt.subscribeKey("open",a=>{a||(Ve.state.view!=="Connect"&&Ve.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return L.checkIfSmartAccountEnabled()&&((n=ve.state.preferredAccountTypes)==null?void 0:n[t])===pr.ACCOUNT_TYPES.EOA}},Vd=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Gn=an({...Vd}),Vde={state:Gn,subscribeKey(t,e){return Dr(Gn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Le.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Gn.message=Vd.message,Gn.variant=Vd.variant,Gn.svg=Vd.svg,Gn.open=Vd.open,Gn.autoClose=Vd.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Vd.autoClose}){Gn.open?(Gn.open=!1,setTimeout(()=>{Gn.message=t,Gn.variant=n,Gn.svg=e,Gn.open=!0,Gn.autoClose=r},150)):(Gn.message=t,Gn.variant=n,Gn.svg=e,Gn.open=!0,Gn.autoClose=r)}},zo=Vde,en=an({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Kde={state:en,subscribe(t){return Rr(en,()=>t(en))},setLastNetworkInView(t){en.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");en.loading=!0;try{const s=await qe.fetchTransactions({account:t,cursor:en.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=k0.filterSpamTransactions(s.data),o=k0.filterByConnectedChain(i),a=[...en.transactions,...o];en.loading=!1,e==="coinbase"?en.coinbaseTransactions=k0.groupTransactionsByYearAndMonth(en.coinbaseTransactions,s.data):(en.transactions=a,en.transactionsByYear=k0.groupTransactionsByYearAndMonth(en.transactionsByYear,o)),en.empty=a.length===0,en.next=s.next?s.next:void 0}catch{const i=L.state.activeChain;Ft.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:he.state.projectId,cursor:en.next,isSmartAccount:((r=ve.state.preferredAccountTypes)==null?void 0:r[i])===pr.ACCOUNT_TYPES.SMART_ACCOUNT}}),zo.showError("Failed to fetch transactions"),en.loading=!1,en.empty=!0,en.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){en.next=void 0},resetTransactions(){en.transactions=[],en.transactionsByYear={},en.lastNetworkInView=void 0,en.loading=!1,en.empty=!1,en.next=void 0}},k0=Ri(Kde,"API_ERROR"),bt=an({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let $d;const Qde={state:bt,subscribe(t){return Rr(bt,()=>t(bt))},subscribeKey(t,e){return Dr(bt,t,e)},_getClient(){return bt._client},setClient(t){bt._client=Ef(t)},initialize(t){const e=Ee.getConnections();for(const n of t){const r=n.namespace;if(r){const s=bt.connections.get(r)??[],i=e[r]??[],o=[...s,...i];bt.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(Le.isTelegram()||Le.isSafari()&&Le.isIos()){if($d){await $d,$d=void 0;return}if(!Le.isPairingExpired(bt==null?void 0:bt.wcPairingExpiry)){const s=bt.wcUri;bt.wcUri=s;return}$d=(e=(t=Oe._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Oe.state.status="connecting",await $d,$d=void 0,bt.wcPairingExpiry=void 0,Oe.state.status="connected"}else await((r=(n=Oe._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Oe._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&L.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Oe._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||L.state.activeChain;e&&_e.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Dt.setLoading(!0,L.state.activeChain);const n=_e.getAuthConnector();n&&(ve.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ee.setPreferredAccountTypes(ve.state.preferredAccountTypes??{[e]:t}),await Oe.reconnectExternal(n),Dt.setLoading(!1,L.state.activeChain),Ft.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Oe._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Oe._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Oe._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Oe._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Oe._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Oe._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Oe._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Oe._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Oe._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Oe._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Oe._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Oe._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){bt.wcUri=void 0,bt.wcPairingExpiry=void 0,bt.wcLinking=void 0,bt.recentWallet=void 0,bt.status="disconnected",k0.resetTransactions(),Ee.deleteWalletConnectDeepLink()},resetUri(){bt.wcUri=void 0,bt.wcPairingExpiry=void 0,$d=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Oe.state;t&&Ee.setWalletConnectDeepLink(t),e&&Ee.setAppKitRecent(e),Ft.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ve.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){bt.wcBasic=t},setUri(t){bt.wcUri=t,bt.wcPairingExpiry=Le.getPairingExpiry()},setWcLinking(t){bt.wcLinking=t},setWcError(t){bt.wcError=t,bt.buffering=!1},setRecentWallet(t){bt.recentWallet=t},setBuffering(t){bt.buffering=t},setStatus(t){bt.status=t},setIsSwitchingConnection(t){bt.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=Oe._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new zm("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){bt.connections=new Map(bt.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&$c.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await Oe.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=_e.getConnectorById(t.connectorId),s=t.connectorId===ie.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await Oe.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await Oe.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=_e.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ie.CONNECTOR_ID.AUTH,a=t.connectorId===ie.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&$c.isSocialProvider(i)){const{address:d}=await $c.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Dt.open({view:"ConnectingFarcaster"})},onConnect(){Ve.replace("ProfileWallets")}});c=d}else{const{address:d}=await $c.connectEmail({closeModalOnConnect:r,onOpen(){Dt.open({view:"EmailLogin"})},onConnect(){Ve.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await $c.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Dt.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Ve.replace("ProfileWallets")}});c=d}else{const d=await Oe.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Oe.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){gb.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=ve.getCaipAddress(n);if(o){const{address:c}=wi.parseCaipAddress(o);i=c}const a=gb.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Oe.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Oe.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Oe=Ri(Qde),ap=an({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),ja={state:ap,subscribe(t){return Rr(ap,()=>t(ap))},subscribeOpen(t){return Dr(ap,"open",t)},set(t){Object.assign(ap,{...ap,...t})}};function Jde(t){const e=Array.from(L.state.chains.keys());let n=[];return t?(n.push([t,L.state.chains.get(t)]),$c.checkNamespaceConnectorId(t,ie.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&$c.checkNamespaceConnectorId(r,ie.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,L.state.chains.get(r)])}):$c.checkNamespaceConnectorId(t,ie.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&$c.checkNamespaceConnectorId(r,ie.CONNECTOR_ID.AUTH)&&n.push([r,L.state.chains.get(r)])})):n=Array.from(L.state.chains.entries()),n}function Q7(){var r,s;const t=((r=L.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=L.state.activeCaipNetwork)==null?void 0:s.id)||1,n=jt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const Yde={async getTokenList(){var r;const t=L.state.activeCaipNetwork,e=await qe.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=L.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Oe==null?void 0:Oe.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await qe.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await qe.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Oe.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await CR.getMyTokensWithBalance(t);return ve.setTokenBalance(e,L.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Q7(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Mt=an({tokenBalances:[],loading:!1}),Zde={state:Mt,subscribe(t){return Rr(Mt,()=>t(Mt))},subscribeKey(t,e){return Dr(Mt,t,e)},setToken(t){t&&(Mt.token=Ef(t))},setTokenAmount(t){Mt.sendTokenAmount=t},setReceiverAddress(t){Mt.receiverAddress=t},setReceiverProfileImageUrl(t){Mt.receiverProfileImageUrl=t},setReceiverProfileName(t){Mt.receiverProfileName=t},setNetworkBalanceInUsd(t){Mt.networkBalanceInUSD=t},setLoading(t){Mt.loading=t},async sendToken(){var t;try{switch(Pt.setLoading(!0),(t=L.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Pt.sendEvmToken();return;case"solana":await Pt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Pt.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=L.state.activeChain,e=(n=ve.state.preferredAccountTypes)==null?void 0:n[t];if(!Pt.state.sendTokenAmount||!Pt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Pt.state.token)throw new Error("A token is required");(r=Pt.state.token)!=null&&r.address?(Ft.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===pr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Pt.state.token.address,amount:Pt.state.sendTokenAmount,network:((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Pt.sendERC20Token({receiverAddress:Pt.state.receiverAddress,tokenAddress:Pt.state.token.address,sendTokenAmount:Pt.state.sendTokenAmount,decimals:Pt.state.token.quantity.decimals})):(Ft.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===pr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Pt.state.token.symbol||"",amount:Pt.state.sendTokenAmount,network:((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Pt.sendNativeToken({receiverAddress:Pt.state.receiverAddress,sendTokenAmount:Pt.state.sendTokenAmount,decimals:Pt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Mt.loading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Le.getPlainAddress(r):void 0;if(Mt.lastRetry&&!Le.isAllowedRetry(Mt.lastRetry,30*jt.ONE_SEC_MS))return Mt.loading=!1,[];try{if(s&&e&&n){const a=await CR.getMyTokensWithBalance();return Mt.tokenBalances=a,Mt.lastRetry=void 0,a}}catch(a){Mt.lastRetry=Date.now(),t==null||t(a),zo.showError("Token Balance Unavailable")}finally{Mt.loading=!1}return[]},fetchNetworkBalance(){if(Mt.tokenBalances.length===0)return;const t=Yde.mapBalancesToSwapTokens(Mt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Q7());e&&(Mt.networkBalanceInUSD=e?wde.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Ve.pushTransactionStack({});const e=t.receiverAddress,n=ve.state.address,r=Oe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Oe.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),Ft.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=ve.state.preferredAccountTypes)==null?void 0:i.eip155)===pr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Pt.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=Oe._getClient())==null||c.updateBalance("eip155"),Pt.resetSend()},async sendERC20Token(t){Ve.pushTransactionStack({onSuccess(){Ve.replace("Account")}});const e=Oe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(ve.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Le.getPlainAddress(t.tokenAddress);await Oe.writeContract({fromAddress:ve.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:_de.getERC20Abi(n),chainNamespace:"eip155"}),Pt.resetSend()}},async sendSolanaToken(){var t;if(!Pt.state.sendTokenAmount||!Pt.state.receiverAddress)throw new Error("An amount and receiver address are required");Ve.pushTransactionStack({onSuccess(){Ve.replace("Account")}}),await Oe.sendTransaction({chainNamespace:"solana",to:Pt.state.receiverAddress,value:Pt.state.sendTokenAmount}),(t=Oe._getClient())==null||t.updateBalance("solana"),Pt.resetSend()},resetSend(){Mt.token=void 0,Mt.sendTokenAmount=void 0,Mt.receiverAddress=void 0,Mt.receiverProfileImageUrl=void 0,Mt.receiverProfileName=void 0,Mt.loading=!1,Mt.tokenBalances=[]}},Pt=Ri(Zde),p2={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},F1={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ie=an({chains:lde(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Xde={state:Ie,subscribe(t){return Rr(Ie,()=>{t(Ie)})},subscribeKey(t,e){return Dr(Ie,t,e)},subscribeChainProp(t,e,n){let r;return Rr(Ie.chains,()=>{var i;const s=n||Ie.activeChain;if(s){const o=(i=Ie.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ee.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=he.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ie.noAdapters=!0),Ie.noAdapters||(Ie.activeChain=a==null?void 0:a.namespace,Ie.activeCaipNetwork=i,L.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Ie.activeChain&&ja.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);L.state.chains.set(u,{namespace:u,networkState:an({...F1,caipNetwork:d==null?void 0:d[0]}),accountState:an(p2),caipNetworks:d??[],...n}),L.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ie.activeChain===t){const r=Array.from(Ie.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&L.setActiveCaipNetwork(s)}}Ie.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Ie.chains.set(t.namespace,{namespace:t.namespace,networkState:{...F1,caipNetwork:r[0]},accountState:p2,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),L.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ie.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Ie.chains.set(t.chainNamespace,{...e,caipNetworks:r}),L.setRequestedCaipNetworks(r,t.chainNamespace),_e.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Ie.chains.get(t);if(n){const o=((r=Ie.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&L.setActiveCaipNetwork(n.caipNetworks[0]),Ie.chains.set(t,{...n,caipNetworks:a}),L.setRequestedCaipNetworks(a||[],t),a.length===0&&_e.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ie.chains.get(t);n&&(n.networkState={...n.networkState||F1,...e},Ie.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ie.chains.get(t);if(r){const s={...r.accountState||p2,...e};Ie.chains.set(t,{...r,accountState:s}),(Ie.chains.size===1||Ie.activeChain===t)&&(e.caipAddress&&(Ie.activeCaipAddress=e.caipAddress),ve.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Ie.chains.get(t);if(n){const r={...n.networkState||F1,...e};Ie.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){L.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&_e.removeConnectorId(n)},setActiveNamespace(t){var r,s;Ie.activeChain=t;const e=t?Ie.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ie.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ie.activeCaipNetwork=n,L.setChainNetworkData(t,{caipNetwork:n}),Ee.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),ja.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Ie.activeChain!==t.chainNamespace&&L.setIsSwitchingNamespace(!0);const e=Ie.chains.get(t.chainNamespace);Ie.activeChain=t.chainNamespace,Ie.activeCaipNetwork=t,L.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ie.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ie.activeCaipAddress=void 0,L.setAccountProp("caipAddress",Ie.activeCaipAddress,t.chainNamespace),e&&ve.replaceState(e.accountState),Pt.resetSend(),ja.set({activeChain:Ie.activeChain,selectedNetworkId:(i=Ie.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ee.setActiveCaipNetworkId(t.caipNetworkId),!L.checkIfSupportedNetwork(t.chainNamespace)&&he.state.enableNetworkSwitch&&!he.state.allowUnsupportedChain&&!Oe.state.wcBasic&&L.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ie.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==L.state.activeChain,n=(s=L.getNetworkData(t))==null?void 0:s.caipNetwork,r=L.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await L.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=L.state.chains.get(L.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Ie.activeCaipNetwork)==null?void 0:o.id)})),r=L.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Dt.close()}catch{Ve.goBack()}Ft.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ie.activeChain,n=Ie.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ie.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ie.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Ie.activeChain;if(e&&(n=e),!n)return;const r=(s=Ie.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ie.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ie.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Le.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Ie.chains.forEach(e=>{const n=L.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){L.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=L.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));_e.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ie.chains.forEach(e=>{const n=L.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Ie.activeCaipNetwork},getActiveCaipAddress(){return Ie.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ie.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=L.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());L.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ie.activeCaipNetwork,r=L.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ie.activeChain)return!0;const e=L.getRequestedCaipNetworks(Ie.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){L.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=pb.caipNetworkIdToNumber((r=Ie.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ie.activeChain;if(!e||!t)return!1;const n=L.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Dt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ie.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&jt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){L.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Ie.activeCaipAddress=void 0,L.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),_e.removeConnectorId(e)},setIsSwitchingNamespace(t){Ie.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ie.chains.forEach(s=>{ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Ie.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=L.state.chains.get(t))==null?void 0:e.accountState:ve.state},getNetworkData(t){var n;const e=t||Ie.activeChain;if(e)return(n=L.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=L.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=_e.state.filterByNamespace;return(t?[Ie.chains.get(t)]:Array.from(Ie.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?L.getRequestedCaipNetworks(t):L.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Ie.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ie.lastConnectedSIWECaipNetwork}},L=Ri(Xde),ehe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},J7=Le.getBlockchainApiUrl(),Is=an({clientId:null,api:new Ov({baseUrl:J7,clientId:null}),supportedChains:{http:[],ws:[]}}),qe={state:Is,async get(t){const{st:e,sv:n}=qe.getSdkProperties(),r=he.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Is.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=he.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Is.supportedChains.http.length||await qe.getSupportedNetworks()}catch{return!1}return Is.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await qe.get({path:"v1/supported-chains"});return Is.supportedChains=t,t}catch{return Is.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await qe.isNetworkSupported(e))return{avatar:"",name:""};const r=Ee.getIdentityFromCacheForAddress(t);if(r)return r;const s=await qe.get({path:`/v1/identity/${t}`,params:{sender:L.state.activeCaipAddress?Le.getPlainAddress(L.state.activeCaipAddress):void 0}});return Ee.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await qe.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?qe.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await qe.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?qe.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Is.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:he.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await qe.isNetworkSupported((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?qe.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=qe.getSdkProperties();if(!await qe.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return qe.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await qe.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Is.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:jt.CONVERT_SLIPPAGE_TOLERANCE},projectId:he.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=qe.getSdkProperties();if(!await qe.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return qe.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=qe.getSdkProperties();if(!await qe.isNetworkSupported((l=L.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return zo.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ee.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await qe.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ee.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/profile/reverse/${t}`,params:{sender:ve.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await qe.isNetworkSupported((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Is.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await qe.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Is.api.post({path:"/v1/generators/onrampurl",params:{projectId:he.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await qe.isNetworkSupported((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await qe.get({path:"/v1/onramp/options"})}catch{return ehe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await qe.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Is.api.post({path:"/v1/onramp/quote",params:{projectId:he.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await qe.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Is.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:he.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Is.clientId=t,Is.api=new Ov({baseUrl:J7,clientId:t})}},g2={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return dy(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},CR={async getMyTokensWithBalance(t){const e=ve.state.address,n=L.state.activeCaipNetwork,r=_e.getConnectorId("eip155")===ie.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Ee.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await qe.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=g2.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Oe.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Oe.walletGetAssets({account:t,chainFilter:[s]});if(!g2.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>g2.createBalance(l,e.caipNetworkId));return Ee.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},$i=an({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),the={state:$i,replaceState(t){t&&Object.assign($i,Ef(t))},subscribe(t){return L.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return L.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){L.setAccountProp("status",t,e)},getCaipAddress(t){return L.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Le.getPlainAddress(t):void 0;e===L.state.activeChain&&(L.state.activeCaipAddress=t),L.setAccountProp("caipAddress",t,e),L.setAccountProp("address",n,e)},setBalance(t,e,n){L.setAccountProp("balance",t,n),L.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){L.setAccountProp("profileName",t,e)},setProfileImage(t,e){L.setAccountProp("profileImage",t,e)},setUser(t,e){L.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){L.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){L.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){L.setAccountProp("currentTab",t,L.state.activeChain)},setTokenBalance(t,e){t&&L.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){L.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){L.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=L.getAccountProp("addressLabels",n)||new Map;r.set(t,e),L.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=L.getAccountProp("addressLabels",e)||new Map;n.delete(t),L.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){L.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){L.setAccountProp("preferredAccountTypes",{...$i.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){$i.preferredAccountTypes=t},setSocialProvider(t,e){t&&L.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){L.setAccountProp("socialWindow",t?Ef(t):void 0,e)},setFarcasterUrl(t,e){L.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;$i.balanceLoading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Le.getPlainAddress(r):void 0;if($i.lastRetry&&!Le.isAllowedRetry($i.lastRetry,30*jt.ONE_SEC_MS))return $i.balanceLoading=!1,[];try{if(s&&e&&n){const a=await CR.getMyTokensWithBalance();return ve.setTokenBalance(a,n),$i.lastRetry=void 0,$i.balanceLoading=!1,a}}catch(a){$i.lastRetry=Date.now(),t==null||t(a),zo.showError("Token Balance Unavailable")}finally{$i.balanceLoading=!1}return[]},resetAccount(t){L.resetAccount(t)}},ve=Ri(the),nhe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=L.state.activeCaipNetwork,r=Ve.state.data;if(t.id===(n==null?void 0:n.id))return;const i=ve.getCaipAddress(L.state.activeChain),o=t.chainNamespace!==L.state.activeChain,a=ve.getCaipAddress(t.chainNamespace),l=_e.getConnectorId(L.state.activeChain)===ie.CONNECTOR_ID.AUTH,u=ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ve.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ve.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ve.push("SwitchNetwork",{...r,network:t})}},Ts=an({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),rhe={state:Ts,subscribe(t){return Rr(Ts,()=>t(Ts))},subscribeKey(t,e){return Dr(Ts,t,e)},async open(t){var o,a;const e=ve.state.status==="connected",n=t==null?void 0:t.namespace,r=L.state.activeChain,s=n&&n!==r,i=(o=L.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(Oe.state.wcBasic?ze.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ze.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),_e.setFilterByNamespace(t==null?void 0:t.namespace),Dt.setLoading(!0,n),n&&s){const c=((a=L.getNetworkData(n))==null?void 0:a.caipNetwork)||L.getRequestedCaipNetworks(n)[0];c&&nhe.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=L.state.noAdapters;he.state.manualWCControl||c&&!i?Le.isMobile()?Ve.reset("AllWallets"):Ve.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ve.reset(t.view,t.data):i?Ve.reset("Account"):Ve.reset("Connect")}Ts.open=!0,ja.set({open:!0}),Ft.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=he.state.enableEmbedded,e=!!L.state.activeCaipAddress;Ts.open&&Ft.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ts.open=!1,Ve.reset("Connect"),Dt.clearLoading(),t?e?Ve.replace("Account"):Ve.push("Connect"):ja.set({open:!1}),Oe.resetUri()},setLoading(t,e){e&&Ts.loadingNamespaceMap.set(e,t),Ts.loading=t,ja.set({loading:t})},clearLoading(){Ts.loadingNamespaceMap.clear(),Ts.loading=!1},shake(){Ts.shake||(Ts.shake=!0,setTimeout(()=>{Ts.shake=!1},500))}},Dt=Ri(rhe),nw={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},LN={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},she={providers:G7,selectedProvider:null,error:null,purchaseCurrency:nw,paymentCurrency:LN,purchaseCurrencies:[nw],paymentCurrencies:[],quotesLoading:!1},vt=an(she),ihe={state:vt,subscribe(t){return Rr(vt,()=>t(vt))},subscribeKey(t,e){return Dr(vt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=L.state.activeChain===ie.CHAIN.SOLANA?"SOL":"USDC",n=ve.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",xde),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",he.state.projectId),vt.selectedProvider={...t,url:r.toString()}}else vt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=G7.filter(r=>e.includes(r.name));vt.providers=n}else vt.providers=[]},setPurchaseCurrency(t){vt.purchaseCurrency=t},setPaymentCurrency(t){vt.paymentCurrency=t},setPurchaseAmount(t){MN.state.purchaseAmount=t},setPaymentAmount(t){MN.state.paymentAmount=t},async getAvailableCurrencies(){const t=await qe.getOnrampOptions();vt.purchaseCurrencies=t.purchaseCurrencies,vt.paymentCurrencies=t.paymentCurrencies,vt.paymentCurrency=t.paymentCurrencies[0]||LN,vt.purchaseCurrency=t.purchaseCurrencies[0]||nw,await ze.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ze.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;vt.quotesLoading=!0;try{const n=await qe.getOnrampQuote({purchaseCurrency:vt.purchaseCurrency,paymentCurrency:vt.paymentCurrency,amount:((t=vt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=vt.purchaseCurrency)==null?void 0:e.symbol});return vt.quotesLoading=!1,vt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return vt.error=n.message,vt.quotesLoading=!1,null}finally{vt.quotesLoading=!1}},resetState(){vt.selectedProvider=null,vt.error=null,vt.purchaseCurrency=nw,vt.paymentCurrency=LN,vt.purchaseCurrencies=[nw],vt.paymentCurrencies=[],vt.paymentAmount=void 0,vt.purchaseAmount=void 0,vt.quotesLoading=!1}},MN=Ri(ihe),s5=2147483648,ohe={convertEVMChainIdToCoinType(t){if(t>=s5)throw new Error("Invalid chainId");return(s5|t)>>>0}},Ui=an({suggestions:[],loading:!1}),ahe={state:Ui,subscribe(t){return Rr(Ui,()=>t(Ui))},subscribeKey(t,e){return Dr(Ui,t,e)},async resolveName(t){var e,n;try{return await qe.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await qe.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ui.loading=!0,Ui.suggestions=[];const e=await qe.getEnsNameSuggestions(t);return Ui.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ui.suggestions}catch(e){const n=rw.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ui.loading=!1}},async getNamesForAddress(t){try{if(!L.state.activeCaipNetwork)return[];const n=Ee.getEnsFromCacheForAddress(t);if(n)return n;const r=await qe.reverseLookupEnsName({address:t});return Ee.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=rw.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=L.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=ve.state.address,r=_e.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Ui.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ve.pushTransactionStack({onCancel(){Ve.replace("RegisterAccountName")}});const i=await Oe.signMessage(s);Ui.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=ohe.convertEVMChainIdToCoinType(Number(o));await qe.registerEnsName({coinType:a,address:n,signature:i,message:s}),ve.setProfileName(t,e.chainNamespace),Ve.replace("RegisterAccountNameSuccess")}catch(s){const i=rw.parseEnsApiError(s,`Error registering name ${t}`);throw Ve.replace("RegisterAccountName"),new Error(i)}finally{Ui.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},rw=Ri(ahe);var AR={exports:{}},bg=typeof Reflect=="object"?Reflect:null,i5=bg&&typeof bg.apply=="function"?bg.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},VE;bg&&typeof bg.ownKeys=="function"?VE=bg.ownKeys:Object.getOwnPropertySymbols?VE=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:VE=function(e){return Object.getOwnPropertyNames(e)};function che(t){console&&console.warn&&console.warn(t)}var Y7=Number.isNaN||function(e){return e!==e};function Yt(){Yt.init.call(this)}AR.exports=Yt;AR.exports.once=hhe;Yt.EventEmitter=Yt;Yt.prototype._events=void 0;Yt.prototype._eventsCount=0;Yt.prototype._maxListeners=void 0;var o5=10;function HC(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Yt,"defaultMaxListeners",{enumerable:!0,get:function(){return o5},set:function(t){if(typeof t!="number"||t<0||Y7(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o5=t}});Yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Yt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Y7(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Z7(t){return t._maxListeners===void 0?Yt.defaultMaxListeners:t._maxListeners}Yt.prototype.getMaxListeners=function(){return Z7(this)};Yt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")i5(c,this,n);else for(var l=c.length,u=rz(c,l),r=0;r<l;++r)i5(u[r],this,n);return!0};function X7(t,e,n,r){var s,i,o;if(HC(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=Z7(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,che(a)}return t}Yt.prototype.addListener=function(e,n){return X7(this,e,n,!1)};Yt.prototype.on=Yt.prototype.addListener;Yt.prototype.prependListener=function(e,n){return X7(this,e,n,!0)};function lhe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ez(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=lhe.bind(r);return s.listener=n,r.wrapFn=s,s}Yt.prototype.once=function(e,n){return HC(n),this.on(e,ez(this,e,n)),this};Yt.prototype.prependOnceListener=function(e,n){return HC(n),this.prependListener(e,ez(this,e,n)),this};Yt.prototype.removeListener=function(e,n){var r,s,i,o,a;if(HC(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():uhe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Yt.prototype.off=Yt.prototype.removeListener;Yt.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function tz(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?dhe(s):rz(s,s.length)}Yt.prototype.listeners=function(e){return tz(this,e,!0)};Yt.prototype.rawListeners=function(e){return tz(this,e,!1)};Yt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):nz.call(t,e)};Yt.prototype.listenerCount=nz;function nz(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Yt.prototype.eventNames=function(){return this._eventsCount>0?VE(this._events):[]};function rz(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function uhe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function dhe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function hhe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}sz(t,e,i,{once:!0}),e!=="error"&&fhe(t,s,{once:!0})})}function fhe(t,e,n){typeof t.on=="function"&&sz(t,"error",e,n)}function sz(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var lo=AR.exports;const SR=Bf(lo);var we={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jN=function(t,e){return jN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},jN(t,e)};function phe(t,e){jN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var FN=function(){return FN=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},FN.apply(this,arguments)};function ghe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function mhe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function yhe(t,e){return function(n,r){e(n,r,t)}}function whe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function bhe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function vhe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ehe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function _he(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function zN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function iz(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function xhe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(iz(arguments[e]));return t}function Che(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function mb(t){return this instanceof mb?(this.v=t,this):new mb(t)}function Ahe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof mb?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function She(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:mb(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Ihe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zN=="function"?zN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function The(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Nhe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Phe(t){return t&&t.__esModule?t:{default:t}}function khe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Ohe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Rhe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return FN},__asyncDelegator:She,__asyncGenerator:Ahe,__asyncValues:Ihe,__await:mb,__awaiter:bhe,__classPrivateFieldGet:khe,__classPrivateFieldSet:Ohe,__createBinding:Ehe,__decorate:mhe,__exportStar:_he,__extends:phe,__generator:vhe,__importDefault:Phe,__importStar:Nhe,__makeTemplateObject:The,__metadata:whe,__param:yhe,__read:iz,__rest:ghe,__spread:xhe,__spreadArrays:Che,__values:zN},Symbol.toStringTag,{value:"Module"})),WC=Jx(Rhe);var m2={},e0={},a5;function Dhe(){if(a5)return e0;a5=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return e0.delay=t,e0}var Ud={},y2={},Bd={},c5;function $he(){return c5||(c5=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.ONE_THOUSAND=Bd.ONE_HUNDRED=void 0,Bd.ONE_HUNDRED=100,Bd.ONE_THOUSAND=1e3),Bd}var w2={},l5;function Uhe(){return l5||(l5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(w2)),w2}var u5;function oz(){return u5||(u5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=WC;e.__exportStar($he(),t),e.__exportStar(Uhe(),t)}(y2)),y2}var d5;function Bhe(){if(d5)return Ud;d5=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.fromMiliseconds=Ud.toMiliseconds=void 0;const t=oz();function e(r){return r*t.ONE_THOUSAND}Ud.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Ud.fromMiliseconds=n,Ud}var h5;function Lhe(){return h5||(h5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=WC;e.__exportStar(Dhe(),t),e.__exportStar(Bhe(),t)}(m2)),m2}var cp={},f5;function Mhe(){if(f5)return cp;f5=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return cp.Watch=t,cp.default=t,cp}var b2={},t0={},p5;function jhe(){if(p5)return t0;p5=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.IWatch=void 0;class t{}return t0.IWatch=t,t0}var g5;function Fhe(){return g5||(g5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),WC.__exportStar(jhe(),t)}(b2)),b2}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=WC;e.__exportStar(Lhe(),t),e.__exportStar(Mhe(),t),e.__exportStar(Fhe(),t),e.__exportStar(oz(),t)})(we);class qf{}let zhe=class extends qf{constructor(e){super()}};const m5=we.FIVE_SECONDS,Gf={pulse:"heartbeat_pulse"};let Hhe=class az extends zhe{constructor(e){super(e),this.events=new lo.EventEmitter,this.interval=m5,this.interval=(e==null?void 0:e.interval)||m5}static async init(e){const n=new az(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),we.toMiliseconds(this.interval))}pulse(){this.events.emit(Gf.pulse)}};const Whe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,qhe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ghe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Vhe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Khe(t);return}return e}function Khe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function z1(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Ghe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Whe.test(t)||qhe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Vhe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Qhe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function sr(t,...e){try{return Qhe(t(...e))}catch(n){return Promise.reject(n)}}function Jhe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Yhe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function KE(t){if(Jhe(t))return String(t);if(Yhe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return KE(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const HN="base64:";function Zhe(t){return typeof t=="string"?t:HN+tfe(t)}function Xhe(t){return typeof t!="string"||!t.startsWith(HN)?t:efe(t.slice(HN.length))}function efe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function tfe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ds(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function nfe(...t){return Ds(t.join(":"))}function H1(t){return t=Ds(t),t?t+":":""}function rfe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function sfe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const ife="memory",ofe=()=>{const t=new Map;return{name:ife,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function afe(t={}){const e={mounts:{"":t.driver||ofe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ds(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await y5(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Ds(g?p:p.key),w=g?void 0:p.value,v=g||!p.options?u:{...u,...p.options},b=n(y);f(b).items.push({key:y,value:w,relativeKey:b.relativeKey,options:v})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ds(l);const{relativeKey:d,driver:h}=n(l);return sr(h.hasItem,d,u)},getItem(l,u={}){l=Ds(l);const{relativeKey:d,driver:h}=n(l);return sr(h.getItem,d,u).then(f=>z1(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?sr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:nfe(d.base,f.key),value:z1(f.value)}))):Promise.all(d.items.map(h=>sr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:z1(f)})))))},getItemRaw(l,u={}){l=Ds(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?sr(h.getItemRaw,d,u):sr(h.getItem,d,u).then(f=>Xhe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ds(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await sr(f.setItem,h,KE(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return sr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:KE(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>sr(d.driver.setItem,h.relativeKey,KE(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ds(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await sr(f.setItemRaw,h,u,d);else if(f.setItem)await sr(f.setItem,h,Zhe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ds(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await sr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await sr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ds(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await sr(h.getMeta,d,u)),!u.nativeOnly){const p=await sr(h.getItem,d+"$",u).then(g=>z1(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=H1(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const w of d){(y=w.driver.flags)!=null&&y.maxDepth||(p=!1);const v=await sr(w.driver.getKeys,w.relativeBase,u);for(const b of v){const x=w.mountpoint+Ds(b);h.some(_=>x.startsWith(_))||f.push(x)}h=[w.mountpoint,...h.filter(b=>!b.startsWith(w.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(w=>(!g||rfe(w,u.maxDepth))&&sfe(w,l))},async clear(l,u={}){l=H1(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return sr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>w5(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=H1(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(y5(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=H1(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await w5(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ds(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ds(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function y5(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function w5(t){typeof t.dispose=="function"&&await sr(t.dispose)}function Vf(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function cz(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Vf(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let v2;function Rv(){return v2||(v2=cz("keyval-store","keyval")),v2}function b5(t,e=Rv()){return e("readonly",n=>Vf(n.get(t)))}function cfe(t,e,n=Rv()){return n("readwrite",r=>(r.put(e,t),Vf(r.transaction)))}function lfe(t,e=Rv()){return e("readwrite",n=>(n.delete(t),Vf(n.transaction)))}function ufe(t=Rv()){return t("readwrite",e=>(e.clear(),Vf(e.transaction)))}function dfe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Vf(t.transaction)}function hfe(t=Rv()){return t("readonly",e=>{if(e.getAllKeys)return Vf(e.getAllKeys());const n=[];return dfe(e,r=>n.push(r.key)).then(()=>n)})}const ffe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),pfe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function xf(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return pfe(t)}catch{return t}}function nl(t){return typeof t=="string"?t:ffe(t)||""}const gfe="idb-keyval";var mfe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=cz(t.dbName,t.storeName)),{name:gfe,options:t,async hasItem(s){return!(typeof await b5(n(s),r)>"u")},async getItem(s){return await b5(n(s),r)??null},setItem(s,i){return cfe(n(s),i,r)},removeItem(s){return lfe(n(s),r)},getKeys(){return hfe(r)},clear(){return ufe(r)}}};const yfe="WALLET_CONNECT_V2_INDEXED_DB",wfe="keyvaluestorage";let bfe=class{constructor(){this.indexedDb=afe({driver:mfe({dbName:yfe,storeName:wfe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,nl(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var E2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},QE={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof E2<"u"&&E2.localStorage?QE.exports=E2.localStorage:typeof window<"u"&&window.localStorage?QE.exports=window.localStorage:QE.exports=new e})();function vfe(t){var e;return[t[0],xf((e=t[1])!=null?e:"")]}let Efe=class{constructor(){this.localStorage=QE.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(vfe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return xf(n)}async setItem(e,n){this.localStorage.setItem(e,nl(n))}async removeItem(e){this.localStorage.removeItem(e)}};const _fe="wc_storage_version",v5=1,xfe=async(t,e,n)=>{const r=_fe,s=await e.getItem(r);if(s&&s>=v5){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,v5),n(e),Cfe(t,o)},Cfe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Afe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Efe;this.storage=e;try{const n=new bfe;xfe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function Sfe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Ife=Tfe;function Tfe(t,e,n){var r=n&&n.stringify||Sfe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const E5=Ife;var $p=Fa;const yb=Lfe().console||{},Nfe={mapHttpRequest:W1,mapHttpResponse:W1,wrapRequestSerializer:_2,wrapResponseSerializer:_2,wrapErrorSerializer:_2,req:W1,res:W1,err:Dfe};function Pfe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Fa(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||yb;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Pfe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=wb),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:$fe(t)};c.levels=Fa.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=wb,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=WN());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,lp(l,c,"error","log"),lp(l,c,"fatal","error"),lp(l,c,"warn","error"),lp(l,c,"info","log"),lp(l,c,"debug","log"),lp(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var w=Object.assign({},r,y),v=t.browser.serialize===!0?Object.keys(w):s;delete p.serializers,qC([p],v,w,this._stdErrSerialize)}function b(x){this._childLevel=(x._childLevel|0)+1,this.error=up(x,p,"error"),this.fatal=up(x,p,"fatal"),this.warn=up(x,p,"warn"),this.info=up(x,p,"info"),this.debug=up(x,p,"debug"),this.trace=up(x,p,"trace"),w&&(this.serializers=w,this._serialize=v),e&&(this._logEvent=WN([].concat(x._logEvent.bindings,p)))}return b.prototype=this,new b(this)}return c}Fa.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Fa.stdSerializers=Nfe;Fa.stdTimeFunctions=Object.assign({},{nullTime:lz,epochTime:uz,unixTime:Ufe,isoTime:Bfe});function lp(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?wb:s[n]?s[n]:yb[n]||yb[r]||wb,kfe(t,e,n)}function kfe(t,e,n){!t.transmit&&e[n]===wb||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===yb?yb:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&qC(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Ofe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Fa.levels.values[l],d=Fa.levels.values[n];if(d<u)return;Rfe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Fa.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Ofe(t,e,n,r){t._serialize&&qC(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Fa.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?E5(s.shift(),s):void 0}else typeof i=="string"&&(i=E5(s.shift(),s));return i!==void 0&&(o.msg=i),o}function qC(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Fa.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function up(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Rfe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;qC(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=WN(c)}function WN(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Dfe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function $fe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?lz:uz}function W1(){return{}}function _2(t){return t}function wb(){}function lz(){return!1}function uz(){return Date.now()}function Ufe(){return Math.round(Date.now()/1e3)}function Bfe(){return new Date(Date.now()).toISOString()}function Lfe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const Dv=Bf($p),Mfe={level:"info"},$v="custom_context",IR=1e3*1024;let jfe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},_5=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new jfe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},dz=class{constructor(e,n=IR){this.level=e??"error",this.levelValue=$p.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new _5(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===$p.levels.values.error?console.error(e):n===$p.levels.values.warn?console.warn(e):n===$p.levels.values.debug?console.debug(e):n===$p.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(nl({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new _5(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(nl({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Ffe=class{constructor(e,n=IR){this.baseChunkLogger=new dz(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},zfe=class{constructor(e,n=IR){this.baseChunkLogger=new dz(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Hfe=Object.defineProperty,Wfe=Object.defineProperties,qfe=Object.getOwnPropertyDescriptors,x5=Object.getOwnPropertySymbols,Gfe=Object.prototype.hasOwnProperty,Vfe=Object.prototype.propertyIsEnumerable,C5=(t,e,n)=>e in t?Hfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nx=(t,e)=>{for(var n in e||(e={}))Gfe.call(e,n)&&C5(t,n,e[n]);if(x5)for(var n of x5(e))Vfe.call(e,n)&&C5(t,n,e[n]);return t},rx=(t,e)=>Wfe(t,qfe(e));function my(t){return rx(nx({},t),{level:(t==null?void 0:t.level)||Mfe.level})}function Kfe(t,e=$v){return t[e]||""}function Qfe(t,e,n=$v){return t[n]=e,t}function si(t,e=$v){let n="";return typeof t.bindings>"u"?n=Kfe(t,e):n=t.bindings().context||"",n}function Jfe(t,e,n=$v){const r=si(t,n);return r.trim()?`${r}/${e}`:e}function ns(t,e,n=$v){const r=Jfe(t,e,n),s=t.child({context:r});return Qfe(s,r,n)}function Yfe(t){var e,n;const r=new Ffe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Dv(rx(nx({},t.opts),{level:"trace",browser:rx(nx({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Zfe(t){var e;const n=new zfe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Dv(rx(nx({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function TR(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Yfe(t):Zfe(t)}var Xfe=Object.defineProperty,epe=(t,e,n)=>e in t?Xfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A5=(t,e,n)=>epe(t,typeof e!="symbol"?e+"":e,n);let tpe=class extends qf{constructor(e){super(),this.opts=e,A5(this,"protocol","wc"),A5(this,"version",2)}};var npe=Object.defineProperty,rpe=(t,e,n)=>e in t?npe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,spe=(t,e,n)=>rpe(t,e+"",n);let ipe=class extends qf{constructor(e,n){super(),this.core=e,this.logger=n,spe(this,"records",new Map)}},ope=class{constructor(e,n){this.logger=e,this.core=n}},ape=class extends qf{constructor(e,n){super(),this.relayer=e,this.logger=n}},cpe=class extends qf{constructor(e){super()}},lpe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},upe=class extends qf{constructor(e,n){super(),this.relayer=e,this.logger=n}},dpe=class extends qf{constructor(e,n){super(),this.core=e,this.logger=n}},hpe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},fpe=class{constructor(e,n){this.projectId=e,this.logger=n}},ppe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var gpe=Object.defineProperty,mpe=(t,e,n)=>e in t?gpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S5=(t,e,n)=>mpe(t,typeof e!="symbol"?e+"":e,n);let ype=class{constructor(e){this.opts=e,S5(this,"protocol","wc"),S5(this,"version",2)}},wpe=class{constructor(e){this.client=e}};function bpe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function hz(t,...e){if(!bpe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function I5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vpe(t,e){hz(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const dp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const x2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Epe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function fz(t){return typeof t=="string"&&(t=Epe(t)),hz(t),t}let _pe=class{clone(){return this._cloneInto()}};function xpe(t){const e=r=>t().update(fz(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function pz(t=32){if(dp&&typeof dp.getRandomValues=="function")return dp.getRandomValues(new Uint8Array(t));if(dp&&typeof dp.randomBytes=="function")return dp.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Cpe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Ape=class extends _pe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=x2(this.buffer)}update(e){I5(this);const{view:n,buffer:r,blockLen:s}=this;e=fz(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=x2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){I5(this),vpe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Cpe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=x2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const q1=BigInt(2**32-1),qN=BigInt(32);function gz(t,e=!1){return e?{h:Number(t&q1),l:Number(t>>qN&q1)}:{h:Number(t>>qN&q1)|0,l:Number(t&q1)|0}}function Spe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=gz(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Ipe=(t,e)=>BigInt(t>>>0)<<qN|BigInt(e>>>0),Tpe=(t,e,n)=>t>>>n,Npe=(t,e,n)=>t<<32-n|e>>>n,Ppe=(t,e,n)=>t>>>n|e<<32-n,kpe=(t,e,n)=>t<<32-n|e>>>n,Ope=(t,e,n)=>t<<64-n|e>>>n-32,Rpe=(t,e,n)=>t>>>n-32|e<<64-n,Dpe=(t,e)=>e,$pe=(t,e)=>t,Upe=(t,e,n)=>t<<n|e>>>32-n,Bpe=(t,e,n)=>e<<n|t>>>32-n,Lpe=(t,e,n)=>e<<n-32|t>>>64-n,Mpe=(t,e,n)=>t<<n-32|e>>>64-n;function jpe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Fpe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),zpe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Hpe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Wpe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,qpe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Gpe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ot={fromBig:gz,split:Spe,toBig:Ipe,shrSH:Tpe,shrSL:Npe,rotrSH:Ppe,rotrSL:kpe,rotrBH:Ope,rotrBL:Rpe,rotr32H:Dpe,rotr32L:$pe,rotlSH:Upe,rotlSL:Bpe,rotlBH:Lpe,rotlBL:Mpe,add:jpe,add3L:Fpe,add3H:zpe,add4L:Hpe,add4H:Wpe,add5H:Gpe,add5L:qpe},[Vpe,Kpe]=ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Al=new Uint32Array(80),Sl=new Uint32Array(80);let Qpe=class extends Ape{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Al[b]=e.getUint32(n),Sl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const x=Al[b-15]|0,_=Sl[b-15]|0,C=ot.rotrSH(x,_,1)^ot.rotrSH(x,_,8)^ot.shrSH(x,_,7),A=ot.rotrSL(x,_,1)^ot.rotrSL(x,_,8)^ot.shrSL(x,_,7),T=Al[b-2]|0,S=Sl[b-2]|0,k=ot.rotrSH(T,S,19)^ot.rotrBH(T,S,61)^ot.shrSH(T,S,6),R=ot.rotrSL(T,S,19)^ot.rotrBL(T,S,61)^ot.shrSL(T,S,6),F=ot.add4L(A,R,Sl[b-7],Sl[b-16]),W=ot.add4H(F,C,k,Al[b-7],Al[b-16]);Al[b]=W|0,Sl[b]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const x=ot.rotrSH(d,h,14)^ot.rotrSH(d,h,18)^ot.rotrBH(d,h,41),_=ot.rotrSL(d,h,14)^ot.rotrSL(d,h,18)^ot.rotrBL(d,h,41),C=d&f^~d&g,A=h&p^~h&y,T=ot.add5L(v,_,A,Kpe[b],Sl[b]),S=ot.add5H(T,w,x,C,Vpe[b],Al[b]),k=T|0,R=ot.rotrSH(r,s,28)^ot.rotrBH(r,s,34)^ot.rotrBH(r,s,39),F=ot.rotrSL(r,s,28)^ot.rotrBL(r,s,34)^ot.rotrBL(r,s,39),W=r&i^r&a^i&a,Q=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=ot.add(l|0,u|0,S|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=ot.add3L(k,F,Q);r=ot.add3H(I,S,R,W),s=I|0}({h:r,l:s}=ot.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ot.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ot.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ot.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ot.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=ot.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=ot.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=ot.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){Al.fill(0),Sl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Jpe=xpe(()=>new Qpe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const NR=BigInt(0),mz=BigInt(1),Ype=BigInt(2);function PR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kR(t){if(!PR(t))throw new Error("Uint8Array expected")}function C2(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Zpe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function OR(t){kR(t);let e="";for(let n=0;n<t.length;n++)e+=Zpe[t[n]];return e}function yz(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?NR:BigInt("0x"+t)}const nc={_0:48,_9:57,A:65,F:70,a:97,f:102};function T5(t){if(t>=nc._0&&t<=nc._9)return t-nc._0;if(t>=nc.A&&t<=nc.F)return t-(nc.A-10);if(t>=nc.a&&t<=nc.f)return t-(nc.a-10)}function wz(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=T5(t.charCodeAt(i)),a=T5(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Xpe(t){return yz(OR(t))}function JE(t){return kR(t),yz(OR(Uint8Array.from(t).reverse()))}function bz(t,e){return wz(t.toString(16).padStart(e*2,"0"))}function GN(t,e){return bz(t,e).reverse()}function rc(t,e,n){let r;if(typeof e=="string")try{r=wz(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(PR(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function N5(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];kR(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const A2=t=>typeof t=="bigint"&&NR<=t;function ege(t,e,n){return A2(t)&&A2(e)&&A2(n)&&e<=t&&t<n}function n0(t,e,n,r){if(!ege(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function tge(t){let e;for(e=0;t>NR;t>>=mz,e+=1);return e}const nge=t=>(Ype<<BigInt(t-1))-mz,rge={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||PR(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function RR(t,e,n={}){const r=(s,i,o)=>{const a=rge[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function P5(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const dr=BigInt(0),Un=BigInt(1),Xd=BigInt(2),sge=BigInt(3),VN=BigInt(4),k5=BigInt(5),O5=BigInt(8);function Yn(t,e){const n=t%e;return n>=dr?n:e+n}function ige(t,e,n){if(e<dr)throw new Error("invalid exponent, negatives unsupported");if(n<=dr)throw new Error("invalid modulus");if(n===Un)return dr;let r=Un;for(;e>dr;)e&Un&&(r=r*t%n),t=t*t%n,e>>=Un;return r}function aa(t,e,n){let r=t;for(;e-- >dr;)r*=r,r%=n;return r}function R5(t,e){if(t===dr)throw new Error("invert: expected non-zero number");if(e<=dr)throw new Error("invert: expected positive modulus, got "+e);let n=Yn(t,e),r=e,s=dr,i=Un;for(;n!==dr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Un)throw new Error("invert: does not exist");return Yn(s,e)}function oge(t){const e=(t-Un)/Xd;let n,r,s;for(n=t-Un,r=0;n%Xd===dr;n/=Xd,r++);for(s=Xd;s<t&&ige(s,e,t)!==t-Un;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Un)/VN;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Un)/Xd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Un<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function age(t){if(t%VN===sge){const e=(t+Un)/VN;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%O5===k5){const e=(t-k5)/O5;return function(n,r){const s=n.mul(r,Xd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Xd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return oge(t)}const cge=(t,e)=>(Yn(t,e)&Un)===Un,lge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uge(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=lge.reduce((r,s)=>(r[s]="function",r),e);return RR(t,n)}function dge(t,e,n){if(n<dr)throw new Error("invalid exponent, negatives unsupported");if(n===dr)return t.ONE;if(n===Un)return e;let r=t.ONE,s=e;for(;n>dr;)n&Un&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Un;return r}function hge(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function vz(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ez(t,e,n=!1,r={}){if(t<=dr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=vz(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:nge(s),ZERO:dr,ONE:Un,create:c=>Yn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return dr<=c&&c<t},is0:c=>c===dr,isOdd:c=>(c&Un)===Un,neg:c=>Yn(-c,t),eql:(c,l)=>c===l,sqr:c=>Yn(c*c,t),add:(c,l)=>Yn(c+l,t),sub:(c,l)=>Yn(c-l,t),mul:(c,l)=>Yn(c*l,t),pow:(c,l)=>dge(a,c,l),div:(c,l)=>Yn(c*R5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>R5(c,t),sqrt:r.sqrt||(c=>(o||(o=age(t)),o(a,c))),invertBatch:c=>hge(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?GN(c,i):bz(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?JE(c):Xpe(c)}});return Object.freeze(a)}const D5=BigInt(0),G1=BigInt(1);function S2(t,e){const n=e.negate();return t?n:e}function _z(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function I2(t,e){_z(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function fge(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function pge(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const T2=new WeakMap,xz=new WeakMap;function N2(t){return xz.get(t)||1}function gge(t,e){return{constTimeNegate:S2,hasPrecomputes(n){return N2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>D5;)r&G1&&(s=s.add(i)),i=i.double(),r>>=G1;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=I2(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=I2(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=G1);const g=f,y=f+Math.abs(p)-1,w=h%2!==0,v=p<0;p===0?c=c.add(S2(w,r[g])):a=a.add(S2(v,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=I2(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===D5)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=G1),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=T2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&T2.set(r,s(i))),i},wNAFCached(n,r,s){const i=N2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=N2(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){_z(r,e),xz.set(n,r),T2.delete(n)}}}function mge(t,e,n,r){if(fge(n,t),pge(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=tge(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function yge(t){return uge(t.Fp),RR(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vz(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const po=BigInt(0),Ns=BigInt(1),V1=BigInt(2),wge=BigInt(8),bge={zip215:!0};function vge(t){const e=yge(t);return RR(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Ege(t){const e=vge(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=V1<<BigInt(a*8)-Ns,u=n.create,d=Ez(e.n,e.nBitLength),h=e.uvRatio||((I,N)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(N))}}catch{return{isValid:!1,value:po}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,N,M)=>{if(C2("phflag",M),N.length||M)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,N){n0("coordinate "+I,N,po,l)}function y(I){if(!(I instanceof b))throw new Error("ExtendedPoint expected")}const w=P5((I,N)=>{const{ex:M,ey:B,ez:$}=I,j=I.is0();N==null&&(N=j?wge:n.inv($));const V=u(M*N),ee=u(B*N),ae=u($*N);if(j)return{x:po,y:Ns};if(ae!==Ns)throw new Error("invZ was invalid");return{x:V,y:ee}}),v=P5(I=>{const{a:N,d:M}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:B,ey:$,ez:j,et:V}=I,ee=u(B*B),ae=u($*$),re=u(j*j),ce=u(re*re),ye=u(ee*N),Z=u(re*u(ye+ae)),te=u(ce+u(M*u(ee*ae)));if(Z!==te)throw new Error("bad point: equation left != right (1)");const le=u(B*$),se=u(j*V);if(le!==se)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(N,M,B,$){this.ex=N,this.ey=M,this.ez=B,this.et=$,g("x",N),g("y",M),g("z",B),g("t",$),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof b)throw new Error("extended point not allowed");const{x:M,y:B}=N||{};return g("x",M),g("y",B),new b(M,B,Ns,u(M*B))}static normalizeZ(N){const M=n.invertBatch(N.map(B=>B.ez));return N.map((B,$)=>B.toAffine(M[$])).map(b.fromAffine)}static msm(N,M){return mge(b,d,N,M)}_setWindowSize(N){C.setWindowSize(this,N)}assertValidity(){v(this)}equals(N){y(N);const{ex:M,ey:B,ez:$}=this,{ex:j,ey:V,ez:ee}=N,ae=u(M*ee),re=u(j*$),ce=u(B*ee),ye=u(V*$);return ae===re&&ce===ye}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:M,ey:B,ez:$}=this,j=u(M*M),V=u(B*B),ee=u(V1*u($*$)),ae=u(N*j),re=M+B,ce=u(u(re*re)-j-V),ye=ae+V,Z=ye-ee,te=ae-V,le=u(ce*Z),se=u(ye*te),pe=u(ce*te),Fe=u(Z*ye);return new b(le,se,Fe,pe)}add(N){y(N);const{a:M,d:B}=e,{ex:$,ey:j,ez:V,et:ee}=this,{ex:ae,ey:re,ez:ce,et:ye}=N;if(M===BigInt(-1)){const Xt=u((j-$)*(re+ae)),kt=u((j+$)*(re-ae)),kn=u(kt-Xt);if(kn===po)return this.double();const Di=u(V*V1*ye),dl=u(ee*V1*ce),hl=dl+Di,mr=kt+Xt,Cs=dl-Di,fl=u(hl*kn),Oy=u(mr*Cs),pl=u(hl*Cs),n1=u(kn*mr);return new b(fl,Oy,n1,pl)}const Z=u($*ae),te=u(j*re),le=u(ee*B*ye),se=u(V*ce),pe=u(($+j)*(ae+re)-Z-te),Fe=se-le,Ce=se+le,xe=u(te-M*Z),je=u(pe*Fe),Ze=u(Ce*xe),qt=u(pe*xe),qn=u(Fe*Ce);return new b(je,Ze,qn,qt)}subtract(N){return this.add(N.negate())}wNAF(N){return C.wNAFCached(this,N,b.normalizeZ)}multiply(N){const M=N;n0("scalar",M,Ns,r);const{p:B,f:$}=this.wNAF(M);return b.normalizeZ([B,$])[0]}multiplyUnsafe(N,M=b.ZERO){const B=N;return n0("scalar",B,po,r),B===po?_:this.is0()||B===Ns?this:C.wNAFCachedUnsafe(this,B,b.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,r).is0()}toAffine(N){return w(this,N)}clearCofactor(){const{h:N}=e;return N===Ns?this:this.multiplyUnsafe(N)}static fromHex(N,M=!1){const{d:B,a:$}=e,j=n.BYTES;N=rc("pointHex",N,j),C2("zip215",M);const V=N.slice(),ee=N[j-1];V[j-1]=ee&-129;const ae=JE(V),re=M?l:n.ORDER;n0("pointHex.y",ae,po,re);const ce=u(ae*ae),ye=u(ce-Ns),Z=u(B*ce-$);let{isValid:te,value:le}=h(ye,Z);if(!te)throw new Error("Point.fromHex: invalid y coordinate");const se=(le&Ns)===Ns,pe=(ee&128)!==0;if(!M&&le===po&&pe)throw new Error("Point.fromHex: x=0 and x_0=1");return pe!==se&&(le=u(-le)),b.fromAffine({x:le,y:ae})}static fromPrivateKey(N){return S(N).point}toRawBytes(){const{x:N,y:M}=this.toAffine(),B=GN(M,n.BYTES);return B[B.length-1]|=N&Ns?128:0,B}toHex(){return OR(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,Ns,u(e.Gx*e.Gy)),b.ZERO=new b(po,Ns,Ns,po);const{BASE:x,ZERO:_}=b,C=gge(b,a*8);function A(I){return Yn(I,r)}function T(I){return A(JE(I))}function S(I){const N=n.BYTES;I=rc("private key",I,N);const M=rc("hashed private key",i(I),2*N),B=f(M.slice(0,N)),$=M.slice(N,2*N),j=T(B),V=x.multiply(j),ee=V.toRawBytes();return{head:B,prefix:$,scalar:j,point:V,pointBytes:ee}}function k(I){return S(I).pointBytes}function R(I=new Uint8Array,...N){const M=N5(...N);return T(i(p(M,rc("context",I),!!s)))}function F(I,N,M={}){I=rc("message",I),s&&(I=s(I));const{prefix:B,scalar:$,pointBytes:j}=S(N),V=R(M.context,B,I),ee=x.multiply(V).toRawBytes(),ae=R(M.context,ee,j,I),re=A(V+ae*$);n0("signature.s",re,po,r);const ce=N5(ee,GN(re,n.BYTES));return rc("result",ce,n.BYTES*2)}const W=bge;function Q(I,N,M,B=W){const{context:$,zip215:j}=B,V=n.BYTES;I=rc("signature",I,2*V),N=rc("message",N),M=rc("publicKey",M,V),j!==void 0&&C2("zip215",j),s&&(N=s(N));const ee=JE(I.slice(V,2*V));let ae,re,ce;try{ae=b.fromHex(M,j),re=b.fromHex(I.slice(0,V),j),ce=x.multiplyUnsafe(ee)}catch{return!1}if(!j&&ae.isSmallOrder())return!1;const ye=R($,re.toRawBytes(),ae.toRawBytes(),N);return re.add(ae.multiplyUnsafe(ye)).subtract(ce).clearCofactor().equals(b.ZERO)}return x._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:F,verify:Q,ExtendedPoint:b,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,N=b.BASE){return N._setWindowSize(I),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const DR=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),$5=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _ge=BigInt(1),U5=BigInt(2);BigInt(3);const xge=BigInt(5),Cge=BigInt(8);function Age(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=DR,o=t*t%i*t%i,a=aa(o,U5,i)*o%i,c=aa(a,_ge,i)*t%i,l=aa(c,xge,i)*c%i,u=aa(l,e,i)*l%i,d=aa(u,n,i)*u%i,h=aa(d,r,i)*d%i,f=aa(h,s,i)*h%i,p=aa(f,s,i)*h%i,g=aa(p,e,i)*l%i;return{pow_p_5_8:aa(g,U5,i)*t%i,b2:o}}function Sge(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Ige(t,e){const n=DR,r=Yn(e*e*e,n),s=Yn(r*r*e,n),i=Age(t*s).pow_p_5_8;let o=Yn(t*r*i,n);const a=Yn(e*o*o,n),c=o,l=Yn(o*$5,n),u=a===t,d=a===Yn(-t,n),h=a===Yn(-t*$5,n);return u&&(o=c),(d||h)&&(o=l),cge(o,n)&&(o=Yn(-o,n)),{isValid:u||d,value:o}}const Tge=Ez(DR,void 0,!0),Nge={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Tge,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Cge,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Jpe,randomBytes:pz,adjustScalarBytes:Sge,uvRatio:Ige},Cz=Ege(Nge),Pge="EdDSA",kge="JWT",sx=".",GC="base64url",Az="utf8",Sz="utf8",Oge=":",Rge="did",Dge="key",B5="base58btc",$ge="z",Uge="K36",Bge=32;function $R(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Iz(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?$R(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Tz(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Iz(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return $R(n)}function Lge(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,x=new Uint8Array(b);w!==v;){for(var _=p[w],C=0,A=b-1;(_!==0||C<y)&&A!==-1;A--,C++)_+=256*x[A]>>>0,x[A]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,w++}for(var T=b-y;T!==b&&x[T]===0;)T++;for(var S=c.repeat(g);T<b;++T)S+=t.charAt(x[T]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var _=0,C=v-1;(x!==0||_<w)&&C!==-1;C--,_++)x+=a*b[C]>>>0,b[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var A=v-w;A!==v&&b[A]===0;)A++;for(var T=new Uint8Array(y+(v-A)),S=y;A!==v;)T[S++]=b[A++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Mge=Lge,jge=Mge;const Nz=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Fge=t=>new TextEncoder().encode(t),zge=t=>new TextDecoder().decode(t);let Hge=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Wge=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Pz(this,e)}},qge=class{constructor(e){this.decoders=e}or(e){return Pz(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Pz=(t,e)=>new qge({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Gge=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Hge(e,n,r),this.decoder=new Wge(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const VC=({name:t,prefix:e,encode:n,decode:r})=>new Gge(t,e,n,r),Uv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=jge(n,e);return VC({prefix:t,name:e,encode:r,decode:i=>Nz(s(i))})},Vge=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Kge=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},$r=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>VC({prefix:e,name:t,encode(s){return Kge(s,r,n)},decode(s){return Vge(s,r,n,t)}}),Qge=VC({prefix:"\0",name:"identity",encode:t=>zge(t),decode:t=>Fge(t)});var Jge=Object.freeze({__proto__:null,identity:Qge});const Yge=$r({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Zge=Object.freeze({__proto__:null,base2:Yge});const Xge=$r({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var eme=Object.freeze({__proto__:null,base8:Xge});const tme=Uv({prefix:"9",name:"base10",alphabet:"0123456789"});var nme=Object.freeze({__proto__:null,base10:tme});const rme=$r({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sme=$r({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ime=Object.freeze({__proto__:null,base16:rme,base16upper:sme});const ome=$r({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ame=$r({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cme=$r({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lme=$r({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ume=$r({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dme=$r({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hme=$r({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fme=$r({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pme=$r({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gme=Object.freeze({__proto__:null,base32:ome,base32upper:ame,base32pad:cme,base32padupper:lme,base32hex:ume,base32hexupper:dme,base32hexpad:hme,base32hexpadupper:fme,base32z:pme});const mme=Uv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yme=Uv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wme=Object.freeze({__proto__:null,base36:mme,base36upper:yme});const bme=Uv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vme=Uv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Eme=Object.freeze({__proto__:null,base58btc:bme,base58flickr:vme});const _me=$r({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xme=$r({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cme=$r({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ame=$r({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Sme=Object.freeze({__proto__:null,base64:_me,base64pad:xme,base64url:Cme,base64urlpad:Ame});const kz=Array.from(""),Ime=kz.reduce((t,e,n)=>(t[n]=e,t),[]),Tme=kz.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Nme(t){return t.reduce((e,n)=>(e+=Ime[n],e),"")}function Pme(t){const e=[];for(const n of t){const r=Tme[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const kme=VC({prefix:"",name:"base256emoji",encode:Nme,decode:Pme});var Ome=Object.freeze({__proto__:null,base256emoji:kme}),Rme=Oz,L5=128,Dme=-128,$me=Math.pow(2,31);function Oz(t,e,n){e=e||[],n=n||0;for(var r=n;t>=$me;)e[n++]=t&255|L5,t/=128;for(;t&Dme;)e[n++]=t&255|L5,t>>>=7;return e[n]=t|0,Oz.bytes=n-r+1,e}var Ume=KN,Bme=128,M5=127;function KN(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw KN.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&M5)<<s:(o&M5)*Math.pow(2,s),s+=7}while(o>=Bme);return KN.bytes=i-r,n}var Lme=Math.pow(2,7),Mme=Math.pow(2,14),jme=Math.pow(2,21),Fme=Math.pow(2,28),zme=Math.pow(2,35),Hme=Math.pow(2,42),Wme=Math.pow(2,49),qme=Math.pow(2,56),Gme=Math.pow(2,63),Vme=function(t){return t<Lme?1:t<Mme?2:t<jme?3:t<Fme?4:t<zme?5:t<Hme?6:t<Wme?7:t<qme?8:t<Gme?9:10},Kme={encode:Rme,decode:Ume,encodingLength:Vme},Rz=Kme;const j5=(t,e,n=0)=>(Rz.encode(t,e,n),e),F5=t=>Rz.encodingLength(t),QN=(t,e)=>{const n=e.byteLength,r=F5(t),s=r+F5(n),i=new Uint8Array(s+n);return j5(t,i,0),j5(n,i,r),i.set(e,s),new Qme(t,n,e,i)};let Qme=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const Dz=({name:t,code:e,encode:n})=>new Jme(t,e,n);let Jme=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?QN(this.code,n):n.then(r=>QN(this.code,r))}else throw Error("Unknown type, must be binary type")}};const $z=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Yme=Dz({name:"sha2-256",code:18,encode:$z("SHA-256")}),Zme=Dz({name:"sha2-512",code:19,encode:$z("SHA-512")});var Xme=Object.freeze({__proto__:null,sha256:Yme,sha512:Zme});const Uz=0,eye="identity",Bz=Nz,tye=t=>QN(Uz,Bz(t)),nye={code:Uz,name:eye,encode:Bz,digest:tye};var rye=Object.freeze({__proto__:null,identity:nye});new TextEncoder,new TextDecoder;const z5={...Jge,...Zge,...eme,...nme,...ime,...gme,...wme,...Eme,...Sme,...Ome};({...Xme,...rye});function Lz(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const H5=Lz("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),P2=Lz("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Iz(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Mz={utf8:H5,"utf-8":H5,hex:z5.base16,latin1:P2,ascii:P2,binary:P2,...z5};function KC(t,e="utf8"){const n=Mz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function yy(t,e="utf8"){const n=Mz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$R(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function W5(t){return xf(KC(yy(t,GC),Az))}function ix(t){return KC(yy(nl(t),Az),GC)}function jz(t){const e=yy(Uge,B5),n=$ge+KC(Tz([e,t]),B5);return[Rge,Dge,n].join(Oge)}function sye(t){return KC(t,GC)}function iye(t){return yy(t,GC)}function oye(t){return yy([ix(t.header),ix(t.payload)].join(sx),Sz)}function aye(t){return[ix(t.header),ix(t.payload),sye(t.signature)].join(sx)}function JN(t){const e=t.split(sx),n=W5(e[0]),r=W5(e[1]),s=iye(e[2]),i=yy(e.slice(0,2).join(sx),Sz);return{header:n,payload:r,signature:s,data:i}}function q5(t=pz(Bge)){const e=Cz.getPublicKey(t);return{secretKey:Tz([t,e]),publicKey:e}}async function cye(t,e,n,r,s=we.fromMiliseconds(Date.now())){const i={alg:Pge,typ:kge},o=jz(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=oye({header:i,payload:c}),u=Cz.sign(l,r.secretKey.slice(0,32));return aye({header:i,payload:c,signature:u})}var G5=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},lye=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),uye=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),dye=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),hye=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),fye=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),pye=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,gye=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,V5=3,mye=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",pye]],K5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yye(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new fye:typeof navigator<"u"?bye(navigator.userAgent):Eye()}function wye(t){return t!==""&&mye.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function bye(t){var e=wye(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new hye;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<V5&&(s=G5(G5([],s,!0),_ye(V5-s.length),!0)):s=[];var i=s.join("."),o=vye(t),a=gye.exec(t);return a&&a[1]?new dye(n,i,o,a[1]):new lye(n,i,o)}function vye(t){for(var e=0,n=K5.length;e<n;e++){var r=K5[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function Eye(){var t=typeof process<"u"&&process.version;return t?new uye(process.version.slice(1)):null}function _ye(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.getLocalStorage=rn.getLocalStorageOrThrow=rn.getCrypto=rn.getCryptoOrThrow=Fz=rn.getLocation=rn.getLocationOrThrow=UR=rn.getNavigator=rn.getNavigatorOrThrow=Cf=rn.getDocument=rn.getDocumentOrThrow=rn.getFromWindowOrThrow=rn.getFromWindow=void 0;function Kf(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}rn.getFromWindow=Kf;function wy(t){const e=Kf(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}rn.getFromWindowOrThrow=wy;function xye(){return wy("document")}rn.getDocumentOrThrow=xye;function Cye(){return Kf("document")}var Cf=rn.getDocument=Cye;function Aye(){return wy("navigator")}rn.getNavigatorOrThrow=Aye;function Sye(){return Kf("navigator")}var UR=rn.getNavigator=Sye;function Iye(){return wy("location")}rn.getLocationOrThrow=Iye;function Tye(){return Kf("location")}var Fz=rn.getLocation=Tye;function Nye(){return wy("crypto")}rn.getCryptoOrThrow=Nye;function Pye(){return Kf("crypto")}rn.getCrypto=Pye;function kye(){return wy("localStorage")}rn.getLocalStorageOrThrow=kye;function Oye(){return Kf("localStorage")}rn.getLocalStorage=Oye;var BR={};Object.defineProperty(BR,"__esModule",{value:!0});var zz=BR.getWindowMetadata=void 0;const Q5=rn;function Rye(){let t,e;try{t=Q5.getDocumentOrThrow(),e=Q5.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(y.indexOf("/")===0)w+=y;else{const v=e.pathname.split("/");v.pop();const b=v.join("/");w+=b+"/"+y}h.push(w)}else if(y.indexOf("//")===0){const w=e.protocol+y;h.push(w)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}zz=BR.getWindowMetadata=Rye;function bb(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function YN(t){return bb(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Hz="2.31.0";let r0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${Hz}`};class Af extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Af?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Af&&n.cause.docsPath||n.docsPath,i=(a=r0.getDocsUrl)==null?void 0:a.call(r0,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...r0.version?[`Version: ${r0.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=Hz}walk(e){return Wz(this,e)}}function Wz(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Wz(t.cause,e):e?null:t}class qz extends Af{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function by(t,{dir:e,size:n=32}={}){return typeof t=="string"?Dye(t,{dir:e,size:n}):$ye(t,{dir:e,size:n})}function Dye(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new qz({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function $ye(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new qz({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class Uye extends Af{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Bye extends Af{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function vy(t,{size:e}){if(YN(t)>e)throw new Bye({givenSize:YN(t),maxSize:e})}function ZN(t,e={}){const{signed:n}=e;e.size&&vy(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Lye(t,e={}){return Number(ZN(t,e))}const Mye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function XN(t,e={}){return typeof t=="number"||typeof t=="bigint"?Vz(t,e):typeof t=="string"?zye(t,e):typeof t=="boolean"?jye(t,e):Gz(t,e)}function jye(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(vy(n,{size:e.size}),by(n,{size:e.size})):n}function Gz(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Mye[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(vy(r,{size:e.size}),by(r,{dir:"right",size:e.size})):r}function Vz(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Uye({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?by(a,{size:r}):a}const Fye=new TextEncoder;function zye(t,e={}){const n=Fye.encode(t);return Gz(n,e)}const Hye=new TextEncoder;function Wye(t,e={}){return typeof t=="number"||typeof t=="bigint"?Gye(t,e):typeof t=="boolean"?qye(t,e):bb(t)?Kz(t,e):Qz(t,e)}function qye(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(vy(n,{size:e.size}),by(n,{size:e.size})):n}const sc={zero:48,nine:57,A:65,F:70,a:97,f:102};function J5(t){if(t>=sc.zero&&t<=sc.nine)return t-sc.zero;if(t>=sc.A&&t<=sc.F)return t-(sc.A-10);if(t>=sc.a&&t<=sc.f)return t-(sc.a-10)}function Kz(t,e={}){let n=t;e.size&&(vy(n,{size:e.size}),n=by(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=J5(r.charCodeAt(a++)),l=J5(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Af(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Gye(t,e){const n=Vz(t,e);return Kz(n)}function Qz(t,e={}){const n=Hye.encode(t);return typeof e.size=="number"?(vy(n,{size:e.size}),by(n,{dir:"right",size:e.size})):n}function Jz(t,e){const n=e||"hex",r=PO(bb(t,{strict:!1})?Wye(t):t);return n==="bytes"?r:XN(r)}class Vye extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const k2=new Vye(8192);function Kye(t,e){if(k2.has(`${t}.${e}`))return k2.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Jz(Qz(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return k2.set(`${t}.${e}`,i),i}function Qye(t){const e=Jz(`0x${t.substring(4)}`).substring(26);return Kye(`0x${e}`)}async function Jye({hash:t,signature:e}){const n=bb(t)?t:XN(t),{secp256k1:r}=await Rn(async()=>{const{secp256k1:o}=await import("./secp256k1-Cqsz1zrt.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=Y5(f);return new r.Signature(ZN(l),ZN(u)).addRecoveryBit(p)}const o=bb(e)?e:XN(e);if(YN(o)!==65)throw new Error("invalid signature length");const a=Lye(`0x${o.slice(130)}`),c=Y5(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Y5(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Yye({hash:t,signature:e}){return Qye(await Jye({hash:t,signature:e}))}function Zye(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let v=l[h],b=0;for(let x=p-1;(v!==0||b<d)&&x!==-1;x--,b++)v+=256*g[x]>>>0,g[x]=v%n>>>0,v=v/n>>>0;if(v!==0)throw new Error("Non-zero carry");d=b,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let w=r.repeat(u);for(;y<p;++y)w+=t.charAt(g[y]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const v=l.charCodeAt(u);if(v>255)return;let b=e[v];if(b===255)return;let x=0;for(let _=f-1;(b!==0||x<h)&&_!==-1;_--,x++)b+=n*p[_]>>>0,p[_]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=x,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let w=d;for(;g!==f;)y[w++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Xye="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ey=Zye(Xye);function e0e(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function t0e(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const n0e=new TextEncoder,r0e=50;function s0e(t,e,n){n0e.encodeInto(t,e.subarray(n))}function i0e(t,e,n){t.length>r0e?s0e(t,e,n):t0e(t,e,n)}const o0e=4096;function Yz(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=o0e&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const a0e=new TextDecoder,c0e=200;function l0e(t,e,n){const r=t.subarray(e,e+n);return a0e.decode(r)}function u0e(t,e,n){return n>c0e?l0e(t,e,n):Yz(t,e,n)}class K1{constructor(e,n){this.type=e,this.data=n}}class bi extends Error{constructor(e){super(e);const n=Object.create(bi.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:bi.name})}}const s0=4294967295;function d0e(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Zz(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Xz(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function h0e(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const f0e=-1,p0e=4294967296-1,g0e=17179869184-1;function m0e({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=g0e)if(e===0&&t<=p0e){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),Zz(r,4,t),n}}function y0e(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function w0e(t){if(t instanceof Date){const e=y0e(t);return m0e(e)}else return null}function b0e(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=Xz(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new bi(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function v0e(t){const e=b0e(t);return new Date(e.sec*1e3+e.nsec/1e6)}const E0e={type:f0e,encode:w0e,decode:v0e};class ox{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(E0e)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new K1(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new K1(o,i)}}}return e instanceof K1?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new K1(n,e)}}ox.defaultCodec=new ox;function _0e(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function eP(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):_0e(t)?new Uint8Array(t):Uint8Array.from(t)}const x0e=100,C0e=2048;let A0e=class eH{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??ox.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??x0e,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??C0e,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new eH({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=e0e(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),i0e(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=eP(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),d0e(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),Zz(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function S0e(t,e){return new A0e(e).encodeSharedRef(t)}function O2(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const I0e=16,T0e=16;class N0e{constructor(e=I0e,n=T0e){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=Yz(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const tP="array",sw="map_key",tH="map_value",P0e=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new bi("The type of key must be string or number but "+typeof t)};class k0e{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=tP,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=sw,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===tP){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===sw||e.type===tH){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const i0=-1,LR=new DataView(new ArrayBuffer(0)),O0e=new Uint8Array(LR.buffer);try{LR.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Z5=new RangeError("Insufficient data"),R0e=new N0e;let D0e=class nH{constructor(e){this.totalPos=0,this.pos=0,this.view=LR,this.bytes=O0e,this.headByte=i0,this.stack=new k0e,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??ox.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??s0,this.maxBinLength=(e==null?void 0:e.maxBinLength)??s0,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??s0,this.maxMapLength=(e==null?void 0:e.maxMapLength)??s0,this.maxExtLength=(e==null?void 0:e.maxExtLength)??s0,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:R0e,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??P0e}clone(){return new nH({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=i0,this.stack.reset()}setBuffer(e){const n=eP(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===i0&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=eP(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${O2(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new bi(`Unrecognized type byte: ${O2(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===tP)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===sw){if(n==="__proto__")throw new bi("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=tH;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=sw;continue e}}return n}}readHeadByte(){return this.headByte===i0&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=i0}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new bi(`Unrecognized array type byte: ${O2(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new bi(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new bi(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new bi(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw Z5;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=u0e(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===sw:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new bi(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw Z5;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new bi(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=h0e(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Xz(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function $0e(t,e){return new D0e(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function U0e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function rH(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function ax(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function MR(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function nP(t){if(!Array.isArray(t))throw new Error("array expected")}function cx(t,e){if(!rH(!0,e))throw new Error(`${t}: array of strings expected`)}function B0e(t,e){if(!rH(!1,e))throw new Error(`${t}: array of numbers expected`)}function L0e(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function M0e(t){const e=typeof t=="string"?t.split(""):t,n=e.length;cx("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(nP(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(nP(s),s.map(i=>{ax("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function j0e(t=""){return ax("join",t),{encode:e=>(cx("join.decode",e),e.join(t)),decode:e=>(ax("join.decode",e),e.split(t))}}function F0e(t,e="="){return MR(t),ax("padding",e),{encode(n){for(cx("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){cx("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const sH=(t,e)=>e===0?t:sH(e,t%e),lx=(t,e)=>t+(e-sH(t,e)),R2=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function X5(t,e,n,r){if(nP(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(lx(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${lx(e,n)}`);let s=0,i=0;const o=R2[e],a=R2[n]-1,c=[];for(const l of t){if(MR(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=R2[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function z0e(t,e=!1){if(MR(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(lx(8,t)>32||lx(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!U0e(n))throw new Error("radix2.encode input should be Uint8Array");return X5(Array.from(n),8,t,!e)},decode:n=>(B0e("radix2.decode",n),Uint8Array.from(X5(n,t,8,e)))}}const H0e=L0e(z0e(5),M0e("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),F0e(5),j0e(""));function jR(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function iH(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?jR(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function iw(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=iH(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return jR(n)}function W0e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,x=new Uint8Array(b);w!==v;){for(var _=p[w],C=0,A=b-1;(_!==0||C<y)&&A!==-1;A--,C++)_+=256*x[A]>>>0,x[A]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,w++}for(var T=b-y;T!==b&&x[T]===0;)T++;for(var S=c.repeat(g);T<b;++T)S+=t.charAt(x[T]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var _=0,C=v-1;(x!==0||_<w)&&C!==-1;C--,_++)x+=a*b[C]>>>0,b[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var A=v-w;A!==v&&b[A]===0;)A++;for(var T=new Uint8Array(y+(v-A)),S=y;A!==v;)T[S++]=b[A++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var q0e=W0e,G0e=q0e;const V0e=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},K0e=t=>new TextEncoder().encode(t),Q0e=t=>new TextDecoder().decode(t);class J0e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Y0e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return oH(this,e)}}class Z0e{constructor(e){this.decoders=e}or(e){return oH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const oH=(t,e)=>new Z0e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class X0e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new J0e(e,n,r),this.decoder=new Y0e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const QC=({name:t,prefix:e,encode:n,decode:r})=>new X0e(t,e,n,r),Bv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=G0e(n,e);return QC({prefix:t,name:e,encode:r,decode:i=>V0e(s(i))})},ewe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},twe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ur=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>QC({prefix:e,name:t,encode(s){return twe(s,r,n)},decode(s){return ewe(s,r,n,t)}}),nwe=QC({prefix:"\0",name:"identity",encode:t=>Q0e(t),decode:t=>K0e(t)}),rwe=Object.freeze(Object.defineProperty({__proto__:null,identity:nwe},Symbol.toStringTag,{value:"Module"})),swe=Ur({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),iwe=Object.freeze(Object.defineProperty({__proto__:null,base2:swe},Symbol.toStringTag,{value:"Module"})),owe=Ur({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),awe=Object.freeze(Object.defineProperty({__proto__:null,base8:owe},Symbol.toStringTag,{value:"Module"})),cwe=Bv({prefix:"9",name:"base10",alphabet:"0123456789"}),lwe=Object.freeze(Object.defineProperty({__proto__:null,base10:cwe},Symbol.toStringTag,{value:"Module"})),uwe=Ur({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dwe=Ur({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),hwe=Object.freeze(Object.defineProperty({__proto__:null,base16:uwe,base16upper:dwe},Symbol.toStringTag,{value:"Module"})),fwe=Ur({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),pwe=Ur({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gwe=Ur({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mwe=Ur({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ywe=Ur({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wwe=Ur({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bwe=Ur({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vwe=Ur({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ewe=Ur({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),_we=Object.freeze(Object.defineProperty({__proto__:null,base32:fwe,base32hex:ywe,base32hexpad:bwe,base32hexpadupper:vwe,base32hexupper:wwe,base32pad:gwe,base32padupper:mwe,base32upper:pwe,base32z:Ewe},Symbol.toStringTag,{value:"Module"})),xwe=Bv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Cwe=Bv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Awe=Object.freeze(Object.defineProperty({__proto__:null,base36:xwe,base36upper:Cwe},Symbol.toStringTag,{value:"Module"})),Swe=Bv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Iwe=Bv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Twe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Swe,base58flickr:Iwe},Symbol.toStringTag,{value:"Module"})),Nwe=Ur({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pwe=Ur({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),kwe=Ur({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Owe=Ur({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Rwe=Object.freeze(Object.defineProperty({__proto__:null,base64:Nwe,base64pad:Pwe,base64url:kwe,base64urlpad:Owe},Symbol.toStringTag,{value:"Module"})),aH=Array.from(""),Dwe=aH.reduce((t,e,n)=>(t[n]=e,t),[]),$we=aH.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Uwe(t){return t.reduce((e,n)=>(e+=Dwe[n],e),"")}function Bwe(t){const e=[];for(const n of t){const r=$we[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Lwe=QC({prefix:"",name:"base256emoji",encode:Uwe,decode:Bwe}),Mwe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Lwe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const eU={...rwe,...iwe,...awe,...lwe,...hwe,..._we,...Awe,...Twe,...Rwe,...Mwe};function cH(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const tU=cH("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),D2=cH("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=iH(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),lH={utf8:tU,"utf-8":tU,hex:eU.base16,latin1:D2,ascii:D2,binary:D2,...eU};function no(t,e="utf8"){const n=lH[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?jR(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ei(t,e="utf8"){const n=lH[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const jwe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Fwe="Input must be an string, Buffer or Uint8Array";function zwe(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(Fwe);return e}function Hwe(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Q1(t){return(4294967296+t).toString(16).substring(1)}function Wwe(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=Q1(e[s]).toUpperCase(),r+=" ",r+=Q1(e[s+1]).toUpperCase();else if(n===64)r+=Q1(e[s+1]).toUpperCase(),r+=Q1(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function qwe(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var uH={normalizeInput:zwe,toHex:Hwe,debugPrint:Wwe,testSpeed:qwe};const YE=uH;function J1(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function nU(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function dH(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Il(t,e,n,r,s,i){const o=O0[s],a=O0[s+1],c=O0[i],l=O0[i+1];J1(tt,t,e),nU(tt,t,o,a);let u=tt[r]^tt[t],d=tt[r+1]^tt[t+1];tt[r]=d,tt[r+1]=u,J1(tt,n,r),u=tt[e]^tt[n],d=tt[e+1]^tt[n+1],tt[e]=u>>>24^d<<8,tt[e+1]=d>>>24^u<<8,J1(tt,t,e),nU(tt,t,c,l),u=tt[r]^tt[t],d=tt[r+1]^tt[t+1],tt[r]=u>>>16^d<<16,tt[r+1]=d>>>16^u<<16,J1(tt,n,r),u=tt[e]^tt[n],d=tt[e+1]^tt[n+1],tt[e]=d>>>31^u<<1,tt[e+1]=u>>>31^d<<1}const hH=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Gwe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Fr=new Uint8Array(Gwe.map(function(t){return t*2})),tt=new Uint32Array(32),O0=new Uint32Array(32);function fH(t,e){let n=0;for(n=0;n<16;n++)tt[n]=t.h[n],tt[n+16]=hH[n];for(tt[24]=tt[24]^t.t,tt[25]=tt[25]^t.t/4294967296,e&&(tt[28]=~tt[28],tt[29]=~tt[29]),n=0;n<32;n++)O0[n]=dH(t.b,4*n);for(n=0;n<12;n++)Il(0,8,16,24,Fr[n*16+0],Fr[n*16+1]),Il(2,10,18,26,Fr[n*16+2],Fr[n*16+3]),Il(4,12,20,28,Fr[n*16+4],Fr[n*16+5]),Il(6,14,22,30,Fr[n*16+6],Fr[n*16+7]),Il(0,10,20,30,Fr[n*16+8],Fr[n*16+9]),Il(2,12,22,24,Fr[n*16+10],Fr[n*16+11]),Il(4,14,16,26,Fr[n*16+12],Fr[n*16+13]),Il(6,8,18,28,Fr[n*16+14],Fr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^tt[n]^tt[n+16]}const Tl=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function pH(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Tl.fill(0),Tl[0]=t,e&&(Tl[1]=e.length),Tl[2]=1,Tl[3]=1,n&&Tl.set(n,32),r&&Tl.set(r,48);for(let i=0;i<16;i++)s.h[i]=hH[i]^dH(Tl,i*4);return e&&(FR(s,e),s.c=128),s}function FR(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,fH(t,!1),t.c=0),t.b[t.c++]=e[n]}function gH(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;fH(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function mH(t,e,n,r,s){n=n||64,t=YE.normalizeInput(t),r&&(r=YE.normalizeInput(r)),s&&(s=YE.normalizeInput(s));const i=pH(n,e,r,s);return FR(i,t),gH(i)}function Vwe(t,e,n,r,s){const i=mH(t,e,n,r,s);return YE.toHex(i)}var Kwe={blake2b:mH,blake2bHex:Vwe,blake2bInit:pH,blake2bUpdate:FR,blake2bFinal:gH};const yH=uH;function Qwe(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Nl(t,e,n,r,s,i){It[t]=It[t]+It[e]+s,It[r]=Y1(It[r]^It[t],16),It[n]=It[n]+It[r],It[e]=Y1(It[e]^It[n],12),It[t]=It[t]+It[e]+i,It[r]=Y1(It[r]^It[t],8),It[n]=It[n]+It[r],It[e]=Y1(It[e]^It[n],7)}function Y1(t,e){return t>>>e^t<<32-e}const wH=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),It=new Uint32Array(16),wr=new Uint32Array(16);function bH(t,e){let n=0;for(n=0;n<8;n++)It[n]=t.h[n],It[n+8]=wH[n];for(It[12]^=t.t,It[13]^=t.t/4294967296,e&&(It[14]=~It[14]),n=0;n<16;n++)wr[n]=Qwe(t.b,4*n);for(n=0;n<10;n++)Nl(0,4,8,12,wr[zr[n*16+0]],wr[zr[n*16+1]]),Nl(1,5,9,13,wr[zr[n*16+2]],wr[zr[n*16+3]]),Nl(2,6,10,14,wr[zr[n*16+4]],wr[zr[n*16+5]]),Nl(3,7,11,15,wr[zr[n*16+6]],wr[zr[n*16+7]]),Nl(0,5,10,15,wr[zr[n*16+8]],wr[zr[n*16+9]]),Nl(1,6,11,12,wr[zr[n*16+10]],wr[zr[n*16+11]]),Nl(2,7,8,13,wr[zr[n*16+12]],wr[zr[n*16+13]]),Nl(3,4,9,14,wr[zr[n*16+14]],wr[zr[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=It[n]^It[n+8]}function vH(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(wH),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(zR(r,e),r.c=64),r}function zR(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,bH(t,!1),t.c=0),t.b[t.c++]=e[n]}function EH(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;bH(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function _H(t,e,n){n=n||32,t=yH.normalizeInput(t);const r=vH(n,e);return zR(r,t),EH(r)}function Jwe(t,e,n){const r=_H(t,e,n);return yH.toHex(r)}var Ywe={blake2s:_H,blake2sHex:Jwe,blake2sInit:vH,blake2sUpdate:zR,blake2sFinal:EH};const o0=Kwe,a0=Ywe;var Zwe={blake2b:o0.blake2b,blake2bHex:o0.blake2bHex,blake2bInit:o0.blake2bInit,blake2bUpdate:o0.blake2bUpdate,blake2bFinal:o0.blake2bFinal,blake2s:a0.blake2s,blake2sHex:a0.blake2sHex,blake2sInit:a0.blake2sInit,blake2sUpdate:a0.blake2sUpdate,blake2sFinal:a0.blake2sFinal},Xwe={};const ebe=":";function vg(t){const[e,n]=t.split(ebe);return{namespace:e,reference:n}}function xH(t,e){return t.includes(":")?[t]:e.chains||[]}var tbe=Object.defineProperty,nbe=Object.defineProperties,rbe=Object.getOwnPropertyDescriptors,rU=Object.getOwnPropertySymbols,sbe=Object.prototype.hasOwnProperty,ibe=Object.prototype.propertyIsEnumerable,sU=(t,e,n)=>e in t?tbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iU=(t,e)=>{for(var n in e||(e={}))sbe.call(e,n)&&sU(t,n,e[n]);if(rU)for(var n of rU(e))ibe.call(e,n)&&sU(t,n,e[n]);return t},obe=(t,e)=>nbe(t,rbe(e));const abe="ReactNative",_i={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},cbe="js";function ux(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Td(){return!Cf()&&!!UR()&&navigator.product===abe}function lbe(){return Td()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function ube(){return Td()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function _y(){return!ux()&&!!UR()&&!!Cf()}function Lv(){return Td()?_i.reactNative:ux()?_i.node:_y()?_i.browser:_i.unknown}function oU(){var t;try{return Td()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function dbe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function hbe(t){var e,n;const r=CH();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),obe(iU(iU({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function CH(){return zz()||{name:"",description:"",url:"",icons:[""]}}function fbe(){if(Lv()===_i.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=yye();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function pbe(){var t;const e=Lv();return e===_i.browser?[e,((t=Fz())==null?void 0:t.host)||"unknown"].join(":"):e}function AH(t,e,n){const r=fbe(),s=pbe();return[[t,e].join("-"),[cbe,n].join("-"),r,s].join("/")}function gbe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=AH(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=dbe(l[1]||"",d);return l[0]+"?"+h}function gh(t,e){return t.filter(n=>e.includes(n)).length===t.length}function rP(t){return Object.fromEntries(t.entries())}function sP(t){return new Map(Object.entries(t))}function Kd(t=we.FIVE_MINUTES,e){const n=we.toMiliseconds(t||we.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Mu(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function SH(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function mbe(t){return SH("topic",t)}function ybe(t){return SH("id",t)}function IH(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Kn(t,e){return we.fromMiliseconds(Date.now()+we.toMiliseconds(t))}function Jl(t){return Date.now()>=we.toMiliseconds(t)}function Rt(t,e){return`${t}${e?`:${e}`:""}`}function za(t=[],e=[]){return[...new Set([...t,...e])]}async function wbe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=bbe(i,t,e),a=Lv();if(a===_i.browser){if(!((r=Cf())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}vbe(o)}else a===_i.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function bbe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Cbe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function vbe(t){let e="_self";xbe()?e="_top":(_be()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Ebe(t,e){let n="";try{if(_y()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function aU(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function cU(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function HR(){return typeof process<"u"&&Xwe.IS_VITEST==="true"}function _be(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function xbe(){try{return window.self!==window.top}catch{return!1}}function Cbe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function TH(t){return Buffer.from(t,"base64").toString("utf-8")}function Abe(t){return new Promise(e=>setTimeout(e,t))}const Z1=BigInt(2**32-1),lU=BigInt(32);function NH(t,e=!1){return e?{h:Number(t&Z1),l:Number(t>>lU&Z1)}:{h:Number(t>>lU&Z1)|0,l:Number(t&Z1)|0}}function PH(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=NH(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const uU=(t,e,n)=>t>>>n,dU=(t,e,n)=>t<<32-n|e>>>n,Yl=(t,e,n)=>t>>>n|e<<32-n,Zl=(t,e,n)=>t<<32-n|e>>>n,R0=(t,e,n)=>t<<64-n|e>>>n-32,D0=(t,e,n)=>t>>>n-32|e<<64-n,Sbe=(t,e)=>e,Ibe=(t,e)=>t,Tbe=(t,e,n)=>t<<n|e>>>32-n,Nbe=(t,e,n)=>e<<n|t>>>32-n,Pbe=(t,e,n)=>e<<n-32|t>>>64-n,kbe=(t,e,n)=>t<<n-32|e>>>64-n;function _o(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const WR=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),qR=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Obe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Rbe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Dbe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),$be=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,hp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function GR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function rl(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function oo(t,...e){if(!GR(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function VR(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");rl(t.outputLen),rl(t.blockLen)}function md(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function KR(t,e){oo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function vb(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ao(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function $2(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ca(t,e){return t<<32-e|t>>>e}const kH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function OH(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const lc=kH?t=>t:t=>OH(t);function Ube(t){for(let e=0;e<t.length;e++)t[e]=OH(t[e]);return t}const Xl=kH?t=>t:Ube,RH=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Bbe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Eb(t){if(oo(t),RH)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Bbe[t[n]];return e}const ic={_0:48,_9:57,A:65,F:70,a:97,f:102};function hU(t){if(t>=ic._0&&t<=ic._9)return t-ic._0;if(t>=ic.A&&t<=ic.F)return t-(ic.A-10);if(t>=ic.a&&t<=ic.f)return t-(ic.a-10)}function QR(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(RH)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=hU(t.charCodeAt(i)),a=hU(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Lbe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ko(t){return typeof t=="string"&&(t=Lbe(t)),oo(t),t}function mh(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];oo(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let JC=class{};function Mv(t){const e=r=>t().update(Ko(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Mbe(t){const e=(r,s)=>t(s).update(Ko(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function xy(t=32){if(hp&&typeof hp.getRandomValues=="function")return hp.getRandomValues(new Uint8Array(t));if(hp&&typeof hp.randomBytes=="function")return Uint8Array.from(hp.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const jbe=BigInt(0),c0=BigInt(1),Fbe=BigInt(2),zbe=BigInt(7),Hbe=BigInt(256),Wbe=BigInt(113),DH=[],$H=[],UH=[];for(let t=0,e=c0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],DH.push(2*(5*r+n)),$H.push((t+1)*(t+2)/2%64);let s=jbe;for(let i=0;i<7;i++)e=(e<<c0^(e>>zbe)*Wbe)%Hbe,e&Fbe&&(s^=c0<<(c0<<BigInt(i))-c0);UH.push(s)}const BH=PH(UH,!0),qbe=BH[0],Gbe=BH[1],fU=(t,e,n)=>n>32?Pbe(t,e,n):Tbe(t,e,n),pU=(t,e,n)=>n>32?kbe(t,e,n):Nbe(t,e,n);function Vbe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=fU(l,u,1)^n[a],h=pU(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=$H[o],c=fU(s,i,a),l=pU(s,i,a),u=DH[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=qbe[r],t[1]^=Gbe[r]}ao(n)}let Kbe=class LH extends JC{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,rl(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=vb(this.state)}clone(){return this._cloneInto()}keccak(){Xl(this.state32),Vbe(this.state32,this.rounds),Xl(this.state32),this.posOut=0,this.pos=0}update(e){md(this),e=Ko(e),oo(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){md(this,!1),oo(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return rl(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(KR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ao(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new LH(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Qbe=(t,e,n)=>Mv(()=>new Kbe(e,t,n)),Jbe=Qbe(1,136,256/8);function Ybe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Zbe(t,e,n){return t&e^~t&n}function Xbe(t,e,n){return t&e^t&n^e&n}let MH=class extends JC{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=$2(this.buffer)}update(e){md(this),e=Ko(e),oo(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=$2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){md(this),KR(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ao(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Ybe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=$2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Pl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Wr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),eve=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kl=new Uint32Array(64);let tve=class extends MH{constructor(e=32){super(64,e,8,!1),this.A=Pl[0]|0,this.B=Pl[1]|0,this.C=Pl[2]|0,this.D=Pl[3]|0,this.E=Pl[4]|0,this.F=Pl[5]|0,this.G=Pl[6]|0,this.H=Pl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)kl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=kl[d-15],f=kl[d-2],p=ca(h,7)^ca(h,18)^h>>>3,g=ca(f,17)^ca(f,19)^f>>>10;kl[d]=g+kl[d-7]+p+kl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ca(a,6)^ca(a,11)^ca(a,25),f=u+h+Zbe(a,c,l)+eve[d]+kl[d]|0,p=(ca(r,2)^ca(r,13)^ca(r,22))+Xbe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){ao(kl)}destroy(){this.set(0,0,0,0,0,0,0,0),ao(this.buffer)}};const jH=PH(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),nve=jH[0],rve=jH[1],Ol=new Uint32Array(80),Rl=new Uint32Array(80);let JR=class extends MH{constructor(e=64){super(128,e,16,!1),this.Ah=Wr[0]|0,this.Al=Wr[1]|0,this.Bh=Wr[2]|0,this.Bl=Wr[3]|0,this.Ch=Wr[4]|0,this.Cl=Wr[5]|0,this.Dh=Wr[6]|0,this.Dl=Wr[7]|0,this.Eh=Wr[8]|0,this.El=Wr[9]|0,this.Fh=Wr[10]|0,this.Fl=Wr[11]|0,this.Gh=Wr[12]|0,this.Gl=Wr[13]|0,this.Hh=Wr[14]|0,this.Hl=Wr[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Ol[b]=e.getUint32(n),Rl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const x=Ol[b-15]|0,_=Rl[b-15]|0,C=Yl(x,_,1)^Yl(x,_,8)^uU(x,_,7),A=Zl(x,_,1)^Zl(x,_,8)^dU(x,_,7),T=Ol[b-2]|0,S=Rl[b-2]|0,k=Yl(T,S,19)^R0(T,S,61)^uU(T,S,6),R=Zl(T,S,19)^D0(T,S,61)^dU(T,S,6),F=Obe(A,R,Rl[b-7],Rl[b-16]),W=Rbe(F,C,k,Ol[b-7],Ol[b-16]);Ol[b]=W|0,Rl[b]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const x=Yl(d,h,14)^Yl(d,h,18)^R0(d,h,41),_=Zl(d,h,14)^Zl(d,h,18)^D0(d,h,41),C=d&f^~d&g,A=h&p^~h&y,T=Dbe(v,_,A,rve[b],Rl[b]),S=$be(T,w,x,C,nve[b],Ol[b]),k=T|0,R=Yl(r,s,28)^R0(r,s,34)^R0(r,s,39),F=Zl(r,s,28)^D0(r,s,34)^D0(r,s,39),W=r&i^r&a^i&a,Q=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=_o(l|0,u|0,S|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=WR(k,F,Q);r=qR(I,S,R,W),s=I|0}({h:r,l:s}=_o(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=_o(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=_o(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=_o(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=_o(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=_o(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=_o(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=_o(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){ao(Ol,Rl)}destroy(){ao(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},sve=class extends JR{constructor(){super(48),this.Ah=Hr[0]|0,this.Al=Hr[1]|0,this.Bh=Hr[2]|0,this.Bl=Hr[3]|0,this.Ch=Hr[4]|0,this.Cl=Hr[5]|0,this.Dh=Hr[6]|0,this.Dl=Hr[7]|0,this.Eh=Hr[8]|0,this.El=Hr[9]|0,this.Fh=Hr[10]|0,this.Fl=Hr[11]|0,this.Gh=Hr[12]|0,this.Gl=Hr[13]|0,this.Hh=Hr[14]|0,this.Hl=Hr[15]|0}};const qr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let ive=class extends JR{constructor(){super(32),this.Ah=qr[0]|0,this.Al=qr[1]|0,this.Bh=qr[2]|0,this.Bl=qr[3]|0,this.Ch=qr[4]|0,this.Cl=qr[5]|0,this.Dh=qr[6]|0,this.Dl=qr[7]|0,this.Eh=qr[8]|0,this.El=qr[9]|0,this.Fh=qr[10]|0,this.Fl=qr[11]|0,this.Gh=qr[12]|0,this.Gl=qr[13]|0,this.Hh=qr[14]|0,this.Hl=qr[15]|0}};const YC=Mv(()=>new tve),ove=Mv(()=>new JR),ave=Mv(()=>new sve),cve=Mv(()=>new ive),lve=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Vn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Te=new Uint32Array(32);function Dl(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Te[2*t],l=Te[2*t+1],u=Te[2*e],d=Te[2*e+1],h=Te[2*n],f=Te[2*n+1],p=Te[2*r],g=Te[2*r+1],y=WR(c,u,o);l=qR(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Sbe(g,p),Dl:Ibe(g)},{h:f,l:h}=_o(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Yl(d,u,24),Bl:Zl(d,u,24)},Te[2*t]=c,Te[2*t+1]=l,Te[2*e]=u,Te[2*e+1]=d,Te[2*n]=h,Te[2*n+1]=f,Te[2*r]=p,Te[2*r+1]=g}function $l(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Te[2*t],l=Te[2*t+1],u=Te[2*e],d=Te[2*e+1],h=Te[2*n],f=Te[2*n+1],p=Te[2*r],g=Te[2*r+1],y=WR(c,u,o);l=qR(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Yl(g,p,16),Dl:Zl(g,p,16)},{h:f,l:h}=_o(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:R0(d,u,63),Bl:D0(d,u,63)},Te[2*t]=c,Te[2*t+1]=l,Te[2*e]=u,Te[2*e+1]=d,Te[2*n]=h,Te[2*n+1]=f,Te[2*r]=p,Te[2*r+1]=g}function uve(t,e={},n,r,s){if(rl(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class dve extends JC{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,rl(e),rl(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=vb(this.buffer)}update(e){md(this),e=Ko(e),oo(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Xl(s),this.compress(s,0,!1),Xl(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));Xl(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);Xl(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){md(this),KR(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,ao(this.buffer.subarray(n)),Xl(r),this.compress(r,0,!0),Xl(r);const s=vb(e);this.get().forEach((i,o)=>s[o]=lc(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class hve extends dve{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Vn[0]|0,this.v0h=Vn[1]|0,this.v1l=Vn[2]|0,this.v1h=Vn[3]|0,this.v2l=Vn[4]|0,this.v2h=Vn[5]|0,this.v3l=Vn[6]|0,this.v3h=Vn[7]|0,this.v4l=Vn[8]|0,this.v4h=Vn[9]|0,this.v5l=Vn[10]|0,this.v5h=Vn[11]|0,this.v6l=Vn[12]|0,this.v6h=Vn[13]|0,this.v7l=Vn[14]|0,this.v7h=Vn[15]|0,uve(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Ko(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Ko(i);const a=vb(i);this.v4l^=lc(a[0]),this.v4h^=lc(a[1]),this.v5l^=lc(a[2]),this.v5h^=lc(a[3])}if(s!==void 0){s=Ko(s);const a=vb(s);this.v6l^=lc(a[0]),this.v6h^=lc(a[1]),this.v7l^=lc(a[2]),this.v7h^=lc(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,l)=>Te[l]=c),Te.set(Vn,16);let{h:s,l:i}=NH(BigInt(this.length));Te[24]=Vn[8]^i,Te[25]=Vn[9]^s,r&&(Te[28]=~Te[28],Te[29]=~Te[29]);let o=0;const a=lve;for(let c=0;c<12;c++)Dl(0,4,8,12,e,n+2*a[o++]),$l(0,4,8,12,e,n+2*a[o++]),Dl(1,5,9,13,e,n+2*a[o++]),$l(1,5,9,13,e,n+2*a[o++]),Dl(2,6,10,14,e,n+2*a[o++]),$l(2,6,10,14,e,n+2*a[o++]),Dl(3,7,11,15,e,n+2*a[o++]),$l(3,7,11,15,e,n+2*a[o++]),Dl(0,5,10,15,e,n+2*a[o++]),$l(0,5,10,15,e,n+2*a[o++]),Dl(1,6,11,12,e,n+2*a[o++]),$l(1,6,11,12,e,n+2*a[o++]),Dl(2,7,8,13,e,n+2*a[o++]),$l(2,7,8,13,e,n+2*a[o++]),Dl(3,4,9,14,e,n+2*a[o++]),$l(3,4,9,14,e,n+2*a[o++]);this.v0l^=Te[0]^Te[16],this.v0h^=Te[1]^Te[17],this.v1l^=Te[2]^Te[18],this.v1h^=Te[3]^Te[19],this.v2l^=Te[4]^Te[20],this.v2h^=Te[5]^Te[21],this.v3l^=Te[6]^Te[22],this.v3h^=Te[7]^Te[23],this.v4l^=Te[8]^Te[24],this.v4h^=Te[9]^Te[25],this.v5l^=Te[10]^Te[26],this.v5h^=Te[11]^Te[27],this.v6l^=Te[12]^Te[28],this.v6h^=Te[13]^Te[29],this.v7l^=Te[14]^Te[30],this.v7h^=Te[15]^Te[31],ao(Te)}destroy(){this.destroyed=!0,ao(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const fve=Mbe(t=>new hve(t)),pve="https://rpc.walletconnect.org/v1";function FH(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Jbe(n)).toString("hex")}async function gve(t,e,n,r,s,i){switch(n.t){case"eip191":return await mve(t,e,n.s);case"eip1271":return await yve(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function mve(t,e,n){return(await Yye({hash:FH(e),signature:n})).toLowerCase()===t.toLowerCase()}async function yve(t,e,n,r,s,i){const o=vg(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:FH(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||pve}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:wve(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function wve(){return Date.now()+Math.floor(Math.random()*1e3)}function bve(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Ey.encode(i)}function vve(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=fve(r,{dkLen:32});return Ey.encode(s)}function gU(t){const e=new Uint8Array(YC(Eve(t)));return Ey.encode(e)}function Eve(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function mU(t){const e=Buffer.from(t,"base64"),n=$0e(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=S0e(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=cve(i);return H0e.encode(o).replace(/=+$/,"")}function U2(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function _ve(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(U2(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(U2(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(U2(r.length)),s.push(r);const i=Buffer.concat(s),o=YC(i);return Buffer.from(o).toString("hex").toUpperCase()}var xve=Object.defineProperty,Cve=Object.defineProperties,Ave=Object.getOwnPropertyDescriptors,yU=Object.getOwnPropertySymbols,Sve=Object.prototype.hasOwnProperty,Ive=Object.prototype.propertyIsEnumerable,wU=(t,e,n)=>e in t?xve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tve=(t,e)=>{for(var n in e||(e={}))Sve.call(e,n)&&wU(t,n,e[n]);if(yU)for(var n of yU(e))Ive.call(e,n)&&wU(t,n,e[n]);return t},Nve=(t,e)=>Cve(t,Ave(e));const Pve="did:pkh:",YR=t=>t==null?void 0:t.split(":"),kve=t=>{const e=t&&YR(t);if(e)return t.includes(Pve)?e[3]:e[1]},iP=t=>{const e=t&&YR(t);if(e)return e[2]+":"+e[3]},dx=t=>{const e=t&&YR(t);if(e)return e.pop()};async function bU(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=zH(s,s.iss),o=dx(s.iss);return await gve(o,i,r,iP(s.iss),n)}const zH=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=dx(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${kve(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=ZE(t.resources);if(p){const g=_b(p);s=jve(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function Ove(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Rve(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Sf(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function Dve(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:$ve(e,n,r)}}}function $ve(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function HH(t){return Sf(t),`urn:recap:${Ove(t).replace(/=/g,"")}`}function _b(t){const e=Rve(t.replace("urn:recap:",""));return Sf(e),e}function Uve(t,e,n){const r=Dve(t,e,n);return HH(r)}function Bve(t){return t&&t.includes("urn:recap:")}function Lve(t,e){const n=_b(t),r=_b(e),s=Mve(n,r);return HH(s)}function Mve(t,e){Sf(t),Sf(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=Nve(Tve({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function jve(t="",e){Sf(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function vU(t){var e;const n=_b(t);Sf(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function EU(t){const e=_b(t);Sf(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function ZE(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Bve(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function WH(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function oP(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function B2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Hs(t,...e){if(!WH(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _U(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Fve(t,e){Hs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function nd(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Wm(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function zve(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Hve=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Wve(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function aP(t){if(typeof t=="string")t=Wve(t);else if(WH(t))t=cP(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function qve(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Gve(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Vve=(t,e)=>{function n(r,...s){if(Hs(r),!Hve)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Hs(l):Hs(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Hs(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Hs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Hs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Hs(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function xU(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Qve(e))throw new Error("invalid output, must be aligned");return e}function CU(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Kve(t,e,n){oP(n);const r=new Uint8Array(16),s=zve(r);return CU(s,0,BigInt(e),n),CU(s,8,BigInt(t),n),r}function Qve(t){return t.byteOffset%4===0}function cP(t){return Uint8Array.from(t)}const qH=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Jve=qH("expand 16-byte k"),Yve=qH("expand 32-byte k"),Zve=nd(Jve),Xve=nd(Yve);function Ct(t,e){return t<<e|t>>>32-e}function lP(t){return t.byteOffset%4===0}const X1=64,e1e=16,GH=2**32-1,AU=new Uint32Array;function t1e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(X1),u=nd(l),d=lP(s)&&lP(i),h=d?nd(s):AU,f=d?nd(i):AU;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=GH)throw new Error("arx: counter overflow");const g=Math.min(X1,c-p);if(d&&g===X1){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,v;w<e1e;w++)v=y+w,f[v]=h[v]^u[w];p+=X1;continue}for(let y=0,w;y<g;y++)w=p+y,i[w]=s[w]^l[y];p+=g}}function n1e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=qve({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return B2(s),B2(o),oP(i),oP(n),(a,c,l,u,d=0)=>{Hs(a),Hs(c),Hs(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Hs(u),B2(d),d<0||d>=GH)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=cP(a)),y=Xve;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=Zve,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);lP(c)||f.push(c=cP(c));const w=nd(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,w,nd(c.subarray(0,16)),w),c=c.subarray(16)}const v=16-s;if(v!==c.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const x=new Uint8Array(12);x.set(c,i?0:12-c.length),c=x,f.push(c)}const b=nd(c);return t1e(t,y,w,b,l,u,d,o),Wm(...f),u}}const br=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class r1e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=aP(e),Hs(e,32);const n=br(e,0),r=br(e,2),s=br(e,4),i=br(e,6),o=br(e,8),a=br(e,10),c=br(e,12),l=br(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=br(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],w=br(e,n+0),v=br(e,n+2),b=br(e,n+4),x=br(e,n+6),_=br(e,n+8),C=br(e,n+10),A=br(e,n+12),T=br(e,n+14);let S=i[0]+(w&8191),k=i[1]+((w>>>13|v<<3)&8191),R=i[2]+((v>>>10|b<<6)&8191),F=i[3]+((b>>>7|x<<9)&8191),W=i[4]+((x>>>4|_<<12)&8191),Q=i[5]+(_>>>1&8191),I=i[6]+((_>>>14|C<<2)&8191),N=i[7]+((C>>>11|A<<5)&8191),M=i[8]+((A>>>8|T<<8)&8191),B=i[9]+(T>>>5|s),$=0,j=$+S*a+k*(5*y)+R*(5*g)+F*(5*p)+W*(5*f);$=j>>>13,j&=8191,j+=Q*(5*h)+I*(5*d)+N*(5*u)+M*(5*l)+B*(5*c),$+=j>>>13,j&=8191;let V=$+S*c+k*a+R*(5*y)+F*(5*g)+W*(5*p);$=V>>>13,V&=8191,V+=Q*(5*f)+I*(5*h)+N*(5*d)+M*(5*u)+B*(5*l),$+=V>>>13,V&=8191;let ee=$+S*l+k*c+R*a+F*(5*y)+W*(5*g);$=ee>>>13,ee&=8191,ee+=Q*(5*p)+I*(5*f)+N*(5*h)+M*(5*d)+B*(5*u),$+=ee>>>13,ee&=8191;let ae=$+S*u+k*l+R*c+F*a+W*(5*y);$=ae>>>13,ae&=8191,ae+=Q*(5*g)+I*(5*p)+N*(5*f)+M*(5*h)+B*(5*d),$+=ae>>>13,ae&=8191;let re=$+S*d+k*u+R*l+F*c+W*a;$=re>>>13,re&=8191,re+=Q*(5*y)+I*(5*g)+N*(5*p)+M*(5*f)+B*(5*h),$+=re>>>13,re&=8191;let ce=$+S*h+k*d+R*u+F*l+W*c;$=ce>>>13,ce&=8191,ce+=Q*a+I*(5*y)+N*(5*g)+M*(5*p)+B*(5*f),$+=ce>>>13,ce&=8191;let ye=$+S*f+k*h+R*d+F*u+W*l;$=ye>>>13,ye&=8191,ye+=Q*c+I*a+N*(5*y)+M*(5*g)+B*(5*p),$+=ye>>>13,ye&=8191;let Z=$+S*p+k*f+R*h+F*d+W*u;$=Z>>>13,Z&=8191,Z+=Q*l+I*c+N*a+M*(5*y)+B*(5*g),$+=Z>>>13,Z&=8191;let te=$+S*g+k*p+R*f+F*h+W*d;$=te>>>13,te&=8191,te+=Q*u+I*l+N*c+M*a+B*(5*y),$+=te>>>13,te&=8191;let le=$+S*y+k*g+R*p+F*f+W*h;$=le>>>13,le&=8191,le+=Q*d+I*u+N*l+M*c+B*a,$+=le>>>13,le&=8191,$=($<<2)+$|0,$=$+j|0,j=$&8191,$=$>>>13,V+=$,i[0]=j,i[1]=V,i[2]=ee,i[3]=ae,i[4]=re,i[5]=ce,i[6]=ye,i[7]=Z,i[8]=te,i[9]=le}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Wm(r)}update(e){_U(this),e=aP(e),Hs(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Wm(this.h,this.r,this.buffer,this.pad)}digestInto(e){_U(this),Fve(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function s1e(t){const e=(r,s)=>t(s).update(aP(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const i1e=s1e(t=>new r1e(t));function o1e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],w=e[7],v=s,b=n[0],x=n[1],_=n[2],C=o,A=a,T=c,S=l,k=u,R=d,F=h,W=f,Q=p,I=g,N=y,M=w,B=v,$=b,j=x,V=_;for(let ae=0;ae<i;ae+=2)C=C+k|0,B=Ct(B^C,16),Q=Q+B|0,k=Ct(k^Q,12),C=C+k|0,B=Ct(B^C,8),Q=Q+B|0,k=Ct(k^Q,7),A=A+R|0,$=Ct($^A,16),I=I+$|0,R=Ct(R^I,12),A=A+R|0,$=Ct($^A,8),I=I+$|0,R=Ct(R^I,7),T=T+F|0,j=Ct(j^T,16),N=N+j|0,F=Ct(F^N,12),T=T+F|0,j=Ct(j^T,8),N=N+j|0,F=Ct(F^N,7),S=S+W|0,V=Ct(V^S,16),M=M+V|0,W=Ct(W^M,12),S=S+W|0,V=Ct(V^S,8),M=M+V|0,W=Ct(W^M,7),C=C+R|0,V=Ct(V^C,16),N=N+V|0,R=Ct(R^N,12),C=C+R|0,V=Ct(V^C,8),N=N+V|0,R=Ct(R^N,7),A=A+F|0,B=Ct(B^A,16),M=M+B|0,F=Ct(F^M,12),A=A+F|0,B=Ct(B^A,8),M=M+B|0,F=Ct(F^M,7),T=T+W|0,$=Ct($^T,16),Q=Q+$|0,W=Ct(W^Q,12),T=T+W|0,$=Ct($^T,8),Q=Q+$|0,W=Ct(W^Q,7),S=S+k|0,j=Ct(j^S,16),I=I+j|0,k=Ct(k^I,12),S=S+k|0,j=Ct(j^S,8),I=I+j|0,k=Ct(k^I,7);let ee=0;r[ee++]=o+C|0,r[ee++]=a+A|0,r[ee++]=c+T|0,r[ee++]=l+S|0,r[ee++]=u+k|0,r[ee++]=d+R|0,r[ee++]=h+F|0,r[ee++]=f+W|0,r[ee++]=p+Q|0,r[ee++]=g+I|0,r[ee++]=y+N|0,r[ee++]=w+M|0,r[ee++]=v+B|0,r[ee++]=b+$|0,r[ee++]=x+j|0,r[ee++]=_+V|0}const a1e=n1e(o1e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),c1e=new Uint8Array(16),SU=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(c1e.subarray(n))},l1e=new Uint8Array(32);function IU(t,e,n,r,s){const i=t(e,n,l1e),o=i1e.create(i);s&&SU(o,s),SU(o,r);const a=Kve(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Wm(i,a),c}const u1e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=xU(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=IU(t,e,n,a,r);return i.set(c,o),Wm(c),i},decrypt(s,i){i=xU(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=IU(t,e,n,o,r);if(!Gve(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Wm(c),i}}),VH=Vve({blockSize:64,nonceLength:12,tagLength:16},u1e(a1e));let KH=class extends JC{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,VR(e);const r=Ko(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ao(i)}update(e){return md(this),this.iHash.update(e),this}digestInto(e){md(this),oo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ZC=(t,e,n)=>new KH(t,e).update(n).digest();ZC.create=(t,e)=>new KH(t,e);function d1e(t,e,n){return VR(t),n===void 0&&(n=new Uint8Array(t.outputLen)),ZC(t,Ko(n),Ko(e))}const L2=Uint8Array.from([0]),TU=Uint8Array.of();function h1e(t,e,n,r=32){VR(t),rl(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=TU);const o=new Uint8Array(i*s),a=ZC.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)L2[0]=u+1,c.update(u===0?TU:l).update(n).update(L2).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),ao(l,L2),o.slice(0,r)}const f1e=(t,e,n,r,s)=>h1e(t,d1e(t,e,n),r,s),XC=YC,ZR=BigInt(0),uP=BigInt(1);function hx(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function eE(t){const e=t.toString(16);return e.length&1?"0"+e:e}function QH(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?ZR:BigInt("0x"+t)}function eA(t){return QH(Eb(t))}function fx(t){return oo(t),QH(Eb(Uint8Array.from(t).reverse()))}function XR(t,e){return QR(t.toString(16).padStart(e*2,"0"))}function e3(t,e){return XR(t,e).reverse()}function zs(t,e,n){let r;if(typeof e=="string")try{r=QR(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(GR(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const M2=t=>typeof t=="bigint"&&ZR<=t;function p1e(t,e,n){return M2(t)&&M2(e)&&M2(n)&&e<=t&&t<n}function dP(t,e,n,r){if(!p1e(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function g1e(t){let e;for(e=0;t>ZR;t>>=uP,e+=1);return e}const tA=t=>(uP<<BigInt(t))-uP;function m1e(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return mh(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function nA(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function NU(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Qs=BigInt(0),ws=BigInt(1),yh=BigInt(2),y1e=BigInt(3),JH=BigInt(4),YH=BigInt(5),ZH=BigInt(8);function Zi(t,e){const n=t%e;return n>=Qs?n:e+n}function bo(t,e,n){let r=t;for(;e-- >Qs;)r*=r,r%=n;return r}function PU(t,e){if(t===Qs)throw new Error("invert: expected non-zero number");if(e<=Qs)throw new Error("invert: expected positive modulus, got "+e);let n=Zi(t,e),r=e,s=Qs,i=ws;for(;n!==Qs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ws)throw new Error("invert: does not exist");return Zi(s,e)}function XH(t,e){const n=(t.ORDER+ws)/JH,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function w1e(t,e){const n=(t.ORDER-YH)/ZH,r=t.mul(e,yh),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,yh),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function b1e(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-ws,n=0;for(;e%yh===Qs;)e/=yh,n++;let r=yh;const s=Cy(t);for(;kU(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return XH;let i=s.pow(r,e);const o=(e+ws)/yh;return function(a,c){if(a.is0(c))return c;if(kU(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=ws<<BigInt(l-f-1),y=a.pow(u,g);l=f,u=a.sqr(y),d=a.mul(d,u),h=a.mul(h,y)}return h}}function v1e(t){return t%JH===y1e?XH:t%ZH===YH?w1e:b1e(t)}const E1e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _1e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=E1e.reduce((r,s)=>(r[s]="function",r),e);return nA(t,n),t}function x1e(t,e,n){if(n<Qs)throw new Error("invalid exponent, negatives unsupported");if(n===Qs)return t.ONE;if(n===ws)return e;let r=t.ONE,s=e;for(;n>Qs;)n&ws&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ws;return r}function eW(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function kU(t,e){const n=(t.ORDER-ws)/yh,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function C1e(t,e){e!==void 0&&rl(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Cy(t,e,n=!1,r={}){if(t<=Qs)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=C1e(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:tA(o),ZERO:Qs,ONE:ws,create:u=>Zi(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Qs<=u&&u<t},is0:u=>u===Qs,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&ws)===ws,neg:u=>Zi(-u,t),eql:(u,d)=>u===d,sqr:u=>Zi(u*u,t),add:(u,d)=>Zi(u+d,t),sub:(u,d)=>Zi(u-d,t),mul:(u,d)=>Zi(u*d,t),pow:(u,d)=>x1e(l,u,d),div:(u,d)=>Zi(u*PU(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>PU(u,t),sqrt:i||(u=>(c||(c=v1e(t)),c(l,u))),toBytes:u=>n?e3(u,a):XR(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?fx(u):eA(u)},invertBatch:u=>eW(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function tW(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function nW(t){const e=tW(t);return e+Math.ceil(e/2)}function A1e(t,e,n=!1){const r=t.length,s=tW(e),i=nW(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?fx(t):eA(t),a=Zi(o,e-ws)+ws;return n?e3(a,s):XR(a,s)}const qm=BigInt(0),wh=BigInt(1);function ow(t,e){const n=e.negate();return t?n:e}function S1e(t,e,n){const r=i=>i.pz,s=eW(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function rW(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function j2(t,e){rW(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=tA(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function OU(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=wh);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function I1e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function T1e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const F2=new WeakMap,sW=new WeakMap;function z2(t){return sW.get(t)||1}function RU(t){if(t!==qm)throw new Error("invalid wNAF")}function N1e(t,e){return{constTimeNegate:ow,hasPrecomputes(n){return z2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>qm;)r&wh&&(s=s.add(i)),i=i.double(),r>>=wh;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=j2(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=j2(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=OU(s,c,a);s=l,d?o=o.add(ow(f,r[p])):i=i.add(ow(h,r[u]))}return RU(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=j2(n,e);for(let a=0;a<o.windows&&s!==qm;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=OU(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return RU(s),i},getPrecomputes(n,r,s){let i=F2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),F2.set(r,i))),i},wNAFCached(n,r,s){const i=z2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=z2(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){rW(r,e),sW.set(n,r),F2.delete(n)}}}function P1e(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>qm||r>qm;)n&wh&&(i=i.add(s)),r&wh&&(o=o.add(s)),s=s.double(),n>>=wh,r>>=wh;return{p1:i,p2:o}}function k1e(t,e,n,r){I1e(n,t),T1e(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=g1e(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=tA(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],w=Number(y>>BigInt(f)&l);u[w]=u[w].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function DU(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return _1e(e),e}else return Cy(t)}function O1e(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>qm))throw new Error(`CURVE.${o} must be positive bigint`)}const r=DU(e.p,n.Fp),s=DU(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const l0=BigInt(0),fp=BigInt(1),tE=BigInt(2);function R1e(t){return nA(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function D1e(t){const e=R1e(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||xy,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?tE**BigInt(254):tE**BigInt(447),p=a?BigInt(8)*tE**BigInt(251)-fp:BigInt(4)*tE**BigInt(445)-fp,g=f+p+fp,y=S=>Zi(S,n),w=v(d);function v(S){return e3(y(S),u)}function b(S){const k=zs("u coordinate",S,u);return a&&(k[31]&=127),y(fx(k))}function x(S){return fx(s(zs("scalar",S,u)))}function _(S,k){const R=T(b(k),x(S));if(R===l0)throw new Error("invalid private or public key received");return v(R)}function C(S){return _(S,w)}function A(S,k,R){const F=y(S*(k-R));return k=y(k-F),R=y(R+F),{x_2:k,x_3:R}}function T(S,k){dP("u",S,l0,n),dP("scalar",k,f,g);const R=k,F=S;let W=fp,Q=l0,I=S,N=fp,M=l0;for(let $=BigInt(l-1);$>=l0;$--){const j=R>>$&fp;M^=j,{x_2:W,x_3:I}=A(M,W,I),{x_2:Q,x_3:N}=A(M,Q,N),M=j;const V=W+Q,ee=y(V*V),ae=W-Q,re=y(ae*ae),ce=ee-re,ye=I+N,Z=I-N,te=y(Z*V),le=y(ye*ae),se=te+le,pe=te-le;I=y(se*se),N=y(F*y(pe*pe)),W=y(ee*re),Q=y(ce*(ee+y(h*ce)))}({x_2:W,x_3:I}=A(M,W,I)),{x_2:Q,x_3:N}=A(M,Q,N);const B=i(Q);return y(W*B)}return{scalarMult:_,scalarMultBase:C,getSharedSecret:(S,k)=>_(S,k),getPublicKey:S=>C(S),utils:{randomPrivateKey:()=>c(u)},GuBytes:w.slice()}}BigInt(0);const $1e=BigInt(1),$U=BigInt(2),U1e=BigInt(3),B1e=BigInt(5);BigInt(8);const iW={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function L1e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=iW.p,o=t*t%i*t%i,a=bo(o,$U,i)*o%i,c=bo(a,$1e,i)*t%i,l=bo(c,B1e,i)*c%i,u=bo(l,e,i)*l%i,d=bo(u,n,i)*u%i,h=bo(d,r,i)*d%i,f=bo(h,s,i)*h%i,p=bo(f,s,i)*h%i,g=bo(p,e,i)*l%i;return{pow_p_5_8:bo(g,$U,i)*t%i,b2:o}}function M1e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const hP=(()=>{const t=iW.p;return D1e({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=L1e(e);return Zi(bo(n,U1e,t)*r,t)},adjustScalarBytes:M1e})})();function UU(t){t.lowS!==void 0&&hx("lowS",t.lowS),t.prehash!==void 0&&hx("prehash",t.prehash)}class j1e extends Error{constructor(e=""){super(e)}}const bc={Err:j1e,_tlv:{encode:(t,e)=>{const{Err:n}=bc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=eE(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?eE(s.length/2|128):"";return eE(t)+i+s+e},decode(t,e){const{Err:n}=bc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=bc;if(t<aw)throw new e("integer: negative integers are not allowed");let n=eE(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=bc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return eA(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=bc,s=zs("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=bc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},aw=BigInt(0),cw=BigInt(1),F1e=BigInt(2),nE=BigInt(3),z1e=BigInt(4);function H1e(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function oW(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=zs("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function W1e(t,e={}){const{Fp:n,Fn:r}=O1e("weierstrass",t,e),{h:s,n:i}=t;nA(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,S,k){const{x:R,y:F}=S.toAffine(),W=n.toBytes(R);if(hx("isCompressed",k),k){a();const Q=!n.isOdd(F);return mh(aW(Q),W)}else return mh(Uint8Array.of(4),W,n.toBytes(F))}function l(T){oo(T);const S=n.BYTES,k=S+1,R=2*S+1,F=T.length,W=T[0],Q=T.subarray(1);if(F===k&&(W===2||W===3)){const I=n.fromBytes(Q);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const N=h(I);let M;try{M=n.sqrt(N)}catch($){const j=$ instanceof Error?": "+$.message:"";throw new Error("bad point: is not on curve, sqrt error"+j)}a();const B=n.isOdd(M);return(W&1)===1!==B&&(M=n.neg(M)),{x:I,y:M}}else if(F===R&&W===4){const I=n.fromBytes(Q.subarray(S*0,S*1)),N=n.fromBytes(Q.subarray(S*1,S*2));if(!f(I,N))throw new Error("bad point: is not on curve");return{x:I,y:N}}else throw new Error(`bad point: got length ${F}, expected compressed=${k} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=H1e(n,t.a,t.b);function f(T,S){const k=n.sqr(S),R=h(T);return n.eql(k,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,nE),z1e),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(T,S,k=!1){if(!n.isValid(S)||k&&n.is0(S))throw new Error(`bad point coordinate ${T}`);return S}function w(T){if(!(T instanceof _))throw new Error("ProjectivePoint expected")}const v=NU((T,S)=>{const{px:k,py:R,pz:F}=T;if(n.eql(F,n.ONE))return{x:k,y:R};const W=T.is0();S==null&&(S=W?n.ONE:n.inv(F));const Q=n.mul(k,S),I=n.mul(R,S),N=n.mul(F,S);if(W)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:Q,y:I}}),b=NU(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:S,y:k}=T.toAffine();if(!n.isValid(S)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(S,k))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function x(T,S,k,R,F){return k=new _(n.mul(k.px,T),k.py,k.pz),S=ow(R,S),k=ow(F,k),S.add(k)}class _{constructor(S,k,R){this.px=y("x",S),this.py=y("y",k,!0),this.pz=y("z",R),Object.freeze(this)}static fromAffine(S){const{x:k,y:R}=S||{};if(!S||!n.isValid(k)||!n.isValid(R))throw new Error("invalid affine point");if(S instanceof _)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(R)?_.ZERO:new _(k,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return S1e(_,"pz",S)}static fromBytes(S){return oo(S),_.fromHex(S)}static fromHex(S){const k=_.fromAffine(d(zs("pointHex",S)));return k.assertValidity(),k}static fromPrivateKey(S){const k=oW(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(k(S))}static msm(S,k){return k1e(_,r,S,k)}precompute(S=8,k=!0){return A.setWindowSize(this,S),k||this.multiply(nE),this}_setWindowSize(S){this.precompute(S)}assertValidity(){b(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){w(S);const{px:k,py:R,pz:F}=this,{px:W,py:Q,pz:I}=S,N=n.eql(n.mul(k,I),n.mul(W,F)),M=n.eql(n.mul(R,I),n.mul(Q,F));return N&&M}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:k}=t,R=n.mul(k,nE),{px:F,py:W,pz:Q}=this;let I=n.ZERO,N=n.ZERO,M=n.ZERO,B=n.mul(F,F),$=n.mul(W,W),j=n.mul(Q,Q),V=n.mul(F,W);return V=n.add(V,V),M=n.mul(F,Q),M=n.add(M,M),I=n.mul(S,M),N=n.mul(R,j),N=n.add(I,N),I=n.sub($,N),N=n.add($,N),N=n.mul(I,N),I=n.mul(V,I),M=n.mul(R,M),j=n.mul(S,j),V=n.sub(B,j),V=n.mul(S,V),V=n.add(V,M),M=n.add(B,B),B=n.add(M,B),B=n.add(B,j),B=n.mul(B,V),N=n.add(N,B),j=n.mul(W,Q),j=n.add(j,j),B=n.mul(j,V),I=n.sub(I,B),M=n.mul(j,$),M=n.add(M,M),M=n.add(M,M),new _(I,N,M)}add(S){w(S);const{px:k,py:R,pz:F}=this,{px:W,py:Q,pz:I}=S;let N=n.ZERO,M=n.ZERO,B=n.ZERO;const $=t.a,j=n.mul(t.b,nE);let V=n.mul(k,W),ee=n.mul(R,Q),ae=n.mul(F,I),re=n.add(k,R),ce=n.add(W,Q);re=n.mul(re,ce),ce=n.add(V,ee),re=n.sub(re,ce),ce=n.add(k,F);let ye=n.add(W,I);return ce=n.mul(ce,ye),ye=n.add(V,ae),ce=n.sub(ce,ye),ye=n.add(R,F),N=n.add(Q,I),ye=n.mul(ye,N),N=n.add(ee,ae),ye=n.sub(ye,N),B=n.mul($,ce),N=n.mul(j,ae),B=n.add(N,B),N=n.sub(ee,B),B=n.add(ee,B),M=n.mul(N,B),ee=n.add(V,V),ee=n.add(ee,V),ae=n.mul($,ae),ce=n.mul(j,ce),ee=n.add(ee,ae),ae=n.sub(V,ae),ae=n.mul($,ae),ce=n.add(ce,ae),V=n.mul(ee,ce),M=n.add(M,V),V=n.mul(ye,ce),N=n.mul(re,N),N=n.sub(N,V),V=n.mul(re,ee),B=n.mul(ye,B),B=n.add(B,V),new _(N,M,B)}subtract(S){return this.add(S.negate())}is0(){return this.equals(_.ZERO)}multiply(S){const{endo:k}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let R,F;const W=Q=>A.wNAFCached(this,Q,_.normalizeZ);if(k){const{k1neg:Q,k1:I,k2neg:N,k2:M}=k.splitScalar(S),{p:B,f:$}=W(I),{p:j,f:V}=W(M);F=$.add(V),R=x(k.beta,B,j,Q,N)}else{const{p:Q,f:I}=W(S);R=Q,F=I}return _.normalizeZ([R,F])[0]}multiplyUnsafe(S){const{endo:k}=e,R=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===aw||R.is0())return _.ZERO;if(S===cw)return R;if(A.hasPrecomputes(this))return this.multiply(S);if(k){const{k1neg:F,k1:W,k2neg:Q,k2:I}=k.splitScalar(S),{p1:N,p2:M}=P1e(_,R,W,I);return x(k.beta,N,M,F,Q)}else return A.wNAFCachedUnsafe(R,S)}multiplyAndAddUnsafe(S,k,R){const F=this.multiplyUnsafe(k).add(S.multiplyUnsafe(R));return F.is0()?void 0:F}toAffine(S){return v(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===cw?!0:S?S(_,this):A.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===cw?this:S?S(_,this):this.multiplyUnsafe(s)}toBytes(S=!0){return hx("isCompressed",S),this.assertValidity(),u(_,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return Eb(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const C=r.BITS,A=N1e(_,e.endo?Math.ceil(C/2):C);return _}function aW(t){return Uint8Array.of(t?2:3)}function q1e(t,e,n={}){nA(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||xy,s=e.hmac||((R,...F)=>ZC(e.hash,R,mh(...F))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const F=a>>cw;return R>F}function u(R){return l(R)?o.neg(R):R}function d(R,F){if(!o.isValidNot0(F))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(F,W,Q){d("r",F),d("s",W),this.r=F,this.s=W,Q!=null&&(this.recovery=Q),Object.freeze(this)}static fromCompact(F){const W=o.BYTES,Q=zs("compactSignature",F,W*2);return new h(o.fromBytes(Q.subarray(0,W)),o.fromBytes(Q.subarray(W,W*2)))}static fromDER(F){const{r:W,s:Q}=bc.toSig(zs("DER",F));return new h(W,Q)}assertValidity(){}addRecoveryBit(F){return new h(this.r,this.s,F)}recoverPublicKey(F){const W=i.ORDER,{r:Q,s:I,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*F1e<W&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const M=N===2||N===3?Q+a:Q;if(!i.isValid(M))throw new Error("recovery id 2 or 3 invalid");const B=i.toBytes(M),$=t.fromHex(mh(aW((N&1)===0),B)),j=o.inv(M),V=b(zs("msgHash",F)),ee=o.create(-V*j),ae=o.create(I*j),re=t.BASE.multiplyUnsafe(ee).add($.multiplyUnsafe(ae));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(F){if(F==="compact")return mh(o.toBytes(this.r),o.toBytes(this.s));if(F==="der")return QR(bc.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Eb(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Eb(this.toBytes("compact"))}}const f=oW(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return A1e(r(nW(R)),R)},precompute(R=8,F=t.BASE){return F.precompute(R,!1)}};function g(R,F=!0){return t.fromPrivateKey(R).toBytes(F)}function y(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const F=zs("key",R).length,W=i.BYTES,Q=W+1,I=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===Q))return F===Q||F===I}function w(R,F,W=!0){if(y(R)===!0)throw new Error("first arg must be private key");if(y(F)===!1)throw new Error("second arg must be public key");return t.fromHex(F).multiply(f(R)).toBytes(W)}const v=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const F=eA(R),W=R.length*8-c;return W>0?F>>BigInt(W):F},b=e.bits2int_modN||function(R){return o.create(v(R))},x=tA(c);function _(R){return dP("num < 2^"+c,R,aw,x),o.toBytes(R)}function C(R,F,W=A){if(["recovered","canonical"].some(re=>re in W))throw new Error("sign() legacy options not supported");const{hash:Q}=e;let{lowS:I,prehash:N,extraEntropy:M}=W;I==null&&(I=!0),R=zs("msgHash",R),UU(W),N&&(R=zs("prehashed msgHash",Q(R)));const B=b(R),$=f(F),j=[_($),_(B)];if(M!=null&&M!==!1){const re=M===!0?r(i.BYTES):M;j.push(zs("extraEntropy",re))}const V=mh(...j),ee=B;function ae(re){const ce=v(re);if(!o.isValidNot0(ce))return;const ye=o.inv(ce),Z=t.BASE.multiply(ce).toAffine(),te=o.create(Z.x);if(te===aw)return;const le=o.create(ye*o.create(ee+te*$));if(le===aw)return;let se=(Z.x===te?0:2)|Number(Z.y&cw),pe=le;return I&&l(le)&&(pe=u(le),se^=1),new h(te,pe,se)}return{seed:V,k2sig:ae}}const A={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function S(R,F,W=A){const{seed:Q,k2sig:I}=C(R,F,W);return m1e(e.hash.outputLen,o.BYTES,s)(Q,I)}t.BASE.precompute(8);function k(R,F,W,Q=T){const I=R;F=zs("msgHash",F),W=zs("publicKey",W),UU(Q);const{lowS:N,prehash:M,format:B}=Q;if("strict"in Q)throw new Error("options.strict was renamed to lowS");if(B!==void 0&&!["compact","der","js"].includes(B))throw new Error('format must be "compact", "der" or "js"');const $=typeof I=="string"||GR(I),j=!$&&!B&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!$&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,ee;try{if(j)if(B===void 0||B==="js")V=new h(I.r,I.s);else throw new Error("invalid format");if($){try{B!=="compact"&&(V=h.fromDER(I))}catch(se){if(!(se instanceof bc.Err))throw se}!V&&B!=="der"&&(V=h.fromCompact(I))}ee=t.fromHex(W)}catch{return!1}if(!V||N&&V.hasHighS())return!1;M&&(F=e.hash(F));const{r:ae,s:re}=V,ce=b(F),ye=o.inv(re),Z=o.create(ce*ye),te=o.create(ae*ye),le=t.BASE.multiplyUnsafe(Z).add(ee.multiplyUnsafe(te));return le.is0()?!1:o.create(le.x)===ae}return Object.freeze({getPublicKey:g,getSharedSecret:w,sign:S,verify:k,utils:p,Point:t,Signature:h})}function G1e(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Cy(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function V1e(t){const{CURVE:e,curveOpts:n}=G1e(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function K1e(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Q1e(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=V1e(t),s=W1e(e,n),i=q1e(s,r,n);return K1e(t,i)}function fP(t,e){const n=r=>Q1e({...t,hash:r});return{...n(e),create:n}}const cW={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},lW={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},uW={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},J1e=Cy(cW.p),Y1e=Cy(lW.p),Z1e=Cy(uW.p),X1e=fP({...cW,Fp:J1e,lowS:!1},YC);fP({...lW,Fp:Y1e,lowS:!1},ave),fP({...uW,Fp:Z1e,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},ove);const eEe=X1e,dW="base10",bs="base16",Wo="base64pad",su="base64url",jv="utf8",hW=0,Hc=1,Fv=2,tEe=0,BU=1,lw=12,t3=32;function nEe(){const t=hP.utils.randomPrivateKey(),e=hP.getPublicKey(t);return{privateKey:ei(t,bs),publicKey:ei(e,bs)}}function pP(){const t=xy(t3);return ei(t,bs)}function rEe(t,e){const n=hP.getSharedSecret(no(t,bs),no(e,bs)),r=f1e(XC,n,void 0,void 0,t3);return ei(r,bs)}function XE(t){const e=XC(no(t,bs));return ei(e,bs)}function Pa(t){const e=XC(no(t,jv));return ei(e,bs)}function fW(t){return no(`${t}`,dW)}function If(t){return Number(ei(t,dW))}function pW(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function gW(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function sEe(t){const e=fW(typeof t.type<"u"?t.type:hW);if(If(e)===Hc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?no(t.senderPublicKey,bs):void 0,r=typeof t.iv<"u"?no(t.iv,bs):xy(lw),s=no(t.symKey,bs),i=VH(s,r).encrypt(no(t.message,jv)),o=mW({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===su?pW(o):o}function iEe(t){const e=no(t.symKey,bs),{sealed:n,iv:r}=xb({encoded:t.encoded,encoding:t.encoding}),s=VH(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ei(s,jv)}function oEe(t,e){const n=fW(Fv),r=xy(lw),s=no(t,jv),i=mW({type:n,sealed:s,iv:r});return e===su?pW(i):i}function aEe(t,e){const{sealed:n}=xb({encoded:t,encoding:e});return ei(n,jv)}function mW(t){if(If(t.type)===Fv)return ei(iw([t.type,t.sealed]),Wo);if(If(t.type)===Hc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ei(iw([t.type,t.senderPublicKey,t.iv,t.sealed]),Wo)}return ei(iw([t.type,t.iv,t.sealed]),Wo)}function xb(t){const e=(t.encoding||Wo)===su?gW(t.encoded):t.encoded,n=no(e,Wo),r=n.slice(tEe,BU),s=BU;if(If(r)===Hc){const c=s+t3,l=c+lw,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(If(r)===Fv){const c=n.slice(s),l=xy(lw);return{type:r,sealed:c,iv:l}}const i=s+lw,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function cEe(t,e){const n=xb({encoded:t,encoding:e==null?void 0:e.encoding});return yW({type:If(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ei(n.senderPublicKey,bs):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function yW(t){const e=(t==null?void 0:t.type)||hW;if(e===Hc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function LU(t){return t.type===Hc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function MU(t){return t.type===Fv}function lEe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return iw([new Uint8Array([4]),e,n])}function uEe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(gW(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=XC(c),u=lEe(e);if(!eEe.verify(iw([o,a]),l,u))throw new Error("Invalid signature");return JN(t).payload}const dEe="irn";function px(t){return(t==null?void 0:t.relay)||{protocol:dEe}}function $0(t){const e=jwe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function hEe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function jU(t){if(!t.includes("wc:")){const l=TH(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:fEe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:hEe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function fEe(t){return t.startsWith("//")?t.substring(2):t}function pEe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function FU(t){const e=new URLSearchParams,n=pEe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function rE(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var gEe=Object.defineProperty,mEe=Object.defineProperties,yEe=Object.getOwnPropertyDescriptors,zU=Object.getOwnPropertySymbols,wEe=Object.prototype.hasOwnProperty,bEe=Object.prototype.propertyIsEnumerable,HU=(t,e,n)=>e in t?gEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vEe=(t,e)=>{for(var n in e||(e={}))wEe.call(e,n)&&HU(t,n,e[n]);if(zU)for(var n of zU(e))bEe.call(e,n)&&HU(t,n,e[n]);return t},EEe=(t,e)=>mEe(t,yEe(e));function Ay(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function _Ee(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Ay(n.accounts))}),e}function xEe(t,e){const n=[];return Object.values(t).forEach(r=>{Ay(r.accounts).includes(e)&&n.push(...r.methods)}),n}function CEe(t,e){const n=[];return Object.values(t).forEach(r=>{Ay(r.accounts).includes(e)&&n.push(...r.events)}),n}function rA(t){return t.includes(":")}function ng(t){return rA(t)?t.split(":")[0]:t}function WU(t){var e,n,r;const s={};if(!rd(t))return s;for(const[i,o]of Object.entries(t)){const a=rA(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=ng(i);s[u]=EEe(vEe({},s[u]),{chains:za(a,(e=s[u])==null?void 0:e.chains),methods:za(c,(n=s[u])==null?void 0:n.methods),events:za(l,(r=s[u])==null?void 0:r.events)})}return s}function AEe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function qU(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=AEe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=za(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function SEe(t,e){var n,r,s,i,o,a;const c=WU(t),l=WU(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:za((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:za((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:za((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const IEe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},TEe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function be(t,e){const{message:n,code:r}=TEe[t];return{message:e?`${n} ${e}`:n,code:r}}function pn(t,e){const{message:n,code:r}=IEe[t];return{message:e?`${n} ${e}`:n,code:r}}function Wc(t,e){return!!Array.isArray(t)}function rd(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Sr(t){return typeof t>"u"}function zn(t,e){return e&&Sr(t)?!0:typeof t=="string"&&!!t.trim().length}function n3(t,e){return e&&Sr(t)?!0:typeof t=="number"&&!isNaN(t)}function NEe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return gh(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Ay(a),d=n[o];(!gh(xH(o,d),u)||!gh(d.methods,c)||!gh(d.events,l))&&(i=!1)}),i):!1}function gx(t){return zn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function PEe(t){if(zn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&gx(n)}}return!1}function kEe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(zn(t,!1)){if(e(t))return!0;const n=TH(t);return e(n)}}catch{}return!1}function OEe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function REe(t){return t==null?void 0:t.topic}function DEe(t,e){let n=null;return zn(t==null?void 0:t.publicKey,!1)||(n=be("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function GU(t){let e=!0;return Wc(t)?t.length&&(e=t.every(n=>zn(n,!1))):e=!1,e}function $Ee(t,e,n){let r=null;return Wc(e)&&e.length?e.forEach(s=>{r||gx(s)||(r=pn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):gx(t)||(r=pn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function UEe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=$Ee(s,xH(s,i),`${e} ${n}`);o&&(r=o)}),r}function BEe(t,e){let n=null;return Wc(t)?t.forEach(r=>{n||PEe(r)||(n=pn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=pn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function LEe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=BEe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function MEe(t,e){let n=null;return GU(t==null?void 0:t.methods)?GU(t==null?void 0:t.events)||(n=pn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=pn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function wW(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=MEe(r,`${e}, namespace`);s&&(n=s)}),n}function jEe(t,e,n){let r=null;if(t&&rd(t)){const s=wW(t,e);s&&(r=s);const i=UEe(t,e,n);i&&(r=i)}else r=be("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function H2(t,e){let n=null;if(t&&rd(t)){const r=wW(t,e);r&&(n=r);const s=LEe(t,e);s&&(n=s)}else n=be("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function bW(t){return zn(t.protocol,!0)}function FEe(t,e){let n=!1;return t?t&&Wc(t)&&t.length&&t.forEach(r=>{n=bW(r)}):n=!0,n}function zEe(t){return typeof t=="number"}function $s(t){return typeof t<"u"&&typeof t!==null}function HEe(t){return!(!t||typeof t!="object"||!t.code||!n3(t.code,!1)||!t.message||!zn(t.message,!1))}function WEe(t){return!(Sr(t)||!zn(t.method,!1))}function qEe(t){return!(Sr(t)||Sr(t.result)&&Sr(t.error)||!n3(t.id,!1)||!zn(t.jsonrpc,!1))}function GEe(t){return!(Sr(t)||!zn(t.name,!1))}function VU(t,e){return!(!gx(e)||!_Ee(t).includes(e))}function VEe(t,e,n){return zn(n,!1)?xEe(t,e).includes(n):!1}function KEe(t,e,n){return zn(n,!1)?CEe(t,e).includes(n):!1}function KU(t,e,n){let r=null;const s=QEe(t),i=JEe(e),o=Object.keys(s),a=Object.keys(i),c=QU(Object.keys(t)),l=QU(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),gh(o,a)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Ay(e[d].accounts);h.includes(d)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(gh(s[d].methods,i[d].methods)?gh(s[d].events,i[d].events)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function QEe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function QU(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function JEe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Ay(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function YEe(t,e){return n3(t,!1)&&t<=e.max&&t>=e.min}function JU(){const t=Lv();return new Promise(e=>{switch(t){case _i.browser:e(ZEe());break;case _i.reactNative:e(XEe());break;case _i.node:e(e_e());break;default:e(!0)}})}function ZEe(){return _y()&&(navigator==null?void 0:navigator.onLine)}async function XEe(){if(Td()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function e_e(){return!0}function t_e(t){switch(Lv()){case _i.browser:n_e(t);break;case _i.reactNative:r_e(t);break}}function n_e(t){!Td()&&_y()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function r_e(t){Td()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function s_e(){var t;return _y()&&Cf()?((t=Cf())==null?void 0:t.visibilityState)==="visible":!0}const W2={};class u0{static get(e){return W2[e]}static set(e,n){W2[e]=n}static delete(e){delete W2[e]}}function i_e(t){const e=Ey.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function o_e({publicKey:t,signature:e,payload:n}){var r;const s=gP(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=l_e(n.address),a=n.era==="00"?new Uint8Array([0]):gP(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${c_e(n.tip)}`),d=d_e(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=u_e(h.length+1);return new Uint8Array([...f,i,...h])}function a_e(t){const e=gP(t),n=Zwe.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function gP(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function c_e(t){return t.startsWith("0x")?t.slice(2):t}function l_e(t){const e=Ey.decode(t)[0];return e===42?0:e===60?2:1}function u_e(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function d_e(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function h_e(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=i_e(t.transaction.address),r=o_e({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return a_e(s)}const f_e="PARSE_ERROR",p_e="INVALID_REQUEST",g_e="METHOD_NOT_FOUND",m_e="INVALID_PARAMS",vW="INTERNAL_ERROR",r3="SERVER_ERROR",y_e=[-32700,-32600,-32601,-32602,-32603],uw={[f_e]:{code:-32700,message:"Parse error"},[p_e]:{code:-32600,message:"Invalid Request"},[g_e]:{code:-32601,message:"Method not found"},[m_e]:{code:-32602,message:"Invalid params"},[vW]:{code:-32603,message:"Internal error"},[r3]:{code:-32e3,message:"Server error"}},EW=r3;function w_e(t){return y_e.includes(t)}function YU(t){return Object.keys(uw).includes(t)?uw[t]:uw[EW]}function b_e(t){const e=Object.values(uw).find(n=>n.code===t);return e||uw[EW]}function _W(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var xW={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mP=function(t,e){return mP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},mP(t,e)};function v_e(t,e){mP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var yP=function(){return yP=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yP.apply(this,arguments)};function E_e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function __e(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function x_e(t,e){return function(n,r){e(n,r,t)}}function C_e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function A_e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function S_e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function I_e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function T_e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function wP(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function CW(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function N_e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(CW(arguments[e]));return t}function P_e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Cb(t){return this instanceof Cb?(this.v=t,this):new Cb(t)}function k_e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof Cb?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function O_e(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Cb(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function R_e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof wP=="function"?wP(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function D_e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function $_e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function U_e(t){return t&&t.__esModule?t:{default:t}}function B_e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function L_e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const M_e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return yP},__asyncDelegator:O_e,__asyncGenerator:k_e,__asyncValues:R_e,__await:Cb,__awaiter:A_e,__classPrivateFieldGet:B_e,__classPrivateFieldSet:L_e,__createBinding:I_e,__decorate:__e,__exportStar:T_e,__extends:v_e,__generator:S_e,__importDefault:U_e,__importStar:$_e,__makeTemplateObject:D_e,__metadata:C_e,__param:x_e,__read:CW,__rest:E_e,__spread:N_e,__spreadArrays:P_e,__values:wP},Symbol.toStringTag,{value:"Module"})),j_e=Jx(M_e);var oc={},ZU;function F_e(){if(ZU)return oc;ZU=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.isBrowserCryptoAvailable=oc.getSubtleCrypto=oc.getBrowerCrypto=void 0;function t(){return(Tn==null?void 0:Tn.crypto)||(Tn==null?void 0:Tn.msCrypto)||{}}oc.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}oc.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return oc.isBrowserCryptoAvailable=n,oc}var ac={},XU;function z_e(){if(XU)return ac;XU=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.isBrowser=ac.isNode=ac.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ac.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ac.isNode=e;function n(){return!t()&&!e()}return ac.isBrowser=n,ac}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=j_e;e.__exportStar(F_e(),t),e.__exportStar(z_e(),t)})(xW);function pa(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function bh(t=6){return BigInt(pa(t))}function ju(t,e,n){return{id:n||pa(),jsonrpc:"2.0",method:t,params:e}}function sA(t,e){return{id:t,jsonrpc:"2.0",result:e}}function iA(t,e,n){return{id:t,jsonrpc:"2.0",error:H_e(e)}}function H_e(t,e){return typeof t>"u"?YU(vW):(typeof t=="string"&&(t=Object.assign(Object.assign({},YU(r3)),{message:t})),w_e(t.code)&&(t=b_e(t.code)),t)}let W_e=class{},q_e=class extends W_e{constructor(){super()}},G_e=class extends q_e{constructor(e){super()}};const V_e="^https?:",K_e="^wss?:";function Q_e(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function AW(t,e){const n=Q_e(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function e4(t){return AW(t,V_e)}function t4(t){return AW(t,K_e)}function J_e(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function SW(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function s3(t){return SW(t)&&"method"in t}function oA(t){return SW(t)&&(ga(t)||Ji(t))}function ga(t){return"result"in t}function Ji(t){return"error"in t}let uo=class extends G_e{constructor(e){super(e),this.events=new lo.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(ju(e.method,e.params||[],e.id||bh().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ji(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),oA(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Y_e=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Z_e=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",n4=t=>t.split("?")[0],r4=10,X_e=Y_e();let exe=class{constructor(e){if(this.url=e,this.events=new lo.EventEmitter,this.registering=!1,!t4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(nl(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!t4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=xW.isReactNative()?void 0:{rejectUnauthorized:!J_e(e)},i=new X_e(e,[],s);Z_e()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?xf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=iA(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return _W(e,n4(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>r4&&this.events.setMaxListeners(r4)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${n4(this.url)}`));return this.events.emit("register_error",n),n}};var txe={};const IW="wc",TW=2,bP="core",Ga=`${IW}@2:${bP}:`,nxe={logger:"error"},rxe={database:":memory:"},sxe="crypto",s4="client_ed25519_seed",ixe=we.ONE_DAY,oxe="keychain",axe="0.3",cxe="messages",lxe="0.3",i4=we.SIX_HOURS,uxe="publisher",NW="irn",dxe="error",PW="wss://relay.walletconnect.org",hxe="relayer",lr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},fxe="_subscription",Bi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},pxe=.1,vP="2.21.3",un={link_mode:"link_mode",relay:"relay"},e_={inbound:"inbound",outbound:"outbound"},gxe="0.3",mxe="WALLETCONNECT_CLIENT_ID",o4="WALLETCONNECT_LINK_MODE_APPS",di={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},yxe="subscription",wxe="0.3",bxe="pairing",vxe="0.3",d0={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},eh={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},go={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Exe="history",_xe="0.3",xxe="expirer",zi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Cxe="0.3",Axe="verify-api",Sxe="https://verify.walletconnect.com",kW="https://verify.walletconnect.org",dw=kW,Ixe=`${dw}/v3`,Txe=[Sxe,kW],Nxe="echo",Pxe="https://echo.walletconnect.com",ha={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},uc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},mo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ld={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Md={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},h0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},kxe=.1,Oxe="event-client",Rxe=86400,Dxe="https://pulse.walletconnect.org/batch";function $xe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,x=new Uint8Array(b);w!==v;){for(var _=p[w],C=0,A=b-1;(_!==0||C<y)&&A!==-1;A--,C++)_+=256*x[A]>>>0,x[A]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,w++}for(var T=b-y;T!==b&&x[T]===0;)T++;for(var S=c.repeat(g);T<b;++T)S+=t.charAt(x[T]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var _=0,C=v-1;(x!==0||_<w)&&C!==-1;C--,_++)x+=a*b[C]>>>0,b[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var A=v-w;A!==v&&b[A]===0;)A++;for(var T=new Uint8Array(y+(v-A)),S=y;A!==v;)T[S++]=b[A++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Uxe=$xe,Bxe=Uxe;const OW=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Lxe=t=>new TextEncoder().encode(t),Mxe=t=>new TextDecoder().decode(t);class jxe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Fxe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return RW(this,e)}}class zxe{constructor(e){this.decoders=e}or(e){return RW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const RW=(t,e)=>new zxe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Hxe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new jxe(e,n,r),this.decoder=new Fxe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const aA=({name:t,prefix:e,encode:n,decode:r})=>new Hxe(t,e,n,r),zv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Bxe(n,e);return aA({prefix:t,name:e,encode:r,decode:i=>OW(s(i))})},Wxe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},qxe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Br=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>aA({prefix:e,name:t,encode(s){return qxe(s,r,n)},decode(s){return Wxe(s,r,n,t)}}),Gxe=aA({prefix:"\0",name:"identity",encode:t=>Mxe(t),decode:t=>Lxe(t)});var Vxe=Object.freeze({__proto__:null,identity:Gxe});const Kxe=Br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Qxe=Object.freeze({__proto__:null,base2:Kxe});const Jxe=Br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Yxe=Object.freeze({__proto__:null,base8:Jxe});const Zxe=zv({prefix:"9",name:"base10",alphabet:"0123456789"});var Xxe=Object.freeze({__proto__:null,base10:Zxe});const eCe=Br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tCe=Br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var nCe=Object.freeze({__proto__:null,base16:eCe,base16upper:tCe});const rCe=Br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sCe=Br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iCe=Br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oCe=Br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),aCe=Br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cCe=Br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lCe=Br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uCe=Br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),dCe=Br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var hCe=Object.freeze({__proto__:null,base32:rCe,base32upper:sCe,base32pad:iCe,base32padupper:oCe,base32hex:aCe,base32hexupper:cCe,base32hexpad:lCe,base32hexpadupper:uCe,base32z:dCe});const fCe=zv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pCe=zv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var gCe=Object.freeze({__proto__:null,base36:fCe,base36upper:pCe});const mCe=zv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yCe=zv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wCe=Object.freeze({__proto__:null,base58btc:mCe,base58flickr:yCe});const bCe=Br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vCe=Br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ECe=Br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_Ce=Br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var xCe=Object.freeze({__proto__:null,base64:bCe,base64pad:vCe,base64url:ECe,base64urlpad:_Ce});const DW=Array.from(""),CCe=DW.reduce((t,e,n)=>(t[n]=e,t),[]),ACe=DW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function SCe(t){return t.reduce((e,n)=>(e+=CCe[n],e),"")}function ICe(t){const e=[];for(const n of t){const r=ACe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const TCe=aA({prefix:"",name:"base256emoji",encode:SCe,decode:ICe});var NCe=Object.freeze({__proto__:null,base256emoji:TCe}),PCe=$W,a4=128,kCe=-128,OCe=Math.pow(2,31);function $W(t,e,n){e=e||[],n=n||0;for(var r=n;t>=OCe;)e[n++]=t&255|a4,t/=128;for(;t&kCe;)e[n++]=t&255|a4,t>>>=7;return e[n]=t|0,$W.bytes=n-r+1,e}var RCe=EP,DCe=128,c4=127;function EP(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw EP.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&c4)<<s:(o&c4)*Math.pow(2,s),s+=7}while(o>=DCe);return EP.bytes=i-r,n}var $Ce=Math.pow(2,7),UCe=Math.pow(2,14),BCe=Math.pow(2,21),LCe=Math.pow(2,28),MCe=Math.pow(2,35),jCe=Math.pow(2,42),FCe=Math.pow(2,49),zCe=Math.pow(2,56),HCe=Math.pow(2,63),WCe=function(t){return t<$Ce?1:t<UCe?2:t<BCe?3:t<LCe?4:t<MCe?5:t<jCe?6:t<FCe?7:t<zCe?8:t<HCe?9:10},qCe={encode:PCe,decode:RCe,encodingLength:WCe},UW=qCe;const l4=(t,e,n=0)=>(UW.encode(t,e,n),e),u4=t=>UW.encodingLength(t),_P=(t,e)=>{const n=e.byteLength,r=u4(t),s=r+u4(n),i=new Uint8Array(s+n);return l4(t,i,0),l4(n,i,r),i.set(e,s),new GCe(t,n,e,i)};class GCe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const BW=({name:t,code:e,encode:n})=>new VCe(t,e,n);class VCe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?_P(this.code,n):n.then(r=>_P(this.code,r))}else throw Error("Unknown type, must be binary type")}}const LW=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),KCe=BW({name:"sha2-256",code:18,encode:LW("SHA-256")}),QCe=BW({name:"sha2-512",code:19,encode:LW("SHA-512")});var JCe=Object.freeze({__proto__:null,sha256:KCe,sha512:QCe});const MW=0,YCe="identity",jW=OW,ZCe=t=>_P(MW,jW(t)),XCe={code:MW,name:YCe,encode:jW,digest:ZCe};var eAe=Object.freeze({__proto__:null,identity:XCe});new TextEncoder,new TextDecoder;const d4={...Vxe,...Qxe,...Yxe,...Xxe,...nCe,...hCe,...gCe,...wCe,...xCe,...NCe};({...JCe,...eAe});function FW(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function tAe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?FW(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function zW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const h4=zW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),q2=zW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=tAe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),nAe={utf8:h4,"utf-8":h4,hex:d4.base16,latin1:q2,ascii:q2,binary:q2,...d4};function rAe(t,e="utf8"){const n=nAe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?FW(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var sAe=Object.defineProperty,iAe=(t,e,n)=>e in t?sAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,la=(t,e,n)=>iAe(t,typeof e!="symbol"?e+"":e,n);class oAe{constructor(e,n){this.core=e,this.logger=n,la(this,"keychain",new Map),la(this,"name",oxe),la(this,"version",axe),la(this,"initialized",!1),la(this,"storagePrefix",Ga),la(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),la(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),la(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),la(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=be("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),la(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=ns(n,this.name)}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,rP(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?sP(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var aAe=Object.defineProperty,cAe=(t,e,n)=>e in t?aAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vr=(t,e,n)=>cAe(t,typeof e!="symbol"?e+"":e,n);class lAe{constructor(e,n,r){this.core=e,this.logger=n,vr(this,"name",sxe),vr(this,"keychain"),vr(this,"randomSessionIdentifier",pP()),vr(this,"initialized",!1),vr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),vr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),vr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=q5(s);return jz(i.publicKey)}),vr(this,"generateKeyPair",()=>{this.isInitialized();const s=nEe();return this.setPrivateKey(s.publicKey,s.privateKey)}),vr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=q5(i),a=this.randomSessionIdentifier;return await cye(a,s,ixe,o)}),vr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=rEe(a,i);return this.setSymKey(c,o)}),vr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||XE(s);return await this.keychain.set(o,s),o}),vr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),vr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),vr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=yW(o),c=nl(i);if(MU(a))return oEe(c,o==null?void 0:o.encoding);if(LU(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return sEe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),vr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=cEe(i,o);if(MU(a)){const c=aEe(i,o==null?void 0:o.encoding);return xf(c)}if(LU(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=iEe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return xf(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),vr(this,"getPayloadType",(s,i=Wo)=>{const o=xb({encoded:s,encoding:i});return If(o.type)}),vr(this,"getPayloadSenderPublicKey",(s,i=Wo)=>{const o=xb({encoded:s,encoding:i});return o.senderPublicKey?ei(o.senderPublicKey,bs):void 0}),this.core=e,this.logger=ns(n,this.name),this.keychain=r||new oAe(this.core,this.logger)}get context(){return si(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(s4)}catch{e=pP(),await this.keychain.set(s4,e)}return rAe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var uAe=Object.defineProperty,dAe=Object.defineProperties,hAe=Object.getOwnPropertyDescriptors,f4=Object.getOwnPropertySymbols,fAe=Object.prototype.hasOwnProperty,pAe=Object.prototype.propertyIsEnumerable,xP=(t,e,n)=>e in t?uAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gAe=(t,e)=>{for(var n in e||(e={}))fAe.call(e,n)&&xP(t,n,e[n]);if(f4)for(var n of f4(e))pAe.call(e,n)&&xP(t,n,e[n]);return t},mAe=(t,e)=>dAe(t,hAe(e)),oi=(t,e,n)=>xP(t,typeof e!="symbol"?e+"":e,n);class yAe extends ope{constructor(e,n){super(e,n),this.logger=e,this.core=n,oi(this,"messages",new Map),oi(this,"messagesWithoutClientAck",new Map),oi(this,"name",cxe),oi(this,"version",lxe),oi(this,"initialized",!1),oi(this,"storagePrefix",Ga),oi(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),oi(this,"set",async(r,s,i)=>{this.isInitialized();const o=Pa(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===e_.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,mAe(gAe({},c),{[o]:s}))}return await this.persist(),o}),oi(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),oi(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),oi(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Pa(s);return typeof i[o]<"u"}),oi(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Pa(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),oi(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=ns(e,this.name),this.core=n}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,rP(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,rP(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?sP(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?sP(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var wAe=Object.defineProperty,bAe=Object.defineProperties,vAe=Object.getOwnPropertyDescriptors,p4=Object.getOwnPropertySymbols,EAe=Object.prototype.hasOwnProperty,_Ae=Object.prototype.propertyIsEnumerable,CP=(t,e,n)=>e in t?wAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sE=(t,e)=>{for(var n in e||(e={}))EAe.call(e,n)&&CP(t,n,e[n]);if(p4)for(var n of p4(e))_Ae.call(e,n)&&CP(t,n,e[n]);return t},G2=(t,e)=>bAe(t,vAe(e)),yo=(t,e,n)=>CP(t,typeof e!="symbol"?e+"":e,n);class xAe extends ape{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,yo(this,"events",new lo.EventEmitter),yo(this,"name",uxe),yo(this,"queue",new Map),yo(this,"publishTimeout",we.toMiliseconds(we.ONE_MINUTE)),yo(this,"initialPublishTimeout",we.toMiliseconds(we.ONE_SECOND*15)),yo(this,"needsTransportRestart",!1),yo(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||i4,c=px(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||bh().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:v})=>{h.opts.id===v&&(this.removeRequestFromQueue(v),this.relayer.events.removeListener(lr.publish,y),g(h))};this.relayer.events.on(lr.publish,y);const w=Mu(new Promise((v,b)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(v).catch(x=>{this.logger.warn(x,x==null?void 0:x.message),b(x)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await w,this.events.removeListener(lr.publish,y)}catch(v){this.queue.set(d,G2(sE({},h),{attempt:1})),this.logger.warn(v,v==null?void 0:v.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Mu(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),yo(this,"on",(r,s)=>{this.events.on(r,s)}),yo(this,"once",(r,s)=>{this.events.once(r,s)}),yo(this,"off",(r,s)=>{this.events.off(r,s)}),yo(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=ns(n,this.name),this.registerEventListeners()}get context(){return si(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=i4,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:$0(px().protocol).publish,params:sE({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Sr((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Sr((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(lr.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,G2(sE({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(G2(sE({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Gf.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(lr.connection_stalled);return}this.checkQueue()}),this.relayer.on(lr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var CAe=Object.defineProperty,AAe=(t,e,n)=>e in t?CAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pp=(t,e,n)=>AAe(t,typeof e!="symbol"?e+"":e,n);class SAe{constructor(){pp(this,"map",new Map),pp(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),pp(this,"get",e=>this.map.get(e)||[]),pp(this,"exists",(e,n)=>this.get(e).includes(n)),pp(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),pp(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var IAe=Object.defineProperty,TAe=Object.defineProperties,NAe=Object.getOwnPropertyDescriptors,g4=Object.getOwnPropertySymbols,PAe=Object.prototype.hasOwnProperty,kAe=Object.prototype.propertyIsEnumerable,AP=(t,e,n)=>e in t?IAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f0=(t,e)=>{for(var n in e||(e={}))PAe.call(e,n)&&AP(t,n,e[n]);if(g4)for(var n of g4(e))kAe.call(e,n)&&AP(t,n,e[n]);return t},V2=(t,e)=>TAe(t,NAe(e)),Zt=(t,e,n)=>AP(t,typeof e!="symbol"?e+"":e,n);class OAe extends upe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Zt(this,"subscriptions",new Map),Zt(this,"topicMap",new SAe),Zt(this,"events",new lo.EventEmitter),Zt(this,"name",yxe),Zt(this,"version",wxe),Zt(this,"pending",new Map),Zt(this,"cached",[]),Zt(this,"initialized",!1),Zt(this,"storagePrefix",Ga),Zt(this,"subscribeTimeout",we.toMiliseconds(we.ONE_MINUTE)),Zt(this,"initialSubscribeTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Zt(this,"clientId"),Zt(this,"batchSubscribeTopicsLimit",500),Zt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Zt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=px(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Zt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Zt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Zt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Zt(this,"on",(r,s)=>{this.events.on(r,s)}),Zt(this,"once",(r,s)=>{this.events.once(r,s)}),Zt(this,"off",(r,s)=>{this.events.off(r,s)}),Zt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Zt(this,"start",async()=>{await this.onConnect()}),Zt(this,"stop",async()=>{await this.onDisconnect()}),Zt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Zt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Zt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Gf.pulse,async()=>{await this.checkPending()}),this.events.on(di.created,async r=>{const s=di.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(di.deleted,async r=>{const s=di.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=ns(n,this.name),this.clientId=""}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=px(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=pn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===un.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:$0(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===un.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},we.toMiliseconds(we.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(di.created,d),u(h.id))};this.events.on(di.created,d);try{const h=await Mu(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(di.created,d),u(h)}catch{}}),l=await Mu(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(lr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:$0(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Mu(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(lr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:$0(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Mu(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(lr.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:$0(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,V2(f0({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,f0({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,f0({},n)),this.topicMap.set(n.topic,e),this.events.emit(di.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(di.deleted,V2(f0({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(di.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(di.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>V2(f0({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await Abe(we.toMiliseconds(we.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Pa(e+await this.getClientId())}}var RAe=Object.defineProperty,m4=Object.getOwnPropertySymbols,DAe=Object.prototype.hasOwnProperty,$Ae=Object.prototype.propertyIsEnumerable,SP=(t,e,n)=>e in t?RAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y4=(t,e)=>{for(var n in e||(e={}))DAe.call(e,n)&&SP(t,n,e[n]);if(m4)for(var n of m4(e))$Ae.call(e,n)&&SP(t,n,e[n]);return t},At=(t,e,n)=>SP(t,typeof e!="symbol"?e+"":e,n);class UAe extends cpe{constructor(e){super(e),At(this,"protocol","wc"),At(this,"version",2),At(this,"core"),At(this,"logger"),At(this,"events",new lo.EventEmitter),At(this,"provider"),At(this,"messages"),At(this,"subscriber"),At(this,"publisher"),At(this,"name",hxe),At(this,"transportExplicitlyClosed",!1),At(this,"initialized",!1),At(this,"connectionAttemptInProgress",!1),At(this,"relayUrl"),At(this,"projectId"),At(this,"packageName"),At(this,"bundleId"),At(this,"hasExperiencedNetworkDisruption",!1),At(this,"pingTimeout"),At(this,"heartBeatTimeout",we.toMiliseconds(we.THIRTY_SECONDS+we.FIVE_SECONDS)),At(this,"reconnectTimeout"),At(this,"connectPromise"),At(this,"reconnectInProgress",!1),At(this,"requestsInFlight",[]),At(this,"connectTimeout",we.toMiliseconds(we.ONE_SECOND*15)),At(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||bh().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),At(this,"resetPingTimeout",()=>{ux()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),At(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),At(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(lr.connect)}),At(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),At(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(lr.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),At(this,"registerProviderListeners",()=>{this.provider.on(Bi.payload,this.onPayloadHandler),this.provider.on(Bi.connect,this.onConnectHandler),this.provider.on(Bi.disconnect,this.onDisconnectHandler),this.provider.on(Bi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ns(e.logger,this.name):Dv(my({level:e.logger||dxe})),this.messages=new yAe(this.logger,e.core),this.subscriber=new OAe(this,this.logger),this.publisher=new xAe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||PW,this.projectId=e.projectId,lbe()?this.packageName=oU():ube()&&(this.bundleId=oU()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return si(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:un.relay},e_.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(di.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(di.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,y4({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Mu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await JU())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Kn(we.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(lr.message,e),await this.recordMessageEvent(e,e_.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Bi.disconnect,i),await Mu(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Bi.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Bi.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Bi.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,we.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(ux())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new uo(new exe(gbe({sdkVersion:vP,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),s3(e)){if(!e.method.endsWith(fxe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:un.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(y4({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else oA(e)&&this.events.emit(lr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,e_.inbound),this.events.emit(lr.message,e))}async acknowledgePayload(e){const n=sA(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Bi.payload,this.onPayloadHandler),this.provider.off(Bi.connect,this.onConnectHandler),this.provider.off(Bi.disconnect,this.onDisconnectHandler),this.provider.off(Bi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await JU();t_e(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Gf.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&s_e())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(lr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},we.toMiliseconds(pxe)))))}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function BAe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function w4(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function b4(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const LAe="[object RegExp]",MAe="[object String]",jAe="[object Number]",FAe="[object Boolean]",v4="[object Arguments]",zAe="[object Symbol]",HAe="[object Date]",WAe="[object Map]",qAe="[object Set]",GAe="[object Array]",VAe="[object Function]",KAe="[object ArrayBuffer]",K2="[object Object]",QAe="[object Error]",JAe="[object DataView]",YAe="[object Uint8Array]",ZAe="[object Uint8ClampedArray]",XAe="[object Uint16Array]",eSe="[object Uint32Array]",tSe="[object BigUint64Array]",nSe="[object Int8Array]",rSe="[object Int16Array]",sSe="[object Int32Array]",iSe="[object BigInt64Array]",oSe="[object Float32Array]",aSe="[object Float64Array]";function cSe(){}function E4(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function lSe(t,e,n){return U0(t,e,void 0,void 0,void 0,void 0,n)}function U0(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return hw(t,e,i,o)}return hw(t,e,i,o)}function hw(t,e,n,r){if(Object.is(t,e))return!0;let s=b4(t),i=b4(e);if(s===v4&&(s=K2),i===v4&&(i=K2),s!==i)return!1;switch(s){case MAe:return t.toString()===e.toString();case jAe:{const c=t.valueOf(),l=e.valueOf();return BAe(c,l)}case FAe:case HAe:case zAe:return Object.is(t.valueOf(),e.valueOf());case LAe:return t.source===e.source&&t.flags===e.flags;case VAe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case WAe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!U0(l,e.get(c),c,t,e,n,r))return!1;return!0}case qAe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>U0(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case GAe:case YAe:case ZAe:case XAe:case eSe:case tSe:case nSe:case rSe:case sSe:case iSe:case oSe:case aSe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!U0(t[c],e[c],c,t,e,n,r))return!1;return!0}case KAe:return t.byteLength!==e.byteLength?!1:hw(new Uint8Array(t),new Uint8Array(e),n,r);case JAe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:hw(new Uint8Array(t),new Uint8Array(e),n,r);case QAe:return t.name===e.name&&t.message===e.message;case K2:{if(!(hw(t.constructor,e.constructor,n,r)||E4(t)&&E4(e)))return!1;const c=[...Object.keys(t),...w4(t)],l=[...Object.keys(e),...w4(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!U0(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function uSe(t,e){return lSe(t,e,cSe)}var dSe=Object.defineProperty,_4=Object.getOwnPropertySymbols,hSe=Object.prototype.hasOwnProperty,fSe=Object.prototype.propertyIsEnumerable,IP=(t,e,n)=>e in t?dSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x4=(t,e)=>{for(var n in e||(e={}))hSe.call(e,n)&&IP(t,n,e[n]);if(_4)for(var n of _4(e))fSe.call(e,n)&&IP(t,n,e[n]);return t},Ps=(t,e,n)=>IP(t,typeof e!="symbol"?e+"":e,n);class Qf extends lpe{constructor(e,n,r,s=Ga,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ps(this,"map",new Map),Ps(this,"version",gxe),Ps(this,"cached",[]),Ps(this,"initialized",!1),Ps(this,"getKey"),Ps(this,"storagePrefix",Ga),Ps(this,"recentlyDeleted",[]),Ps(this,"recentlyDeletedLimit",200),Ps(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Sr(o)?this.map.set(this.getKey(o),o):OEe(o)?this.map.set(o.id,o):REe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ps(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ps(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ps(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>uSe(a[c],o[c]))):this.values)),Ps(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=x4(x4({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ps(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=ns(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=be("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var pSe=Object.defineProperty,gSe=(t,e,n)=>e in t?pSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ft=(t,e,n)=>gSe(t,typeof e!="symbol"?e+"":e,n);class mSe{constructor(e,n){this.core=e,this.logger=n,ft(this,"name",bxe),ft(this,"version",vxe),ft(this,"events",new SR),ft(this,"pairings"),ft(this,"initialized",!1),ft(this,"storagePrefix",Ga),ft(this,"ignoredPayloadTypes",[Hc]),ft(this,"registeredMethods",[]),ft(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ft(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),ft(this,"create",async r=>{this.isInitialized();const s=pP(),i=await this.core.crypto.setSymKey(s),o=Kn(we.FIVE_MINUTES),a={protocol:NW},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=FU({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(eh.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),ft(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ha.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=jU(r.uri);s.props.properties.topic=i,s.addTrace(ha.pairing_uri_validation_success),s.addTrace(ha.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(ha.existing_pairing),u.active)throw s.setError(uc.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ha.pairing_not_expired)}const d=c||Kn(we.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(ha.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(eh.create,h),s.addTrace(ha.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ha.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(uc.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(uc.subscribe_pairing_topic_failure),f}return s.addTrace(ha.subscribe_pairing_topic_success),h}),ft(this,"activate",async({topic:r})=>{this.isInitialized();const s=Kn(we.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),ft(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Kd();this.events.once(Rt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),ft(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),ft(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),ft(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ft(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",pn("USER_DISCONNECTED")),await this.deletePairing(s))}),ft(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return FU({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),ft(this,"sendRequest",async(r,s,i)=>{const o=ju(s,i),a=await this.core.crypto.encode(r,o),c=d0[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),ft(this,"sendResult",async(r,s,i)=>{const o=sA(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=d0[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),ft(this,"sendError",async(r,s,i)=>{const o=iA(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=d0[c]?d0[c].res:d0.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),ft(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,pn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),ft(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Jl(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),ft(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),ft(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),ft(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(eh.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),ft(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{ga(s)?this.events.emit(Rt("pairing_ping",i),{}):Ji(s)&&this.events.emit(Rt("pairing_ping",i),{error:s.error})},500)}),ft(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(eh.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),ft(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=pn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),ft(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(pn("WC_METHOD_UNSUPPORTED",r))}),ft(this,"isValidPair",(r,s)=>{var i;if(!$s(r)){const{message:a}=be("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(uc.malformed_pairing_uri),new Error(a)}if(!kEe(r.uri)){const{message:a}=be("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(uc.malformed_pairing_uri),new Error(a)}const o=jU(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=be("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(uc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=be("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(uc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&we.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(uc.pairing_expired);const{message:a}=be("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),ft(this,"isValidPing",async r=>{if(!$s(r)){const{message:i}=be("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),ft(this,"isValidDisconnect",async r=>{if(!$s(r)){const{message:i}=be("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),ft(this,"isValidPairingTopic",async r=>{if(!zn(r,!1)){const{message:s}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Jl(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=be("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=ns(n,this.name),this.pairings=new Qf(this.core,this.logger,this.name,this.storagePrefix)}get context(){return si(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(lr.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==un.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);s3(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):oA(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(zi.expired,async e=>{const{topic:n}=IH(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(eh.expire,{topic:n}))})}}var ySe=Object.defineProperty,wSe=(t,e,n)=>e in t?ySe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Er=(t,e,n)=>wSe(t,typeof e!="symbol"?e+"":e,n);class bSe extends ipe{constructor(e,n){super(e,n),this.core=e,this.logger=n,Er(this,"records",new Map),Er(this,"events",new lo.EventEmitter),Er(this,"name",Exe),Er(this,"version",_xe),Er(this,"cached",[]),Er(this,"initialized",!1),Er(this,"storagePrefix",Ga),Er(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Er(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Kn(we.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(go.created,o)}),Er(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ji(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(go.updated,s))}),Er(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Er(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(go.deleted,i)}}),this.persist()}),Er(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Er(this,"on",(r,s)=>{this.events.on(r,s)}),Er(this,"once",(r,s)=>{this.events.once(r,s)}),Er(this,"off",(r,s)=>{this.events.off(r,s)}),Er(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=ns(n,this.name)}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:ju(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(go.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(go.created,e=>{const n=go.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(go.updated,e=>{const n=go.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(go.deleted,e=>{const n=go.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Gf.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{we.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(go.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vSe=Object.defineProperty,ESe=(t,e,n)=>e in t?vSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gr=(t,e,n)=>ESe(t,typeof e!="symbol"?e+"":e,n);class _Se extends dpe{constructor(e,n){super(e,n),this.core=e,this.logger=n,Gr(this,"expirations",new Map),Gr(this,"events",new lo.EventEmitter),Gr(this,"name",xxe),Gr(this,"version",Cxe),Gr(this,"cached",[]),Gr(this,"initialized",!1),Gr(this,"storagePrefix",Ga),Gr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Gr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Gr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(zi.created,{target:i,expiration:o})}),Gr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Gr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(zi.deleted,{target:s,expiration:i})}}),Gr(this,"on",(r,s)=>{this.events.on(r,s)}),Gr(this,"once",(r,s)=>{this.events.once(r,s)}),Gr(this,"off",(r,s)=>{this.events.off(r,s)}),Gr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=ns(n,this.name)}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return mbe(e);if(typeof e=="number")return ybe(e);const{message:n}=be("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(zi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;we.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(zi.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Gf.pulse,()=>this.checkExpirations()),this.events.on(zi.created,e=>{const n=zi.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(zi.expired,e=>{const n=zi.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(zi.deleted,e=>{const n=zi.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var xSe=Object.defineProperty,CSe=(t,e,n)=>e in t?xSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jn=(t,e,n)=>CSe(t,typeof e!="symbol"?e+"":e,n);class ASe extends hpe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,jn(this,"name",Axe),jn(this,"abortController"),jn(this,"isDevEnv"),jn(this,"verifyUrlV3",Ixe),jn(this,"storagePrefix",Ga),jn(this,"version",TW),jn(this,"publicKey"),jn(this,"fetchPromise"),jn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&we.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),jn(this,"register",async s=>{if(!_y()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Cf(),u=this.startAbortTimer(we.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=w=>{if(w.data&&typeof w.data=="string")try{const v=JSON.parse(w.data);if(v.type==="verify_attestation"){if(JN(v.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(v.attestation===null?"":v.attestation)}}catch(v){this.logger.warn(v)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),jn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(JN(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),jn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(we.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),jn(this,"getVerifyUrl",s=>{let i=s||dw;return Txe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${dw}`),i=dw),i}),jn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(we.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),jn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),jn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),jn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),jn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),jn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),jn(this,"validateAttestation",(s,i)=>{const o=uEe(s,i.publicKey),a={hasExpired:we.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=ns(n,this.name),this.abortController=new AbortController,this.isDevEnv=HR(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return si(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),we.toMiliseconds(e))}}var SSe=Object.defineProperty,ISe=(t,e,n)=>e in t?SSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C4=(t,e,n)=>ISe(t,typeof e!="symbol"?e+"":e,n);class TSe extends fpe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,C4(this,"context",Nxe),C4(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${Pxe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=ns(n,this.context)}}var NSe=Object.defineProperty,A4=Object.getOwnPropertySymbols,PSe=Object.prototype.hasOwnProperty,kSe=Object.prototype.propertyIsEnumerable,TP=(t,e,n)=>e in t?NSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p0=(t,e)=>{for(var n in e||(e={}))PSe.call(e,n)&&TP(t,n,e[n]);if(A4)for(var n of A4(e))kSe.call(e,n)&&TP(t,n,e[n]);return t},nr=(t,e,n)=>TP(t,typeof e!="symbol"?e+"":e,n);class OSe extends ppe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,nr(this,"context",Oxe),nr(this,"storagePrefix",Ga),nr(this,"storageVersion",kxe),nr(this,"events",new Map),nr(this,"shouldPersist",!1),nr(this,"init",async()=>{if(!HR())try{const s={eventId:cU(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:AH(this.core.relayer.protocol,this.core.relayer.version,vP)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),nr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=cU(),u=this.core.projectId||"",d=Date.now(),h=p0({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),nr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return p0(p0({},a),this.setMethods(a.eventId))}),nr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),nr(this,"setEventListeners",()=>{this.core.heartbeat.on(Gf.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{we.fromMiliseconds(Date.now())-we.fromMiliseconds(s.timestamp)>Rxe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),nr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),nr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),nr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),nr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),nr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,p0(p0({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),nr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),nr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Dxe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${vP}${i}`,{method:"POST",body:JSON.stringify(s)})}),nr(this,"getAppDomain",()=>CH().url),this.logger=ns(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var RSe=Object.defineProperty,S4=Object.getOwnPropertySymbols,DSe=Object.prototype.hasOwnProperty,$Se=Object.prototype.propertyIsEnumerable,NP=(t,e,n)=>e in t?RSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I4=(t,e)=>{for(var n in e||(e={}))DSe.call(e,n)&&NP(t,n,e[n]);if(S4)for(var n of S4(e))$Se.call(e,n)&&NP(t,n,e[n]);return t},tn=(t,e,n)=>NP(t,typeof e!="symbol"?e+"":e,n);let USe=class HW extends tpe{constructor(e){var n;super(e),tn(this,"protocol",IW),tn(this,"version",TW),tn(this,"name",bP),tn(this,"relayUrl"),tn(this,"projectId"),tn(this,"customStoragePrefix"),tn(this,"events",new lo.EventEmitter),tn(this,"logger"),tn(this,"heartbeat"),tn(this,"relayer"),tn(this,"crypto"),tn(this,"storage"),tn(this,"history"),tn(this,"expirer"),tn(this,"pairing"),tn(this,"verify"),tn(this,"echoClient"),tn(this,"linkModeSupportedApps"),tn(this,"eventClient"),tn(this,"initialized",!1),tn(this,"logChunkController"),tn(this,"on",(a,c)=>this.events.on(a,c)),tn(this,"once",(a,c)=>this.events.once(a,c)),tn(this,"off",(a,c)=>this.events.off(a,c)),tn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),tn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:un.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||PW,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=my({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:nxe.logger,name:bP}),{logger:i,chunkLoggerController:o}=TR({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=ns(i,this.name),this.heartbeat=new Hhe,this.crypto=new lAe(this,this.logger,e==null?void 0:e.keychain),this.history=new bSe(this,this.logger),this.expirer=new _Se(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Afe(I4(I4({},rxe),e==null?void 0:e.storageOptions)),this.relayer=new UAe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new mSe(this,this.logger),this.verify=new ASe(this,this.logger,this.storage),this.echoClient=new TSe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new OSe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new HW(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(mxe,r),n}get context(){return si(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(o4,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(o4)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&txe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const BSe=USe,WW="wc",qW=2,GW="client",i3=`${WW}@${qW}:${GW}:`,Q2={name:GW,logger:"error"},T4="WALLETCONNECT_DEEPLINK_CHOICE",LSe="proposal",N4="Proposal expired",MSe="session",gp=we.SEVEN_DAYS,jSe="engine",rr={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1114},res:{ttl:we.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:we.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:we.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1119}}},J2={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},ua={idle:"IDLE",active:"ACTIVE"},FSe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},zSe="request",HSe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],WSe="wc",qSe="auth",GSe="authKeys",VSe="pairingTopics",KSe="requests",cA=`${WSe}@${1.5}:${qSe}:`,t_=`${cA}:PUB_KEY`;var QSe=Object.defineProperty,JSe=Object.defineProperties,YSe=Object.getOwnPropertyDescriptors,P4=Object.getOwnPropertySymbols,ZSe=Object.prototype.hasOwnProperty,XSe=Object.prototype.propertyIsEnumerable,PP=(t,e,n)=>e in t?QSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cn=(t,e)=>{for(var n in e||(e={}))ZSe.call(e,n)&&PP(t,n,e[n]);if(P4)for(var n of P4(e))XSe.call(e,n)&&PP(t,n,e[n]);return t},ks=(t,e)=>JSe(t,YSe(e)),de=(t,e,n)=>PP(t,typeof e!="symbol"?e+"":e,n);class e2e extends wpe{constructor(e){super(e),de(this,"name",jSe),de(this,"events",new SR),de(this,"initialized",!1),de(this,"requestQueue",{state:ua.idle,queue:[]}),de(this,"sessionRequestQueue",{state:ua.idle,queue:[]}),de(this,"requestQueueDelay",we.ONE_SECOND),de(this,"expectedPairingMethodMap",new Map),de(this,"recentlyDeletedMap",new Map),de(this,"recentlyDeletedLimit",200),de(this,"relayMessageCache",[]),de(this,"pendingSessions",new Map),de(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(rr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay)))}),de(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ks(cn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=SEe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const C=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=C.active}}catch(C){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),C}if(!u||!h){const{topic:C,uri:A}=await this.client.core.pairing.create();u=C,d=A}if(!u){const{message:C}=be("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(C)}const f=await this.client.core.crypto.generateKeyPair(),p=rr.wc_sessionPropose.req.ttl||we.FIVE_MINUTES,g=Kn(p),y=ks(cn(cn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:NW}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:pa()}),w=Rt("session_connect",y.id),{reject:v,resolve:b,done:x}=Kd(p,N4),_=({id:C})=>{C===y.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(y.id),this.events.emit(w,{error:{message:N4,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(w,({error:C,session:A})=>{this.client.events.off("proposal_expire",_),C?v(C):A&&b(A)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:x}}),de(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),de(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[mo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(Ld.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Ld.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Ld.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:w}=f;let v=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});v||(v=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:mo.session_approve_started,properties:{topic:p,trace:[mo.session_approve_started,mo.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),x=g.publicKey,_=await this.client.core.crypto.generateSharedKey(b,x),C=cn(cn(cn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:Kn(gp)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),A=un.relay;v.addTrace(mo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:A})}catch(S){throw v.setError(Ld.subscribe_session_topic_failure),S}v.addTrace(mo.subscribe_session_topic_success);const T=ks(cn({},C),{topic:_,requiredNamespaces:y,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:C.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:b,transportType:un.relay});await this.client.session.set(_,T),v.addTrace(mo.store_session);try{v.addTrace(mo.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:C,throwOnFailedPublish:!0}).catch(S=>{throw v==null||v.setError(Ld.session_settle_publish_failure),S}),v.addTrace(mo.session_settle_publish_success),v.addTrace(mo.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(S=>{throw v==null||v.setError(Ld.session_approve_publish_failure),S}),v.addTrace(mo.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(_,pn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),S}return this.client.core.eventClient.deleteEvent({eventId:v.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,Kn(gp)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),de(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:rr.wc_sessionPropose.reject}),await this.deleteProposal(r)}),de(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Kd(),c=pa(),l=bh().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Rt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),de(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=pa(),{done:i,resolve:o,reject:a}=Kd();return this.events.once(Rt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Kn(gp)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),de(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=rr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===un.relay&&await this.confirmOnlineStateOrThrow();const c=pa(),l=bh().toString(),{done:u,resolve:d,reject:h}=Kd(o,"Request expired. Please try again.");this.events.once(Rt("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ks(cn({},s),{expiryTimestamp:Kn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:ks(cn({},s),{expiryTimestamp:Kn(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const v=await Ebe(this.client.core.storage,T4);await wbe({id:c,topic:i,wcDeepLink:v})}y()}),u()]).then(y=>y[2])}),de(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===un.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);ga(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ji(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),de(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=pa(),i=bh().toString(),{done:o,resolve:a,reject:c}=Kd();this.events.once(Rt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),de(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=bh().toString(),a=pa();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),de(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:pn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=be("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),de(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>NEe(r,n)))),de(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),de(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?un.link_mode:un.relay;o===un.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,w=[...n.resources||[]],{topic:v,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:b}});const x=await this.client.core.crypto.generateKeyPair(),_=XE(x);if(await Promise.all([this.client.auth.authKeys.set(t_,{responseTopic:_,publicKey:x}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:v})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${v}`),g.length>0){const{namespace:$}=vg(a[0]);let j=Uve($,"request",g);ZE(w)&&(j=Lve(j,w.pop())),w.push(j)}const C=y&&y>rr.wc_sessionAuthenticate.req.ttl?y:rr.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:Kn(C)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:Kn(rr.wc_sessionPropose.req.ttl),id:pa()},{done:k,resolve:R,reject:F}=Kd(C,"Request expired"),W=pa(),Q=Rt("session_connect",S.id),I=Rt("session_request",W),N=async({error:$,session:j})=>{this.events.off(I,M),$?F($):j&&R({session:j})},M=async $=>{var j,V,ee;if(await this.deletePendingAuthRequest(W,{message:"fulfilled",code:0}),$.error){const le=pn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return $.error.code===le.code?void 0:(this.events.off(Q,N),F($.error.message))}await this.deleteProposal(S.id),this.events.off(Q,N);const{cacaos:ae,responder:re}=$.result,ce=[],ye=[];for(const le of ae){await bU({cacao:le,projectId:this.client.core.projectId})||(this.client.logger.error(le,"Signature verification failed"),F(pn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:se}=le,pe=ZE(se.resources),Fe=[iP(se.iss)],Ce=dx(se.iss);if(pe){const xe=vU(pe),je=EU(pe);ce.push(...xe),Fe.push(...je)}for(const xe of Fe)ye.push(`${xe}:${Ce}`)}const Z=await this.client.core.crypto.generateSharedKey(x,re.publicKey);let te;ce.length>0&&(te={topic:Z,acknowledged:!0,self:{publicKey:x,metadata:this.client.metadata},peer:re,controller:re.publicKey,expiry:Kn(gp),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:qU([...new Set(ce)],[...new Set(ye)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,te),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:re.metadata}),te=this.client.session.get(Z)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(V=re.metadata.redirect)!=null&&V.linkMode&&(ee=re.metadata.redirect)!=null&&ee.universal&&r&&(this.client.core.addLinkModeSupportedApp(re.metadata.redirect.universal),this.client.session.update(Z,{transportType:un.link_mode})),R({auths:ae,session:te})};this.events.once(Q,N),this.events.once(I,M);let B;try{if(i){const $=ju("wc_sessionAuthenticate",A,W);this.client.core.history.set(v,$);const j=await this.client.core.crypto.encode("",$,{type:Fv,encoding:su});B=rE(r,v,j)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:A,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:W}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:S,expiry:rr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch($){throw this.events.off(Q,N),this.events.off(I,M),$}return await this.setProposal(S.id,S),await this.setAuthRequest(W,{request:ks(cn({},A),{verifyContext:{}}),pairingTopic:v,transportType:o}),{uri:B??b,response:k}}),de(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Md.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(h0.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(h0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||un.relay;a===un.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=XE(c),d={type:Hc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await bU({cacao:y,projectId:this.client.core.projectId})){i.setError(h0.invalid_cacao);const _=pn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(Md.cacaos_verified);const{p:w}=y,v=ZE(w.resources),b=[iP(w.iss)],x=dx(w.iss);if(v){const _=vU(v),C=EU(v);h.push(..._),b.push(...C)}for(const _ of b)f.push(`${_}:${x}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Md.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Kn(gp),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:qU([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Md.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(h0.subscribe_authenticated_session_topic_failure),y}i.addTrace(Md.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Md.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Md.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(h0.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),de(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===un.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=XE(o),l={type:Hc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:rr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),de(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return zH(r,s)}),de(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),de(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),de(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,pn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(T4).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,pn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ua.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),de(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Ld.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,pn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),de(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=ua.idle,this.client.events.emit("session_request_expire",{id:n}))}),de(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),de(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),de(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Kn(rr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),de(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=un.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),de(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Kn(rr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),de(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=ju(s,i,c);let f;const p=!!u;try{const w=p?su:Wo;f=await this.client.core.crypto.encode(r,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),w}let g;if(HSe.includes(s)){const w=Pa(JSON.stringify(h)),v=Pa(f);g=await this.client.core.verify.register({id:v,decryptedId:w})}const y=rr[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const w=rE(u,r,f);await global.Linking.openURL(w,this.client.name)}else{const w=rr[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=ks(cn({},d),{correlationId:h.id}),l?(w.internal=ks(cn({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,w)):this.client.core.relayer.publish(r,f,w).catch(v=>this.client.logger.error(v))}return h.id}),de(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=sA(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?su:Wo;u=await this.client.core.crypto.encode(s,l,ks(cn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=rE(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=rr[p].res;g.tvf=ks(cn({},f),{correlationId:r}),o?(g.internal=ks(cn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),de(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=iA(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?su:Wo;u=await this.client.core.crypto.encode(s,l,ks(cn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=rE(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||rr[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),de(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Jl(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Jl(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),de(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),de(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),de(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ua.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ua.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ua.idle}),de(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),de(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),de(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=be("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),de(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),de(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(uc.proposal_listener_not_found)),this.isValidConnect(cn({},s.params));const u=a.expiryTimestamp||Kn(rr.wc_sessionPropose.req.ttl),d=cn({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Pa(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(ha.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:rr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),de(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(ga(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ji(r)){await this.deleteProposal(i);const o=Rt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),de(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ks(cn(cn(cn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:un.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Rt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),de(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;ga(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Rt("session_approve",s),{})):Ji(r)&&(await this.client.session.delete(n,pn("USER_DISCONNECTED")),this.events.emit(Rt("session_approve",s),{error:r.error}))}),de(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=u0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:pn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(cn({topic:n},s));try{u0.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw u0.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),de(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),de(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Rt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ga(r)?this.events.emit(Rt("session_update",s),{}):Ji(r)&&this.events.emit(Rt("session_update",s),{error:r.error})}),de(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Kn(gp)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),de(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Rt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ga(r)?this.events.emit(Rt("session_extend",s),{}):Ji(r)&&this.events.emit(Rt("session_extend",s),{error:r.error})}),de(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),de(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Rt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);ga(r)?this.events.emit(Rt("session_ping",s),{}):Ji(r)&&this.events.emit(Rt("session_ping",s),{error:r.error})},500)}),de(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(lr.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:pn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),de(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(cn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Pa(JSON.stringify(ju("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===un.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),de(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Rt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ga(r)?this.events.emit(Rt("session_request",s),{result:r.result}):Ji(r)&&this.events.emit(Rt("session_request",s),{error:r.error})}),de(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=u0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(cn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),u0.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),de(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),ga(r)?this.events.emit(Rt("session_request",s),{result:r.result}):Ji(r)&&this.events.emit(Rt("session_request",s),{error:r.error})}),de(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Pa(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===un.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Hc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:rr.wc_sessionAuthenticate.autoReject,appLink:h})}}),de(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),de(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ua.idle,this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay))}),de(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Rt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Rt("session_request",i.request.id),{error:r})})}),de(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ua.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ua.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),de(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),de(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:ju("wc_sessionPropose",ks(cn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),de(this,"isValidConnect",async n=>{if(!$s(n)){const{message:l}=be("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Sr(r)||await this.isValidPairingTopic(r),!FEe(c)){const{message:l}=be("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Sr(s)&&rd(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Sr(i)&&rd(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Sr(o)||this.validateSessionProps(o,"sessionProperties"),!Sr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),de(this,"validateNamespaces",(n,r)=>{const s=jEe(n,"connect()",r);if(s)throw new Error(s.message)}),de(this,"isValidApprove",async n=>{if(!$s(n))throw new Error(be("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=H2(s,"approve()");if(l)throw new Error(l.message);const u=KU(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!zn(i,!0)){const{message:d}=be("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Sr(o)||this.validateSessionProps(o,"sessionProperties"),!Sr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),de(this,"isValidReject",async n=>{if(!$s(n)){const{message:i}=be("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!HEe(s)){const{message:i}=be("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),de(this,"isValidSessionSettleRequest",n=>{if(!$s(n)){const{message:l}=be("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!bW(r)){const{message:l}=be("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=DEe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=H2(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Jl(o)){const{message:l}=be("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),de(this,"isValidUpdate",async n=>{if(!$s(n)){const{message:c}=be("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=H2(s,"update()");if(o)throw new Error(o.message);const a=KU(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),de(this,"isValidExtend",async n=>{if(!$s(n)){const{message:s}=be("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),de(this,"isValidRequest",async n=>{if(!$s(n)){const{message:c}=be("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!VU(a,i)){const{message:c}=be("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!WEe(s)){const{message:c}=be("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!VEe(a,i,s.method)){const{message:c}=be("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!YEe(o,J2)){const{message:c}=be("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${J2.min} and ${J2.max}`);throw new Error(c)}}),de(this,"isValidRespond",async n=>{var r;if(!$s(n)){const{message:o}=be("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!qEe(i)){const{message:o}=be("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),de(this,"isValidPing",async n=>{if(!$s(n)){const{message:s}=be("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),de(this,"isValidEmit",async n=>{if(!$s(n)){const{message:a}=be("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!VU(o,i)){const{message:a}=be("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!GEe(s)){const{message:a}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!KEe(o,i,s.name)){const{message:a}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),de(this,"isValidDisconnect",async n=>{if(!$s(n)){const{message:s}=be("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),de(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!zn(s,!1))throw new Error("uri is required parameter");if(!zn(i,!1))throw new Error("domain is required parameter");if(!zn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>vg(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=vg(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),de(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||dw,validation:"UNKNOWN",origin:o.url||""}};try{if(a===un.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),de(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=be("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),de(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),de(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),de(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=be("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),de(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==un.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),de(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),de(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=aU(n,"topic")||"",s=decodeURIComponent(aU(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:un.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),de(this,"registerLinkModeListeners",async()=>{var n;if(HR()||Td()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),de(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),de(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),de(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=FSe[i];if(i==="sui_signTransaction")return[vve(r.transactionBytes)];if(i==="near_signTransaction")return[gU(r)];if(i==="near_signTransactions")return r.map(c=>gU(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[h_e({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Wc(r)?r.map(c=>mU(c)):[mU(r)];if(i==="cosmos_signDirect")return[_ve(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Wc(a))return i==="solana_signAllTransactions"?a.map(c=>bve(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(lr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(t_)?this.client.auth.authKeys.get(t_):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===un.link_mode?su:Wo});s3(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Pa(r)})):oA(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(zi.expired,async e=>{const{topic:n,id:r}=IH(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,be("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,be("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(eh.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(eh.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!zn(e,!1)){const{message:n}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Jl(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=be("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!zn(e,!1)){const{message:n}=be("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=be("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Jl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=be("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=be("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(zn(e,!1)){const{message:n}=be("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=be("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!zEe(e)){const{message:n}=be("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=be("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Jl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=be("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class t2e extends Qf{constructor(e,n){super(e,n,LSe,i3),this.core=e,this.logger=n}}let n2e=class extends Qf{constructor(e,n){super(e,n,MSe,i3),this.core=e,this.logger=n}};class r2e extends Qf{constructor(e,n){super(e,n,zSe,i3,r=>r.id),this.core=e,this.logger=n}}class s2e extends Qf{constructor(e,n){super(e,n,GSe,cA,()=>t_),this.core=e,this.logger=n}}class i2e extends Qf{constructor(e,n){super(e,n,VSe,cA),this.core=e,this.logger=n}}class o2e extends Qf{constructor(e,n){super(e,n,KSe,cA,r=>r.id),this.core=e,this.logger=n}}var a2e=Object.defineProperty,c2e=(t,e,n)=>e in t?a2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y2=(t,e,n)=>c2e(t,typeof e!="symbol"?e+"":e,n);class l2e{constructor(e,n){this.core=e,this.logger=n,Y2(this,"authKeys"),Y2(this,"pairingTopics"),Y2(this,"requests"),this.authKeys=new s2e(this.core,this.logger),this.pairingTopics=new i2e(this.core,this.logger),this.requests=new o2e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var u2e=Object.defineProperty,d2e=(t,e,n)=>e in t?u2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pt=(t,e,n)=>d2e(t,typeof e!="symbol"?e+"":e,n);let h2e=class VW extends ype{constructor(e){super(e),pt(this,"protocol",WW),pt(this,"version",qW),pt(this,"name",Q2.name),pt(this,"metadata"),pt(this,"core"),pt(this,"logger"),pt(this,"events",new lo.EventEmitter),pt(this,"engine"),pt(this,"session"),pt(this,"proposal"),pt(this,"pendingRequest"),pt(this,"auth"),pt(this,"signConfig"),pt(this,"on",(r,s)=>this.events.on(r,s)),pt(this,"once",(r,s)=>this.events.once(r,s)),pt(this,"off",(r,s)=>this.events.off(r,s)),pt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),pt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),pt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),pt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||Q2.name,this.metadata=hbe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Dv(my({level:(e==null?void 0:e.logger)||Q2.logger}));this.core=(e==null?void 0:e.core)||new BSe(e),this.logger=ns(n,this.name),this.session=new n2e(this.core,this.logger),this.proposal=new t2e(this.core,this.logger),this.pendingRequest=new r2e(this.core,this.logger),this.engine=new e2e(this),this.auth=new l2e(this.core,this.logger)}static async init(e){const n=new VW(e);return await n.initialize(),n}get context(){return si(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},we.toMiliseconds(we.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var kP={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Tn<"u"&&Tn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Tn<"u"&&Tn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var N={next:function(){var M=I.shift();return{done:M===void 0,value:M}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(I){this.map={},I instanceof g?I.forEach(function(N,M){this.append(M,N)},this):Array.isArray(I)?I.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(N){this.append(N,I[N])},this)}g.prototype.append=function(I,N){I=h(I),N=f(N);var M=this.map[I];this.map[I]=M?M+", "+N:N},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,N){this.map[h(I)]=f(N)},g.prototype.forEach=function(I,N){for(var M in this.map)this.map.hasOwnProperty(M)&&I.call(N,this.map[M],M,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(N,M){I.push(M)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(N){I.push(N)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(N,M){I.push([M,N])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function w(I){return new Promise(function(N,M){I.onload=function(){N(I.result)},I.onerror=function(){M(I.error)}})}function v(I){var N=new FileReader,M=w(N);return N.readAsArrayBuffer(I),M}function b(I){var N=new FileReader,M=w(N),B=/charset=([A-Za-z0-9_-]+)/.exec(I.type),$=B?B[1]:"utf-8";return N.readAsText(I,$),M}function x(I){for(var N=new Uint8Array(I),M=new Array(N.length),B=0;B<N.length;B++)M[B]=String.fromCharCode(N[B]);return M.join("")}function _(I){if(I.slice)return I.slice(0);var N=new Uint8Array(I.byteLength);return N.set(new Uint8Array(I)),N.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=_(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=_(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=y(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=y(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=y(this);if(I)return I;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(I){var N=I.toUpperCase();return A.indexOf(N)>-1?N:I}function S(I,N){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var M=N.body;if(I instanceof S){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,N.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!M&&I._bodyInit!=null&&(M=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=T(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var B=/([?&])_=[^&]*/;if(B.test(this.url))this.url=this.url.replace(B,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function k(I){var N=new FormData;return I.trim().split("&").forEach(function(M){if(M){var B=M.split("="),$=B.shift().replace(/\+/g," "),j=B.join("=").replace(/\+/g," ");N.append(decodeURIComponent($),decodeURIComponent(j))}}),N}function R(I){var N=new g,M=I.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(B){return B.indexOf(`
`)===0?B.substr(1,B.length):B}).forEach(function(B){var $=B.split(":"),j=$.shift().trim();if(j){var V=$.join(":").trim();try{N.append(j,V)}catch(ee){console.warn("Response "+ee.message)}}}),N}C.call(S.prototype);function F(I,N){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(I)}C.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var I=new F(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var W=[301,302,303,307,308];F.redirect=function(I,N){if(W.indexOf(N)===-1)throw new RangeError("Invalid status code");return new F(null,{status:N,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,M){this.message=N,this.name=M;var B=Error(N);this.stack=B.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function Q(I,N){return new Promise(function(M,B){var $=new S(I,N);if($.signal&&$.signal.aborted)return B(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function V(){j.abort()}j.onload=function(){var re={statusText:j.statusText,headers:R(j.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(j.status<200||j.status>599)?re.status=200:re.status=j.status,re.url="responseURL"in j?j.responseURL:re.headers.get("X-Request-URL");var ce="response"in j?j.response:j.responseText;setTimeout(function(){M(new F(ce,re))},0)},j.onerror=function(){setTimeout(function(){B(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){B(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){B(new o.DOMException("Aborted","AbortError"))},0)};function ee(re){try{return re===""&&a.location.href?a.location.href:re}catch{return re}}if(j.open($.method,ee($.url),!0),$.credentials==="include"?j.withCredentials=!0:$.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var ae=[];Object.getOwnPropertyNames(N.headers).forEach(function(re){ae.push(h(re)),j.setRequestHeader(re,f(N.headers[re]))}),$.headers.forEach(function(re,ce){ae.indexOf(ce)===-1&&j.setRequestHeader(ce,re)})}else $.headers.forEach(function(re,ce){j.setRequestHeader(ce,re)});$.signal&&($.signal.addEventListener("abort",V),j.onreadystatechange=function(){j.readyState===4&&$.signal.removeEventListener("abort",V)}),j.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return Q.polyfill=!0,a.fetch||(a.fetch=Q,a.Headers=g,a.Request=S,a.Response=F),o.Headers=g,o.Request=S,o.Response=F,o.fetch=Q,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(kP,kP.exports);var f2e=kP.exports;const k4=Bf(f2e);var p2e=Object.defineProperty,g2e=Object.defineProperties,m2e=Object.getOwnPropertyDescriptors,O4=Object.getOwnPropertySymbols,y2e=Object.prototype.hasOwnProperty,w2e=Object.prototype.propertyIsEnumerable,R4=(t,e,n)=>e in t?p2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D4=(t,e)=>{for(var n in e||(e={}))y2e.call(e,n)&&R4(t,n,e[n]);if(O4)for(var n of O4(e))w2e.call(e,n)&&R4(t,n,e[n]);return t},$4=(t,e)=>g2e(t,m2e(e));const b2e={Accept:"application/json","Content-Type":"application/json"},v2e="POST",U4={headers:b2e,method:v2e},B4=10;let ra=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new lo.EventEmitter,this.isAvailable=!1,this.registering=!1,!e4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=nl(e),r=await(await k4(this.url,$4(D4({},U4),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!e4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=nl({id:1,jsonrpc:"2.0",method:"test",params:[]});await k4(e,$4(D4({},U4),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?xf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=iA(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return _W(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>B4&&this.events.setMaxListeners(B4)}};const L4="error",E2e="wss://relay.walletconnect.org",_2e="wc",x2e="universal_provider",iE=`${_2e}@2:${x2e}:`,KW="https://rpc.walletconnect.org/v1/",Up="generic",C2e=`${KW}bundler`,ho={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function o3(t){return t==null||typeof t!="object"&&typeof t!="function"}function QW(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function JW(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const A2e="[object RegExp]",YW="[object String]",ZW="[object Number]",XW="[object Boolean]",eq="[object Arguments]",S2e="[object Symbol]",I2e="[object Date]",T2e="[object Map]",N2e="[object Set]",P2e="[object Array]",k2e="[object ArrayBuffer]",O2e="[object Object]",R2e="[object DataView]",D2e="[object Uint8Array]",$2e="[object Uint8ClampedArray]",U2e="[object Uint16Array]",B2e="[object Uint32Array]",L2e="[object Int8Array]",M2e="[object Int16Array]",j2e="[object Int32Array]",F2e="[object Float32Array]",z2e="[object Float64Array]";function a3(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function H2e(t,e){return rg(t,void 0,t,new Map,e)}function rg(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(o3(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=rg(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,rg(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(rg(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(a3(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=rg(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),th(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),th(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),th(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,th(o,t,n,r,s),o}if(typeof t=="object"&&W2e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),th(o,t,n,r,s),o}return t}function th(t,e,n=t,r,s){const i=[...Object.keys(e),...QW(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=rg(e[a],a,n,r,s))}}function W2e(t){switch(JW(t)){case eq:case P2e:case k2e:case R2e:case XW:case I2e:case F2e:case z2e:case L2e:case M2e:case j2e:case T2e:case ZW:case O2e:case A2e:case N2e:case YW:case S2e:case D2e:case $2e:case U2e:case B2e:return!0;default:return!1}}function q2e(t,e){return H2e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case ZW:case YW:case XW:{const o=new t.constructor(t==null?void 0:t.valueOf());return th(o,t),o}case eq:{const o={};return th(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function M4(t){return q2e(t)}function j4(t){return t!==null&&typeof t=="object"&&JW(t)==="[object Arguments]"}function F4(t){return typeof t=="object"&&t!==null}function G2e(){}function V2e(t){return a3(t)}function K2e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Q2e(t){if(o3(t))return t;if(Array.isArray(t)||a3(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function J2e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=OP(s,o,r,new Map)}return s}function OP(t,e,n,r){if(o3(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Q2e(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...QW(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(j4(a)&&(a={...a}),j4(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=M4(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||F4(c)&&F4(a)?t[o]=OP(c,a,n,r):c==null&&K2e(a)?t[o]=OP({},a,n,r):c==null&&V2e(a)?t[o]=M4(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function Y2e(t,...e){return J2e(t,...e,G2e)}var Z2e=Object.defineProperty,X2e=Object.defineProperties,eIe=Object.getOwnPropertyDescriptors,z4=Object.getOwnPropertySymbols,tIe=Object.prototype.hasOwnProperty,nIe=Object.prototype.propertyIsEnumerable,H4=(t,e,n)=>e in t?Z2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oE=(t,e)=>{for(var n in e||(e={}))tIe.call(e,n)&&H4(t,n,e[n]);if(z4)for(var n of z4(e))nIe.call(e,n)&&H4(t,n,e[n]);return t},rIe=(t,e)=>X2e(t,eIe(e));function Ti(t,e,n){var r;const s=vg(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${KW}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Jf(t){return t.includes(":")?t.split(":")[1]:t}function tq(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function sIe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function aE(t={},e={}){const n=W4(t),r=W4(e);return Y2e(n,r)}function W4(t){var e,n,r,s,i;const o={};if(!rd(t))return o;for(const[a,c]of Object.entries(t)){const l=rA(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=ng(a);o[f]=rIe(oE(oE({},o[f]),c),{chains:za(l,(e=o[f])==null?void 0:e.chains),methods:za(u,(n=o[f])==null?void 0:n.methods),events:za(d,(r=o[f])==null?void 0:r.events)}),(rd(h)||rd(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=oE(oE({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function q4(t){return t.includes(":")?t.split(":")[2]:t}function G4(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=rA(n)?[n]:r.chains?r.chains:tq(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Z2(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const nq={},Nt=t=>nq[t],X2=(t,e)=>{nq[t]=e};var iIe=Object.defineProperty,oIe=(t,e,n)=>e in t?iIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mp=(t,e,n)=>oIe(t,typeof e!="symbol"?e+"":e,n);class aIe{constructor(e){mp(this,"name","polkadot"),mp(this,"client"),mp(this,"httpProviders"),mp(this,"events"),mp(this,"namespace"),mp(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Jf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new uo(new ra(r,Nt("disableProviderPing")))}}var cIe=Object.defineProperty,lIe=Object.defineProperties,uIe=Object.getOwnPropertyDescriptors,V4=Object.getOwnPropertySymbols,dIe=Object.prototype.hasOwnProperty,hIe=Object.prototype.propertyIsEnumerable,RP=(t,e,n)=>e in t?cIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K4=(t,e)=>{for(var n in e||(e={}))dIe.call(e,n)&&RP(t,n,e[n]);if(V4)for(var n of V4(e))hIe.call(e,n)&&RP(t,n,e[n]);return t},Q4=(t,e)=>lIe(t,uIe(e)),yp=(t,e,n)=>RP(t,typeof e!="symbol"?e+"":e,n);class fIe{constructor(e){yp(this,"name","eip155"),yp(this,"client"),yp(this,"chainId"),yp(this,"namespace"),yp(this,"httpProviders"),yp(this,"events"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Ti(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new uo(new ra(r,Nt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Jf(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Q4(K4({},u.sessionProperties||{}),{capabilities:Q4(K4({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ju("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${C2e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var pIe=Object.defineProperty,gIe=(t,e,n)=>e in t?pIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wp=(t,e,n)=>gIe(t,typeof e!="symbol"?e+"":e,n);class mIe{constructor(e){wp(this,"name","solana"),wp(this,"client"),wp(this,"httpProviders"),wp(this,"events"),wp(this,"namespace"),wp(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Jf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new uo(new ra(r,Nt("disableProviderPing")))}}var yIe=Object.defineProperty,wIe=(t,e,n)=>e in t?yIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bp=(t,e,n)=>wIe(t,typeof e!="symbol"?e+"":e,n);class bIe{constructor(e){bp(this,"name","cosmos"),bp(this,"client"),bp(this,"httpProviders"),bp(this,"events"),bp(this,"namespace"),bp(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Jf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new uo(new ra(r,Nt("disableProviderPing")))}}var vIe=Object.defineProperty,EIe=(t,e,n)=>e in t?vIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vp=(t,e,n)=>EIe(t,typeof e!="symbol"?e+"":e,n);class _Ie{constructor(e){vp(this,"name","algorand"),vp(this,"client"),vp(this,"httpProviders"),vp(this,"events"),vp(this,"namespace"),vp(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Ti(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new uo(new ra(r,Nt("disableProviderPing")))}}var xIe=Object.defineProperty,CIe=(t,e,n)=>e in t?xIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ep=(t,e,n)=>CIe(t,typeof e!="symbol"?e+"":e,n);class AIe{constructor(e){Ep(this,"name","cip34"),Ep(this,"client"),Ep(this,"httpProviders"),Ep(this,"events"),Ep(this,"namespace"),Ep(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Jf(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new uo(new ra(r,Nt("disableProviderPing")))}}var SIe=Object.defineProperty,IIe=(t,e,n)=>e in t?SIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_p=(t,e,n)=>IIe(t,typeof e!="symbol"?e+"":e,n);class TIe{constructor(e){_p(this,"name","elrond"),_p(this,"client"),_p(this,"httpProviders"),_p(this,"events"),_p(this,"namespace"),_p(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Jf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new uo(new ra(r,Nt("disableProviderPing")))}}var NIe=Object.defineProperty,PIe=(t,e,n)=>e in t?NIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xp=(t,e,n)=>PIe(t,typeof e!="symbol"?e+"":e,n);class kIe{constructor(e){xp(this,"name","multiversx"),xp(this,"client"),xp(this,"httpProviders"),xp(this,"events"),xp(this,"namespace"),xp(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Jf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new uo(new ra(r,Nt("disableProviderPing")))}}var OIe=Object.defineProperty,RIe=(t,e,n)=>e in t?OIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cp=(t,e,n)=>RIe(t,typeof e!="symbol"?e+"":e,n);class DIe{constructor(e){Cp(this,"name","near"),Cp(this,"client"),Cp(this,"httpProviders"),Cp(this,"events"),Cp(this,"namespace"),Cp(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ti(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace);return typeof r>"u"?void 0:new uo(new ra(r,Nt("disableProviderPing")))}}var $Ie=Object.defineProperty,UIe=(t,e,n)=>e in t?$Ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ap=(t,e,n)=>UIe(t,typeof e!="symbol"?e+"":e,n);class BIe{constructor(e){Ap(this,"name","tezos"),Ap(this,"client"),Ap(this,"httpProviders"),Ap(this,"events"),Ap(this,"namespace"),Ap(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ti(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace);return typeof r>"u"?void 0:new uo(new ra(r))}}var LIe=Object.defineProperty,MIe=(t,e,n)=>e in t?LIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sp=(t,e,n)=>MIe(t,typeof e!="symbol"?e+"":e,n);class jIe{constructor(e){Sp(this,"name",Up),Sp(this,"client"),Sp(this,"httpProviders"),Sp(this,"events"),Sp(this,"namespace"),Sp(this,"chainId"),this.namespace=e.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ho.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=vg(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new uo(new ra(r,Nt("disableProviderPing")))}}var FIe=Object.defineProperty,zIe=Object.defineProperties,HIe=Object.getOwnPropertyDescriptors,J4=Object.getOwnPropertySymbols,WIe=Object.prototype.hasOwnProperty,qIe=Object.prototype.propertyIsEnumerable,DP=(t,e,n)=>e in t?FIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cE=(t,e)=>{for(var n in e||(e={}))WIe.call(e,n)&&DP(t,n,e[n]);if(J4)for(var n of J4(e))qIe.call(e,n)&&DP(t,n,e[n]);return t},eI=(t,e)=>zIe(t,HIe(e)),Li=(t,e,n)=>DP(t,typeof e!="symbol"?e+"":e,n);let GIe=class rq{constructor(e){Li(this,"client"),Li(this,"namespaces"),Li(this,"optionalNamespaces"),Li(this,"sessionProperties"),Li(this,"scopedProperties"),Li(this,"events",new SR),Li(this,"rpcProviders",{}),Li(this,"session"),Li(this,"providerOpts"),Li(this,"logger"),Li(this,"uri"),Li(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Dv(my({level:(e==null?void 0:e.logger)||L4})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new rq(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:cE({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,sA(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:pn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=G4(this.session.namespaces);this.namespaces=aE(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=G4(s.namespaces);return this.namespaces=aE(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Up?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Wc(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await h2e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||L4,relayUrl:this.providerOpts.relayUrl||E2e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>ng(n)))];X2("client",this.client),X2("events",this.events),X2("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=sIe(n,this.session),s=tq(r),i=aE(this.namespaces,this.optionalNamespaces),o=eI(cE({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new fIe({namespace:o});break;case"algorand":this.rpcProviders[n]=new _Ie({namespace:o});break;case"solana":this.rpcProviders[n]=new mIe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new bIe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new aIe({namespace:o});break;case"cip34":this.rpcProviders[n]=new AIe({namespace:o});break;case"elrond":this.rpcProviders[n]=new TIe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new kIe({namespace:o});break;case"near":this.rpcProviders[n]=new DIe({namespace:o});break;case"tezos":this.rpcProviders[n]=new BIe({namespace:o});break;default:this.rpcProviders[Up]?this.rpcProviders[Up].updateNamespace(o):this.rpcProviders[Up]=new jIe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Wc(o)&&this.events.emit("accountsChanged",o.map(q4))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=ng(o),l=Z2(o)!==Z2(a)?`${c}:${Z2(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=eI(cE({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",eI(cE({},pn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ho.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Up]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=aE(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>ng(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=ng(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(q4);if(!Wc(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${iE}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${iE}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${iE}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(iE)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const fw={getSIWX(){return he.state.siwx},async initializeIfEnabled(){var i;const t=he.state.siwx,e=L.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(L.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Dt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Ft.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Oe._getClient())==null?void 0:i.disconnect().catch(console.error)),Ve.reset("Connect"),zo.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=he.state.siwx,e=Le.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork(),r=Oe._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();_e.getConnectorId(n.chainNamespace)===ie.CONNECTOR_ID.AUTH&&Ve.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),L.setLastConnectedSIWECaipNetwork(n),Dt.close(),Ft.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Dt.state.open||Ve.state.view==="ApproveTransaction")&&await Dt.open({view:"SIWXSignMessage"}),i.isSmartAccount?zo.showError("This application might not support Smart Accounts"):zo.showError("Signature declined"),Ft.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=L.getLastConnectedSIWECaipNetwork();r?L.switchActiveNetwork(r):await Oe.disconnect()}else Dt.close();Ve.reset("Connect"),Ft.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=L.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Le.getPlainAddress(L.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=he.state.siwx,e=Le.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ve.state.view==="ApproveTransaction",r=Ve.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=fw.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=L.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(zo.showLoading("Authenticating...",{autoClose:!1}),ve.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Ft.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:fw.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Ft.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:fw.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{zo.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=L.state.activeChain;return{network:((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=ve.state.preferredAccountTypes)==null?void 0:n[t])===pr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},dn={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Fu={ConnectorExplorerIds:{[ie.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ie.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ie.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ie.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ie.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[dn.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[dn.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[dn.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[dn.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[dn.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[dn.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[dn.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[dn.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[dn.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[dn.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[dn.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ie.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ie.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ie.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ie.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ie.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ie.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ie.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ie.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ie.CONNECTOR_ID.COINBASE]:"Coinbase",[ie.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ie.CONNECTOR_ID.LEDGER]:"Ledger",[ie.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ie.CONNECTOR_ID.INJECTED]:"INJECTED",[ie.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ie.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ie.CONNECTOR_ID.AUTH]:"AUTH"}},Ab={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${dn.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=L.state.activeChain;return ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>_e.getConnectorId(e)===ie.CONNECTOR_ID.AUTH&&e===t)}},VIe=new AbortController,mn={EmbeddedWalletAbortController:VIe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${KIe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function KIe(){return typeof window<"u"}const QIe={createLogger(t,e="error"){const n=my({level:e}),{logger:r}=TR({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},JIe="rpc.walletconnect.org";function Y4(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const tI=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ra={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===JIe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ie.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ie.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return tI.includes(e)?Y4(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(w=>w.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Fu.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ra.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(N1(a.url,a.config))}),tI.includes(t.caipNetworkId)&&r.push(N1(Y4(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(N1(a))}),Y$(r)},extendWagmiTransports(t,e,n){if(tI.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Y$([n,N1(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ie.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ee.getActiveCaipNetworkId(),n=L.getAllRequestedCaipNetworks(),r=Array.from(((c=L.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},mx={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Os=an({providers:{...mx},providerIds:{...mx}}),Kt={state:Os,subscribeKey(t,e){return Dr(Os,t,e)},subscribe(t){return Rr(Os,()=>{t(Os)})},subscribeProviders(t){return Rr(Os.providers,()=>t(Os.providers))},setProvider(t,e){e&&(Os.providers[t]=Ef(e))},getProvider(t){return Os.providers[t]},setProviderId(t,e){e&&(Os.providerIds[t]=e)},getProviderId(t){if(t)return Os.providerIds[t]},reset(){Os.providers={...mx},Os.providerIds={...mx}},resetChain(t){Os.providers[t]=void 0,Os.providerIds[t]=void 0}},Z4={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},xr={set(t,e){vi.isClient&&localStorage.setItem(`${Ue.STORAGE_KEY}${t}`,e)},get(t){return vi.isClient?localStorage.getItem(`${Ue.STORAGE_KEY}${t}`):null},delete(t,e){vi.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ue.STORAGE_KEY}${t}`))}},lE=30*1e3,vi={checkIfAllowedToTriggerEmail(){const t=xr.get(Ue.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<lE){const n=Math.ceil((lE-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=xr.get(Ue.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<lE)return Math.ceil((lE-e)/1e3)}return 0},checkIfRequestExists(t){return pr.NOT_SAFE_RPC_METHODS.includes(t.method)||pr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(Z4.transactionHash))||(t==null?void 0:t.match(Z4.signedMessage)))?Ue.RPC_RESPONSE_TYPE_TX:Ue.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return pr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Tt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Tt||(Tt={}));var $P;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})($P||($P={}));const Ne=Tt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),iu=t=>{switch(typeof t){case"undefined":return Ne.undefined;case"string":return Ne.string;case"number":return isNaN(t)?Ne.nan:Ne.number;case"boolean":return Ne.boolean;case"function":return Ne.function;case"bigint":return Ne.bigint;case"symbol":return Ne.symbol;case"object":return Array.isArray(t)?Ne.array:t===null?Ne.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ne.promise:typeof Map<"u"&&t instanceof Map?Ne.map:typeof Set<"u"&&t instanceof Set?Ne.set:typeof Date<"u"&&t instanceof Date?Ne.date:Ne.object;default:return Ne.unknown}},ge=Tt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),YIe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Qo extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Tt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Qo.create=t=>new Qo(t);const Sb=(t,e)=>{let n;switch(t.code){case ge.invalid_type:t.received===Ne.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ge.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Tt.jsonStringifyReplacer)}`;break;case ge.unrecognized_keys:n=`Unrecognized key(s) in object: ${Tt.joinValues(t.keys,", ")}`;break;case ge.invalid_union:n="Invalid input";break;case ge.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Tt.joinValues(t.options)}`;break;case ge.invalid_enum_value:n=`Invalid enum value. Expected ${Tt.joinValues(t.options)}, received '${t.received}'`;break;case ge.invalid_arguments:n="Invalid function arguments";break;case ge.invalid_return_type:n="Invalid function return type";break;case ge.invalid_date:n="Invalid date";break;case ge.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Tt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ge.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ge.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ge.custom:n="Invalid input";break;case ge.invalid_intersection_types:n="Intersection results could not be merged";break;case ge.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ge.not_finite:n="Number must be finite";break;default:n=e.defaultError,Tt.assertNever(t)}return{message:n}};let sq=Sb;function ZIe(t){sq=t}function yx(){return sq}const wx=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},XIe=[];function Re(t,e){const n=wx({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,yx(),Sb].filter(r=>!!r)});t.common.issues.push(n)}class ts{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Xe;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ts.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Xe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Xe=Object.freeze({status:"aborted"}),iq=t=>({status:"dirty",value:t}),Es=t=>({status:"valid",value:t}),UP=t=>t.status==="aborted",BP=t=>t.status==="dirty",Ib=t=>t.status==="valid",bx=t=>typeof Promise<"u"&&t instanceof Promise;var He;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(He||(He={}));class Va{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const X4=(t,e)=>{if(Ib(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Qo(t.common.issues);return this._error=n,this._error}}};function st(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class lt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return iu(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:iu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ts,ctx:{common:e.parent.common,data:e.data,parsedType:iu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(bx(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:iu(e)},i=this._parseSync({data:e,path:s.path,parent:s});return X4(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:iu(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(bx(s)?s:Promise.resolve(s));return X4(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ge.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Xo({schema:this,typeName:Qe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return qc.create(this,this._def)}nullable(){return Pf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jo.create(this,this._def)}promise(){return Vm.create(this,this._def)}or(e){return kb.create([this,e],this._def)}and(e){return Ob.create(this,e,this._def)}transform(e){return new Xo({...st(this._def),schema:this,typeName:Qe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Bb({...st(this._def),innerType:this,defaultValue:n,typeName:Qe.ZodDefault})}brand(){return new aq({typeName:Qe.ZodBranded,type:this,...st(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new xx({...st(this._def),innerType:this,catchValue:n,typeName:Qe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Hv.create(this,e)}readonly(){return Ax.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const eTe=/^c[^\s-]{8,}$/i,tTe=/^[a-z][a-z0-9]*$/,nTe=/^[0-9A-HJKMNP-TV-Z]{26}$/,rTe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,sTe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iTe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nI;const oTe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,aTe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,cTe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function lTe(t,e){return!!((e==="v4"||!e)&&oTe.test(t)||(e==="v6"||!e)&&aTe.test(t))}class qo extends lt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ne.string){const i=this._getOrReturnCtx(e);return Re(i,{code:ge.invalid_type,expected:Ne.string,received:i.parsedType}),Xe}const r=new ts;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Re(s,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Re(s,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Re(s,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Re(s,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")sTe.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"email",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")nI||(nI=new RegExp(iTe,"u")),nI.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"emoji",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")rTe.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"uuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")eTe.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"cuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")tTe.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"cuid2",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")nTe.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"ulid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Re(s,{validation:"url",code:ge.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"regex",code:ge.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Re(s,{code:ge.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Re(s,{code:ge.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Re(s,{code:ge.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?cTe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{code:ge.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?lTe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"ip",code:ge.invalid_string,message:i.message}),r.dirty()):Tt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ge.invalid_string,...He.errToObj(r)})}_addCheck(e){return new qo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...He.errToObj(e)})}url(e){return this._addCheck({kind:"url",...He.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...He.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...He.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...He.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...He.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...He.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...He.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...He.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...He.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...He.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...He.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...He.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...He.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...He.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...He.errToObj(n)})}nonempty(e){return this.min(1,He.errToObj(e))}trim(){return new qo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new qo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new qo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}qo.create=t=>{var e;return new qo({checks:[],typeName:Qe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...st(t)})};function uTe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class yd extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ne.number){const i=this._getOrReturnCtx(e);return Re(i,{code:ge.invalid_type,expected:Ne.number,received:i.parsedType}),Xe}let r;const s=new ts;for(const i of this._def.checks)i.kind==="int"?Tt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Re(r,{code:ge.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ge.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ge.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?uTe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Re(r,{code:ge.not_finite,message:i.message}),s.dirty()):Tt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,He.toString(n))}gt(e,n){return this.setLimit("min",e,!1,He.toString(n))}lte(e,n){return this.setLimit("max",e,!0,He.toString(n))}lt(e,n){return this.setLimit("max",e,!1,He.toString(n))}setLimit(e,n,r,s){return new yd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:He.toString(s)}]})}_addCheck(e){return new yd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:He.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:He.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:He.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:He.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:He.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:He.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:He.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:He.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:He.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Tt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}yd.create=t=>new yd({checks:[],typeName:Qe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class wd extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ne.bigint){const i=this._getOrReturnCtx(e);return Re(i,{code:ge.invalid_type,expected:Ne.bigint,received:i.parsedType}),Xe}let r;const s=new ts;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ge.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ge.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Tt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,He.toString(n))}gt(e,n){return this.setLimit("min",e,!1,He.toString(n))}lte(e,n){return this.setLimit("max",e,!0,He.toString(n))}lt(e,n){return this.setLimit("max",e,!1,He.toString(n))}setLimit(e,n,r,s){return new wd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:He.toString(s)}]})}_addCheck(e){return new wd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:He.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:He.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:He.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:He.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:He.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wd.create=t=>{var e;return new wd({checks:[],typeName:Qe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...st(t)})};class Tb extends lt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ne.boolean){const r=this._getOrReturnCtx(e);return Re(r,{code:ge.invalid_type,expected:Ne.boolean,received:r.parsedType}),Xe}return Es(e.data)}}Tb.create=t=>new Tb({typeName:Qe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class Tf extends lt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ne.date){const i=this._getOrReturnCtx(e);return Re(i,{code:ge.invalid_type,expected:Ne.date,received:i.parsedType}),Xe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Re(i,{code:ge.invalid_date}),Xe}const r=new ts;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Re(s,{code:ge.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Re(s,{code:ge.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Tt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Tf({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:He.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:He.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Tf.create=t=>new Tf({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Qe.ZodDate,...st(t)});class vx extends lt{_parse(e){if(this._getType(e)!==Ne.symbol){const r=this._getOrReturnCtx(e);return Re(r,{code:ge.invalid_type,expected:Ne.symbol,received:r.parsedType}),Xe}return Es(e.data)}}vx.create=t=>new vx({typeName:Qe.ZodSymbol,...st(t)});class Nb extends lt{_parse(e){if(this._getType(e)!==Ne.undefined){const r=this._getOrReturnCtx(e);return Re(r,{code:ge.invalid_type,expected:Ne.undefined,received:r.parsedType}),Xe}return Es(e.data)}}Nb.create=t=>new Nb({typeName:Qe.ZodUndefined,...st(t)});class Pb extends lt{_parse(e){if(this._getType(e)!==Ne.null){const r=this._getOrReturnCtx(e);return Re(r,{code:ge.invalid_type,expected:Ne.null,received:r.parsedType}),Xe}return Es(e.data)}}Pb.create=t=>new Pb({typeName:Qe.ZodNull,...st(t)});class Gm extends lt{constructor(){super(...arguments),this._any=!0}_parse(e){return Es(e.data)}}Gm.create=t=>new Gm({typeName:Qe.ZodAny,...st(t)});class rf extends lt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Es(e.data)}}rf.create=t=>new rf({typeName:Qe.ZodUnknown,...st(t)});class sl extends lt{_parse(e){const n=this._getOrReturnCtx(e);return Re(n,{code:ge.invalid_type,expected:Ne.never,received:n.parsedType}),Xe}}sl.create=t=>new sl({typeName:Qe.ZodNever,...st(t)});class Ex extends lt{_parse(e){if(this._getType(e)!==Ne.undefined){const r=this._getOrReturnCtx(e);return Re(r,{code:ge.invalid_type,expected:Ne.void,received:r.parsedType}),Xe}return Es(e.data)}}Ex.create=t=>new Ex({typeName:Qe.ZodVoid,...st(t)});class Jo extends lt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ne.array)return Re(n,{code:ge.invalid_type,expected:Ne.array,received:n.parsedType}),Xe;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Re(n,{code:o?ge.too_big:ge.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Re(n,{code:ge.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Re(n,{code:ge.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Va(n,o,n.path,a)))).then(o=>ts.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Va(n,o,n.path,a)));return ts.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Jo({...this._def,minLength:{value:e,message:He.toString(n)}})}max(e,n){return new Jo({...this._def,maxLength:{value:e,message:He.toString(n)}})}length(e,n){return new Jo({...this._def,exactLength:{value:e,message:He.toString(n)}})}nonempty(e){return this.min(1,e)}}Jo.create=(t,e)=>new Jo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Qe.ZodArray,...st(e)});function Bp(t){if(t instanceof yn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=qc.create(Bp(r))}return new yn({...t._def,shape:()=>e})}else return t instanceof Jo?new Jo({...t._def,type:Bp(t.element)}):t instanceof qc?qc.create(Bp(t.unwrap())):t instanceof Pf?Pf.create(Bp(t.unwrap())):t instanceof Ka?Ka.create(t.items.map(e=>Bp(e))):t}class yn extends lt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Tt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ne.object){const l=this._getOrReturnCtx(e);return Re(l,{code:ge.invalid_type,expected:Ne.object,received:l.parsedType}),Xe}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof sl&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Va(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof sl){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Re(s,{code:ge.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Va(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ts.mergeObjectSync(r,l)):ts.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return He.errToObj,new yn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=He.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new yn({...this._def,unknownKeys:"strip"})}passthrough(){return new yn({...this._def,unknownKeys:"passthrough"})}extend(e){return new yn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new yn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Qe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new yn({...this._def,catchall:e})}pick(e){const n={};return Tt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new yn({...this._def,shape:()=>n})}omit(e){const n={};return Tt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new yn({...this._def,shape:()=>n})}deepPartial(){return Bp(this)}partial(e){const n={};return Tt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new yn({...this._def,shape:()=>n})}required(e){const n={};return Tt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof qc;)i=i._def.innerType;n[r]=i}}),new yn({...this._def,shape:()=>n})}keyof(){return oq(Tt.objectKeys(this.shape))}}yn.create=(t,e)=>new yn({shape:()=>t,unknownKeys:"strip",catchall:sl.create(),typeName:Qe.ZodObject,...st(e)});yn.strictCreate=(t,e)=>new yn({shape:()=>t,unknownKeys:"strict",catchall:sl.create(),typeName:Qe.ZodObject,...st(e)});yn.lazycreate=(t,e)=>new yn({shape:t,unknownKeys:"strip",catchall:sl.create(),typeName:Qe.ZodObject,...st(e)});class kb extends lt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Qo(a.ctx.common.issues));return Re(n,{code:ge.invalid_union,unionErrors:o}),Xe}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Qo(c));return Re(n,{code:ge.invalid_union,unionErrors:a}),Xe}}get options(){return this._def.options}}kb.create=(t,e)=>new kb({options:t,typeName:Qe.ZodUnion,...st(e)});const n_=t=>t instanceof Db?n_(t.schema):t instanceof Xo?n_(t.innerType()):t instanceof $b?[t.value]:t instanceof bd?t.options:t instanceof Ub?Object.keys(t.enum):t instanceof Bb?n_(t._def.innerType):t instanceof Nb?[void 0]:t instanceof Pb?[null]:null;class lA extends lt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ne.object)return Re(n,{code:ge.invalid_type,expected:Ne.object,received:n.parsedType}),Xe;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Re(n,{code:ge.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Xe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=n_(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new lA({typeName:Qe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...st(r)})}}function LP(t,e){const n=iu(t),r=iu(e);if(t===e)return{valid:!0,data:t};if(n===Ne.object&&r===Ne.object){const s=Tt.objectKeys(e),i=Tt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=LP(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ne.array&&r===Ne.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=LP(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ne.date&&r===Ne.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ob extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(UP(i)||UP(o))return Xe;const a=LP(i.value,o.value);return a.valid?((BP(i)||BP(o))&&n.dirty(),{status:n.value,value:a.data}):(Re(r,{code:ge.invalid_intersection_types}),Xe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ob.create=(t,e,n)=>new Ob({left:t,right:e,typeName:Qe.ZodIntersection,...st(n)});class Ka extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.array)return Re(r,{code:ge.invalid_type,expected:Ne.array,received:r.parsedType}),Xe;if(r.data.length<this._def.items.length)return Re(r,{code:ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Xe;!this._def.rest&&r.data.length>this._def.items.length&&(Re(r,{code:ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Va(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ts.mergeArray(n,o)):ts.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Ka({...this._def,rest:e})}}Ka.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ka({items:t,typeName:Qe.ZodTuple,rest:null,...st(e)})};class Rb extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.object)return Re(r,{code:ge.invalid_type,expected:Ne.object,received:r.parsedType}),Xe;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Va(r,a,r.path,a)),value:o._parse(new Va(r,r.data[a],r.path,a))});return r.common.async?ts.mergeObjectAsync(n,s):ts.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof lt?new Rb({keyType:e,valueType:n,typeName:Qe.ZodRecord,...st(r)}):new Rb({keyType:qo.create(),valueType:e,typeName:Qe.ZodRecord,...st(n)})}}class _x extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.map)return Re(r,{code:ge.invalid_type,expected:Ne.map,received:r.parsedType}),Xe;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Va(r,a,r.path,[l,"key"])),value:i._parse(new Va(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Xe;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Xe;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}_x.create=(t,e,n)=>new _x({valueType:e,keyType:t,typeName:Qe.ZodMap,...st(n)});class Nf extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.set)return Re(r,{code:ge.invalid_type,expected:Ne.set,received:r.parsedType}),Xe;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Re(r,{code:ge.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Re(r,{code:ge.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Xe;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Va(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Nf({...this._def,minSize:{value:e,message:He.toString(n)}})}max(e,n){return new Nf({...this._def,maxSize:{value:e,message:He.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Nf.create=(t,e)=>new Nf({valueType:t,minSize:null,maxSize:null,typeName:Qe.ZodSet,...st(e)});class Eg extends lt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ne.function)return Re(n,{code:ge.invalid_type,expected:Ne.function,received:n.parsedType}),Xe;function r(a,c){return wx({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,yx(),Sb].filter(l=>!!l),issueData:{code:ge.invalid_arguments,argumentsError:c}})}function s(a,c){return wx({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,yx(),Sb].filter(l=>!!l),issueData:{code:ge.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Vm){const a=this;return Es(async function(...c){const l=new Qo([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Es(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Qo([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Qo([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Eg({...this._def,args:Ka.create(e).rest(rf.create())})}returns(e){return new Eg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Eg({args:e||Ka.create([]).rest(rf.create()),returns:n||rf.create(),typeName:Qe.ZodFunction,...st(r)})}}class Db extends lt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Db.create=(t,e)=>new Db({getter:t,typeName:Qe.ZodLazy,...st(e)});class $b extends lt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Re(n,{received:n.data,code:ge.invalid_literal,expected:this._def.value}),Xe}return{status:"valid",value:e.data}}get value(){return this._def.value}}$b.create=(t,e)=>new $b({value:t,typeName:Qe.ZodLiteral,...st(e)});function oq(t,e){return new bd({values:t,typeName:Qe.ZodEnum,...st(e)})}class bd extends lt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Re(n,{expected:Tt.joinValues(r),received:n.parsedType,code:ge.invalid_type}),Xe}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Re(n,{received:n.data,code:ge.invalid_enum_value,options:r}),Xe}return Es(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return bd.create(e)}exclude(e){return bd.create(this.options.filter(n=>!e.includes(n)))}}bd.create=oq;class Ub extends lt{_parse(e){const n=Tt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ne.string&&r.parsedType!==Ne.number){const s=Tt.objectValues(n);return Re(r,{expected:Tt.joinValues(s),received:r.parsedType,code:ge.invalid_type}),Xe}if(n.indexOf(e.data)===-1){const s=Tt.objectValues(n);return Re(r,{received:r.data,code:ge.invalid_enum_value,options:s}),Xe}return Es(e.data)}get enum(){return this._def.values}}Ub.create=(t,e)=>new Ub({values:t,typeName:Qe.ZodNativeEnum,...st(e)});class Vm extends lt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ne.promise&&n.common.async===!1)return Re(n,{code:ge.invalid_type,expected:Ne.promise,received:n.parsedType}),Xe;const r=n.parsedType===Ne.promise?n.data:Promise.resolve(n.data);return Es(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Vm.create=(t,e)=>new Vm({type:t,typeName:Qe.ZodPromise,...st(e)});class Xo extends lt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Qe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Re(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Xe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Xe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ib(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ib(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Tt.assertNever(s)}}Xo.create=(t,e,n)=>new Xo({schema:t,typeName:Qe.ZodEffects,effect:e,...st(n)});Xo.createWithPreprocess=(t,e,n)=>new Xo({schema:e,effect:{type:"preprocess",transform:t},typeName:Qe.ZodEffects,...st(n)});class qc extends lt{_parse(e){return this._getType(e)===Ne.undefined?Es(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qc.create=(t,e)=>new qc({innerType:t,typeName:Qe.ZodOptional,...st(e)});class Pf extends lt{_parse(e){return this._getType(e)===Ne.null?Es(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pf.create=(t,e)=>new Pf({innerType:t,typeName:Qe.ZodNullable,...st(e)});class Bb extends lt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ne.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Bb.create=(t,e)=>new Bb({innerType:t,typeName:Qe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...st(e)});class xx extends lt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return bx(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Qo(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Qo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}xx.create=(t,e)=>new xx({innerType:t,typeName:Qe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...st(e)});class Cx extends lt{_parse(e){if(this._getType(e)!==Ne.nan){const r=this._getOrReturnCtx(e);return Re(r,{code:ge.invalid_type,expected:Ne.nan,received:r.parsedType}),Xe}return{status:"valid",value:e.data}}}Cx.create=t=>new Cx({typeName:Qe.ZodNaN,...st(t)});const dTe=Symbol("zod_brand");class aq extends lt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Hv extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Xe:i.status==="dirty"?(n.dirty(),iq(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Xe:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Hv({in:e,out:n,typeName:Qe.ZodPipeline})}}class Ax extends lt{_parse(e){const n=this._def.innerType._parse(e);return Ib(n)&&(n.value=Object.freeze(n.value)),n}}Ax.create=(t,e)=>new Ax({innerType:t,typeName:Qe.ZodReadonly,...st(e)});const cq=(t,e={},n)=>t?Gm.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Gm.create(),hTe={object:yn.lazycreate};var Qe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Qe||(Qe={}));const fTe=(t,e={message:`Input not instance of ${t.name}`})=>cq(n=>n instanceof t,e),lq=qo.create,uq=yd.create,pTe=Cx.create,gTe=wd.create,dq=Tb.create,mTe=Tf.create,yTe=vx.create,wTe=Nb.create,bTe=Pb.create,vTe=Gm.create,ETe=rf.create,_Te=sl.create,xTe=Ex.create,CTe=Jo.create,ATe=yn.create,STe=yn.strictCreate,ITe=kb.create,TTe=lA.create,NTe=Ob.create,PTe=Ka.create,kTe=Rb.create,OTe=_x.create,RTe=Nf.create,DTe=Eg.create,$Te=Db.create,UTe=$b.create,BTe=bd.create,LTe=Ub.create,MTe=Vm.create,e6=Xo.create,jTe=qc.create,FTe=Pf.create,zTe=Xo.createWithPreprocess,HTe=Hv.create,WTe=()=>lq().optional(),qTe=()=>uq().optional(),GTe=()=>dq().optional(),VTe={string:t=>qo.create({...t,coerce:!0}),number:t=>yd.create({...t,coerce:!0}),boolean:t=>Tb.create({...t,coerce:!0}),bigint:t=>wd.create({...t,coerce:!0}),date:t=>Tf.create({...t,coerce:!0})},KTe=Xe;var P=Object.freeze({__proto__:null,defaultErrorMap:Sb,setErrorMap:ZIe,getErrorMap:yx,makeIssue:wx,EMPTY_PATH:XIe,addIssueToContext:Re,ParseStatus:ts,INVALID:Xe,DIRTY:iq,OK:Es,isAborted:UP,isDirty:BP,isValid:Ib,isAsync:bx,get util(){return Tt},get objectUtil(){return $P},ZodParsedType:Ne,getParsedType:iu,ZodType:lt,ZodString:qo,ZodNumber:yd,ZodBigInt:wd,ZodBoolean:Tb,ZodDate:Tf,ZodSymbol:vx,ZodUndefined:Nb,ZodNull:Pb,ZodAny:Gm,ZodUnknown:rf,ZodNever:sl,ZodVoid:Ex,ZodArray:Jo,ZodObject:yn,ZodUnion:kb,ZodDiscriminatedUnion:lA,ZodIntersection:Ob,ZodTuple:Ka,ZodRecord:Rb,ZodMap:_x,ZodSet:Nf,ZodFunction:Eg,ZodLazy:Db,ZodLiteral:$b,ZodEnum:bd,ZodNativeEnum:Ub,ZodPromise:Vm,ZodEffects:Xo,ZodTransformer:Xo,ZodOptional:qc,ZodNullable:Pf,ZodDefault:Bb,ZodCatch:xx,ZodNaN:Cx,BRAND:dTe,ZodBranded:aq,ZodPipeline:Hv,ZodReadonly:Ax,custom:cq,Schema:lt,ZodSchema:lt,late:hTe,get ZodFirstPartyTypeKind(){return Qe},coerce:VTe,any:vTe,array:CTe,bigint:gTe,boolean:dq,date:mTe,discriminatedUnion:TTe,effect:e6,enum:BTe,function:DTe,instanceof:fTe,intersection:NTe,lazy:$Te,literal:UTe,map:OTe,nan:pTe,nativeEnum:LTe,never:_Te,null:bTe,nullable:FTe,number:uq,object:ATe,oboolean:GTe,onumber:qTe,optional:jTe,ostring:WTe,pipeline:HTe,preprocess:zTe,promise:MTe,record:kTe,set:RTe,strictObject:STe,string:lq,symbol:yTe,transformer:e6,tuple:PTe,undefined:wTe,union:ITe,unknown:ETe,void:xTe,NEVER:KTe,ZodIssueCode:ge,quotelessJson:YIe,ZodError:Qo});const Cn=P.object({message:P.string()});function Pe(t){return P.literal(Ue[t])}P.object({accessList:P.array(P.string()),blockHash:P.string().nullable(),blockNumber:P.string().nullable(),chainId:P.string().or(P.number()),from:P.string(),gas:P.string(),hash:P.string(),input:P.string().nullable(),maxFeePerGas:P.string(),maxPriorityFeePerGas:P.string(),nonce:P.string(),r:P.string(),s:P.string(),to:P.string(),transactionIndex:P.string().nullable(),type:P.string(),v:P.string(),value:P.string()});const QTe=P.object({chainId:P.string().or(P.number())}),JTe=P.object({email:P.string().email()}),YTe=P.object({otp:P.string()}),ZTe=P.object({uri:P.string(),preferredAccountType:P.optional(P.string()),chainId:P.optional(P.string().or(P.number()))}),XTe=P.object({chainId:P.optional(P.string().or(P.number())),preferredAccountType:P.optional(P.string()),socialUri:P.optional(P.string())}),eNe=P.object({provider:P.enum(["google","github","apple","facebook","x","discord"])}),tNe=P.object({email:P.string().email()}),nNe=P.object({otp:P.string()}),rNe=P.object({otp:P.string()}),sNe=P.object({themeMode:P.optional(P.enum(["light","dark"])),themeVariables:P.optional(P.record(P.string(),P.string().or(P.number()))),w3mThemeVariables:P.optional(P.record(P.string(),P.string()))}),iNe=P.object({metadata:P.object({name:P.string(),description:P.string(),url:P.string(),icons:P.array(P.string())}).optional(),sdkVersion:P.string().optional(),sdkType:P.string().optional(),projectId:P.string()}),oNe=P.object({type:P.string()}),aNe=P.object({action:P.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),cNe=P.object({url:P.string()}),lNe=P.object({userName:P.string()}),uNe=P.object({email:P.string().optional().nullable(),address:P.string(),chainId:P.string().or(P.number()),accounts:P.array(P.object({address:P.string(),type:P.enum([pr.ACCOUNT_TYPES.EOA,pr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:P.string().optional().nullable(),preferredAccountType:P.optional(P.string())}),dNe=P.object({action:P.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),hNe=P.object({email:P.string().email().optional().nullable(),address:P.string(),chainId:P.string().or(P.number()),smartAccountDeployed:P.optional(P.boolean()),accounts:P.array(P.object({address:P.string(),type:P.enum([pr.ACCOUNT_TYPES.EOA,pr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:P.optional(P.string())}),fNe=P.object({uri:P.string()}),pNe=P.object({isConnected:P.boolean()}),gNe=P.object({chainId:P.string().or(P.number())}),mNe=P.object({chainId:P.string().or(P.number())}),yNe=P.object({newEmail:P.string().email()}),wNe=P.object({smartAccountEnabledNetworks:P.array(P.number())});P.object({address:P.string(),isDeployed:P.boolean()});const bNe=P.object({version:P.string().optional()}),vNe=P.object({type:P.string(),address:P.string()}),ENe=P.any(),_Ne=P.object({method:P.literal("eth_accounts")}),xNe=P.object({method:P.literal("eth_blockNumber")}),CNe=P.object({method:P.literal("eth_call"),params:P.array(P.any())}),ANe=P.object({method:P.literal("eth_chainId")}),SNe=P.object({method:P.literal("eth_estimateGas"),params:P.array(P.any())}),INe=P.object({method:P.literal("eth_feeHistory"),params:P.array(P.any())}),TNe=P.object({method:P.literal("eth_gasPrice")}),NNe=P.object({method:P.literal("eth_getAccount"),params:P.array(P.any())}),PNe=P.object({method:P.literal("eth_getBalance"),params:P.array(P.any())}),kNe=P.object({method:P.literal("eth_getBlockByHash"),params:P.array(P.any())}),ONe=P.object({method:P.literal("eth_getBlockByNumber"),params:P.array(P.any())}),RNe=P.object({method:P.literal("eth_getBlockReceipts"),params:P.array(P.any())}),DNe=P.object({method:P.literal("eth_getBlockTransactionCountByHash"),params:P.array(P.any())}),$Ne=P.object({method:P.literal("eth_getBlockTransactionCountByNumber"),params:P.array(P.any())}),UNe=P.object({method:P.literal("eth_getCode"),params:P.array(P.any())}),BNe=P.object({method:P.literal("eth_getFilterChanges"),params:P.array(P.any())}),LNe=P.object({method:P.literal("eth_getFilterLogs"),params:P.array(P.any())}),MNe=P.object({method:P.literal("eth_getLogs"),params:P.array(P.any())}),jNe=P.object({method:P.literal("eth_getProof"),params:P.array(P.any())}),FNe=P.object({method:P.literal("eth_getStorageAt"),params:P.array(P.any())}),zNe=P.object({method:P.literal("eth_getTransactionByBlockHashAndIndex"),params:P.array(P.any())}),HNe=P.object({method:P.literal("eth_getTransactionByBlockNumberAndIndex"),params:P.array(P.any())}),WNe=P.object({method:P.literal("eth_getTransactionByHash"),params:P.array(P.any())}),qNe=P.object({method:P.literal("eth_getTransactionCount"),params:P.array(P.any())}),GNe=P.object({method:P.literal("eth_getTransactionReceipt"),params:P.array(P.any())}),VNe=P.object({method:P.literal("eth_getUncleCountByBlockHash"),params:P.array(P.any())}),KNe=P.object({method:P.literal("eth_getUncleCountByBlockNumber"),params:P.array(P.any())}),QNe=P.object({method:P.literal("eth_maxPriorityFeePerGas")}),JNe=P.object({method:P.literal("eth_newBlockFilter")}),YNe=P.object({method:P.literal("eth_newFilter"),params:P.array(P.any())}),ZNe=P.object({method:P.literal("eth_newPendingTransactionFilter")}),XNe=P.object({method:P.literal("eth_sendRawTransaction"),params:P.array(P.any())}),ePe=P.object({method:P.literal("eth_syncing"),params:P.array(P.any())}),tPe=P.object({method:P.literal("eth_uninstallFilter"),params:P.array(P.any())}),t6=P.object({method:P.literal("personal_sign"),params:P.array(P.any())}),nPe=P.object({method:P.literal("eth_signTypedData_v4"),params:P.array(P.any())}),rPe=P.object({method:P.literal("eth_sendTransaction"),params:P.array(P.any())}),sPe=P.object({method:P.literal("solana_signMessage"),params:P.object({message:P.string(),pubkey:P.string()})}),iPe=P.object({method:P.literal("solana_signTransaction"),params:P.object({transaction:P.string()})}),oPe=P.object({method:P.literal("solana_signAllTransactions"),params:P.object({transactions:P.array(P.string())})}),aPe=P.object({method:P.literal("solana_signAndSendTransaction"),params:P.object({transaction:P.string(),options:P.object({skipPreflight:P.boolean().optional(),preflightCommitment:P.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:P.number().optional(),minContextSlot:P.number().optional()}).optional()})}),cPe=P.object({method:P.literal("wallet_sendCalls"),params:P.array(P.object({chainId:P.string().or(P.number()).optional(),from:P.string().optional(),version:P.string().optional(),capabilities:P.any().optional(),calls:P.array(P.object({to:P.string().startsWith("0x"),data:P.string().startsWith("0x").optional(),value:P.string().optional()}))}))}),lPe=P.object({method:P.literal("wallet_getCallsStatus"),params:P.array(P.string())}),uPe=P.object({method:P.literal("wallet_getCapabilities")}),dPe=P.object({method:P.literal("wallet_grantPermissions"),params:P.array(P.any())}),hPe=P.object({method:P.literal("wallet_revokePermissions"),params:P.any()}),fPe=P.object({method:P.literal("wallet_getAssets"),params:P.any()}),n6=P.object({token:P.string()}),ke=P.object({id:P.string().optional()}),g0={appEvent:ke.extend({type:Pe("APP_SWITCH_NETWORK"),payload:QTe}).or(ke.extend({type:Pe("APP_CONNECT_EMAIL"),payload:JTe})).or(ke.extend({type:Pe("APP_CONNECT_DEVICE")})).or(ke.extend({type:Pe("APP_CONNECT_OTP"),payload:YTe})).or(ke.extend({type:Pe("APP_CONNECT_SOCIAL"),payload:ZTe})).or(ke.extend({type:Pe("APP_GET_FARCASTER_URI")})).or(ke.extend({type:Pe("APP_CONNECT_FARCASTER")})).or(ke.extend({type:Pe("APP_GET_USER"),payload:P.optional(XTe)})).or(ke.extend({type:Pe("APP_GET_SOCIAL_REDIRECT_URI"),payload:eNe})).or(ke.extend({type:Pe("APP_SIGN_OUT")})).or(ke.extend({type:Pe("APP_IS_CONNECTED"),payload:P.optional(n6)})).or(ke.extend({type:Pe("APP_GET_CHAIN_ID")})).or(ke.extend({type:Pe("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ke.extend({type:Pe("APP_INIT_SMART_ACCOUNT")})).or(ke.extend({type:Pe("APP_SET_PREFERRED_ACCOUNT"),payload:oNe})).or(ke.extend({type:Pe("APP_RPC_REQUEST"),payload:t6.or(fPe).or(_Ne).or(xNe).or(CNe).or(ANe).or(SNe).or(INe).or(TNe).or(NNe).or(PNe).or(kNe).or(ONe).or(RNe).or(DNe).or($Ne).or(UNe).or(BNe).or(LNe).or(MNe).or(jNe).or(FNe).or(zNe).or(HNe).or(WNe).or(qNe).or(GNe).or(VNe).or(KNe).or(QNe).or(JNe).or(YNe).or(ZNe).or(XNe).or(ePe).or(tPe).or(t6).or(nPe).or(rPe).or(sPe).or(iPe).or(oPe).or(aPe).or(lPe).or(cPe).or(uPe).or(dPe).or(hPe)})).or(ke.extend({type:Pe("APP_UPDATE_EMAIL"),payload:tNe})).or(ke.extend({type:Pe("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:nNe})).or(ke.extend({type:Pe("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:rNe})).or(ke.extend({type:Pe("APP_SYNC_THEME"),payload:sNe})).or(ke.extend({type:Pe("APP_SYNC_DAPP_DATA"),payload:iNe})).or(ke.extend({type:Pe("APP_RELOAD")})),frameEvent:ke.extend({type:Pe("FRAME_SWITCH_NETWORK_ERROR"),payload:Cn}).or(ke.extend({type:Pe("FRAME_SWITCH_NETWORK_SUCCESS"),payload:mNe})).or(ke.extend({type:Pe("FRAME_CONNECT_EMAIL_SUCCESS"),payload:aNe})).or(ke.extend({type:Pe("FRAME_CONNECT_EMAIL_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:cNe})).or(ke.extend({type:Pe("FRAME_GET_FARCASTER_URI_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:lNe})).or(ke.extend({type:Pe("FRAME_CONNECT_FARCASTER_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_CONNECT_OTP_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_CONNECT_OTP_SUCCESS")})).or(ke.extend({type:Pe("FRAME_CONNECT_DEVICE_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ke.extend({type:Pe("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:uNe})).or(ke.extend({type:Pe("FRAME_CONNECT_SOCIAL_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_GET_USER_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_GET_USER_SUCCESS"),payload:hNe})).or(ke.extend({type:Pe("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:fNe})).or(ke.extend({type:Pe("FRAME_SIGN_OUT_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_SIGN_OUT_SUCCESS")})).or(ke.extend({type:Pe("FRAME_IS_CONNECTED_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_IS_CONNECTED_SUCCESS"),payload:pNe})).or(ke.extend({type:Pe("FRAME_GET_CHAIN_ID_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_GET_CHAIN_ID_SUCCESS"),payload:gNe})).or(ke.extend({type:Pe("FRAME_RPC_REQUEST_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_RPC_REQUEST_SUCCESS"),payload:ENe})).or(ke.extend({type:Pe("FRAME_SESSION_UPDATE"),payload:n6})).or(ke.extend({type:Pe("FRAME_UPDATE_EMAIL_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_UPDATE_EMAIL_SUCCESS"),payload:dNe})).or(ke.extend({type:Pe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ke.extend({type:Pe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:yNe})).or(ke.extend({type:Pe("FRAME_SYNC_THEME_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_SYNC_THEME_SUCCESS")})).or(ke.extend({type:Pe("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ke.extend({type:Pe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:wNe})).or(ke.extend({type:Pe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:vNe})).or(ke.extend({type:Pe("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_READY"),payload:bNe})).or(ke.extend({type:Pe("FRAME_RELOAD_ERROR"),payload:Cn})).or(ke.extend({type:Pe("FRAME_RELOAD_SUCCESS")}))};function rI(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class pPe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ie.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!rI(Ue.FRAME_EVENT_KEY,l))return;const u=g0.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}vi.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{vi.isClient&&window.addEventListener("message",({data:o})=>{if(!rI(Ue.FRAME_EVENT_KEY,o))return;const a=g0.frameEvent.parse(o);i(a)})},onAppEvent:i=>{vi.isClient&&window.addEventListener("message",({data:o})=>{if(!rI(Ue.APP_EVENT_KEY,o))return;const a=g0.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(vi.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");g0.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(vi.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");g0.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),vi.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${Hde}?projectId=${e}&chainId=${r}&version=${qde}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class gPe{constructor(e){var i;const n=my({level:Wde}),{logger:r,chunkLoggerController:s}=TR({opts:n});this.logger=ns(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class mPe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new gPe(e)),this.abortController=i,this.w3mFrame=new pPe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!xr.get(Ue.EMAIL_LOGIN_USED_KEY)}getEmail(){return xr.get(Ue.EMAIL)}getUsername(){return xr.get(Ue.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ue.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{vi.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ue.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ue.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ue.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ue.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ue.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ue.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ue.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ue.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ue.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ue.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ue.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ue.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ue.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ue.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ue.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ue.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ue.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ue.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ue.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ue.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(pr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ue.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ue.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ue.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:pr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ue.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{pr.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ue.APP_SYNC_DAPP_DATA,Ue.APP_SYNC_THEME,Ue.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ue.APP_CONNECT_EMAIL,Ue.APP_CONNECT_DEVICE,Ue.APP_CONNECT_OTP,Ue.APP_CONNECT_SOCIAL,Ue.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,w){var v,b,x;y.id===u&&((b=w==null?void 0:(v=w.logger).info)==null||b.call(v,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((x=y.payload)==null?void 0:x.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){xr.set(Ue.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){xr.set(Ue.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&xr.set(Ue.EMAIL,e),xr.set(Ue.EMAIL_LOGIN_USED_KEY,"true"),xr.delete(Ue.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){xr.delete(Ue.EMAIL_LOGIN_USED_KEY),xr.delete(Ue.EMAIL),xr.delete(Ue.LAST_USED_CHAIN_KEY),xr.delete(Ue.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&xr.set(Ue.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=xr.get(Ue.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){xr.set(Ue.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class sf{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return sf.instance||(sf.instance=new mPe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),sf.instance}}var r6={};const yPe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof r6<"u"?r6.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},MP={filterOutDuplicatesByRDNS(t){const e=he.state.enableEIP6963?_e.state.connectors:[],n=Ee.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Le.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=_e.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ee.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=_e.state,{featuredWalletIds:n}=he.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=he.state.features)==null?void 0:c.connectMethodsOrder),r=e||_e.state.connectors;if(n)return n;const{injected:s,announced:i}=r_.getConnectorsByType(r,ze.state.recommended,ze.state.featured),o=s.filter(r_.showConnector),a=i.filter(r_.showConnector);return o.length||a.length?["wallet","email","social"]:yPe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ze.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ze.state.excludedWallets.some(r=>Ab.isLowerCaseMatch(r.name,t.name));return e||n}},r_={getConnectorsByType(t,e,n){const{customWallets:r}=he.state,s=Ee.getRecentWallets(),i=MP.filterOutDuplicateWallets(e),o=MP.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ze.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ze.state.excludedWallets.some(i=>Ab.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Le.isMobile()||Le.isMobile()&&!e&&!Oe.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(L.state.chains.values()).some(n=>_e.getConnectorId(n.namespace)===ie.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=he.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=r_.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:he.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),p=new Set(f.map(w=>w.type)),g=c.filter(w=>p.has(w)).map(w=>({type:w,isEnabled:!0})),y=f.filter(({type:w})=>!g.some(({type:b})=>b===w));return Array.from(new Set([...g,...y].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Le.isMobile())return{accounts:[],chainId:void 0};if(t.id===ie.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const s_=globalThis,c3=s_.ShadowRoot&&(s_.ShadyCSS===void 0||s_.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,l3=Symbol(),s6=new WeakMap;let hq=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==l3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(c3&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=s6.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&s6.set(n,e))}return e}toString(){return this.cssText}};const ji=t=>new hq(typeof t=="string"?t:t+"",void 0,l3),_g=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new hq(n,t,l3)},wPe=(t,e)=>{if(c3)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=s_.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},i6=c3?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return ji(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:bPe,defineProperty:vPe,getOwnPropertyDescriptor:EPe,getOwnPropertyNames:_Pe,getOwnPropertySymbols:xPe,getPrototypeOf:CPe}=Object,sd=globalThis,o6=sd.trustedTypes,APe=o6?o6.emptyScript:"",sI=sd.reactiveElementPolyfillSupport,pw=(t,e)=>t,jP={toAttribute(t,e){switch(e){case Boolean:t=t?APe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},fq=(t,e)=>!bPe(t,e),a6={attribute:!0,type:String,converter:jP,reflect:!1,useDefault:!1,hasChanged:fq};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),sd.litPropertyMetadata??(sd.litPropertyMetadata=new WeakMap);let Lp=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=a6){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&vPe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=EPe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??a6}static _$Ei(){if(this.hasOwnProperty(pw("elementProperties")))return;const e=CPe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(pw("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(pw("properties"))){const n=this.properties,r=[..._Pe(n),...xPe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(i6(s))}else e!==void 0&&n.push(i6(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return wPe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:jP).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:jP;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??fq)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Lp.elementStyles=[],Lp.shadowRootOptions={mode:"open"},Lp[pw("elementProperties")]=new Map,Lp[pw("finalized")]=new Map,sI==null||sI({ReactiveElement:Lp}),(sd.reactiveElementVersions??(sd.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gw=globalThis,Sx=gw.trustedTypes,c6=Sx?Sx.createPolicy("lit-html",{createHTML:t=>t}):void 0,pq="$lit$",ou=`lit$${Math.random().toFixed(9).slice(2)}$`,gq="?"+ou,SPe=`<${gq}>`,kf=document,Lb=()=>kf.createComment(""),Mb=t=>t===null||typeof t!="object"&&typeof t!="function",u3=Array.isArray,IPe=t=>u3(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",iI=`[ 	
\f\r]`,m0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,l6=/-->/g,u6=/>/g,jd=RegExp(`>|${iI}(?:([^\\s"'>=/]+)(${iI}*=${iI}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),d6=/'/g,h6=/"/g,mq=/^(?:script|style|textarea|title)$/i,yq=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),j4e=yq(1),F4e=yq(2),Km=Symbol.for("lit-noChange"),ur=Symbol.for("lit-nothing"),f6=new WeakMap,vh=kf.createTreeWalker(kf,129);function wq(t,e){if(!u3(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return c6!==void 0?c6.createHTML(e):e}const TPe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=m0;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===m0?u[1]==="!--"?o=l6:u[1]!==void 0?o=u6:u[2]!==void 0?(mq.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=jd):u[3]!==void 0&&(o=jd):o===jd?u[0]===">"?(o=s??m0,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?jd:u[3]==='"'?h6:d6):o===h6||o===d6?o=jd:o===l6||o===u6?o=m0:(o=jd,s=void 0);const f=o===jd&&t[a+1].startsWith("/>")?" ":"";i+=o===m0?c+SPe:d>=0?(r.push(l),c.slice(0,d)+pq+c.slice(d)+ou+f):c+ou+(d===-2?a:f)}return[wq(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class jb{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=TPe(e,n);if(this.el=jb.createElement(l,r),vh.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=vh.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(pq)){const h=u[o++],f=s.getAttribute(d).split(ou),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?PPe:p[1]==="?"?kPe:p[1]==="@"?OPe:uA}),s.removeAttribute(d)}else d.startsWith(ou)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(mq.test(s.tagName)){const d=s.textContent.split(ou),h=d.length-1;if(h>0){s.textContent=Sx?Sx.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Lb()),vh.nextNode(),c.push({type:2,index:++i});s.append(d[h],Lb())}}}else if(s.nodeType===8)if(s.data===gq)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(ou,d+1))!==-1;)c.push({type:7,index:i}),d+=ou.length-1}i++}}static createElement(e,n){const r=kf.createElement("template");return r.innerHTML=e,r}}function Qm(t,e,n=t,r){var o,a;if(e===Km)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Mb(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Qm(t,s._$AS(t,e.values),s,r)),e}class NPe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??kf).importNode(n,!0);vh.currentNode=s;let i=vh.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Wv(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new RPe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=vh.nextNode(),o++)}return vh.currentNode=kf,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Wv{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=ur,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Qm(this,e,n),Mb(e)?e===ur||e==null||e===""?(this._$AH!==ur&&this._$AR(),this._$AH=ur):e!==this._$AH&&e!==Km&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):IPe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ur&&Mb(this._$AH)?this._$AA.nextSibling.data=e:this.T(kf.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=jb.createElement(wq(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new NPe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=f6.get(e.strings);return n===void 0&&f6.set(e.strings,n=new jb(e)),n}k(e){u3(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Wv(this.O(Lb()),this.O(Lb()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class uA{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=ur,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ur}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Qm(this,e,n,0),o=!Mb(e)||e!==this._$AH&&e!==Km,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Qm(this,a[r+c],n,c),l===Km&&(l=this._$AH[c]),o||(o=!Mb(l)||l!==this._$AH[c]),l===ur?e=ur:e!==ur&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===ur?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class PPe extends uA{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ur?void 0:e}}class kPe extends uA{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ur)}}class OPe extends uA{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Qm(this,e,n,0)??ur)===Km)return;const r=this._$AH,s=e===ur&&r!==ur||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==ur&&(r===ur||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class RPe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Qm(this,e)}}const oI=gw.litHtmlPolyfillSupport;oI==null||oI(jb,Wv),(gw.litHtmlVersions??(gw.litHtmlVersions=[])).push("3.3.0");const DPe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Wv(e.insertBefore(Lb(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const of=globalThis;let i_=class extends Lp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=DPe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Km}};var pL;i_._$litElement$=!0,i_.finalized=!0,(pL=of.litElementHydrateSupport)==null||pL.call(of,{LitElement:i_});const aI=of.litElementPolyfillSupport;aI==null||aI({LitElement:i_});(of.litElementVersions??(of.litElementVersions=[])).push("4.2.0");let mw,id,od;function H4e(t,e){mw=document.createElement("style"),id=document.createElement("style"),od=document.createElement("style"),mw.textContent=xg(t).core.cssText,id.textContent=xg(t).dark.cssText,od.textContent=xg(t).light.cssText,document.head.appendChild(mw),document.head.appendChild(id),document.head.appendChild(od),bq(e)}function bq(t){id&&od&&(t==="light"?(id.removeAttribute("media"),od.media="enabled"):(od.removeAttribute("media"),id.media="enabled"))}function $Pe(t){mw&&id&&od&&(mw.textContent=xg(t).core.cssText,id.textContent=xg(t).dark.cssText,od.textContent=xg(t).light.cssText)}function xg(t){return{core:_g`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ji(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ji((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ji((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ji((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ji((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:_g`
      :root {
        --w3m-color-mix: ${ji((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ji(Mc(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ji(Mc(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:_g`
      :root {
        --w3m-color-mix: ${ji((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ji(Mc(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ji(Mc(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const W4e=_g`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,q4e=_g`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,G4e=_g`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,B0={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},vq=Pte({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function qv(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const p6=qv({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),g6=qv({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});qv({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});qv({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});qv({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const UPe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},yw={getMethodsByChainNamespace(t){return UPe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case p6.caipNetworkId:u.chains.push(p6.deprecatedCaipNetworkId);break;case g6.caipNetworkId:u.chains.push(g6.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await rw.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class d3{constructor({provider:e,namespace:n}){this.id=ie.CONNECTOR_ID.WALLET_CONNECT,this.name=Fu.ConnectorNamesMap[ie.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Fu.ConnectorImageIds[ie.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=L.getCaipNetworks.bind(L),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=he.state.universalProviderConfigOverride,s=yw.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return fw.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:BPe})}}const BPe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class Eq{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>L.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ie.CONNECTOR_ID.AUTH,type:"AUTH",name:ie.CONNECTOR_NAMES.AUTH,provider:e,imageId:Fu.ConnectorImageIds[ie.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){ve.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=ve.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof d3);if(!e)throw new Error("WalletConnectConnector not found");return e}}class LPe extends Eq{setUniversalProvider(e){this.addConnector(new d3({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Le.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&jt.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(ve.state.balanceLoading&&e.chainId===((c=L.state.activeCaipNetwork)==null?void 0:c.id))return{balance:ve.state.balance||"0.00",symbol:ve.state.balanceSymbol||""};const s=(await ve.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ie.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Ey.encode(new TextEncoder().encode(r)),pubkey:s}},(a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=L.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ie.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:gf(n.id)}]}))}catch(u){if(u.code===B0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===B0.ERROR_INVALID_CHAIN_ID||u.code===B0.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===B0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:gf(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const MPe=["email","socials","swaps","onramp","activity","reownBranding"],uE={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?jt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?jt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?jt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?jt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?jt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?jt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?jt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?jt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?jt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},jPe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=uE[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=uE[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return uE[t].processApi(e)},processFallbackFeature(t,e){return uE[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await ze.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?jt.DEFAULT_REMOTE_FEATURES:jt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of MPe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),jt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Fn.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class FPe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=L.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=L.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=L.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return L.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>L.getCaipNetworks(n),this.getActiveChainNamespace=()=>L.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{L.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>L.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>L.state.activeChain===n||!n?L.state.activeCaipAddress:L.getAccountProp("caipAddress",n),this.setClientId=n=>{qe.setClientId(n)},this.getProvider=n=>Kt.getProvider(n),this.getProviderType=n=>Kt.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=ve.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{ve.setCaipAddress(n,r),n&&he.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{ve.setBalance(n,r,s)},this.setProfileName=(n,r)=>{ve.setProfileName(n,r)},this.setProfileImage=(n,r)=>{ve.setProfileImage(n,r)},this.setUser=(n,r)=>{ve.setUser(n,r)},this.resetAccount=n=>{ve.resetAccount(n)},this.setCaipNetwork=n=>{L.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{L.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{ve.setAllAccounts(n,r),he.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{ve.setStatus(n,r),_e.isConnected()?Ee.setConnectionStatus("connected"):Ee.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>L.getAccountProp("address",n),this.setConnectors=n=>{const r=[..._e.state.allConnectors,...n];_e.setConnectors(r)},this.setConnections=(n,r)=>{Oe.setConnections(n,r)},this.fetchIdentity=n=>qe.fetchIdentity(n),this.getReownName=n=>rw.getNamesForAddress(n),this.getConnectors=()=>_e.getConnectors(),this.getConnectorImage=n=>V7.getConnectorImage(n),this.getConnections=n=>gb.getConnectionsData(n).connections,this.getRecentConnections=n=>gb.getConnectionsData(n).recentConnections,this.switchConnection=n=>Oe.switchConnection(n),this.deleteConnection=n=>Ee.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=Kt.getProviderId(r),i=n?{...n,type:s}:void 0;ve.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!L.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{ve.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{ve.removeAddressLabel(n,r)},this.getAddress=n=>L.state.activeChain===n||!n?ve.state.address:L.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>L.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{L.resetNetwork(n)},this.addConnector=n=>{_e.addConnector(n)},this.resetWcConnection=()=>{Oe.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{ve.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{ve.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{L.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{ve.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{he.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await jPe.fetchRemoteFeatures(e),he.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&MN.setOnrampProviders(this.remoteFeatures.onramp),((n=he.state.remoteFeatures)!=null&&n.email||Array.isArray((r=he.state.remoteFeatures)==null?void 0:r.socials)&&((s=he.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await ze.fetchAllowedOrigins();if(!e||!Le.isClient()){Fn.open(mn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;yw.isOriginAllowed(n,e,B0.DEFAULT_ALLOWED_ANCESTORS)||Fn.open(mn.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){Fn.open(mn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Fn.open(mn.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Fn.open({shortMessage:mn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:mn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:Fn.open(mn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Ft.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Fs.setThemeMode(e.themeMode),e.themeVariables&&Fs.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");L.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&L.setActiveCaipNetwork(n)}initializeConnectionController(e){Oe.initialize(e.adapters??[]),Oe.setWcBasic(e.basic??!1)}initializeConnectorController(){_e.initialize(this.chainNamespaces)}initializeProjectSettings(e){he.setProjectId(e.projectId),he.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;he.setDebug(e.debug!==!1),he.setEnableWalletConnect(e.enableWalletConnect!==!1),he.setEnableWalletGuide(e.enableWalletGuide!==!1),he.setEnableWallets(e.enableWallets!==!1),he.setEIP6963Enabled(e.enableEIP6963!==!1),he.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),he.setEnableAuthLogger(e.enableAuthLogger!==!1),he.setCustomRpcUrls(e.customRpcUrls),he.setEnableEmbedded(e.enableEmbedded),he.setAllWallets(e.allWallets),he.setIncludeWalletIds(e.includeWalletIds),he.setExcludeWalletIds(e.excludeWalletIds),he.setFeaturedWalletIds(e.featuredWalletIds),he.setTokens(e.tokens),he.setTermsConditionsUrl(e.termsConditionsUrl),he.setPrivacyPolicyUrl(e.privacyPolicyUrl),he.setCustomWallets(e.customWallets),he.setFeatures(e.features),he.setAllowUnsupportedChain(e.allowUnsupportedChain),he.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),he.setPreferUniversalLinks(e.experimental_preferUniversalLinks),he.setDefaultAccountTypes(e.defaultAccountTypes);const n=Ee.getPreferredAccountTypes()||{},r={...he.state.defaultAccountTypes,...n};ve.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),he.setMetadata(e.metadata),he.setDisableAppend(e.disableAppend),he.setEnableEmbedded(e.enableEmbedded),he.setSIWX(e.siwx),!e.projectId){Fn.open(mn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ie.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");he.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Le.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Ra.getUnsupportedNetwork(`${n}:${e}`);L.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Ra.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Ra.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Ra.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Ra.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Kt.getProvider(e),s=Kt.getProviderId(e),{caipAddress:i}=L.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Ee.removeConnectedNamespace(e),Kt.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),_e.removeConnectorId(e),L.resetAccount(e),L.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=L.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Ee.setConnectedNamespaces([...L.state.chains.keys()]),this.chainNamespaces.forEach(o=>{_e.setConnectorId(dn.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,w,v,b,x;const c=L.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(C=>C.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((w=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:w[0])||((x=(b=(v=d==null?void 0:d.rpcUrls)==null?void 0:v.default)==null?void 0:b.http)==null?void 0:x[0])});if(!h)return;Ee.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=ve.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=L.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Ee.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=Jde(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Pt.resetSend(),Oe.resetWcConnection(),await fw.clearSessions(),_e.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Ee.deleteConnectedSocialProvider(),Ft.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(L.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:ve.state.address,provider:Kt.getProvider(L.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(jt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(L.state.activeChain),s=Kt.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ie.CHAIN.EVM){const n=this.getAdapter(L.state.activeChain),r=Kt.getProvider(L.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:ve.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:L.state.activeChain}),ve.state.profileImage||!1},getEnsAddress:async e=>await yw.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(L.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Kt.getProvider(L.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!ve.state.address||this.updateNativeBalance(ve.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Oe.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Kt.getProviderId(L.state.activeChain)===dn.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Kt.getProvider(n),i=Kt.getProviderId(n);if(e.chainNamespace===L.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===dn.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=wi.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new LPe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Ee.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Ee.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=L.state.activeChain===e,c=L.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=ve.state.address,i=L.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=L.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=L.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=L.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ie.CHAIN.EVM&&Le.isSafeApp()&&_e.setConnectorId(ie.CONNECTOR_ID.SAFE,e);const n=_e.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ie.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ie.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=_e.getConnectorId(e),s=this.getCaipNetwork(e),o=_e.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Le.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=L.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:y}=wi.parseCaipAddress(g);return y===(c==null?void 0:c.toString())})||a[0];if(l){const g=wi.validateCaipAddress(l),{chainId:y,address:w}=wi.parseCaipAddress(g);if(Kt.setProviderId(i,dn.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&L.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==ie.CHAIN.EVM){const v=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:L.state.activeCaipNetwork});Kt.setProvider(i,v)}else Kt.setProvider(i,this.universalProvider);_e.setConnectorId(ie.CONNECTOR_ID.WALLET_CONNECT,i),Ee.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:w,chainId:y,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await L.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=wi.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Le.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Kt.setProviderId(s,e),Kt.setProvider(s,n),_e.setConnectorId(r,s)}async syncAllAccounts(e){const n=_e.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===L.state.activeChain,r=L.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ee.getActiveNetworkProps(),c=i||a,l=((d=L.state.activeCaipNetwork)==null?void 0:d.name)===ie.UNSUPPORTED_NETWORK_NAME,u=L.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],w=y.find(b=>{var x;return((x=wi.parseCaipNetworkId(b))==null?void 0:x.chainId)===c.toString()}),v=y.find(b=>{var x;return((x=wi.parseCaipNetworkId(b))==null?void 0:x.chainNamespace)===o});f=this.getCaipNetworks().find(b=>b.caipNetworkId===w),p=this.getCaipNetworks().find(b=>b.caipNetworkId===v||"deprecatedCaipNetworkId"in b&&b.deprecatedCaipNetworkId===v)}const g=f||p;(g==null?void 0:g.chainNamespace)===L.state.activeChain?he.state.enableNetworkSwitch&&!he.state.allowUnsupportedChain&&((h=L.state.activeCaipNetwork)==null?void 0:h.name)===ie.UNSUPPORTED_NETWORK_NAME?L.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Ab.isLowerCaseMatch(s,ve.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=_e.getConnectorId(e),r=Kt.getProviderId(e);if(r===dn.CONNECTOR_TYPE_ANNOUNCED||r===dn.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===dn.CONNECTOR_TYPE_WALLET_CONNECT){const i=Kt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ie.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ie.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!pb.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=L.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=QIe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};he.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await GIe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Oe.setUri(e)}),this.universalProvider.on("connect",Oe.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Oe.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(yw.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Le.isCaipAddress(r[0])&&this.syncAccount(wi.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Le.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Ft.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(mn.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=mn.ALERT_ERRORS[o];a&&(Fn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&Oe.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Dt.open({...e,data:{swap:e.arguments}})}return Dt.open(e)}async close(){await this.injectModalUi(),Dt.close()}setLoading(e,n){Dt.setLoading(e,n)}async disconnect(e){await Oe.disconnect({namespace:e})}getSIWX(){return he.state.siwx}getError(){return""}getChainId(){var e;return(e=L.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Fn.open(mn.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await L.switchActiveNetwork(n)}getWalletProvider(){return L.state.activeChain?Kt.state.providers[L.state.activeChain]:null}getWalletProviderType(){return Kt.getProviderId(L.state.activeChain)}subscribeProviders(e){return Kt.subscribeProviders(e)}getThemeMode(){return Fs.state.themeMode}getThemeVariables(){return Fs.state.themeVariables}setThemeMode(e){Fs.setThemeMode(e),bq(Fs.state.themeMode)}setTermsConditionsUrl(e){he.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){he.setPrivacyPolicyUrl(e)}setThemeVariables(e){Fs.setThemeVariables(e),$Pe(Fs.state.themeVariables)}subscribeTheme(e){return Fs.subscribe(e)}subscribeConnections(e){return Oe.subscribe(e)}getWalletInfo(e){return e?L.getAccountProp("connectedWalletInfo",e):ve.state.connectedWalletInfo}getAccount(e){var o;const n=_e.getAuthConnector(e),r=L.getAccountData(e),s=L.state.activeChain,i=Ee.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Le.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ie.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Ee.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?L.subscribeChainProp("accountState",r,n):L.subscribe(r),_e.subscribe(r)}subscribeNetwork(e){return L.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?ve.subscribeKey("connectedWalletInfo",e,n):ve.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ve.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){L.subscribeKey("activeCaipNetwork",e)}getState(){return ja.state}subscribeState(e){return ja.subscribe(e)}showErrorMessage(e){zo.showError(e)}showSuccessMessage(e){zo.showSuccess(e)}getEvent(){return{...Ft.state}}subscribeEvents(e){return Ft.subscribe(e)}replace(e){Ve.replace(e)}redirect(e){Ve.push(e)}popTransactionStack(e){Ve.popTransactionStack(e)}isOpen(){return Dt.state.open}isTransactionStackEmpty(){return Ve.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){he.setFeatures(e)}updateRemoteFeatures(e){he.setRemoteFeatures(e)}updateOptions(e){const r={...he.state||{},...e};he.setOptions(r)}setConnectMethodsOrder(e){he.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){he.setWalletFeaturesOrder(e)}setCollapseWallets(e){he.setCollapseWallets(e)}setSocialsOrder(e){he.setSocialsOrder(e)}getConnectMethodsOrder(){return MP.getConnectOrderMethod(he.state.features,_e.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||L.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&L.removeNetwork(e,n)}}let m6=!1;class zPe extends FPe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{vi.checkIfRequestExists(n)?vi.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(pr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(pr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=vi.checkIfRequestIsSafe(r),i=ve.state.address,o=L.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=L.state.activeChain;_e.getConnectorId(n)===ie.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=L.state.activeChain,s=r===ie.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=he.state.defaultAccountTypes[r],o=(l=ve.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;Ab.isLowerCaseMatch(n.address,ve.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...ve.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Le.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Le.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...ve.state.user||{},username:n},L.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,L.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,L.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===L.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=ve.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=Fs.getSnapshot(),u=he.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:Mc(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:ie.CONNECTOR_ID.AUTH,info:{name:ie.CONNECTOR_ID.AUTH},type:dn.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=L.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):_e.getConnectorId(n)===ie.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Ee.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Le.isTelegram())return;const r=Ee.getTelegramSocialProvider();if(!r||!Le.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;ve.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=_e.getAuthConnector();r&&o&&(this.setLoading(!0,e),await Oe.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Ee.setConnectedSocialProvider(r),Ee.removeTelegramSocialProvider(),Ft.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Ab.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=sf.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:mn.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?Fn.open(mn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?Fn.open(mn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&Fn.open(mn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),ja.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===L.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ze.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=L.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Kt.getProvider(r),u=Kt.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Kt.getProviderId(n)===dn.CONNECTOR_TYPE_AUTH,u=Kt.getProviderId(r),d=u===dn.CONNECTOR_TYPE_AUTH,h=ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(L.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ie.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:dn.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===dn.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),ja.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ie.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Kt.getProviderId(e);if(n===dn.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Ee.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Le.isClient()&&!m6)try{const e={...jt.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Le.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!he.state.disableAppend&&!he.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}m6=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Le.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Rn(()=>import("./embedded-wallet-C8icZZpN.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(Rn(()=>import("./email-sk_nuGF9.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(Rn(()=>import("./socials-xOlUys1c.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(Rn(()=>import("./swaps-DUb4iz2I.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(Rn(()=>import("./send-C9KNOMIj.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(Rn(()=>import("./receive-x927dT1_.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(Rn(()=>import("./onramp-Cf8GZiK7.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(Rn(()=>import("./transactions-IjqZ2oug.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(Rn(()=>import("./index-BXh-GUuJ.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,Rn(()=>import("./index-CpIYuiTP.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),Rn(()=>import("./w3m-modal-Cohu4_4y.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let Hl;function HPe(t){t&&(Hl=t)}function Gv(){if(!Hl)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Hl==null?void 0:Hl.open(n))}async function e(){await(Hl==null?void 0:Hl.close())}return{open:t,close:e}}const WPe="1.7.10";let dE;function qPe(t){return dE||(dE=new zPe({...t,sdkVersion:Le.generateSdkVersion(t.adapters??[],"react",WPe)}),HPe(dE)),dE}const GPe=na({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),y6=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],VPe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=GPe({isOpen:t}),{open:i}=Gv(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,y]=D.useState(1),[w,v]=D.useState(1),[b,x]=D.useState(0),[_,C]=D.useState(null),[A,T]=D.useState(y6[0]),[S,k]=D.useState(!1),[R,F]=D.useState(null),W=D.useCallback(async()=>{var $,j;try{if(($=window.solana)!=null&&$.isPhantom){const V=await window.solana.connect();F(V.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const V=await window.solflare.connect();F(V.publicKey.toString());return}i()}catch(V){console.error("Failed to connect Solana wallet:",V),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}k(!1)},[i]);D.useEffect(()=>{var $,j;($=window.solana)!=null&&$.publicKey?F(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&F(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let V,ee=f==="owned"&&r||void 0;if(A.api==="opensea-solana"){if(f==="owned"&&!R){k(!0),u(!1);return}ee=R||void 0,V=await H7(A.slug,50),console.log("Fetched Solana NFTs from collection:",V.data.length),f==="owned"&&R&&(console.log("Filtering for owner:",R),console.log("Sample NFT owner data:",(j=V.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",V.data.map(re=>({name:re.name,owners:re.owners,owner_of:re.owner_of}))),V.data.some(re=>re.owners&&re.owners.length>0)?(V.data=V.data.filter(re=>{const ce=re.owners.some(ye=>ye.owner_of&&ye.owner_of.toLowerCase()===R.toLowerCase());return ce&&console.log("Found owned NFT:",re.name),ce}),console.log("NFTs after filtering:",V.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else A.api==="opensea"?V=await xR(A.slug,50,ee):V=await _R(A.slug,g,50,ee);c(V.data),v(V.totalPages),x(V.totalCount)}catch(V){V instanceof Error?h(V.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,A,R]),D.useEffect(()=>{S&&W()},[S,W]);const Q=$=>new Date($).toLocaleDateString(),I=$=>A.api==="opensea-solana"&&(!$.owners||$.owners.length===0)?"Owner data unavailable":$.owners.length>0?`${$.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},M=async $=>{if(A.api==="opensea"&&A.chain)try{const j=await z7(A.chain,$.address,$.token_id.toString()),V={...$,attributes:JSON.stringify(j.traits||[])};C(V)}catch(j){console.error("Failed to fetch full NFT details",j),C($)}else C($)},B=$=>{T($),y(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(Pv,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsx("div",{className:s.collectionSelector,children:y6.map($=>m.jsx("button",{className:`${s.collectionButton} ${A.slug===$.slug?"active":""}`,onClick:()=>B($),children:$.name},$.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!R,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||R?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||R?1:.6},children:"My NFTs"}),A.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{W()},style:{background:R?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:R?"white":"black",marginLeft:"auto"},children:R?`Solana: ${R.slice(0,4)}...${R.slice(-4)}`:"Connect Solana"})]}),A.api==="opensea-solana"&&!R&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${b} total)`,f==="recent"&&`Recently minted NFTs by ${A.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${A.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map($=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{M($)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${$.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",$.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I($)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",Q($.created_at)]})]},$.id))}),f!=="recent"&&w>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>y($=>Math.max(1,$-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",w]}),m.jsx("button",{onClick:()=>y($=>Math.min(w,$+1)),disabled:g===w,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===w?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&m.jsx(rde,{nft:_,onClose:()=>C(null)})]}):null};var hE,KPe=new Uint8Array(16);function QPe(){if(!hE&&(hE=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!hE))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hE(KPe)}const JPe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function YPe(t){return typeof t=="string"&&JPe.test(t)}var _r=[];for(var cI=0;cI<256;++cI)_r.push((cI+256).toString(16).substr(1));function ZPe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(_r[t[e+0]]+_r[t[e+1]]+_r[t[e+2]]+_r[t[e+3]]+"-"+_r[t[e+4]]+_r[t[e+5]]+"-"+_r[t[e+6]]+_r[t[e+7]]+"-"+_r[t[e+8]]+_r[t[e+9]]+"-"+_r[t[e+10]]+_r[t[e+11]]+_r[t[e+12]]+_r[t[e+13]]+_r[t[e+14]]+_r[t[e+15]]).toLowerCase();if(!YPe(n))throw TypeError("Stringified UUID is invalid");return n}function XPe(t,e,n){t=t||{};var r=t.random||(t.rng||QPe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ZPe(r)}const eke=na({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),tke=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],nke=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],ai=500;function _q(){const t=eke(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(36),[u,d]=D.useState(36),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[y,w]=D.useState(!1),[v,b]=D.useState(!1),[x,_]=D.useState(!1),[C,A]=D.useState([]),[T,S]=D.useState(null),k=D.useRef(null),[R,F]=D.useState(null),W=async Z=>{const te=Z.getContext("2d");if(!te)return;te.clearRect(0,0,Z.width,Z.height),n?await new Promise(se=>{const pe=new window.Image;pe.crossOrigin="anonymous",pe.onload=()=>{const Fe=Math.min(Z.width/pe.width,Z.height/pe.height),Ce=(Z.width-pe.width*Fe)/2,xe=(Z.height-pe.height*Fe)/2;te.drawImage(pe,Ce,xe,pe.width*Fe,pe.height*Fe),se()},pe.onerror=()=>se(),pe.src=n}):(te.fillStyle="#333",te.fillRect(0,0,Z.width,Z.height)),(se=>{se.textAlign="center",se.strokeStyle="black",se.lineWidth=3,se.fillStyle="white";const pe=(Fe,Ce)=>{const xe=Fe.toUpperCase().split(" "),je=[];let Ze=xe[0];for(let qt=1;qt<xe.length;qt++){const qn=xe[qt];se.measureText(Ze+" "+qn).width<Ce?Ze+=" "+qn:(je.push(Ze),Ze=qn)}return je.push(Ze),je};s&&(se.font=`${c}px Impact`,pe(s,ai-20).forEach((Ce,xe)=>{const je=c+xe*c*1.2;se.strokeText(Ce,ai/2,je),se.fillText(Ce,ai/2,je)})),o&&(se.font=`${u}px Impact`,pe(o,ai-20).reverse().forEach((Ce,xe)=>{const je=ai-u*1.2*(xe+1);se.strokeText(Ce,ai/2,je),se.fillText(Ce,ai/2,je)}))})(te),await Promise.all(C.map(se=>new Promise(pe=>{const Fe=new window.Image;Fe.src=se.src,Fe.onload=()=>{te.save(),te.translate(se.x,se.y),te.rotate(se.rotation*Math.PI/180),te.scale(se.scale,se.scale),te.drawImage(Fe,-40,-40,80,80),te.restore(),pe()},Fe.onerror=()=>pe()})));try{h&&Q(Z),p&&I(Z),y&&N(Z)}catch(se){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",se),f(!1),g(!1),w(!1)}},Q=Z=>{const te=Z.getContext("2d");if(!te)return;const le=te.getImageData(0,0,Z.width,Z.height),se=le.data;for(let pe=0;pe<se.length;pe+=4){const Fe=se[pe],Ce=se[pe+1],xe=se[pe+2],je=(Fe+Ce+xe)/3,Ze=1.8;se[pe]=Math.min(255,je+(Fe-je)*Ze),se[pe+1]=Math.min(255,je+(Ce-je)*Ze*.7),se[pe+2]=Math.min(255,je+(xe-je)*Ze*.4);const qt=1.3;se[pe]=Math.min(255,Math.max(0,se[pe]*qt)),se[pe+1]=Math.min(255,Math.max(0,se[pe+1]*qt)),se[pe+2]=Math.min(255,Math.max(0,se[pe+2]*qt))}te.putImageData(le,0,0)},I=Z=>{const te=Z.getContext("2d");if(!te)return;const le=4,pe=te.getImageData(0,0,Z.width,Z.height).data,Fe=new Uint8ClampedArray(pe);for(let Ce=0;Ce<Z.height;Ce+=le)for(let xe=0;xe<Z.width;xe+=le){const je=(Ce*Z.width+xe)*4,Ze=pe[je],qt=pe[je+1],qn=pe[je+2],Xt=pe[je+3];for(let kt=0;kt<le&&Ce+kt<Z.height;kt++)for(let kn=0;kn<le&&xe+kn<Z.width;kn++){const Di=((Ce+kt)*Z.width+(xe+kn))*4;Fe[Di]=Ze,Fe[Di+1]=qt,Fe[Di+2]=qn,Fe[Di+3]=Xt}}te.putImageData(new ImageData(Fe,Z.width,Z.height),0,0)},N=Z=>{const te=Z.getContext("2d");if(!te)return;const le=te.getImageData(0,0,Z.width,Z.height),se=le.data;for(let pe=0;pe<se.length;pe+=4){const Fe=(Math.random()-.5)*50;se[pe]=Math.max(0,Math.min(255,se[pe]+Fe)),se[pe+1]=Math.max(0,Math.min(255,se[pe+1]+Fe)),se[pe+2]=Math.max(0,Math.min(255,se[pe+2]+Fe))}te.putImageData(le,0,0)};D.useEffect(()=>{e.current&&W(e.current)},[W]);const M=Z=>{var le;const te=(le=Z.target.files)==null?void 0:le[0];te&&r(URL.createObjectURL(te))},B=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),w(!1)},$=async()=>{const Z=e.current;if(!Z)return;await W(Z);const te=document.createElement("a");te.download="meme.png",te.href=Z.toDataURL("image/png"),document.body.appendChild(te),te.click(),document.body.removeChild(te)},j=async Z=>{_(!0),b(!1);try{console.log("Fetching NFTs for collection:",Z);let te;if(Z.api==="opensea"){console.log("Using OpenSea API for:",Z.slug);const le=await xR(Z.slug,50);te=le.data,console.log("OpenSea response:",le)}else if(Z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Z.slug);const le=await H7(Z.slug,50);te=le.data,console.log("OpenSea Solana response:",le)}else{console.log("Using Scatter API for:",Z.slug);const le=await _R(Z.slug,1,50);te=le.data,console.log("Scatter response:",le)}if(te&&te.length>0){const le=te[Math.floor(Math.random()*te.length)],se=le.image||le.image_url||le.image_url_shrunk;console.log("Selected NFT:",le),console.log("Image URL:",se),r(se)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(te){console.error("Error fetching NFTs:",te),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}},V=Z=>{const te={id:XPe(),src:Z,x:80,y:80,scale:1,rotation:0};A(le=>le.length>=2||le.some(se=>se.src===Z&&!se.id.startsWith("upload-"))?le:[...le,te]),F(te.id)},ee=Z=>{var le;const te=(le=Z.target.files)==null?void 0:le[0];if(te){const se=URL.createObjectURL(te);V(se)}},ae=(Z,te,le)=>{A(se=>se.map(pe=>{if(pe.id!==Z)return pe;let Fe=pe.x+te/1.2,Ce=pe.y+le/1.2;const xe=40*pe.scale,je=40*pe.scale;return Fe=Math.max(xe,Math.min(ai-xe,Fe)),Ce=Math.max(je,Math.min(ai-je,Ce)),{...pe,x:Fe,y:Ce}}))},re=(Z,te,le,se,pe)=>{A(Fe=>Fe.map(Ce=>{if(Ce.id!==Z)return Ce;const xe=Ce.x,je=Ce.y,Ze=Math.atan2(pe-je,se-xe)*180/Math.PI;return{...Ce,rotation:le+(Ze-te)*.5}}))},ce=Z=>{A(te=>te.filter(le=>le.id!==Z))},ye=(Z,te)=>{A(le=>le.map(se=>se.id===Z?{...se,scale:Math.max(.2,se.scale*(1+(te-1)*.2))}:se))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>b(Z=>!Z),children:"Collections"}),v&&m.jsx("div",{className:t.dropdownContent,children:tke.map(Z=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{j(Z)},children:Z.name},Z.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:M})]}),x&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:Z=>i(Z.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Z=>l(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:Z=>a(Z.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Z=>d(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Z=>!Z),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Z=>!Z),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>w(Z=>!Z),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[nke.map((Z,te)=>m.jsx("img",{src:Z,alt:`sticker${te+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>V(Z)},Z)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:k,onChange:ee})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:$,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:B,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:ai,height:ai,className:t.canvas})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:ai,height:ai,pointerEvents:"none"},children:C.map(Z=>R===Z.id?m.jsxs("div",{style:{position:"absolute",left:Z.x,top:Z.y,width:80*Z.scale,height:80*Z.scale,transform:`rotate(${Z.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:te=>{S(Z.id),te.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:te=>{T===Z.id&&te.buttons===1&&ae(Z.id,te.movementX,te.movementY)},children:[m.jsx("img",{src:Z.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:te=>{var Ze;te.stopPropagation();const le=(Ze=te.currentTarget.parentElement)==null?void 0:Ze.getBoundingClientRect(),se=le?le.left+le.width/2:0,pe=le?le.top+le.height/2:0,Fe=Math.atan2(te.clientY-pe,te.clientX-se)*180/Math.PI,Ce=Z.rotation,xe=qt=>{re(Z.id,Fe,Ce,qt.clientX,qt.clientY)},je=()=>{window.removeEventListener("mousemove",xe),window.removeEventListener("mouseup",je)};window.addEventListener("mousemove",xe),window.addEventListener("mouseup",je)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:te=>{te.stopPropagation();const le=te.clientX,se=Fe=>{const Ce=(Fe.clientX-le)/80;ye(Z.id,1+Ce)},pe=()=>{window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",pe)};window.addEventListener("mousemove",se),window.addEventListener("mouseup",pe)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>ce(Z.id),children:""}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>F(null),children:"Place"})]},Z.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fb(){return Fb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fb.apply(this,arguments)}var zu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zu||(zu={}));const w6="popstate";function rke(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return FP("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Cq(s)}return ike(e,n,null,t)}function tr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xq(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ske(){return Math.random().toString(36).substr(2,8)}function b6(t,e){return{usr:t.state,key:t.key,idx:e}}function FP(t,e,n,r){return n===void 0&&(n=null),Fb({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sy(e):e,{state:n,key:e&&e.key||r||ske()})}function Cq(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sy(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ike(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=zu.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Fb({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=zu.Pop;let y=u(),w=y==null?null:y-l;l=y,c&&c({action:a,location:g.location,delta:w})}function h(y,w){a=zu.Push;let v=FP(g.location,y,w);l=u()+1;let b=b6(v,l),x=g.createHref(v);try{o.pushState(b,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(x)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,w){a=zu.Replace;let v=FP(g.location,y,w);l=u();let b=b6(v,l),x=g.createHref(v);o.replaceState(b,"",x),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:Cq(y);return v=v.replace(/ $/,"%20"),tr(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(w6,d),c=y,()=>{s.removeEventListener(w6,d),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let w=p(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}var v6;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(v6||(v6={}));function oke(t,e,n){return n===void 0&&(n="/"),ake(t,e,n)}function ake(t,e,n,r){let s=typeof e=="string"?Sy(e):e,i=Iq(s.pathname||"/",n);if(i==null)return null;let o=Aq(t);cke(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=vke(i);a=yke(o[c],l)}return a}function Aq(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(tr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=af([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(tr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Aq(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:gke(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Sq(i.path))s(i,o,c)}),e}function Sq(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Sq(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function cke(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mke(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lke=/^:[\w-]+$/,uke=3,dke=2,hke=1,fke=10,pke=-2,E6=t=>t==="*";function gke(t,e){let n=t.split("/"),r=n.length;return n.some(E6)&&(r+=pke),e&&(r+=dke),n.filter(s=>!E6(s)).reduce((s,i)=>s+(lke.test(i)?uke:i===""?hke:fke),r)}function mke(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function yke(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=wke({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:af([i,d.pathname]),pathnameBase:Ske(af([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=af([i,d.pathnameBase]))}return o}function wke(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bke(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function bke(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xq(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vke(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xq(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Iq(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Eke(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Sy(t):t;return{pathname:n?n.startsWith("/")?n:_ke(n,e):e,search:Ike(r),hash:Tke(s)}}function _ke(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function lI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xke(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Cke(t,e){let n=xke(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ake(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Sy(t):(s=Fb({},t),tr(!s.pathname||!s.pathname.includes("?"),lI("?","pathname","search",s)),tr(!s.pathname||!s.pathname.includes("#"),lI("#","pathname","hash",s)),tr(!s.search||!s.search.includes("#"),lI("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=Eke(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const af=t=>t.join("/").replace(/\/\/+/g,"/"),Ske=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ike=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Tke=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Nke(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Tq=["post","put","patch","delete"];new Set(Tq);const Pke=["get",...Tq];new Set(Pke);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zb(){return zb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zb.apply(this,arguments)}const h3=D.createContext(null),kke=D.createContext(null),dA=D.createContext(null),hA=D.createContext(null),Iy=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Nq=D.createContext(null);function fA(){return D.useContext(hA)!=null}function Pq(){return fA()||tr(!1),D.useContext(hA).location}function kq(t){D.useContext(dA).static||D.useLayoutEffect(t)}function Oke(){let{isDataRoute:t}=D.useContext(Iy);return t?qke():Rke()}function Rke(){fA()||tr(!1);let t=D.useContext(h3),{basename:e,future:n,navigator:r}=D.useContext(dA),{matches:s}=D.useContext(Iy),{pathname:i}=Pq(),o=JSON.stringify(Cke(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return kq(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=Ake(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:af([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function Dke(t,e){return $ke(t,e)}function $ke(t,e,n,r){fA()||tr(!1);let{navigator:s}=D.useContext(dA),{matches:i}=D.useContext(Iy),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=Pq(),u;if(e){var d;let y=typeof e=="string"?Sy(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||tr(!1),u=y}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=oke(t,{pathname:f}),g=jke(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:af([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:af([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?D.createElement(hA.Provider,{value:{location:zb({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:zu.Pop}},g):g}function Uke(){let t=Wke(),e=Nke(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const Bke=D.createElement(Uke,null);class Lke extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Iy.Provider,{value:this.props.routeContext},D.createElement(Nq.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mke(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(h3);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Iy.Provider,{value:e},r)}function jke(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||tr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||Bke,c&&(l<0&&h===0?(Gke("route-fallback"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,h+1)),v=()=>{let b;return f?b=g:p?b=y:d.route.Component?b=D.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,D.createElement(Mke,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(Lke,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var Oq=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Oq||{}),Rq=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Rq||{});function Fke(t){let e=D.useContext(h3);return e||tr(!1),e}function zke(t){let e=D.useContext(kke);return e||tr(!1),e}function Hke(t){let e=D.useContext(Iy);return e||tr(!1),e}function Dq(t){let e=Hke(),n=e.matches[e.matches.length-1];return n.route.id||tr(!1),n.route.id}function Wke(){var t;let e=D.useContext(Nq),n=zke(),r=Dq();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function qke(){let{router:t}=Fke(Oq.UseNavigateStable),e=Dq(Rq.UseNavigateStable),n=D.useRef(!1);return kq(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zb({fromRouteId:e},i)))},[t,e])}const _6={};function Gke(t,e,n){_6[t]||(_6[t]=!0)}function Vke(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function o_(t){tr(!1)}function Kke(t){let{basename:e="/",children:n=null,location:r,navigationType:s=zu.Pop,navigator:i,static:o=!1,future:a}=t;fA()&&tr(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:zb({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Sy(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let y=Iq(u,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(dA.Provider,{value:l},D.createElement(hA.Provider,{children:n,value:g}))}function Qke(t){let{children:e,location:n}=t;return Dke(zP(e),n)}new Promise(()=>{});function zP(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,zP(r.props.children,i));return}r.type!==o_&&tr(!1),!r.props.index||!r.props.children||tr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zP(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Jke="6";try{window.__reactRouterVersion=Jke}catch{}const Yke="startTransition",x6=dQ[Yke];function Zke(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=rke({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&x6?x6(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>Vke(r),[r]),D.createElement(Kke,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var C6;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(C6||(C6={}));var A6;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(A6||(A6={}));const Xke=na({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function eOe(){const t=Xke(),{open:e}=Gv(),{address:n,isConnected:r}=jm(),{isPending:s}=D9(),{disconnect:i}=$9(),{data:o}=U9({address:n}),[a,c]=D.useState("pixelawbs-popup"),[l,u]=D.useState(new Set),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[w,v]=D.useState(!1),b=Oke(),x=D.useRef(null);D.useEffect(()=>{if(a==="halloween-popup"&&x.current){const N=x.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const M=document.createElement("script");M.src="https://www.tiktok.com/embed.js",M.async=!0,M.setAttribute("data-tiktok-embed","true"),x.current.appendChild(M)}},[a]);const _=(N,M,B)=>{if(N==="url"&&B)window.open(B,"_blank");else if(N==="popup"&&M)c(M),u($=>{const j=new Set($);return j.delete(M),j}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?y(!0):N==="chess"&&(r?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):e().then(()=>{const $=()=>{window.ethereum&&window.ethereum.selectedAddress?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):setTimeout($,200)};$()}))},C=()=>c(null),A=N=>{u(M=>new Set(M).add(N)),c(null)},T=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?y(!0):c(N),u(M=>{const B=new Set(M);return B.delete(N),B})},S=()=>h(!1),k=()=>p(!1),R=()=>y(!1),F=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},W=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},Q=()=>{y(!1),u(N=>new Set(N).add("meme-generator-popup"))},I=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[w&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(Que,{onIconClick:_}),m.jsx(Yue,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:I,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(Fi,{id:"chat-popup",isOpen:a==="chat-popup",onClose:C,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Fi,{id:"purity-popup",isOpen:a==="purity-popup",onClose:C,onMinimize:A,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Fi,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:C,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Fi,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:C,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Fi,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:C,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(Fi,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:C,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(gae,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(Fi,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:C,onMinimize:A,children:(()=>{const N=M=>{M.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(Fi,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:C,onMinimize:A,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:x,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),m.jsxs(Fi,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:C,onMinimize:A,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(ede,{isOpen:d,onClose:S,onMinimize:F,walletAddress:n||""}),m.jsx(VPe,{isOpen:f,onClose:k,onMinimize:W,walletAddress:n}),m.jsx(Fi,{id:"meme-generator-popup",isOpen:g,onClose:R,onMinimize:Q,children:m.jsx(_q,{})})]})}const tOe=na({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),S6=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],nOe=({onBack:t,walletAddress:e})=>{const n=tOe(),{open:r}=Gv(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(S6[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[y,w]=D.useState("all"),[v,b]=D.useState(null),x=D.useCallback(async()=>{var T,S;try{if((T=window.solana)!=null&&T.isPhantom){const k=await window.solana.connect();g(k.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const k=await window.solflare.connect();g(k.publicKey.toString());return}r()}catch(k){console.error("Failed to connect Solana wallet:",k),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var T,S;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let S,k=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}k=p,S=await Zue(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await xR(u.slug,100,k):S=await _R(u.slug,1,100,k);y==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(F=>F.owners&&F.owners.length>0)?S.data=S.data.filter(F=>F.owners.some(Q=>Q.owner_of&&Q.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),b("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,y]),D.useEffect(()=>{h&&x()},[h,x]);const _=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await z7(u.chain,T.address,T.token_id.toString()),k={...T,attributes:JSON.stringify(S.traits||[])};l(k)}catch(S){console.error("Failed to fetch full NFT details",S),l(T)}else l(T);a(!1)},C=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:T.map((S,k)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},k))})]})},A=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:S6.map(T=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>w("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>w("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{x()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),v&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:v}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(T=>{let S=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void _(T),children:[m.jsx("img",{src:S,alt:T.name,onError:k=>{k.currentTarget.src!==T.image_url&&T.image_url?k.currentTarget.src=T.image_url:k.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?k.currentTarget.src=T.image_url_shrunk:k.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:T.name})]},T.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?C():A()})]})},rOe=na({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),vo=({isOpen:t,onClose:e,title:n,children:r})=>{const s=rOe();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),m.jsx("div",{className:s.content,children:r})]})}):null},sOe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=B9();D.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const x=await j7(n);s(x);const _={};x.forEach(C=>{_[C.id]=0}),u(_)}catch(x){h(x.message)}finally{o(!1)}},g=(x,_)=>{u(C=>({...C,[x]:Math.max(0,_)}))},y=async()=>{const x=Object.entries(l).filter(([,_])=>_>0).map(([_,C])=>({id:_,quantity:C}));if(x.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const _=await F7(n,x);if(_.success&&_.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const C=await f.sendTransaction({to:_.mintTransaction.to,value:BigInt(_.mintTransaction.value),data:_.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${C}`),e()}catch(C){h("Transaction failed: "+C.message)}}else throw new Error(_.message||"Could not retrieve minting transaction.")}catch(_){h("Minting failed: "+_.message)}finally{c(!1)}},w=(x,_)=>`${parseFloat(x)} ${_}`,v={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},b={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(vo,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:b,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(x=>m.jsxs("div",{style:v,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",w(x.token_price,x.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:x.wallet_limit===4294967295?void 0:x.wallet_limit,value:l[x.id]||"",onChange:_=>g(x.id,parseInt(_.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},x.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},iOe=na({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),oOe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],aOe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],cOe=()=>{const t=iOe(),{open:e}=Gv(),{address:n,isConnected:r}=jm(),{isPending:s}=D9(),{disconnect:i}=$9(),{data:o}=U9({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[w,v]=D.useState(!1),[b,x]=D.useState(!1),[_,C]=D.useState(!1),[A,T]=D.useState(!1),[S,k]=D.useState(!1),[R,F]=D.useState(!1),[W,Q]=D.useState(!1),[I,N]=D.useState(!1),[M,B]=D.useState(!1),[$,j]=D.useState(!1),V=[{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>v(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>x(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>C(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],ee=ce=>{ce.disabled||ce.action()};if(D.useEffect(()=>{const ce=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ce)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(nOe,{onBack:()=>c("main"),walletAddress:n||void 0});function ae({open:ce,onClose:ye,title:Z,nfts:te}){const le=se=>{switch(se){case"lawbsters":T(!0);break;case"lawbstarz":k(!0);break;case"pixelawbs":F(!0);break;case"halloween":Q(!0);break;case"lawbstation":N(!0);break;case"nexus":B(!0);break}};return m.jsx(vo,{isOpen:ce,onClose:ye,title:Z,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:te.map(se=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>le(se.id),children:[m.jsx("img",{src:se.image,alt:se.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:se.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:se.description})]},se.id))})})}function re({open:ce,onClose:ye}){return ce?m.jsxs(vo,{isOpen:ce,onClose:ye,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:V.map(ce=>m.jsxs("div",{className:t.icon,onClick:()=>ee(ce),children:[m.jsx("img",{src:ce.icon,alt:ce.label}),m.jsx("span",{children:ce.label})]},ce.label))}),l&&m.jsxs(vo,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ce=>ce.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(sOe,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),m.jsx(ae,{open:w,onClose:()=>v(!1),title:"EVM NFT'S FOLDER",nfts:oOe}),m.jsx(ae,{open:b,onClose:()=>x(!1),title:"SOL NFTS FOLDER",nfts:aOe}),m.jsx(re,{open:_,onClose:()=>C(!1)}),m.jsxs(vo,{isOpen:A,onClose:()=>T(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(vo,{isOpen:S,onClose:()=>k(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(vo,{isOpen:R,onClose:()=>F(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{F(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(vo,{isOpen:W,onClose:()=>Q(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(vo,{isOpen:I,onClose:()=>N(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(vo,{isOpen:M,onClose:()=>B(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(vo,{isOpen:$,onClose:()=>j(!1),title:"Meme Generator",children:m.jsx(_q,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function lOe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function uOe(t){let e=[],n,r;function s(a){return pb.parseEvmChainId(a)||1}function i(){var a;return n||(n=sf.getInstance({projectId:t.options.projectId,chainId:(a=L.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Fn.open(mn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Fn.open(mn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Fn.open(mn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:mn.EmbeddedWalletAbortController})),n}async function o(a={}){var g,y;const c=i();let l=a.chainId;if(a.isReconnecting){const w=pb.parseEvmChainId(c.getLastUsedChainId()||""),v=(g=t.chains)==null?void 0:g[0].id;if(l=w||v,!l)throw new Error("ChainId not found in provider")}const u=(y=ve.state.preferredAccountTypes)==null?void 0:y.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ie.CONNECTOR_ID.AUTH,name:ie.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ie.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=sf.getInstance({projectId:t.options.projectId,chainId:(c=L.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:mn.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Fn.open(mn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Fn.open(mn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Fn.open(mn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=L.state.activeChain===ie.CHAIN.EVM;if(ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>_e.getConnectorId(h)===ie.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new qa(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=ve.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(g=>g.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new qa(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Bu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}f3.type="walletConnect";function f3(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:f3.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=L.getCaipNetworks(),y=await this.getProvider();if(!y)throw new Kl;a||(a=this.onDisplayUri,y.on("display_uri",a));const w=await this.isChainsStale();y.session&&w&&await y.disconnect();const v=he.state.universalProviderConfigOverride;if(!y.session||w){const S=yw.createNamespaces(g,v);await y.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(k=>Number(k.id)))}const b=await this.getAccounts(),x=await this.getChainId(),_=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,C=_==null?void 0:_.some(S=>Number(S.split(":")[1])===x);let A=1;C?A=x:_!=null&&_[0]&&(A=Number(_[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const T=v==null?void 0:v.defaultChain;return y.setDefaultChain(T??`eip155:${A}`),{accounts:b,chainId:A}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Qn(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,g,y;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(y=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[ie.CHAIN.EVM])==null?void 0:y.accounts;return(h==null?void 0:h.map(w=>w.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=Ee.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=Ee.getStoredActiveCaipNetworkId(),w=e.getCaipNetworks(h),v=w==null?void 0:w.find(b=>b.id===y);v&&v.chainNamespace===ie.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(v.id)}))}return r},async getChainId(){var g,y,w,v;const d=(g=e.getCaipNetwork(ie.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(v=(w=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[ie.CHAIN.EVM])==null?void 0:w.chains)==null?void 0:v[0],p=L.getCaipNetworks().find(b=>b.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,w,v;const f=await this.getProvider();if(!f)throw new Kl;const p=L.getCaipNetworks().find(b=>b.id===h);if(!p)throw new qa(new ab);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Je(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const b=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...b,h]),{...p,id:p.id}}catch(b){const x=b;if(/(?:user rejected)/iu.test(x.message))throw new Qn(x);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const C=((v=(w=p.rpcUrls)==null?void 0:w.chainDefault)==null?void 0:v.http)||[],A={blockExplorerUrls:_,chainId:Je(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:C};await f.request({method:"wallet_addEthereumChain",params:[A]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(_){throw new Qn(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Bu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(L.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ie.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const y0=an({pendingTransactions:0}),I6={state:y0,subscribeKey(t,e){return Dr(y0,t,e)},increase(t){y0[t]+=1},decrease(t){y0[t]-=1},reset(t){y0[t]=0}};function dOe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function hOe(t){if(Le.isSafeApp()){const{safe:e}=await Rn(async()=>{const{safe:n}=await import("./index-BOkyikh3.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function fOe(t){try{const{coinbaseWallet:e}=await Rn(async()=>{const{coinbaseWallet:n}=await import("./index-BOkyikh3.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const pOe={enable:!1,pollingInterval:3e4};class gOe extends Eq{constructor(e){const n=Ra.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ie.CHAIN.EVM,this.adapterType=ie.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...pOe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ie.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Le.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=wg(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Le.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=wg(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ie.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Ra.getCaipNetworkId(s);i?n[s.id]=Ra.extendWagmiTransports(s,e.projectId,i):n[s.id]=Ra.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Zne({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=kne(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),I6.increase("pendingTransactions")}});const e=I6.subscribeKey("pendingTransactions",n=>{var r;n>=ie.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){l9(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await fOe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await hOe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(f3(e,n)),e.enableInjected!==!1&&r.push(CC({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(uOe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await Ine(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=wg(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Ane(this.wagmiConfig,s);const i=await Sne(this.wagmiConfig,s);return await One(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(pb.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await Rne(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await wne(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return Fte(e.value,e.decimals)}formatUnits(e){return dy(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===ie.CONNECTOR_ID.AUTH||e.id===ie.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Fu.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Fu.ConnectorNamesMap[e.id]??e.name,imageId:Fu.ConnectorImageIds[e.id],type:Fu.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ie.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){u9(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=ya(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Le.isSafeApp()&&n===ie.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await HE(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await HE(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await XT(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===ie.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:r,type:s,id:n}}const l=await HE(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await ZT(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=Ee.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await _ne(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});Ee.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=ya(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await a9(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await XT(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=ya(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=dOe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=ya(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=ya(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=ya(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=ya(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(L.state.activeChain==="eip155")return;ZT(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new d3({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const nh={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{name:"Test DMT",symbol:"tDMT",decimals:18},rpcUrls:{default:{http:["https://rpc.sanko.xyz","https://sanko-testnet.rpc.thirdweb.com","https://sanko-testnet.publicnode.com"]},public:{http:["https://rpc.sanko.xyz","https://sanko-testnet.rpc.thirdweb.com","https://sanko-testnet.publicnode.com"]}},blockExplorers:{default:{name:"Sanko Explorer",url:"https://explorer.sanko.xyz"}},testnet:!0},$q="7c65f27254d6ddd24cf7eedf2685c4fb",mOe={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},Uq=new gOe({networks:[vq,nh],projectId:$q,ssr:!1});qPe({adapters:[Uq],networks:[vq,nh],projectId:$q,metadata:mOe,features:{analytics:!1}});const yOe=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Ty);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class p3 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class wOe extends p3{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bOe extends p3{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class vOe extends p3{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var HP;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(HP||(HP={}));var EOe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class _Oe{constructor(e,{headers:n={},customFetch:r,region:s=HP.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=yOe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return EOe(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new wOe(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new bOe(u);if(!u.ok)throw new vOe(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var Gs={},g3={},pA={},Vv={},gA={},mA={},xOe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Jm=xOe();const COe=Jm.fetch,Bq=Jm.fetch.bind(Jm),Lq=Jm.Headers,AOe=Jm.Request,SOe=Jm.Response,Ty=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lq,Request:AOe,Response:SOe,default:Bq,fetch:COe},Symbol.toStringTag,{value:"Module"})),IOe=Jx(Ty);var yA={};Object.defineProperty(yA,"__esModule",{value:!0});let TOe=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};yA.default=TOe;var Mq=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mA,"__esModule",{value:!0});const NOe=Mq(IOe),POe=Mq(yA);let kOe=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=NOe.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new POe.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};mA.default=kOe;var OOe=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gA,"__esModule",{value:!0});const ROe=OOe(mA);let DOe=class extends ROe.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};gA.default=DOe;var $Oe=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vv,"__esModule",{value:!0});const UOe=$Oe(gA);let BOe=class extends UOe.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Vv.default=BOe;var LOe=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pA,"__esModule",{value:!0});const w0=LOe(Vv);let MOe=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new w0.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new w0.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new w0.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new w0.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new w0.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};pA.default=MOe;var wA={},bA={};Object.defineProperty(bA,"__esModule",{value:!0});bA.version=void 0;bA.version="0.0.0-automated";Object.defineProperty(wA,"__esModule",{value:!0});wA.DEFAULT_HEADERS=void 0;const jOe=bA;wA.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${jOe.version}`};var jq=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(g3,"__esModule",{value:!0});const FOe=jq(pA),zOe=jq(Vv),HOe=wA;let WOe=class Fq{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},HOe.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new FOe.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Fq(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new zOe.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};g3.default=WOe;var Ny=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.PostgrestError=Gs.PostgrestBuilder=Gs.PostgrestTransformBuilder=Gs.PostgrestFilterBuilder=Gs.PostgrestQueryBuilder=Gs.PostgrestClient=void 0;const zq=Ny(g3);Gs.PostgrestClient=zq.default;const Hq=Ny(pA);Gs.PostgrestQueryBuilder=Hq.default;const Wq=Ny(Vv);Gs.PostgrestFilterBuilder=Wq.default;const qq=Ny(gA);Gs.PostgrestTransformBuilder=qq.default;const Gq=Ny(mA);Gs.PostgrestBuilder=Gq.default;const Vq=Ny(yA);Gs.PostgrestError=Vq.default;var qOe=Gs.default={PostgrestClient:zq.default,PostgrestQueryBuilder:Hq.default,PostgrestFilterBuilder:Wq.default,PostgrestTransformBuilder:qq.default,PostgrestBuilder:Gq.default,PostgrestError:Vq.default};const{PostgrestClient:GOe,PostgrestQueryBuilder:Z4e,PostgrestFilterBuilder:X4e,PostgrestTransformBuilder:e6e,PostgrestBuilder:t6e,PostgrestError:n6e}=qOe;function VOe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const KOe=VOe(),QOe="2.11.13",JOe={"X-Client-Info":`realtime-js/${QOe}`},YOe="1.0.0",Kq=1e4,ZOe=1e3;var ww;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ww||(ww={}));var Vr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Vr||(Vr={}));var Uo;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Uo||(Uo={}));var WP;(function(t){t.websocket="websocket"})(WP||(WP={}));var rh;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rh||(rh={}));class XOe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class Qq{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(nn||(nn={}));const T6=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=eRe(o,t,e,s),i),{})},eRe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Jq(i,o):qP(o)},Jq=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return sRe(e,n)}switch(t){case nn.bool:return tRe(e);case nn.float4:case nn.float8:case nn.int2:case nn.int4:case nn.int8:case nn.numeric:case nn.oid:return nRe(e);case nn.json:case nn.jsonb:return rRe(e);case nn.timestamp:return iRe(e);case nn.abstime:case nn.date:case nn.daterange:case nn.int4range:case nn.int8range:case nn.money:case nn.reltime:case nn.text:case nn.time:case nn.timestamptz:case nn.timetz:case nn.tsrange:case nn.tstzrange:return qP(e);default:return qP(e)}},qP=t=>t,tRe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},nRe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},rRe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},sRe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Jq(e,a))}return t},iRe=t=>typeof t=="string"?t.replace(" ","T"):t,Yq=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class uI{constructor(e,n,r={},s=Kq){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var N6;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(N6||(N6={}));class bw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bw.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=bw.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bw.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var P6;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(P6||(P6={}));var k6;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(k6||(k6={}));var pc;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(pc||(pc={}));class m3{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Vr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new uI(this,Uo.join,this.params,this.timeout),this.rejoinTimer=new Qq(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Vr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Uo.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new bw(this),this.broadcastEndpointURL=Yq(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Vr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(pc.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(pc.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(pc.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const y=h[g],{filter:{event:w,schema:v,table:b,filter:x}}=y,_=u&&u[g];if(_&&_.event===w&&_.schema===v&&_.table===b&&_.filter===x)p.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=Vr.errored,e==null||e(pc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(pc.SUBSCRIBED);return}}).receive("error",u=>{this.state=Vr.errored,e==null||e(pc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Uo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new uI(this,Uo.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new uI(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Uo;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,y,w,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return x&&((g=n.ids)===null||g===void 0?void 0:g.includes(x))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const x=(v=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return x==="*"||x===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:w,type:v,errors:b}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Vr.closed}_isJoined(){return this.state===Vr.joined}_isJoining(){return this.state===Vr.joining}_isLeaving(){return this.state===Vr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&m3.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Uo.close,{},e)}_onError(e){this._on(Uo.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=T6(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=T6(e.columns,e.old_record)),n}}const O6=()=>{},oRe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aRe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=JOe,this.params={},this.timeout=Kq,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=O6,this.ref=0,this.logger=O6,this.conn=null,this.sendBuffer=[],this.serializer=new XOe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Rn(async()=>{const{default:c}=await Promise.resolve().then(()=>Ty);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${WP.websocket}`,this.httpEndpoint=Yq(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Qq(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=KOe),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:YOe}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ww.connecting:return rh.Connecting;case ww.open:return rh.Open;case ww.closing:return rh.Closing;default:return rh.Closed}}isConnected(){return this.connectionState()===rh.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new m3(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Uo.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(ZOe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Uo.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([oRe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class y3 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function or(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class cRe extends y3{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class GP extends y3{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var lRe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const Zq=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Ty);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uRe=()=>lRe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Rn(()=>Promise.resolve().then(()=>Ty),void 0)).Response:Response}),VP=t=>{if(Array.isArray(t))return t.map(n=>VP(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=VP(r)}),e};var Yf=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const dI=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dRe=(t,e,n)=>Yf(void 0,void 0,void 0,function*(){const r=yield uRe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new cRe(dI(s),t.status||500))}).catch(s=>{e(new GP(dI(s),s))}):e(new GP(dI(t),t))}),hRe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Kv(t,e,n,r,s,i){return Yf(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,hRe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>dRe(c,a,r))})})}function Ix(t,e,n,r){return Yf(this,void 0,void 0,function*(){return Kv(t,"GET",e,n,r)})}function eu(t,e,n,r,s){return Yf(this,void 0,void 0,function*(){return Kv(t,"POST",e,r,s,n)})}function fRe(t,e,n,r,s){return Yf(this,void 0,void 0,function*(){return Kv(t,"PUT",e,r,s,n)})}function pRe(t,e,n,r){return Yf(this,void 0,void 0,function*(){return Kv(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Xq(t,e,n,r,s){return Yf(this,void 0,void 0,function*(){return Kv(t,"DELETE",e,r,s,n)})}var Rs=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const gRe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},R6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class mRe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Zq(s)}uploadOrUpdate(e,n,r,s){return Rs(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},R6),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(or(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Rs(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:R6.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(or(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Rs(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield eu(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new y3("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(or(r))return{data:null,error:r};throw r}})}update(e,n,r){return Rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Rs(this,void 0,void 0,function*(){try{return{data:yield eu(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(or(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Rs(this,void 0,void 0,function*(){try{return{data:{path:(yield eu(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(or(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Rs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield eu(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(or(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Rs(this,void 0,void 0,function*(){try{const s=yield eu(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(or(s))return{data:null,error:s};throw s}})}download(e,n){return Rs(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ix(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(or(a))return{data:null,error:a};throw a}})}info(e){return Rs(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ix(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:VP(r),error:null}}catch(r){if(or(r))return{data:null,error:r};throw r}})}exists(e){return Rs(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pRe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(or(r)&&r instanceof GP){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return Rs(this,void 0,void 0,function*(){try{return{data:yield Xq(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(or(n))return{data:null,error:n};throw n}})}list(e,n,r){return Rs(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},gRe),n),{prefix:e||""});return{data:yield eu(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(or(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const yRe="2.7.1",wRe={"X-Client-Info":`storage-js/${yRe}`};var Ip=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class bRe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},wRe),n),this.fetch=Zq(r)}listBuckets(){return Ip(this,void 0,void 0,function*(){try{return{data:yield Ix(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(or(e))return{data:null,error:e};throw e}})}getBucket(e){return Ip(this,void 0,void 0,function*(){try{return{data:yield Ix(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(or(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ip(this,void 0,void 0,function*(){try{return{data:yield eu(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(or(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ip(this,void 0,void 0,function*(){try{return{data:yield fRe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(or(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ip(this,void 0,void 0,function*(){try{return{data:yield eu(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(or(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ip(this,void 0,void 0,function*(){try{return{data:yield Xq(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(or(n))return{data:null,error:n};throw n}})}}class vRe extends bRe{constructor(e,n={},r){super(e,n,r)}from(e){return new mRe(this.url,this.headers,e,this.fetch)}}const ERe="2.50.1";let L0="";typeof Deno<"u"?L0="deno":typeof document<"u"?L0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?L0="react-native":L0="node";const _Re={"X-Client-Info":`supabase-js-${L0}/${ERe}`},xRe={headers:_Re},CRe={schema:"public"},ARe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SRe={};var IRe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const TRe=t=>{let e;return t?e=t:typeof fetch>"u"?e=Bq:e=fetch,(...n)=>e(...n)},NRe=()=>typeof Headers>"u"?Lq:Headers,PRe=(t,e,n)=>{const r=TRe(n),s=NRe();return(i,o)=>IRe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var kRe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function ORe(t){return t.endsWith("/")?t:t+"/"}function RRe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>kRe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const eG="2.70.0",Mp=30*1e3,KP=3,hI=KP*Mp,DRe="http://localhost:9999",$Re="supabase.auth.token",URe={"X-Client-Info":`gotrue-js/${eG}`},QP="X-Supabase-Api-Version",tG={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BRe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,LRe=6e5;class w3 extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class MRe extends w3{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function jRe(t){return nt(t)&&t.name==="AuthApiError"}class nG extends w3{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Nd extends w3{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Wl extends Nd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function FRe(t){return nt(t)&&t.name==="AuthSessionMissingError"}class fE extends Nd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pE extends Nd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class gE extends Nd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zRe(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class D6 extends Nd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class JP extends Nd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function fI(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class $6 extends Nd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class vw extends Nd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),U6=` 	
\r=`.split(""),HRe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<U6.length;e+=1)t[U6[e].charCodeAt(0)]=-2;for(let e=0;e<Tx.length;e+=1)t[Tx[e].charCodeAt(0)]=e;return t})();function B6(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Tx[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Tx[r]),e.queuedBits-=6}}function rG(t,e,n){const r=HRe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function L6(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{GRe(o,r,n)};for(let o=0;o<t.length;o+=1)rG(t.charCodeAt(o),s,i);return e.join("")}function WRe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function qRe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}WRe(r,e)}}function GRe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function VRe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)rG(t.charCodeAt(s),n,r);return new Uint8Array(e)}function KRe(t){const e=[];return qRe(t,n=>e.push(n)),new Uint8Array(e)}function QRe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>B6(s,n,r)),B6(null,n,r),e.join("")}function JRe(t){return Math.round(Date.now()/1e3)+t}function YRe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Eo=()=>typeof window<"u"&&typeof document<"u",Fd={tested:!1,writable:!1},Ew=()=>{if(!Eo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fd.tested)return Fd.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Fd.tested=!0,Fd.writable=!0}catch{Fd.tested=!0,Fd.writable=!1}return Fd.writable};function ZRe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const sG=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Ty);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},XRe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",iG=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},mE=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},yE=async(t,e)=>{await t.removeItem(e)};class vA{constructor(){this.promise=new vA.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}vA.promiseConstructor=Promise;function pI(t){const e=t.split(".");if(e.length!==3)throw new vw("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!BRe.test(e[r]))throw new vw("JWT not in base64url format");return{header:JSON.parse(L6(e[0])),payload:JSON.parse(L6(e[1])),signature:VRe(e[2]),raw:{header:e[0],payload:e[1]}}}async function e3e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function t3e(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function n3e(t){return("0"+t.toString(16)).substr(-2)}function r3e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,n3e).join("")}async function s3e(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function i3e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await s3e(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tp(t,e,n=!1){const r=r3e();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await iG(t,`${e}-code-verifier`,s);const i=await i3e(r);return[i,r===i?"plain":"s256"]}const o3e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function a3e(t){const e=t.headers.get(QP);if(!e||!e.match(o3e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function c3e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function l3e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const u3e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Np(t){if(!u3e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var d3e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Qd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),h3e=[502,503,504];async function M6(t){var e;if(!XRe(t))throw new JP(Qd(t),0);if(h3e.includes(t.status))throw new JP(Qd(t),t.status);let n;try{n=await t.json()}catch(i){throw new nG(Qd(i),i)}let r;const s=a3e(t);if(s&&s.getTime()>=tG["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $6(Qd(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Wl}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new $6(Qd(n),t.status,n.weak_password.reasons);throw new MRe(Qd(n),t.status||500,r)}const f3e=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function dt(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[QP]||(i[QP]=tG["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await p3e(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function p3e(t,e,n,r,s,i){const o=f3e(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new JP(Qd(c),0)}if(a.ok||await M6(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await M6(c)}}function dc(t){var e;let n=null;w3e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=JRe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function j6(t){const e=dc(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function au(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function g3e(t){return{data:t,error:null}}function m3e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=d3e(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function y3e(t){return t}function w3e(t){return t.access_token&&t.refresh_token&&t.expires_in}const gI=["global","local","others"];var b3e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class v3e{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=sG(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=gI[0]){if(gI.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gI.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:au})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=b3e(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:m3e,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(nt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:au})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:y3e});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);l[`${y}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(nt(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Np(e);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:au})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Np(e);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:au})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Np(e);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:au})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Np(e.userId);try{const{data:n,error:r}=await dt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Np(e.userId),Np(e.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}}const E3e={getItem:t=>Ew()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ew()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ew()&&globalThis.localStorage.removeItem(t)}};function F6(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function _3e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Pp={debug:!!(globalThis&&Ew()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oG extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class x3e extends oG{}async function C3e(t,e,n){Pp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Pp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Pp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Pp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Pp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new x3e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Pp.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}_3e();const A3e={url:DRe,storageKey:$Re,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:URe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function z6(t,e,n){return await n()}class Hb{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hb.nextInstanceID,Hb.nextInstanceID+=1,this.instanceID>0&&Eo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},A3e),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new v3e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=sG(s.fetch),this.lock=s.lock||z6,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Eo()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=C3e:this.lock=z6,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ew()?this.storage=E3e:(this.memoryStorage={},this.storage=F6(this.memoryStorage)):(this.memoryStorage={},this.storage=F6(this.memoryStorage)),Eo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${eG}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ZRe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Eo()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),zRe(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return nt(n)?{error:n}:{error:new nG("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:dc}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Tp(this.storage,this.storageKey)),i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:dc})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:dc})}else throw new pE("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:j6})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:j6})}else throw new pE("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new fE}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:v,options:b}=e;let x;if(Eo())if(typeof w=="object")x=w;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const _=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let A;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")A=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)A=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)p=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),g=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:y,error:w}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:QRe(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:dc});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new fE}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(nt(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await mE(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:dc});if(await yE(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fE}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(nt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:dc}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fE}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Tp(this.storage,this.storageKey));const{error:d}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new pE("You must provide either an email or phone number.")}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:dc});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Tp(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:g3e})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Wl;const{error:s}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new pE("You must provide either an email or phone number and a type")}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await mE(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<hI:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:au}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wl}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:au})})}catch(n){if(nt(n))return FRe(n)&&(await this._removeSession(),await yE(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Wl;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Tp(this.storage,this.storageKey));const{data:l,error:u}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:au});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Wl;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=pI(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(nt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Wl;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Eo())throw new gE("No browser detected.");if(e.error||e.error_description||e.error_code)throw new gE(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new D6("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gE("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new D6("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new gE("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=Mp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(nt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await mE(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(jRe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await yE(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=YRe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Tp(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Eo()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(nt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await t3e(async s=>(s>0&&await e3e(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dc})),(s,i)=>{const o=200*Math.pow(2,s);return i&&fI(i)&&Date.now()+o-r<Mp})}catch(r){if(this._debug(n,"error",r),nt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Eo()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await mE(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<hI;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${hI}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),fI(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Wl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new vA;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Wl;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),nt(i)){const o={session:null,error:i};return fI(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await iG(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await yE(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Eo()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Mp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Mp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mp}ms, refresh threshold is ${KP} ticks`),s<=KP&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oG)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Eo()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Tp(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await dt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=pI(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+LRe>Date.now()))return r;const{data:s,error:i}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new vw("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new vw("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=pI(r);if(c3e(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=l3e(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,KRe(`${a}.${c}`)))throw new vw("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}}Hb.nextInstanceID=0;const S3e=Hb;class I3e extends S3e{constructor(e){super(e)}}var T3e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class N3e{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=ORe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:CRe,realtime:SRe,auth:Object.assign(Object.assign({},ARe),{storageKey:l}),global:xRe},d=RRe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=PRe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new GOe(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new _Oe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new vRe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return T3e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new I3e({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new aRe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const aG=(t,e,n)=>new N3e(t,e,n),P3e="6.14.4";function k3e(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function ls(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Ge(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&k3e(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function sg(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>sg(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return sg(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${sg(r,e)}: ${sg(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Tr(t,e){return t&&t.code===e}function b3(t){return Tr(t,"CALL_EXCEPTION")}function fn(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${sg(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+sg(a))}}i.push(`code=${e}`),i.push(`version=${P3e}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Ge(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&Ge(s,{shortMessage:r}),s}function oe(t,e,n,r){if(!t)throw fn(e,n,r)}function G(t,e,n,r){oe(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function cG(t,e,n){n==null&&(n=""),n&&(n=": "+n),oe(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),oe(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Qv(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),oe(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function lG(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}G(!1,"invalid BytesLike value",e||"value",t)}function ct(t,e){return lG(t,e,!1)}function hs(t,e){return lG(t,e,!0)}function on(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function v3(t){return on(t,!0)||t instanceof Uint8Array}const H6="0123456789abcdef";function Se(t){const e=ct(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=H6[(s&240)>>4]+H6[s&15]}return n}function Nn(t){return"0x"+t.map(e=>Se(e).substring(2)).join("")}function Cg(t){return on(t,!0)?(t.length-2)/2:ct(t).length}function Sn(t,e,n){const r=ct(t);return n!=null&&n>r.length&&oe(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Se(r.slice(e??0,n??r.length))}function uG(t,e,n){const r=ct(t);oe(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Se(s)}function il(t,e){return uG(t,e,!0)}function O3e(t,e){return uG(t,e,!1)}const EA=BigInt(0),Ho=BigInt(1),ig=9007199254740991;function Nx(t,e){const n=_A(t,"value"),r=BigInt(it(e,"width"));if(oe(n>>r===EA,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Ho){const s=(Ho<<r)-Ho;return-((~n&s)+Ho)}return n}function dG(t,e){let n=De(t,"value");const r=BigInt(it(e,"width")),s=Ho<<r-Ho;if(n<EA){n=-n,oe(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Ho<<r)-Ho;return(~n&i)+Ho}else oe(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Eh(t,e){const n=_A(t,"value"),r=BigInt(it(e,"bits"));return n&(Ho<<r)-Ho}function De(t,e){switch(typeof t){case"bigint":return t;case"number":return G(Number.isInteger(t),"underflow",e||"value",t),G(t>=-ig&&t<=ig,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){G(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}G(!1,"invalid BigNumberish value",e||"value",t)}function _A(t,e){const n=De(t,e);return oe(n>=EA,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const W6="0123456789abcdef";function xA(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=W6[n>>4],e+=W6[n&15];return BigInt(e)}return De(t)}function it(t,e){switch(typeof t){case"bigint":return G(t>=-ig&&t<=ig,"overflow",e||"value",t),Number(t);case"number":return G(Number.isInteger(t),"underflow",e||"value",t),G(t>=-ig&&t<=ig,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return it(BigInt(t),e)}catch(n){G(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}G(!1,"invalid numeric value",e||"value",t)}function R3e(t){return it(xA(t))}function vd(t,e){let r=_A(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=it(e,"width");for(oe(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function er(t){const e=_A(t,"value");if(e===EA)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function jo(t){let e=Se(v3(t)?t:er(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const q6="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const G6=BigInt(58);function D3e(t){const e=ct(t);let n=xA(e),r="";for(;n;)r=q6[Number(n%G6)]+r,n/=G6;for(let s=0;s<e.length&&!e[s];s++)r=q6[0]+r;return r}function $3e(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return ct(e)}function U3e(t){const e=ct(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var Fg;class hG{constructor(e,n,r){J(this,"filter");J(this,"emitter");q(this,Fg);O(this,Fg,n),Ge(this,{emitter:e,filter:r})}async removeListener(){E(this,Fg)!=null&&await this.emitter.off(this.filter,E(this,Fg))}}Fg=new WeakMap;function B3e(t,e,n,r,s){G(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function fG(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function L3e(t,e,n,r,s){return t==="OVERLONG"?(G(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),fG(t,e,n))}const M3e=Object.freeze({error:B3e,ignore:fG,replace:L3e});function j3e(t,e){e==null&&(e=M3e.error);const n=ct(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function Gc(t,e){G(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);G(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function F3e(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Px(t,e){return F3e(j3e(t,e))}function pG(t){async function e(n,r){oe(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();oe(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),oe(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=fn("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=fn("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const z3e=12,H3e=250;let V6=pG();const W3e=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),q3e=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let mI=!1;async function gG(t,e){try{const n=t.match(W3e);if(!n)throw new Error("invalid data");return new ad(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?$3e(n[3]):V3e(n[3]))}catch{return new ad(599,"BAD REQUEST (invalid data: URI)",{},null,new Ed(t))}}function mG(t){async function e(n,r){try{const s=n.match(q3e);if(!s)throw new Error("invalid link");return new Ed(`${t}${s[2]}`)}catch{return new ad(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ed(n))}}return e}const wE={data:gG,ipfs:mG("https://gateway.ipfs.io/ipfs/")},yG=new WeakMap;var Dh,wu;class G3e{constructor(e){q(this,Dh);q(this,wu);O(this,Dh,[]),O(this,wu,!1),yG.set(e,()=>{if(!E(this,wu)){O(this,wu,!0);for(const n of E(this,Dh))setTimeout(()=>{n()},0);O(this,Dh,[])}})}addListener(e){oe(!E(this,wu),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),E(this,Dh).push(e)}get cancelled(){return E(this,wu)}checkSignal(){oe(!this.cancelled,"cancelled","CANCELLED",{})}}Dh=new WeakMap,wu=new WeakMap;function bE(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var zg,Hg,No,xc,Wg,qg,ir,fi,Cc,$h,Uh,Bh,Ea,Po,bu,Lh,M0;const Hx=class Hx{constructor(e){q(this,Lh);q(this,zg);q(this,Hg);q(this,No);q(this,xc);q(this,Wg);q(this,qg);q(this,ir);q(this,fi);q(this,Cc);q(this,$h);q(this,Uh);q(this,Bh);q(this,Ea);q(this,Po);q(this,bu);O(this,qg,String(e)),O(this,zg,!1),O(this,Hg,!0),O(this,No,{}),O(this,xc,""),O(this,Wg,3e5),O(this,Po,{slotInterval:H3e,maxAttempts:z3e}),O(this,bu,null)}get url(){return E(this,qg)}set url(e){O(this,qg,String(e))}get body(){return E(this,ir)==null?null:new Uint8Array(E(this,ir))}set body(e){if(e==null)O(this,ir,void 0),O(this,fi,void 0);else if(typeof e=="string")O(this,ir,Gc(e)),O(this,fi,"text/plain");else if(e instanceof Uint8Array)O(this,ir,e),O(this,fi,"application/octet-stream");else if(typeof e=="object")O(this,ir,Gc(JSON.stringify(e))),O(this,fi,"application/json");else throw new Error("invalid body")}hasBody(){return E(this,ir)!=null}get method(){return E(this,xc)?E(this,xc):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),O(this,xc,String(e).toUpperCase())}get headers(){const e=Object.assign({},E(this,No));return E(this,Cc)&&(e.authorization=`Basic ${U3e(Gc(E(this,Cc)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&E(this,fi)&&(e["content-type"]=E(this,fi)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){E(this,No)[String(e).toLowerCase()]=String(n)}clearHeaders(){O(this,No,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return E(this,Cc)||null}setCredentials(e,n){G(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),O(this,Cc,`${e}:${n}`)}get allowGzip(){return E(this,Hg)}set allowGzip(e){O(this,Hg,!!e)}get allowInsecureAuthentication(){return!!E(this,zg)}set allowInsecureAuthentication(e){O(this,zg,!!e)}get timeout(){return E(this,Wg)}set timeout(e){G(e>=0,"timeout must be non-zero","timeout",e),O(this,Wg,e)}get preflightFunc(){return E(this,$h)||null}set preflightFunc(e){O(this,$h,e)}get processFunc(){return E(this,Uh)||null}set processFunc(e){O(this,Uh,e)}get retryFunc(){return E(this,Bh)||null}set retryFunc(e){O(this,Bh,e)}get getUrlFunc(){return E(this,bu)||V6}set getUrlFunc(e){O(this,bu,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${E(this,ir)?Se(E(this,ir)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(E(this,Po).slotInterval=e.slotInterval),e.maxAttempts!=null&&(E(this,Po).maxAttempts=e.maxAttempts)}send(){return oe(E(this,Ea)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),O(this,Ea,new G3e(this)),X(this,Lh,M0).call(this,0,K6()+this.timeout,0,this,new ad(0,"",{},null,this))}cancel(){oe(E(this,Ea)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=yG.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();oe(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Hx(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,O(s,No,Object.assign({},E(this,No))),E(this,ir)&&O(s,ir,new Uint8Array(E(this,ir))),O(s,fi,E(this,fi)),s}clone(){const e=new Hx(this.url);return O(e,xc,E(this,xc)),E(this,ir)&&O(e,ir,E(this,ir)),O(e,fi,E(this,fi)),O(e,No,Object.assign({},E(this,No))),O(e,Cc,E(this,Cc)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),O(e,$h,E(this,$h)),O(e,Uh,E(this,Uh)),O(e,Bh,E(this,Bh)),O(e,Po,Object.assign({},E(this,Po))),O(e,bu,E(this,bu)),e}static lockConfig(){mI=!0}static getGateway(e){return wE[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(mI)throw new Error("gateways locked");wE[e]=n}static registerGetUrl(e){if(mI)throw new Error("gateways locked");V6=e}static createGetUrlFunc(e){return pG(e)}static createDataGateway(){return gG}static createIpfsGatewayFunc(e){return mG(e)}};zg=new WeakMap,Hg=new WeakMap,No=new WeakMap,xc=new WeakMap,Wg=new WeakMap,qg=new WeakMap,ir=new WeakMap,fi=new WeakMap,Cc=new WeakMap,$h=new WeakMap,Uh=new WeakMap,Bh=new WeakMap,Ea=new WeakMap,Po=new WeakMap,bu=new WeakMap,Lh=new WeakSet,M0=async function(e,n,r,s,i){var u,d,h;if(e>=E(this,Po).maxAttempts)return i.makeServerError("exceeded maximum retry limit");oe(K6()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await K3e(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in wE){const f=await wE[a](o.url,bE(E(s,Ea)));if(f instanceof ad){let p=f;if(this.processFunc){bE(E(s,Ea));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,bE(E(s,Ea)));let l=new ad(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return X(u=o.redirect(f),Lh,M0).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=E(this,Po).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),X(d=o.clone(),Lh,M0).call(d,e+1,n,p,s,l)}if(this.processFunc){bE(E(s,Ea));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=E(this,Po).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),X(h=o.clone(),Lh,M0).call(h,e+1,n,p,s,l)}}return l};let Ed=Hx;var iv,ov,av,pi,Gg,Mh;const L3=class L3{constructor(e,n,r,s,i){q(this,iv);q(this,ov);q(this,av);q(this,pi);q(this,Gg);q(this,Mh);O(this,iv,e),O(this,ov,n),O(this,av,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),O(this,pi,s==null?null:new Uint8Array(s)),O(this,Gg,i||null),O(this,Mh,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${E(this,pi)?Se(E(this,pi)):"null"}>`}get statusCode(){return E(this,iv)}get statusMessage(){return E(this,ov)}get headers(){return Object.assign({},E(this,av))}get body(){return E(this,pi)==null?null:new Uint8Array(E(this,pi))}get bodyText(){try{return E(this,pi)==null?"":Px(E(this,pi))}catch{oe(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{oe(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new L3(599,r,this.headers,this.body,E(this,Gg)||void 0);return O(s,Mh,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:G(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Ge(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return E(this,pi)!=null}get request(){return E(this,Gg)}ok(){return E(this,Mh).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=E(this,Mh);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{E(this,pi)&&(s=Px(E(this,pi)))}catch{}oe(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};iv=new WeakMap,ov=new WeakMap,av=new WeakMap,pi=new WeakMap,Gg=new WeakMap,Mh=new WeakMap;let ad=L3;function K6(){return new Date().getTime()}function V3e(t){return Gc(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function K3e(t){return new Promise(e=>setTimeout(e,t))}const Q3e=BigInt(-1),xo=BigInt(0),og=BigInt(1),J3e=BigInt(5),kp={};let Ag="0000";for(;Ag.length<80;)Ag+=Ag;function zd(t){let e=Ag;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function b0(t,e,n){const r=BigInt(e.width);if(e.signed){const s=og<<r-og;oe(n==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>xo?t=Nx(Eh(t,r),r):t=-Nx(Eh(-t,r),r)}else{const s=og<<r;oe(n==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%s+s)%s&s-og}return t}function yI(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);G(i,"invalid fixed format","format",t),e=i[1]!=="u",n=parseInt(i[2]),r=parseInt(i[3])}}else if(t){const i=t,o=(a,c,l)=>i[a]==null?l:(G(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}G(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),G(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:s}}function Y3e(t,e){let n="";t<xo&&(n="-",t*=Q3e);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Ag+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var ko,Vt,os,$t,Jd,hc,YP,ZP,XP,ek;const tu=class tu{constructor(e,n,r){q(this,$t);J(this,"format");q(this,ko);q(this,Vt);q(this,os);J(this,"_value");Qv(e,kp,"FixedNumber"),O(this,Vt,n),O(this,ko,r);const s=Y3e(n,r.decimals);Ge(this,{format:r.name,_value:s}),O(this,os,zd(r.decimals))}get signed(){return E(this,ko).signed}get width(){return E(this,ko).width}get decimals(){return E(this,ko).decimals}get value(){return E(this,Vt)}addUnsafe(e){return X(this,$t,YP).call(this,e)}add(e){return X(this,$t,YP).call(this,e,"add")}subUnsafe(e){return X(this,$t,ZP).call(this,e)}sub(e){return X(this,$t,ZP).call(this,e,"sub")}mulUnsafe(e){return X(this,$t,XP).call(this,e)}mul(e){return X(this,$t,XP).call(this,e,"mul")}mulSignal(e){X(this,$t,Jd).call(this,e);const n=E(this,Vt)*E(e,Vt);return oe(n%E(this,os)===xo,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),X(this,$t,hc).call(this,n/E(this,os),"mulSignal")}divUnsafe(e){return X(this,$t,ek).call(this,e)}div(e){return X(this,$t,ek).call(this,e,"div")}divSignal(e){oe(E(e,Vt)!==xo,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),X(this,$t,Jd).call(this,e);const n=E(this,Vt)*E(this,os);return oe(n%E(e,Vt)===xo,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),X(this,$t,hc).call(this,n/E(e,Vt),"divSignal")}cmp(e){let n=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=zd(s):s<0&&(n*=zd(-s)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=E(this,Vt);return E(this,Vt)<xo&&(e-=E(this,os)-og),e=E(this,Vt)/E(this,os)*E(this,os),X(this,$t,hc).call(this,e,"floor")}ceiling(){let e=E(this,Vt);return E(this,Vt)>xo&&(e+=E(this,os)-og),e=E(this,Vt)/E(this,os)*E(this,os),X(this,$t,hc).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=J3e*zd(n-1);let s=this.value+r;const i=zd(n);return s=s/i*i,b0(s,E(this,ko),"round"),new tu(kp,s,E(this,ko))}isZero(){return E(this,Vt)===xo}isNegative(){return E(this,Vt)<xo}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return tu.fromString(this.toString(),e)}static fromValue(e,n,r){const s=n==null?0:it(n),i=yI(r);let o=De(e,"value");const a=s-i.decimals;if(a>0){const c=zd(a);oe(o%c===xo,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=zd(-a));return b0(o,i,"fromValue"),new tu(kp,o,i)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);G(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=yI(n);let i=r[2]||"0",o=r[3]||"";for(;o.length<s.decimals;)o+=Ag;oe(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(r[1]+i+o);return b0(a,s,"fromString"),new tu(kp,a,s)}static fromBytes(e,n){let r=xA(ct(e,"value"));const s=yI(n);return s.signed&&(r=Nx(r,s.width)),b0(r,s,"fromBytes"),new tu(kp,r,s)}};ko=new WeakMap,Vt=new WeakMap,os=new WeakMap,$t=new WeakSet,Jd=function(e){G(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},hc=function(e,n){return e=b0(e,E(this,ko),n),new tu(kp,e,E(this,ko))},YP=function(e,n){return X(this,$t,Jd).call(this,e),X(this,$t,hc).call(this,E(this,Vt)+E(e,Vt),n)},ZP=function(e,n){return X(this,$t,Jd).call(this,e),X(this,$t,hc).call(this,E(this,Vt)-E(e,Vt),n)},XP=function(e,n){return X(this,$t,Jd).call(this,e),X(this,$t,hc).call(this,E(this,Vt)*E(e,Vt)/E(this,os),n)},ek=function(e,n){return oe(E(e,Vt)!==xo,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),X(this,$t,Jd).call(this,e),X(this,$t,hc).call(this,E(this,Vt)*E(this,os)/E(e,Vt),n)};let kx=tu;function Z3e(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Q6(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function J6(t,e,n,r){const s=[];for(;n<e+1+r;){const i=wG(t,n);s.push(i.result),n+=i.consumed,oe(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function wG(t,e){oe(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{oe(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=Q6(t,e+1,r);return n(e+1+r+s),J6(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),J6(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=Q6(t,e+1,r);n(e+1+r+s);const i=Se(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Se(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Z3e(t[e])}}function Jv(t){const e=ct(t,"data"),n=wG(e,0);return G(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Y6(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function bG(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(bG(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=Y6(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(ct(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Y6(e.length);return n.unshift(183+n.length),n.concat(e)}const Z6="0123456789abcdef";function _d(t){let e="0x";for(const n of bG(t))e+=Z6[n>>4],e+=Z6[n&15];return e}function X3e(t,e){let n=18;return n=it(e,"unit"),kx.fromValue(t,n,{decimals:n,width:512}).toString()}function eDe(t,e){G(typeof t=="string","value must be a string","value",t);let n=18;return n=it(e,"unit"),kx.fromString(t,{decimals:n,width:512}).value}function wI(t){return X3e(t,18)}function bI(t){return eDe(t,18)}const fs=32,tk=new Uint8Array(fs),tDe=["then"],vE={},vG=new WeakMap;function sh(t){return vG.get(t)}function X6(t,e){vG.set(t,e)}function v0(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function nk(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof Ym?nk(sh(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof Ym&&(o=nk(sh(o),o,n)),r[s]=o),r},{})}var Vg;const ag=class ag extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==vE&&(s=n,i=[],o=!1);super(s.length);q(this,Vg);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(X6(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),O(this,Vg,[]),E(this,Vg)==null&&E(this,Vg),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=it(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&v0(`index ${f}`,p),p}if(tDe.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return X6(c,sh(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&v0(`index ${i}`,s),n&&s instanceof ag&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=sh(this);return r.reduce((s,i,o)=>(oe(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),nk(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=sh(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new ag(vE,i,o)}filter(n,r){const s=sh(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&v0(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new ag(vE,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&v0(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=sh(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&v0(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new ag(vE,n,r)}};Vg=new WeakMap;let Ym=ag;function eB(t){let e=er(t);return oe(e.length<=fs,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:fs,offset:e.length}),e.length!==fs&&(e=hs(Nn([tk.slice(e.length%fs),e]))),e}class ul{constructor(e,n,r,s){J(this,"name");J(this,"type");J(this,"localName");J(this,"dynamic");Ge(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){G(!1,e,this.localName,n)}}var Ac,jh,Kg,a_;class rk{constructor(){q(this,Kg);q(this,Ac);q(this,jh);O(this,Ac,[]),O(this,jh,0)}get data(){return Nn(E(this,Ac))}get length(){return E(this,jh)}appendWriter(e){return X(this,Kg,a_).call(this,hs(e.data))}writeBytes(e){let n=hs(e);const r=n.length%fs;return r&&(n=hs(Nn([n,tk.slice(r)]))),X(this,Kg,a_).call(this,n)}writeValue(e){return X(this,Kg,a_).call(this,eB(e))}writeUpdatableValue(){const e=E(this,Ac).length;return E(this,Ac).push(tk),O(this,jh,E(this,jh)+fs),n=>{E(this,Ac)[e]=eB(n)}}}Ac=new WeakMap,jh=new WeakMap,Kg=new WeakSet,a_=function(e){return E(this,Ac).push(e),O(this,jh,E(this,jh)+e.length),e.length};var Ls,gi,Fh,zh,vu,Uf,ik,EG;const M3=class M3{constructor(e,n,r){q(this,Uf);J(this,"allowLoose");q(this,Ls);q(this,gi);q(this,Fh);q(this,zh);q(this,vu);Ge(this,{allowLoose:!!n}),O(this,Ls,hs(e)),O(this,Fh,0),O(this,zh,null),O(this,vu,r??1024),O(this,gi,0)}get data(){return Se(E(this,Ls))}get dataLength(){return E(this,Ls).length}get consumed(){return E(this,gi)}get bytes(){return new Uint8Array(E(this,Ls))}subReader(e){const n=new M3(E(this,Ls).slice(E(this,gi)+e),this.allowLoose,E(this,vu));return O(n,zh,this),n}readBytes(e,n){let r=X(this,Uf,EG).call(this,0,e,!!n);return X(this,Uf,ik).call(this,e),O(this,gi,E(this,gi)+r.length),r.slice(0,e)}readValue(){return xA(this.readBytes(fs))}readIndex(){return R3e(this.readBytes(fs))}};Ls=new WeakMap,gi=new WeakMap,Fh=new WeakMap,zh=new WeakMap,vu=new WeakMap,Uf=new WeakSet,ik=function(e){var n;if(E(this,zh))return X(n=E(this,zh),Uf,ik).call(n,e);O(this,Fh,E(this,Fh)+e),oe(E(this,vu)<1||E(this,Fh)<=E(this,vu)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${E(this,vu)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:hs(E(this,Ls)),offset:E(this,gi),length:e,info:{bytesRead:E(this,Fh),dataLength:this.dataLength}})},EG=function(e,n,r){let s=Math.ceil(n/fs)*fs;return E(this,gi)+s>E(this,Ls).length&&(this.allowLoose&&r&&E(this,gi)+n<=E(this,Ls).length?s=n:oe(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:hs(E(this,Ls)),length:E(this,Ls).length,offset:E(this,gi)+s})),E(this,Ls).slice(E(this,gi),E(this,gi)+s)};let sk=M3;function Ox(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function E3(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function nDe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ox(t.outputLen),Ox(t.blockLen)}function Zm(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _G(t,e){E3(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const vI=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xG=t=>t instanceof Uint8Array,rDe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),EI=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),da=(t,e)=>t<<32-e|t>>>e,sDe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!sDe)throw new Error("Non little-endian hardware is not supported");function iDe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function CA(t){if(typeof t=="string"&&(t=iDe(t)),!xG(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function oDe(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!xG(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class _3{clone(){return this._cloneInto()}}function x3(t){const e=r=>t().update(CA(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function aDe(t=32){if(vI&&typeof vI.getRandomValues=="function")return vI.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class CG extends _3{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,nDe(e);const r=CA(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Zm(this),this.iHash.update(e),this}digestInto(e){Zm(this),E3(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const AG=(t,e,n)=>new CG(t,e).update(n).digest();AG.create=(t,e)=>new CG(t,e);function cDe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class SG extends _3{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=EI(this.buffer)}update(e){Zm(this);const{view:n,buffer:r,blockLen:s}=this;e=CA(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=EI(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Zm(this),_G(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;cDe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=EI(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const lDe=(t,e,n)=>t&e^~t&n,uDe=(t,e,n)=>t&e^t&n^e&n,dDe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ul=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bl=new Uint32Array(64);class hDe extends SG{constructor(){super(64,32,8,!1),this.A=Ul[0]|0,this.B=Ul[1]|0,this.C=Ul[2]|0,this.D=Ul[3]|0,this.E=Ul[4]|0,this.F=Ul[5]|0,this.G=Ul[6]|0,this.H=Ul[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Bl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Bl[d-15],f=Bl[d-2],p=da(h,7)^da(h,18)^h>>>3,g=da(f,17)^da(f,19)^f>>>10;Bl[d]=g+Bl[d-7]+p+Bl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=da(a,6)^da(a,11)^da(a,25),f=u+h+lDe(a,c,l)+dDe[d]+Bl[d]|0,g=(da(r,2)^da(r,13)^da(r,22))+uDe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Bl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const IG=x3(()=>new hDe),EE=BigInt(2**32-1),ok=BigInt(32);function TG(t,e=!1){return e?{h:Number(t&EE),l:Number(t>>ok&EE)}:{h:Number(t>>ok&EE)|0,l:Number(t&EE)|0}}function NG(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=TG(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const fDe=(t,e)=>BigInt(t>>>0)<<ok|BigInt(e>>>0),pDe=(t,e,n)=>t>>>n,gDe=(t,e,n)=>t<<32-n|e>>>n,mDe=(t,e,n)=>t>>>n|e<<32-n,yDe=(t,e,n)=>t<<32-n|e>>>n,wDe=(t,e,n)=>t<<64-n|e>>>n-32,bDe=(t,e,n)=>t>>>n-32|e<<64-n,vDe=(t,e)=>e,EDe=(t,e)=>t,PG=(t,e,n)=>t<<n|e>>>32-n,kG=(t,e,n)=>e<<n|t>>>32-n,OG=(t,e,n)=>e<<n-32|t>>>64-n,RG=(t,e,n)=>t<<n-32|e>>>64-n;function _De(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const xDe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),CDe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ADe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),SDe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,IDe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),TDe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,at={fromBig:TG,split:NG,toBig:fDe,shrSH:pDe,shrSL:gDe,rotrSH:mDe,rotrSL:yDe,rotrBH:wDe,rotrBL:bDe,rotr32H:vDe,rotr32L:EDe,rotlSH:PG,rotlSL:kG,rotlBH:OG,rotlBL:RG,add:_De,add3L:xDe,add3H:CDe,add4L:ADe,add4H:SDe,add5H:TDe,add5L:IDe},[NDe,PDe]=at.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ll=new Uint32Array(80),Ml=new Uint32Array(80);class kDe extends SG{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Ll[b]=e.getUint32(n),Ml[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const x=Ll[b-15]|0,_=Ml[b-15]|0,C=at.rotrSH(x,_,1)^at.rotrSH(x,_,8)^at.shrSH(x,_,7),A=at.rotrSL(x,_,1)^at.rotrSL(x,_,8)^at.shrSL(x,_,7),T=Ll[b-2]|0,S=Ml[b-2]|0,k=at.rotrSH(T,S,19)^at.rotrBH(T,S,61)^at.shrSH(T,S,6),R=at.rotrSL(T,S,19)^at.rotrBL(T,S,61)^at.shrSL(T,S,6),F=at.add4L(A,R,Ml[b-7],Ml[b-16]),W=at.add4H(F,C,k,Ll[b-7],Ll[b-16]);Ll[b]=W|0,Ml[b]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const x=at.rotrSH(d,h,14)^at.rotrSH(d,h,18)^at.rotrBH(d,h,41),_=at.rotrSL(d,h,14)^at.rotrSL(d,h,18)^at.rotrBL(d,h,41),C=d&f^~d&g,A=h&p^~h&y,T=at.add5L(v,_,A,PDe[b],Ml[b]),S=at.add5H(T,w,x,C,NDe[b],Ll[b]),k=T|0,R=at.rotrSH(r,s,28)^at.rotrBH(r,s,34)^at.rotrBH(r,s,39),F=at.rotrSL(r,s,28)^at.rotrBL(r,s,34)^at.rotrBL(r,s,39),W=r&i^r&a^i&a,Q=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=at.add(l|0,u|0,S|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=at.add3L(k,F,Q);r=at.add3H(I,S,R,W),s=I|0}({h:r,l:s}=at.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=at.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=at.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=at.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=at.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=at.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=at.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=at.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){Ll.fill(0),Ml.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ODe=x3(()=>new kDe);function RDe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const tB=RDe(),nB=tB.crypto||tB.msCrypto;function DDe(t){switch(t){case"sha256":return IG.create();case"sha512":return ODe.create()}G(!1,"invalid hashing algorithm name","algorithm",t)}function $De(t){oe(nB!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),G(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return nB.getRandomValues(e),e}const[DG,$G,UG]=[[],[],[]],UDe=BigInt(0),E0=BigInt(1),BDe=BigInt(2),LDe=BigInt(7),MDe=BigInt(256),jDe=BigInt(113);for(let t=0,e=E0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],DG.push(2*(5*r+n)),$G.push((t+1)*(t+2)/2%64);let s=UDe;for(let i=0;i<7;i++)e=(e<<E0^(e>>LDe)*jDe)%MDe,e&BDe&&(s^=E0<<(E0<<BigInt(i))-E0);UG.push(s)}const[FDe,zDe]=NG(UG,!0),rB=(t,e,n)=>n>32?OG(t,e,n):PG(t,e,n),sB=(t,e,n)=>n>32?RG(t,e,n):kG(t,e,n);function HDe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=rB(l,u,1)^n[a],h=sB(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=$G[o],c=rB(s,i,a),l=sB(s,i,a),u=DG[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=FDe[r],t[1]^=zDe[r]}n.fill(0)}class C3 extends _3{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ox(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=rDe(this.state)}keccak(){HDe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Zm(this);const{blockLen:n,state:r}=this;e=CA(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Zm(this,!1),E3(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ox(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_G(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new C3(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const WDe=(t,e,n)=>x3(()=>new C3(e,t,n)),qDe=WDe(1,136,256/8);let BG=!1;const LG=function(t){return qDe(t)};let MG=LG;function Wn(t){const e=ct(t,"data");return Se(MG(e))}Wn._=LG;Wn.lock=function(){BG=!0};Wn.register=function(t){if(BG)throw new TypeError("keccak256 is locked");MG=t};Object.freeze(Wn);let jG=!1;const FG=function(t){return new Uint8Array($De(t))};let zG=FG;function Yv(t){return zG(t)}Yv._=FG;Yv.lock=function(){jG=!0};Yv.register=function(t){if(jG)throw new Error("randomBytes is locked");zG=t};Object.freeze(Yv);const HG=function(t){return DDe("sha256").update(t).digest()};let WG=HG,qG=!1;function Py(t){const e=ct(t,"data");return Se(WG(e))}Py._=HG;Py.lock=function(){qG=!0};Py.register=function(t){if(qG)throw new Error("sha256 is locked");WG=t};Object.freeze(Py);Object.freeze(Py);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const GG=BigInt(0),AA=BigInt(1),GDe=BigInt(2),SA=t=>t instanceof Uint8Array,VDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xm(t){if(!SA(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=VDe[t[n]];return e}function VG(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function A3(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function ey(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function cf(t){return A3(Xm(t))}function S3(t){if(!SA(t))throw new Error("Uint8Array expected");return A3(Xm(Uint8Array.from(t).reverse()))}function ty(t,e){return ey(t.toString(16).padStart(e*2,"0"))}function I3(t,e){return ty(t,e).reverse()}function KDe(t){return ey(VG(t))}function So(t,e,n){let r;if(typeof e=="string")try{r=ey(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(SA(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function Wb(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!SA(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function QDe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function JDe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function YDe(t){let e;for(e=0;t>GG;t>>=AA,e+=1);return e}function ZDe(t,e){return t>>BigInt(e)&AA}const XDe=(t,e,n)=>t|(n?AA:GG)<<BigInt(e),T3=t=>(GDe<<BigInt(t-1))-AA,_I=t=>new Uint8Array(t),iB=t=>Uint8Array.from(t);function KG(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=_I(t),s=_I(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=_I())=>{s=a(iB([0]),d),r=a(),d.length!==0&&(s=a(iB([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return Wb(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const e$e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Zv(t,e,n={}){const r=(s,i,o)=>{const a=e$e[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const t$e=Object.freeze(Object.defineProperty({__proto__:null,bitGet:ZDe,bitLen:YDe,bitMask:T3,bitSet:XDe,bytesToHex:Xm,bytesToNumberBE:cf,bytesToNumberLE:S3,concatBytes:Wb,createHmacDrbg:KG,ensureBytes:So,equalBytes:QDe,hexToBytes:ey,hexToNumber:A3,numberToBytesBE:ty,numberToBytesLE:I3,numberToHexUnpadded:VG,numberToVarBytesBE:KDe,utf8ToBytes:JDe,validateObject:Zv},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hr=BigInt(0),Bn=BigInt(1),ih=BigInt(2),n$e=BigInt(3),ak=BigInt(4),oB=BigInt(5),aB=BigInt(8);BigInt(9);BigInt(16);function Ws(t,e){const n=t%e;return n>=hr?n:e+n}function r$e(t,e,n){if(n<=hr||e<hr)throw new Error("Expected power/modulo > 0");if(n===Bn)return hr;let r=Bn;for(;e>hr;)e&Bn&&(r=r*t%n),t=t*t%n,e>>=Bn;return r}function Mi(t,e,n){let r=t;for(;e-- >hr;)r*=r,r%=n;return r}function ck(t,e){if(t===hr||e<=hr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Ws(t,e),r=e,s=hr,i=Bn;for(;n!==hr;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Bn)throw new Error("invert: does not exist");return Ws(s,e)}function s$e(t){const e=(t-Bn)/ih;let n,r,s;for(n=t-Bn,r=0;n%ih===hr;n/=ih,r++);for(s=ih;s<t&&r$e(s,e,t)!==t-Bn;s++);if(r===1){const o=(t+Bn)/ak;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Bn)/ih;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Bn<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function i$e(t){if(t%ak===n$e){const e=(t+Bn)/ak;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%aB===oB){const e=(t-oB)/aB;return function(r,s){const i=r.mul(s,ih),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,ih),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return s$e(t)}const o$e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function a$e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=o$e.reduce((r,s)=>(r[s]="function",r),e);return Zv(t,n)}function c$e(t,e,n){if(n<hr)throw new Error("Expected power > 0");if(n===hr)return t.ONE;if(n===Bn)return e;let r=t.ONE,s=e;for(;n>hr;)n&Bn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Bn;return r}function l$e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function QG(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function u$e(t,e,n=!1,r={}){if(t<=hr)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=QG(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=i$e(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:T3(s),ZERO:hr,ONE:Bn,create:c=>Ws(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return hr<=c&&c<t},is0:c=>c===hr,isOdd:c=>(c&Bn)===Bn,neg:c=>Ws(-c,t),eql:(c,l)=>c===l,sqr:c=>Ws(c*c,t),add:(c,l)=>Ws(c+l,t),sub:(c,l)=>Ws(c-l,t),mul:(c,l)=>Ws(c*l,t),pow:(c,l)=>c$e(a,c,l),div:(c,l)=>Ws(c*ck(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>ck(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>l$e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?I3(c,i):ty(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?S3(c):cf(c)}});return Object.freeze(a)}function JG(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function YG(t){const e=JG(t);return e+Math.ceil(e/2)}function d$e(t,e,n=!1){const r=t.length,s=JG(e),i=YG(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?cf(t):S3(t),a=Ws(o,e-Bn)+Bn;return n?I3(a,s):ty(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const h$e=BigInt(0),xI=BigInt(1);function f$e(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>h$e;)i&xI&&(o=o.add(a)),a=a.double(),i>>=xI;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=xI);const w=g,v=g+Math.abs(y)-1,b=p%2!==0,x=y<0;y===0?u=u.add(n(b,i[w])):l=l.add(n(x,i[v]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function ZG(t){return a$e(t.Fp),Zv(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...QG(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function p$e(t){const e=ZG(t);Zv(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:g$e,hexToBytes:m$e}=t$e,_h={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=_h;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:g$e(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=_h,n=typeof t=="string"?m$e(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=_h._parseInt(n.subarray(2)),{d:o,l:a}=_h._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Uc=BigInt(0),Yi=BigInt(1);BigInt(2);const cB=BigInt(3);BigInt(4);function y$e(t){const e=p$e(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const w=g.toAffine();return Wb(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),w=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function i(p){const{a:g,b:y}=e,w=n.sqr(p),v=n.mul(w,p);return n.add(n.add(v,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Uc<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:w,n:v}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Xm(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let b;try{b=typeof p=="bigint"?p:cf(So("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return w&&(b=Ws(b,v)),a(b),b}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,w){if(this.px=g,this.py=y,this.pz=w,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(g){const{x:y,y:w}=g||{};if(!g||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const v=b=>n.eql(b,n.ZERO);return v(y)&&v(w)?d.ZERO:new d(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(w=>w.pz));return g.map((w,v)=>w.toAffine(y[v])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(So("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),v=i(g);if(!n.eql(w,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:w,pz:v}=this,{px:b,py:x,pz:_}=g,C=n.eql(n.mul(y,_),n.mul(b,v)),A=n.eql(n.mul(w,_),n.mul(x,v));return C&&A}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,w=n.mul(y,cB),{px:v,py:b,pz:x}=this;let _=n.ZERO,C=n.ZERO,A=n.ZERO,T=n.mul(v,v),S=n.mul(b,b),k=n.mul(x,x),R=n.mul(v,b);return R=n.add(R,R),A=n.mul(v,x),A=n.add(A,A),_=n.mul(g,A),C=n.mul(w,k),C=n.add(_,C),_=n.sub(S,C),C=n.add(S,C),C=n.mul(_,C),_=n.mul(R,_),A=n.mul(w,A),k=n.mul(g,k),R=n.sub(T,k),R=n.mul(g,R),R=n.add(R,A),A=n.add(T,T),T=n.add(A,T),T=n.add(T,k),T=n.mul(T,R),C=n.add(C,T),k=n.mul(b,x),k=n.add(k,k),T=n.mul(k,R),_=n.sub(_,T),A=n.mul(k,S),A=n.add(A,A),A=n.add(A,A),new d(_,C,A)}add(g){u(g);const{px:y,py:w,pz:v}=this,{px:b,py:x,pz:_}=g;let C=n.ZERO,A=n.ZERO,T=n.ZERO;const S=e.a,k=n.mul(e.b,cB);let R=n.mul(y,b),F=n.mul(w,x),W=n.mul(v,_),Q=n.add(y,w),I=n.add(b,x);Q=n.mul(Q,I),I=n.add(R,F),Q=n.sub(Q,I),I=n.add(y,v);let N=n.add(b,_);return I=n.mul(I,N),N=n.add(R,W),I=n.sub(I,N),N=n.add(w,v),C=n.add(x,_),N=n.mul(N,C),C=n.add(F,W),N=n.sub(N,C),T=n.mul(S,I),C=n.mul(k,W),T=n.add(C,T),C=n.sub(F,T),T=n.add(F,T),A=n.mul(C,T),F=n.add(R,R),F=n.add(F,R),W=n.mul(S,W),I=n.mul(k,I),F=n.add(F,W),W=n.sub(R,W),W=n.mul(S,W),I=n.add(I,W),R=n.mul(F,I),A=n.add(A,R),R=n.mul(N,I),C=n.mul(Q,C),C=n.sub(C,R),R=n.mul(Q,F),T=n.mul(N,T),T=n.add(T,R),new d(C,A,T)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const w=n.invertBatch(y.map(v=>v.pz));return y.map((v,b)=>v.toAffine(w[b])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Uc)return y;if(a(g),g===Yi)return this;const{endo:w}=e;if(!w)return f.unsafeLadder(this,g);let{k1neg:v,k1:b,k2neg:x,k2:_}=w.splitScalar(g),C=y,A=y,T=this;for(;b>Uc||_>Uc;)b&Yi&&(C=C.add(T)),_&Yi&&(A=A.add(T)),T=T.double(),b>>=Yi,_>>=Yi;return v&&(C=C.negate()),x&&(A=A.negate()),A=new d(n.mul(A.px,w.beta),A.py,A.pz),C.add(A)}multiply(g){a(g);let y=g,w,v;const{endo:b}=e;if(b){const{k1neg:x,k1:_,k2neg:C,k2:A}=b.splitScalar(y);let{p:T,f:S}=this.wNAF(_),{p:k,f:R}=this.wNAF(A);T=f.constTimeNegate(x,T),k=f.constTimeNegate(C,k),k=new d(n.mul(k.px,b.beta),k.py,k.pz),w=T.add(k),v=S.add(R)}else{const{p:x,f:_}=this.wNAF(y);w=x,v=_}return d.normalizeZ([w,v])[0]}multiplyAndAddUnsafe(g,y,w){const v=d.BASE,b=(_,C)=>C===Uc||C===Yi||!_.equals(v)?_.multiplyUnsafe(C):_.multiply(C),x=b(this,y).add(b(g,w));return x.is0()?void 0:x}toAffine(g){const{px:y,py:w,pz:v}=this,b=this.is0();g==null&&(g=b?n.ONE:n.inv(v));const x=n.mul(y,g),_=n.mul(w,g),C=n.mul(v,g);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x,y:_}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===Yi)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===Yi?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return Xm(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=f$e(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function w$e(t){const e=ZG(t);return Zv(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function b$e(t){const e=w$e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(I){return Uc<I&&I<n.ORDER}function a(I){return Ws(I,r)}function c(I){return ck(I,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=y$e({...e,toBytes(I,N,M){const B=N.toAffine(),$=n.toBytes(B.x),j=Wb;return M?j(Uint8Array.from([N.hasEvenY()?2:3]),$):j(Uint8Array.from([4]),$,n.toBytes(B.y))},fromBytes(I){const N=I.length,M=I[0],B=I.subarray(1);if(N===s&&(M===2||M===3)){const $=cf(B);if(!o($))throw new Error("Point is not on curve");const j=d($);let V=n.sqrt(j);const ee=(V&Yi)===Yi;return(M&1)===1!==ee&&(V=n.neg(V)),{x:$,y:V}}else if(N===i&&M===4){const $=n.fromBytes(B.subarray(0,n.BYTES)),j=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:$,y:j}}else throw new Error(`Point of length ${N} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=I=>Xm(ty(I,e.nByteLength));function p(I){const N=r>>Yi;return I>N}function g(I){return p(I)?a(-I):I}const y=(I,N,M)=>cf(I.slice(N,M));class w{constructor(N,M,B){this.r=N,this.s=M,this.recovery=B,this.assertValidity()}static fromCompact(N){const M=e.nByteLength;return N=So("compactSignature",N,M*2),new w(y(N,0,M),y(N,M,2*M))}static fromDER(N){const{r:M,s:B}=_h.toSig(So("DER",N));return new w(M,B)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new w(this.r,this.s,N)}recoverPublicKey(N){const{r:M,s:B,recovery:$}=this,j=A(So("msgHash",N));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");const V=$===2||$===3?M+e.n:M;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ee=$&1?"03":"02",ae=l.fromHex(ee+f(V)),re=c(V),ce=a(-j*re),ye=a(B*re),Z=l.BASE.multiplyAndAddUnsafe(ae,ce,ye);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ey(this.toDERHex())}toDERHex(){return _h.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ey(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const v={isValidPrivateKey(I){try{return u(I),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const I=YG(e.n);return d$e(e.randomBytes(I),e.n)},precompute(I=8,N=l.BASE){return N._setWindowSize(I),N.multiply(BigInt(3)),N}};function b(I,N=!0){return l.fromPrivateKey(I).toRawBytes(N)}function x(I){const N=I instanceof Uint8Array,M=typeof I=="string",B=(N||M)&&I.length;return N?B===s||B===i:M?B===2*s||B===2*i:I instanceof l}function _(I,N,M=!0){if(x(I))throw new Error("first arg must be private key");if(!x(N))throw new Error("second arg must be public key");return l.fromHex(N).multiply(u(I)).toRawBytes(M)}const C=e.bits2int||function(I){const N=cf(I),M=I.length*8-e.nBitLength;return M>0?N>>BigInt(M):N},A=e.bits2int_modN||function(I){return a(C(I))},T=T3(e.nBitLength);function S(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Uc<=I&&I<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ty(I,e.nByteLength)}function k(I,N,M=R){if(["recovered","canonical"].some(le=>le in M))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:$}=e;let{lowS:j,prehash:V,extraEntropy:ee}=M;j==null&&(j=!0),I=So("msgHash",I),V&&(I=So("prehashed msgHash",B(I)));const ae=A(I),re=u(N),ce=[S(re),S(ae)];if(ee!=null){const le=ee===!0?$(n.BYTES):ee;ce.push(So("extraEntropy",le))}const ye=Wb(...ce),Z=ae;function te(le){const se=C(le);if(!h(se))return;const pe=c(se),Fe=l.BASE.multiply(se).toAffine(),Ce=a(Fe.x);if(Ce===Uc)return;const xe=a(pe*a(Z+Ce*re));if(xe===Uc)return;let je=(Fe.x===Ce?0:2)|Number(Fe.y&Yi),Ze=xe;return j&&p(xe)&&(Ze=g(xe),je^=1),new w(Ce,Ze,je)}return{seed:ye,k2sig:te}}const R={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function W(I,N,M=R){const{seed:B,k2sig:$}=k(I,N,M),j=e;return KG(j.hash.outputLen,j.nByteLength,j.hmac)(B,$)}l.BASE._setWindowSize(8);function Q(I,N,M,B=F){var Fe;const $=I;if(N=So("msgHash",N),M=So("publicKey",M),"strict"in B)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:V}=B;let ee,ae;try{if(typeof $=="string"||$ instanceof Uint8Array)try{ee=w.fromDER($)}catch(Ce){if(!(Ce instanceof _h.Err))throw Ce;ee=w.fromCompact($)}else if(typeof $=="object"&&typeof $.r=="bigint"&&typeof $.s=="bigint"){const{r:Ce,s:xe}=$;ee=new w(Ce,xe)}else throw new Error("PARSE");ae=l.fromHex(M)}catch(Ce){if(Ce.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&ee.hasHighS())return!1;V&&(N=e.hash(N));const{r:re,s:ce}=ee,ye=A(N),Z=c(ce),te=a(ye*Z),le=a(re*Z),se=(Fe=l.BASE.multiplyAndAddUnsafe(ae,te,le))==null?void 0:Fe.toAffine();return se?a(se.x)===re:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:W,verify:Q,ProjectivePoint:l,Signature:w,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function v$e(t){return{hash:t,hmac:(e,...n)=>AG(t,e,oDe(...n)),randomBytes:aDe}}function E$e(t,e){const n=r=>b$e({...t,...v$e(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XG=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),lB=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_$e=BigInt(1),lk=BigInt(2),uB=(t,e)=>(t+e/lk)/e;function x$e(t){const e=XG,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Mi(u,n,e)*u%e,h=Mi(d,n,e)*u%e,f=Mi(h,lk,e)*l%e,p=Mi(f,s,e)*f%e,g=Mi(p,i,e)*p%e,y=Mi(g,a,e)*g%e,w=Mi(y,c,e)*y%e,v=Mi(w,a,e)*g%e,b=Mi(v,n,e)*u%e,x=Mi(b,o,e)*p%e,_=Mi(x,r,e)*l%e,C=Mi(_,lk,e);if(!uk.eql(uk.sqr(C),t))throw new Error("Cannot find square root");return C}const uk=u$e(XG,void 0,void 0,{sqrt:x$e}),ql=E$e({a:BigInt(0),b:BigInt(7),Fp:uk,n:lB,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=lB,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-_$e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=uB(i*t,e),c=uB(-r*t,e);let l=Ws(t-a*n-c*s,e),u=Ws(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},IG);BigInt(0);ql.ProjectivePoint;const qb="0x0000000000000000000000000000000000000000",dB="0x0000000000000000000000000000000000000000000000000000000000000000",hB=BigInt(0),fB=BigInt(1),pB=BigInt(2),gB=BigInt(27),mB=BigInt(28),_E=BigInt(35),Op={};function yB(t){return il(er(t),32)}var Qg,Jg,Yg,Hh;const Co=class Co{constructor(e,n,r,s){q(this,Qg);q(this,Jg);q(this,Yg);q(this,Hh);Qv(e,Op,"Signature"),O(this,Qg,n),O(this,Jg,r),O(this,Yg,s),O(this,Hh,null)}get r(){return E(this,Qg)}set r(e){G(Cg(e)===32,"invalid r","value",e),O(this,Qg,Se(e))}get s(){return E(this,Jg)}set s(e){G(Cg(e)===32,"invalid s","value",e);const n=Se(e);G(parseInt(n.substring(0,3))<8,"non-canonical s","value",n),O(this,Jg,n)}get v(){return E(this,Yg)}set v(e){const n=it(e,"value");G(n===27||n===28,"invalid v","v",e),O(this,Yg,n)}get networkV(){return E(this,Hh)}get legacyChainId(){const e=this.networkV;return e==null?null:Co.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ct(this.s);return this.yParity&&(e[0]|=128),Se(e)}get compactSerialized(){return Nn([this.r,this.yParityAndS])}get serialized(){return Nn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Co(Op,this.r,this.s,this.v);return this.networkV&&O(e,Hh,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const n=De(e,"v");return n==gB||n==mB?hB:(G(n>=_E,"invalid EIP-155 v","v",e),(n-_E)/pB)}static getChainIdV(e,n){return De(e)*pB+BigInt(35+n-27)}static getNormalizedV(e){const n=De(e);return n===hB||n===gB?27:n===fB||n===mB?28:(G(n>=_E,"invalid v","v",e),n&fB?27:28)}static from(e){function n(l,u){G(l,u,"signature",e)}if(e==null)return new Co(Op,dB,dB,27);if(typeof e=="string"){const l=ct(e,"signature");if(l.length===64){const u=Se(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Co(Op,u,Se(d),h)}if(l.length===65){const u=Se(l.slice(0,32)),d=l.slice(32,64);n((d[0]&128)===0,"non-canonical s");const h=Co.getNormalizedV(l[64]);return new Co(Op,u,Se(d),h)}n(!1,"invalid raw signature length")}if(e instanceof Co)return e.clone();const r=e.r;n(r!=null,"missing r");const s=yB(r),i=function(l,u){if(l!=null)return yB(l);if(u!=null){n(on(u,32),"invalid yParityAndS");const d=ct(u);return d[0]&=127,Se(d)}n(!1,"missing s")}(e.s,e.yParityAndS);n((ct(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=De(l);return{networkV:h>=_E?h:void 0,v:Co.getNormalizedV(h)}}if(u!=null)return n(on(u,32),"invalid yParityAndS"),{v:ct(u)[0]&128?28:27};if(d!=null){switch(it(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Co(Op,s,i,a);return o&&O(c,Hh,o),n(e.yParity==null||it(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Qg=new WeakMap,Jg=new WeakMap,Yg=new WeakMap,Hh=new WeakMap;let ti=Co;var Sc;const oh=class oh{constructor(e){q(this,Sc);G(Cg(e)===32,"invalid private key","privateKey","[REDACTED]"),O(this,Sc,Se(e))}get privateKey(){return E(this,Sc)}get publicKey(){return oh.computePublicKey(E(this,Sc))}get compressedPublicKey(){return oh.computePublicKey(E(this,Sc),!0)}sign(e){G(Cg(e)===32,"invalid digest length","digest",e);const n=ql.sign(hs(e),hs(E(this,Sc)),{lowS:!0});return ti.from({r:vd(n.r,32),s:vd(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=oh.computePublicKey(e);return Se(ql.getSharedSecret(hs(E(this,Sc)),ct(n),!1))}static computePublicKey(e,n){let r=ct(e,"key");if(r.length===32){const i=ql.getPublicKey(r,!!n);return Se(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=ql.ProjectivePoint.fromHex(r);return Se(s.toRawBytes(n))}static recoverPublicKey(e,n){G(Cg(e)===32,"invalid digest length","digest",e);const r=ti.from(n);let s=ql.Signature.fromCompact(hs(Nn([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(hs(e));return G(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=ql.ProjectivePoint.fromHex(oh.computePublicKey(e).substring(2)),i=ql.ProjectivePoint.fromHex(oh.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Sc=new WeakMap;let Gb=oh;const C$e=BigInt(0),A$e=BigInt(36);function wB(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=ct(Wn(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const N3={};for(let t=0;t<10;t++)N3[String(t)]=String(t);for(let t=0;t<26;t++)N3[String.fromCharCode(65+t)]=String(10+t);const bB=15;function S$e(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>N3[r]).join("");for(;e.length>=bB;){let r=e.substring(0,bB);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const I$e=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function T$e(t){t=t.toLowerCase();let e=C$e;for(let n=0;n<t.length;n++)e=e*A$e+I$e[t[n]];return e}function Ut(t){if(G(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=wB(t);return G(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){G(t.substring(2,4)===S$e(t),"bad icap checksum","address",t);let e=T$e(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return wB("0x"+e)}G(!1,"invalid address","address",t)}function N$e(t){const e=Ut(t.from);let r=De(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Ut(Sn(Wn(_d([e,r])),12))}function eV(t){return t&&typeof t.getAddress=="function"}async function CI(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(oe(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),G(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Ut(n)}function ps(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Ut(t):(oe(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),CI(t,e.resolveName(t)));if(eV(t))return CI(t,t.getAddress());if(t&&typeof t.then=="function")return CI(t,t);G(!1,"unsupported addressable value","target",t)}const gc={};function $e(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Xr(gc,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function St(t,e){return new Xr(gc,`bytes${e||""}`,t,{size:e})}const vB=Symbol.for("_ethers_typed");var Wh;const mc=class mc{constructor(e,n,r,s){J(this,"type");J(this,"value");q(this,Wh);J(this,"_typedSymbol");s==null&&(s=null),Qv(gc,e,"Typed"),Ge(this,{_typedSymbol:vB,type:n,value:r}),O(this,Wh,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return E(this,Wh)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return E(this,Wh)===!0?-1:E(this,Wh)===!1?this.value.length:null}static from(e,n){return new mc(gc,e,n)}static uint8(e){return $e(e,8)}static uint16(e){return $e(e,16)}static uint24(e){return $e(e,24)}static uint32(e){return $e(e,32)}static uint40(e){return $e(e,40)}static uint48(e){return $e(e,48)}static uint56(e){return $e(e,56)}static uint64(e){return $e(e,64)}static uint72(e){return $e(e,72)}static uint80(e){return $e(e,80)}static uint88(e){return $e(e,88)}static uint96(e){return $e(e,96)}static uint104(e){return $e(e,104)}static uint112(e){return $e(e,112)}static uint120(e){return $e(e,120)}static uint128(e){return $e(e,128)}static uint136(e){return $e(e,136)}static uint144(e){return $e(e,144)}static uint152(e){return $e(e,152)}static uint160(e){return $e(e,160)}static uint168(e){return $e(e,168)}static uint176(e){return $e(e,176)}static uint184(e){return $e(e,184)}static uint192(e){return $e(e,192)}static uint200(e){return $e(e,200)}static uint208(e){return $e(e,208)}static uint216(e){return $e(e,216)}static uint224(e){return $e(e,224)}static uint232(e){return $e(e,232)}static uint240(e){return $e(e,240)}static uint248(e){return $e(e,248)}static uint256(e){return $e(e,256)}static uint(e){return $e(e,256)}static int8(e){return $e(e,-8)}static int16(e){return $e(e,-16)}static int24(e){return $e(e,-24)}static int32(e){return $e(e,-32)}static int40(e){return $e(e,-40)}static int48(e){return $e(e,-48)}static int56(e){return $e(e,-56)}static int64(e){return $e(e,-64)}static int72(e){return $e(e,-72)}static int80(e){return $e(e,-80)}static int88(e){return $e(e,-88)}static int96(e){return $e(e,-96)}static int104(e){return $e(e,-104)}static int112(e){return $e(e,-112)}static int120(e){return $e(e,-120)}static int128(e){return $e(e,-128)}static int136(e){return $e(e,-136)}static int144(e){return $e(e,-144)}static int152(e){return $e(e,-152)}static int160(e){return $e(e,-160)}static int168(e){return $e(e,-168)}static int176(e){return $e(e,-176)}static int184(e){return $e(e,-184)}static int192(e){return $e(e,-192)}static int200(e){return $e(e,-200)}static int208(e){return $e(e,-208)}static int216(e){return $e(e,-216)}static int224(e){return $e(e,-224)}static int232(e){return $e(e,-232)}static int240(e){return $e(e,-240)}static int248(e){return $e(e,-248)}static int256(e){return $e(e,-256)}static int(e){return $e(e,-256)}static bytes1(e){return St(e,1)}static bytes2(e){return St(e,2)}static bytes3(e){return St(e,3)}static bytes4(e){return St(e,4)}static bytes5(e){return St(e,5)}static bytes6(e){return St(e,6)}static bytes7(e){return St(e,7)}static bytes8(e){return St(e,8)}static bytes9(e){return St(e,9)}static bytes10(e){return St(e,10)}static bytes11(e){return St(e,11)}static bytes12(e){return St(e,12)}static bytes13(e){return St(e,13)}static bytes14(e){return St(e,14)}static bytes15(e){return St(e,15)}static bytes16(e){return St(e,16)}static bytes17(e){return St(e,17)}static bytes18(e){return St(e,18)}static bytes19(e){return St(e,19)}static bytes20(e){return St(e,20)}static bytes21(e){return St(e,21)}static bytes22(e){return St(e,22)}static bytes23(e){return St(e,23)}static bytes24(e){return St(e,24)}static bytes25(e){return St(e,25)}static bytes26(e){return St(e,26)}static bytes27(e){return St(e,27)}static bytes28(e){return St(e,28)}static bytes29(e){return St(e,29)}static bytes30(e){return St(e,30)}static bytes31(e){return St(e,31)}static bytes32(e){return St(e,32)}static address(e){return new mc(gc,"address",e)}static bool(e){return new mc(gc,"bool",!!e)}static bytes(e){return new mc(gc,"bytes",e)}static string(e){return new mc(gc,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new mc(gc,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===vB}static dereference(e,n){if(mc.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Wh=new WeakMap;let Xr=mc;class P$e extends ul{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Xr.dereference(n,"string");try{r=Ut(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Ut(vd(e.readValue(),20))}}class k$e extends ul{constructor(n){super(n.name,n.type,"_",n.dynamic);J(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function tV(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return oe(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),oe(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else G(!1,"invalid tuple value","tuple",n);G(e.length===r.length,"types/value length mismatch","tuple",n);let s=new rk,i=new rk,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function nV(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Tr(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Tr(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),Ym.fromItems(n,r)}class O$e extends ul{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);J(this,"coder");J(this,"length");Ge(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Xr.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),cG(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return tV(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),oe(r*fs<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*fs,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new k$e(this.coder));return nV(n,s)}}class R$e extends ul{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Xr.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class rV extends ul{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=hs(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class D$e extends rV{constructor(e){super("bytes",e)}decode(e){return Se(super.decode(e))}}class $$e extends ul{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);J(this,"size");Ge(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=hs(Xr.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Se(n.readBytes(this.size))}}const U$e=new Uint8Array([]);class B$e extends ul{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(U$e)}decode(e){return e.readBytes(0),null}}const L$e=BigInt(0),M$e=BigInt(1),j$e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class F$e extends ul{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);J(this,"size");J(this,"signed");Ge(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=De(Xr.dereference(r,this.type)),i=Eh(j$e,fs*8);if(this.signed){let o=Eh(i,this.size*8-1);(s>o||s<-(o+M$e))&&this._throwError("value out-of-bounds",r),s=dG(s,8*fs)}else(s<L$e||s>Eh(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Eh(n.readValue(),this.size*8);return this.signed&&(r=Nx(r,this.size*8)),r}}class z$e extends rV{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,Gc(Xr.dereference(n,"string")))}decode(e){return Px(super.decode(e))}}class xE extends ul{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);J(this,"coders");Ge(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Xr.dereference(r,"tuple");return tV(n,this.coders,s)}decode(n){return nV(n,this.coders)}}function AI(t,e){return{address:Ut(t),storageKeys:e.map((n,r)=>(G(on(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Zf(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(G(n.length===2,"invalid slot set",`value[${r}]`,n),AI(n[0],n[1])):(G(n!=null&&typeof n=="object","invalid address-slot set","value",t),AI(n.address,n.storageKeys)));G(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return AI(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function sV(t){return{address:Ut(t.address),nonce:De(t.nonce!=null?t.nonce:0),chainId:De(t.chainId!=null?t.chainId:0),signature:ti.from(t.signature)}}function H$e(t){let e;return typeof t=="string"?e=Gb.computePublicKey(t,!1):e=t.publicKey,Ut(Wn("0x"+e.substring(4)).substring(26))}function W$e(t,e){return H$e(Gb.recoverPublicKey(t,e))}const cr=BigInt(0),q$e=BigInt(2),G$e=BigInt(27),V$e=BigInt(28),K$e=BigInt(35),Q$e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),SI=4096*32;function J$e(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ct(t.blobToKzgCommitment(Se(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ct(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return ct(t.blobToKZGCommitment(Se(r)));G(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return ct(t.computeBlobProof(Se(r),Se(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return ct(t.computeBlobKZGProof(Se(r),Se(s)));G(!1,"unsupported KZG library","kzg",t)}}}function EB(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Py(e).substring(4),"0x"+n}function ky(t){return t==="0x"?null:Ut(t)}function IA(t,e){try{return Zf(t)}catch(n){G(!1,n.message,e,t)}}function Y$e(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:ky(s[1]),nonce:Qt(s[2],"nonce"),chainId:Qt(s[0],"chainId"),signature:ti.from({yParity:Xf(s[3],"yParity"),r:il(s[4],32),s:il(s[5],32)})})}return n}catch(n){G(!1,n.message,e,t)}}function Xf(t,e){return t==="0x"?0:it(t,e)}function Qt(t,e){if(t==="0x")return cr;const n=De(t,e);return G(n<=Q$e,"value exceeds uint size",e,n),n}function yt(t,e){const n=De(t,"value"),r=er(n);return G(r.length<=32,"value too large",`tx.${e}`,n),r}function TA(t){return Zf(t).map(e=>[e.address,e.storageKeys])}function Z$e(t){return t.map(e=>[yt(e.chainId,"chainId"),e.address,yt(e.nonce,"nonce"),yt(e.signature.yParity,"yParity"),er(e.signature.r),er(e.signature.s)])}function X$e(t,e){G(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)G(on(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function e8e(t){const e=Jv(t);G(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Xf(e[0],"nonce"),gasPrice:Qt(e[1],"gasPrice"),gasLimit:Qt(e[2],"gasLimit"),to:ky(e[3]),value:Qt(e[4],"value"),data:Se(e[5]),chainId:cr};if(e.length===6)return n;const r=Qt(e[6],"v"),s=Qt(e[7],"r"),i=Qt(e[8],"s");if(s===cr&&i===cr)n.chainId=r;else{let o=(r-K$e)/q$e;o<cr&&(o=cr),n.chainId=o,G(o!==cr||r===G$e||r===V$e,"non-canonical legacy v","v",e[6]),n.signature=ti.from({r:il(e[7],32),s:il(e[8],32),v:r})}return n}function t8e(t,e){const n=[yt(t.nonce,"nonce"),yt(t.gasPrice||0,"gasPrice"),yt(t.gasLimit,"gasLimit"),t.to||"0x",yt(t.value,"value"),t.data];let r=cr;if(t.chainId!=cr)r=De(t.chainId,"tx.chainId"),G(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==cr&&(n.push(er(r)),n.push("0x"),n.push("0x")),_d(n);let s=BigInt(27+e.yParity);return r!==cr?s=ti.getChainIdV(r,e.v):BigInt(e.v)!==s&&G(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(er(s)),n.push(er(e.r)),n.push(er(e.s)),_d(n)}function NA(t,e){let n;try{if(n=Xf(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{G(!1,"invalid yParity","yParity",e[0])}const r=il(e[1],32),s=il(e[2],32),i=ti.from({r,s,yParity:n});t.signature=i}function n8e(t){const e=Jv(ct(t).slice(1));G(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Se(t));const n={type:2,chainId:Qt(e[0],"chainId"),nonce:Xf(e[1],"nonce"),maxPriorityFeePerGas:Qt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Qt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Qt(e[4],"gasLimit"),to:ky(e[5]),value:Qt(e[6],"value"),data:Se(e[7]),accessList:IA(e[8],"accessList")};return e.length===9||NA(n,e.slice(9)),n}function r8e(t,e){const n=[yt(t.chainId,"chainId"),yt(t.nonce,"nonce"),yt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),yt(t.maxFeePerGas||0,"maxFeePerGas"),yt(t.gasLimit,"gasLimit"),t.to||"0x",yt(t.value,"value"),t.data,TA(t.accessList||[])];return e&&(n.push(yt(e.yParity,"yParity")),n.push(er(e.r)),n.push(er(e.s))),Nn(["0x02",_d(n)])}function s8e(t){const e=Jv(ct(t).slice(1));G(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Se(t));const n={type:1,chainId:Qt(e[0],"chainId"),nonce:Xf(e[1],"nonce"),gasPrice:Qt(e[2],"gasPrice"),gasLimit:Qt(e[3],"gasLimit"),to:ky(e[4]),value:Qt(e[5],"value"),data:Se(e[6]),accessList:IA(e[7],"accessList")};return e.length===8||NA(n,e.slice(8)),n}function i8e(t,e){const n=[yt(t.chainId,"chainId"),yt(t.nonce,"nonce"),yt(t.gasPrice||0,"gasPrice"),yt(t.gasLimit,"gasLimit"),t.to||"0x",yt(t.value,"value"),t.data,TA(t.accessList||[])];return e&&(n.push(yt(e.yParity,"recoveryParam")),n.push(er(e.r)),n.push(er(e.s))),Nn(["0x01",_d(n)])}function o8e(t){let e=Jv(ct(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];G(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),G(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),G(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),G(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),G(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}G(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Se(t));const s={type:3,chainId:Qt(e[0],"chainId"),nonce:Xf(e[1],"nonce"),maxPriorityFeePerGas:Qt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Qt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Qt(e[4],"gasLimit"),to:ky(e[5]),value:Qt(e[6],"value"),data:Se(e[7]),accessList:IA(e[8],"accessList"),maxFeePerBlobGas:Qt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),G(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),G(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)G(on(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||NA(s,e.slice(11)),s}function a8e(t,e,n){const r=[yt(t.chainId,"chainId"),yt(t.nonce,"nonce"),yt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),yt(t.maxFeePerGas||0,"maxFeePerGas"),yt(t.gasLimit,"gasLimit"),t.to||qb,yt(t.value,"value"),t.data,TA(t.accessList||[]),yt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),X$e(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(yt(e.yParity,"yParity")),r.push(er(e.r)),r.push(er(e.s)),n)?Nn(["0x03",_d([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Nn(["0x03",_d(r)])}function c8e(t){const e=Jv(ct(t).slice(1));G(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Se(t));const n={type:4,chainId:Qt(e[0],"chainId"),nonce:Xf(e[1],"nonce"),maxPriorityFeePerGas:Qt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Qt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Qt(e[4],"gasLimit"),to:ky(e[5]),value:Qt(e[6],"value"),data:Se(e[7]),accessList:IA(e[8],"accessList"),authorizationList:Y$e(e[9],"authorizationList")};return e.length===10||NA(n,e.slice(10)),n}function l8e(t,e){const n=[yt(t.chainId,"chainId"),yt(t.nonce,"nonce"),yt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),yt(t.maxFeePerGas||0,"maxFeePerGas"),yt(t.gasLimit,"gasLimit"),t.to||"0x",yt(t.value,"value"),t.data,TA(t.accessList||[]),Z$e(t.authorizationList||[])];return e&&(n.push(yt(e.yParity,"yParity")),n.push(er(e.r)),n.push(er(e.s))),Nn(["0x04",_d(n)])}var Oo,Zg,Xg,em,tm,nm,rm,sm,im,om,am,cm,qh,Eu,_a,_u,lm,um,c_;const ma=class ma{constructor(){q(this,um);q(this,Oo);q(this,Zg);q(this,Xg);q(this,em);q(this,tm);q(this,nm);q(this,rm);q(this,sm);q(this,im);q(this,om);q(this,am);q(this,cm);q(this,qh);q(this,Eu);q(this,_a);q(this,_u);q(this,lm);O(this,Oo,null),O(this,Zg,null),O(this,em,0),O(this,tm,cr),O(this,nm,null),O(this,rm,null),O(this,sm,null),O(this,Xg,"0x"),O(this,im,cr),O(this,om,cr),O(this,am,null),O(this,cm,null),O(this,qh,null),O(this,Eu,null),O(this,_a,null),O(this,_u,null),O(this,lm,null)}get type(){return E(this,Oo)}set type(e){switch(e){case null:O(this,Oo,null);break;case 0:case"legacy":O(this,Oo,0);break;case 1:case"berlin":case"eip-2930":O(this,Oo,1);break;case 2:case"london":case"eip-1559":O(this,Oo,2);break;case 3:case"cancun":case"eip-4844":O(this,Oo,3);break;case 4:case"pectra":case"eip-7702":O(this,Oo,4);break;default:G(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=E(this,Zg);return e==null&&this.type===3?qb:e}set to(e){O(this,Zg,e==null?null:Ut(e))}get nonce(){return E(this,em)}set nonce(e){O(this,em,it(e,"value"))}get gasLimit(){return E(this,tm)}set gasLimit(e){O(this,tm,De(e))}get gasPrice(){const e=E(this,nm);return e==null&&(this.type===0||this.type===1)?cr:e}set gasPrice(e){O(this,nm,e==null?null:De(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=E(this,rm);return e??(this.type===2||this.type===3?cr:null)}set maxPriorityFeePerGas(e){O(this,rm,e==null?null:De(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=E(this,sm);return e??(this.type===2||this.type===3?cr:null)}set maxFeePerGas(e){O(this,sm,e==null?null:De(e,"maxFeePerGas"))}get data(){return E(this,Xg)}set data(e){O(this,Xg,Se(e))}get value(){return E(this,im)}set value(e){O(this,im,De(e,"value"))}get chainId(){return E(this,om)}set chainId(e){O(this,om,De(e))}get signature(){return E(this,am)||null}set signature(e){O(this,am,e==null?null:ti.from(e))}get accessList(){const e=E(this,cm)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){O(this,cm,e==null?null:Zf(e))}get authorizationList(){const e=E(this,lm)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){O(this,lm,e==null?null:e.map(n=>sV(n)))}get maxFeePerBlobGas(){const e=E(this,qh);return e==null&&this.type===3?cr:e}set maxFeePerBlobGas(e){O(this,qh,e==null?null:De(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=E(this,Eu);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){G(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)G(on(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}O(this,Eu,e)}get blobs(){return E(this,_u)==null?null:E(this,_u).map(e=>Object.assign({},e))}set blobs(e){if(e==null){O(this,_u,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(v3(i)){oe(E(this,_a),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ct(i);if(G(o.length<=SI,"blob is too large",`blobs[${s}]`,i),o.length!==SI){const l=new Uint8Array(SI);l.set(o),o=l}const a=E(this,_a).blobToKzgCommitment(o),c=Se(E(this,_a).computeBlobKzgProof(o,a));n.push({data:Se(o),commitment:Se(a),proof:c}),r.push(EB(1,a))}else{const o=Se(i.commitment);n.push({data:Se(i.data),commitment:o,proof:Se(i.proof)}),r.push(EB(1,o))}}O(this,_u,n),O(this,Eu,r)}get kzg(){return E(this,_a)}set kzg(e){e==null?O(this,_a,null):O(this,_a,J$e(e))}get hash(){return this.signature==null?null:Wn(X(this,um,c_).call(this,!0,!1))}get unsignedHash(){return Wn(this.unsignedSerialized)}get from(){return this.signature==null?null:W$e(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Gb.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return X(this,um,c_).call(this,!0,!0)}get unsignedSerialized(){return X(this,um,c_).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=E(this,qh)!=null||E(this,Eu);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&oe(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),oe(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),oe(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ma.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new ma;if(typeof e=="string"){const r=ct(e);if(r[0]>=127)return ma.from(e8e(r));switch(r[0]){case 1:return ma.from(s8e(r));case 2:return ma.from(n8e(r));case 3:return ma.from(o8e(r));case 4:return ma.from(c8e(r))}oe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new ma;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=ti.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(G(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),G(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(G(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),G(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Oo=new WeakMap,Zg=new WeakMap,Xg=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,rm=new WeakMap,sm=new WeakMap,im=new WeakMap,om=new WeakMap,am=new WeakMap,cm=new WeakMap,qh=new WeakMap,Eu=new WeakMap,_a=new WeakMap,_u=new WeakMap,lm=new WeakMap,um=new WeakSet,c_=function(e,n){oe(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return t8e(this,r);case 1:return i8e(this,r);case 2:return r8e(this,r);case 3:return a8e(this,r,n?this.blobs:null);case 4:return l8e(this,r)}oe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Rx=ma;function Of(t){return Wn(Gc(t))}var u8e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const _B=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),xB=4;function d8e(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let _=1;_<r;_++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let y=0;for(let _=0;_<d;_++)y=y<<1|u();let w=[],v=0,b=h;for(;;){let _=Math.floor(((y-v+1)*s-1)/b),C=0,A=r;for(;A-C>1;){let k=C+A>>>1;_<i[k]?A=k:C=k}if(C==0)break;w.push(C);let T=v+Math.floor(b*i[C]/s),S=v+Math.floor(b*i[C+1]/s)-1;for(;!((T^S)&f);)y=y<<1&g|u(),T=T<<1&g,S=S<<1&g|1;for(;T&~S&p;)y=y&f|y<<1&g>>>1|u(),T=T<<1^f,S=(S^f)<<1|f|1;v=T,b=1+S-T}let x=r-4;return w.map(_=>{switch(_-x){case 3:return x+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return x+256+(t[a++]<<8|t[a++]);case 1:return x+t[a++];default:return _-1}})}function h8e(t){let e=0;return()=>t[e++]}function iV(t){return h8e(d8e(f8e(t)))}function f8e(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function p8e(t){return t&1?~t>>1:t>>1}function g8e(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=p8e(e());return n}function Vb(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function oV(t){return Kb(()=>{let e=Vb(t);if(e.length)return e})}function aV(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(m8e(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(y8e(n,t))}return e.flat()}function Kb(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function cV(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)g8e(t,n).forEach((i,o)=>r[o].push(i));return r}function m8e(t,e){let n=1+e(),r=e(),s=Kb(e);return cV(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function y8e(t,e){let n=1+e();return cV(n,1+t,e).map(s=>[s[0],s.slice(1)])}function w8e(t){let e=[],n=Vb(t);return s(r([]),[]),e;function r(i){let o=t(),a=Kb(()=>{let c=Vb(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function b8e(t){return t.toString(16).toUpperCase().padStart(2,"0")}function lV(t){return`{${b8e(t)}}`}function v8e(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function ny(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function E8e(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var _8e="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Qb=44032,Dx=4352,$x=4449,Ux=4519,uV=19,dV=21,ry=28,Bx=dV*ry,x8e=uV*Bx,C8e=Qb+x8e,A8e=Dx+uV,S8e=$x+dV,I8e=Ux+ry;function j0(t){return t>>24&255}function hV(t){return t&16777215}let dk,CB,hk,l_;function T8e(){let t=iV(_8e);dk=new Map(oV(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),CB=new Set(Vb(t)),hk=new Map,l_=new Map;for(let[e,n]of aV(t)){if(!CB.has(e)&&n.length==2){let[r,s]=n,i=l_.get(r);i||(i=new Map,l_.set(r,i)),i.set(s,e)}hk.set(e,n.reverse())}}function fV(t){return t>=Qb&&t<C8e}function N8e(t,e){if(t>=Dx&&t<A8e&&e>=$x&&e<S8e)return Qb+(t-Dx)*Bx+(e-$x)*ry;if(fV(t)&&e>Ux&&e<I8e&&(t-Qb)%ry==0)return t+(e-Ux);{let n=l_.get(t);return n&&(n=n.get(e),n)?n:-1}}function pV(t){dk||T8e();let e=[],n=[],r=!1;function s(i){let o=dk.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(fV(i)){let o=i-Qb,a=o/Bx|0,c=o%Bx/ry|0,l=o%ry;s(Dx+a),s($x+c),l>0&&s(Ux+l)}else{let o=hk.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=j0(e[0]);for(let o=1;o<e.length;o++){let a=j0(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=j0(e[--c]),i<=a))break}i=j0(e[o])}}return e}function P8e(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=j0(i),a=hV(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=N8e(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function gV(t){return pV(t).map(hV)}function k8e(t){return P8e(pV(t))}const AB=45,mV=".",yV=65039,wV=1,Lx=t=>Array.from(t);function Jb(t,e){return t.P.has(e)||t.Q.has(e)}class O8e extends Array{get is_emoji(){return!0}}let fk,bV,xh,pk,vV,Sg,II,jp,Yd,SB,gk;function P3(){if(fk)return;let t=iV(u8e);const e=()=>Vb(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));fk=new Map(aV(t)),bV=n(),xh=e(),pk=new Set(e().map(u=>xh[u])),xh=new Set(xh),vV=n(),n();let s=oV(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};Sg=Kb(u=>{let d=Kb(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=ny(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),II=n(),jp=new Map;let a=e().concat(Lx(II)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),II.has(u)||jp.set(u,f)});for(let{V:u,M:d}of new Set(jp.values())){let h=[];for(let p of u){let g=Sg.filter(w=>Jb(w,p)),y=h.find(({G:w})=>g.some(v=>w.has(v)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(p),r(y.G,g)}let f=h.flatMap(p=>Lx(p.G));for(let{G:p,V:g}of h){let y=new Set(f.filter(w=>!p.has(w)));for(let w of g)d.set(w,y)}}Yd=new Set;let c=new Set;const l=u=>Yd.has(u)?c.add(u):Yd.add(u);for(let u of Sg){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Yd)!jp.has(u)&&!c.has(u)&&jp.set(u,wV);r(Yd,gV(Yd)),SB=w8e(t).map(u=>O8e.from(u)).sort(E8e),gk=new Map;for(let u of SB){let d=[gk];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===yV?d.push(...f):d=f}for(let h of d)h.V=u}}function k3(t){return(EV(t)?"":`${O3(PA([t]))} `)+lV(t)}function O3(t){return`"${t}"`}function R8e(t){if(t.length>=4&&t[2]==AB&&t[3]==AB)throw new Error(`invalid label extension: "${ny(t.slice(0,4))}"`)}function D8e(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function $8e(t){let e=t[0],n=_B.get(e);if(n)throw _w(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=_B.get(e);if(o){if(s==i)throw _w(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw _w(`trailing ${n}`)}function PA(t,e=1/0,n=lV){let r=[];U8e(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];EV(a)&&(r.push(ny(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(ny(t.slice(s,i))),r.join("")}function U8e(t){return P3(),xh.has(t)}function EV(t){return P3(),vV.has(t)}function B8e(t){return F8e(L8e(t,k8e,W8e))}function L8e(t,e,n){if(!t)return[];P3();let r=0;return t.split(mV).map(s=>{let i=v8e(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=H8e(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(D8e(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))R8e(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(xh.has(u[0]))throw _w("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&xh.has(y[0]))throw _w(`emoji + combining mark: "${ny(a[g-1])} + ${PA([y[0]])}"`)}$8e(u);let f=Lx(new Set(h)),[p]=j8e(f);z8e(p,h),M8e(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function M8e(t,e){let n,r=[];for(let s of e){let i=jp.get(s);if(i===wV)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):Lx(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>Jb(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function j8e(t){let e=Sg;for(let n of t){let r=e.filter(s=>Jb(s,n));if(!r.length)throw Sg.some(s=>Jb(s,n))?xV(e[0],n):_V(n);if(e=r,r.length==1)break}return e}function F8e(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${O3(PA(e,63))}: ${s}`)}return ny(r)}).join(mV)}function _V(t){return new Error(`disallowed character: ${k3(t)}`)}function xV(t,e){let n=k3(e),r=Sg.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function _w(t){return new Error(`illegal placement: ${t}`)}function z8e(t,e){for(let n of e)if(!Jb(t,n))throw xV(t,n);if(t.M){let n=gV(e);for(let r=1,s=n.length;r<s;r++)if(pk.has(n[r])){let i=r+1;for(let o;i<s&&pk.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${k3(o)}`);if(i-r>xB)throw new Error(`excessive non-spacing marks: ${O3(PA(n.slice(r-1,i)))} (${i-r}/${xB})`);r=i}}}function H8e(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=q8e(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(Yd.has(o))s.push(o);else{let a=fk.get(o);if(a)s.push(...a);else if(!bV.has(o))throw _V(o)}}}return s.length&&r.push(e(s)),r}function W8e(t){return t.filter(e=>e!=yV)}function q8e(t,e){let n=gk,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const CV=new Uint8Array(32);CV.fill(0);function IB(t){return G(t.length!==0,"invalid ENS name; empty component","comp",t),t}function AV(t){const e=Gc(G8e(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(IB(e.slice(r,s))),r=s+1);return G(r<e.length,"invalid ENS name; empty component","name",t),n.push(IB(e.slice(r))),n}function G8e(t){try{if(t.length===0)throw new Error("empty label");return B8e(t)}catch(e){G(!1,`invalid ENS name (${e.message})`,"name",t)}}function mk(t){G(typeof t=="string","invalid ENS name; not a string","name",t),G(t.length,"invalid ENS name (empty label)","name",t);let e=CV;const n=AV(t);for(;n.length;)e=Wn(Nn([e,Wn(n.pop())]));return Se(e)}function V8e(t,e){const n=e;return G(n<=255,"DNS encoded label cannot exceed 255","length",n),Se(Nn(AV(t).map(r=>{G(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const SV=new Uint8Array(32);SV.fill(0);const K8e=BigInt(-1),IV=BigInt(0),TV=BigInt(1),Q8e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function J8e(t){const e=ct(t),n=e.length%32;return n?Nn([e,SV.slice(n)]):Se(e)}const Y8e=vd(TV,32),Z8e=vd(IV,32),TB={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},TI=["name","version","chainId","verifyingContract","salt"];function NB(t){return function(e){return G(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const X8e={name:NB("name"),version:NB("version"),chainId:function(t){const e=De(t,"domain.chainId");return G(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):jo(e)},verifyingContract:function(t){try{return Ut(t).toLowerCase()}catch{}G(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=ct(t,"domain.salt");return G(e.length===32,'invalid domain value "salt"',"domain.salt",t),Se(e)}};function NI(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);G(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Eh(Q8e,n?r-1:r),i=n?(s+TV)*K8e:IV;return function(o){const a=De(o,"value");return G(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),vd(n?dG(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return G(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=ct(r);return G(s.length===n,`invalid length for ${t}`,"value",r),J8e(r)}}}switch(t){case"address":return function(e){return il(Ut(e),32)};case"bool":return function(e){return e?Y8e:Z8e};case"bytes":return function(e){return Wn(e)};case"string":return function(e){return Of(e)}}return null}function PB(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function CE(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var cv,Ic,dm,Wx,NV;const Hi=class Hi{constructor(e){q(this,Wx);J(this,"primaryType");q(this,cv);q(this,Ic);q(this,dm);O(this,Ic,new Map),O(this,dm,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=CE(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),O(this,cv,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){G(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=CE(u.type).base;G(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!NI(d)&&(G(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);G(o.length!==0,"missing primary type","types",e),G(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Ge(this,{primaryType:o[0]});function a(c,l){G(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),E(this,Ic).set(c,PB(c,i[c])+u.map(d=>PB(d,i[d])).join(""))}}get types(){return JSON.parse(E(this,cv))}getEncoder(e){let n=E(this,dm).get(e);return n||(n=X(this,Wx,NV).call(this,e),E(this,dm).set(e,n)),n}encodeType(e){const n=E(this,Ic).get(e);return G(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Wn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(NI(e))return r(e,n);const s=CE(e).array;if(s)return G(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});G(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Hi(e)}static getPrimaryType(e){return Hi.from(e).primaryType}static hashStruct(e,n,r){return Hi.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=TB[r];G(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>TI.indexOf(r.name)-TI.indexOf(s.name)),Hi.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Nn(["0x1901",Hi.hashDomain(e),Hi.from(n).hash(r)])}static hash(e,n,r){return Wn(Hi.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!on(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Hi.from(n);o.visit(r,(a,c)=>(a==="address"&&!on(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){Hi.hashDomain(e);const s={},i=[];TI.forEach(c=>{const l=e[c];l!=null&&(s[c]=X8e[c](l),i.push({name:c,type:TB[c]}))});const o=Hi.from(n);n=o.types;const a=Object.assign({},n);return G(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Se(ct(l));if(c.match(/^u?int/))return De(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return G(typeof l=="string","invalid string","value",l),l}G(!1,"unsupported type","type",c)})}}};cv=new WeakMap,Ic=new WeakMap,dm=new WeakMap,Wx=new WeakSet,NV=function(e){{const s=NI(e);if(s)return s}const n=CE(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{G(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return E(this,Ic).has(s)&&(a=a.map(Wn)),Wn(Nn(a))}}const r=this.types[e];if(r){const s=Of(E(this,Ic).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return E(this,Ic).has(c)?Wn(l):l});return o.unshift(s),Nn(o)}}G(!1,`unknown type: ${e}`,"type",e)};let Mx=Hi;function gs(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const e5e="external public payable override",t5e=gs(e5e.split(" ")),PV="constant external internal payable private public pure view override",n5e=gs(PV.split(" ")),kV="constructor error event fallback function receive struct",OV=gs(kV.split(" ")),RV="calldata memory storage payable indexed",r5e=gs(RV.split(" ")),s5e="tuple returns",i5e=[kV,RV,s5e,PV].join(" "),o5e=gs(i5e.split(" ")),a5e={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},c5e=new RegExp("^(\\s*)"),l5e=new RegExp("^([0-9]+)"),u5e=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),DV=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),$V=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Cr,Ro,lv,yk;const qx=class qx{constructor(e){q(this,lv);q(this,Cr);q(this,Ro);O(this,Cr,0),O(this,Ro,e.slice())}get offset(){return E(this,Cr)}get length(){return E(this,Ro).length-E(this,Cr)}clone(){return new qx(E(this,Ro))}reset(){O(this,Cr,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=X(this,lv,yk).call(this,E(this,Cr)+1,e.match+1);return O(this,Cr,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;E(this,Cr)<e.match-1;){const r=this.peek().linkNext;n.push(X(this,lv,yk).call(this,E(this,Cr)+1,r)),O(this,Cr,r)}return O(this,Cr,e.match+1),n}peek(){if(E(this,Cr)>=E(this,Ro).length)throw new Error("out-of-bounds");return E(this,Ro)[E(this,Cr)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return ml(this,Cr)._++,e}toString(){const e=[];for(let n=E(this,Cr);n<E(this,Ro).length;n++){const r=E(this,Ro)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Cr=new WeakMap,Ro=new WeakMap,lv=new WeakSet,yk=function(e=0,n=0){return new qx(E(this,Ro).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let ea=qx;function Pd(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(c5e);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=a5e[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=it(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(u5e),a){if(c.text=a[1],i+=c.text.length,o5e.has(c.text)){c.type="KEYWORD";continue}if(c.text.match($V)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(l5e),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new ea(e.map(o=>Object.freeze(o)))}function kB(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function kA(t,e){if(e.peekKeyword(OV)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function ol(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function UV(t){let e=ol(t,n5e);return kB(e,gs("constant payable nonpayable".split(" "))),kB(e,gs("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Vc(t,e){return t.popParams().map(n=>Pr.from(n,e))}function BV(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return De(t.pop().text);throw new Error("invalid gas")}return null}function Rf(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const d5e=new RegExp(/^(.*)\[([0-9]*)\]$/);function OB(t){const e=t.match($V);if(G(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);G(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);G(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const bn={},ni=Symbol.for("_ethers_internal"),RB="_ParamTypeInternal",DB="_ErrorInternal",$B="_EventInternal",UB="_ConstructorInternal",BB="_FallbackInternal",LB="_FunctionInternal",MB="_StructInternal";var hm,u_;const Wi=class Wi{constructor(e,n,r,s,i,o,a,c){q(this,hm);J(this,"name");J(this,"type");J(this,"baseType");J(this,"indexed");J(this,"components");J(this,"arrayLength");J(this,"arrayChildren");if(Qv(e,bn,"ParamType"),Object.defineProperty(this,ni,{value:RB}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Ge(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return X(this,hm,u_).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(Wi.isParamType(e))return e;if(typeof e=="string")try{return Wi.from(Pd(e),n)}catch{G(!1,"invalid param type","obj",e)}else if(e instanceof ea){let a="",c="",l=null;ol(e,gs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>Wi.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=OB(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new Wi(bn,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(ol(e,r5e).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Wi(bn,p,a,c,h,l,d,u)}const r=e.name;G(!r||typeof r=="string"&&r.match(DV),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(G(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(d5e);if(o){const a=parseInt(o[2]||"-1"),c=Wi.from({type:o[1],components:e.components});return new Wi(bn,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>Wi.from(l)):null;return new Wi(bn,r||"",i,"tuple",s,a,null,null)}return i=OB(e.type),new Wi(bn,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[ni]===RB}};hm=new WeakSet,u_=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;X(u=o,hm,u_).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;X(u=o[l],hm,u_).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Pr=Wi;class Df{constructor(e,n,r){J(this,"type");J(this,"inputs");Qv(e,bn,"Fragment"),r=Object.freeze(r.slice()),Ge(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Df.from(JSON.parse(e))}catch{}return Df.from(Pd(e))}if(e instanceof ea)switch(e.peekKeyword(OV)){case"constructor":return jc.from(e);case"error":return Vs.from(e);case"event":return Da.from(e);case"fallback":case"receive":return vc.from(e);case"function":return $a.from(e);case"struct":return lf.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return jc.from(e);case"error":return Vs.from(e);case"event":return Da.from(e);case"fallback":case"receive":return vc.from(e);case"function":return $a.from(e);case"struct":return lf.from(e)}oe(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}G(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return jc.isFragment(e)}static isError(e){return Vs.isFragment(e)}static isEvent(e){return Da.isFragment(e)}static isFunction(e){return $a.isFragment(e)}static isStruct(e){return lf.isFragment(e)}}class OA extends Df{constructor(n,r,s,i){super(n,r,i);J(this,"name");G(typeof s=="string"&&s.match(DV),"invalid identifier","name",s),i=Object.freeze(i.slice()),Ge(this,{name:s})}}function Yb(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Vs extends OA{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,ni,{value:DB})}get selector(){return Of(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+Yb(e,this.inputs)),n.join(" ")}static from(e){if(Vs.isFragment(e))return e;if(typeof e=="string")return Vs.from(Pd(e));if(e instanceof ea){const n=kA("error",e),r=Vc(e);return Rf(e),new Vs(bn,n,r)}return new Vs(bn,e.name,e.inputs?e.inputs.map(Pr.from):[])}static isFragment(e){return e&&e[ni]===DB}}class Da extends OA{constructor(n,r,s,i){super(n,"event",r,s);J(this,"anonymous");Object.defineProperty(this,ni,{value:$B}),Ge(this,{anonymous:i})}get topicHash(){return Of(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+Yb(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Pr.from(i)),new Da(bn,n,r,!1).topicHash}static from(n){if(Da.isFragment(n))return n;if(typeof n=="string")try{return Da.from(Pd(n))}catch{G(!1,"invalid event fragment","obj",n)}else if(n instanceof ea){const r=kA("event",n),s=Vc(n,!0),i=!!ol(n,gs(["anonymous"])).has("anonymous");return Rf(n),new Da(bn,r,s,i)}return new Da(bn,n.name,n.inputs?n.inputs.map(r=>Pr.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[ni]===$B}}class jc extends Df{constructor(n,r,s,i,o){super(n,r,s);J(this,"payable");J(this,"gas");Object.defineProperty(this,ni,{value:UB}),Ge(this,{payable:i,gas:o})}format(n){if(oe(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${Yb(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(jc.isFragment(n))return n;if(typeof n=="string")try{return jc.from(Pd(n))}catch{G(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof ea){ol(n,gs(["constructor"]));const r=Vc(n),s=!!ol(n,t5e).has("payable"),i=BV(n);return Rf(n),new jc(bn,"constructor",r,s,i)}return new jc(bn,"constructor",n.inputs?n.inputs.map(Pr.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[ni]===UB}}class vc extends Df{constructor(n,r,s){super(n,"fallback",r);J(this,"payable");Object.defineProperty(this,ni,{value:BB}),Ge(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(vc.isFragment(n))return n;if(typeof n=="string")try{return vc.from(Pd(n))}catch{G(!1,"invalid fallback fragment","obj",n)}else if(n instanceof ea){const r=n.toString(),s=n.peekKeyword(gs(["fallback","receive"]));if(G(s,"type must be fallback or receive","obj",r),n.popKeyword(gs(["fallback","receive"]))==="receive"){const c=Vc(n);return G(c.length===0,"receive cannot have arguments","obj.inputs",c),ol(n,gs(["payable"])),Rf(n),new vc(bn,[],!0)}let o=Vc(n);o.length?G(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Pr.from("bytes")];const a=UV(n);if(G(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),ol(n,gs(["returns"])).has("returns")){const c=Vc(n);G(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Rf(n),new vc(bn,o,a==="payable")}if(n.type==="receive")return new vc(bn,[],!0);if(n.type==="fallback"){const r=[Pr.from("bytes")],s=n.stateMutability==="payable";return new vc(bn,r,s)}G(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[ni]===BB}}class $a extends OA{constructor(n,r,s,i,o,a){super(n,"function",r,i);J(this,"constant");J(this,"outputs");J(this,"stateMutability");J(this,"payable");J(this,"gas");Object.defineProperty(this,ni,{value:LB}),o=Object.freeze(o.slice()),Ge(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Of(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+Yb(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Yb(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Pr.from(i)),new $a(bn,n,"view",r,[],null).selector}static from(n){if($a.isFragment(n))return n;if(typeof n=="string")try{return $a.from(Pd(n))}catch{G(!1,"invalid function fragment","obj",n)}else if(n instanceof ea){const s=kA("function",n),i=Vc(n),o=UV(n);let a=[];ol(n,gs(["returns"])).has("returns")&&(a=Vc(n));const c=BV(n);return Rf(n),new $a(bn,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new $a(bn,n.name,r,n.inputs?n.inputs.map(Pr.from):[],n.outputs?n.outputs.map(Pr.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[ni]===LB}}class lf extends OA{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,ni,{value:MB})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return lf.from(Pd(e))}catch{G(!1,"invalid struct fragment","obj",e)}else if(e instanceof ea){const n=kA("struct",e),r=Vc(e);return Rf(e),new lf(bn,n,r)}return new lf(bn,e.name,e.inputs?e.inputs.map(Pr.from):[])}static isFragment(e){return e&&e[ni]===MB}}const sa=new Map;sa.set(0,"GENERIC_PANIC");sa.set(1,"ASSERT_FALSE");sa.set(17,"OVERFLOW");sa.set(18,"DIVIDE_BY_ZERO");sa.set(33,"ENUM_RANGE_ERROR");sa.set(34,"BAD_STORAGE_DATA");sa.set(49,"STACK_UNDERFLOW");sa.set(50,"ARRAY_RANGE_ERROR");sa.set(65,"OUT_OF_MEMORY");sa.set(81,"UNINITIALIZED_FUNCTION_CALL");const h5e=new RegExp(/^bytes([0-9]*)$/),f5e=new RegExp(/^(u?int)([0-9]*)$/);let PI=null,jB=1024;function p5e(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=ct(n);if(n=Se(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Se(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Se(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${sa.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Ut(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Ut(e.from)),fn(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var xu,Fp;const Gx=class Gx{constructor(){q(this,xu)}getDefaultValue(e){const n=e.map(s=>X(this,xu,Fp).call(this,Pr.from(s)));return new xE(n,"_").defaultValue()}encode(e,n){cG(n.length,e.length,"types/values length mismatch");const r=e.map(o=>X(this,xu,Fp).call(this,Pr.from(o))),s=new xE(r,"_"),i=new rk;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>X(this,xu,Fp).call(this,Pr.from(o)));return new xE(s,"_").decode(new sk(n,r,jB))}static _setDefaultMaxInflation(e){G(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),jB=e}static defaultAbiCoder(){return PI==null&&(PI=new Gx),PI}static getBuiltinCallException(e,n,r){return p5e(e,n,r,Gx.defaultAbiCoder())}};xu=new WeakSet,Fp=function(e){if(e.isArray())return new O$e(X(this,xu,Fp).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new xE(e.components.map(r=>X(this,xu,Fp).call(this,r)),e.name);switch(e.baseType){case"address":return new P$e(e.name);case"bool":return new R$e(e.name);case"string":return new z$e(e.name);case"bytes":return new D$e(e.name);case"":return new B$e(e.name)}let n=e.type.match(f5e);if(n){let r=parseInt(n[2]||"256");return G(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new F$e(r/8,n[1]==="int",e.name)}if(n=e.type.match(h5e),n){let r=parseInt(n[1]);return G(r!==0&&r<=32,"invalid bytes length","param",e),new $$e(r,e.name)}G(!1,"invalid type","type",e.type)};let Zb=Gx;class g5e{constructor(e,n,r){J(this,"fragment");J(this,"name");J(this,"signature");J(this,"topic");J(this,"args");const s=e.name,i=e.format();Ge(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class m5e{constructor(e,n,r,s){J(this,"fragment");J(this,"name");J(this,"args");J(this,"signature");J(this,"selector");J(this,"value");const i=e.name,o=e.format();Ge(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class y5e{constructor(e,n,r){J(this,"fragment");J(this,"name");J(this,"args");J(this,"signature");J(this,"selector");const s=e.name,i=e.format();Ge(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class FB{constructor(e){J(this,"hash");J(this,"_isIndexed");Ge(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const zB={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},HB={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&zB[t.toString()]&&(e=zB[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var xa,Ca,Aa,Qr,Ha,d_,h_;const ah=class ah{constructor(e){q(this,Ha);J(this,"fragments");J(this,"deploy");J(this,"fallback");J(this,"receive");q(this,xa);q(this,Ca);q(this,Aa);q(this,Qr);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,O(this,Aa,new Map),O(this,xa,new Map),O(this,Ca,new Map);const r=[];for(const o of n)try{r.push(Df.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Ge(this,{fragments:Object.freeze(r)});let s=null,i=!1;O(this,Qr,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Ge(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(G(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=E(this,Aa);break;case"event":c=E(this,Ca);break;case"error":c=E(this,xa);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Ge(this,{deploy:jc.from("constructor()")}),Ge(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return Zb.defaultAbiCoder()}getFunctionName(e){const n=X(this,Ha,d_).call(this,e,null,!1);return G(n,"no matching function","key",e),n.name}hasFunction(e){return!!X(this,Ha,d_).call(this,e,null,!1)}getFunction(e,n){return X(this,Ha,d_).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(E(this,Aa).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,Aa).get(s),r)}}getEventName(e){const n=X(this,Ha,h_).call(this,e,null,!1);return G(n,"no matching event","key",e),n.name}hasEvent(e){return!!X(this,Ha,h_).call(this,e,null,!1)}getEvent(e,n){return X(this,Ha,h_).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(E(this,Ca).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,Ca).get(s),r)}}getError(e,n){if(on(e)){const s=e.toLowerCase();if(HB[s])return Vs.from(HB[s].signature);for(const i of E(this,xa).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of E(this,xa))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Vs.from("error Error(string)"):e==="Panic"?Vs.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");G(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Vs.from(e).format(),e==="Error(string)")return Vs.from("error Error(string)");if(e==="Panic(uint256)")return Vs.from("error Panic(uint256)");const r=E(this,xa).get(e);return r||null}forEachError(e){const n=Array.from(E(this,xa).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,xa).get(s),r)}}_decodeParams(e,n){return E(this,Qr).decode(e,n)}_encodeParams(e,n){return E(this,Qr).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);G(r,"unknown error","fragment",e),e=r}return G(Sn(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Sn(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);G(r,"unknown error","fragment",e),e=r}return Nn([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);G(r,"unknown function","fragment",e),e=r}return G(Sn(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Sn(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);G(r,"unknown function","fragment",e),e=r}return Nn([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);G(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=hs(n);if(s.length%32===0)try{return E(this,Qr).decode(e.outputs,s)}catch{r="could not decode result data"}oe(!1,r,"BAD_DATA",{value:Se(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=ct(e,"data"),s=Zb.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Se(r.slice(0,4)),c=this.getError(a);if(c)try{const l=E(this,Qr).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);G(r,"unknown function","fragment",e),e=r}return Se(E(this,Qr).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);G(i,"unknown event","eventFragment",e),e=i}oe(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Of(o):i.type==="bytes"?Wn(Se(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=vd(o):i.type.match(/^bytes/)?o=O3e(o,32):i.type==="address"&&E(this,Qr).encode(["address"],[o]),il(Se(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){G(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?G(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);G(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),G(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Of(c));else if(o.type==="bytes")r.push(Wn(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(E(this,Qr).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:E(this,Qr).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);G(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;G(on(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Pr.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?E(this,Qr).decode(s,Nn(r)):null,c=E(this,Qr).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new FB(null);else if(o[p])g=new FB(a[h++]);else try{g=a[h++]}catch(y){g=y}else try{g=c[d++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),Ym.fromItems(l,u)}parseTransaction(e){const n=ct(e.data,"tx.data"),r=De(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Se(n.slice(0,4)));if(!s)return null;const i=E(this,Qr).decode(s.inputs,n.slice(4));return new m5e(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new g5e(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Se(e),r=this.getError(Sn(n,0,4));if(!r)return null;const s=E(this,Qr).decode(r.inputs,Sn(n,4));return new y5e(r,r.selector,s)}static from(e){return e instanceof ah?e:typeof e=="string"?new ah(JSON.parse(e)):typeof e.formatJson=="function"?new ah(e.formatJson()):typeof e.format=="function"?new ah(e.format("json")):new ah(e)}};xa=new WeakMap,Ca=new WeakMap,Aa=new WeakMap,Qr=new WeakMap,Ha=new WeakSet,d_=function(e,n,r){if(on(e)){const i=e.toLowerCase();for(const o of E(this,Aa).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,Aa))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;Xr.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(Xr.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");G(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,Aa).get($a.from(e).format());return s||null},h_=function(e,n,r){if(on(e)){const i=e.toLowerCase();for(const o of E(this,Ca).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,Ca))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(Xr.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");G(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,Ca).get(Da.from(e).format());return s||null};let wk=ah;const LV=BigInt(0);function Ig(t){return t??null}function Dn(t){return t==null?null:t.toString()}class WB{constructor(e,n,r){J(this,"gasPrice");J(this,"maxFeePerGas");J(this,"maxPriorityFeePerGas");Ge(this,{gasPrice:Ig(e),maxFeePerGas:Ig(n),maxPriorityFeePerGas:Ig(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Dn(e),maxFeePerGas:Dn(n),maxPriorityFeePerGas:Dn(r)}}}function jx(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Se(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=De(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=it(t[s],`request.${s}`));return t.accessList&&(e.accessList=Zf(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>v3(s)?Se(s):Object.assign({},s))),e}var Tc;class w5e{constructor(e,n){J(this,"provider");J(this,"number");J(this,"hash");J(this,"timestamp");J(this,"parentHash");J(this,"parentBeaconBlockRoot");J(this,"nonce");J(this,"difficulty");J(this,"gasLimit");J(this,"gasUsed");J(this,"stateRoot");J(this,"receiptsRoot");J(this,"blobGasUsed");J(this,"excessBlobGas");J(this,"miner");J(this,"prevRandao");J(this,"extraData");J(this,"baseFeePerGas");q(this,Tc);O(this,Tc,e.transactions.map(r=>typeof r!="string"?new Xb(r,n):r)),Ge(this,{provider:n,hash:Ig(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Ig(e.prevRandao),extraData:e.extraData,baseFeePerGas:Ig(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return E(this,Tc).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=E(this,Tc).slice();return e.length===0?[]:(oe(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Dn(e),difficulty:Dn(n),extraData:r,gasLimit:Dn(s),gasUsed:Dn(i),blobGasUsed:Dn(this.blobGasUsed),excessBlobGas:Dn(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return E(this,Tc).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=E(this,Tc)[e];else{const r=e.toLowerCase();for(const s of E(this,Tc))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;G(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return b5e(this)}}Tc=new WeakMap;class Xv{constructor(e,n){J(this,"provider");J(this,"transactionHash");J(this,"blockHash");J(this,"blockNumber");J(this,"removed");J(this,"address");J(this,"data");J(this,"topics");J(this,"index");J(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Ge(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return oe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return oe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return oe(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return v5e(this)}}var uv;class MV{constructor(e,n){J(this,"provider");J(this,"to");J(this,"from");J(this,"contractAddress");J(this,"hash");J(this,"index");J(this,"blockHash");J(this,"blockNumber");J(this,"logsBloom");J(this,"gasUsed");J(this,"blobGasUsed");J(this,"cumulativeGasUsed");J(this,"gasPrice");J(this,"blobGasPrice");J(this,"type");J(this,"status");J(this,"root");q(this,uv);O(this,uv,Object.freeze(e.logs.map(s=>new Xv(s,n))));let r=LV;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Ge(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return E(this,uv)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Dn(this.cumulativeGasUsed),from:n,gasPrice:Dn(this.gasPrice),blobGasUsed:Dn(this.blobGasUsed),blobGasPrice:Dn(this.blobGasPrice),gasUsed:Dn(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return FV(this)}reorderedEvent(e){return oe(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),jV(this,e)}}uv=new WeakMap;var Cu;const j3=class j3{constructor(e,n){J(this,"provider");J(this,"blockNumber");J(this,"blockHash");J(this,"index");J(this,"hash");J(this,"type");J(this,"to");J(this,"from");J(this,"nonce");J(this,"gasLimit");J(this,"gasPrice");J(this,"maxPriorityFeePerGas");J(this,"maxFeePerGas");J(this,"maxFeePerBlobGas");J(this,"data");J(this,"value");J(this,"chainId");J(this,"signature");J(this,"accessList");J(this,"blobVersionedHashes");J(this,"authorizationList");q(this,Cu);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,O(this,Cu,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Dn(this.chainId),data:l,from:a,gasLimit:Dn(this.gasLimit),gasPrice:Dn(this.gasPrice),hash:s,maxFeePerGas:Dn(this.maxFeePerGas),maxPriorityFeePerGas:Dn(this.maxPriorityFeePerGas),maxFeePerBlobGas:Dn(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Dn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await ls({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=E(this,Cu),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await ls({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<E(this,Cu)&&(o=E(this,Cu)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const w=await g.getTransaction(y);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(w.hash);if(v==null||h-v.blockNumber+1<r)return;let b="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?b="repriced":w.data==="0x"&&w.from===w.to&&w.value===LV&&(b="cancelled"),oe(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:b==="replaced"||b==="cancelled",reason:b,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:v})}}o++}},l=h=>{if(h==null||h.status!==0)return h;oe(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(w=>w())};if(p.push(()=>{a=!0}),s>0){const w=setTimeout(()=>{g(),f(fn("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(w)})}const y=async w=>{if(await w.confirmations()>=r){g();try{h(l(w))}catch(v){f(v)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const w=async()=>{try{await c()}catch(v){if(Tr(v,"TRANSACTION_REPLACED")){g(),f(v);return}}a||this.provider.once("block",w)};p.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return oe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),FV(this)}reorderedEvent(e){return oe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),oe(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),jV(this,e)}replaceableTransaction(e){G(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new j3(this,this.provider);return O(n,Cu,e),n}};Cu=new WeakMap;let Xb=j3;function b5e(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function jV(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function FV(t){return{orphan:"drop-transaction",tx:t}}function v5e(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class R3 extends Xv{constructor(n,r,s){super(n,n.provider);J(this,"interface");J(this,"fragment");J(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);Ge(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class zV extends Xv{constructor(n,r){super(n,n.provider);J(this,"error");Ge(this,{error:r})}}var fm;class E5e extends MV{constructor(n,r,s){super(s,r);q(this,fm);O(this,fm,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?E(this,fm).getEvent(n.topics[0]):null;if(r)try{return new R3(n,E(this,fm),r)}catch(s){return new zV(n,s)}return n})}}fm=new WeakMap;var dv;class D3 extends Xb{constructor(n,r,s){super(s,r);q(this,dv);O(this,dv,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new E5e(E(this,dv),this.provider,s)}}dv=new WeakMap;class HV extends hG{constructor(n,r,s,i){super(n,r,s);J(this,"log");Ge(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class _5e extends HV{constructor(e,n,r,s,i){super(e,n,r,new R3(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Ge(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const qB=BigInt(0);function WV(t){return t&&typeof t.call=="function"}function qV(t){return t&&typeof t.estimateGas=="function"}function RA(t){return t&&typeof t.resolveName=="function"}function GV(t){return t&&typeof t.sendTransaction=="function"}function VV(t){if(t!=null){if(RA(t))return t;if(t.provider)return t.provider}}var hv;class x5e{constructor(e,n,r){q(this,hv);J(this,"fragment");if(Ge(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=$f(e.runner,"resolveName"),i=RA(s)?s:null;O(this,hv,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>ps(h,i))):ps(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return E(this,hv)}}hv=new WeakMap;function $f(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Ch(t){return t==null?null:t.provider||null}async function KV(t,e){const n=Xr.dereference(t,"overrides");G(typeof n=="object","invalid overrides parameter","overrides",t);const r=jx(n);return G(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),G(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function C5e(t,e,n){const r=$f(t,"resolveName"),s=RA(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=Xr.dereference(c,a),a==="address"?ps(c,s):c))))}function A5e(t){const e=async function(o){const a=await KV(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await ps(a.from,VV(t.runner)));const c=t.interface,l=De(a.value||qB,"overrides.value")===qB,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&G(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),G(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return G(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),G(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=$f(t.runner,"call");oe(WV(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw b3(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;oe(GV(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Ch(t.runner);return new D3(t.interface,l,c)},s=async function(o){const a=$f(t.runner,"estimateGas");return oe(qV(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return Ge(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function S5e(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return oe(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await KV(l.pop()),d.from&&(d.from=await ps(d.from,VV(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await C5e(t.runner,u.inputs,l);return Object.assign({},d,await ls({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;oe(GV(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Ch(t.runner);return new D3(t.interface,h,d)},o=async function(...l){const u=$f(t.runner,"estimateGas");return oe(qV(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=$f(t.runner,"call");oe(WV(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw b3(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return Ge(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return oe(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function I5e(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return oe(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new x5e(t,n(...s),s)};return Ge(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return oe(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const Fx=Symbol.for("_ethersInternal_contract"),QV=new WeakMap;function T5e(t,e){QV.set(t[Fx],e)}function hi(t){return QV.get(t[Fx])}function N5e(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function $3(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(on(o,32))return o;const a=t.interface.getEvent(o);return G(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?on(e,32)?n=[e]:(r=t.interface.getEvent(e),G(r,"unknown fragment","event",e),n=[r.topicHash]):N5e(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):G(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function F0(t,e){const{subs:n}=hi(t);return n.get((await $3(t,e)).tag)||null}async function GB(t,e,n){const r=Ch(t.runner);oe(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await $3(t,n),{addr:a,subs:c}=hi(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=y=>{let w=s;if(w==null)try{w=t.interface.getEvent(y.topics[0])}catch{}if(w){const v=w,b=s?t.interface.decodeEventLog(s,y.data,y.topics):[];vk(t,n,b,x=>new _5e(t,x,n,v,y))}else vk(t,n,[],v=>new HV(t,v,n,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),r.off(d,h)}},c.set(i,l)}return l}let bk=Promise.resolve();async function P5e(t,e,n,r){await bk;const s=await F0(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),hi(t).subs.delete(s.tag)),i>0}async function vk(t,e,n,r){try{await bk}catch{}const s=P5e(t,e,n,r);return bk=s,await s}const AE=["then"];var gL;gL=Fx;const xw=class xw{constructor(e,n,r,s){J(this,"target");J(this,"interface");J(this,"runner");J(this,"filters");J(this,gL);J(this,"fallback");G(typeof e=="string"||eV(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=wk.from(n);Ge(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,Fx,{value:{}});let o,a=null,c=null;if(s){const d=Ch(r);c=new D3(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(on(e))a=e,o=Promise.resolve(e);else{const d=$f(r,"resolveName");if(!RA(d))throw fn("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw fn("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return hi(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return hi(this).addr=d,d});T5e(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||AE.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Tr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>AE.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return Ge(this,{filters:u}),Ge(this,{fallback:i.receive||i.fallback?A5e(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||AE.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Tr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||AE.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new xw(this.target,this.interface,e)}attach(e){return new xw(e,this.interface,this.runner)}async getAddress(){return await hi(this).addrPromise}async getDeployedCode(){const e=Ch(this.runner);oe(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Ch(this.runner);return oe(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return hi(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),S5e(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),I5e(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=hi(this),o=s||await i,{fragment:a,topics:c}=await $3(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Ch(this.runner);return oe(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new R3(d,this.interface,h)}catch(f){return new zV(d,f)}return new Xv(d,u)})}async on(e,n){const r=await GB(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await GB(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await vk(this,e,n,null)}async listenerCount(e){if(e){const s=await F0(this,e);return s?s.listeners.length:0}const{subs:n}=hi(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await F0(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=hi(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await F0(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),hi(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await F0(this,e);if(!n)return this;n.stop(),hi(this).subs.delete(n.tag)}else{const{subs:n}=hi(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends xw{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let Ek=xw;function k5e(){return Ek}class Tg extends k5e(){}function kI(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):G(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class O5e{constructor(e){J(this,"name");Ge(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const JV=new RegExp("^(ipfs)://(.*)$","i"),VB=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),JV,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Au,Gh,Su,zp,Vx,YV;const cg=class cg{constructor(e,n,r){q(this,Su);J(this,"provider");J(this,"address");J(this,"name");q(this,Au);q(this,Gh);Ge(this,{provider:e,address:n,name:r}),O(this,Au,null),O(this,Gh,new Tg(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return E(this,Au)==null&&O(this,Au,(async()=>{try{return await E(this,Gh).supportsInterface("0x9061b923")}catch(e){if(Tr(e,"CALL_EXCEPTION"))return!1;throw O(this,Au,null),e}})()),await E(this,Au)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await X(this,Su,zp).call(this,"addr(bytes32)");return i==null||i===qb?null:i}catch(i){if(Tr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await X(this,Su,zp).call(this,"addr(bytes32,uint)",[i]);if(on(o,20))return Ut(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof O5e&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await X(this,Su,zp).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;oe(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await X(this,Su,zp).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await X(this,Su,zp).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${D3e("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;oe(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<VB.length;r++){const s=n.match(VB[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=kI(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Tg(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",vd(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=kI(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Ed(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const w=f.body;return w&&e.push({type:"!metadata",value:Se(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(JV)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=kI(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return oe(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await X(s=cg,Vx,YV).call(s,e,r);if(i!=null){const o=new cg(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Au=new WeakMap,Gh=new WeakMap,Su=new WeakSet,zp=async function(e,n){n=(n||[]).slice();const r=E(this,Gh).interface;n.unshift(mk(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),oe(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[V8e(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await E(this,Gh)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Tr(i,"CALL_EXCEPTION"))throw i}return null},Vx=new WeakSet,YV=async function(e,n){const r=await cg.getEnsAddress(e);try{const i=await new Tg(r,["function resolver(bytes32) view returns (address)"],e).resolver(mk(n),{enableCcipRead:!0});return i===qb?null:i}catch(s){throw s}return null},q(cg,Vx);let zx=cg;const KB=BigInt(0);function mt(t,e){return function(n){return n==null?e:t(n)}}function ev(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function e1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";oe(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function R5e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}G(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function sy(t){return G(on(t,!0),"invalid data","value",t),t}function Ir(t){return G(on(t,32),"invalid hash","value",t),t}const D5e=e1({address:Ut,blockHash:Ir,blockNumber:it,data:sy,index:it,removed:mt(R5e,!1),topics:ev(Ir),transactionHash:Ir,transactionIndex:it},{index:["logIndex"]});function $5e(t){return D5e(t)}const U5e=e1({hash:mt(Ir),parentHash:Ir,parentBeaconBlockRoot:mt(Ir,null),number:it,timestamp:it,nonce:mt(sy),difficulty:De,gasLimit:De,gasUsed:De,stateRoot:mt(Ir,null),receiptsRoot:mt(Ir,null),blobGasUsed:mt(De,null),excessBlobGas:mt(De,null),miner:mt(Ut),prevRandao:mt(Ir,null),extraData:sy,baseFeePerGas:mt(De)},{prevRandao:["mixHash"]});function B5e(t){const e=U5e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:ZV(n)),e}const L5e=e1({transactionIndex:it,blockNumber:it,transactionHash:Ir,address:Ut,topics:ev(Ir),data:sy,index:it,blockHash:Ir},{index:["logIndex"]});function M5e(t){return L5e(t)}const j5e=e1({to:mt(Ut,null),from:mt(Ut,null),contractAddress:mt(Ut,null),index:it,root:mt(Se),gasUsed:De,blobGasUsed:mt(De,null),logsBloom:mt(sy),blockHash:Ir,hash:Ir,logs:ev(M5e),blockNumber:it,cumulativeGasUsed:De,effectiveGasPrice:mt(De),blobGasPrice:mt(De,null),status:mt(it),type:mt(it,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function F5e(t){return j5e(t)}function ZV(t){t.to&&De(t.to)===KB&&(t.to="0x0000000000000000000000000000000000000000");const e=e1({hash:Ir,index:mt(it,void 0),type:n=>n==="0x"||n==null?0:it(n),accessList:mt(Zf,null),blobVersionedHashes:mt(ev(Ir,!0),null),authorizationList:mt(ev(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Ut(n.address),chainId:De(n.chainId),nonce:De(n.nonce),signature:ti.from(r)}},!1),null),blockHash:mt(Ir,null),blockNumber:mt(it,null),transactionIndex:mt(it,null),from:Ut,gasPrice:mt(De),maxPriorityFeePerGas:mt(De),maxFeePerGas:mt(De),maxFeePerBlobGas:mt(De,null),gasLimit:De,to:mt(Ut,null),value:De,nonce:it,data:sy,creates:mt(Ut,null),chainId:mt(De,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=N$e(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=ti.from(t.signature):e.signature=ti.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&De(e.blockHash)===KB&&(e.blockHash=null),e}const z5e="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class t1{constructor(e){J(this,"name");Ge(this,{name:e})}clone(){return new t1(this.name)}}class DA extends t1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);J(this,"effectiveBlock");J(this,"txBase");J(this,"txCreate");J(this,"txDataZero");J(this,"txDataNonzero");J(this,"txAccessListStorageKey");J(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),G(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Ge(this,s)}clone(){return new DA(this.effectiveBlock,this)}}class $A extends t1{constructor(n,r){super("org.ethers.plugins.network.Ens");J(this,"address");J(this,"targetNetwork");Ge(this,{address:n||z5e,targetNetwork:r??1})}clone(){return new $A(this.address,this.targetNetwork)}}var fv,pv;class H5e extends t1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");q(this,fv);q(this,pv);O(this,fv,n),O(this,pv,r)}get url(){return E(this,fv)}get processFunc(){return E(this,pv)}clone(){return this}}fv=new WeakMap,pv=new WeakMap;const OI=new Map;var pm,gm,Iu;const lg=class lg{constructor(e,n){q(this,pm);q(this,gm);q(this,Iu);O(this,pm,e),O(this,gm,De(n)),O(this,Iu,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return E(this,pm)}set name(e){O(this,pm,e)}get chainId(){return E(this,gm)}set chainId(e){O(this,gm,De(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===De(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===De(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===De(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(E(this,Iu).values())}attachPlugin(e){if(E(this,Iu).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,Iu).set(e.name,e.clone()),this}getPlugin(e){return E(this,Iu).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new lg(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new DA;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=Zf(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(W5e(),e==null)return lg.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=OI.get(e);if(n)return n();if(typeof e=="bigint")return new lg("unknown",e);G(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){G(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new lg(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new $A(e.ensAddress,e.ensNetwork)),n}G(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=OI.get(e);r&&G(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),OI.set(e,n)}};pm=new WeakMap,gm=new WeakMap,Iu=new WeakMap;let Ua=lg;function QB(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function JB(t){return new H5e(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:QB(a.maxFee,9),maxPriorityFeePerGas:QB(a.maxPriorityFee,9)}}catch(i){oe(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let YB=!1;function W5e(){if(YB)return;YB=!0;function t(e,n,r){const s=function(){const i=new Ua(e,n);return r.ensNetwork!=null&&i.attachPlugin(new $A(null,r.ensNetwork)),i.attachPlugin(new DA),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ua.register(e,s),Ua.register(n,s),r.altNames&&r.altNames.forEach(i=>{Ua.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[JB("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[JB("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function _k(t){return JSON.parse(JSON.stringify(t))}var Nc,Gi,Tu,Sa,mm,f_;class q5e{constructor(e){q(this,mm);q(this,Nc);q(this,Gi);q(this,Tu);q(this,Sa);O(this,Nc,e),O(this,Gi,null),O(this,Tu,4e3),O(this,Sa,-2)}get pollingInterval(){return E(this,Tu)}set pollingInterval(e){O(this,Tu,e)}start(){E(this,Gi)||(O(this,Gi,E(this,Nc)._setTimeout(X(this,mm,f_).bind(this),E(this,Tu))),X(this,mm,f_).call(this))}stop(){E(this,Gi)&&(E(this,Nc)._clearTimeout(E(this,Gi)),O(this,Gi,null))}pause(e){this.stop(),e&&O(this,Sa,-2)}resume(){this.start()}}Nc=new WeakMap,Gi=new WeakMap,Tu=new WeakMap,Sa=new WeakMap,mm=new WeakSet,f_=async function(){try{const e=await E(this,Nc).getBlockNumber();if(E(this,Sa)===-2){O(this,Sa,e);return}if(e!==E(this,Sa)){for(let n=E(this,Sa)+1;n<=e;n++){if(E(this,Gi)==null)return;await E(this,Nc).emit("block",n)}O(this,Sa,e)}}catch{}E(this,Gi)!=null&&O(this,Gi,E(this,Nc)._setTimeout(X(this,mm,f_).bind(this),E(this,Tu)))};var Vh,Kh,Nu;class U3{constructor(e){q(this,Vh);q(this,Kh);q(this,Nu);O(this,Vh,e),O(this,Nu,!1),O(this,Kh,n=>{this._poll(n,E(this,Vh))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){E(this,Nu)||(O(this,Nu,!0),E(this,Kh).call(this,-2),E(this,Vh).on("block",E(this,Kh)))}stop(){E(this,Nu)&&(O(this,Nu,!1),E(this,Vh).off("block",E(this,Kh)))}pause(e){this.stop()}resume(){this.start()}}Vh=new WeakMap,Kh=new WeakMap,Nu=new WeakMap;var ym,Pc;class G5e extends U3{constructor(n,r){super(n);q(this,ym);q(this,Pc);O(this,ym,r),O(this,Pc,-2)}pause(n){n&&O(this,Pc,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(E(this,ym));s!=null&&(E(this,Pc)===-2?O(this,Pc,s.number):s.number>E(this,Pc)&&(r.emit(E(this,ym),s.number),O(this,Pc,s.number)))}}ym=new WeakMap,Pc=new WeakMap;var Kx;class V5e extends U3{constructor(n,r){super(n);q(this,Kx);O(this,Kx,_k(r))}async _poll(n,r){throw new Error("@TODO")}}Kx=new WeakMap;var wm;class K5e extends U3{constructor(n,r){super(n);q(this,wm);O(this,wm,r)}async _poll(n,r){const s=await r.getTransactionReceipt(E(this,wm));s&&r.emit(E(this,wm),s)}}wm=new WeakMap;var kc,bm,vm,Pu,Vi,Qx,XV;class B3{constructor(e,n){q(this,Qx);q(this,kc);q(this,bm);q(this,vm);q(this,Pu);q(this,Vi);O(this,kc,e),O(this,bm,_k(n)),O(this,vm,X(this,Qx,XV).bind(this)),O(this,Pu,!1),O(this,Vi,-2)}start(){E(this,Pu)||(O(this,Pu,!0),E(this,Vi)===-2&&E(this,kc).getBlockNumber().then(e=>{O(this,Vi,e)}),E(this,kc).on("block",E(this,vm)))}stop(){E(this,Pu)&&(O(this,Pu,!1),E(this,kc).off("block",E(this,vm)))}pause(e){this.stop(),e&&O(this,Vi,-2)}resume(){this.start()}}kc=new WeakMap,bm=new WeakMap,vm=new WeakMap,Pu=new WeakMap,Vi=new WeakMap,Qx=new WeakSet,XV=async function(e){if(E(this,Vi)===-2)return;const n=_k(E(this,bm));n.fromBlock=E(this,Vi)+1,n.toBlock=e;const r=await E(this,kc).getLogs(n);if(r.length===0){E(this,Vi)<e-60&&O(this,Vi,e-60);return}for(const s of r)E(this,kc).emit(E(this,bm),s),O(this,Vi,s.blockNumber)};const Q5e=BigInt(2),J5e=10;function SE(t){return t&&typeof t.then=="function"}function p_(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class eK{constructor(e){J(this,"name");Ge(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Y5e(t){return JSON.parse(JSON.stringify(t))}function xk(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function RI(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(on(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:p_("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:p_("orphan",n),filter:Y5e(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?xk(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{on(a)?s.push(a):i.push((async()=>{s.push(await ps(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=xk(s.map(a=>a.toLowerCase()))}return{filter:r,tag:p_("event",r),type:"event"}}G(!1,"unknown ProviderEvent","event",t)}function DI(){return new Date().getTime()}const Z5e={cacheTimeout:250,pollingInterval:4e3};var Jr,ku,Yr,Em,mi,Qh,Ou,Oc,gv,Ki,_m,xm,ut,ui,Ck,Ak,z0,Sk,H0,g_;class X5e{constructor(e,n){q(this,ut);q(this,Jr);q(this,ku);q(this,Yr);q(this,Em);q(this,mi);q(this,Qh);q(this,Ou);q(this,Oc);q(this,gv);q(this,Ki);q(this,_m);q(this,xm);if(O(this,xm,Object.assign({},Z5e,n||{})),e==="any")O(this,Qh,!0),O(this,mi,null);else if(e){const r=Ua.from(e);O(this,Qh,!1),O(this,mi,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else O(this,Qh,!1),O(this,mi,null);O(this,Oc,-1),O(this,Ou,new Map),O(this,Jr,new Map),O(this,ku,new Map),O(this,Yr,null),O(this,Em,!1),O(this,gv,1),O(this,Ki,new Map),O(this,_m,!1)}get pollingInterval(){return E(this,xm).pollingInterval}get provider(){return this}get plugins(){return Array.from(E(this,ku).values())}attachPlugin(e){if(E(this,ku).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,ku).set(e.name,e.connect(this)),this}getPlugin(e){return E(this,ku).get(e)||null}get disableCcipRead(){return E(this,_m)}set disableCcipRead(e){O(this,_m,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Ed(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}oe(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}oe(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new w5e(B5e(e),this)}_wrapLog(e,n){return new Xv($5e(e),this)}_wrapTransactionReceipt(e,n){return new MV(F5e(e),this)}_wrapTransactionResponse(e,n){return new Xb(ZV(e),this)}_detectNetwork(){oe(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){oe(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=it(await X(this,ut,ui).call(this,{method:"getBlockNumber"}),"%response");return E(this,Oc)>=0&&O(this,Oc,e),e}_getAddress(e){return ps(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(on(e))return on(e,32)?e:jo(e);if(typeof e=="bigint"&&(e=it(e,"blockTag")),typeof e=="number")return e>=0?jo(e):E(this,Oc)>=0?jo(E(this,Oc)+e):this.getBlockNumber().then(n=>jo(n+e));G(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?xk(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=jx(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=ps(n[s],this);SE(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);SE(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(E(this,mi)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw E(this,mi)===s&&O(this,mi,null),i}})();return O(this,mi,s),(await s).clone()}const e=E(this,mi),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(E(this,Qh)?(this.emit("network",r,n),E(this,mi)===e&&O(this,mi,Promise.resolve(r))):oe(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await ls({_block:X(this,ut,Sk).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await X(this,ut,ui).call(this,{method:"getGasPrice"});return De(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await X(this,ut,ui).call(this,{method:"getPriorityFee"});return De(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*Q5e+c),new WB(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Ed(r.url),i=await r.processFunc(n,this,s);return new WB(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return SE(n)&&(n=await n),De(await X(this,ut,ui).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await ls({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await X(this,ut,Ak).call(this,X(this,ut,Ck).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return De(await X(this,ut,z0).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return it(await X(this,ut,z0).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Se(await X(this,ut,z0).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=De(n,"position");return Se(await X(this,ut,z0).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await ls({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Rx.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await ls({network:this.getNetwork(),params:X(this,ut,Sk).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await ls({network:this.getNetwork(),params:X(this,ut,ui).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await ls({network:this.getNetwork(),params:X(this,ut,ui).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await X(this,ut,ui).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await ls({network:this.getNetwork(),result:X(this,ut,ui).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Se(n)}async getLogs(e){let n=this._getFilter(e);SE(n)&&(n=await n);const{network:r,params:s}=await ls({network:this.getNetwork(),params:X(this,ut,ui).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){oe(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await zx.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Ut(e);const n=mk(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await zx.getEnsAddress(this),i=await new Tg(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===qb)return null;const a=await new Tg(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Tr(r,"BAD_DATA")&&r.value==="0x"||Tr(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(fn("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){oe(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=E(this,Ki).get(e);n&&(n.timer&&clearTimeout(n.timer),E(this,Ki).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=ml(this,gv)._++,s=()=>{E(this,Ki).delete(r),e()};if(this.paused)E(this,Ki).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);E(this,Ki).set(r,{timer:i,func:s,time:DI()})}return r}_forEachSubscriber(e){for(const n of E(this,Jr).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new eK(e.type);case"block":{const n=new q5e(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new G5e(this,e.type);case"event":return new B3(this,e.filter);case"transaction":return new K5e(this,e.hash);case"orphan":return new V5e(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of E(this,Jr).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),E(this,Yr)!=null&&n.pause(E(this,Yr));break}}async on(e,n){const r=await X(this,ut,g_).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,E(this,Yr)!=null&&r.subscriber.pause(E(this,Yr))),this}async once(e,n){const r=await X(this,ut,g_).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,E(this,Yr)!=null&&r.subscriber.pause(E(this,Yr))),this}async emit(e,...n){const r=await X(this,ut,H0).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new hG(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),E(this,Jr).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await X(this,ut,H0).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of E(this,Jr).values())n+=r.length;return n}async listeners(e){if(e){const r=await X(this,ut,H0).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of E(this,Jr).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await X(this,ut,H0).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),E(this,Jr).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await X(this,ut,g_).call(this,e);r&&s.stop(),E(this,Jr).delete(n)}else for(const[n,{started:r,subscriber:s}]of E(this,Jr))r&&s.stop(),E(this,Jr).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return E(this,Em)}destroy(){this.removeAllListeners();for(const e of E(this,Ki).keys())this._clearTimeout(e);O(this,Em,!0)}get paused(){return E(this,Yr)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(O(this,Oc,-1),E(this,Yr)!=null){if(E(this,Yr)==!!e)return;oe(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),O(this,Yr,!!e);for(const n of E(this,Ki).values())n.timer&&clearTimeout(n.timer),n.time=DI()-n.time}resume(){if(E(this,Yr)!=null){this._forEachSubscriber(e=>e.resume()),O(this,Yr,null);for(const e of E(this,Ki).values()){let n=e.time;n<0&&(n=0),e.time=DI(),setTimeout(e.func,n)}}}}Jr=new WeakMap,ku=new WeakMap,Yr=new WeakMap,Em=new WeakMap,mi=new WeakMap,Qh=new WeakMap,Ou=new WeakMap,Oc=new WeakMap,gv=new WeakMap,Ki=new WeakMap,_m=new WeakMap,xm=new WeakMap,ut=new WeakSet,ui=async function(e){const n=E(this,xm).cacheTimeout;if(n<0)return await this._perform(e);const r=p_(e.method,e);let s=E(this,Ou).get(r);return s||(s=this._perform(e),E(this,Ou).set(r,s),setTimeout(()=>{E(this,Ou).get(r)===s&&E(this,Ou).delete(r)},n)),await s},Ck=async function(e,n,r){oe(r<J5e,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=jx(e);try{return Se(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&b3(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Sn(i.data,0,4)==="0x556f1830"){const o=i.data,a=await ps(s.to,this);let c;try{c=sUe(Sn(i.data,4))}catch(d){oe(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}oe(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);oe(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Nn([c.selector,rUe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await X(this,ut,Ck).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},Ak=async function(e){const{value:n}=await ls({network:this.getNetwork(),value:e});return n},z0=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await X(this,ut,Ak).call(this,X(this,ut,ui).call(this,Object.assign(e,{address:s,blockTag:i})))},Sk=async function(e,n){if(on(e,32))return await X(this,ut,ui).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await X(this,ut,ui).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},H0=async function(e,n){let r=await RI(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await RI({orphan:"drop-log",log:n[0]},this)),E(this,Jr).get(r.tag)||null},g_=async function(e){const n=await RI(e,this),r=n.tag;let s=E(this,Jr).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},E(this,Jr).set(r,s)),s};function eUe(t,e){try{const n=Ik(t,e);if(n)return Px(n)}catch{}return null}function Ik(t,e){if(t==="0x")return null;try{const n=it(Sn(t,e,e+32)),r=it(Sn(t,n,n+32));return Sn(t,n+32,n+32+r)}catch{}return null}function ZB(t){const e=er(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function tUe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const nUe=new Uint8Array([]);function rUe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(nUe),n+=32;for(let r=0;r<t.length;r++){const s=ct(t[r]);e[r]=ZB(n),e.push(ZB(s.length)),e.push(tUe(s)),n+=32+Math.ceil(s.length/32)*32}return Nn(e)}const XB="0x0000000000000000000000000000000000000000000000000000000000000000";function sUe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};oe(Cg(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Sn(t,0,32);oe(Sn(n,0,12)===Sn(XB,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Sn(n,12);try{const r=[],s=it(Sn(t,32,64)),i=it(Sn(t,s,s+32)),o=Sn(t,s+32);for(let a=0;a<i;a++){const c=eUe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{oe(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Ik(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{oe(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}oe(Sn(t,100,128)===Sn(XB,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Sn(t,96,100);try{const r=Ik(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{oe(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Hd(t,e){if(t.provider)return t.provider;oe(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function eL(t,e){let n=jx(e);if(n.to!=null&&(n.to=ps(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),ps(r,t)]).then(([s,i])=>(G(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await ls(n)}class iUe{constructor(e){J(this,"provider");Ge(this,{provider:e||null})}async getNonce(e){return Hd(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await eL(this,e)}async populateTransaction(e){const n=Hd(this,"populateTransaction"),r=await eL(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=De(r.chainId);G(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?G(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&G(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();oe(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(oe(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):oe(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ls(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Hd(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Hd(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Hd(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Hd(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Hd(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=Rx.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){oe(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function oUe(t){return JSON.parse(JSON.stringify(t))}var as,Ia,Jh,Ru,Yh,Cm,xd,Tk,Nk;class tK{constructor(e){q(this,xd);q(this,as);q(this,Ia);q(this,Jh);q(this,Ru);q(this,Yh);q(this,Cm);O(this,as,e),O(this,Ia,null),O(this,Jh,X(this,xd,Tk).bind(this)),O(this,Ru,!1),O(this,Yh,null),O(this,Cm,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){E(this,Ru)||(O(this,Ru,!0),X(this,xd,Tk).call(this,-2))}stop(){E(this,Ru)&&(O(this,Ru,!1),O(this,Cm,!0),X(this,xd,Nk).call(this),E(this,as).off("block",E(this,Jh)))}pause(e){e&&X(this,xd,Nk).call(this),E(this,as).off("block",E(this,Jh))}resume(){this.start()}}as=new WeakMap,Ia=new WeakMap,Jh=new WeakMap,Ru=new WeakMap,Yh=new WeakMap,Cm=new WeakMap,xd=new WeakSet,Tk=async function(e){try{E(this,Ia)==null&&O(this,Ia,this._subscribe(E(this,as)));let n=null;try{n=await E(this,Ia)}catch(i){if(!Tr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){O(this,Ia,null),E(this,as)._recoverSubscriber(this,this._recover(E(this,as)));return}const r=await E(this,as).getNetwork();if(E(this,Yh)||O(this,Yh,r),E(this,Yh).chainId!==r.chainId)throw new Error("chaid changed");if(E(this,Cm))return;const s=await E(this,as).send("eth_getFilterChanges",[n]);await this._emitResults(E(this,as),s)}catch(n){console.log("@TODO",n)}E(this,as).once("block",E(this,Jh))},Nk=function(){const e=E(this,Ia);e&&(O(this,Ia,null),e.then(n=>{E(this,as).destroyed||E(this,as).send("eth_uninstallFilter",[n])}))};var Zh;class aUe extends tK{constructor(n,r){super(n);q(this,Zh);O(this,Zh,oUe(r))}_recover(n){return new B3(n,E(this,Zh))}async _subscribe(n){return await n.send("eth_newFilter",[E(this,Zh)])}async _emitResults(n,r){for(const s of r)n.emit(E(this,Zh),n._wrapLog(s,n._network))}}Zh=new WeakMap;class cUe extends tK{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const lUe="bigint,boolean,function,number,string,symbol".split(/,/g);function m_(t){if(t==null||lUe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(m_);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function uUe(t){return new Promise(e=>{setTimeout(e,t)})}function Rp(t){return t&&t.toLowerCase()}function tL(t){return t&&typeof t.pollingInterval=="number"}const nK={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class $I extends iUe{constructor(n,r){super(n);J(this,"address");r=Ut(r),Ge(this,{address:r})}connect(n){oe(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=m_(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await ps(o,this.provider);G(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await ps(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Tr(u,"CANCELLED")||Tr(u,"BAD_DATA")||Tr(u,"NETWORK_ERROR")||Tr(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Tr(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",fn("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=m_(n);if(r.from){const i=await ps(r.from,this.provider);G(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?Gc(n):n;return await this.provider.send("personal_sign",[Se(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=m_(s),o=await Mx.resolveNames(n,r,i,async a=>{const c=await ps(a);return G(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Mx.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Gc(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Se(r)])}}var Xh,Am,Rc,Ta,Do,Qi,Ms,mv,Pk;class dUe extends X5e{constructor(n,r){super(n,r);q(this,mv);q(this,Xh);q(this,Am);q(this,Rc);q(this,Ta);q(this,Do);q(this,Qi);q(this,Ms);O(this,Am,1),O(this,Xh,Object.assign({},nK,r||{})),O(this,Rc,[]),O(this,Ta,null),O(this,Qi,null),O(this,Ms,null);{let i=null;const o=new Promise(a=>{i=a});O(this,Do,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(G(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&O(this,Qi,Ua.from(n))):s&&(G(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),O(this,Qi,s))}_getOption(n){return E(this,Xh)[n]}get _network(){return oe(E(this,Qi),"network is not available yet","NETWORK_ERROR"),E(this,Qi)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&De(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(E(this,Qi))return E(this,Qi)}else return n;return E(this,Ms)?await E(this,Ms):this.ready?(O(this,Ms,(async()=>{try{const r=Ua.from(De(await this.send("eth_chainId",[])));return O(this,Ms,null),r}catch(r){throw O(this,Ms,null),r}})()),await E(this,Ms)):(O(this,Ms,(async()=>{const r={id:ml(this,Am)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],O(this,Ms,null)}catch(i){throw O(this,Ms,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ua.from(De(s.result));throw this.getRpcError(r,s)})()),await E(this,Ms))}_start(){E(this,Do)==null||E(this,Do).resolve==null||(E(this,Do).resolve(),O(this,Do,null),(async()=>{for(;E(this,Qi)==null&&!this.destroyed;)try{O(this,Qi,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",fn("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await uUe(1e3)}X(this,mv,Pk).call(this)})())}async _waitUntilReady(){if(E(this,Do)!=null)return await E(this,Do).promise}_getSubscriber(n){return n.type==="pending"?new cUe(this):n.type==="event"?this._getOption("polling")?new B3(this,n.filter):new aUe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new eK("orphan"):super._getSubscriber(n)}get ready(){return E(this,Do)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=jo(De(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Se(n[s]))}),n.accessList&&(r.accessList=Zf(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=sV(s);return{address:i.address,nonce:jo(i.nonce),chainId:jo(i.chainId),yParity:jo(i.signature.yParity),r:jo(i.signature.r),s:jo(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Rp(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Rp(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[Rp(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Rp(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(Rp):n.filter.address=Rp(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return fn("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return fn("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=kk(i),l=Zb.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(fUe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return fn("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return fn("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return fn("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return fn("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return fn("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?fn("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):fn("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(fn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=ml(this,Am)._++,i=new Promise((o,a)=>{E(this,Rc).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return X(this,mv,Pk).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new $I(this,i[n])}const{accounts:s}=await ls({network:this.getNetwork(),accounts:r});n=Ut(n);for(const i of s)if(Ut(i)===n)return new $I(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new $I(this,r))}destroy(){E(this,Ta)&&(clearTimeout(E(this,Ta)),O(this,Ta,null));for(const{payload:n,reject:r}of E(this,Rc))r(fn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));O(this,Rc,[]),super.destroy()}}Xh=new WeakMap,Am=new WeakMap,Rc=new WeakMap,Ta=new WeakMap,Do=new WeakMap,Qi=new WeakMap,Ms=new WeakMap,mv=new WeakSet,Pk=function(){if(E(this,Ta))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");O(this,Ta,setTimeout(()=>{O(this,Ta,null);const r=E(this,Rc);for(O(this,Rc,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==E(this,Xh).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>E(this,Xh).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(fn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=fn("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Du;class hUe extends dUe{constructor(n,r){super(n,r);q(this,Du);let s=this._getOption("pollingInterval");s==null&&(s=nK.pollingInterval),O(this,Du,s)}_getSubscriber(n){const r=super._getSubscriber(n);return tL(r)&&(r.pollingInterval=E(this,Du)),r}get pollingInterval(){return E(this,Du)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");O(this,Du,n),this._forEachSubscriber(r=>{tL(r)&&(r.pollingInterval=E(this,Du))})}}Du=new WeakMap;function kk(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&on(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=kk(t[e]);if(n)return n}return null}if(typeof t=="string")try{return kk(JSON.parse(t))}catch{}return null}function Ok(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)Ok(t[n],e);if(typeof t=="string")try{return Ok(JSON.parse(t),e)}catch{}}}function fUe(t){const e=[];return Ok(t,e),e}var Sm,Im;const ch=class ch extends hUe{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});G(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);q(this,Sm);q(this,Im);O(this,Im,null),s&&s.providerInfo&&O(this,Im,s.providerInfo),O(this,Sm,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return E(this,Im)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){G(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await E(this,Sm).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await E(this,Sm).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new ch(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new ch(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof ch)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new ch(p,void 0,{providerInfo:g}))}else a(fn("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new ch(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Sm=new WeakMap,Im=new WeakMap;let Rk=ch;const pUe=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"MAX_WAGER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MIN_WAGER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawFunds",outputs:[],stateMutability:"nonpayable",type:"function"}],gUe={abi:pUe},rK="https://roxwocgknkiqnsgiojgz.supabase.co",mUe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",jl=aG(rK,mUe,{realtime:{params:{eventsPerSecond:10}},auth:{persistSession:!1}}),UI=aG(rK,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMDc2MzExMiwiZXhwIjoyMDQ2MzM5MTEyfQ.US6YTQfWVWNAfmEopBpD580jsaevKv_Ev7dGFeqFptA",{realtime:{params:{eventsPerSecond:10}},auth:{persistSession:!1}}),Wd={AI:"ai",ONLINE:"online"},IE={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},TE=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],yUe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],wUe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=document.createElement("script");a.src="/stockfish.js",a.onload=()=>{if(console.log("[DEBUG] LawbBot script loaded, initializing..."),typeof window<"u"&&window.Stockfish){const c=window.Stockfish;c().then(l=>{console.log("[DEBUG] LawbBot initialized successfully"),n.current=l,e(!0),r.current=!1,l.postMessage("uci"),l.postMessage("isready"),l.postMessage("setoption name Hash value 128"),l.postMessage("setoption name MultiPV value 1")}).catch(()=>{console.error("[DEBUG] LawbBot initialization failed"),e(!1),r.current=!1})}else console.error("[DEBUG] LawbBot not found in window object"),e(!1),r.current=!1},a.onerror=c=>{console.error("[DEBUG] Failed to load LawbBot script:",c),e(!1),r.current=!1},document.head.appendChild(a)}catch(a){console.error("[DEBUG] Failed to create LawbBot script:",a),e(!1),r.current=!1}})(),()=>{var a,c;n.current&&((c=(a=n.current).terminate)==null||c.call(a)),r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{var h,f;if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=p=>{var g,y;console.log("[DEBUG] Stockfish message:",p),typeof p=="string"&&p.startsWith("bestmove ")&&(l=p.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(y=(g=n.current)==null?void 0:g.removeMessageListener)==null||y.call(g,d),c(l)))};try{(f=(h=n.current).addMessageListener)==null||f.call(h,d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const p=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${p} depth 20`);const g=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var y,w;if(!u){u=!0;try{(w=(y=n.current)==null?void 0:y.removeMessageListener)==null||w.call(y,d)}catch(v){console.warn("[DEBUG] Error removing message listener:",v)}console.warn("[DEBUG] Stockfish timeout after",g,"ms"),c(l)}},g)}catch(p){console.error("[DEBUG] Stockfish communication error:",p),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},bUe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},vUe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=jm(),[s,i]=D.useState(Wd.AI),[o,a]=D.useState(()=>JSON.parse(JSON.stringify(TE))),[c,l]=D.useState("blue"),[u,d]=D.useState(null),[h,f]=D.useState("active"),[p,g]=D.useState("hard"),[y,w]=D.useState("Connect wallet to play"),[v,b]=D.useState([]),[x,_]=D.useState([]),[C,A]=D.useState([]),[T,S]=D.useState(null),[k,R]=D.useState(!1),[F,W]=D.useState(!1),[Q,I]=D.useState(null),[N,M]=D.useState(null),[B]=D.useState(""),[$]=D.useState(.1),[j,V]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ee=D.useRef(null),ae=D.useRef(!1),re=D.useRef(o),ce=D.useRef(null),ye=D.useRef(null),Z=D.useRef(!1),te=D.useRef(!1),[le,se]=D.useState(!1),[pe,Fe]=D.useState(!1),[Ce,xe]=D.useState(!1),[je,Ze]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),qt=()=>{Ze(U=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!U)),!U))},{stockfishReady:qn}=wUe(),{getOpeningData:Xt}=bUe(),[kt,kn]=D.useState("loading"),[Di,dl]=D.useState(!1),[hl,mr]=D.useState([]),[Cs,fl]=D.useState(!1),[Oy,pl]=D.useState("/images/chessboard1.png"),n1=()=>{const U=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],z=Math.floor(Math.random()*U.length),H=U[z];return console.log("[DEBUG] Random chessboard selected:",H,"(index:",z,")"),H};D.useEffect(()=>{if(qn)kn("ready");else{const U=window.setTimeout(()=>{qn||(kn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(U)}},[qn]),D.useEffect(()=>{re.current=o},[o]),D.useEffect(()=>{r?w("Select game mode"):(w("Connect wallet to play"),R(!1))},[r]),D.useEffect(()=>(!ee.current&&typeof Worker<"u"&&(ee.current=new Worker("/aiWorker.js"),ee.current.onmessage=U=>{console.log("[DEBUG] AI worker response received:",U.data);const{move:z,nodes:H}=U.data;z&&ae.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",z),console.log("[DEBUG] AI searched",H,"nodes"),ae.current=!1,ye.current&&(window.clearTimeout(ye.current),ye.current=null),ce.current&&ce.current(z.from,z.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ee.current.onerror=U=>{console.error("[DEBUG] AI worker error:",U),w("AI worker error - using fallback mode"),ae.current=!1}),()=>{ee.current&&(ee.current.terminate(),ee.current=null),ye.current&&(window.clearTimeout(ye.current),ye.current=null)}),[]),D.useEffect(()=>{F3()},[]);const F3=async()=>{try{const U=new Promise((Y,K)=>window.setTimeout(()=>K(new Error("Database timeout")),1e4)),z=jl.from("leaderboard").select("*").order("points",{ascending:!1}),H=await Promise.race([z,U]);if(H.error)throw H.error;H.data&&_(H.data),console.log("Leaderboard data loaded:",H.data)}catch(U){w("Failed to load leaderboard"),console.error("Leaderboard error:",U)}},Ry=async U=>{if(console.log("[DEBUG] updateScore called with:",U),!r){console.log("[DEBUG] No wallet address, returning");return}try{const z=r.toLowerCase(),{data:H}=await UI.from("leaderboard").select("*").eq("username",z).maybeSingle();console.log("[DEBUG] Existing record:",H);const Y=H!=null&&H.wins?Number(H.wins):0,K=H!=null&&H.losses?Number(H.losses):0,me=H!=null&&H.draws?Number(H.draws):0,Ae=H!=null&&H.total_games?Number(H.total_games):0,Me=H!=null&&H.points?Number(H.points):0;console.log("[DEBUG] Score calculation:",{currentWins:Y,currentLosses:K,currentDraws:me,currentTotalGames:Ae,currentPoints:Me,gameResult:U});const wt=Y+(U==="win"?1:0),Ot=K+(U==="loss"?1:0),Mn=me+(U==="draw"?1:0),Lt=Ae+1;let Uy=0;if(U==="win")switch(p){case"easy":Uy=10;break;default:Uy=1}else U==="draw"&&(Uy=1);const GA=Me+Uy;if(console.log("[DEBUG] New values:",{newWins:wt,newLosses:Ot,newDraws:Mn,newTotalGames:Lt,newPoints:GA,pointsToAdd:Uy}),H){const{error:By}=await UI.from("leaderboard").update({wins:wt,losses:Ot,draws:Mn,total_games:Lt,points:GA,updated_at:new Date().toISOString()}).eq("username",z);if(By){console.error("[DEBUG] Error updating leaderboard:",By);return}}else{const{error:By}=await UI.from("leaderboard").insert({username:z,chain_type:"ethereum",wins:wt,losses:Ot,draws:Mn,total_games:Lt,points:GA,updated_at:new Date().toISOString()});if(By){console.error("[DEBUG] Error inserting leaderboard record:",By);return}}console.log("[DEBUG] Leaderboard updated successfully"),await F3()}catch(z){console.error("[DEBUG] Error in updateScore:",z)}},xn=U=>U&&U===U.toUpperCase()?"red":"blue",z3=(U,z)=>U>=0&&U<8&&z>=0&&z<8,H3=(U,z)=>`${String.fromCharCode(97+z)}${8-U}`,gl=(U,z)=>{const H=z==="blue"?"k":"K";let Y=null;for(let Ae=0;Ae<8;Ae++){for(let Me=0;Me<8;Me++)if(U[Ae][Me]===H){Y={row:Ae,col:Me};break}if(Y)break}if(!Y)return console.log(`King not found for ${z}`),!1;const K=z==="blue"?"red":"blue",me=sK(Y.row,Y.col,K,U);return console.log(`${z} king at ${Y.row},${Y.col} under attack: ${me}`),me},sK=(U,z,H,Y)=>{for(let K=0;K<8;K++)for(let me=0;me<8;me++){const Ae=Y[K][me];if(Ae&&xn(Ae)===H&&kd(Ae,K,me,U,z,!1,H,Y,!0))return!0}return!1},iK=(U,z,H,Y,K,me=o)=>{const Ae=me.map(wt=>[...wt]),Me=Ae[U][z];return Ae[H][Y]=Me,Ae[U][z]=null,gl(Ae,K)},oK=(U,z,H,Y,K,me)=>{const Ae=U==="blue"?-1:1,Me=U==="blue"?6:1;if(!z3(Y,K)||U==="blue"&&Y>=z||U==="red"&&Y<=z)return!1;const wt=Math.abs(Y-z),Ot=Math.abs(K-H);if((wt===1&&Ot===0||wt===2&&Ot===0&&z===Me||wt===1&&Ot===1)&&wt<=2&&Ot<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:U,from:`${z},${H}`,to:`${Y},${K}`}),H===K&&Y===z+Ae)return me[Y][K]===null;if(H===K&&z===Me&&Y===z+2*Ae)return me[z+Ae][H]===null&&me[Y][K]===null;if(Math.abs(H-K)===1&&Y===z+Ae){const Lt=me[Y][K];return Lt!==null&&xn(Lt)!==U}if(Math.abs(H-K)===1&&Y===z+Ae){const Lt=me[z][K];if(Lt&&xn(Lt)!==U&&Lt.toLowerCase()==="p"&&j.lastPawnDoubleMove&&j.lastPawnDoubleMove.row===z&&j.lastPawnDoubleMove.col===K)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},W3=(U,z,H,Y,K)=>U!==H&&z!==Y?!1:G3(U,z,H,Y,K),aK=(U,z,H,Y)=>{const K=Math.abs(U-H),me=Math.abs(z-Y);return K===2&&me===1||K===1&&me===2},q3=(U,z,H,Y,K)=>Math.abs(U-H)!==Math.abs(z-Y)?!1:G3(U,z,H,Y,K),cK=(U,z,H,Y,K)=>W3(U,z,H,Y,K)||q3(U,z,H,Y,K),lK=(U,z,H,Y,K)=>{const me=Math.abs(z-Y),Ae=Math.abs(H-K);if(me<=1&&Ae<=1)return!0;if(me===0&&Ae===2){if(U==="blue"&&!j.blueKingMoved){if(K===6&&!j.blueRooksMove.right||K===2&&!j.blueRooksMove.left)return!0}else if(U==="red"&&!j.redKingMoved&&(K===6&&!j.redRooksMove.right||K===2&&!j.redRooksMove.left))return!0}return!1},G3=(U,z,H,Y,K)=>{const me=U===H?0:(H-U)/Math.abs(H-U),Ae=z===Y?0:(Y-z)/Math.abs(Y-z);let Me=U+me,wt=z+Ae;for(;Me!==H||wt!==Y;){if(K[Me][wt]!==null)return!1;Me+=me,wt+=Ae}return!0},kd=(U,z,H,Y,K,me=!0,Ae=xn(U),Me=o,wt=!1)=>{if(!z3(Y,K))return wt||console.log("[ILLEGAL MOVE] Out of board:",{piece:U,startRow:z,startCol:H,endRow:Y,endCol:K}),!1;const Ot=Me[Y][K];if(Ot&&xn(Ot)===Ae)return wt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:U,startRow:z,startCol:H,endRow:Y,endCol:K}),!1;const Mn=U.toLowerCase();let Lt=!1;switch(Mn){case"p":Lt=oK(Ae,z,H,Y,K,Me);break;case"r":Lt=W3(z,H,Y,K,Me);break;case"n":Lt=aK(z,H,Y,K);break;case"b":Lt=q3(z,H,Y,K,Me);break;case"q":Lt=cK(z,H,Y,K,Me);break;case"k":Lt=lK(Ae,z,H,Y,K);break}return Lt?Lt&&me&&iK(z,H,Y,K,Ae,Me)?(wt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:U,startRow:z,startCol:H,endRow:Y,endCol:K}),!1):Lt:(wt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:U,startRow:z,startCol:H,endRow:Y,endCol:K,playerColor:Ae,pieceType:Mn,targetPiece:Me[Y][K],targetPieceColor:Me[Y][K]?xn(Me[Y][K]):null}),!1)},r1=(U,z=o,H=c)=>{const Y=[],K=z[U.row][U.col];if(!K||xn(K)!==H)return Y;const me=K.toLowerCase();if(me==="p"){const Ae=H==="blue"?-1:1,Me=H==="blue"?6:1,wt=U.row+Ae;if(wt>=0&&wt<8&&kd(K,U.row,U.col,wt,U.col,!0,H,z,!0)&&Y.push({row:wt,col:U.col}),U.row===Me){const Ot=U.row+2*Ae;Ot>=0&&Ot<8&&kd(K,U.row,U.col,Ot,U.col,!0,H,z,!0)&&Y.push({row:Ot,col:U.col})}for(const Ot of[-1,1]){const Mn=U.col+Ot,Lt=U.row+Ae;Mn>=0&&Mn<8&&Lt>=0&&Lt<8&&kd(K,U.row,U.col,Lt,Mn,!0,H,z,!0)&&Y.push({row:Lt,col:Mn})}}else if(me==="n"){const Ae=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Me,wt]of Ae){const Ot=U.row+Me,Mn=U.col+wt;Ot>=0&&Ot<8&&Mn>=0&&Mn<8&&kd(K,U.row,U.col,Ot,Mn,!0,H,z,!0)&&Y.push({row:Ot,col:Mn})}}else for(let Ae=0;Ae<8;Ae++)for(let Me=0;Me<8;Me++)kd(K,U.row,U.col,Ae,Me,!0,H,z,!0)&&Y.push({row:Ae,col:Me});return Y},uK=(U,z=o)=>{if(!gl(z,U))return!1;for(let H=0;H<8;H++)for(let Y=0;Y<8;Y++){const K=z[H][Y];if(K&&xn(K)===U&&r1({row:H,col:Y},z,U).length>0)return!1}return!0},dK=(U,z=o)=>{if(gl(z,U))return!1;for(let H=0;H<8;H++)for(let Y=0;Y<8;Y++){const K=z[H][Y];if(K&&xn(K)===U&&r1({row:H,col:Y},z,U).length>0)return!1}return!0},hK=(U,z)=>{if(h!=="active"||ae.current)return;const H=o[U][z],Y=H?xn(H):null;if(u&&C.some(K=>K.row===U&&K.col===z)){s1(u,{row:U,col:z});return}if(H&&Y===c){const K=r1({row:U,col:z});d({row:U,col:z}),A(K);return}d(null),A([])},s1=(U,z,H=!1)=>{const Y=o[U.row][U.col];if(console.log("[MOVE ATTEMPT]",{from:U,to:z,piece:Y,isAIMove:H,board:JSON.parse(JSON.stringify(o)),moveHistory:v}),!!Y){if(Y.toLowerCase()==="p"&&(xn(Y)==="blue"&&z.row===0||xn(Y)==="red"&&z.row===7)){I({from:U,to:z}),W(!0);return}eD(U,z,"q",H)}};ce.current=s1;const V3=D.useCallback((U,z,H=!1)=>{fl(!0);const Y=o.map(Ae=>[...Ae]),K=Y[U.row][U.col];if(!K)return;Y[z.row][z.col]=K,Y[U.row][U.col]=null,AK(Y,U,z,K);const me=SK(U,z);if(b(Ae=>{const Me=[...Ae,me];return console.log("[MOVE HISTORY UPDATED]",Me),Me}),S({from:U,to:z}),d(null),A([]),v.length<10&&!H){const Ae=nL(Y,c==="blue"?"red":"blue");Xt(Ae).then(Me=>{Me&&Me.moves&&Me.moves.length>0&&(mr(Me.moves.slice(0,3)),dl(!0),setTimeout(()=>dl(!1),5e3))})}IK(U,z,K),l(Ae=>{const Me=Ae==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",Me),K3(Y,Me),Me}),K3(Y,c==="blue"?"red":"blue"),a(Y),ae.current=!1,Z.current=!1,te.current=!1,fl(!1)},[o,c,v,Xt]);D.useEffect(()=>{if(!ae.current&&s===Wd.AI&&c==="red"&&!Z.current&&!Cs)if(ae.current=!0,p==="easy")setTimeout(()=>{const U=fK(o);U?s1(U.from,U.to,!0):ae.current=!1},600);else{w("AI is calculating...");const U=nL(o,c);if(te.current)return;te.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:U,difficulty:p,movetime:3e3})}).then(H=>{if(H.ok)return H.json();throw new Error("API call failed")}).then(H=>{const Y=H.bestmove||H.move;if(Y&&Y!=="(none)"&&Y.length===4){const K=Y.charCodeAt(0)-97,me=parseInt(Y[1]),Ae=Y.charCodeAt(2)-97,Me=parseInt(Y[3]),wt=8-me,Ot=8-Me;if(K>=0&&K<8&&wt>=0&&wt<8&&Ae>=0&&Ae<8&&Ot>=0&&Ot<8){const Mn={from:{row:wt,col:K},to:{row:Ot,col:Ae}},Lt=o[wt][K];Lt&&xn(Lt)==="red"&&kd(Lt,wt,K,Ot,Ae,!0,"red",o)?s1(Mn.from,Mn.to,!0):(ae.current=!1,te.current=!1)}else ae.current=!1,te.current=!1}else ae.current=!1,te.current=!1}).catch(()=>{w("AI error. Please try again."),ae.current=!1,te.current=!1})}},[c,s,p,o,j,qn]);const K3=(U,z)=>{console.log("Checking game end for player:",z);const H=U.some(K=>K.some(me=>me==="k")),Y=U.some(K=>K.some(me=>me==="K"));if(!H)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),w("King captured! Red wins!"),Ry("loss"),xe(!0),setTimeout(()=>xe(!1),3e3),"checkmate";if(!Y)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),w("King captured! You win!"),Ry("win"),xe(!0),setTimeout(()=>xe(!1),3e3),"checkmate";if(console.log("Is king in check:",gl(U,z)),uK(z,U)){console.log("[GAME END] CHECKMATE",{winner:z==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(U)),moveHistory:v}),f("checkmate");const K=z==="blue"?"red":"blue";return K==="blue"?(w("Checkmate! You win!"),ep("checkmate"),rD(!0),NK(),Ry("win"),xe(!0),setTimeout(()=>xe(!1),3e3)):(w(`Checkmate! ${K==="red"?"AI":"Opponent"} wins!`),ep("checkmate"),sD(!0),Ry("loss"),xe(!0),setTimeout(()=>xe(!1),3e3)),"checkmate"}return dK(z,U)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(U)),moveHistory:v}),f("stalemate"),w("Stalemate! Game is a draw."),Ry("draw"),xe(!0),setTimeout(()=>xe(!1),3e3),"stalemate"):(gl(U,z)?(console.log("CHECK detected!"),ep("check"),w(`${z==="blue"?"Blue":"Red"} is in check!`)):w("Your turn"),null)},fK=U=>{const z=[];for(let K=0;K<8;K++)for(let me=0;me<8;me++){const Ae=U[K][me];Ae&&xn(Ae)==="red"&&z.push({row:K,col:me})}for(let K=z.length-1;K>0;K--){const me=Math.floor(Math.random()*(K+1));[z[K],z[me]]=[z[me],z[K]]}const H=[],Y=[];for(const K of z){const me=r1(K,U,"red");for(const Ae of me){const Me=U[Ae.row][Ae.col];if(Me&&xn(Me)==="blue"){const Ot={p:100,n:320,b:330,r:500,q:900,k:2e4}[Me.toLowerCase()]||0;H.push({from:K,to:Ae,value:Ot})}else Y.push({from:K,to:Ae})}}if(H.length>0&&Math.random()<.3){H.sort((K,me)=>K.value-me.value);for(const K of H){const me=U.map(Me=>[...Me]),Ae=me[K.from.row][K.from.col];if(me[K.to.row][K.to.col]=Ae,me[K.from.row][K.from.col]=null,!gl(me,"red"))return{from:K.from,to:K.to}}}for(const K of Y){const me=U.map(Me=>[...Me]),Ae=me[K.from.row][K.from.col];if(me[K.to.row][K.to.col]=Ae,me[K.from.row][K.from.col]=null,!gl(me,"red"))return K}H.sort((K,me)=>K.value-me.value);for(const K of H){const me=U.map(Me=>[...Me]),Ae=me[K.from.row][K.from.col];if(me[K.to.row][K.to.col]=Ae,me[K.from.row][K.from.col]=null,!gl(me,"red"))return{from:K.from,to:K.to}}return null},pK=()=>{a(JSON.parse(JSON.stringify(TE))),l("blue"),d(null),f("active"),b([]),A([]),S(null),R(!1),w("Select game mode"),V({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),pl(n1()),ae.current&&(ae.current=!1)},{chainId:Q3}=jm(),{switchChain:UA,isPending:gK}=wse(),[mK,Od]=D.useState(!1),[J3,Dy]=D.useState(null),Y3=D.useCallback(async()=>{if(Q3!==nh.id){try{if(Dy(null),Od(!0),UA)return await UA({chainId:nh.id}),Od(!1),!0;if(typeof window<"u"&&window.ethereum&&typeof window.ethereum.request=="function")return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x7c8"}]}),Od(!1),!0}catch(U){if((U==null?void 0:U.code)===4902&&typeof window<"u"&&window.ethereum&&typeof window.ethereum.request=="function")try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x7c8",chainName:"Sanko Testnet",nativeCurrency:nh.nativeCurrency,rpcUrls:nh.rpcUrls.default.http,blockExplorerUrls:[nh.blockExplorers.default.url]}]}),Od(!1),!0}catch{Dy("Failed to add Sanko Testnet. Please add it manually in your wallet.")}else Dy("Failed to switch network. Please switch to Sanko Testnet in your wallet.");return Od(!0),!1}return Dy("Your wallet does not support automatic network switching. Please switch to Sanko Testnet (chainId 1992) manually."),Od(!0),!1}return Od(!1),Dy(null),!0},[Q3,UA]),yK=D.useCallback(async()=>{await Y3()&&(R(!0),w("Set wager and create/join game"))},[Y3]),wK=()=>mK&&m.jsx("div",{className:"network-modal-overlay",children:m.jsxs("div",{className:"network-modal",children:[m.jsx("h2",{children:"Switch to Sanko Testnet"}),gK?m.jsx("p",{children:"Switching network in your wallet..."}):J3?m.jsxs(m.Fragment,{children:[m.jsx("p",{style:{color:"red"},children:J3}),m.jsx("p",{children:"Please switch to Sanko Testnet (chainId 1992) in your wallet to play multiplayer."})]}):m.jsx("p",{children:"Please approve the network switch in your wallet to continue."})]})}),bK=()=>{OK(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),R(!0),se(!1),w("Game started! Your turn");const U=n1();pl(U),console.log("[DEBUG] Game started with chessboard:",U)},Z3=U=>`${U.slice(0,6)}...${U.slice(-4)}`,vK=(U,z)=>{const H=o[U][z],Y=(u==null?void 0:u.row)===U&&(u==null?void 0:u.col)===z,K=C.some(Ae=>Ae.row===U&&Ae.col===z),me=T&&(T.from.row===U&&T.from.col===z||T.to.row===U&&T.to.col===z);return m.jsxs("div",{className:`square ${Y?"selected":""} ${K?"legal-move":""} ${me?"last-move":""}`,onClick:()=>hK(U,z),children:[H&&m.jsx("div",{className:"piece",style:{backgroundImage:IE[H]?`url(${IE[H]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),K&&m.jsx("div",{className:"legal-move-indicator"})]},`${U}-${z}`)},EK=()=>{if(!F||!Q)return null;const U=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:U.map(z=>m.jsx("div",{className:"promotion-piece",onClick:()=>{eD(Q.from,Q.to,z),W(!1),I(null)},style:{backgroundImage:IE[z]?`url(${IE[z]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},z))})]})})},[_K,xK]=D.useState(null),X3=(U=!1,z="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${U?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:yUe.map(H=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>xK(H.key),children:[m.jsx("img",{src:H.img,alt:H.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:H.name}),_K===H.key&&m.jsx("div",{className:"piece-gallery-desc",children:H.desc})]},H.key))}),m.jsx("div",{className:"piece-gallery-tip",children:z})]}),CK=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),m.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",m.jsx("br",{}),"Good luck, have fun!"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{bK()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),AK=(U,z,H,Y)=>{if(Y.toLowerCase()==="p"&&(xn(Y)==="blue"&&H.row===0||xn(Y)==="red"&&H.row===7)){const K=xn(Y)==="blue"?"q":"Q";U[H.row][H.col]=K}Y.toLowerCase()==="k"&&Math.abs(z.col-H.col)===2&&(H.col===6?(U[z.row][7]=null,U[z.row][5]=xn(Y)==="blue"?"r":"R"):H.col===2&&(U[z.row][0]=null,U[z.row][3]=xn(Y)==="blue"?"r":"R"))},SK=(U,z,H,Y)=>{const K=H3(U.row,U.col),me=H3(z.row,z.col);return`${K}-${me}`},IK=(U,z,H)=>{const Y={...j};H.toLowerCase()==="k"?xn(H)==="blue"?Y.blueKingMoved=!0:Y.redKingMoved=!0:H.toLowerCase()==="r"&&(xn(H)==="blue"?(U.col===0&&(Y.blueRooksMove.left=!0),U.col===7&&(Y.blueRooksMove.right=!0)):(U.col===0&&(Y.redRooksMove.left=!0),U.col===7&&(Y.redRooksMove.right=!0))),H.toLowerCase()==="p"&&Math.abs(U.row-z.row)===2?Y.lastPawnDoubleMove={row:z.row,col:z.col}:Y.lastPawnDoubleMove=null,V(Y)},eD=(U,z,H="q",Y=!1)=>{o[U.row][U.col];const me=o[z.row][z.col]!==null;if(ep(me?"capture":"move"),me){M({row:z.row,col:z.col,show:!0}),setTimeout(()=>{V3(U,z,Y),M(null)},500);return}V3(U,z,Y)},[tD,TK]=D.useState(!0),[BA,nD]=D.useState(!1),ep=U=>{if(!tD)return;let z="";switch(U){case"move":z="/images/move.mp3";break;case"capture":z="/images/capture.mp3";break;case"check":z="/images/play.mp3";break;case"checkmate":z="/images/victory.mp3";break;case"victory":z="/images/victory.mp3";break;default:z="/images/move.mp3"}new Audio(z).play().catch(()=>{})},NK=()=>{if(BA){ep("victory");for(let U=0;U<50;U++)setTimeout(()=>{const z=document.createElement("div");z.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(z),setTimeout(()=>z.remove(),3e3)},U*100);setTimeout(()=>nD(!1),5e3)}},[PK,rD]=D.useState(!1),[kK,sD]=D.useState(!1),iD=()=>{rD(!1),sD(!1)},LA=()=>{iD(),pK()},MA=()=>{iD(),R(!1)},OK=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},RK="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",DK=gUe.abi,[jA,$y]=D.useState(!1),[oD,$K]=D.useState([]),[UK,aD]=D.useState(!1),[cD,Rd]=D.useState(null),[FA,BK]=D.useState(""),[zA,lD]=D.useState(!1),[uD,dD]=D.useState(null),[hD,tp]=D.useState(null),[On,LK]=D.useState(null),[MK,i1]=D.useState(!1),jK=()=>{if(typeof window<"u"&&window.ethereum)return new Rk(window.ethereum);throw new Error("No wallet provider found")},HA=async()=>{const z=await jK().getSigner();return new Tg(RK,DK,z)},fD=D.useCallback(async()=>{try{const z=await(await HA()).playerToGame(r);if(z&&z!=="0x00000000000000"){console.log("Found active game for player:",z);const{data:H,error:Y}=await jl.from("chess_games").select("*").eq("game_id",z).eq("chain","sanko").single();H&&!Y?(LK(H),i1(!0)):console.log("No Supabase entry found for game:",z)}else console.log("No active game found for player")}catch(U){console.error("Error checking active game:",U)}},[r]),o1=D.useCallback(async()=>{aD(!0),Rd(null);try{const{data:U,error:z}=await jl.from("chess_games").select("*").eq("game_state","waiting").eq("is_public",!0).order("created_at",{ascending:!1});if(z)throw z;const H=(U||[]).map(Y=>{var K;return{inviteCode:Y.game_id,wagerAmount:((K=Y.bet_amount)==null?void 0:K.toString())||"0",player1:Y.blue_player}});$K(H)}catch(U){Rd("Failed to load open games: "+(U.message||U))}finally{aD(!1)}},[]);D.useEffect(()=>{k&&!jA&&($y(!0),fD(),o1())},[k,jA,o1,fD]);const FK=async()=>{lD(!0),tp(null),Rd(null);try{const U=await HA(),z=Se(Yv(6)),H=bI(FA||"0"),Y=await U.createGame(z,{value:H});tp("Waiting for transaction confirmation..."),await Y.wait();try{const{error:K}=await jl.from("chess_games").insert({game_id:z,blue_player:r,board:JSON.stringify({positions:o,piece_state:j}),current_player:"blue",game_state:"waiting",bet_amount:H.toString(),chain:"sanko",is_public:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});K&&console.warn("Supabase game creation failed:",K)}catch(K){console.warn("Supabase game creation error:",K)}tp("Game created! Waiting for opponent..."),qA(!0),WA(z),R(!0),$y(!1),w(`Game ${z} created - Waiting for opponent to join...`),console.log("Successfully created game and transitioned to multiplayer state"),o1()}catch(U){Rd("Failed to create game: "+(U.message||U))}finally{lD(!1)}},zK=async()=>{if(On)try{console.log("Resuming game:",On);const U=typeof On.board=="string"?JSON.parse(On.board):On.board;a(U.positions||TE),V(U.piece_state||{}),l(On.current_player||"blue"),f(On.game_state||"active"),b(On.move_history||[]),qA(!0),WA(On.game_id),i1(!1),$y(!1),R(!0),w(`Resumed game ${On.game_id} - ${On.current_player==="blue"?"Blue":"Red"} to move`),console.log("Game resumed successfully")}catch(U){console.error("Error resuming game:",U),Rd("Failed to resume game")}},HK=async(U,z)=>{dD(U),tp(null),Rd(null);try{const H=await HA();let Y;typeof z=="string"?z.includes(".")?Y=bI(z):Y=De(z):Y=bI(String(z));const K=await H.joinGame(U,{value:Y});tp("Waiting for transaction confirmation..."),await K.wait();try{const{error:me}=await jl.from("chess_games").update({red_player:r,game_state:"active",updated_at:new Date().toISOString()}).eq("game_id",U).eq("chain","sanko");me&&console.warn("Supabase game update failed:",me)}catch(me){console.warn("Supabase game update error:",me)}tp("Joined game!"),qA(!0),WA(U),R(!0),$y(!1),w(`Joined game ${U} - Red to move`),console.log("Successfully joined game and transitioned to multiplayer state"),o1()}catch(H){Rd("Failed to join game: "+(H.message||H))}finally{dD(null)}},WK=()=>{var U,z,H,Y;return MK&&On&&m.jsx("div",{className:"chess-lobby-modal",children:m.jsxs("div",{className:"chess-lobby-content",children:[m.jsx("h2",{children:"Active Game Found!"}),m.jsx("button",{onClick:()=>i1(!1),style:{float:"right"},children:"Close"}),m.jsxs("div",{style:{marginBottom:16},children:[m.jsx("p",{children:"You have an active game in progress:"}),m.jsxs("p",{children:[m.jsx("strong",{children:"Game ID:"})," ",On.game_id]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Status:"})," ",On.game_state]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Wager:"})," ",(()=>{try{const K=On.bet_amount||"0";return typeof K=="string"&&K.includes(".")?K+" tDMT":wI(K)+" tDMT"}catch{return(On.bet_amount||"0")+" tDMT"}})()]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Player 1:"})," ",(U=On.blue_player)==null?void 0:U.slice(0,6),"...",(z=On.blue_player)==null?void 0:z.slice(-4)]}),On.red_player&&m.jsxs("p",{children:[m.jsx("strong",{children:"Player 2:"})," ",(H=On.red_player)==null?void 0:H.slice(0,6),"...",(Y=On.red_player)==null?void 0:Y.slice(-4)]})]}),m.jsxs("div",{style:{display:"flex",gap:8},children:[m.jsx("button",{onClick:zK,style:{backgroundColor:"#4CAF50",color:"white"},children:"Resume Game"}),m.jsx("button",{onClick:()=>i1(!1),style:{backgroundColor:"#f44336",color:"white"},children:"Continue to Lobby"})]})]})})},qK=()=>jA&&m.jsx("div",{className:"chess-lobby-modal",children:m.jsxs("div",{className:"chess-lobby-content",children:[m.jsx("h2",{children:"Multiplayer Lobby"}),m.jsx("button",{onClick:()=>$y(!1),style:{float:"right"},children:"Close"}),m.jsxs("div",{style:{marginBottom:16},children:[m.jsx("label",{children:"Wager (tDMT): "}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:FA,onChange:U=>BK(U.target.value),disabled:zA}),m.jsx("button",{onClick:FK,disabled:zA||!FA,style:{marginLeft:8},children:zA?"Creating...":"Create Game"})]}),hD&&m.jsx("div",{style:{color:"green",marginBottom:8},children:hD}),cD&&m.jsx("div",{style:{color:"red",marginBottom:8},children:cD}),m.jsx("h3",{children:"Open Games"}),UK?m.jsx("div",{children:"Loading open games..."}):oD.length===0?m.jsx("div",{children:"No open games. Create one above!"}):m.jsxs("table",{className:"chess-lobby-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Invite Code"}),m.jsx("th",{children:"Wager (tDMT)"}),m.jsx("th",{children:"Player 1"}),m.jsx("th",{children:"Action"})]})}),m.jsx("tbody",{children:oD.map(U=>m.jsxs("tr",{children:[m.jsx("td",{children:U.inviteCode}),m.jsx("td",{children:(()=>{try{return typeof U.wagerAmount=="string"?U.wagerAmount.includes(".")?U.wagerAmount:wI(U.wagerAmount):wI(U.wagerAmount.toString())}catch{return U.wagerAmount||"0"}})()}),m.jsxs("td",{children:[U.player1.slice(0,6),"...",U.player1.slice(-4)]}),m.jsx("td",{children:m.jsx("button",{onClick:()=>HK(U.inviteCode,U.wagerAmount),disabled:uD===U.inviteCode,children:uD===U.inviteCode?"Joining...":"Join"})})]},U.inviteCode))})]})]})}),[a1,WA]=D.useState(null),[pD,qA]=D.useState(!1),[gD,GK]=D.useState(null);return D.useEffect(()=>{if(!pD||!a1)return;gD&&jl.removeChannel(gD);const U=jl.channel("chess_game_"+a1).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chess_games",filter:`game_id=eq.${a1}`},z=>{var Y,K;const H=z.new;H&&(a(((Y=H.board)==null?void 0:Y.positions)||TE),l(H.current_player||"blue"),V(((K=H.board)==null?void 0:K.piece_state)||{}),f(H.game_state||"active"),b(H.move_history||[]))}).subscribe();return GK(U),()=>{jl.removeChannel(U)}},[pD,a1]),m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${je?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""}),m.jsx("button",{className:"dark-mode-toggle",onClick:qt,title:je?"Switch to light mode":"Switch to dark mode","aria-label":je?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:je?"":""})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[k&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"move-history-status",children:y}),m.jsxs("div",{className:"move-history",children:[m.jsx("div",{className:"move-history-title",children:"Move History"}),m.jsx("ul",{className:"move-history-list",children:v.slice().reverse().map((U,z)=>m.jsx("li",{children:typeof U=="string"?U:JSON.stringify(U)},v.length-1-z))})]})]}),!k&&m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,10).map((U,z)=>{if(typeof U=="object"&&U!==null&&"username"in U&&"wins"in U&&"losses"in U&&"draws"in U&&"points"in U){const H=U;return m.jsxs("tr",{children:[m.jsx("td",{children:z+1}),m.jsx("td",{children:Z3(H.username)}),m.jsx("td",{children:H.wins}),m.jsx("td",{children:H.losses}),m.jsx("td",{children:H.draws}),m.jsx("td",{children:H.points})]},H.username)}return null})})]})})]})]}),m.jsxs("div",{className:"center-area",children:[m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:s===Wd.AI?"NA":`${$} ETH`}),k&&!le&&m.jsxs("span",{className:"mode-play",children:["Mode: ",p==="easy"?"Easy":"Hard"]}),p==="easy"&&m.jsxs("span",{className:`stockfish-status ${kt}`,children:["LawbBot: ",kt==="loading"?"Loading...":kt==="ready"?"Ready":"Failed"]}),p==="hard"&&m.jsxs("span",{className:`stockfish-status ${kt}`,children:["LawbBot: ",kt==="loading"?"Loading...":kt==="ready"?"Ready":"Failed"]}),Di&&hl.length>0&&m.jsxs("div",{className:"opening-suggestions",children:[m.jsx("span",{className:"opening-label",children:"Opening:"}),hl.map((U,z)=>{const H=U,Y=(H==null?void 0:H.san)||"",K=typeof(H==null?void 0:H.white)=="number"?H.white:0,me=typeof(H==null?void 0:H.draws)=="number"?H.draws:0,Ae=typeof(H==null?void 0:H.black)=="number"?H.black:0;return m.jsxs("span",{className:"opening-move",children:[Y," (",Math.round(K+me+Ae)," games)"]},z)})]})]})}),k?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Oy})`},children:[Array.from({length:8},(U,z)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(H,Y)=>vK(z,Y))},z)),N&&N.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>Fe(!0),children:"Chess Piece Info"}),m.jsx("button",{onClick:LA,children:"New Game"}),m.jsx("button",{onClick:MA,children:"Back to Menu"})]}),m.jsxs("div",{className:"epic-controls",children:[m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:tD,onChange:U=>TK(U.target.checked)}),m.jsx("label",{htmlFor:"sound-toggle",children:" Sound Effects"})]}),m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:BA,onChange:U=>nD(U.target.checked)}),m.jsx("label",{htmlFor:"victory-toggle",children:" Victory Celebration"})]})]})]}):le?CK():m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${s===Wd.AI?"selected":""}`,onClick:()=>i(Wd.AI),children:"Single Player"}),m.jsx("button",{className:`mode-btn ${s===Wd.ONLINE?"selected":""}`,onClick:()=>{i(Wd.ONLINE),yK()},children:"PvP"}),m.jsx("button",{className:"start-btn continue-btn",onClick:()=>se(!0),children:"Continue"}),m.jsxs("div",{className:"how-to-section",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"how-to-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Points System:"})," Win points by defeating the AI. 1 win = 10pts. 1 draw = 1 point."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:k?m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,10).map((U,z)=>{if(typeof U=="object"&&U!==null&&"username"in U&&"wins"in U&&"losses"in U&&"draws"in U&&"points"in U){const H=U;return m.jsxs("tr",{children:[m.jsx("td",{children:z+1}),m.jsx("td",{children:Z3(H.username)}),m.jsx("td",{children:H.wins}),m.jsx("td",{children:H.losses}),m.jsx("td",{children:H.draws}),m.jsx("td",{children:H.points})]},H.username)}return null})})]})})]}):m.jsx("div",{className:"piece-gallery-panel",children:X3(!1)})})]}),pe&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>Fe(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:U=>U.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>Fe(!1),children:""}),X3(!1)]})}),EK(),Ce&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),PK&&BA&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:LA,children:"New Game"}),m.jsx("button",{onClick:MA,children:"Back to Menu"})]})]}),kK&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(U=>m.jsx("div",{className:"blood-drip",style:{left:`${10+U*14}%`,animationDelay:`${.5+U*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},U))}),m.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:LA,children:"New Game"}),m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:MA,children:"Back to Menu"})]})]})]}),wK(),WK(),qK()]})};function nL(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const rL=()=>{const[t,e]=D.useState(!1),{address:n,isConnected:r}=jm(),{open:s}=Gv(),[i,o]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),a=()=>{o(l=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!l)),!l))};D.useEffect(()=>{typeof document<"u"&&(i?document.body.classList.add("chess-dark-mode"):document.body.classList.remove("chess-dark-mode"))},[i]);const c=()=>{t?window.location.href="https://lawb.xyz":(e(!0),window.setTimeout(()=>e(!1),4e3))};return m.jsxs("div",{className:`chess98-main-window${i?" chess-dark-mode":""}`,children:[m.jsxs("div",{className:"chess98-header",children:[m.jsx("button",{className:"chess98-back-btn",onClick:c,children:t?"warning this will end current game":"Back to Desktop"}),m.jsx("span",{className:"chess98-title",children:"LAWB CHESS"}),m.jsxs("span",{className:"chess98-wallet-status",children:[r&&n?m.jsxs("span",{title:n,children:[n.slice(0,6),"...",n.slice(-4)]}):m.jsx("span",{style:{color:"#fff",cursor:"pointer"},onClick:()=>{s()},children:"Connect Wallet"}),m.jsx("button",{className:"dark-mode-toggle",onClick:a,title:i?"Switch to light mode":"Switch to dark mode","aria-label":i?"Switch to light mode":"Switch to dark mode",style:{marginLeft:16},children:i?"":""})]})]}),m.jsx("div",{className:"chess98-content",children:r&&n?m.jsx(vUe,{fullscreen:!0,onClose:()=>{},onMinimize:()=>{}}):m.jsxs("div",{className:"wallet-required",style:{marginTop:80},children:[m.jsx("h3",{style:{marginBottom:12,color:i?"#00ff00":"#0a2a7a"},children:"Wallet Required"}),m.jsxs("p",{style:{color:i?"#00ff00":"#222"},children:["You must connect your wallet to play chess and appear on the leaderboard.",m.jsx("br",{}),m.jsx("span",{style:{fontSize:13,opacity:.8},children:"(Wallet address is your username.)"})]}),m.jsx("button",{className:"start-btn",style:{marginTop:18,background:i?"#222":"#008000",color:i?"#00ff00":"#fff",border:i?"2px solid #00ff00":void 0},onClick:()=>{s()},children:"Connect Wallet"})]})})]})},EUe=new zre,_Ue=typeof window<"u"&&window.location.hostname.startsWith("chess."),xUe=()=>lOe("(max-width: 768px)")?m.jsx(cOe,{}):m.jsx(eOe,{});BI.createRoot(document.getElementById("root")).render(m.jsx(xi.StrictMode,{children:m.jsx(tre,{config:Uq.wagmiConfig,children:m.jsx(nse,{client:EUe,children:m.jsx(Zke,{children:m.jsx(Qke,{children:_Ue?m.jsx(o_,{path:"/*",element:m.jsx(rL,{})}):m.jsxs(m.Fragment,{children:[m.jsx(o_,{path:"/",element:m.jsx(xUe,{})}),m.jsx(o_,{path:"/chess",element:m.jsx(rL,{})})]})})})})})}));export{F4e as $,ve as A,qe as B,_e as C,Dr as D,rw as E,Rr as F,ze as G,MN as H,k0 as I,Mo as J,_de as K,Kt as L,Dt as M,wde as N,he as O,wi as P,r_ as Q,Ve as R,zo as S,Fs as T,gb as U,Ab as V,pr as W,G4e as X,MP as Y,nhe as Z,fw as _,i_ as a,uy as a$,ur as a0,Bf as a1,Tn as a2,H4e as a3,fq as a4,jP as a5,Km as a6,Rn as a7,HUe as a8,Bu as a9,GF as aA,qF as aB,dd as aC,X0 as aD,Xc as aE,DUe as aF,YY as aG,mf as aH,RUe as aI,$Ue as aJ,z_ as aK,BUe as aL,vX as aM,Fj as aN,OUe as aO,bC as aP,Fw as aQ,H_ as aR,Jx as aS,LUe as aT,EX as aU,S8 as aV,Hne as aW,Eae as aX,lo as aY,Lte as aZ,Bte as a_,qa as aa,ab,Je as ac,Qn as ad,Kl as ae,JF as af,CC as ag,W_ as ah,WO as ai,ud as aj,PUe as ak,xC as al,qO as am,NUe as an,TUe as ao,eF as ap,yC as aq,F_ as ar,BY as as,zY as at,jUe as au,Uee as av,ue as aw,BO as ax,ys as ay,Lee as az,jt as b,gf as b0,pC as b1,vs as b2,Ln as b3,Iv as b4,ie as c,Le as d,L as e,Ft as f,Mc as g,q4e as h,_g as i,vi as j,Oe as k,dn as l,mPe as m,Fn as n,yPe as o,Ee as p,mn as q,W4e as r,Pt as s,V7 as t,an as u,Yde as v,Ri as w,j4e as x,CR as y,Q7 as z};
